const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-vS5yUOdw.js","./function-Bl_mgn-U.js","./wrapNativeSuper-ezTqcbMv.js","./index-uubelm5h.js","./iframe-DqZmXI-W.js","./index.module-CpYV649t.js","./wasm-Bx8laepE.js","./index-BK_xiHMm.js","./index-TW2i6qtr.js","./button-C0wn-hKP.js","./function-xBkw6gzU.css"])))=>i.map(i=>d[i]);
import{_ as Zt,j as F}from"./wrapNativeSuper-ezTqcbMv.js";import{r as S,R as j,c as Ws,g as DC,b as $0}from"./index-uubelm5h.js";import{j as xC,k as wC,l as CC,m as EC,D as z0,p as yt,b as mn,g as bu,f as L0,P as j0,R as Au,a as wl,I as bC,c as AC,H as SC}from"./diff-icon-DPBf0RNA.js";import{ah as eo,K as H0,L as hs,M as FC,Z as V0,ai as NC,H as U0,N as TC,C as Ho,u as Su,c as Wn,aj as IC,ak as kC,n as BC,al as RC,m as MC,Q as OC,am as PC,an as $C,q as zC,a as LC,ao as jC,I as Wt,z as Ge,T as Tt,S as qe,i as lo,V as gn,a5 as ss,ap as HC,t as VC}from"./wasm-Bx8laepE.js";import{N as UC,b as po,c as GC,d as ZC,e as WC,f as qC,g as XC,r as YC,A as KC,h as go,i as JC,j as to,M as vd,s as Mt,k as Ye,D as QC,l as _d,F as wr,m as eE,n as Pl,o as G0,a as tE,p as nE,q as rE,T as iE}from"./dt-CvjH0IWh.js";import{R as sE,c as oE}from"./index.module-CpYV649t.js";import{r as aE}from"./index-BK_xiHMm.js";import{E as uE}from"./expression-BtGGwvg4.js";import{c as Xe}from"./ce-CtUDvOBw.js";import{r as cE,B as dt}from"./button-C0wn-hKP.js";import{R as lE,S as Dd,a as dE,d as fE}from"./function-Bl_mgn-U.js";import{_ as hE}from"./iframe-DqZmXI-W.js";const pE=e=>{const{componentCls:t,notificationMarginEdge:n,animationMaxHeight:i}=e,o=`${t}-notice`,a=new eo("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),u=new eo("antNotificationTopFadeIn",{"0%":{top:-i,opacity:0},"100%":{top:0,opacity:1}}),l=new eo("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(i).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),d=new eo("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[o]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:u}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:l}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:a}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:n,_skip_check_:!0},[o]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:d}}}}},gE=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],mE={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},yE=(e,t)=>{const{componentCls:n}=e;return{[`${n}-${t}`]:{[`&${n}-stack > ${n}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[mE[t]]:{value:0,_skip_check_:!0}}}}},vE=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},_E=e=>{const t={};for(let n=1;n<e.notificationStackLayer;n++)t[`&:nth-last-child(${n+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},DE=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},vE(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},_E(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},gE.map(n=>yE(e,n)).reduce((n,i)=>Object.assign(Object.assign({},n),i),{}))},Z0=e=>{const{iconCls:t,componentCls:n,boxShadow:i,fontSizeLG:o,notificationMarginBottom:a,borderRadiusLG:u,colorSuccess:l,colorInfo:d,colorWarning:f,colorError:h,colorTextHeading:g,notificationBg:m,notificationPadding:D,notificationMarginEdge:x,notificationProgressBg:v,notificationProgressHeight:w,fontSize:_,lineHeight:A,width:I,notificationIconSize:N,colorText:$}=e,z=`${n}-notice`;return{position:"relative",marginBottom:a,marginInlineStart:"auto",background:m,borderRadius:u,boxShadow:i,[z]:{padding:D,width:I,maxWidth:`calc(100vw - ${hs(e.calc(x).mul(2).equal())})`,overflow:"hidden",lineHeight:A,wordWrap:"break-word"},[`${z}-message`]:{marginBottom:e.marginXS,color:g,fontSize:o,lineHeight:e.lineHeightLG},[`${z}-description`]:{fontSize:_,color:$},[`${z}-closable ${z}-message`]:{paddingInlineEnd:e.paddingLG},[`${z}-with-icon ${z}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(N).equal(),fontSize:o},[`${z}-with-icon ${z}-description`]:{marginInlineStart:e.calc(e.marginSM).add(N).equal(),fontSize:_},[`${z}-icon`]:{position:"absolute",fontSize:N,lineHeight:1,[`&-success${t}`]:{color:l},[`&-info${t}`]:{color:d},[`&-warning${t}`]:{color:f},[`&-error${t}`]:{color:h}},[`${z}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},FC(e)),[`${z}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${hs(u)} * 2)`,left:{_skip_check_:!0,value:u},right:{_skip_check_:!0,value:u},bottom:0,blockSize:w,border:0,"&, &::-webkit-progress-bar":{borderRadius:u,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:v},"&::-webkit-progress-value":{borderRadius:u,background:v}},[`${z}-btn`]:{float:"right",marginTop:e.marginSM}}},xE=e=>{const{componentCls:t,notificationMarginBottom:n,notificationMarginEdge:i,motionDurationMid:o,motionEaseInOut:a}=e,u=`${t}-notice`,l=new eo("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:n},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},V0(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:i,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:a,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:a,animationFillMode:"both",animationDuration:o,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:l,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${u}-btn`]:{float:"left"}}})},{[t]:{[`${u}-wrapper`]:Object.assign({},Z0(e))}}]},W0=e=>({zIndexPopup:e.zIndexPopupBase+NC+50,width:384}),q0=e=>{const t=e.paddingMD,n=e.paddingLG;return U0(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:n,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${hs(e.paddingMD)} ${hs(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},X0=H0("Notification",e=>{const t=q0(e);return[xE(t),pE(t),DE(t)]},W0),wE=TC(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,n=q0(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},Z0(n)),{width:n.width,maxWidth:`calc(100vw - ${hs(e.calc(n.notificationMarginEdge).mul(2).equal())})`,margin:0})}},W0);var CE=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n};function xd(e,t){return t===null||t===!1?null:t||S.createElement(po,{className:`${e}-close-icon`})}const EE={success:GC,info:ZC,error:IC,warning:xC},Y0=e=>{const{prefixCls:t,icon:n,type:i,message:o,description:a,btn:u,role:l="alert"}=e;let d=null;return n?d=S.createElement("span",{className:`${t}-icon`},n):i&&(d=S.createElement(EE[i]||null,{className:Wn(`${t}-icon`,`${t}-icon-${i}`)})),S.createElement("div",{className:Wn({[`${t}-with-icon`]:d}),role:l},d,S.createElement("div",{className:`${t}-message`},o),S.createElement("div",{className:`${t}-description`},a),u&&S.createElement("div",{className:`${t}-btn`},u))},bE=e=>{const{prefixCls:t,className:n,icon:i,type:o,message:a,description:u,btn:l,closable:d=!0,closeIcon:f,className:h}=e,g=CE(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:m}=S.useContext(Ho),D=t||m("notification"),x=`${D}-notice`,v=Su(D),[w,_,A]=X0(D,v);return w(S.createElement("div",{className:Wn(`${x}-pure-panel`,_,n,A,v)},S.createElement(wE,{prefixCls:D}),S.createElement(UC,Object.assign({},g,{prefixCls:D,eventKey:"pure",duration:null,closable:d,className:Wn({notificationClassName:h}),closeIcon:xd(D,f),content:S.createElement(Y0,{prefixCls:x,icon:i,type:o,message:a,description:u,btn:l})}))))};function AE(e,t,n){let i;switch(e){case"top":i={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":i={left:0,top:t,bottom:"auto"};break;case"topRight":i={right:0,top:t,bottom:"auto"};break;case"bottom":i={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:n};break;case"bottomLeft":i={left:0,top:"auto",bottom:n};break;default:i={right:0,top:"auto",bottom:n};break}return i}function SE(e){return{motionName:`${e}-fade`}}var FE=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n};const wp=24,NE=4.5,TE="topRight",IE=e=>{let{children:t,prefixCls:n}=e;const i=Su(n),[o,a,u]=X0(n,i);return o(j.createElement(qC,{classNames:{list:Wn(a,u,i)}},t))},kE=(e,t)=>{let{prefixCls:n,key:i}=t;return j.createElement(IE,{prefixCls:n,key:i},e)},BE=j.forwardRef((e,t)=>{const{top:n,bottom:i,prefixCls:o,getContainer:a,maxCount:u,rtl:l,onAllRemoved:d,stack:f,duration:h,pauseOnHover:g=!0,showProgress:m}=e,{getPrefixCls:D,getPopupContainer:x,notification:v,direction:w}=S.useContext(Ho),[,_]=BC(),A=o||D("notification"),I=X=>AE(X,n??wp,i??wp),N=()=>Wn({[`${A}-rtl`]:l??w==="rtl"}),$=()=>SE(A),[z,M]=WC({prefixCls:A,style:I,className:N,motion:$,closable:!0,closeIcon:xd(A),duration:h??NE,getContainer:()=>a?.()||x?.()||document.body,maxCount:u,pauseOnHover:g,showProgress:m,onAllRemoved:d,renderNotifications:kE,stack:f===!1?!1:{threshold:typeof f=="object"?f?.threshold:void 0,offset:8,gap:_.margin}});return j.useImperativeHandle(t,()=>Object.assign(Object.assign({},z),{prefixCls:A,notification:v})),M});function K0(e){const t=j.useRef(null);return kC(),[j.useMemo(()=>{const i=l=>{var d;if(!t.current)return;const{open:f,prefixCls:h,notification:g}=t.current,m=`${h}-notice`,{message:D,description:x,icon:v,type:w,btn:_,className:A,style:I,role:N="alert",closeIcon:$,closable:z}=l,M=FE(l,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),X=xd(m,typeof $<"u"?$:g?.closeIcon);return f(Object.assign(Object.assign({placement:(d=e?.placement)!==null&&d!==void 0?d:TE},M),{content:j.createElement(Y0,{prefixCls:m,icon:v,type:w,message:D,description:x,btn:_,role:N}),className:Wn(w&&`${m}-${w}`,A,g?.className),style:Object.assign(Object.assign({},g?.style),I),closeIcon:X,closable:z??!!X}))},a={open:i,destroy:l=>{var d,f;l!==void 0?(d=t.current)===null||d===void 0||d.close(l):(f=t.current)===null||f===void 0||f.destroy()}};return["success","info","warning","error"].forEach(l=>{a[l]=d=>i(Object.assign(Object.assign({},d),{type:l}))}),a},[]),j.createElement(BE,Object.assign({key:"notification-holder"},e,{ref:t}))]}function RE(e){return K0(e)}function ME(){const[,e]=S.useReducer(t=>t+1,0);return e}function OE(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const t=S.useRef({}),n=ME(),i=XC();return RC(()=>{const o=i.subscribe(a=>{t.current=a,e&&n()});return()=>i.unsubscribe(o)},[]),t.current}const $l=S.createContext({}),PE=e=>{const{antCls:t,componentCls:n,iconCls:i,avatarBg:o,avatarColor:a,containerSize:u,containerSizeLG:l,containerSizeSM:d,textFontSize:f,textFontSizeLG:h,textFontSizeSM:g,borderRadius:m,borderRadiusLG:D,borderRadiusSM:x,lineWidth:v,lineType:w}=e,_=(A,I,N)=>({width:A,height:A,borderRadius:"50%",[`&${n}-square`]:{borderRadius:N},[`&${n}-icon`]:{fontSize:I,[`> ${i}`]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},V0(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:a,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:o,border:`${hs(v)} ${w} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),_(u,f,m)),{"&-lg":Object.assign({},_(l,h,D)),"&-sm":Object.assign({},_(d,g,x)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},$E=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:i,groupSpace:o}=e;return{[`${t}-group`]:{display:"inline-flex",[t]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:i}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:o}}}},zE=e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:i,fontSize:o,fontSizeLG:a,fontSizeXL:u,fontSizeHeading3:l,marginXS:d,marginXXS:f,colorBorderBg:h}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:i,textFontSize:Math.round((a+u)/2),textFontSizeLG:l,textFontSizeSM:o,groupSpace:f,groupOverlapping:-d,groupBorderColor:h}},J0=H0("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,i=U0(e,{avatarBg:n,avatarColor:t});return[PE(i),$E(i)]},zE);var LE=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]]);return n};const jE=(e,t)=>{const[n,i]=S.useState(1),[o,a]=S.useState(!1),[u,l]=S.useState(!0),d=S.useRef(null),f=S.useRef(null),h=MC(t,d),{getPrefixCls:g,avatar:m}=S.useContext(Ho),D=S.useContext($l),x=()=>{if(!f.current||!d.current)return;const le=f.current.offsetWidth,ge=d.current.offsetWidth;if(le!==0&&ge!==0){const{gap:we=4}=e;we*2<ge&&i(ge-we*2<le?(ge-we*2)/le:1)}};S.useEffect(()=>{a(!0)},[]),S.useEffect(()=>{l(!0),i(1)},[e.src]),S.useEffect(x,[e.gap]);const v=()=>{const{onError:le}=e;le?.()!==!1&&l(!1)},{prefixCls:w,shape:_,size:A,src:I,srcSet:N,icon:$,className:z,rootClassName:M,alt:X,draggable:B,children:U,crossOrigin:K}=e,q=LE(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),G=OC(le=>{var ge,we;return(we=(ge=A??D?.size)!==null&&ge!==void 0?ge:le)!==null&&we!==void 0?we:"default"}),b=Object.keys(typeof G=="object"?G||{}:{}).some(le=>["xs","sm","md","lg","xl","xxl"].includes(le)),P=OE(b),O=S.useMemo(()=>{if(typeof G!="object")return{};const le=YC.find(we=>P[we]),ge=G[le];return ge?{width:ge,height:ge,fontSize:ge&&($||U)?ge/2:18}:{}},[P,G]),Z=g("avatar",w),ee=Su(Z),[H,ne,re]=J0(Z,ee),ae=Wn({[`${Z}-lg`]:G==="large",[`${Z}-sm`]:G==="small"}),W=S.isValidElement(I),ie=_||D?.shape||"circle",ue=Wn(Z,ae,m?.className,`${Z}-${ie}`,{[`${Z}-image`]:W||I&&u,[`${Z}-icon`]:!!$},re,ee,z,M,ne),de=typeof G=="number"?{width:G,height:G,fontSize:$?G/2:18}:{};let fe;if(typeof I=="string"&&u)fe=S.createElement("img",{src:I,draggable:B,srcSet:N,onError:v,alt:X,crossOrigin:K});else if(W)fe=I;else if($)fe=$;else if(o||n!==1){const le=`scale(${n})`,ge={msTransform:le,WebkitTransform:le,transform:le};fe=S.createElement(PC,{onResize:x},S.createElement("span",{className:`${Z}-string`,ref:f,style:Object.assign({},ge)},U))}else fe=S.createElement("span",{className:`${Z}-string`,style:{opacity:0},ref:f},U);return delete q.onError,delete q.gap,H(S.createElement("span",Object.assign({},q,{style:Object.assign(Object.assign(Object.assign(Object.assign({},de),O),m?.style),q.style),className:ue,ref:h}),fe))},Q0=S.forwardRef(jE),Cp=e=>{const{size:t,shape:n}=S.useContext($l),i=S.useMemo(()=>({size:e.size||t,shape:e.shape||n}),[e.size,e.shape,t,n]);return S.createElement($l.Provider,{value:i},e.children)},HE=e=>{var t,n,i;const{getPrefixCls:o,direction:a}=S.useContext(Ho),{prefixCls:u,className:l,rootClassName:d,style:f,maxCount:h,maxStyle:g,size:m,shape:D,maxPopoverPlacement:x,maxPopoverTrigger:v,children:w,max:_}=e,A=o("avatar",u),I=`${A}-group`,N=Su(A),[$,z,M]=J0(A,N),X=Wn(I,{[`${I}-rtl`]:a==="rtl"},M,N,l,d,z),B=$C(w).map((q,G)=>zC(q,{key:`avatar-key-${G}`})),U=_?.count||h,K=B.length;if(U&&U<K){const q=B.slice(0,U),G=B.slice(U,K),b=_?.style||g,P=((t=_?.popover)===null||t===void 0?void 0:t.trigger)||v||"hover",O=((n=_?.popover)===null||n===void 0?void 0:n.placement)||x||"top",Z=Object.assign(Object.assign({content:G},_?.popover),{overlayClassName:Wn(`${I}-popover`,(i=_?.popover)===null||i===void 0?void 0:i.overlayClassName),placement:O,trigger:P});return q.push(S.createElement(wC,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},Z),S.createElement(Q0,{style:b},`+${K-U}`))),$(S.createElement(Cp,{shape:D,size:m},S.createElement("div",{className:X,style:f},q)))}return $(S.createElement(Cp,{shape:D,size:m},S.createElement("div",{className:X,style:f},B)))},eg=Q0;eg.Group=HE;let zn=null,Xa=e=>e(),ru=[],mo={};function Ep(){const{getContainer:e,rtl:t,maxCount:n,top:i,bottom:o,showProgress:a,pauseOnHover:u}=mo,l=e?.()||document.body;return{getContainer:()=>l,rtl:t,maxCount:n,top:i,bottom:o,showProgress:a,pauseOnHover:u}}const VE=j.forwardRef((e,t)=>{const{notificationConfig:n,sync:i}=e,{getPrefixCls:o}=S.useContext(Ho),a=mo.prefixCls||o("notification"),u=S.useContext(KC),[l,d]=K0(Object.assign(Object.assign(Object.assign({},n),{prefixCls:a}),u.notification));return j.useEffect(i,[]),j.useImperativeHandle(t,()=>{const f=Object.assign({},l);return Object.keys(f).forEach(h=>{f[h]=function(){return i(),l[h].apply(l,arguments)}}),{instance:f,sync:i}}),d}),UE=j.forwardRef((e,t)=>{const[n,i]=j.useState(Ep),o=()=>{i(Ep)};j.useEffect(o,[]);const a=jC(),u=a.getRootPrefixCls(),l=a.getIconPrefixCls(),d=a.getTheme(),f=j.createElement(VE,{ref:t,sync:o,notificationConfig:n});return j.createElement(LC,{prefixCls:u,iconPrefixCls:l,theme:d},a.holderRender?a.holderRender(f):f)});function wd(){if(!zn){const e=document.createDocumentFragment(),t={fragment:e};zn=t,Xa(()=>{cE(j.createElement(UE,{ref:n=>{const{instance:i,sync:o}=n||{};Promise.resolve().then(()=>{!t.instance&&i&&(t.instance=i,t.sync=o,wd())})}}),e)});return}zn.instance&&(ru.forEach(e=>{switch(e.type){case"open":{Xa(()=>{zn.instance.open(Object.assign(Object.assign({},mo),e.config))});break}case"destroy":Xa(()=>{zn?.instance.destroy(e.key)});break}}),ru=[])}function GE(e){mo=Object.assign(Object.assign({},mo),e),Xa(()=>{var t;(t=zn?.sync)===null||t===void 0||t.call(zn)})}function tg(e){ru.push({type:"open",config:e}),wd()}const ZE=e=>{ru.push({type:"destroy",key:e}),wd()},WE=["success","info","warning","error"],qE={open:tg,destroy:ZE,config:GE,useNotification:RE,_InternalPanelDoNotUseOrYouWillBeFired:bE},zl=qE;WE.forEach(e=>{zl[e]=t=>tg(Object.assign(Object.assign({},t),{type:e}))});var XE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},YE=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:XE}))},ng=S.forwardRef(YE),KE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"},JE=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:KE}))},QE=S.forwardRef(JE),e2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},t2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:e2}))},n2=S.forwardRef(t2),r2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},i2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:r2}))},s2=S.forwardRef(i2),o2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},a2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:o2}))},u2=S.forwardRef(a2),c2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},l2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:c2}))},d2=S.forwardRef(l2),f2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},h2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:f2}))},p2=S.forwardRef(h2),g2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"},m2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:g2}))},y2=S.forwardRef(m2),v2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},_2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:v2}))},D2=S.forwardRef(_2),x2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"},w2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:x2}))},C2=S.forwardRef(w2),E2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},b2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:E2}))},A2=S.forwardRef(b2),S2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},F2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:S2}))},rg=S.forwardRef(F2),N2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},T2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:N2}))},I2=S.forwardRef(T2),k2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},B2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:k2}))},R2=S.forwardRef(B2),M2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},O2=function(t,n){return S.createElement(Wt,Zt({},t,{ref:n,icon:M2}))},P2=S.forwardRef(O2),$2=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,z2=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,L2=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Cl={Space_Separator:$2,ID_Start:z2,ID_Continue:L2},wt={isSpaceSeparator(e){return typeof e=="string"&&Cl.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||Cl.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e==="‌"||e==="‍"||Cl.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let Ll,Ut,Cr,iu,qr,Vn,Nt,Cd,fo;var j2=function(t,n){Ll=String(t),Ut="start",Cr=[],iu=0,qr=1,Vn=0,Nt=void 0,Cd=void 0,fo=void 0;do Nt=H2(),G2[Ut]();while(Nt.type!=="eof");return typeof n=="function"?jl({"":fo},"",n):fo};function jl(e,t,n){const i=e[t];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let o=0;o<i.length;o++){const a=String(o),u=jl(i,a,n);u===void 0?delete i[a]:Object.defineProperty(i,a,{value:u,writable:!0,enumerable:!0,configurable:!0})}else for(const o in i){const a=jl(i,o,n);a===void 0?delete i[o]:Object.defineProperty(i,o,{value:a,writable:!0,enumerable:!0,configurable:!0})}return n.call(e,t,i)}let Me,Te,no,Dr,Ue;function H2(){for(Me="default",Te="",no=!1,Dr=1;;){Ue=Ar();const e=ig[Me]();if(e)return e}}function Ar(){if(Ll[iu])return String.fromCodePoint(Ll.codePointAt(iu))}function te(){const e=Ar();return e===`
`?(qr++,Vn=0):e?Vn+=e.length:Vn++,e&&(iu+=e.length),e}const ig={default(){switch(Ue){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":te();return;case"/":te(),Me="comment";return;case void 0:return te(),at("eof")}if(wt.isSpaceSeparator(Ue)){te();return}return ig[Ut]()},comment(){switch(Ue){case"*":te(),Me="multiLineComment";return;case"/":te(),Me="singleLineComment";return}throw ut(te())},multiLineComment(){switch(Ue){case"*":te(),Me="multiLineCommentAsterisk";return;case void 0:throw ut(te())}te()},multiLineCommentAsterisk(){switch(Ue){case"*":te();return;case"/":te(),Me="default";return;case void 0:throw ut(te())}te(),Me="multiLineComment"},singleLineComment(){switch(Ue){case`
`:case"\r":case"\u2028":case"\u2029":te(),Me="default";return;case void 0:return te(),at("eof")}te()},value(){switch(Ue){case"{":case"[":return at("punctuator",te());case"n":return te(),fi("ull"),at("null",null);case"t":return te(),fi("rue"),at("boolean",!0);case"f":return te(),fi("alse"),at("boolean",!1);case"-":case"+":te()==="-"&&(Dr=-1),Me="sign";return;case".":Te=te(),Me="decimalPointLeading";return;case"0":Te=te(),Me="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Te=te(),Me="decimalInteger";return;case"I":return te(),fi("nfinity"),at("numeric",1/0);case"N":return te(),fi("aN"),at("numeric",NaN);case'"':case"'":no=te()==='"',Te="",Me="string";return}throw ut(te())},identifierNameStartEscape(){if(Ue!=="u")throw ut(te());te();const e=Hl();switch(e){case"$":case"_":break;default:if(!wt.isIdStartChar(e))throw bp();break}Te+=e,Me="identifierName"},identifierName(){switch(Ue){case"$":case"_":case"‌":case"‍":Te+=te();return;case"\\":te(),Me="identifierNameEscape";return}if(wt.isIdContinueChar(Ue)){Te+=te();return}return at("identifier",Te)},identifierNameEscape(){if(Ue!=="u")throw ut(te());te();const e=Hl();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!wt.isIdContinueChar(e))throw bp();break}Te+=e,Me="identifierName"},sign(){switch(Ue){case".":Te=te(),Me="decimalPointLeading";return;case"0":Te=te(),Me="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Te=te(),Me="decimalInteger";return;case"I":return te(),fi("nfinity"),at("numeric",Dr*(1/0));case"N":return te(),fi("aN"),at("numeric",NaN)}throw ut(te())},zero(){switch(Ue){case".":Te+=te(),Me="decimalPoint";return;case"e":case"E":Te+=te(),Me="decimalExponent";return;case"x":case"X":Te+=te(),Me="hexadecimal";return}return at("numeric",Dr*0)},decimalInteger(){switch(Ue){case".":Te+=te(),Me="decimalPoint";return;case"e":case"E":Te+=te(),Me="decimalExponent";return}if(wt.isDigit(Ue)){Te+=te();return}return at("numeric",Dr*Number(Te))},decimalPointLeading(){if(wt.isDigit(Ue)){Te+=te(),Me="decimalFraction";return}throw ut(te())},decimalPoint(){switch(Ue){case"e":case"E":Te+=te(),Me="decimalExponent";return}if(wt.isDigit(Ue)){Te+=te(),Me="decimalFraction";return}return at("numeric",Dr*Number(Te))},decimalFraction(){switch(Ue){case"e":case"E":Te+=te(),Me="decimalExponent";return}if(wt.isDigit(Ue)){Te+=te();return}return at("numeric",Dr*Number(Te))},decimalExponent(){switch(Ue){case"+":case"-":Te+=te(),Me="decimalExponentSign";return}if(wt.isDigit(Ue)){Te+=te(),Me="decimalExponentInteger";return}throw ut(te())},decimalExponentSign(){if(wt.isDigit(Ue)){Te+=te(),Me="decimalExponentInteger";return}throw ut(te())},decimalExponentInteger(){if(wt.isDigit(Ue)){Te+=te();return}return at("numeric",Dr*Number(Te))},hexadecimal(){if(wt.isHexDigit(Ue)){Te+=te(),Me="hexadecimalInteger";return}throw ut(te())},hexadecimalInteger(){if(wt.isHexDigit(Ue)){Te+=te();return}return at("numeric",Dr*Number(Te))},string(){switch(Ue){case"\\":te(),Te+=V2();return;case'"':if(no)return te(),at("string",Te);Te+=te();return;case"'":if(!no)return te(),at("string",Te);Te+=te();return;case`
`:case"\r":throw ut(te());case"\u2028":case"\u2029":Z2(Ue);break;case void 0:throw ut(te())}Te+=te()},start(){switch(Ue){case"{":case"[":return at("punctuator",te())}Me="value"},beforePropertyName(){switch(Ue){case"$":case"_":Te=te(),Me="identifierName";return;case"\\":te(),Me="identifierNameStartEscape";return;case"}":return at("punctuator",te());case'"':case"'":no=te()==='"',Me="string";return}if(wt.isIdStartChar(Ue)){Te+=te(),Me="identifierName";return}throw ut(te())},afterPropertyName(){if(Ue===":")return at("punctuator",te());throw ut(te())},beforePropertyValue(){Me="value"},afterPropertyValue(){switch(Ue){case",":case"}":return at("punctuator",te())}throw ut(te())},beforeArrayValue(){if(Ue==="]")return at("punctuator",te());Me="value"},afterArrayValue(){switch(Ue){case",":case"]":return at("punctuator",te())}throw ut(te())},end(){throw ut(te())}};function at(e,t){return{type:e,value:t,line:qr,column:Vn}}function fi(e){for(const t of e){if(Ar()!==t)throw ut(te());te()}}function V2(){switch(Ar()){case"b":return te(),"\b";case"f":return te(),"\f";case"n":return te(),`
`;case"r":return te(),"\r";case"t":return te(),"	";case"v":return te(),"\v";case"0":if(te(),wt.isDigit(Ar()))throw ut(te());return"\0";case"x":return te(),U2();case"u":return te(),Hl();case`
`:case"\u2028":case"\u2029":return te(),"";case"\r":return te(),Ar()===`
`&&te(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw ut(te());case void 0:throw ut(te())}return te()}function U2(){let e="",t=Ar();if(!wt.isHexDigit(t)||(e+=te(),t=Ar(),!wt.isHexDigit(t)))throw ut(te());return e+=te(),String.fromCodePoint(parseInt(e,16))}function Hl(){let e="",t=4;for(;t-- >0;){const n=Ar();if(!wt.isHexDigit(n))throw ut(te());e+=te()}return String.fromCodePoint(parseInt(e,16))}const G2={start(){if(Nt.type==="eof")throw hi();El()},beforePropertyName(){switch(Nt.type){case"identifier":case"string":Cd=Nt.value,Ut="afterPropertyName";return;case"punctuator":Pa();return;case"eof":throw hi()}},afterPropertyName(){if(Nt.type==="eof")throw hi();Ut="beforePropertyValue"},beforePropertyValue(){if(Nt.type==="eof")throw hi();El()},beforeArrayValue(){if(Nt.type==="eof")throw hi();if(Nt.type==="punctuator"&&Nt.value==="]"){Pa();return}El()},afterPropertyValue(){if(Nt.type==="eof")throw hi();switch(Nt.value){case",":Ut="beforePropertyName";return;case"}":Pa()}},afterArrayValue(){if(Nt.type==="eof")throw hi();switch(Nt.value){case",":Ut="beforeArrayValue";return;case"]":Pa()}},end(){}};function El(){let e;switch(Nt.type){case"punctuator":switch(Nt.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=Nt.value;break}if(fo===void 0)fo=e;else{const t=Cr[Cr.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,Cd,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")Cr.push(e),Array.isArray(e)?Ut="beforeArrayValue":Ut="beforePropertyName";else{const t=Cr[Cr.length-1];t==null?Ut="end":Array.isArray(t)?Ut="afterArrayValue":Ut="afterPropertyValue"}}function Pa(){Cr.pop();const e=Cr[Cr.length-1];e==null?Ut="end":Array.isArray(e)?Ut="afterArrayValue":Ut="afterPropertyValue"}function ut(e){return su(e===void 0?`JSON5: invalid end of input at ${qr}:${Vn}`:`JSON5: invalid character '${sg(e)}' at ${qr}:${Vn}`)}function hi(){return su(`JSON5: invalid end of input at ${qr}:${Vn}`)}function bp(){return Vn-=5,su(`JSON5: invalid identifier character at ${qr}:${Vn}`)}function Z2(e){console.warn(`JSON5: '${sg(e)}' in strings is not valid ECMAScript; consider escaping`)}function sg(e){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){const n=e.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return e}function su(e){const t=new SyntaxError(e);return t.lineNumber=qr,t.columnNumber=Vn,t}var W2=function(t,n,i){const o=[];let a="",u,l,d="",f;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(i=n.space,f=n.quote,n=n.replacer),typeof n=="function")l=n;else if(Array.isArray(n)){u=[];for(const v of n){let w;typeof v=="string"?w=v:(typeof v=="number"||v instanceof String||v instanceof Number)&&(w=String(v)),w!==void 0&&u.indexOf(w)<0&&u.push(w)}}return i instanceof Number?i=Number(i):i instanceof String&&(i=String(i)),typeof i=="number"?i>0&&(i=Math.min(10,Math.floor(i)),d="          ".substr(0,i)):typeof i=="string"&&(d=i.substr(0,10)),h("",{"":t});function h(v,w){let _=w[v];switch(_!=null&&(typeof _.toJSON5=="function"?_=_.toJSON5(v):typeof _.toJSON=="function"&&(_=_.toJSON(v))),l&&(_=l.call(w,v,_)),_ instanceof Number?_=Number(_):_ instanceof String?_=String(_):_ instanceof Boolean&&(_=_.valueOf()),_){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof _=="string")return g(_);if(typeof _=="number")return String(_);if(typeof _=="object")return Array.isArray(_)?x(_):m(_)}function g(v){const w={"'":.1,'"':.2},_={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let A="";for(let N=0;N<v.length;N++){const $=v[N];switch($){case"'":case'"':w[$]++,A+=$;continue;case"\0":if(wt.isDigit(v[N+1])){A+="\\x00";continue}}if(_[$]){A+=_[$];continue}if($<" "){let z=$.charCodeAt(0).toString(16);A+="\\x"+("00"+z).substring(z.length);continue}A+=$}const I=f||Object.keys(w).reduce((N,$)=>w[N]<w[$]?N:$);return A=A.replace(new RegExp(I,"g"),_[I]),I+A+I}function m(v){if(o.indexOf(v)>=0)throw TypeError("Converting circular structure to JSON5");o.push(v);let w=a;a=a+d;let _=u||Object.keys(v),A=[];for(const N of _){const $=h(N,v);if($!==void 0){let z=D(N)+":";d!==""&&(z+=" "),z+=$,A.push(z)}}let I;if(A.length===0)I="{}";else{let N;if(d==="")N=A.join(","),I="{"+N+"}";else{let $=`,
`+a;N=A.join($),I=`{
`+a+N+`,
`+w+"}"}}return o.pop(),a=w,I}function D(v){if(v.length===0)return g(v);const w=String.fromCodePoint(v.codePointAt(0));if(!wt.isIdStartChar(w))return g(v);for(let _=w.length;_<v.length;_++)if(!wt.isIdContinueChar(String.fromCodePoint(v.codePointAt(_))))return g(v);return v}function x(v){if(o.indexOf(v)>=0)throw TypeError("Converting circular structure to JSON5");o.push(v);let w=a;a=a+d;let _=[];for(let I=0;I<v.length;I++){const N=h(String(I),v);_.push(N!==void 0?N:"null")}let A;if(_.length===0)A="[]";else if(d==="")A="["+_.join(",")+"]";else{let I=`,
`+a,N=_.join(I);A=`[
`+a+N+`,
`+w+"]"}return o.pop(),a=w,A}};const q2={parse:j2,stringify:W2};var pi=q2;function qt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,i;n<e.length;n++)(i=qt(e[n]))!==""&&(t+=(t&&" ")+i);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useDebugValue:X2}=j,{useSyncExternalStoreWithSelector:Y2}=CC,K2=e=>e;function og(e,t=K2,n){const i=Y2(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return X2(i),i}const Ap=(e,t)=>{const n=EC(e),i=(o,a=t)=>og(n,o,a);return Object.assign(i,n),i},J2=(e,t)=>e?Ap(e,t):Ap;function zt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[i,o]of e)if(!Object.is(o,t.get(i)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const i of n)if(!Object.prototype.hasOwnProperty.call(t,i)||!Object.is(e[i],t[i]))return!1;return!0}var Q2={value:()=>{}};function Fu(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Ya(n)}function Ya(e){this._=e}function eb(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",o=n.indexOf(".");if(o>=0&&(i=n.slice(o+1),n=n.slice(0,o)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Ya.prototype=Fu.prototype={constructor:Ya,on:function(e,t){var n=this._,i=eb(e+"",n),o,a=-1,u=i.length;if(arguments.length<2){for(;++a<u;)if((o=(e=i[a]).type)&&(o=tb(n[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<u;)if(o=(e=i[a]).type)n[o]=Sp(n[o],e.name,t);else if(t==null)for(o in n)n[o]=Sp(n[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ya(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var n=new Array(o),i=0,o,a;i<o;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,o=a.length;i<o;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(t,n)}};function tb(e,t){for(var n=0,i=e.length,o;n<i;++n)if((o=e[n]).name===t)return o.value}function Sp(e,t,n){for(var i=0,o=e.length;i<o;++i)if(e[i].name===t){e[i]=Q2,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Vl="http://www.w3.org/1999/xhtml";const Fp={svg:"http://www.w3.org/2000/svg",xhtml:Vl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nu(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Fp.hasOwnProperty(t)?{space:Fp[t],local:e}:e}function nb(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Vl&&t.documentElement.namespaceURI===Vl?t.createElement(e):t.createElementNS(n,e)}}function rb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ag(e){var t=Nu(e);return(t.local?rb:nb)(t)}function ib(){}function Ed(e){return e==null?ib:function(){return this.querySelector(e)}}function sb(e){typeof e!="function"&&(e=Ed(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],u=a.length,l=i[o]=new Array(u),d,f,h=0;h<u;++h)(d=a[h])&&(f=e.call(d,d.__data__,h,a))&&("__data__"in d&&(f.__data__=d.__data__),l[h]=f);return new vn(i,this._parents)}function ob(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ab(){return[]}function ug(e){return e==null?ab:function(){return this.querySelectorAll(e)}}function ub(e){return function(){return ob(e.apply(this,arguments))}}function cb(e){typeof e=="function"?e=ub(e):e=ug(e);for(var t=this._groups,n=t.length,i=[],o=[],a=0;a<n;++a)for(var u=t[a],l=u.length,d,f=0;f<l;++f)(d=u[f])&&(i.push(e.call(d,d.__data__,f,u)),o.push(d));return new vn(i,o)}function cg(e){return function(){return this.matches(e)}}function lg(e){return function(t){return t.matches(e)}}var lb=Array.prototype.find;function db(e){return function(){return lb.call(this.children,e)}}function fb(){return this.firstElementChild}function hb(e){return this.select(e==null?fb:db(typeof e=="function"?e:lg(e)))}var pb=Array.prototype.filter;function gb(){return Array.from(this.children)}function mb(e){return function(){return pb.call(this.children,e)}}function yb(e){return this.selectAll(e==null?gb:mb(typeof e=="function"?e:lg(e)))}function vb(e){typeof e!="function"&&(e=cg(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],u=a.length,l=i[o]=[],d,f=0;f<u;++f)(d=a[f])&&e.call(d,d.__data__,f,a)&&l.push(d);return new vn(i,this._parents)}function dg(e){return new Array(e.length)}function _b(){return new vn(this._enter||this._groups.map(dg),this._parents)}function ou(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}ou.prototype={constructor:ou,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Db(e){return function(){return e}}function xb(e,t,n,i,o,a){for(var u=0,l,d=t.length,f=a.length;u<f;++u)(l=t[u])?(l.__data__=a[u],i[u]=l):n[u]=new ou(e,a[u]);for(;u<d;++u)(l=t[u])&&(o[u]=l)}function wb(e,t,n,i,o,a,u){var l,d,f=new Map,h=t.length,g=a.length,m=new Array(h),D;for(l=0;l<h;++l)(d=t[l])&&(m[l]=D=u.call(d,d.__data__,l,t)+"",f.has(D)?o[l]=d:f.set(D,d));for(l=0;l<g;++l)D=u.call(e,a[l],l,a)+"",(d=f.get(D))?(i[l]=d,d.__data__=a[l],f.delete(D)):n[l]=new ou(e,a[l]);for(l=0;l<h;++l)(d=t[l])&&f.get(m[l])===d&&(o[l]=d)}function Cb(e){return e.__data__}function Eb(e,t){if(!arguments.length)return Array.from(this,Cb);var n=t?wb:xb,i=this._parents,o=this._groups;typeof e!="function"&&(e=Db(e));for(var a=o.length,u=new Array(a),l=new Array(a),d=new Array(a),f=0;f<a;++f){var h=i[f],g=o[f],m=g.length,D=bb(e.call(h,h&&h.__data__,f,i)),x=D.length,v=l[f]=new Array(x),w=u[f]=new Array(x),_=d[f]=new Array(m);n(h,g,v,w,_,D,t);for(var A=0,I=0,N,$;A<x;++A)if(N=v[A]){for(A>=I&&(I=A+1);!($=w[I])&&++I<x;);N._next=$||null}}return u=new vn(u,i),u._enter=l,u._exit=d,u}function bb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ab(){return new vn(this._exit||this._groups.map(dg),this._parents)}function Sb(e,t,n){var i=this.enter(),o=this,a=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),n==null?a.remove():n(a),i&&o?i.merge(o).order():o}function Fb(e){for(var t=e.selection?e.selection():e,n=this._groups,i=t._groups,o=n.length,a=i.length,u=Math.min(o,a),l=new Array(o),d=0;d<u;++d)for(var f=n[d],h=i[d],g=f.length,m=l[d]=new Array(g),D,x=0;x<g;++x)(D=f[x]||h[x])&&(m[x]=D);for(;d<o;++d)l[d]=n[d];return new vn(l,this._parents)}function Nb(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var i=e[t],o=i.length-1,a=i[o],u;--o>=0;)(u=i[o])&&(a&&u.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(u,a),a=u);return this}function Tb(e){e||(e=Ib);function t(g,m){return g&&m?e(g.__data__,m.__data__):!g-!m}for(var n=this._groups,i=n.length,o=new Array(i),a=0;a<i;++a){for(var u=n[a],l=u.length,d=o[a]=new Array(l),f,h=0;h<l;++h)(f=u[h])&&(d[h]=f);d.sort(t)}return new vn(o,this._parents).order()}function Ib(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function kb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Bb(){return Array.from(this)}function Rb(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,a=i.length;o<a;++o){var u=i[o];if(u)return u}return null}function Mb(){let e=0;for(const t of this)++e;return e}function Ob(){return!this.node()}function Pb(e){for(var t=this._groups,n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,u=o.length,l;a<u;++a)(l=o[a])&&e.call(l,l.__data__,a,o);return this}function $b(e){return function(){this.removeAttribute(e)}}function zb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Lb(e,t){return function(){this.setAttribute(e,t)}}function jb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Hb(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Vb(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Ub(e,t){var n=Nu(e);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((t==null?n.local?zb:$b:typeof t=="function"?n.local?Vb:Hb:n.local?jb:Lb)(n,t))}function fg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Gb(e){return function(){this.style.removeProperty(e)}}function Zb(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Wb(e,t,n){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,n)}}function qb(e,t,n){return arguments.length>1?this.each((t==null?Gb:typeof t=="function"?Wb:Zb)(e,t,n??"")):ps(this.node(),e)}function ps(e,t){return e.style.getPropertyValue(t)||fg(e).getComputedStyle(e,null).getPropertyValue(t)}function Xb(e){return function(){delete this[e]}}function Yb(e,t){return function(){this[e]=t}}function Kb(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Jb(e,t){return arguments.length>1?this.each((t==null?Xb:typeof t=="function"?Kb:Yb)(e,t)):this.node()[e]}function hg(e){return e.trim().split(/^|\s+/)}function bd(e){return e.classList||new pg(e)}function pg(e){this._node=e,this._names=hg(e.getAttribute("class")||"")}pg.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function gg(e,t){for(var n=bd(e),i=-1,o=t.length;++i<o;)n.add(t[i])}function mg(e,t){for(var n=bd(e),i=-1,o=t.length;++i<o;)n.remove(t[i])}function Qb(e){return function(){gg(this,e)}}function eA(e){return function(){mg(this,e)}}function tA(e,t){return function(){(t.apply(this,arguments)?gg:mg)(this,e)}}function nA(e,t){var n=hg(e+"");if(arguments.length<2){for(var i=bd(this.node()),o=-1,a=n.length;++o<a;)if(!i.contains(n[o]))return!1;return!0}return this.each((typeof t=="function"?tA:t?Qb:eA)(n,t))}function rA(){this.textContent=""}function iA(e){return function(){this.textContent=e}}function sA(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function oA(e){return arguments.length?this.each(e==null?rA:(typeof e=="function"?sA:iA)(e)):this.node().textContent}function aA(){this.innerHTML=""}function uA(e){return function(){this.innerHTML=e}}function cA(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function lA(e){return arguments.length?this.each(e==null?aA:(typeof e=="function"?cA:uA)(e)):this.node().innerHTML}function dA(){this.nextSibling&&this.parentNode.appendChild(this)}function fA(){return this.each(dA)}function hA(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function pA(){return this.each(hA)}function gA(e){var t=typeof e=="function"?e:ag(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function mA(){return null}function yA(e,t){var n=typeof e=="function"?e:ag(e),i=t==null?mA:typeof t=="function"?t:Ed(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function vA(){var e=this.parentNode;e&&e.removeChild(this)}function _A(){return this.each(vA)}function DA(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xA(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function wA(e){return this.select(e?xA:DA)}function CA(e){return arguments.length?this.property("__data__",e):this.node().__data__}function EA(e){return function(t){e.call(this,t,this.__data__)}}function bA(e){return e.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");return i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),{type:t,name:n}})}function AA(e){return function(){var t=this.__on;if(t){for(var n=0,i=-1,o=t.length,a;n<o;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++i]=a;++i?t.length=i:delete this.__on}}}function SA(e,t,n){return function(){var i=this.__on,o,a=EA(t);if(i){for(var u=0,l=i.length;u<l;++u)if((o=i[u]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=n),o.value=t;return}}this.addEventListener(e.type,a,n),o={type:e.type,name:e.name,value:t,listener:a,options:n},i?i.push(o):this.__on=[o]}}function FA(e,t,n){var i=bA(e+""),o,a=i.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,f=l.length,h;d<f;++d)for(o=0,h=l[d];o<a;++o)if((u=i[o]).type===h.type&&u.name===h.name)return h.value}return}for(l=t?SA:AA,o=0;o<a;++o)this.each(l(i[o],t,n));return this}function yg(e,t,n){var i=fg(e),o=i.CustomEvent;typeof o=="function"?o=new o(t,n):(o=i.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function NA(e,t){return function(){return yg(this,e,t)}}function TA(e,t){return function(){return yg(this,e,t.apply(this,arguments))}}function IA(e,t){return this.each((typeof t=="function"?TA:NA)(e,t))}function*kA(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var i=e[t],o=0,a=i.length,u;o<a;++o)(u=i[o])&&(yield u)}var vg=[null];function vn(e,t){this._groups=e,this._parents=t}function Vo(){return new vn([[document.documentElement]],vg)}function BA(){return this}vn.prototype=Vo.prototype={constructor:vn,select:sb,selectAll:cb,selectChild:hb,selectChildren:yb,filter:vb,data:Eb,enter:_b,exit:Ab,join:Sb,merge:Fb,selection:BA,order:Nb,sort:Tb,call:kb,nodes:Bb,node:Rb,size:Mb,empty:Ob,each:Pb,attr:Ub,style:qb,property:Jb,classed:nA,text:oA,html:lA,raise:fA,lower:pA,append:gA,insert:yA,remove:_A,clone:wA,datum:CA,on:FA,dispatch:IA,[Symbol.iterator]:kA};function Ln(e){return typeof e=="string"?new vn([[document.querySelector(e)]],[document.documentElement]):new vn([[e]],vg)}function RA(e){let t;for(;t=e.sourceEvent;)e=t;return e}function tr(e,t){if(e=RA(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}const MA={passive:!1},yo={capture:!0,passive:!1};function bl(e){e.stopImmediatePropagation()}function os(e){e.preventDefault(),e.stopImmediatePropagation()}function _g(e){var t=e.document.documentElement,n=Ln(e).on("dragstart.drag",os,yo);"onselectstart"in t?n.on("selectstart.drag",os,yo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Dg(e,t){var n=e.document.documentElement,i=Ln(e).on("dragstart.drag",null);t&&(i.on("click.drag",os,yo),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const $a=e=>()=>e;function Ul(e,{sourceEvent:t,subject:n,target:i,identifier:o,active:a,x:u,y:l,dx:d,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}Ul.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function OA(e){return!e.ctrlKey&&!e.button}function PA(){return this.parentNode}function $A(e,t){return t??{x:e.x,y:e.y}}function zA(){return navigator.maxTouchPoints||"ontouchstart"in this}function LA(){var e=OA,t=PA,n=$A,i=zA,o={},a=Fu("start","drag","end"),u=0,l,d,f,h,g=0;function m(N){N.on("mousedown.drag",D).filter(i).on("touchstart.drag",w).on("touchmove.drag",_,MA).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function D(N,$){if(!(h||!e.call(this,N,$))){var z=I(this,t.call(this,N,$),N,$,"mouse");z&&(Ln(N.view).on("mousemove.drag",x,yo).on("mouseup.drag",v,yo),_g(N.view),bl(N),f=!1,l=N.clientX,d=N.clientY,z("start",N))}}function x(N){if(os(N),!f){var $=N.clientX-l,z=N.clientY-d;f=$*$+z*z>g}o.mouse("drag",N)}function v(N){Ln(N.view).on("mousemove.drag mouseup.drag",null),Dg(N.view,f),os(N),o.mouse("end",N)}function w(N,$){if(e.call(this,N,$)){var z=N.changedTouches,M=t.call(this,N,$),X=z.length,B,U;for(B=0;B<X;++B)(U=I(this,M,N,$,z[B].identifier,z[B]))&&(bl(N),U("start",N,z[B]))}}function _(N){var $=N.changedTouches,z=$.length,M,X;for(M=0;M<z;++M)(X=o[$[M].identifier])&&(os(N),X("drag",N,$[M]))}function A(N){var $=N.changedTouches,z=$.length,M,X;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),M=0;M<z;++M)(X=o[$[M].identifier])&&(bl(N),X("end",N,$[M]))}function I(N,$,z,M,X,B){var U=a.copy(),K=tr(B||z,$),q,G,b;if((b=n.call(N,new Ul("beforestart",{sourceEvent:z,target:m,identifier:X,active:u,x:K[0],y:K[1],dx:0,dy:0,dispatch:U}),M))!=null)return q=b.x-K[0]||0,G=b.y-K[1]||0,function P(O,Z,ee){var H=K,ne;switch(O){case"start":o[X]=P,ne=u++;break;case"end":delete o[X],--u;case"drag":K=tr(ee||Z,$),ne=u;break}U.call(O,N,new Ul(O,{sourceEvent:Z,subject:b,target:m,identifier:X,active:ne,x:K[0]+q,y:K[1]+G,dx:K[0]-H[0],dy:K[1]-H[1],dispatch:U}),M)}}return m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:$a(!!N),m):e},m.container=function(N){return arguments.length?(t=typeof N=="function"?N:$a(N),m):t},m.subject=function(N){return arguments.length?(n=typeof N=="function"?N:$a(N),m):n},m.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:$a(!!N),m):i},m.on=function(){var N=a.on.apply(a,arguments);return N===a?m:N},m.clickDistance=function(N){return arguments.length?(g=(N=+N)*N,m):Math.sqrt(g)},m}function Ad(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function xg(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Uo(){}var vo=.7,au=1/vo,as="\\s*([+-]?\\d+)\\s*",_o="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",jA=/^#([0-9a-f]{3,8})$/,HA=new RegExp(`^rgb\\(${as},${as},${as}\\)$`),VA=new RegExp(`^rgb\\(${nr},${nr},${nr}\\)$`),UA=new RegExp(`^rgba\\(${as},${as},${as},${_o}\\)$`),GA=new RegExp(`^rgba\\(${nr},${nr},${nr},${_o}\\)$`),ZA=new RegExp(`^hsl\\(${_o},${nr},${nr}\\)$`),WA=new RegExp(`^hsla\\(${_o},${nr},${nr},${_o}\\)$`),Np={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ad(Uo,Do,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Tp,formatHex:Tp,formatHex8:qA,formatHsl:XA,formatRgb:Ip,toString:Ip});function Tp(){return this.rgb().formatHex()}function qA(){return this.rgb().formatHex8()}function XA(){return wg(this).formatHsl()}function Ip(){return this.rgb().formatRgb()}function Do(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=jA.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?kp(t):n===3?new sn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?za(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?za(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=HA.exec(e))?new sn(t[1],t[2],t[3],1):(t=VA.exec(e))?new sn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=UA.exec(e))?za(t[1],t[2],t[3],t[4]):(t=GA.exec(e))?za(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ZA.exec(e))?Mp(t[1],t[2]/100,t[3]/100,1):(t=WA.exec(e))?Mp(t[1],t[2]/100,t[3]/100,t[4]):Np.hasOwnProperty(e)?kp(Np[e]):e==="transparent"?new sn(NaN,NaN,NaN,0):null}function kp(e){return new sn(e>>16&255,e>>8&255,e&255,1)}function za(e,t,n,i){return i<=0&&(e=t=n=NaN),new sn(e,t,n,i)}function YA(e){return e instanceof Uo||(e=Do(e)),e?(e=e.rgb(),new sn(e.r,e.g,e.b,e.opacity)):new sn}function Gl(e,t,n,i){return arguments.length===1?YA(e):new sn(e,t,n,i??1)}function sn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Ad(sn,Gl,xg(Uo,{brighter(e){return e=e==null?au:Math.pow(au,e),new sn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vo:Math.pow(vo,e),new sn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new sn(Di(this.r),Di(this.g),Di(this.b),uu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bp,formatHex:Bp,formatHex8:KA,formatRgb:Rp,toString:Rp}));function Bp(){return`#${yi(this.r)}${yi(this.g)}${yi(this.b)}`}function KA(){return`#${yi(this.r)}${yi(this.g)}${yi(this.b)}${yi((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rp(){const e=uu(this.opacity);return`${e===1?"rgb(":"rgba("}${Di(this.r)}, ${Di(this.g)}, ${Di(this.b)}${e===1?")":`, ${e})`}`}function uu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Di(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function yi(e){return e=Di(e),(e<16?"0":"")+e.toString(16)}function Mp(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jn(e,t,n,i)}function wg(e){if(e instanceof jn)return new jn(e.h,e.s,e.l,e.opacity);if(e instanceof Uo||(e=Do(e)),!e)return new jn;if(e instanceof jn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),u=NaN,l=a-o,d=(a+o)/2;return l?(t===a?u=(n-i)/l+(n<i)*6:n===a?u=(i-t)/l+2:u=(t-n)/l+4,l/=d<.5?a+o:2-a-o,u*=60):l=d>0&&d<1?0:u,new jn(u,l,d,e.opacity)}function JA(e,t,n,i){return arguments.length===1?wg(e):new jn(e,t,n,i??1)}function jn(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Ad(jn,JA,xg(Uo,{brighter(e){return e=e==null?au:Math.pow(au,e),new jn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vo:Math.pow(vo,e),new jn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,o=2*n-i;return new sn(Al(e>=240?e-240:e+120,o,i),Al(e,o,i),Al(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new jn(Op(this.h),La(this.s),La(this.l),uu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uu(this.opacity);return`${e===1?"hsl(":"hsla("}${Op(this.h)}, ${La(this.s)*100}%, ${La(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Op(e){return e=(e||0)%360,e<0?e+360:e}function La(e){return Math.max(0,Math.min(1,e||0))}function Al(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Cg=e=>()=>e;function QA(e,t){return function(n){return e+n*t}}function eS(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function tS(e){return(e=+e)==1?Eg:function(t,n){return n-t?eS(t,n,e):Cg(isNaN(t)?n:t)}}function Eg(e,t){var n=t-e;return n?QA(e,n):Cg(isNaN(e)?t:e)}const Pp=function e(t){var n=tS(t);function i(o,a){var u=n((o=Gl(o)).r,(a=Gl(a)).r),l=n(o.g,a.g),d=n(o.b,a.b),f=Eg(o.opacity,a.opacity);return function(h){return o.r=u(h),o.g=l(h),o.b=d(h),o.opacity=f(h),o+""}}return i.gamma=e,i}(1);function jr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Zl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Sl=new RegExp(Zl.source,"g");function nS(e){return function(){return e}}function rS(e){return function(t){return e(t)+""}}function iS(e,t){var n=Zl.lastIndex=Sl.lastIndex=0,i,o,a,u=-1,l=[],d=[];for(e=e+"",t=t+"";(i=Zl.exec(e))&&(o=Sl.exec(t));)(a=o.index)>n&&(a=t.slice(n,a),l[u]?l[u]+=a:l[++u]=a),(i=i[0])===(o=o[0])?l[u]?l[u]+=o:l[++u]=o:(l[++u]=null,d.push({i:u,x:jr(i,o)})),n=Sl.lastIndex;return n<t.length&&(a=t.slice(n),l[u]?l[u]+=a:l[++u]=a),l.length<2?d[0]?rS(d[0].x):nS(t):(t=d.length,function(f){for(var h=0,g;h<t;++h)l[(g=d[h]).i]=g.x(f);return l.join("")})}var $p=180/Math.PI,Wl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bg(e,t,n,i,o,a){var u,l,d;return(u=Math.sqrt(e*e+t*t))&&(e/=u,t/=u),(d=e*n+t*i)&&(n-=e*d,i-=t*d),(l=Math.sqrt(n*n+i*i))&&(n/=l,i/=l,d/=l),e*i<t*n&&(e=-e,t=-t,d=-d,u=-u),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*$p,skewX:Math.atan(d)*$p,scaleX:u,scaleY:l}}var ja;function sS(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Wl:bg(t.a,t.b,t.c,t.d,t.e,t.f)}function oS(e){return e==null||(ja||(ja=document.createElementNS("http://www.w3.org/2000/svg","g")),ja.setAttribute("transform",e),!(e=ja.transform.baseVal.consolidate()))?Wl:(e=e.matrix,bg(e.a,e.b,e.c,e.d,e.e,e.f))}function Ag(e,t,n,i){function o(f){return f.length?f.pop()+" ":""}function a(f,h,g,m,D,x){if(f!==g||h!==m){var v=D.push("translate(",null,t,null,n);x.push({i:v-4,x:jr(f,g)},{i:v-2,x:jr(h,m)})}else(g||m)&&D.push("translate("+g+t+m+n)}function u(f,h,g,m){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),m.push({i:g.push(o(g)+"rotate(",null,i)-2,x:jr(f,h)})):h&&g.push(o(g)+"rotate("+h+i)}function l(f,h,g,m){f!==h?m.push({i:g.push(o(g)+"skewX(",null,i)-2,x:jr(f,h)}):h&&g.push(o(g)+"skewX("+h+i)}function d(f,h,g,m,D,x){if(f!==g||h!==m){var v=D.push(o(D)+"scale(",null,",",null,")");x.push({i:v-4,x:jr(f,g)},{i:v-2,x:jr(h,m)})}else(g!==1||m!==1)&&D.push(o(D)+"scale("+g+","+m+")")}return function(f,h){var g=[],m=[];return f=e(f),h=e(h),a(f.translateX,f.translateY,h.translateX,h.translateY,g,m),u(f.rotate,h.rotate,g,m),l(f.skewX,h.skewX,g,m),d(f.scaleX,f.scaleY,h.scaleX,h.scaleY,g,m),f=h=null,function(D){for(var x=-1,v=m.length,w;++x<v;)g[(w=m[x]).i]=w.x(D);return g.join("")}}}var aS=Ag(sS,"px, ","px)","deg)"),uS=Ag(oS,", ",")",")"),cS=1e-12;function zp(e){return((e=Math.exp(e))+1/e)/2}function lS(e){return((e=Math.exp(e))-1/e)/2}function dS(e){return((e=Math.exp(2*e))-1)/(e+1)}const fS=function e(t,n,i){function o(a,u){var l=a[0],d=a[1],f=a[2],h=u[0],g=u[1],m=u[2],D=h-l,x=g-d,v=D*D+x*x,w,_;if(v<cS)_=Math.log(m/f)/t,w=function(M){return[l+M*D,d+M*x,f*Math.exp(t*M*_)]};else{var A=Math.sqrt(v),I=(m*m-f*f+i*v)/(2*f*n*A),N=(m*m-f*f-i*v)/(2*m*n*A),$=Math.log(Math.sqrt(I*I+1)-I),z=Math.log(Math.sqrt(N*N+1)-N);_=(z-$)/t,w=function(M){var X=M*_,B=zp($),U=f/(n*A)*(B*dS(t*X+$)-lS($));return[l+U*D,d+U*x,f*B/zp(t*X+$)]}}return w.duration=_*1e3*t/Math.SQRT2,w}return o.rho=function(a){var u=Math.max(.001,+a),l=u*u,d=l*l;return e(u,l,d)},o}(Math.SQRT2,2,4);var gs=0,ro=0,qs=0,Sg=1e3,cu,io,lu=0,Ei=0,Tu=0,xo=typeof performance=="object"&&performance.now?performance:Date,Fg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Sd(){return Ei||(Fg(hS),Ei=xo.now()+Tu)}function hS(){Ei=0}function du(){this._call=this._time=this._next=null}du.prototype=Ng.prototype={constructor:du,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Sd():+n)+(t==null?0:+t),!this._next&&io!==this&&(io?io._next=this:cu=this,io=this),this._call=e,this._time=n,ql()},stop:function(){this._call&&(this._call=null,this._time=1/0,ql())}};function Ng(e,t,n){var i=new du;return i.restart(e,t,n),i}function pS(){Sd(),++gs;for(var e=cu,t;e;)(t=Ei-e._time)>=0&&e._call.call(void 0,t),e=e._next;--gs}function Lp(){Ei=(lu=xo.now())+Tu,gs=ro=0;try{pS()}finally{gs=0,mS(),Ei=0}}function gS(){var e=xo.now(),t=e-lu;t>Sg&&(Tu-=t,lu=e)}function mS(){for(var e,t=cu,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:cu=n);io=e,ql(i)}function ql(e){if(!gs){ro&&(ro=clearTimeout(ro));var t=e-Ei;t>24?(e<1/0&&(ro=setTimeout(Lp,e-xo.now()-Tu)),qs&&(qs=clearInterval(qs))):(qs||(lu=xo.now(),qs=setInterval(gS,Sg)),gs=1,Fg(Lp))}}function jp(e,t,n){var i=new du;return t=t==null?0:+t,i.restart(o=>{i.stop(),e(o+t)},t,n),i}var yS=Fu("start","end","cancel","interrupt"),vS=[],Tg=0,Hp=1,Xl=2,Ka=3,Vp=4,Yl=5,Ja=6;function Iu(e,t,n,i,o,a){var u=e.__transition;if(!u)e.__transition={};else if(n in u)return;_S(e,n,{name:t,index:i,group:o,on:yS,tween:vS,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Tg})}function Fd(e,t){var n=Xn(e,t);if(n.state>Tg)throw new Error("too late; already scheduled");return n}function or(e,t){var n=Xn(e,t);if(n.state>Ka)throw new Error("too late; already running");return n}function Xn(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function _S(e,t,n){var i=e.__transition,o;i[t]=n,n.timer=Ng(a,0,n.time);function a(f){n.state=Hp,n.timer.restart(u,n.delay,n.time),n.delay<=f&&u(f-n.delay)}function u(f){var h,g,m,D;if(n.state!==Hp)return d();for(h in i)if(D=i[h],D.name===n.name){if(D.state===Ka)return jp(u);D.state===Vp?(D.state=Ja,D.timer.stop(),D.on.call("interrupt",e,e.__data__,D.index,D.group),delete i[h]):+h<t&&(D.state=Ja,D.timer.stop(),D.on.call("cancel",e,e.__data__,D.index,D.group),delete i[h])}if(jp(function(){n.state===Ka&&(n.state=Vp,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=Xl,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xl){for(n.state=Ka,o=new Array(m=n.tween.length),h=0,g=-1;h<m;++h)(D=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(o[++g]=D);o.length=g+1}}function l(f){for(var h=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(d),n.state=Yl,1),g=-1,m=o.length;++g<m;)o[g].call(e,h);n.state===Yl&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Ja,n.timer.stop(),delete i[t];for(var f in i)return;delete e.__transition}}function Qa(e,t){var n=e.__transition,i,o,a=!0,u;if(n){t=t==null?null:t+"";for(u in n){if((i=n[u]).name!==t){a=!1;continue}o=i.state>Xl&&i.state<Yl,i.state=Ja,i.timer.stop(),i.on.call(o?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete n[u]}a&&delete e.__transition}}function DS(e){return this.each(function(){Qa(this,e)})}function xS(e,t){var n,i;return function(){var o=or(this,e),a=o.tween;if(a!==n){i=n=a;for(var u=0,l=i.length;u<l;++u)if(i[u].name===t){i=i.slice(),i.splice(u,1);break}}o.tween=i}}function wS(e,t,n){var i,o;if(typeof n!="function")throw new Error;return function(){var a=or(this,e),u=a.tween;if(u!==i){o=(i=u).slice();for(var l={name:t,value:n},d=0,f=o.length;d<f;++d)if(o[d].name===t){o[d]=l;break}d===f&&o.push(l)}a.tween=o}}function CS(e,t){var n=this._id;if(e+="",arguments.length<2){for(var i=Xn(this.node(),n).tween,o=0,a=i.length,u;o<a;++o)if((u=i[o]).name===e)return u.value;return null}return this.each((t==null?xS:wS)(n,e,t))}function Nd(e,t,n){var i=e._id;return e.each(function(){var o=or(this,i);(o.value||(o.value={}))[t]=n.apply(this,arguments)}),function(o){return Xn(o,i).value[t]}}function Ig(e,t){var n;return(typeof t=="number"?jr:t instanceof Do?Pp:(n=Do(t))?(t=n,Pp):iS)(e,t)}function ES(e){return function(){this.removeAttribute(e)}}function bS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function AS(e,t,n){var i,o=n+"",a;return function(){var u=this.getAttribute(e);return u===o?null:u===i?a:a=t(i=u,n)}}function SS(e,t,n){var i,o=n+"",a;return function(){var u=this.getAttributeNS(e.space,e.local);return u===o?null:u===i?a:a=t(i=u,n)}}function FS(e,t,n){var i,o,a;return function(){var u,l=n(this),d;return l==null?void this.removeAttribute(e):(u=this.getAttribute(e),d=l+"",u===d?null:u===i&&d===o?a:(o=d,a=t(i=u,l)))}}function NS(e,t,n){var i,o,a;return function(){var u,l=n(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),d=l+"",u===d?null:u===i&&d===o?a:(o=d,a=t(i=u,l)))}}function TS(e,t){var n=Nu(e),i=n==="transform"?uS:Ig;return this.attrTween(e,typeof t=="function"?(n.local?NS:FS)(n,i,Nd(this,"attr."+e,t)):t==null?(n.local?bS:ES)(n):(n.local?SS:AS)(n,i,t))}function IS(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function kS(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function BS(e,t){var n,i;function o(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&kS(e,a)),n}return o._value=t,o}function RS(e,t){var n,i;function o(){var a=t.apply(this,arguments);return a!==i&&(n=(i=a)&&IS(e,a)),n}return o._value=t,o}function MS(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var i=Nu(e);return this.tween(n,(i.local?BS:RS)(i,t))}function OS(e,t){return function(){Fd(this,e).delay=+t.apply(this,arguments)}}function PS(e,t){return t=+t,function(){Fd(this,e).delay=t}}function $S(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?OS:PS)(t,e)):Xn(this.node(),t).delay}function zS(e,t){return function(){or(this,e).duration=+t.apply(this,arguments)}}function LS(e,t){return t=+t,function(){or(this,e).duration=t}}function jS(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zS:LS)(t,e)):Xn(this.node(),t).duration}function HS(e,t){if(typeof t!="function")throw new Error;return function(){or(this,e).ease=t}}function VS(e){var t=this._id;return arguments.length?this.each(HS(t,e)):Xn(this.node(),t).ease}function US(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;or(this,e).ease=n}}function GS(e){if(typeof e!="function")throw new Error;return this.each(US(this._id,e))}function ZS(e){typeof e!="function"&&(e=cg(e));for(var t=this._groups,n=t.length,i=new Array(n),o=0;o<n;++o)for(var a=t[o],u=a.length,l=i[o]=[],d,f=0;f<u;++f)(d=a[f])&&e.call(d,d.__data__,f,a)&&l.push(d);return new Sr(i,this._parents,this._name,this._id)}function WS(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,i=t.length,o=n.length,a=Math.min(i,o),u=new Array(i),l=0;l<a;++l)for(var d=t[l],f=n[l],h=d.length,g=u[l]=new Array(h),m,D=0;D<h;++D)(m=d[D]||f[D])&&(g[D]=m);for(;l<i;++l)u[l]=t[l];return new Sr(u,this._parents,this._name,this._id)}function qS(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function XS(e,t,n){var i,o,a=qS(t)?Fd:or;return function(){var u=a(this,e),l=u.on;l!==i&&(o=(i=l).copy()).on(t,n),u.on=o}}function YS(e,t){var n=this._id;return arguments.length<2?Xn(this.node(),n).on.on(e):this.each(XS(n,e,t))}function KS(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function JS(){return this.on("end.remove",KS(this._id))}function QS(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ed(e));for(var i=this._groups,o=i.length,a=new Array(o),u=0;u<o;++u)for(var l=i[u],d=l.length,f=a[u]=new Array(d),h,g,m=0;m<d;++m)(h=l[m])&&(g=e.call(h,h.__data__,m,l))&&("__data__"in h&&(g.__data__=h.__data__),f[m]=g,Iu(f[m],t,n,m,f,Xn(h,n)));return new Sr(a,this._parents,t,n)}function e3(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ug(e));for(var i=this._groups,o=i.length,a=[],u=[],l=0;l<o;++l)for(var d=i[l],f=d.length,h,g=0;g<f;++g)if(h=d[g]){for(var m=e.call(h,h.__data__,g,d),D,x=Xn(h,n),v=0,w=m.length;v<w;++v)(D=m[v])&&Iu(D,t,n,v,m,x);a.push(m),u.push(h)}return new Sr(a,u,t,n)}var t3=Vo.prototype.constructor;function n3(){return new t3(this._groups,this._parents)}function r3(e,t){var n,i,o;return function(){var a=ps(this,e),u=(this.style.removeProperty(e),ps(this,e));return a===u?null:a===n&&u===i?o:o=t(n=a,i=u)}}function kg(e){return function(){this.style.removeProperty(e)}}function i3(e,t,n){var i,o=n+"",a;return function(){var u=ps(this,e);return u===o?null:u===i?a:a=t(i=u,n)}}function s3(e,t,n){var i,o,a;return function(){var u=ps(this,e),l=n(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),ps(this,e))),u===d?null:u===i&&d===o?a:(o=d,a=t(i=u,l))}}function o3(e,t){var n,i,o,a="style."+t,u="end."+a,l;return function(){var d=or(this,e),f=d.on,h=d.value[a]==null?l||(l=kg(t)):void 0;(f!==n||o!==h)&&(i=(n=f).copy()).on(u,o=h),d.on=i}}function a3(e,t,n){var i=(e+="")=="transform"?aS:Ig;return t==null?this.styleTween(e,r3(e,i)).on("end.style."+e,kg(e)):typeof t=="function"?this.styleTween(e,s3(e,i,Nd(this,"style."+e,t))).each(o3(this._id,e)):this.styleTween(e,i3(e,i,t),n).on("end.style."+e,null)}function u3(e,t,n){return function(i){this.style.setProperty(e,t.call(this,i),n)}}function c3(e,t,n){var i,o;function a(){var u=t.apply(this,arguments);return u!==o&&(i=(o=u)&&u3(e,u,n)),i}return a._value=t,a}function l3(e,t,n){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,c3(e,t,n??""))}function d3(e){return function(){this.textContent=e}}function f3(e){return function(){var t=e(this);this.textContent=t??""}}function h3(e){return this.tween("text",typeof e=="function"?f3(Nd(this,"text",e)):d3(e==null?"":e+""))}function p3(e){return function(t){this.textContent=e.call(this,t)}}function g3(e){var t,n;function i(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&p3(o)),t}return i._value=e,i}function m3(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,g3(e))}function y3(){for(var e=this._name,t=this._id,n=Bg(),i=this._groups,o=i.length,a=0;a<o;++a)for(var u=i[a],l=u.length,d,f=0;f<l;++f)if(d=u[f]){var h=Xn(d,t);Iu(d,e,n,f,u,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Sr(i,this._parents,e,n)}function v3(){var e,t,n=this,i=n._id,o=n.size();return new Promise(function(a,u){var l={value:u},d={value:function(){--o===0&&a()}};n.each(function(){var f=or(this,i),h=f.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(d)),f.on=t}),o===0&&a()})}var _3=0;function Sr(e,t,n,i){this._groups=e,this._parents=t,this._name=n,this._id=i}function Bg(){return++_3}var _r=Vo.prototype;Sr.prototype={constructor:Sr,select:QS,selectAll:e3,selectChild:_r.selectChild,selectChildren:_r.selectChildren,filter:ZS,merge:WS,selection:n3,transition:y3,call:_r.call,nodes:_r.nodes,node:_r.node,size:_r.size,empty:_r.empty,each:_r.each,on:YS,attr:TS,attrTween:MS,style:a3,styleTween:l3,text:h3,textTween:m3,remove:JS,tween:CS,delay:$S,duration:jS,ease:VS,easeVarying:GS,end:v3,[Symbol.iterator]:_r[Symbol.iterator]};function D3(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var x3={time:null,delay:0,duration:250,ease:D3};function w3(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function C3(e){var t,n;e instanceof Sr?(t=e._id,e=e._name):(t=Bg(),(n=x3).time=Sd(),e=e==null?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var u=i[a],l=u.length,d,f=0;f<l;++f)(d=u[f])&&Iu(d,e,t,f,u,n||w3(d,t));return new Sr(i,this._parents,e,t)}Vo.prototype.interrupt=DS;Vo.prototype.transition=C3;const Ha=e=>()=>e;function E3(e,{sourceEvent:t,target:n,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function br(e,t,n){this.k=e,this.x=t,this.y=n}br.prototype={constructor:br,scale:function(e){return e===1?this:new br(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new br(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zr=new br(1,0,0);br.prototype;function Fl(e){e.stopImmediatePropagation()}function Xs(e){e.preventDefault(),e.stopImmediatePropagation()}function b3(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function A3(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Up(){return this.__zoom||Zr}function S3(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function F3(){return navigator.maxTouchPoints||"ontouchstart"in this}function N3(e,t,n){var i=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],u=e.invertY(t[1][1])-n[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),u>a?(a+u)/2:Math.min(0,a)||Math.max(0,u))}function T3(){var e=b3,t=A3,n=N3,i=S3,o=F3,a=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,d=fS,f=Fu("start","zoom","end"),h,g,m,D=500,x=150,v=0,w=10;function _(b){b.property("__zoom",Up).on("wheel.zoom",X,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",U).filter(o).on("touchstart.zoom",K).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",G).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(b,P,O,Z){var ee=b.selection?b.selection():b;ee.property("__zoom",Up),b!==ee?$(b,P,O,Z):ee.interrupt().each(function(){z(this,arguments).event(Z).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},_.scaleBy=function(b,P,O,Z){_.scaleTo(b,function(){var ee=this.__zoom.k,H=typeof P=="function"?P.apply(this,arguments):P;return ee*H},O,Z)},_.scaleTo=function(b,P,O,Z){_.transform(b,function(){var ee=t.apply(this,arguments),H=this.__zoom,ne=O==null?N(ee):typeof O=="function"?O.apply(this,arguments):O,re=H.invert(ne),ae=typeof P=="function"?P.apply(this,arguments):P;return n(I(A(H,ae),ne,re),ee,u)},O,Z)},_.translateBy=function(b,P,O,Z){_.transform(b,function(){return n(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),u)},null,Z)},_.translateTo=function(b,P,O,Z,ee){_.transform(b,function(){var H=t.apply(this,arguments),ne=this.__zoom,re=Z==null?N(H):typeof Z=="function"?Z.apply(this,arguments):Z;return n(Zr.translate(re[0],re[1]).scale(ne.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof O=="function"?-O.apply(this,arguments):-O),H,u)},Z,ee)};function A(b,P){return P=Math.max(a[0],Math.min(a[1],P)),P===b.k?b:new br(P,b.x,b.y)}function I(b,P,O){var Z=P[0]-O[0]*b.k,ee=P[1]-O[1]*b.k;return Z===b.x&&ee===b.y?b:new br(b.k,Z,ee)}function N(b){return[(+b[0][0]+ +b[1][0])/2,(+b[0][1]+ +b[1][1])/2]}function $(b,P,O,Z){b.on("start.zoom",function(){z(this,arguments).event(Z).start()}).on("interrupt.zoom end.zoom",function(){z(this,arguments).event(Z).end()}).tween("zoom",function(){var ee=this,H=arguments,ne=z(ee,H).event(Z),re=t.apply(ee,H),ae=O==null?N(re):typeof O=="function"?O.apply(ee,H):O,W=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ie=ee.__zoom,ue=typeof P=="function"?P.apply(ee,H):P,de=d(ie.invert(ae).concat(W/ie.k),ue.invert(ae).concat(W/ue.k));return function(fe){if(fe===1)fe=ue;else{var le=de(fe),ge=W/le[2];fe=new br(ge,ae[0]-le[0]*ge,ae[1]-le[1]*ge)}ne.zoom(null,fe)}})}function z(b,P,O){return!O&&b.__zooming||new M(b,P)}function M(b,P){this.that=b,this.args=P,this.active=0,this.sourceEvent=null,this.extent=t.apply(b,P),this.taps=0}M.prototype={event:function(b){return b&&(this.sourceEvent=b),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(b,P){return this.mouse&&b!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&b!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&b!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(b){var P=Ln(this.that).datum();f.call(b,this.that,new E3(b,{sourceEvent:this.sourceEvent,target:_,type:b,transform:this.that.__zoom,dispatch:f}),P)}};function X(b,...P){if(!e.apply(this,arguments))return;var O=z(this,P).event(b),Z=this.__zoom,ee=Math.max(a[0],Math.min(a[1],Z.k*Math.pow(2,i.apply(this,arguments)))),H=tr(b);if(O.wheel)(O.mouse[0][0]!==H[0]||O.mouse[0][1]!==H[1])&&(O.mouse[1]=Z.invert(O.mouse[0]=H)),clearTimeout(O.wheel);else{if(Z.k===ee)return;O.mouse=[H,Z.invert(H)],Qa(this),O.start()}Xs(b),O.wheel=setTimeout(ne,x),O.zoom("mouse",n(I(A(Z,ee),O.mouse[0],O.mouse[1]),O.extent,u));function ne(){O.wheel=null,O.end()}}function B(b,...P){if(m||!e.apply(this,arguments))return;var O=b.currentTarget,Z=z(this,P,!0).event(b),ee=Ln(b.view).on("mousemove.zoom",ae,!0).on("mouseup.zoom",W,!0),H=tr(b,O),ne=b.clientX,re=b.clientY;_g(b.view),Fl(b),Z.mouse=[H,this.__zoom.invert(H)],Qa(this),Z.start();function ae(ie){if(Xs(ie),!Z.moved){var ue=ie.clientX-ne,de=ie.clientY-re;Z.moved=ue*ue+de*de>v}Z.event(ie).zoom("mouse",n(I(Z.that.__zoom,Z.mouse[0]=tr(ie,O),Z.mouse[1]),Z.extent,u))}function W(ie){ee.on("mousemove.zoom mouseup.zoom",null),Dg(ie.view,Z.moved),Xs(ie),Z.event(ie).end()}}function U(b,...P){if(e.apply(this,arguments)){var O=this.__zoom,Z=tr(b.changedTouches?b.changedTouches[0]:b,this),ee=O.invert(Z),H=O.k*(b.shiftKey?.5:2),ne=n(I(A(O,H),Z,ee),t.apply(this,P),u);Xs(b),l>0?Ln(this).transition().duration(l).call($,ne,Z,b):Ln(this).call(_.transform,ne,Z,b)}}function K(b,...P){if(e.apply(this,arguments)){var O=b.touches,Z=O.length,ee=z(this,P,b.changedTouches.length===Z).event(b),H,ne,re,ae;for(Fl(b),ne=0;ne<Z;++ne)re=O[ne],ae=tr(re,this),ae=[ae,this.__zoom.invert(ae),re.identifier],ee.touch0?!ee.touch1&&ee.touch0[2]!==ae[2]&&(ee.touch1=ae,ee.taps=0):(ee.touch0=ae,H=!0,ee.taps=1+!!h);h&&(h=clearTimeout(h)),H&&(ee.taps<2&&(g=ae[0],h=setTimeout(function(){h=null},D)),Qa(this),ee.start())}}function q(b,...P){if(this.__zooming){var O=z(this,P).event(b),Z=b.changedTouches,ee=Z.length,H,ne,re,ae;for(Xs(b),H=0;H<ee;++H)ne=Z[H],re=tr(ne,this),O.touch0&&O.touch0[2]===ne.identifier?O.touch0[0]=re:O.touch1&&O.touch1[2]===ne.identifier&&(O.touch1[0]=re);if(ne=O.that.__zoom,O.touch1){var W=O.touch0[0],ie=O.touch0[1],ue=O.touch1[0],de=O.touch1[1],fe=(fe=ue[0]-W[0])*fe+(fe=ue[1]-W[1])*fe,le=(le=de[0]-ie[0])*le+(le=de[1]-ie[1])*le;ne=A(ne,Math.sqrt(fe/le)),re=[(W[0]+ue[0])/2,(W[1]+ue[1])/2],ae=[(ie[0]+de[0])/2,(ie[1]+de[1])/2]}else if(O.touch0)re=O.touch0[0],ae=O.touch0[1];else return;O.zoom("touch",n(I(ne,re,ae),O.extent,u))}}function G(b,...P){if(this.__zooming){var O=z(this,P).event(b),Z=b.changedTouches,ee=Z.length,H,ne;for(Fl(b),m&&clearTimeout(m),m=setTimeout(function(){m=null},D),H=0;H<ee;++H)ne=Z[H],O.touch0&&O.touch0[2]===ne.identifier?delete O.touch0:O.touch1&&O.touch1[2]===ne.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(ne=tr(ne,this),Math.hypot(g[0]-ne[0],g[1]-ne[1])<w)){var re=Ln(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return _.wheelDelta=function(b){return arguments.length?(i=typeof b=="function"?b:Ha(+b),_):i},_.filter=function(b){return arguments.length?(e=typeof b=="function"?b:Ha(!!b),_):e},_.touchable=function(b){return arguments.length?(o=typeof b=="function"?b:Ha(!!b),_):o},_.extent=function(b){return arguments.length?(t=typeof b=="function"?b:Ha([[+b[0][0],+b[0][1]],[+b[1][0],+b[1][1]]]),_):t},_.scaleExtent=function(b){return arguments.length?(a[0]=+b[0],a[1]=+b[1],_):[a[0],a[1]]},_.translateExtent=function(b){return arguments.length?(u[0][0]=+b[0][0],u[1][0]=+b[1][0],u[0][1]=+b[0][1],u[1][1]=+b[1][1],_):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},_.constrain=function(b){return arguments.length?(n=b,_):n},_.duration=function(b){return arguments.length?(l=+b,_):l},_.interpolate=function(b){return arguments.length?(d=b,_):d},_.on=function(){var b=f.on.apply(f,arguments);return b===f?_:b},_.clickDistance=function(b){return arguments.length?(v=(b=+b)*b,_):Math.sqrt(v)},_.tapDistance=function(b){return arguments.length?(w=+b,_):w},_}const ku=S.createContext(null),I3=ku.Provider,Fr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Rg=Fr.error001();function ft(e,t){const n=S.useContext(ku);if(n===null)throw new Error(Rg);return og(n,e,t)}const kt=()=>{const e=S.useContext(ku);if(e===null)throw new Error(Rg);return S.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},k3=e=>e.userSelectionActive?"none":"all";function Mg({position:e,children:t,className:n,style:i,...o}){const a=ft(k3),u=`${e}`.split("-");return j.createElement("div",{className:qt(["react-flow__panel",n,...u]),style:{...i,pointerEvents:a},...o},t)}function B3({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:j.createElement(Mg,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},j.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const R3=({x:e,y:t,label:n,labelStyle:i={},labelShowBg:o=!0,labelBgStyle:a={},labelBgPadding:u=[2,4],labelBgBorderRadius:l=2,children:d,className:f,...h})=>{const g=S.useRef(null),[m,D]=S.useState({x:0,y:0,width:0,height:0}),x=qt(["react-flow__edge-textwrapper",f]);return S.useEffect(()=>{if(g.current){const v=g.current.getBBox();D({x:v.x,y:v.y,width:v.width,height:v.height})}},[n]),typeof n>"u"||!n?null:j.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:x,visibility:m.width?"visible":"hidden",...h},o&&j.createElement("rect",{width:m.width+2*u[0],x:-u[0],y:-u[1],height:m.height+2*u[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),j.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:g,style:i},n),d)};var M3=S.memo(R3);const Td=e=>({width:e.offsetWidth,height:e.offsetHeight}),ms=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Id=(e={x:0,y:0},t)=>({x:ms(e.x,t[0][0],t[1][0]),y:ms(e.y,t[0][1],t[1][1])}),Gp=(e,t,n)=>e<t?ms(Math.abs(e-t),1,50)/50:e>n?-ms(Math.abs(e-n),1,50)/50:0,Og=(e,t)=>{const n=Gp(e.x,35,t.width-35)*20,i=Gp(e.y,35,t.height-35)*20;return[n,i]},Pg=e=>e.getRootNode?.()||window?.document,O3=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),kd=({x:e,y:t,width:n,height:i})=>({x:e,y:t,x2:e+n,y2:t+i}),P3=({x:e,y:t,x2:n,y2:i})=>({x:e,y:t,width:n-e,height:i-t}),Zp=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Kl=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),i=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*i)},$3=e=>Nn(e.width)&&Nn(e.height)&&Nn(e.x)&&Nn(e.y),Nn=e=>!isNaN(e)&&isFinite(e),vt=Symbol.for("internals"),$g=["Enter"," ","Escape"],z3=(e,t)=>{},L3=e=>"nativeEvent"in e;function Jl(e){const n=(L3(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const zg=e=>"clientX"in e,Wr=(e,t)=>{const n=zg(e),i=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:i-(t?.left??0),y:o-(t?.top??0)}},fu=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,xs=({id:e,path:t,labelX:n,labelY:i,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:m,interactionWidth:D=20})=>j.createElement(j.Fragment,null,j.createElement("path",{id:e,style:h,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:m}),D&&j.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:D,className:"react-flow__edge-interaction"}),o&&Nn(n)&&Nn(i)?j.createElement(M3,{x:n,y:i,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f}):null);xs.displayName="BaseEdge";function Ys(e,t,n){return n===void 0?n:i=>{const o=t().edges.find(a=>a.id===e);o&&n(i,{...o})}}function Lg({sourceX:e,sourceY:t,targetX:n,targetY:i}){const o=Math.abs(n-e)/2,a=n<e?n+o:n-o,u=Math.abs(i-t)/2,l=i<t?i+u:i-u;return[a,l,o,u]}function jg({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:u,targetControlY:l}){const d=e*.125+o*.375+u*.375+n*.125,f=t*.125+a*.375+l*.375+i*.125,h=Math.abs(d-e),g=Math.abs(f-t);return[d,f,h,g]}var bi;(function(e){e.Strict="strict",e.Loose="loose"})(bi||(bi={}));var vi;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(vi||(vi={}));var wo;(function(e){e.Partial="partial",e.Full="full"})(wo||(wo={}));var Vr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Vr||(Vr={}));var Co;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Co||(Co={}));var De;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(De||(De={}));function Wp({pos:e,x1:t,y1:n,x2:i,y2:o}){return e===De.Left||e===De.Right?[.5*(t+i),n]:[t,.5*(n+o)]}function Hg({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:i,targetY:o,targetPosition:a=De.Top}){const[u,l]=Wp({pos:n,x1:e,y1:t,x2:i,y2:o}),[d,f]=Wp({pos:a,x1:i,y1:o,x2:e,y2:t}),[h,g,m,D]=jg({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:u,sourceControlY:l,targetControlX:d,targetControlY:f});return[`M${e},${t} C${u},${l} ${d},${f} ${i},${o}`,h,g,m,D]}const Bd=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:o=De.Bottom,targetPosition:a=De.Top,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:D,markerStart:x,interactionWidth:v})=>{const[w,_,A]=Hg({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:i,targetPosition:a});return j.createElement(xs,{path:w,labelX:_,labelY:A,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:D,markerStart:x,interactionWidth:v})});Bd.displayName="SimpleBezierEdge";const qp={[De.Left]:{x:-1,y:0},[De.Right]:{x:1,y:0},[De.Top]:{x:0,y:-1},[De.Bottom]:{x:0,y:1}},j3=({source:e,sourcePosition:t=De.Bottom,target:n})=>t===De.Left||t===De.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Xp=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function H3({source:e,sourcePosition:t=De.Bottom,target:n,targetPosition:i=De.Top,center:o,offset:a}){const u=qp[t],l=qp[i],d={x:e.x+u.x*a,y:e.y+u.y*a},f={x:n.x+l.x*a,y:n.y+l.y*a},h=j3({source:d,sourcePosition:t,target:f}),g=h.x!==0?"x":"y",m=h[g];let D=[],x,v;const w={x:0,y:0},_={x:0,y:0},[A,I,N,$]=Lg({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(u[g]*l[g]===-1){x=o.x??A,v=o.y??I;const M=[{x,y:d.y},{x,y:f.y}],X=[{x:d.x,y:v},{x:f.x,y:v}];u[g]===m?D=g==="x"?M:X:D=g==="x"?X:M}else{const M=[{x:d.x,y:f.y}],X=[{x:f.x,y:d.y}];if(g==="x"?D=u.x===m?X:M:D=u.y===m?M:X,t===i){const G=Math.abs(e[g]-n[g]);if(G<=a){const b=Math.min(a-1,a-G);u[g]===m?w[g]=(d[g]>e[g]?-1:1)*b:_[g]=(f[g]>n[g]?-1:1)*b}}if(t!==i){const G=g==="x"?"y":"x",b=u[g]===l[G],P=d[G]>f[G],O=d[G]<f[G];(u[g]===1&&(!b&&P||b&&O)||u[g]!==1&&(!b&&O||b&&P))&&(D=g==="x"?M:X)}const B={x:d.x+w.x,y:d.y+w.y},U={x:f.x+_.x,y:f.y+_.y},K=Math.max(Math.abs(B.x-D[0].x),Math.abs(U.x-D[0].x)),q=Math.max(Math.abs(B.y-D[0].y),Math.abs(U.y-D[0].y));K>=q?(x=(B.x+U.x)/2,v=D[0].y):(x=D[0].x,v=(B.y+U.y)/2)}return[[e,{x:d.x+w.x,y:d.y+w.y},...D,{x:f.x+_.x,y:f.y+_.y},n],x,v,N,$]}function V3(e,t,n,i){const o=Math.min(Xp(e,t)/2,Xp(t,n)/2,i),{x:a,y:u}=t;if(e.x===a&&a===n.x||e.y===u&&u===n.y)return`L${a} ${u}`;if(e.y===u){const f=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${a+o*f},${u}Q ${a},${u} ${a},${u+o*h}`}const l=e.x<n.x?1:-1,d=e.y<n.y?-1:1;return`L ${a},${u+o*d}Q ${a},${u} ${a+o*l},${u}`}function Ql({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:i,targetY:o,targetPosition:a=De.Top,borderRadius:u=5,centerX:l,centerY:d,offset:f=20}){const[h,g,m,D,x]=H3({source:{x:e,y:t},sourcePosition:n,target:{x:i,y:o},targetPosition:a,center:{x:l,y:d},offset:f});return[h.reduce((w,_,A)=>{let I="";return A>0&&A<h.length-1?I=V3(h[A-1],_,h[A+1],u):I=`${A===0?"M":"L"}${_.x} ${_.y}`,w+=I,w},""),g,m,D,x]}const Bu=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,sourcePosition:g=De.Bottom,targetPosition:m=De.Top,markerEnd:D,markerStart:x,pathOptions:v,interactionWidth:w})=>{const[_,A,I]=Ql({sourceX:e,sourceY:t,sourcePosition:g,targetX:n,targetY:i,targetPosition:m,borderRadius:v?.borderRadius,offset:v?.offset});return j.createElement(xs,{path:_,labelX:A,labelY:I,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:D,markerStart:x,interactionWidth:w})});Bu.displayName="SmoothStepEdge";const Rd=S.memo(e=>j.createElement(Bu,{...e,pathOptions:S.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Rd.displayName="StepEdge";function U3({sourceX:e,sourceY:t,targetX:n,targetY:i}){const[o,a,u,l]=Lg({sourceX:e,sourceY:t,targetX:n,targetY:i});return[`M ${e},${t}L ${n},${i}`,o,a,u,l]}const Md=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:m,interactionWidth:D})=>{const[x,v,w]=U3({sourceX:e,sourceY:t,targetX:n,targetY:i});return j.createElement(xs,{path:x,labelX:v,labelY:w,label:o,labelStyle:a,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:m,interactionWidth:D})});Md.displayName="StraightEdge";function Va(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Yp({pos:e,x1:t,y1:n,x2:i,y2:o,c:a}){switch(e){case De.Left:return[t-Va(t-i,a),n];case De.Right:return[t+Va(i-t,a),n];case De.Top:return[t,n-Va(n-o,a)];case De.Bottom:return[t,n+Va(o-n,a)]}}function Od({sourceX:e,sourceY:t,sourcePosition:n=De.Bottom,targetX:i,targetY:o,targetPosition:a=De.Top,curvature:u=.25}){const[l,d]=Yp({pos:n,x1:e,y1:t,x2:i,y2:o,c:u}),[f,h]=Yp({pos:a,x1:i,y1:o,x2:e,y2:t,c:u}),[g,m,D,x]=jg({sourceX:e,sourceY:t,targetX:i,targetY:o,sourceControlX:l,sourceControlY:d,targetControlX:f,targetControlY:h});return[`M${e},${t} C${l},${d} ${f},${h} ${i},${o}`,g,m,D,x]}const hu=S.memo(({sourceX:e,sourceY:t,targetX:n,targetY:i,sourcePosition:o=De.Bottom,targetPosition:a=De.Top,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:D,markerStart:x,pathOptions:v,interactionWidth:w})=>{const[_,A,I]=Od({sourceX:e,sourceY:t,sourcePosition:o,targetX:n,targetY:i,targetPosition:a,curvature:v?.curvature});return j.createElement(xs,{path:_,labelX:A,labelY:I,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:D,markerStart:x,interactionWidth:w})});hu.displayName="BezierEdge";const Pd=S.createContext(null),G3=Pd.Provider;Pd.Consumer;const Z3=()=>S.useContext(Pd),W3=e=>"id"in e&&"source"in e&&"target"in e,Vg=e=>"id"in e&&!("source"in e)&&!("target"in e),pu=(e,t,n)=>{if(!Vg(e))return[];const i=n.filter(o=>o.source===e.id).map(o=>o.target);return t.filter(o=>i.includes(o.id))},q3=(e,t,n)=>{if(!Vg(e))return[];const i=n.filter(o=>o.target===e.id).map(o=>o.source);return t.filter(o=>i.includes(o.id))},X3=({source:e,sourceHandle:t,target:n,targetHandle:i})=>`reactflow__edge-${e}${t||""}-${n}${i||""}`,ed=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`,Y3=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),K3=(e,t)=>{if(!e.source||!e.target)return t;let n;return W3(e)?n={...e}:n={...e,id:X3(e)},Y3(n,t)?t:t.concat(n)},td=({x:e,y:t},[n,i,o],a,[u,l])=>{const d={x:(e-n)/o,y:(t-i)/o};return a?{x:u*Math.round(d.x/u),y:l*Math.round(d.y/l)}:d},Ug=({x:e,y:t},[n,i,o])=>({x:e*o+n,y:t*o+i}),us=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],i=(e.height??0)*t[1],o={x:e.position.x-n,y:e.position.y-i};return{...o,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-i}:o}},$d=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((i,o)=>{const{x:a,y:u}=us(o,t).positionAbsolute;return O3(i,kd({x:a,y:u,width:o.width||0,height:o.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return P3(n)},Gg=(e,t,[n,i,o]=[0,0,1],a=!1,u=!1,l=[0,0])=>{const d={x:(t.x-n)/o,y:(t.y-i)/o,width:t.width/o,height:t.height/o},f=[];return e.forEach(h=>{const{width:g,height:m,selectable:D=!0,hidden:x=!1}=h;if(u&&!D||x)return!1;const{positionAbsolute:v}=us(h,l),w={x:v.x,y:v.y,width:g||0,height:m||0},_=Kl(d,w),A=typeof g>"u"||typeof m>"u"||g===null||m===null,I=a&&_>0,N=(g||0)*(m||0);(A||I||_>=N||h.dragging)&&f.push(h)}),f},Zg=(e,t)=>{const n=e.map(i=>i.id);return t.filter(i=>n.includes(i.source)||n.includes(i.target))},Wg=(e,t,n,i,o,a=.1)=>{const u=t/(e.width*(1+a)),l=n/(e.height*(1+a)),d=Math.min(u,l),f=ms(d,i,o),h=e.x+e.width/2,g=e.y+e.height/2,m=t/2-h*f,D=n/2-g*f;return{x:m,y:D,zoom:f}},mi=(e,t=0)=>e.transition().duration(t);function Kp(e,t,n,i){return(t[n]||[]).reduce((o,a)=>(`${e.id}-${a.id}-${n}`!==i&&o.push({id:a.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+a.x+a.width/2,y:(e.positionAbsolute?.y??0)+a.y+a.height/2}),o),[])}function J3(e,t,n,i,o,a){const{x:u,y:l}=Wr(e),f=t.elementsFromPoint(u,l).find(x=>x.classList.contains("react-flow__handle"));if(f){const x=f.getAttribute("data-nodeid");if(x){const v=zd(void 0,f),w=f.getAttribute("data-handleid"),_=a({nodeId:x,id:w,type:v});if(_){const A=o.find(I=>I.nodeId===x&&I.type===v&&I.id===w);return{handle:{id:w,type:v,nodeId:x,x:A?.x||n.x,y:A?.y||n.y},validHandleResult:_}}}}let h=[],g=1/0;if(o.forEach(x=>{const v=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(v<=i){const w=a(x);v<=g&&(v<g?h=[{handle:x,validHandleResult:w}]:v===g&&h.push({handle:x,validHandleResult:w}),g=v)}}),!h.length)return{handle:null,validHandleResult:qg()};if(h.length===1)return h[0];const m=h.some(({validHandleResult:x})=>x.isValid),D=h.some(({handle:x})=>x.type==="target");return h.find(({handle:x,validHandleResult:v})=>D?x.type==="target":m?v.isValid:!0)||h[0]}const Q3={source:null,target:null,sourceHandle:null,targetHandle:null},qg=()=>({handleDomNode:null,isValid:!1,connection:Q3,endHandle:null});function Xg(e,t,n,i,o,a,u){const l=o==="target",d=u.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),f={...qg(),handleDomNode:d};if(d){const h=zd(void 0,d),g=d.getAttribute("data-nodeid"),m=d.getAttribute("data-handleid"),D=d.classList.contains("connectable"),x=d.classList.contains("connectableend"),v={source:l?g:n,sourceHandle:l?m:i,target:l?n:g,targetHandle:l?i:m};f.connection=v,D&&x&&(t===bi.Strict?l&&h==="source"||!l&&h==="target":g!==n||m!==i)&&(f.endHandle={nodeId:g,handleId:m,type:h},f.isValid=a(v))}return f}function e8({nodes:e,nodeId:t,handleId:n,handleType:i}){return e.reduce((o,a)=>{if(a[vt]){const{handleBounds:u}=a[vt];let l=[],d=[];u&&(l=Kp(a,u,"source",`${t}-${n}-${i}`),d=Kp(a,u,"target",`${t}-${n}-${i}`)),o.push(...l,...d)}return o},[])}function zd(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Nl(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function t8(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Yg({event:e,handleId:t,nodeId:n,onConnect:i,isTarget:o,getState:a,setState:u,isValidConnection:l,edgeUpdaterType:d,onReconnectEnd:f}){const h=Pg(e.target),{connectionMode:g,domNode:m,autoPanOnConnect:D,connectionRadius:x,onConnectStart:v,panBy:w,getNodes:_,cancelConnection:A}=a();let I=0,N;const{x:$,y:z}=Wr(e),M=h?.elementFromPoint($,z),X=zd(d,M),B=m?.getBoundingClientRect();if(!B||!X)return;let U,K=Wr(e,B),q=!1,G=null,b=!1,P=null;const O=e8({nodes:_(),nodeId:n,handleId:t,handleType:X}),Z=()=>{if(!D)return;const[ne,re]=Og(K,B);w({x:ne,y:re}),I=requestAnimationFrame(Z)};u({connectionPosition:K,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:X,connectionStartHandle:{nodeId:n,handleId:t,type:X},connectionEndHandle:null}),v?.(e,{nodeId:n,handleId:t,handleType:X});function ee(ne){const{transform:re}=a();K=Wr(ne,B);const{handle:ae,validHandleResult:W}=J3(ne,h,td(K,re,!1,[1,1]),x,O,ie=>Xg(ie,g,n,t,o?"target":"source",l,h));if(N=ae,q||(Z(),q=!0),P=W.handleDomNode,G=W.connection,b=W.isValid,u({connectionPosition:N&&b?Ug({x:N.x,y:N.y},re):K,connectionStatus:t8(!!N,b),connectionEndHandle:W.endHandle}),!N&&!b&&!P)return Nl(U);G.source!==G.target&&P&&(Nl(U),U=P,P.classList.add("connecting","react-flow__handle-connecting"),P.classList.toggle("valid",b),P.classList.toggle("react-flow__handle-valid",b))}function H(ne){(N||P)&&G&&b&&i?.(G),a().onConnectEnd?.(ne),d&&f?.(ne),Nl(U),A(),cancelAnimationFrame(I),q=!1,b=!1,G=null,P=null,h.removeEventListener("mousemove",ee),h.removeEventListener("mouseup",H),h.removeEventListener("touchmove",ee),h.removeEventListener("touchend",H)}h.addEventListener("mousemove",ee),h.addEventListener("mouseup",H),h.addEventListener("touchmove",ee),h.addEventListener("touchend",H)}const Jp=()=>!0,n8=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),r8=(e,t,n)=>i=>{const{connectionStartHandle:o,connectionEndHandle:a,connectionClickStartHandle:u}=i;return{connecting:o?.nodeId===e&&o?.handleId===t&&o?.type===n||a?.nodeId===e&&a?.handleId===t&&a?.type===n,clickConnecting:u?.nodeId===e&&u?.handleId===t&&u?.type===n}},Kg=S.forwardRef(({type:e="source",position:t=De.Top,isValidConnection:n,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:u,onConnect:l,children:d,className:f,onMouseDown:h,onTouchStart:g,...m},D)=>{const x=u||null,v=e==="target",w=kt(),_=Z3(),{connectOnClick:A,noPanClassName:I}=ft(n8,zt),{connecting:N,clickConnecting:$}=ft(r8(_,x,e),zt);_||w.getState().onError?.("010",Fr.error010());const z=B=>{const{defaultEdgeOptions:U,onConnect:K,hasDefaultEdges:q}=w.getState(),G={...U,...B};if(q){const{edges:b,setEdges:P}=w.getState();P(K3(G,b))}K?.(G),l?.(G)},M=B=>{if(!_)return;const U=zg(B);o&&(U&&B.button===0||!U)&&Yg({event:B,handleId:x,nodeId:_,onConnect:z,isTarget:v,getState:w.getState,setState:w.setState,isValidConnection:n||w.getState().isValidConnection||Jp}),U?h?.(B):g?.(B)},X=B=>{const{onClickConnectStart:U,onClickConnectEnd:K,connectionClickStartHandle:q,connectionMode:G,isValidConnection:b}=w.getState();if(!_||!q&&!o)return;if(!q){U?.(B,{nodeId:_,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:_,type:e,handleId:x}});return}const P=Pg(B.target),O=n||b||Jp,{connection:Z,isValid:ee}=Xg({nodeId:_,id:x,type:e},G,q.nodeId,q.handleId||null,q.type,O,P);ee&&z(Z),K?.(B),w.setState({connectionClickStartHandle:null})};return j.createElement("div",{"data-handleid":x,"data-nodeid":_,"data-handlepos":t,"data-id":`${_}-${x}-${e}`,className:qt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",I,f,{source:!v,target:v,connectable:i,connectablestart:o,connectableend:a,connecting:$,connectionindicator:i&&(o&&!N||a&&N)}]),onMouseDown:M,onTouchStart:M,onClick:A?X:void 0,ref:D,...m},d)});Kg.displayName="Handle";var Xr=S.memo(Kg);const Jg=({data:e,isConnectable:t,targetPosition:n=De.Top,sourcePosition:i=De.Bottom})=>j.createElement(j.Fragment,null,j.createElement(Xr,{type:"target",position:n,isConnectable:t}),e?.label,j.createElement(Xr,{type:"source",position:i,isConnectable:t}));Jg.displayName="DefaultNode";var nd=S.memo(Jg);const Qg=({data:e,isConnectable:t,sourcePosition:n=De.Bottom})=>j.createElement(j.Fragment,null,e?.label,j.createElement(Xr,{type:"source",position:n,isConnectable:t}));Qg.displayName="InputNode";var em=S.memo(Qg);const tm=({data:e,isConnectable:t,targetPosition:n=De.Top})=>j.createElement(j.Fragment,null,j.createElement(Xr,{type:"target",position:n,isConnectable:t}),e?.label);tm.displayName="OutputNode";var nm=S.memo(tm);const Ld=()=>null;Ld.displayName="GroupNode";const i8=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Ua=e=>e.id;function s8(e,t){return zt(e.selectedNodes.map(Ua),t.selectedNodes.map(Ua))&&zt(e.selectedEdges.map(Ua),t.selectedEdges.map(Ua))}const rm=S.memo(({onSelectionChange:e})=>{const t=kt(),{selectedNodes:n,selectedEdges:i}=ft(i8,s8);return S.useEffect(()=>{const o={nodes:n,edges:i};e?.(o),t.getState().onSelectionChange.forEach(a=>a(o))},[n,i,e]),null});rm.displayName="SelectionListener";const o8=e=>!!e.onSelectionChange;function a8({onSelectionChange:e}){const t=ft(o8);return e||t?j.createElement(rm,{onSelectionChange:e}):null}const u8=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Wi(e,t){S.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function ze(e,t,n){S.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const c8=({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:o,onConnectStart:a,onConnectEnd:u,onClickConnectStart:l,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:h,nodesFocusable:g,edgesFocusable:m,edgesUpdatable:D,elevateNodesOnSelect:x,minZoom:v,maxZoom:w,nodeExtent:_,onNodesChange:A,onEdgesChange:I,elementsSelectable:N,connectionMode:$,snapGrid:z,snapToGrid:M,translateExtent:X,connectOnClick:B,defaultEdgeOptions:U,fitView:K,fitViewOptions:q,onNodesDelete:G,onEdgesDelete:b,onNodeDrag:P,onNodeDragStart:O,onNodeDragStop:Z,onSelectionDrag:ee,onSelectionDragStart:H,onSelectionDragStop:ne,noPanClassName:re,nodeOrigin:ae,rfId:W,autoPanOnConnect:ie,autoPanOnNodeDrag:ue,onError:de,connectionRadius:fe,isValidConnection:le,nodeDragThreshold:ge})=>{const{setNodes:we,setEdges:nt,setDefaultNodesAndEdges:Je,setMinZoom:Le,setMaxZoom:He,setTranslateExtent:Qe,setNodeExtent:gt,reset:Be}=ft(u8,zt),ve=kt();return S.useEffect(()=>{const _t=i?.map(Ot=>({...Ot,...U}));return Je(n,_t),()=>{Be()}},[]),ze("defaultEdgeOptions",U,ve.setState),ze("connectionMode",$,ve.setState),ze("onConnect",o,ve.setState),ze("onConnectStart",a,ve.setState),ze("onConnectEnd",u,ve.setState),ze("onClickConnectStart",l,ve.setState),ze("onClickConnectEnd",d,ve.setState),ze("nodesDraggable",f,ve.setState),ze("nodesConnectable",h,ve.setState),ze("nodesFocusable",g,ve.setState),ze("edgesFocusable",m,ve.setState),ze("edgesUpdatable",D,ve.setState),ze("elementsSelectable",N,ve.setState),ze("elevateNodesOnSelect",x,ve.setState),ze("snapToGrid",M,ve.setState),ze("snapGrid",z,ve.setState),ze("onNodesChange",A,ve.setState),ze("onEdgesChange",I,ve.setState),ze("connectOnClick",B,ve.setState),ze("fitViewOnInit",K,ve.setState),ze("fitViewOnInitOptions",q,ve.setState),ze("onNodesDelete",G,ve.setState),ze("onEdgesDelete",b,ve.setState),ze("onNodeDrag",P,ve.setState),ze("onNodeDragStart",O,ve.setState),ze("onNodeDragStop",Z,ve.setState),ze("onSelectionDrag",ee,ve.setState),ze("onSelectionDragStart",H,ve.setState),ze("onSelectionDragStop",ne,ve.setState),ze("noPanClassName",re,ve.setState),ze("nodeOrigin",ae,ve.setState),ze("rfId",W,ve.setState),ze("autoPanOnConnect",ie,ve.setState),ze("autoPanOnNodeDrag",ue,ve.setState),ze("onError",de,ve.setState),ze("connectionRadius",fe,ve.setState),ze("isValidConnection",le,ve.setState),ze("nodeDragThreshold",ge,ve.setState),Wi(e,we),Wi(t,nt),Wi(v,Le),Wi(w,He),Wi(X,Qe),Wi(_,gt),null},Qp={display:"none"},l8={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},im="react-flow__node-desc",sm="react-flow__edge-desc",d8="react-flow__aria-live",f8=e=>e.ariaLiveMessage;function h8({rfId:e}){const t=ft(f8);return j.createElement("div",{id:`${d8}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:l8},t)}function p8({rfId:e,disableKeyboardA11y:t}){return j.createElement(j.Fragment,null,j.createElement("div",{id:`${im}-${e}`,style:Qp},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),j.createElement("div",{id:`${sm}-${e}`,style:Qp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&j.createElement(h8,{rfId:e}))}var Eo=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,i]=S.useState(!1),o=S.useRef(!1),a=S.useRef(new Set([])),[u,l]=S.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),h=f.reduce((g,m)=>g.concat(...m),[]);return[f,h]}return[[],[]]},[e]);return S.useEffect(()=>{const d=typeof document<"u"?document:null,f=t?.target||d;if(e!==null){const h=D=>{if(o.current=D.ctrlKey||D.metaKey||D.shiftKey,(!o.current||o.current&&!t.actInsideInputWithModifier)&&Jl(D))return!1;const v=t0(D.code,l);a.current.add(D[v]),e0(u,a.current,!1)&&(D.preventDefault(),i(!0))},g=D=>{if((!o.current||o.current&&!t.actInsideInputWithModifier)&&Jl(D))return!1;const v=t0(D.code,l);e0(u,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(D[v]),D.key==="Meta"&&a.current.clear(),o.current=!1},m=()=>{a.current.clear(),i(!1)};return f?.addEventListener("keydown",h),f?.addEventListener("keyup",g),window.addEventListener("blur",m),()=>{f?.removeEventListener("keydown",h),f?.removeEventListener("keyup",g),window.removeEventListener("blur",m)}}},[e,i]),n};function e0(e,t,n){return e.filter(i=>n||i.length===t.size).some(i=>i.every(o=>t.has(o)))}function t0(e,t){return t.includes(e)?"code":"key"}function om(e,t,n,i){const o=e.parentNode||e.parentId;if(!o)return n;const a=t.get(o),u=us(a,i);return om(a,t,{x:(n.x??0)+u.x,y:(n.y??0)+u.y,z:(a[vt]?.z??0)>(n.z??0)?a[vt]?.z??0:n.z??0},i)}function am(e,t,n){e.forEach(i=>{const o=i.parentNode||i.parentId;if(o&&!e.has(o))throw new Error(`Parent node ${o} not found`);if(o||n?.[i.id]){const{x:a,y:u,z:l}=om(i,e,{...i.position,z:i[vt]?.z??0},t);i.positionAbsolute={x:a,y:u},i[vt].z=l,n?.[i.id]&&(i[vt].isParent=!0)}})}function Tl(e,t,n,i){const o=new Map,a={},u=i?1e3:0;return e.forEach(l=>{const d=(Nn(l.zIndex)?l.zIndex:0)+(l.selected?u:0),f=t.get(l.id),h={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},g=l.parentNode||l.parentId;g&&(a[g]=!0);const m=f?.type&&f?.type!==l.type;Object.defineProperty(h,vt,{enumerable:!1,value:{handleBounds:m?void 0:f?.[vt]?.handleBounds,z:d}}),o.set(l.id,h)}),am(o,n,a),o}function um(e,t={}){const{getNodes:n,width:i,height:o,minZoom:a,maxZoom:u,d3Zoom:l,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:h,nodeOrigin:g}=e(),m=t.initial&&!f&&h;if(l&&d&&(m||!t.initial)){const x=n().filter(w=>{const _=t.includeHiddenNodes?w.width&&w.height:!w.hidden;return t.nodes?.length?_&&t.nodes.some(A=>A.id===w.id):_}),v=x.every(w=>w.width&&w.height);if(x.length>0&&v){const w=$d(x,g),{x:_,y:A,zoom:I}=Wg(w,i,o,t.minZoom??a,t.maxZoom??u,t.padding??.1),N=Zr.translate(_,A).scale(I);return typeof t.duration=="number"&&t.duration>0?l.transform(mi(d,t.duration),N):l.transform(d,N),!0}}return!1}function g8(e,t){return e.forEach(n=>{const i=t.get(n.id);i&&t.set(i.id,{...i,[vt]:i[vt],selected:n.selected})}),new Map(t)}function m8(e,t){return t.map(n=>{const i=e.find(o=>o.id===n.id);return i&&(n.selected=i.selected),n})}function Ga({changedNodes:e,changedEdges:t,get:n,set:i}){const{nodeInternals:o,edges:a,onNodesChange:u,onEdgesChange:l,hasDefaultNodes:d,hasDefaultEdges:f}=n();e?.length&&(d&&i({nodeInternals:g8(e,o)}),u?.(e)),t?.length&&(f&&i({edges:m8(t,a)}),l?.(t))}const qi=()=>{},y8={zoomIn:qi,zoomOut:qi,zoomTo:qi,getZoom:()=>1,setViewport:qi,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:qi,fitBounds:qi,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},v8=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),_8=()=>{const e=kt(),{d3Zoom:t,d3Selection:n}=ft(v8,zt);return S.useMemo(()=>n&&t?{zoomIn:o=>t.scaleBy(mi(n,o?.duration),1.2),zoomOut:o=>t.scaleBy(mi(n,o?.duration),1/1.2),zoomTo:(o,a)=>t.scaleTo(mi(n,a?.duration),o),getZoom:()=>e.getState().transform[2],setViewport:(o,a)=>{const[u,l,d]=e.getState().transform,f=Zr.translate(o.x??u,o.y??l).scale(o.zoom??d);t.transform(mi(n,a?.duration),f)},getViewport:()=>{const[o,a,u]=e.getState().transform;return{x:o,y:a,zoom:u}},fitView:o=>um(e.getState,o),setCenter:(o,a,u)=>{const{width:l,height:d,maxZoom:f}=e.getState(),h=typeof u?.zoom<"u"?u.zoom:f,g=l/2-o*h,m=d/2-a*h,D=Zr.translate(g,m).scale(h);t.transform(mi(n,u?.duration),D)},fitBounds:(o,a)=>{const{width:u,height:l,minZoom:d,maxZoom:f}=e.getState(),{x:h,y:g,zoom:m}=Wg(o,u,l,d,f,a?.padding??.1),D=Zr.translate(h,g).scale(m);t.transform(mi(n,a?.duration),D)},project:o=>{const{transform:a,snapToGrid:u,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),td(o,a,u,l)},screenToFlowPosition:o=>{const{transform:a,snapToGrid:u,snapGrid:l,domNode:d}=e.getState();if(!d)return o;const{x:f,y:h}=d.getBoundingClientRect(),g={x:o.x-f,y:o.y-h};return td(g,a,u,l)},flowToScreenPosition:o=>{const{transform:a,domNode:u}=e.getState();if(!u)return o;const{x:l,y:d}=u.getBoundingClientRect(),f=Ug(o,a);return{x:f.x+l,y:f.y+d}},viewportInitialized:!0}:y8,[t,n])};function jd(){const e=_8(),t=kt(),n=S.useCallback(()=>t.getState().getNodes().map(v=>({...v})),[]),i=S.useCallback(v=>t.getState().nodeInternals.get(v),[]),o=S.useCallback(()=>{const{edges:v=[]}=t.getState();return v.map(w=>({...w}))},[]),a=S.useCallback(v=>{const{edges:w=[]}=t.getState();return w.find(_=>_.id===v)},[]),u=S.useCallback(v=>{const{getNodes:w,setNodes:_,hasDefaultNodes:A,onNodesChange:I}=t.getState(),N=w(),$=typeof v=="function"?v(N):v;if(A)_($);else if(I){const z=$.length===0?N.map(M=>({type:"remove",id:M.id})):$.map(M=>({item:M,type:"reset"}));I(z)}},[]),l=S.useCallback(v=>{const{edges:w=[],setEdges:_,hasDefaultEdges:A,onEdgesChange:I}=t.getState(),N=typeof v=="function"?v(w):v;if(A)_(N);else if(I){const $=N.length===0?w.map(z=>({type:"remove",id:z.id})):N.map(z=>({item:z,type:"reset"}));I($)}},[]),d=S.useCallback(v=>{const w=Array.isArray(v)?v:[v],{getNodes:_,setNodes:A,hasDefaultNodes:I,onNodesChange:N}=t.getState();if(I){const z=[..._(),...w];A(z)}else if(N){const $=w.map(z=>({item:z,type:"add"}));N($)}},[]),f=S.useCallback(v=>{const w=Array.isArray(v)?v:[v],{edges:_=[],setEdges:A,hasDefaultEdges:I,onEdgesChange:N}=t.getState();if(I)A([..._,...w]);else if(N){const $=w.map(z=>({item:z,type:"add"}));N($)}},[]),h=S.useCallback(()=>{const{getNodes:v,edges:w=[],transform:_}=t.getState(),[A,I,N]=_;return{nodes:v().map($=>({...$})),edges:w.map($=>({...$})),viewport:{x:A,y:I,zoom:N}}},[]),g=S.useCallback(({nodes:v,edges:w})=>{const{nodeInternals:_,getNodes:A,edges:I,hasDefaultNodes:N,hasDefaultEdges:$,onNodesDelete:z,onEdgesDelete:M,onNodesChange:X,onEdgesChange:B}=t.getState(),U=(v||[]).map(P=>P.id),K=(w||[]).map(P=>P.id),q=A().reduce((P,O)=>{const Z=O.parentNode||O.parentId,ee=!U.includes(O.id)&&Z&&P.find(ne=>ne.id===Z);return(typeof O.deletable=="boolean"?O.deletable:!0)&&(U.includes(O.id)||ee)&&P.push(O),P},[]),G=I.filter(P=>typeof P.deletable=="boolean"?P.deletable:!0),b=G.filter(P=>K.includes(P.id));if(q||b){const P=Zg(q,G),O=[...b,...P],Z=O.reduce((ee,H)=>(ee.includes(H.id)||ee.push(H.id),ee),[]);if(($||N)&&($&&t.setState({edges:I.filter(ee=>!Z.includes(ee.id))}),N&&(q.forEach(ee=>{_.delete(ee.id)}),t.setState({nodeInternals:new Map(_)}))),Z.length>0&&(M?.(O),B&&B(Z.map(ee=>({id:ee,type:"remove"})))),q.length>0&&(z?.(q),X)){const ee=q.map(H=>({id:H.id,type:"remove"}));X(ee)}}},[]),m=S.useCallback(v=>{const w=$3(v),_=w?null:t.getState().nodeInternals.get(v.id);return!w&&!_?[null,null,w]:[w?v:Zp(_),_,w]},[]),D=S.useCallback((v,w=!0,_)=>{const[A,I,N]=m(v);return A?(_||t.getState().getNodes()).filter($=>{if(!N&&($.id===I.id||!$.positionAbsolute))return!1;const z=Zp($),M=Kl(z,A);return w&&M>0||M>=A.width*A.height}):[]},[]),x=S.useCallback((v,w,_=!0)=>{const[A]=m(v);if(!A)return!1;const I=Kl(A,w);return _&&I>0||I>=A.width*A.height},[]);return S.useMemo(()=>({...e,getNodes:n,getNode:i,getEdges:o,getEdge:a,setNodes:u,setEdges:l,addNodes:d,addEdges:f,toObject:h,deleteElements:g,getIntersectingNodes:D,isNodeIntersecting:x}),[e,n,i,o,a,u,l,d,f,h,g,D,x])}const D8={actInsideInputWithModifier:!1};var x8=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=kt(),{deleteElements:i}=jd(),o=Eo(e,D8),a=Eo(t);S.useEffect(()=>{if(o){const{edges:u,getNodes:l}=n.getState(),d=l().filter(h=>h.selected),f=u.filter(h=>h.selected);i({nodes:d,edges:f}),n.setState({nodesSelectionActive:!1})}},[o]),S.useEffect(()=>{n.setState({multiSelectionActive:a})},[a])};function w8(e){const t=kt();S.useEffect(()=>{let n;const i=()=>{if(!e.current)return;const o=Td(e.current);(o.height===0||o.width===0)&&t.getState().onError?.("004",Fr.error004()),t.setState({width:o.width||500,height:o.height||500})};return i(),window.addEventListener("resize",i),e.current&&(n=new ResizeObserver(()=>i()),n.observe(e.current)),()=>{window.removeEventListener("resize",i),n&&e.current&&n.unobserve(e.current)}},[])}const Hd={position:"absolute",width:"100%",height:"100%",top:0,left:0},C8=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Za=e=>({x:e.x,y:e.y,zoom:e.k}),Xi=(e,t)=>e.target.closest(`.${t}`),n0=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),r0=e=>{const t=e.ctrlKey&&fu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},E8=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),b8=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:i,zoomOnScroll:o=!0,zoomOnPinch:a=!0,panOnScroll:u=!1,panOnScrollSpeed:l=.5,panOnScrollMode:d=vi.Free,zoomOnDoubleClick:f=!0,elementsSelectable:h,panOnDrag:g=!0,defaultViewport:m,translateExtent:D,minZoom:x,maxZoom:v,zoomActivationKeyCode:w,preventScrolling:_=!0,children:A,noWheelClassName:I,noPanClassName:N})=>{const $=S.useRef(),z=kt(),M=S.useRef(!1),X=S.useRef(!1),B=S.useRef(null),U=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:K,d3Selection:q,d3ZoomHandler:G,userSelectionActive:b}=ft(E8,zt),P=Eo(w),O=S.useRef(0),Z=S.useRef(!1),ee=S.useRef();return w8(B),S.useEffect(()=>{if(B.current){const H=B.current.getBoundingClientRect(),ne=T3().scaleExtent([x,v]).translateExtent(D),re=Ln(B.current).call(ne),ae=Zr.translate(m.x,m.y).scale(ms(m.zoom,x,v)),W=[[0,0],[H.width,H.height]],ie=ne.constrain()(ae,W,D);ne.transform(re,ie),ne.wheelDelta(r0),z.setState({d3Zoom:ne,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[ie.x,ie.y,ie.k],domNode:B.current.closest(".react-flow")})}},[]),S.useEffect(()=>{q&&K&&(u&&!P&&!b?q.on("wheel.zoom",H=>{if(Xi(H,I))return!1;H.preventDefault(),H.stopImmediatePropagation();const ne=q.property("__zoom").k||1;if(H.ctrlKey&&a){const le=tr(H),ge=r0(H),we=ne*Math.pow(2,ge);K.scaleTo(q,we,le,H);return}const re=H.deltaMode===1?20:1;let ae=d===vi.Vertical?0:H.deltaX*re,W=d===vi.Horizontal?0:H.deltaY*re;!fu()&&H.shiftKey&&d!==vi.Vertical&&(ae=H.deltaY*re,W=0),K.translateBy(q,-(ae/ne)*l,-(W/ne)*l,{internal:!0});const ie=Za(q.property("__zoom")),{onViewportChangeStart:ue,onViewportChange:de,onViewportChangeEnd:fe}=z.getState();clearTimeout(ee.current),Z.current||(Z.current=!0,t?.(H,ie),ue?.(ie)),Z.current&&(e?.(H,ie),de?.(ie),ee.current=setTimeout(()=>{n?.(H,ie),fe?.(ie),Z.current=!1},150))},{passive:!1}):typeof G<"u"&&q.on("wheel.zoom",function(H,ne){if(!_&&H.type==="wheel"&&!H.ctrlKey||Xi(H,I))return null;H.preventDefault(),G.call(this,H,ne)},{passive:!1}))},[b,u,d,q,K,G,P,a,_,I,t,e,n]),S.useEffect(()=>{K&&K.on("start",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;O.current=H.sourceEvent?.button;const{onViewportChangeStart:ne}=z.getState(),re=Za(H.transform);M.current=!0,U.current=re,H.sourceEvent?.type==="mousedown"&&z.setState({paneDragging:!0}),ne?.(re),t?.(H.sourceEvent,re)})},[K,t]),S.useEffect(()=>{K&&(b&&!M.current?K.on("zoom",null):b||K.on("zoom",H=>{const{onViewportChange:ne}=z.getState();if(z.setState({transform:[H.transform.x,H.transform.y,H.transform.k]}),X.current=!!(i&&n0(g,O.current??0)),(e||ne)&&!H.sourceEvent?.internal){const re=Za(H.transform);ne?.(re),e?.(H.sourceEvent,re)}}))},[b,K,e,g,i]),S.useEffect(()=>{K&&K.on("end",H=>{if(!H.sourceEvent||H.sourceEvent.internal)return null;const{onViewportChangeEnd:ne}=z.getState();if(M.current=!1,z.setState({paneDragging:!1}),i&&n0(g,O.current??0)&&!X.current&&i(H.sourceEvent),X.current=!1,(n||ne)&&C8(U.current,H.transform)){const re=Za(H.transform);U.current=re,clearTimeout($.current),$.current=setTimeout(()=>{ne?.(re),n?.(H.sourceEvent,re)},u?150:0)}})},[K,u,g,n,i]),S.useEffect(()=>{K&&K.filter(H=>{const ne=P||o,re=a&&H.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&H.button===1&&H.type==="mousedown"&&(Xi(H,"react-flow__node")||Xi(H,"react-flow__edge")))return!0;if(!g&&!ne&&!u&&!f&&!a||b||!f&&H.type==="dblclick"||Xi(H,I)&&H.type==="wheel"||Xi(H,N)&&(H.type!=="wheel"||u&&H.type==="wheel"&&!P)||!a&&H.ctrlKey&&H.type==="wheel"||!ne&&!u&&!re&&H.type==="wheel"||!g&&(H.type==="mousedown"||H.type==="touchstart")||Array.isArray(g)&&!g.includes(H.button)&&H.type==="mousedown")return!1;const ae=Array.isArray(g)&&g.includes(H.button)||!H.button||H.button<=1;return(!H.ctrlKey||H.type==="wheel")&&ae})},[b,K,o,a,u,f,g,h,P]),j.createElement("div",{className:"react-flow__renderer",ref:B,style:Hd},A)},A8=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function S8(){const{userSelectionActive:e,userSelectionRect:t}=ft(A8,zt);return e&&t?j.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function i0(e,t){const n=t.parentNode||t.parentId,i=e.find(o=>o.id===n);if(i){const o=t.position.x+t.width-i.width,a=t.position.y+t.height-i.height;if(o>0||a>0||t.position.x<0||t.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,o>0&&(i.style.width+=o),a>0&&(i.style.height+=a),t.position.x<0){const u=Math.abs(t.position.x);i.position.x=i.position.x-u,i.style.width+=u,t.position.x=0}if(t.position.y<0){const u=Math.abs(t.position.y);i.position.y=i.position.y-u,i.style.height+=u,t.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function cm(e,t){if(e.some(i=>i.type==="reset"))return e.filter(i=>i.type==="reset").map(i=>i.item);const n=e.filter(i=>i.type==="add").map(i=>i.item);return t.reduce((i,o)=>{const a=e.filter(l=>l.id===o.id);if(a.length===0)return i.push(o),i;const u={...o};for(const l of a)if(l)switch(l.type){case"select":{u.selected=l.selected;break}case"position":{typeof l.position<"u"&&(u.position=l.position),typeof l.positionAbsolute<"u"&&(u.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(u.dragging=l.dragging),u.expandParent&&i0(i,u);break}case"dimensions":{typeof l.dimensions<"u"&&(u.width=l.dimensions.width,u.height=l.dimensions.height),typeof l.updateStyle<"u"&&(u.style={...u.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(u.resizing=l.resizing),u.expandParent&&i0(i,u);break}case"remove":return i}return i.push(u),i},n)}function lm(e,t){return cm(e,t)}function F8(e,t){return cm(e,t)}const Hr=(e,t)=>({id:e,type:"select",selected:t});function ts(e,t){return e.reduce((n,i)=>{const o=t.includes(i.id);return!i.selected&&o?(i.selected=!0,n.push(Hr(i.id,!0))):i.selected&&!o&&(i.selected=!1,n.push(Hr(i.id,!1))),n},[])}const Il=(e,t)=>n=>{n.target===t.current&&e?.(n)},N8=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),dm=S.memo(({isSelecting:e,selectionMode:t=wo.Full,panOnDrag:n,onSelectionStart:i,onSelectionEnd:o,onPaneClick:a,onPaneContextMenu:u,onPaneScroll:l,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:h,children:g})=>{const m=S.useRef(null),D=kt(),x=S.useRef(0),v=S.useRef(0),w=S.useRef(),{userSelectionActive:_,elementsSelectable:A,dragging:I}=ft(N8,zt),N=()=>{D.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,v.current=0},$=G=>{a?.(G),D.getState().resetSelectedElements(),D.setState({nodesSelectionActive:!1})},z=G=>{if(Array.isArray(n)&&n?.includes(2)){G.preventDefault();return}u?.(G)},M=l?G=>l(G):void 0,X=G=>{const{resetSelectedElements:b,domNode:P}=D.getState();if(w.current=P?.getBoundingClientRect(),!A||!e||G.button!==0||G.target!==m.current||!w.current)return;const{x:O,y:Z}=Wr(G,w.current);b(),D.setState({userSelectionRect:{width:0,height:0,startX:O,startY:Z,x:O,y:Z}}),i?.(G)},B=G=>{const{userSelectionRect:b,nodeInternals:P,edges:O,transform:Z,onNodesChange:ee,onEdgesChange:H,nodeOrigin:ne,getNodes:re}=D.getState();if(!e||!w.current||!b)return;D.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ae=Wr(G,w.current),W=b.startX??0,ie=b.startY??0,ue={...b,x:ae.x<W?ae.x:W,y:ae.y<ie?ae.y:ie,width:Math.abs(ae.x-W),height:Math.abs(ae.y-ie)},de=re(),fe=Gg(P,ue,Z,t===wo.Partial,!0,ne),le=Zg(fe,O).map(we=>we.id),ge=fe.map(we=>we.id);if(x.current!==ge.length){x.current=ge.length;const we=ts(de,ge);we.length&&ee?.(we)}if(v.current!==le.length){v.current=le.length;const we=ts(O,le);we.length&&H?.(we)}D.setState({userSelectionRect:ue})},U=G=>{if(G.button!==0)return;const{userSelectionRect:b}=D.getState();!_&&b&&G.target===m.current&&$?.(G),D.setState({nodesSelectionActive:x.current>0}),N(),o?.(G)},K=G=>{_&&(D.setState({nodesSelectionActive:x.current>0}),o?.(G)),N()},q=A&&(e||_);return j.createElement("div",{className:qt(["react-flow__pane",{dragging:I,selection:e}]),onClick:q?void 0:Il($,m),onContextMenu:Il(z,m),onWheel:Il(M,m),onMouseEnter:q?void 0:d,onMouseDown:q?X:void 0,onMouseMove:q?B:f,onMouseUp:q?U:void 0,onMouseLeave:q?K:h,ref:m,style:Hd},g,j.createElement(S8,null))});dm.displayName="Pane";function fm(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const i=t.get(n);return i?i.selected?!0:fm(i,t):!1}function s0(e,t,n){let i=e;do{if(i?.matches(t))return!0;if(i===n.current)return!1;i=i.parentElement}while(i);return!1}function T8(e,t,n,i){return Array.from(e.values()).filter(o=>(o.selected||o.id===i)&&(!o.parentNode||o.parentId||!fm(o,e))&&(o.draggable||t&&typeof o.draggable>"u")).map(o=>({id:o.id,position:o.position||{x:0,y:0},positionAbsolute:o.positionAbsolute||{x:0,y:0},distance:{x:n.x-(o.positionAbsolute?.x??0),y:n.y-(o.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:o.extent,parentNode:o.parentNode||o.parentId,parentId:o.parentNode||o.parentId,width:o.width,height:o.height,expandParent:o.expandParent}))}function I8(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function hm(e,t,n,i,o=[0,0],a){const u=I8(e,e.extent||i);let l=u;const d=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(d&&e.width&&e.height){const g=n.get(d),{x:m,y:D}=us(g,o).positionAbsolute;l=g&&Nn(m)&&Nn(D)&&Nn(g.width)&&Nn(g.height)?[[m+e.width*o[0],D+e.height*o[1]],[m+g.width-e.width+e.width*o[0],D+g.height-e.height+e.height*o[1]]]:l}else a?.("005",Fr.error005()),l=u;else if(e.extent&&d&&e.extent!=="parent"){const g=n.get(d),{x:m,y:D}=us(g,o).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+D],[e.extent[1][0]+m,e.extent[1][1]+D]]}let f={x:0,y:0};if(d){const g=n.get(d);f=us(g,o).positionAbsolute}const h=l&&l!=="parent"?Id(t,l):t;return{position:{x:h.x-f.x,y:h.y-f.y},positionAbsolute:h}}function kl({nodeId:e,dragItems:t,nodeInternals:n}){const i=t.map(o=>({...n.get(o.id),position:o.position,positionAbsolute:o.positionAbsolute}));return[e?i.find(o=>o.id===e):i[0],i]}const o0=(e,t,n,i)=>{const o=t.querySelectorAll(e);if(!o||!o.length)return null;const a=Array.from(o),u=t.getBoundingClientRect(),l={x:u.width*i[0],y:u.height*i[1]};return a.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-u.left-l.x)/n,y:(f.top-u.top-l.y)/n,...Td(d)}})};function Ks(e,t,n){return n===void 0?n:i=>{const o=t().nodeInternals.get(e);o&&n(i,{...o})}}function rd({id:e,store:t,unselect:n=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:u,nodeInternals:l,onError:d}=t.getState(),f=l.get(e);if(!f){d?.("012",Fr.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&u)&&(a({nodes:[f],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([e])}function k8(){const e=kt();return S.useCallback(({sourceEvent:n})=>{const{transform:i,snapGrid:o,snapToGrid:a}=e.getState(),u=n.touches?n.touches[0].clientX:n.clientX,l=n.touches?n.touches[0].clientY:n.clientY,d={x:(u-i[0])/i[2],y:(l-i[1])/i[2]};return{xSnapped:a?o[0]*Math.round(d.x/o[0]):d.x,ySnapped:a?o[1]*Math.round(d.y/o[1]):d.y,...d}},[])}function Bl(e){return(t,n,i)=>e?.(t,i)}function pm({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:i,nodeId:o,isSelectable:a,selectNodesOnDrag:u}){const l=kt(),[d,f]=S.useState(!1),h=S.useRef([]),g=S.useRef({x:null,y:null}),m=S.useRef(0),D=S.useRef(null),x=S.useRef({x:0,y:0}),v=S.useRef(null),w=S.useRef(!1),_=S.useRef(!1),A=S.useRef(!1),I=k8();return S.useEffect(()=>{if(e?.current){const N=Ln(e.current),$=({x:X,y:B})=>{const{nodeInternals:U,onNodeDrag:K,onSelectionDrag:q,updateNodePositions:G,nodeExtent:b,snapGrid:P,snapToGrid:O,nodeOrigin:Z,onError:ee}=l.getState();g.current={x:X,y:B};let H=!1,ne={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&b){const ae=$d(h.current,Z);ne=kd(ae)}if(h.current=h.current.map(ae=>{const W={x:X-ae.distance.x,y:B-ae.distance.y};O&&(W.x=P[0]*Math.round(W.x/P[0]),W.y=P[1]*Math.round(W.y/P[1]));const ie=[[b[0][0],b[0][1]],[b[1][0],b[1][1]]];h.current.length>1&&b&&!ae.extent&&(ie[0][0]=ae.positionAbsolute.x-ne.x+b[0][0],ie[1][0]=ae.positionAbsolute.x+(ae.width??0)-ne.x2+b[1][0],ie[0][1]=ae.positionAbsolute.y-ne.y+b[0][1],ie[1][1]=ae.positionAbsolute.y+(ae.height??0)-ne.y2+b[1][1]);const ue=hm(ae,W,U,ie,Z,ee);return H=H||ae.position.x!==ue.position.x||ae.position.y!==ue.position.y,ae.position=ue.position,ae.positionAbsolute=ue.positionAbsolute,ae}),!H)return;G(h.current,!0,!0),f(!0);const re=o?K:Bl(q);if(re&&v.current){const[ae,W]=kl({nodeId:o,dragItems:h.current,nodeInternals:U});re(v.current,ae,W)}},z=()=>{if(!D.current)return;const[X,B]=Og(x.current,D.current);if(X!==0||B!==0){const{transform:U,panBy:K}=l.getState();g.current.x=(g.current.x??0)-X/U[2],g.current.y=(g.current.y??0)-B/U[2],K({x:X,y:B})&&$(g.current)}m.current=requestAnimationFrame(z)},M=X=>{const{nodeInternals:B,multiSelectionActive:U,nodesDraggable:K,unselectNodesAndEdges:q,onNodeDragStart:G,onSelectionDragStart:b}=l.getState();_.current=!0;const P=o?G:Bl(b);(!u||!a)&&!U&&o&&(B.get(o)?.selected||q()),o&&a&&u&&rd({id:o,store:l,nodeRef:e});const O=I(X);if(g.current=O,h.current=T8(B,K,O,o),P&&h.current){const[Z,ee]=kl({nodeId:o,dragItems:h.current,nodeInternals:B});P(X.sourceEvent,Z,ee)}};if(t)N.on(".drag",null);else{const X=LA().on("start",B=>{const{domNode:U,nodeDragThreshold:K}=l.getState();K===0&&M(B),A.current=!1;const q=I(B);g.current=q,D.current=U?.getBoundingClientRect()||null,x.current=Wr(B.sourceEvent,D.current)}).on("drag",B=>{const U=I(B),{autoPanOnNodeDrag:K,nodeDragThreshold:q}=l.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(A.current=!0),!A.current){if(!w.current&&_.current&&K&&(w.current=!0,z()),!_.current){const G=U.xSnapped-(g?.current?.x??0),b=U.ySnapped-(g?.current?.y??0);Math.sqrt(G*G+b*b)>q&&M(B)}(g.current.x!==U.xSnapped||g.current.y!==U.ySnapped)&&h.current&&_.current&&(v.current=B.sourceEvent,x.current=Wr(B.sourceEvent,D.current),$(U))}}).on("end",B=>{if(!(!_.current||A.current)&&(f(!1),w.current=!1,_.current=!1,cancelAnimationFrame(m.current),h.current)){const{updateNodePositions:U,nodeInternals:K,onNodeDragStop:q,onSelectionDragStop:G}=l.getState(),b=o?q:Bl(G);if(U(h.current,!1,!1),b){const[P,O]=kl({nodeId:o,dragItems:h.current,nodeInternals:K});b(B.sourceEvent,P,O)}}}).filter(B=>{const U=B.target;return!B.button&&(!n||!s0(U,`.${n}`,e))&&(!i||s0(U,i,e))});return N.call(X),()=>{N.on(".drag",null)}}}},[e,t,n,i,a,l,o,u,I]),d}function gm(){const e=kt();return S.useCallback(n=>{const{nodeInternals:i,nodeExtent:o,updateNodePositions:a,getNodes:u,snapToGrid:l,snapGrid:d,onError:f,nodesDraggable:h}=e.getState(),g=u().filter(A=>A.selected&&(A.draggable||h&&typeof A.draggable>"u")),m=l?d[0]:5,D=l?d[1]:5,x=n.isShiftPressed?4:1,v=n.x*m*x,w=n.y*D*x,_=g.map(A=>{if(A.positionAbsolute){const I={x:A.positionAbsolute.x+v,y:A.positionAbsolute.y+w};l&&(I.x=d[0]*Math.round(I.x/d[0]),I.y=d[1]*Math.round(I.y/d[1]));const{positionAbsolute:N,position:$}=hm(A,I,i,o,void 0,f);A.position=$,A.positionAbsolute=N}return A});a(_,!0,!1)},[])}const cs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Js=e=>{const t=({id:n,type:i,data:o,xPos:a,yPos:u,xPosOrigin:l,yPosOrigin:d,selected:f,onClick:h,onMouseEnter:g,onMouseMove:m,onMouseLeave:D,onContextMenu:x,onDoubleClick:v,style:w,className:_,isDraggable:A,isSelectable:I,isConnectable:N,isFocusable:$,selectNodesOnDrag:z,sourcePosition:M,targetPosition:X,hidden:B,resizeObserver:U,dragHandle:K,zIndex:q,isParent:G,noDragClassName:b,noPanClassName:P,initialized:O,disableKeyboardA11y:Z,ariaLabel:ee,rfId:H,hasHandleBounds:ne})=>{const re=kt(),ae=S.useRef(null),W=S.useRef(null),ie=S.useRef(M),ue=S.useRef(X),de=S.useRef(i),fe=I||A||h||g||m||D,le=gm(),ge=Ks(n,re.getState,g),we=Ks(n,re.getState,m),nt=Ks(n,re.getState,D),Je=Ks(n,re.getState,x),Le=Ks(n,re.getState,v),He=Be=>{const{nodeDragThreshold:ve}=re.getState();if(I&&(!z||!A||ve>0)&&rd({id:n,store:re,nodeRef:ae}),h){const _t=re.getState().nodeInternals.get(n);_t&&h(Be,{..._t})}},Qe=Be=>{if(!Jl(Be)&&!Z)if($g.includes(Be.key)&&I){const ve=Be.key==="Escape";rd({id:n,store:re,unselect:ve,nodeRef:ae})}else A&&f&&Object.prototype.hasOwnProperty.call(cs,Be.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${Be.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~u}`}),le({x:cs[Be.key].x,y:cs[Be.key].y,isShiftPressed:Be.shiftKey}))};S.useEffect(()=>()=>{W.current&&(U?.unobserve(W.current),W.current=null)},[]),S.useEffect(()=>{if(ae.current&&!B){const Be=ae.current;(!O||!ne||W.current!==Be)&&(W.current&&U?.unobserve(W.current),U?.observe(Be),W.current=Be)}},[B,O,ne]),S.useEffect(()=>{const Be=de.current!==i,ve=ie.current!==M,_t=ue.current!==X;ae.current&&(Be||ve||_t)&&(Be&&(de.current=i),ve&&(ie.current=M),_t&&(ue.current=X),re.getState().updateNodeDimensions([{id:n,nodeElement:ae.current,forceUpdate:!0}]))},[n,i,M,X]);const gt=pm({nodeRef:ae,disabled:B||!A,noDragClassName:b,handleSelector:K,nodeId:n,isSelectable:I,selectNodesOnDrag:z});return B?null:j.createElement("div",{className:qt(["react-flow__node",`react-flow__node-${i}`,{[P]:A},_,{selected:f,selectable:I,parent:G,dragging:gt}]),ref:ae,style:{zIndex:q,transform:`translate(${l}px,${d}px)`,pointerEvents:fe?"all":"none",visibility:O?"visible":"hidden",...w},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:ge,onMouseMove:we,onMouseLeave:nt,onContextMenu:Je,onClick:He,onDoubleClick:Le,onKeyDown:$?Qe:void 0,tabIndex:$?0:void 0,role:$?"button":void 0,"aria-describedby":Z?void 0:`${im}-${H}`,"aria-label":ee},j.createElement(G3,{value:n},j.createElement(e,{id:n,data:o,type:i,xPos:a,yPos:u,selected:f,isConnectable:N,sourcePosition:M,targetPosition:X,dragging:gt,dragHandle:K,zIndex:q})))};return t.displayName="NodeWrapper",S.memo(t)};const B8=e=>{const t=e.getNodes().filter(n=>n.selected);return{...$d(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function R8({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const i=kt(),{width:o,height:a,x:u,y:l,transformString:d,userSelectionActive:f}=ft(B8,zt),h=gm(),g=S.useRef(null);if(S.useEffect(()=>{n||g.current?.focus({preventScroll:!0})},[n]),pm({nodeRef:g}),f||!o||!a)return null;const m=e?x=>{const v=i.getState().getNodes().filter(w=>w.selected);e(x,v)}:void 0,D=x=>{Object.prototype.hasOwnProperty.call(cs,x.key)&&h({x:cs[x.key].x,y:cs[x.key].y,isShiftPressed:x.shiftKey})};return j.createElement("div",{className:qt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:d}},j.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:n?void 0:-1,onKeyDown:n?void 0:D,style:{width:o,height:a,top:l,left:u}}))}var M8=S.memo(R8);const O8=e=>e.nodesSelectionActive,mm=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:u,deleteKeyCode:l,onMove:d,onMoveStart:f,onMoveEnd:h,selectionKeyCode:g,selectionOnDrag:m,selectionMode:D,onSelectionStart:x,onSelectionEnd:v,multiSelectionKeyCode:w,panActivationKeyCode:_,zoomActivationKeyCode:A,elementsSelectable:I,zoomOnScroll:N,zoomOnPinch:$,panOnScroll:z,panOnScrollSpeed:M,panOnScrollMode:X,zoomOnDoubleClick:B,panOnDrag:U,defaultViewport:K,translateExtent:q,minZoom:G,maxZoom:b,preventScrolling:P,onSelectionContextMenu:O,noWheelClassName:Z,noPanClassName:ee,disableKeyboardA11y:H})=>{const ne=ft(O8),re=Eo(g),ae=Eo(_),W=ae||U,ie=ae||z,ue=re||m&&W!==!0;return x8({deleteKeyCode:l,multiSelectionKeyCode:w}),j.createElement(b8,{onMove:d,onMoveStart:f,onMoveEnd:h,onPaneContextMenu:a,elementsSelectable:I,zoomOnScroll:N,zoomOnPinch:$,panOnScroll:ie,panOnScrollSpeed:M,panOnScrollMode:X,zoomOnDoubleClick:B,panOnDrag:!re&&W,defaultViewport:K,translateExtent:q,minZoom:G,maxZoom:b,zoomActivationKeyCode:A,preventScrolling:P,noWheelClassName:Z,noPanClassName:ee},j.createElement(dm,{onSelectionStart:x,onSelectionEnd:v,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:u,panOnDrag:W,isSelecting:!!ue,selectionMode:D},e,ne&&j.createElement(M8,{onSelectionContextMenu:O,noPanClassName:ee,disableKeyboardA11y:H})))};mm.displayName="FlowRenderer";var P8=S.memo(mm);function $8(e){return ft(S.useCallback(n=>e?Gg(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function z8(e){const t={input:Js(e.input||em),default:Js(e.default||nd),output:Js(e.output||nm),group:Js(e.group||Ld)},n={},i=Object.keys(e).filter(o=>!["input","default","output","group"].includes(o)).reduce((o,a)=>(o[a]=Js(e[a]||nd),o),n);return{...t,...i}}const L8=({x:e,y:t,width:n,height:i,origin:o})=>!n||!i?{x:e,y:t}:o[0]<0||o[1]<0||o[0]>1||o[1]>1?{x:e,y:t}:{x:e-n*o[0],y:t-i*o[1]},j8=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ym=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:i,elementsSelectable:o,updateNodeDimensions:a,onError:u}=ft(j8,zt),l=$8(e.onlyRenderVisibleElements),d=S.useRef(),f=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(g=>{const m=g.map(D=>({id:D.target.getAttribute("data-id"),nodeElement:D.target,forceUpdate:!0}));a(m)});return d.current=h,h},[]);return S.useEffect(()=>()=>{d?.current?.disconnect()},[]),j.createElement("div",{className:"react-flow__nodes",style:Hd},l.map(h=>{let g=h.type||"default";e.nodeTypes[g]||(u?.("003",Fr.error003(g)),g="default");const m=e.nodeTypes[g]||e.nodeTypes.default,D=!!(h.draggable||t&&typeof h.draggable>"u"),x=!!(h.selectable||o&&typeof h.selectable>"u"),v=!!(h.connectable||n&&typeof h.connectable>"u"),w=!!(h.focusable||i&&typeof h.focusable>"u"),_=e.nodeExtent?Id(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,A=_?.x??0,I=_?.y??0,N=L8({x:A,y:I,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return j.createElement(m,{key:h.id,id:h.id,className:h.className,style:h.style,type:g,data:h.data,sourcePosition:h.sourcePosition||De.Bottom,targetPosition:h.targetPosition||De.Top,hidden:h.hidden,xPos:A,yPos:I,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:D,isSelectable:x,isConnectable:v,isFocusable:w,resizeObserver:f,dragHandle:h.dragHandle,zIndex:h[vt]?.z??0,isParent:!!h[vt]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!h[vt]?.handleBounds})}))};ym.displayName="NodeRenderer";var H8=S.memo(ym);const V8=(e,t,n)=>n===De.Left?e-t:n===De.Right?e+t:e,U8=(e,t,n)=>n===De.Top?e-t:n===De.Bottom?e+t:e,a0="react-flow__edgeupdater",u0=({position:e,centerX:t,centerY:n,radius:i=10,onMouseDown:o,onMouseEnter:a,onMouseOut:u,type:l})=>j.createElement("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:u,className:qt([a0,`${a0}-${l}`]),cx:V8(t,i,e),cy:U8(n,i,e),r:i,stroke:"transparent",fill:"transparent"}),G8=()=>!0;var Yi=e=>{const t=({id:n,className:i,type:o,data:a,onClick:u,onEdgeDoubleClick:l,selected:d,animated:f,label:h,labelStyle:g,labelShowBg:m,labelBgStyle:D,labelBgPadding:x,labelBgBorderRadius:v,style:w,source:_,target:A,sourceX:I,sourceY:N,targetX:$,targetY:z,sourcePosition:M,targetPosition:X,elementsSelectable:B,hidden:U,sourceHandleId:K,targetHandleId:q,onContextMenu:G,onMouseEnter:b,onMouseMove:P,onMouseLeave:O,reconnectRadius:Z,onReconnect:ee,onReconnectStart:H,onReconnectEnd:ne,markerEnd:re,markerStart:ae,rfId:W,ariaLabel:ie,isFocusable:ue,isReconnectable:de,pathOptions:fe,interactionWidth:le,disableKeyboardA11y:ge})=>{const we=S.useRef(null),[nt,Je]=S.useState(!1),[Le,He]=S.useState(!1),Qe=kt(),gt=S.useMemo(()=>`url('#${ed(ae,W)}')`,[ae,W]),Be=S.useMemo(()=>`url('#${ed(re,W)}')`,[re,W]);if(U)return null;const ve=Ct=>{const{edges:Xt,addSelectedEdges:kn,unselectNodesAndEdges:Bn,multiSelectionActive:Kn}=Qe.getState(),Yt=Xt.find(Rn=>Rn.id===n);Yt&&(B&&(Qe.setState({nodesSelectionActive:!1}),Yt.selected&&Kn?(Bn({nodes:[],edges:[Yt]}),we.current?.blur()):kn([n])),u&&u(Ct,Yt))},_t=Ys(n,Qe.getState,l),Ot=Ys(n,Qe.getState,G),bt=Ys(n,Qe.getState,b),_n=Ys(n,Qe.getState,P),Tn=Ys(n,Qe.getState,O),In=(Ct,Xt)=>{if(Ct.button!==0)return;const{edges:kn,isValidConnection:Bn}=Qe.getState(),Kn=Xt?A:_,Yt=(Xt?q:K)||null,Rn=Xt?"target":"source",bs=Bn||G8,As=Xt,ti=kn.find(cr=>cr.id===n);He(!0),H?.(Ct,ti,Rn);const Ii=cr=>{He(!1),ne?.(cr,ti,Rn)};Yg({event:Ct,handleId:Yt,nodeId:Kn,onConnect:cr=>ee?.(ti,cr),isTarget:As,getState:Qe.getState,setState:Qe.setState,isValidConnection:bs,edgeUpdaterType:Rn,onReconnectEnd:Ii})},Dn=Ct=>In(Ct,!0),ar=Ct=>In(Ct,!1),on=()=>Je(!0),an=()=>Je(!1),Yn=!B&&!u,ur=Ct=>{if(!ge&&$g.includes(Ct.key)&&B){const{unselectNodesAndEdges:Xt,addSelectedEdges:kn,edges:Bn}=Qe.getState();Ct.key==="Escape"?(we.current?.blur(),Xt({edges:[Bn.find(Yt=>Yt.id===n)]})):kn([n])}};return j.createElement("g",{className:qt(["react-flow__edge",`react-flow__edge-${o}`,i,{selected:d,animated:f,inactive:Yn,updating:nt}]),onClick:ve,onDoubleClick:_t,onContextMenu:Ot,onMouseEnter:bt,onMouseMove:_n,onMouseLeave:Tn,onKeyDown:ue?ur:void 0,tabIndex:ue?0:void 0,role:ue?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ie===null?void 0:ie||`Edge from ${_} to ${A}`,"aria-describedby":ue?`${sm}-${W}`:void 0,ref:we},!Le&&j.createElement(e,{id:n,source:_,target:A,selected:d,animated:f,label:h,labelStyle:g,labelShowBg:m,labelBgStyle:D,labelBgPadding:x,labelBgBorderRadius:v,data:a,style:w,sourceX:I,sourceY:N,targetX:$,targetY:z,sourcePosition:M,targetPosition:X,sourceHandleId:K,targetHandleId:q,markerStart:gt,markerEnd:Be,pathOptions:fe,interactionWidth:le}),de&&j.createElement(j.Fragment,null,(de==="source"||de===!0)&&j.createElement(u0,{position:M,centerX:I,centerY:N,radius:Z,onMouseDown:Dn,onMouseEnter:on,onMouseOut:an,type:"source"}),(de==="target"||de===!0)&&j.createElement(u0,{position:X,centerX:$,centerY:z,radius:Z,onMouseDown:ar,onMouseEnter:on,onMouseOut:an,type:"target"})))};return t.displayName="EdgeWrapper",S.memo(t)};function Z8(e){const t={default:Yi(e.default||hu),straight:Yi(e.bezier||Md),step:Yi(e.step||Rd),smoothstep:Yi(e.step||Bu),simplebezier:Yi(e.simplebezier||Bd)},n={},i=Object.keys(e).filter(o=>!["default","bezier"].includes(o)).reduce((o,a)=>(o[a]=Yi(e[a]||hu),o),n);return{...t,...i}}function c0(e,t,n=null){const i=(n?.x||0)+t.x,o=(n?.y||0)+t.y,a=n?.width||t.width,u=n?.height||t.height;switch(e){case De.Top:return{x:i+a/2,y:o};case De.Right:return{x:i+a,y:o+u/2};case De.Bottom:return{x:i+a/2,y:o+u};case De.Left:return{x:i,y:o+u/2}}}function l0(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const W8=(e,t,n,i,o,a)=>{const u=c0(n,e,t),l=c0(a,i,o);return{sourceX:u.x,sourceY:u.y,targetX:l.x,targetY:l.y}};function q8({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:i,targetWidth:o,targetHeight:a,width:u,height:l,transform:d}){const f={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+o),y2:Math.max(e.y+i,t.y+a)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const h=kd({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:u/d[2],height:l/d[2]}),g=Math.max(0,Math.min(h.x2,f.x2)-Math.max(h.x,f.x)),m=Math.max(0,Math.min(h.y2,f.y2)-Math.max(h.y,f.y));return Math.ceil(g*m)>0}function d0(e){const t=e?.[vt]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const X8=[{level:0,isMaxLevel:!0,edges:[]}];function Y8(e,t,n=!1){let i=-1;const o=e.reduce((u,l)=>{const d=Nn(l.zIndex);let f=d?l.zIndex:0;if(n){const h=t.get(l.target),g=t.get(l.source),m=l.selected||h?.selected||g?.selected,D=Math.max(g?.[vt]?.z||0,h?.[vt]?.z||0,1e3);f=(d?l.zIndex:0)+(m?D:0)}return u[f]?u[f].push(l):u[f]=[l],i=f>i?f:i,u},{}),a=Object.entries(o).map(([u,l])=>{const d=+u;return{edges:l,level:d,isMaxLevel:d===i}});return a.length===0?X8:a}function K8(e,t,n){const i=ft(S.useCallback(o=>e?o.edges.filter(a=>{const u=t.get(a.source),l=t.get(a.target);return u?.width&&u?.height&&l?.width&&l?.height&&q8({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:l.width,targetHeight:l.height,width:o.width,height:o.height,transform:o.transform})}):o.edges,[e,t]));return Y8(i,t,n)}const J8=({color:e="none",strokeWidth:t=1})=>j.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Q8=({color:e="none",strokeWidth:t=1})=>j.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),f0={[Co.Arrow]:J8,[Co.ArrowClosed]:Q8};function e6(e){const t=kt();return S.useMemo(()=>Object.prototype.hasOwnProperty.call(f0,e)?f0[e]:(t.getState().onError?.("009",Fr.error009(e)),null),[e])}const t6=({id:e,type:t,color:n,width:i=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"})=>{const d=e6(t);return d?j.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:l,refX:"0",refY:"0"},j.createElement(d,{color:n,strokeWidth:u})):null},n6=({defaultColor:e,rfId:t})=>n=>{const i=[];return n.edges.reduce((o,a)=>([a.markerStart,a.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const l=ed(u,t);i.includes(l)||(o.push({id:l,color:u.color||e,...u}),i.push(l))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))},vm=({defaultColor:e,rfId:t})=>{const n=ft(S.useCallback(n6({defaultColor:e,rfId:t}),[e,t]),(i,o)=>!(i.length!==o.length||i.some((a,u)=>a.id!==o[u].id)));return j.createElement("defs",null,n.map(i=>j.createElement(t6,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};vm.displayName="MarkerDefinitions";var r6=S.memo(vm);const i6=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),_m=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:i,edgeTypes:o,noPanClassName:a,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:h,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:D,onReconnectEnd:x,reconnectRadius:v,children:w,disableKeyboardA11y:_})=>{const{edgesFocusable:A,edgesUpdatable:I,elementsSelectable:N,width:$,height:z,connectionMode:M,nodeInternals:X,onError:B}=ft(i6,zt),U=K8(t,X,n);return $?j.createElement(j.Fragment,null,U.map(({level:K,edges:q,isMaxLevel:G})=>j.createElement("svg",{key:K,style:{zIndex:K},width:$,height:z,className:"react-flow__edges react-flow__container"},G&&j.createElement(r6,{defaultColor:e,rfId:i}),j.createElement("g",null,q.map(b=>{const[P,O,Z]=d0(X.get(b.source)),[ee,H,ne]=d0(X.get(b.target));if(!Z||!ne)return null;let re=b.type||"default";o[re]||(B?.("011",Fr.error011(re)),re="default");const ae=o[re]||o.default,W=M===bi.Strict?H.target:(H.target??[]).concat(H.source??[]),ie=l0(O.source,b.sourceHandle),ue=l0(W,b.targetHandle),de=ie?.position||De.Bottom,fe=ue?.position||De.Top,le=!!(b.focusable||A&&typeof b.focusable>"u"),ge=b.reconnectable||b.updatable,we=typeof m<"u"&&(ge||I&&typeof ge>"u");if(!ie||!ue)return B?.("008",Fr.error008(ie,b)),null;const{sourceX:nt,sourceY:Je,targetX:Le,targetY:He}=W8(P,ie,de,ee,ue,fe);return j.createElement(ae,{key:b.id,id:b.id,className:qt([b.className,a]),type:re,data:b.data,selected:!!b.selected,animated:!!b.animated,hidden:!!b.hidden,label:b.label,labelStyle:b.labelStyle,labelShowBg:b.labelShowBg,labelBgStyle:b.labelBgStyle,labelBgPadding:b.labelBgPadding,labelBgBorderRadius:b.labelBgBorderRadius,style:b.style,source:b.source,target:b.target,sourceHandleId:b.sourceHandle,targetHandleId:b.targetHandle,markerEnd:b.markerEnd,markerStart:b.markerStart,sourceX:nt,sourceY:Je,targetX:Le,targetY:He,sourcePosition:de,targetPosition:fe,elementsSelectable:N,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:f,onClick:h,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:D,onReconnectEnd:x,reconnectRadius:v,rfId:i,ariaLabel:b.ariaLabel,isFocusable:le,isReconnectable:we,pathOptions:"pathOptions"in b?b.pathOptions:void 0,interactionWidth:b.interactionWidth,disableKeyboardA11y:_})})))),w):null};_m.displayName="EdgeRenderer";var s6=S.memo(_m);const o6=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function a6({children:e}){const t=ft(o6);return j.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function u6(e){const t=jd(),n=S.useRef(!1);S.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const c6={[De.Left]:De.Right,[De.Right]:De.Left,[De.Top]:De.Bottom,[De.Bottom]:De.Top},Dm=({nodeId:e,handleType:t,style:n,type:i=Vr.Bezier,CustomComponent:o,connectionStatus:a})=>{const{fromNode:u,handleId:l,toX:d,toY:f,connectionMode:h}=ft(S.useCallback(z=>({fromNode:z.nodeInternals.get(e),handleId:z.connectionHandleId,toX:(z.connectionPosition.x-z.transform[0])/z.transform[2],toY:(z.connectionPosition.y-z.transform[1])/z.transform[2],connectionMode:z.connectionMode}),[e]),zt),g=u?.[vt]?.handleBounds;let m=g?.[t];if(h===bi.Loose&&(m=m||g?.[t==="source"?"target":"source"]),!u||!m)return null;const D=l?m.find(z=>z.id===l):m[0],x=D?D.x+D.width/2:(u.width??0)/2,v=D?D.y+D.height/2:u.height??0,w=(u.positionAbsolute?.x??0)+x,_=(u.positionAbsolute?.y??0)+v,A=D?.position,I=A?c6[A]:null;if(!A||!I)return null;if(o)return j.createElement(o,{connectionLineType:i,connectionLineStyle:n,fromNode:u,fromHandle:D,fromX:w,fromY:_,toX:d,toY:f,fromPosition:A,toPosition:I,connectionStatus:a});let N="";const $={sourceX:w,sourceY:_,sourcePosition:A,targetX:d,targetY:f,targetPosition:I};return i===Vr.Bezier?[N]=Od($):i===Vr.Step?[N]=Ql({...$,borderRadius:0}):i===Vr.SmoothStep?[N]=Ql($):i===Vr.SimpleBezier?[N]=Hg($):N=`M${w},${_} ${d},${f}`,j.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:n})};Dm.displayName="ConnectionLine";const l6=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function d6({containerStyle:e,style:t,type:n,component:i}){const{nodeId:o,handleType:a,nodesConnectable:u,width:l,height:d,connectionStatus:f}=ft(l6,zt);return!(o&&a&&l&&u)?null:j.createElement("svg",{style:e,width:l,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},j.createElement("g",{className:qt(["react-flow__connection",f])},j.createElement(Dm,{nodeId:o,handleType:a,style:t,type:n,CustomComponent:i,connectionStatus:f})))}function h0(e,t){return S.useRef(null),kt(),S.useMemo(()=>t(e),[e])}const xm=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:i,onMoveEnd:o,onInit:a,onNodeClick:u,onEdgeClick:l,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:D,onSelectionContextMenu:x,onSelectionStart:v,onSelectionEnd:w,connectionLineType:_,connectionLineStyle:A,connectionLineComponent:I,connectionLineContainerStyle:N,selectionKeyCode:$,selectionOnDrag:z,selectionMode:M,multiSelectionKeyCode:X,panActivationKeyCode:B,zoomActivationKeyCode:U,deleteKeyCode:K,onlyRenderVisibleElements:q,elementsSelectable:G,selectNodesOnDrag:b,defaultViewport:P,translateExtent:O,minZoom:Z,maxZoom:ee,preventScrolling:H,defaultMarkerColor:ne,zoomOnScroll:re,zoomOnPinch:ae,panOnScroll:W,panOnScrollSpeed:ie,panOnScrollMode:ue,zoomOnDoubleClick:de,panOnDrag:fe,onPaneClick:le,onPaneMouseEnter:ge,onPaneMouseMove:we,onPaneMouseLeave:nt,onPaneScroll:Je,onPaneContextMenu:Le,onEdgeContextMenu:He,onEdgeMouseEnter:Qe,onEdgeMouseMove:gt,onEdgeMouseLeave:Be,onReconnect:ve,onReconnectStart:_t,onReconnectEnd:Ot,reconnectRadius:bt,noDragClassName:_n,noWheelClassName:Tn,noPanClassName:In,elevateEdgesOnSelect:Dn,disableKeyboardA11y:ar,nodeOrigin:on,nodeExtent:an,rfId:Yn})=>{const ur=h0(e,z8),Ct=h0(t,Z8);return u6(a),j.createElement(P8,{onPaneClick:le,onPaneMouseEnter:ge,onPaneMouseMove:we,onPaneMouseLeave:nt,onPaneContextMenu:Le,onPaneScroll:Je,deleteKeyCode:K,selectionKeyCode:$,selectionOnDrag:z,selectionMode:M,onSelectionStart:v,onSelectionEnd:w,multiSelectionKeyCode:X,panActivationKeyCode:B,zoomActivationKeyCode:U,elementsSelectable:G,onMove:n,onMoveStart:i,onMoveEnd:o,zoomOnScroll:re,zoomOnPinch:ae,zoomOnDoubleClick:de,panOnScroll:W,panOnScrollSpeed:ie,panOnScrollMode:ue,panOnDrag:fe,defaultViewport:P,translateExtent:O,minZoom:Z,maxZoom:ee,onSelectionContextMenu:x,preventScrolling:H,noDragClassName:_n,noWheelClassName:Tn,noPanClassName:In,disableKeyboardA11y:ar},j.createElement(a6,null,j.createElement(s6,{edgeTypes:Ct,onEdgeClick:l,onEdgeDoubleClick:f,onlyRenderVisibleElements:q,onEdgeContextMenu:He,onEdgeMouseEnter:Qe,onEdgeMouseMove:gt,onEdgeMouseLeave:Be,onReconnect:ve,onReconnectStart:_t,onReconnectEnd:Ot,reconnectRadius:bt,defaultMarkerColor:ne,noPanClassName:In,elevateEdgesOnSelect:!!Dn,disableKeyboardA11y:ar,rfId:Yn},j.createElement(d6,{style:A,type:_,component:I,containerStyle:N})),j.createElement("div",{className:"react-flow__edgelabel-renderer"}),j.createElement(H8,{nodeTypes:ur,onNodeClick:u,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:D,selectNodesOnDrag:b,onlyRenderVisibleElements:q,noPanClassName:In,noDragClassName:_n,disableKeyboardA11y:ar,nodeOrigin:on,nodeExtent:an,rfId:Yn})))};xm.displayName="GraphView";var f6=S.memo(xm);const id=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Lr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:id,nodeExtent:id,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:bi.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:z3,isValidConnection:void 0},h6=()=>J2((e,t)=>({...Lr,setNodes:n=>{const{nodeInternals:i,nodeOrigin:o,elevateNodesOnSelect:a}=t();e({nodeInternals:Tl(n,i,o,a)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:i={}}=t();e({edges:n.map(o=>({...i,...o}))})},setDefaultNodesAndEdges:(n,i)=>{const o=typeof n<"u",a=typeof i<"u",u=o?Tl(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:u,edges:a?i:[],hasDefaultNodes:o,hasDefaultEdges:a})},updateNodeDimensions:n=>{const{onNodesChange:i,nodeInternals:o,fitViewOnInit:a,fitViewOnInitDone:u,fitViewOnInitOptions:l,domNode:d,nodeOrigin:f}=t(),h=d?.querySelector(".react-flow__viewport");if(!h)return;const g=window.getComputedStyle(h),{m22:m}=new window.DOMMatrixReadOnly(g.transform),D=n.reduce((v,w)=>{const _=o.get(w.id);if(_?.hidden)o.set(_.id,{..._,[vt]:{..._[vt],handleBounds:void 0}});else if(_){const A=Td(w.nodeElement);!!(A.width&&A.height&&(_.width!==A.width||_.height!==A.height||w.forceUpdate))&&(o.set(_.id,{..._,[vt]:{..._[vt],handleBounds:{source:o0(".source",w.nodeElement,m,f),target:o0(".target",w.nodeElement,m,f)}},...A}),v.push({id:_.id,type:"dimensions",dimensions:A}))}return v},[]);am(o,f);const x=u||a&&!u&&um(t,{initial:!0,...l});e({nodeInternals:new Map(o),fitViewOnInitDone:x}),D?.length>0&&i?.(D)},updateNodePositions:(n,i=!0,o=!1)=>{const{triggerNodeChanges:a}=t(),u=n.map(l=>{const d={id:l.id,type:"position",dragging:o};return i&&(d.positionAbsolute=l.positionAbsolute,d.position=l.position),d});a(u)},triggerNodeChanges:n=>{const{onNodesChange:i,nodeInternals:o,hasDefaultNodes:a,nodeOrigin:u,getNodes:l,elevateNodesOnSelect:d}=t();if(n?.length){if(a){const f=lm(n,l()),h=Tl(f,o,u,d);e({nodeInternals:h})}i?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:i,edges:o,getNodes:a}=t();let u,l=null;i?u=n.map(d=>Hr(d,!0)):(u=ts(a(),n),l=ts(o,[])),Ga({changedNodes:u,changedEdges:l,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:i,edges:o,getNodes:a}=t();let u,l=null;i?u=n.map(d=>Hr(d,!0)):(u=ts(o,n),l=ts(a(),[])),Ga({changedNodes:l,changedEdges:u,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:i}={})=>{const{edges:o,getNodes:a}=t(),u=n||a(),l=i||o,d=u.map(h=>(h.selected=!1,Hr(h.id,!1))),f=l.map(h=>Hr(h.id,!1));Ga({changedNodes:d,changedEdges:f,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:i,maxZoom:o}=t();i?.scaleExtent([n,o]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:i,minZoom:o}=t();i?.scaleExtent([o,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:i}=t(),a=i().filter(l=>l.selected).map(l=>Hr(l.id,!1)),u=n.filter(l=>l.selected).map(l=>Hr(l.id,!1));Ga({changedNodes:a,changedEdges:u,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:i}=t();i.forEach(o=>{o.positionAbsolute=Id(o.position,n)}),e({nodeExtent:n,nodeInternals:new Map(i)})},panBy:n=>{const{transform:i,width:o,height:a,d3Zoom:u,d3Selection:l,translateExtent:d}=t();if(!u||!l||!n.x&&!n.y)return!1;const f=Zr.translate(i[0]+n.x,i[1]+n.y).scale(i[2]),h=[[0,0],[o,a]],g=u?.constrain()(f,h,d);return u.transform(l,g),i[0]!==g.x||i[1]!==g.y||i[2]!==g.k},cancelConnection:()=>e({connectionNodeId:Lr.connectionNodeId,connectionHandleId:Lr.connectionHandleId,connectionHandleType:Lr.connectionHandleType,connectionStatus:Lr.connectionStatus,connectionStartHandle:Lr.connectionStartHandle,connectionEndHandle:Lr.connectionEndHandle}),reset:()=>e({...Lr})}),Object.is),Vd=({children:e})=>{const t=S.useRef(null);return t.current||(t.current=h6()),j.createElement(I3,{value:t.current},e)};Vd.displayName="ReactFlowProvider";const wm=({children:e})=>S.useContext(ku)?j.createElement(j.Fragment,null,e):j.createElement(Vd,null,e);wm.displayName="ReactFlowWrapper";const p6={input:em,default:nd,output:nm,group:Ld},g6={default:hu,straight:Md,step:Rd,smoothstep:Bu,simplebezier:Bd},m6=[0,0],y6=[15,15],v6={x:0,y:0,zoom:1},_6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Cm=S.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:i,className:o,nodeTypes:a=p6,edgeTypes:u=g6,onNodeClick:l,onEdgeClick:d,onInit:f,onMove:h,onMoveStart:g,onMoveEnd:m,onConnect:D,onConnectStart:x,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:_,onNodeMouseEnter:A,onNodeMouseMove:I,onNodeMouseLeave:N,onNodeContextMenu:$,onNodeDoubleClick:z,onNodeDragStart:M,onNodeDrag:X,onNodeDragStop:B,onNodesDelete:U,onEdgesDelete:K,onSelectionChange:q,onSelectionDragStart:G,onSelectionDrag:b,onSelectionDragStop:P,onSelectionContextMenu:O,onSelectionStart:Z,onSelectionEnd:ee,connectionMode:H=bi.Strict,connectionLineType:ne=Vr.Bezier,connectionLineStyle:re,connectionLineComponent:ae,connectionLineContainerStyle:W,deleteKeyCode:ie="Backspace",selectionKeyCode:ue="Shift",selectionOnDrag:de=!1,selectionMode:fe=wo.Full,panActivationKeyCode:le="Space",multiSelectionKeyCode:ge=fu()?"Meta":"Control",zoomActivationKeyCode:we=fu()?"Meta":"Control",snapToGrid:nt=!1,snapGrid:Je=y6,onlyRenderVisibleElements:Le=!1,selectNodesOnDrag:He=!0,nodesDraggable:Qe,nodesConnectable:gt,nodesFocusable:Be,nodeOrigin:ve=m6,edgesFocusable:_t,edgesUpdatable:Ot,elementsSelectable:bt,defaultViewport:_n=v6,minZoom:Tn=.5,maxZoom:In=2,translateExtent:Dn=id,preventScrolling:ar=!0,nodeExtent:on,defaultMarkerColor:an="#b1b1b7",zoomOnScroll:Yn=!0,zoomOnPinch:ur=!0,panOnScroll:Ct=!1,panOnScrollSpeed:Xt=.5,panOnScrollMode:kn=vi.Free,zoomOnDoubleClick:Bn=!0,panOnDrag:Kn=!0,onPaneClick:Yt,onPaneMouseEnter:Rn,onPaneMouseMove:bs,onPaneMouseLeave:As,onPaneScroll:ti,onPaneContextMenu:Ii,children:Ss,onEdgeContextMenu:cr,onEdgeDoubleClick:Lu,onEdgeMouseEnter:ju,onEdgeMouseMove:Hu,onEdgeMouseLeave:Zo,onEdgeUpdate:Vu,onEdgeUpdateStart:Uu,onEdgeUpdateEnd:Gu,onReconnect:Fs,onReconnectStart:Zu,onReconnectEnd:Ns,reconnectRadius:Wu=10,edgeUpdaterRadius:qu=10,onNodesChange:Xu,onEdgesChange:Yu,noDragClassName:Ku="nodrag",noWheelClassName:Ju="nowheel",noPanClassName:Wo="nopan",fitView:Qu=!1,fitViewOptions:qo,connectOnClick:ec=!0,attributionPosition:tc,proOptions:nc,defaultEdgeOptions:rc,elevateNodesOnSelect:ic=!0,elevateEdgesOnSelect:sc=!1,disableKeyboardA11y:ni=!1,autoPanOnConnect:oc=!0,autoPanOnNodeDrag:ki=!0,connectionRadius:ac=20,isValidConnection:uc,onError:cc,style:Xo,id:Ts,nodeDragThreshold:Yo,...lc},dc)=>{const Is=Ts||"1";return j.createElement("div",{...lc,style:{...Xo,..._6},ref:dc,className:qt(["react-flow",o]),"data-testid":"rf__wrapper",id:Ts},j.createElement(wm,null,j.createElement(f6,{onInit:f,onMove:h,onMoveStart:g,onMoveEnd:m,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:A,onNodeMouseMove:I,onNodeMouseLeave:N,onNodeContextMenu:$,onNodeDoubleClick:z,nodeTypes:a,edgeTypes:u,connectionLineType:ne,connectionLineStyle:re,connectionLineComponent:ae,connectionLineContainerStyle:W,selectionKeyCode:ue,selectionOnDrag:de,selectionMode:fe,deleteKeyCode:ie,multiSelectionKeyCode:ge,panActivationKeyCode:le,zoomActivationKeyCode:we,onlyRenderVisibleElements:Le,selectNodesOnDrag:He,defaultViewport:_n,translateExtent:Dn,minZoom:Tn,maxZoom:In,preventScrolling:ar,zoomOnScroll:Yn,zoomOnPinch:ur,zoomOnDoubleClick:Bn,panOnScroll:Ct,panOnScrollSpeed:Xt,panOnScrollMode:kn,panOnDrag:Kn,onPaneClick:Yt,onPaneMouseEnter:Rn,onPaneMouseMove:bs,onPaneMouseLeave:As,onPaneScroll:ti,onPaneContextMenu:Ii,onSelectionContextMenu:O,onSelectionStart:Z,onSelectionEnd:ee,onEdgeContextMenu:cr,onEdgeDoubleClick:Lu,onEdgeMouseEnter:ju,onEdgeMouseMove:Hu,onEdgeMouseLeave:Zo,onReconnect:Fs??Vu,onReconnectStart:Zu??Uu,onReconnectEnd:Ns??Gu,reconnectRadius:Wu??qu,defaultMarkerColor:an,noDragClassName:Ku,noWheelClassName:Ju,noPanClassName:Wo,elevateEdgesOnSelect:sc,rfId:Is,disableKeyboardA11y:ni,nodeOrigin:ve,nodeExtent:on}),j.createElement(c8,{nodes:e,edges:t,defaultNodes:n,defaultEdges:i,onConnect:D,onConnectStart:x,onConnectEnd:v,onClickConnectStart:w,onClickConnectEnd:_,nodesDraggable:Qe,nodesConnectable:gt,nodesFocusable:Be,edgesFocusable:_t,edgesUpdatable:Ot,elementsSelectable:bt,elevateNodesOnSelect:ic,minZoom:Tn,maxZoom:In,nodeExtent:on,onNodesChange:Xu,onEdgesChange:Yu,snapToGrid:nt,snapGrid:Je,connectionMode:H,translateExtent:Dn,connectOnClick:ec,defaultEdgeOptions:rc,fitView:Qu,fitViewOptions:qo,onNodesDelete:U,onEdgesDelete:K,onNodeDragStart:M,onNodeDrag:X,onNodeDragStop:B,onSelectionDrag:b,onSelectionDragStart:G,onSelectionDragStop:P,noPanClassName:Wo,nodeOrigin:ve,rfId:Is,autoPanOnConnect:oc,autoPanOnNodeDrag:ki,onError:cc,connectionRadius:ac,isValidConnection:uc,nodeDragThreshold:Yo}),j.createElement(a8,{onSelectionChange:q}),Ss,j.createElement(B3,{proOptions:nc,position:tc}),j.createElement(p8,{rfId:Is,disableKeyboardA11y:ni})))});Cm.displayName="ReactFlow";const D6=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function x6({children:e}){const t=ft(D6);return t?aE.createPortal(e,t):null}function Em(e){return t=>{const[n,i]=S.useState(t),o=S.useCallback(a=>i(u=>e(a,u)),[]);return[n,i,o]}}const w6=Em(lm),C6=Em(F8);function E6(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},j.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function b6(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},j.createElement("path",{d:"M0 0h32v4.2H0z"}))}function A6(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},j.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function S6(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},j.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function F6(){return j.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},j.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ns=({children:e,className:t,...n})=>j.createElement("button",{type:"button",className:qt(["react-flow__controls-button",t]),...n},e);ns.displayName="ControlButton";const N6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),bm=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:u,onFitView:l,onInteractiveChange:d,className:f,children:h,position:g="bottom-left"})=>{const m=kt(),[D,x]=S.useState(!1),{isInteractive:v,minZoomReached:w,maxZoomReached:_}=ft(N6,zt),{zoomIn:A,zoomOut:I,fitView:N}=jd();if(S.useEffect(()=>{x(!0)},[]),!D)return null;const $=()=>{A(),a?.()},z=()=>{I(),u?.()},M=()=>{N(o),l?.()},X=()=>{m.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),d?.(!v)};return j.createElement(Mg,{className:qt(["react-flow__controls",f]),position:g,style:e,"data-testid":"rf__controls"},t&&j.createElement(j.Fragment,null,j.createElement(ns,{onClick:$,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:_},j.createElement(E6,null)),j.createElement(ns,{onClick:z,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},j.createElement(b6,null))),n&&j.createElement(ns,{className:"react-flow__controls-fitview",onClick:M,title:"fit view","aria-label":"fit view"},j.createElement(A6,null)),i&&j.createElement(ns,{className:"react-flow__controls-interactive",onClick:X,title:"toggle interactivity","aria-label":"toggle interactivity"},v?j.createElement(F6,null):j.createElement(S6,null)),h)};bm.displayName="Controls";var T6=S.memo(bm),Un;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Un||(Un={}));function I6({color:e,dimensions:t,lineWidth:n}){return j.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function k6({color:e,radius:t}){return j.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const B6={[Un.Dots]:"#91919a",[Un.Lines]:"#eee",[Un.Cross]:"#e2e2e2"},R6={[Un.Dots]:1,[Un.Lines]:1,[Un.Cross]:6},M6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Am({id:e,variant:t=Un.Dots,gap:n=20,size:i,lineWidth:o=1,offset:a=2,color:u,style:l,className:d}){const f=S.useRef(null),{transform:h,patternId:g}=ft(M6,zt),m=u||B6[t],D=i||R6[t],x=t===Un.Dots,v=t===Un.Cross,w=Array.isArray(n)?n:[n,n],_=[w[0]*h[2]||1,w[1]*h[2]||1],A=D*h[2],I=v?[A,A]:_,N=x?[A/a,A/a]:[I[0]/a,I[1]/a];return j.createElement("svg",{className:qt(["react-flow__background",d]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},j.createElement("pattern",{id:g+e,x:h[0]%_[0],y:h[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},x?j.createElement(k6,{color:m,radius:A/a}):j.createElement(I6,{dimensions:I,color:m,lineWidth:o})),j.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}Am.displayName="Background";var O6=S.memo(Am),gu={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */gu.exports;(function(e,t){(function(){var n,i="4.17.21",o=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",g=1,m=2,D=4,x=1,v=2,w=1,_=2,A=4,I=8,N=16,$=32,z=64,M=128,X=256,B=512,U=30,K="...",q=800,G=16,b=1,P=2,O=3,Z=1/0,ee=9007199254740991,H=17976931348623157e292,ne=NaN,re=4294967295,ae=re-1,W=re>>>1,ie=[["ary",M],["bind",w],["bindKey",_],["curry",I],["curryRight",N],["flip",B],["partial",$],["partialRight",z],["rearg",X]],ue="[object Arguments]",de="[object Array]",fe="[object AsyncFunction]",le="[object Boolean]",ge="[object Date]",we="[object DOMException]",nt="[object Error]",Je="[object Function]",Le="[object GeneratorFunction]",He="[object Map]",Qe="[object Number]",gt="[object Null]",Be="[object Object]",ve="[object Promise]",_t="[object Proxy]",Ot="[object RegExp]",bt="[object Set]",_n="[object String]",Tn="[object Symbol]",In="[object Undefined]",Dn="[object WeakMap]",ar="[object WeakSet]",on="[object ArrayBuffer]",an="[object DataView]",Yn="[object Float32Array]",ur="[object Float64Array]",Ct="[object Int8Array]",Xt="[object Int16Array]",kn="[object Int32Array]",Bn="[object Uint8Array]",Kn="[object Uint8ClampedArray]",Yt="[object Uint16Array]",Rn="[object Uint32Array]",bs=/\b__p \+= '';/g,As=/\b(__p \+=) '' \+/g,ti=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ii=/&(?:amp|lt|gt|quot|#39);/g,Ss=/[&<>"']/g,cr=RegExp(Ii.source),Lu=RegExp(Ss.source),ju=/<%-([\s\S]+?)%>/g,Hu=/<%([\s\S]+?)%>/g,Zo=/<%=([\s\S]+?)%>/g,Vu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uu=/^\w*$/,Gu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fs=/[\\^$.*+?()[\]{}|]/g,Zu=RegExp(Fs.source),Ns=/^\s+/,Wu=/\s/,qu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Xu=/\{\n\/\* \[wrapped with (.+)\] \*/,Yu=/,? & /,Ku=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ju=/[()=,{}\[\]\/\s]/,Wo=/\\(\\)?/g,Qu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qo=/\w*$/,ec=/^[-+]0x[0-9a-f]+$/i,tc=/^0b[01]+$/i,nc=/^\[object .+?Constructor\]$/,rc=/^0o[0-7]+$/i,ic=/^(?:0|[1-9]\d*)$/,sc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ni=/($^)/,oc=/['\n\r\u2028\u2029\\]/g,ki="\\ud800-\\udfff",ac="\\u0300-\\u036f",uc="\\ufe20-\\ufe2f",cc="\\u20d0-\\u20ff",Xo=ac+uc+cc,Ts="\\u2700-\\u27bf",Yo="a-z\\xdf-\\xf6\\xf8-\\xff",lc="\\xac\\xb1\\xd7\\xf7",dc="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Is="\\u2000-\\u206f",_y=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qd="A-Z\\xc0-\\xd6\\xd8-\\xde",ef="\\ufe0e\\ufe0f",tf=lc+dc+Is+_y,fc="['’]",Dy="["+ki+"]",nf="["+tf+"]",Ko="["+Xo+"]",rf="\\d+",xy="["+Ts+"]",sf="["+Yo+"]",of="[^"+ki+tf+rf+Ts+Yo+Qd+"]",hc="\\ud83c[\\udffb-\\udfff]",wy="(?:"+Ko+"|"+hc+")",af="[^"+ki+"]",pc="(?:\\ud83c[\\udde6-\\uddff]){2}",gc="[\\ud800-\\udbff][\\udc00-\\udfff]",Bi="["+Qd+"]",uf="\\u200d",cf="(?:"+sf+"|"+of+")",Cy="(?:"+Bi+"|"+of+")",lf="(?:"+fc+"(?:d|ll|m|re|s|t|ve))?",df="(?:"+fc+"(?:D|LL|M|RE|S|T|VE))?",ff=wy+"?",hf="["+ef+"]?",Ey="(?:"+uf+"(?:"+[af,pc,gc].join("|")+")"+hf+ff+")*",by="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ay="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",pf=hf+ff+Ey,Sy="(?:"+[xy,pc,gc].join("|")+")"+pf,Fy="(?:"+[af+Ko+"?",Ko,pc,gc,Dy].join("|")+")",Ny=RegExp(fc,"g"),Ty=RegExp(Ko,"g"),mc=RegExp(hc+"(?="+hc+")|"+Fy+pf,"g"),Iy=RegExp([Bi+"?"+sf+"+"+lf+"(?="+[nf,Bi,"$"].join("|")+")",Cy+"+"+df+"(?="+[nf,Bi+cf,"$"].join("|")+")",Bi+"?"+cf+"+"+lf,Bi+"+"+df,Ay,by,rf,Sy].join("|"),"g"),ky=RegExp("["+uf+ki+Xo+ef+"]"),By=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ry=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],My=-1,ot={};ot[Yn]=ot[ur]=ot[Ct]=ot[Xt]=ot[kn]=ot[Bn]=ot[Kn]=ot[Yt]=ot[Rn]=!0,ot[ue]=ot[de]=ot[on]=ot[le]=ot[an]=ot[ge]=ot[nt]=ot[Je]=ot[He]=ot[Qe]=ot[Be]=ot[Ot]=ot[bt]=ot[_n]=ot[Dn]=!1;var it={};it[ue]=it[de]=it[on]=it[an]=it[le]=it[ge]=it[Yn]=it[ur]=it[Ct]=it[Xt]=it[kn]=it[He]=it[Qe]=it[Be]=it[Ot]=it[bt]=it[_n]=it[Tn]=it[Bn]=it[Kn]=it[Yt]=it[Rn]=!0,it[nt]=it[Je]=it[Dn]=!1;var Oy={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Py={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},$y={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zy={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ly=parseFloat,jy=parseInt,gf=typeof Ws=="object"&&Ws&&Ws.Object===Object&&Ws,Hy=typeof self=="object"&&self&&self.Object===Object&&self,Bt=gf||Hy||Function("return this")(),yc=t&&!t.nodeType&&t,ri=yc&&!0&&e&&!e.nodeType&&e,mf=ri&&ri.exports===yc,vc=mf&&gf.process,xn=function(){try{var R=ri&&ri.require&&ri.require("util").types;return R||vc&&vc.binding&&vc.binding("util")}catch{}}(),yf=xn&&xn.isArrayBuffer,vf=xn&&xn.isDate,_f=xn&&xn.isMap,Df=xn&&xn.isRegExp,xf=xn&&xn.isSet,wf=xn&&xn.isTypedArray;function un(R,Y,V){switch(V.length){case 0:return R.call(Y);case 1:return R.call(Y,V[0]);case 2:return R.call(Y,V[0],V[1]);case 3:return R.call(Y,V[0],V[1],V[2])}return R.apply(Y,V)}function Vy(R,Y,V,ye){for(var Fe=-1,Ke=R==null?0:R.length;++Fe<Ke;){var At=R[Fe];Y(ye,At,V(At),R)}return ye}function wn(R,Y){for(var V=-1,ye=R==null?0:R.length;++V<ye&&Y(R[V],V,R)!==!1;);return R}function Uy(R,Y){for(var V=R==null?0:R.length;V--&&Y(R[V],V,R)!==!1;);return R}function Cf(R,Y){for(var V=-1,ye=R==null?0:R.length;++V<ye;)if(!Y(R[V],V,R))return!1;return!0}function Ir(R,Y){for(var V=-1,ye=R==null?0:R.length,Fe=0,Ke=[];++V<ye;){var At=R[V];Y(At,V,R)&&(Ke[Fe++]=At)}return Ke}function Jo(R,Y){var V=R==null?0:R.length;return!!V&&Ri(R,Y,0)>-1}function _c(R,Y,V){for(var ye=-1,Fe=R==null?0:R.length;++ye<Fe;)if(V(Y,R[ye]))return!0;return!1}function lt(R,Y){for(var V=-1,ye=R==null?0:R.length,Fe=Array(ye);++V<ye;)Fe[V]=Y(R[V],V,R);return Fe}function kr(R,Y){for(var V=-1,ye=Y.length,Fe=R.length;++V<ye;)R[Fe+V]=Y[V];return R}function Dc(R,Y,V,ye){var Fe=-1,Ke=R==null?0:R.length;for(ye&&Ke&&(V=R[++Fe]);++Fe<Ke;)V=Y(V,R[Fe],Fe,R);return V}function Gy(R,Y,V,ye){var Fe=R==null?0:R.length;for(ye&&Fe&&(V=R[--Fe]);Fe--;)V=Y(V,R[Fe],Fe,R);return V}function xc(R,Y){for(var V=-1,ye=R==null?0:R.length;++V<ye;)if(Y(R[V],V,R))return!0;return!1}var Zy=wc("length");function Wy(R){return R.split("")}function qy(R){return R.match(Ku)||[]}function Ef(R,Y,V){var ye;return V(R,function(Fe,Ke,At){if(Y(Fe,Ke,At))return ye=Ke,!1}),ye}function Qo(R,Y,V,ye){for(var Fe=R.length,Ke=V+(ye?1:-1);ye?Ke--:++Ke<Fe;)if(Y(R[Ke],Ke,R))return Ke;return-1}function Ri(R,Y,V){return Y===Y?o1(R,Y,V):Qo(R,bf,V)}function Xy(R,Y,V,ye){for(var Fe=V-1,Ke=R.length;++Fe<Ke;)if(ye(R[Fe],Y))return Fe;return-1}function bf(R){return R!==R}function Af(R,Y){var V=R==null?0:R.length;return V?Ec(R,Y)/V:ne}function wc(R){return function(Y){return Y==null?n:Y[R]}}function Cc(R){return function(Y){return R==null?n:R[Y]}}function Sf(R,Y,V,ye,Fe){return Fe(R,function(Ke,At,rt){V=ye?(ye=!1,Ke):Y(V,Ke,At,rt)}),V}function Yy(R,Y){var V=R.length;for(R.sort(Y);V--;)R[V]=R[V].value;return R}function Ec(R,Y){for(var V,ye=-1,Fe=R.length;++ye<Fe;){var Ke=Y(R[ye]);Ke!==n&&(V=V===n?Ke:V+Ke)}return V}function bc(R,Y){for(var V=-1,ye=Array(R);++V<R;)ye[V]=Y(V);return ye}function Ky(R,Y){return lt(Y,function(V){return[V,R[V]]})}function Ff(R){return R&&R.slice(0,kf(R)+1).replace(Ns,"")}function cn(R){return function(Y){return R(Y)}}function Ac(R,Y){return lt(Y,function(V){return R[V]})}function ks(R,Y){return R.has(Y)}function Nf(R,Y){for(var V=-1,ye=R.length;++V<ye&&Ri(Y,R[V],0)>-1;);return V}function Tf(R,Y){for(var V=R.length;V--&&Ri(Y,R[V],0)>-1;);return V}function Jy(R,Y){for(var V=R.length,ye=0;V--;)R[V]===Y&&++ye;return ye}var Qy=Cc(Oy),e1=Cc(Py);function t1(R){return"\\"+zy[R]}function n1(R,Y){return R==null?n:R[Y]}function Mi(R){return ky.test(R)}function r1(R){return By.test(R)}function i1(R){for(var Y,V=[];!(Y=R.next()).done;)V.push(Y.value);return V}function Sc(R){var Y=-1,V=Array(R.size);return R.forEach(function(ye,Fe){V[++Y]=[Fe,ye]}),V}function If(R,Y){return function(V){return R(Y(V))}}function Br(R,Y){for(var V=-1,ye=R.length,Fe=0,Ke=[];++V<ye;){var At=R[V];(At===Y||At===h)&&(R[V]=h,Ke[Fe++]=V)}return Ke}function ea(R){var Y=-1,V=Array(R.size);return R.forEach(function(ye){V[++Y]=ye}),V}function s1(R){var Y=-1,V=Array(R.size);return R.forEach(function(ye){V[++Y]=[ye,ye]}),V}function o1(R,Y,V){for(var ye=V-1,Fe=R.length;++ye<Fe;)if(R[ye]===Y)return ye;return-1}function a1(R,Y,V){for(var ye=V+1;ye--;)if(R[ye]===Y)return ye;return ye}function Oi(R){return Mi(R)?c1(R):Zy(R)}function Mn(R){return Mi(R)?l1(R):Wy(R)}function kf(R){for(var Y=R.length;Y--&&Wu.test(R.charAt(Y)););return Y}var u1=Cc($y);function c1(R){for(var Y=mc.lastIndex=0;mc.test(R);)++Y;return Y}function l1(R){return R.match(mc)||[]}function d1(R){return R.match(Iy)||[]}var f1=function R(Y){Y=Y==null?Bt:Pi.defaults(Bt.Object(),Y,Pi.pick(Bt,Ry));var V=Y.Array,ye=Y.Date,Fe=Y.Error,Ke=Y.Function,At=Y.Math,rt=Y.Object,Fc=Y.RegExp,h1=Y.String,Cn=Y.TypeError,ta=V.prototype,p1=Ke.prototype,$i=rt.prototype,na=Y["__core-js_shared__"],ra=p1.toString,tt=$i.hasOwnProperty,g1=0,Bf=function(){var r=/[^.]+$/.exec(na&&na.keys&&na.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ia=$i.toString,m1=ra.call(rt),y1=Bt._,v1=Fc("^"+ra.call(tt).replace(Fs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sa=mf?Y.Buffer:n,Rr=Y.Symbol,oa=Y.Uint8Array,Rf=sa?sa.allocUnsafe:n,aa=If(rt.getPrototypeOf,rt),Mf=rt.create,Of=$i.propertyIsEnumerable,ua=ta.splice,Pf=Rr?Rr.isConcatSpreadable:n,Bs=Rr?Rr.iterator:n,ii=Rr?Rr.toStringTag:n,ca=function(){try{var r=ci(rt,"defineProperty");return r({},"",{}),r}catch{}}(),_1=Y.clearTimeout!==Bt.clearTimeout&&Y.clearTimeout,D1=ye&&ye.now!==Bt.Date.now&&ye.now,x1=Y.setTimeout!==Bt.setTimeout&&Y.setTimeout,la=At.ceil,da=At.floor,Nc=rt.getOwnPropertySymbols,w1=sa?sa.isBuffer:n,$f=Y.isFinite,C1=ta.join,E1=If(rt.keys,rt),St=At.max,Pt=At.min,b1=ye.now,A1=Y.parseInt,zf=At.random,S1=ta.reverse,Tc=ci(Y,"DataView"),Rs=ci(Y,"Map"),Ic=ci(Y,"Promise"),zi=ci(Y,"Set"),Ms=ci(Y,"WeakMap"),Os=ci(rt,"create"),fa=Ms&&new Ms,Li={},F1=li(Tc),N1=li(Rs),T1=li(Ic),I1=li(zi),k1=li(Ms),ha=Rr?Rr.prototype:n,Ps=ha?ha.valueOf:n,Lf=ha?ha.toString:n;function C(r){if(mt(r)&&!Ne(r)&&!(r instanceof Ve)){if(r instanceof En)return r;if(tt.call(r,"__wrapped__"))return jh(r)}return new En(r)}var ji=function(){function r(){}return function(s){if(!ht(s))return{};if(Mf)return Mf(s);r.prototype=s;var c=new r;return r.prototype=n,c}}();function pa(){}function En(r,s){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}C.templateSettings={escape:ju,evaluate:Hu,interpolate:Zo,variable:"",imports:{_:C}},C.prototype=pa.prototype,C.prototype.constructor=C,En.prototype=ji(pa.prototype),En.prototype.constructor=En;function Ve(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function B1(){var r=new Ve(this.__wrapped__);return r.__actions__=Kt(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Kt(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Kt(this.__views__),r}function R1(){if(this.__filtered__){var r=new Ve(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function M1(){var r=this.__wrapped__.value(),s=this.__dir__,c=Ne(r),p=s<0,y=c?r.length:0,E=Wv(0,y,this.__views__),T=E.start,k=E.end,L=k-T,J=p?k:T-1,Q=this.__iteratees__,se=Q.length,he=0,_e=Pt(L,this.__takeCount__);if(!c||!p&&y==L&&_e==L)return lh(r,this.__actions__);var Ee=[];e:for(;L--&&he<_e;){J+=s;for(var Re=-1,be=r[J];++Re<se;){var je=Q[Re],Ze=je.iteratee,fn=je.type,Vt=Ze(be);if(fn==P)be=Vt;else if(!Vt){if(fn==b)continue e;break e}}Ee[he++]=be}return Ee}Ve.prototype=ji(pa.prototype),Ve.prototype.constructor=Ve;function si(r){var s=-1,c=r==null?0:r.length;for(this.clear();++s<c;){var p=r[s];this.set(p[0],p[1])}}function O1(){this.__data__=Os?Os(null):{},this.size=0}function P1(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}function $1(r){var s=this.__data__;if(Os){var c=s[r];return c===d?n:c}return tt.call(s,r)?s[r]:n}function z1(r){var s=this.__data__;return Os?s[r]!==n:tt.call(s,r)}function L1(r,s){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=Os&&s===n?d:s,this}si.prototype.clear=O1,si.prototype.delete=P1,si.prototype.get=$1,si.prototype.has=z1,si.prototype.set=L1;function lr(r){var s=-1,c=r==null?0:r.length;for(this.clear();++s<c;){var p=r[s];this.set(p[0],p[1])}}function j1(){this.__data__=[],this.size=0}function H1(r){var s=this.__data__,c=ga(s,r);if(c<0)return!1;var p=s.length-1;return c==p?s.pop():ua.call(s,c,1),--this.size,!0}function V1(r){var s=this.__data__,c=ga(s,r);return c<0?n:s[c][1]}function U1(r){return ga(this.__data__,r)>-1}function G1(r,s){var c=this.__data__,p=ga(c,r);return p<0?(++this.size,c.push([r,s])):c[p][1]=s,this}lr.prototype.clear=j1,lr.prototype.delete=H1,lr.prototype.get=V1,lr.prototype.has=U1,lr.prototype.set=G1;function dr(r){var s=-1,c=r==null?0:r.length;for(this.clear();++s<c;){var p=r[s];this.set(p[0],p[1])}}function Z1(){this.size=0,this.__data__={hash:new si,map:new(Rs||lr),string:new si}}function W1(r){var s=Sa(this,r).delete(r);return this.size-=s?1:0,s}function q1(r){return Sa(this,r).get(r)}function X1(r){return Sa(this,r).has(r)}function Y1(r,s){var c=Sa(this,r),p=c.size;return c.set(r,s),this.size+=c.size==p?0:1,this}dr.prototype.clear=Z1,dr.prototype.delete=W1,dr.prototype.get=q1,dr.prototype.has=X1,dr.prototype.set=Y1;function oi(r){var s=-1,c=r==null?0:r.length;for(this.__data__=new dr;++s<c;)this.add(r[s])}function K1(r){return this.__data__.set(r,d),this}function J1(r){return this.__data__.has(r)}oi.prototype.add=oi.prototype.push=K1,oi.prototype.has=J1;function On(r){var s=this.__data__=new lr(r);this.size=s.size}function Q1(){this.__data__=new lr,this.size=0}function ev(r){var s=this.__data__,c=s.delete(r);return this.size=s.size,c}function tv(r){return this.__data__.get(r)}function nv(r){return this.__data__.has(r)}function rv(r,s){var c=this.__data__;if(c instanceof lr){var p=c.__data__;if(!Rs||p.length<o-1)return p.push([r,s]),this.size=++c.size,this;c=this.__data__=new dr(p)}return c.set(r,s),this.size=c.size,this}On.prototype.clear=Q1,On.prototype.delete=ev,On.prototype.get=tv,On.prototype.has=nv,On.prototype.set=rv;function jf(r,s){var c=Ne(r),p=!c&&di(r),y=!c&&!p&&zr(r),E=!c&&!p&&!y&&Gi(r),T=c||p||y||E,k=T?bc(r.length,h1):[],L=k.length;for(var J in r)(s||tt.call(r,J))&&!(T&&(J=="length"||y&&(J=="offset"||J=="parent")||E&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||gr(J,L)))&&k.push(J);return k}function Hf(r){var s=r.length;return s?r[Hc(0,s-1)]:n}function iv(r,s){return Fa(Kt(r),ai(s,0,r.length))}function sv(r){return Fa(Kt(r))}function kc(r,s,c){(c!==n&&!Pn(r[s],c)||c===n&&!(s in r))&&fr(r,s,c)}function $s(r,s,c){var p=r[s];(!(tt.call(r,s)&&Pn(p,c))||c===n&&!(s in r))&&fr(r,s,c)}function ga(r,s){for(var c=r.length;c--;)if(Pn(r[c][0],s))return c;return-1}function ov(r,s,c,p){return Mr(r,function(y,E,T){s(p,y,c(y),T)}),p}function Vf(r,s){return r&&Qn(s,Ft(s),r)}function av(r,s){return r&&Qn(s,Qt(s),r)}function fr(r,s,c){s=="__proto__"&&ca?ca(r,s,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[s]=c}function Bc(r,s){for(var c=-1,p=s.length,y=V(p),E=r==null;++c<p;)y[c]=E?n:hl(r,s[c]);return y}function ai(r,s,c){return r===r&&(c!==n&&(r=r<=c?r:c),s!==n&&(r=r>=s?r:s)),r}function bn(r,s,c,p,y,E){var T,k=s&g,L=s&m,J=s&D;if(c&&(T=y?c(r,p,y,E):c(r)),T!==n)return T;if(!ht(r))return r;var Q=Ne(r);if(Q){if(T=Xv(r),!k)return Kt(r,T)}else{var se=$t(r),he=se==Je||se==Le;if(zr(r))return hh(r,k);if(se==Be||se==ue||he&&!y){if(T=L||he?{}:kh(r),!k)return L?$v(r,av(T,r)):Pv(r,Vf(T,r))}else{if(!it[se])return y?r:{};T=Yv(r,se,k)}}E||(E=new On);var _e=E.get(r);if(_e)return _e;E.set(r,T),ap(r)?r.forEach(function(be){T.add(bn(be,s,c,be,r,E))}):sp(r)&&r.forEach(function(be,je){T.set(je,bn(be,s,c,je,r,E))});var Ee=J?L?Qc:Jc:L?Qt:Ft,Re=Q?n:Ee(r);return wn(Re||r,function(be,je){Re&&(je=be,be=r[je]),$s(T,je,bn(be,s,c,je,r,E))}),T}function uv(r){var s=Ft(r);return function(c){return Uf(c,r,s)}}function Uf(r,s,c){var p=c.length;if(r==null)return!p;for(r=rt(r);p--;){var y=c[p],E=s[y],T=r[y];if(T===n&&!(y in r)||!E(T))return!1}return!0}function Gf(r,s,c){if(typeof r!="function")throw new Cn(u);return Gs(function(){r.apply(n,c)},s)}function zs(r,s,c,p){var y=-1,E=Jo,T=!0,k=r.length,L=[],J=s.length;if(!k)return L;c&&(s=lt(s,cn(c))),p?(E=_c,T=!1):s.length>=o&&(E=ks,T=!1,s=new oi(s));e:for(;++y<k;){var Q=r[y],se=c==null?Q:c(Q);if(Q=p||Q!==0?Q:0,T&&se===se){for(var he=J;he--;)if(s[he]===se)continue e;L.push(Q)}else E(s,se,p)||L.push(Q)}return L}var Mr=vh(Jn),Zf=vh(Mc,!0);function cv(r,s){var c=!0;return Mr(r,function(p,y,E){return c=!!s(p,y,E),c}),c}function ma(r,s,c){for(var p=-1,y=r.length;++p<y;){var E=r[p],T=s(E);if(T!=null&&(k===n?T===T&&!dn(T):c(T,k)))var k=T,L=E}return L}function lv(r,s,c,p){var y=r.length;for(c=ke(c),c<0&&(c=-c>y?0:y+c),p=p===n||p>y?y:ke(p),p<0&&(p+=y),p=c>p?0:cp(p);c<p;)r[c++]=s;return r}function Wf(r,s){var c=[];return Mr(r,function(p,y,E){s(p,y,E)&&c.push(p)}),c}function Rt(r,s,c,p,y){var E=-1,T=r.length;for(c||(c=Jv),y||(y=[]);++E<T;){var k=r[E];s>0&&c(k)?s>1?Rt(k,s-1,c,p,y):kr(y,k):p||(y[y.length]=k)}return y}var Rc=_h(),qf=_h(!0);function Jn(r,s){return r&&Rc(r,s,Ft)}function Mc(r,s){return r&&qf(r,s,Ft)}function ya(r,s){return Ir(s,function(c){return mr(r[c])})}function ui(r,s){s=Pr(s,r);for(var c=0,p=s.length;r!=null&&c<p;)r=r[er(s[c++])];return c&&c==p?r:n}function Xf(r,s,c){var p=s(r);return Ne(r)?p:kr(p,c(r))}function jt(r){return r==null?r===n?In:gt:ii&&ii in rt(r)?Zv(r):s_(r)}function Oc(r,s){return r>s}function dv(r,s){return r!=null&&tt.call(r,s)}function fv(r,s){return r!=null&&s in rt(r)}function hv(r,s,c){return r>=Pt(s,c)&&r<St(s,c)}function Pc(r,s,c){for(var p=c?_c:Jo,y=r[0].length,E=r.length,T=E,k=V(E),L=1/0,J=[];T--;){var Q=r[T];T&&s&&(Q=lt(Q,cn(s))),L=Pt(Q.length,L),k[T]=!c&&(s||y>=120&&Q.length>=120)?new oi(T&&Q):n}Q=r[0];var se=-1,he=k[0];e:for(;++se<y&&J.length<L;){var _e=Q[se],Ee=s?s(_e):_e;if(_e=c||_e!==0?_e:0,!(he?ks(he,Ee):p(J,Ee,c))){for(T=E;--T;){var Re=k[T];if(!(Re?ks(Re,Ee):p(r[T],Ee,c)))continue e}he&&he.push(Ee),J.push(_e)}}return J}function pv(r,s,c,p){return Jn(r,function(y,E,T){s(p,c(y),E,T)}),p}function Ls(r,s,c){s=Pr(s,r),r=Oh(r,s);var p=r==null?r:r[er(Sn(s))];return p==null?n:un(p,r,c)}function Yf(r){return mt(r)&&jt(r)==ue}function gv(r){return mt(r)&&jt(r)==on}function mv(r){return mt(r)&&jt(r)==ge}function js(r,s,c,p,y){return r===s?!0:r==null||s==null||!mt(r)&&!mt(s)?r!==r&&s!==s:yv(r,s,c,p,js,y)}function yv(r,s,c,p,y,E){var T=Ne(r),k=Ne(s),L=T?de:$t(r),J=k?de:$t(s);L=L==ue?Be:L,J=J==ue?Be:J;var Q=L==Be,se=J==Be,he=L==J;if(he&&zr(r)){if(!zr(s))return!1;T=!0,Q=!1}if(he&&!Q)return E||(E=new On),T||Gi(r)?Nh(r,s,c,p,y,E):Uv(r,s,L,c,p,y,E);if(!(c&x)){var _e=Q&&tt.call(r,"__wrapped__"),Ee=se&&tt.call(s,"__wrapped__");if(_e||Ee){var Re=_e?r.value():r,be=Ee?s.value():s;return E||(E=new On),y(Re,be,c,p,E)}}return he?(E||(E=new On),Gv(r,s,c,p,y,E)):!1}function vv(r){return mt(r)&&$t(r)==He}function $c(r,s,c,p){var y=c.length,E=y,T=!p;if(r==null)return!E;for(r=rt(r);y--;){var k=c[y];if(T&&k[2]?k[1]!==r[k[0]]:!(k[0]in r))return!1}for(;++y<E;){k=c[y];var L=k[0],J=r[L],Q=k[1];if(T&&k[2]){if(J===n&&!(L in r))return!1}else{var se=new On;if(p)var he=p(J,Q,L,r,s,se);if(!(he===n?js(Q,J,x|v,p,se):he))return!1}}return!0}function Kf(r){if(!ht(r)||e_(r))return!1;var s=mr(r)?v1:nc;return s.test(li(r))}function _v(r){return mt(r)&&jt(r)==Ot}function Dv(r){return mt(r)&&$t(r)==bt}function xv(r){return mt(r)&&Ra(r.length)&&!!ot[jt(r)]}function Jf(r){return typeof r=="function"?r:r==null?en:typeof r=="object"?Ne(r)?th(r[0],r[1]):eh(r):Dp(r)}function zc(r){if(!Us(r))return E1(r);var s=[];for(var c in rt(r))tt.call(r,c)&&c!="constructor"&&s.push(c);return s}function wv(r){if(!ht(r))return i_(r);var s=Us(r),c=[];for(var p in r)p=="constructor"&&(s||!tt.call(r,p))||c.push(p);return c}function Lc(r,s){return r<s}function Qf(r,s){var c=-1,p=Jt(r)?V(r.length):[];return Mr(r,function(y,E,T){p[++c]=s(y,E,T)}),p}function eh(r){var s=tl(r);return s.length==1&&s[0][2]?Rh(s[0][0],s[0][1]):function(c){return c===r||$c(c,r,s)}}function th(r,s){return rl(r)&&Bh(s)?Rh(er(r),s):function(c){var p=hl(c,r);return p===n&&p===s?pl(c,r):js(s,p,x|v)}}function va(r,s,c,p,y){r!==s&&Rc(s,function(E,T){if(y||(y=new On),ht(E))Cv(r,s,T,c,va,p,y);else{var k=p?p(sl(r,T),E,T+"",r,s,y):n;k===n&&(k=E),kc(r,T,k)}},Qt)}function Cv(r,s,c,p,y,E,T){var k=sl(r,c),L=sl(s,c),J=T.get(L);if(J){kc(r,c,J);return}var Q=E?E(k,L,c+"",r,s,T):n,se=Q===n;if(se){var he=Ne(L),_e=!he&&zr(L),Ee=!he&&!_e&&Gi(L);Q=L,he||_e||Ee?Ne(k)?Q=k:Dt(k)?Q=Kt(k):_e?(se=!1,Q=hh(L,!0)):Ee?(se=!1,Q=ph(L,!0)):Q=[]:Zs(L)||di(L)?(Q=k,di(k)?Q=lp(k):(!ht(k)||mr(k))&&(Q=kh(L))):se=!1}se&&(T.set(L,Q),y(Q,L,p,E,T),T.delete(L)),kc(r,c,Q)}function nh(r,s){var c=r.length;if(c)return s+=s<0?c:0,gr(s,c)?r[s]:n}function rh(r,s,c){s.length?s=lt(s,function(E){return Ne(E)?function(T){return ui(T,E.length===1?E[0]:E)}:E}):s=[en];var p=-1;s=lt(s,cn(Ce()));var y=Qf(r,function(E,T,k){var L=lt(s,function(J){return J(E)});return{criteria:L,index:++p,value:E}});return Yy(y,function(E,T){return Ov(E,T,c)})}function Ev(r,s){return ih(r,s,function(c,p){return pl(r,p)})}function ih(r,s,c){for(var p=-1,y=s.length,E={};++p<y;){var T=s[p],k=ui(r,T);c(k,T)&&Hs(E,Pr(T,r),k)}return E}function bv(r){return function(s){return ui(s,r)}}function jc(r,s,c,p){var y=p?Xy:Ri,E=-1,T=s.length,k=r;for(r===s&&(s=Kt(s)),c&&(k=lt(r,cn(c)));++E<T;)for(var L=0,J=s[E],Q=c?c(J):J;(L=y(k,Q,L,p))>-1;)k!==r&&ua.call(k,L,1),ua.call(r,L,1);return r}function sh(r,s){for(var c=r?s.length:0,p=c-1;c--;){var y=s[c];if(c==p||y!==E){var E=y;gr(y)?ua.call(r,y,1):Gc(r,y)}}return r}function Hc(r,s){return r+da(zf()*(s-r+1))}function Av(r,s,c,p){for(var y=-1,E=St(la((s-r)/(c||1)),0),T=V(E);E--;)T[p?E:++y]=r,r+=c;return T}function Vc(r,s){var c="";if(!r||s<1||s>ee)return c;do s%2&&(c+=r),s=da(s/2),s&&(r+=r);while(s);return c}function $e(r,s){return ol(Mh(r,s,en),r+"")}function Sv(r){return Hf(Zi(r))}function Fv(r,s){var c=Zi(r);return Fa(c,ai(s,0,c.length))}function Hs(r,s,c,p){if(!ht(r))return r;s=Pr(s,r);for(var y=-1,E=s.length,T=E-1,k=r;k!=null&&++y<E;){var L=er(s[y]),J=c;if(L==="__proto__"||L==="constructor"||L==="prototype")return r;if(y!=T){var Q=k[L];J=p?p(Q,L,k):n,J===n&&(J=ht(Q)?Q:gr(s[y+1])?[]:{})}$s(k,L,J),k=k[L]}return r}var oh=fa?function(r,s){return fa.set(r,s),r}:en,Nv=ca?function(r,s){return ca(r,"toString",{configurable:!0,enumerable:!1,value:ml(s),writable:!0})}:en;function Tv(r){return Fa(Zi(r))}function An(r,s,c){var p=-1,y=r.length;s<0&&(s=-s>y?0:y+s),c=c>y?y:c,c<0&&(c+=y),y=s>c?0:c-s>>>0,s>>>=0;for(var E=V(y);++p<y;)E[p]=r[p+s];return E}function Iv(r,s){var c;return Mr(r,function(p,y,E){return c=s(p,y,E),!c}),!!c}function _a(r,s,c){var p=0,y=r==null?p:r.length;if(typeof s=="number"&&s===s&&y<=W){for(;p<y;){var E=p+y>>>1,T=r[E];T!==null&&!dn(T)&&(c?T<=s:T<s)?p=E+1:y=E}return y}return Uc(r,s,en,c)}function Uc(r,s,c,p){var y=0,E=r==null?0:r.length;if(E===0)return 0;s=c(s);for(var T=s!==s,k=s===null,L=dn(s),J=s===n;y<E;){var Q=da((y+E)/2),se=c(r[Q]),he=se!==n,_e=se===null,Ee=se===se,Re=dn(se);if(T)var be=p||Ee;else J?be=Ee&&(p||he):k?be=Ee&&he&&(p||!_e):L?be=Ee&&he&&!_e&&(p||!Re):_e||Re?be=!1:be=p?se<=s:se<s;be?y=Q+1:E=Q}return Pt(E,ae)}function ah(r,s){for(var c=-1,p=r.length,y=0,E=[];++c<p;){var T=r[c],k=s?s(T):T;if(!c||!Pn(k,L)){var L=k;E[y++]=T===0?0:T}}return E}function uh(r){return typeof r=="number"?r:dn(r)?ne:+r}function ln(r){if(typeof r=="string")return r;if(Ne(r))return lt(r,ln)+"";if(dn(r))return Lf?Lf.call(r):"";var s=r+"";return s=="0"&&1/r==-Z?"-0":s}function Or(r,s,c){var p=-1,y=Jo,E=r.length,T=!0,k=[],L=k;if(c)T=!1,y=_c;else if(E>=o){var J=s?null:Hv(r);if(J)return ea(J);T=!1,y=ks,L=new oi}else L=s?[]:k;e:for(;++p<E;){var Q=r[p],se=s?s(Q):Q;if(Q=c||Q!==0?Q:0,T&&se===se){for(var he=L.length;he--;)if(L[he]===se)continue e;s&&L.push(se),k.push(Q)}else y(L,se,c)||(L!==k&&L.push(se),k.push(Q))}return k}function Gc(r,s){return s=Pr(s,r),r=Oh(r,s),r==null||delete r[er(Sn(s))]}function ch(r,s,c,p){return Hs(r,s,c(ui(r,s)),p)}function Da(r,s,c,p){for(var y=r.length,E=p?y:-1;(p?E--:++E<y)&&s(r[E],E,r););return c?An(r,p?0:E,p?E+1:y):An(r,p?E+1:0,p?y:E)}function lh(r,s){var c=r;return c instanceof Ve&&(c=c.value()),Dc(s,function(p,y){return y.func.apply(y.thisArg,kr([p],y.args))},c)}function Zc(r,s,c){var p=r.length;if(p<2)return p?Or(r[0]):[];for(var y=-1,E=V(p);++y<p;)for(var T=r[y],k=-1;++k<p;)k!=y&&(E[y]=zs(E[y]||T,r[k],s,c));return Or(Rt(E,1),s,c)}function dh(r,s,c){for(var p=-1,y=r.length,E=s.length,T={};++p<y;){var k=p<E?s[p]:n;c(T,r[p],k)}return T}function Wc(r){return Dt(r)?r:[]}function qc(r){return typeof r=="function"?r:en}function Pr(r,s){return Ne(r)?r:rl(r,s)?[r]:Lh(et(r))}var kv=$e;function $r(r,s,c){var p=r.length;return c=c===n?p:c,!s&&c>=p?r:An(r,s,c)}var fh=_1||function(r){return Bt.clearTimeout(r)};function hh(r,s){if(s)return r.slice();var c=r.length,p=Rf?Rf(c):new r.constructor(c);return r.copy(p),p}function Xc(r){var s=new r.constructor(r.byteLength);return new oa(s).set(new oa(r)),s}function Bv(r,s){var c=s?Xc(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}function Rv(r){var s=new r.constructor(r.source,qo.exec(r));return s.lastIndex=r.lastIndex,s}function Mv(r){return Ps?rt(Ps.call(r)):{}}function ph(r,s){var c=s?Xc(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}function gh(r,s){if(r!==s){var c=r!==n,p=r===null,y=r===r,E=dn(r),T=s!==n,k=s===null,L=s===s,J=dn(s);if(!k&&!J&&!E&&r>s||E&&T&&L&&!k&&!J||p&&T&&L||!c&&L||!y)return 1;if(!p&&!E&&!J&&r<s||J&&c&&y&&!p&&!E||k&&c&&y||!T&&y||!L)return-1}return 0}function Ov(r,s,c){for(var p=-1,y=r.criteria,E=s.criteria,T=y.length,k=c.length;++p<T;){var L=gh(y[p],E[p]);if(L){if(p>=k)return L;var J=c[p];return L*(J=="desc"?-1:1)}}return r.index-s.index}function mh(r,s,c,p){for(var y=-1,E=r.length,T=c.length,k=-1,L=s.length,J=St(E-T,0),Q=V(L+J),se=!p;++k<L;)Q[k]=s[k];for(;++y<T;)(se||y<E)&&(Q[c[y]]=r[y]);for(;J--;)Q[k++]=r[y++];return Q}function yh(r,s,c,p){for(var y=-1,E=r.length,T=-1,k=c.length,L=-1,J=s.length,Q=St(E-k,0),se=V(Q+J),he=!p;++y<Q;)se[y]=r[y];for(var _e=y;++L<J;)se[_e+L]=s[L];for(;++T<k;)(he||y<E)&&(se[_e+c[T]]=r[y++]);return se}function Kt(r,s){var c=-1,p=r.length;for(s||(s=V(p));++c<p;)s[c]=r[c];return s}function Qn(r,s,c,p){var y=!c;c||(c={});for(var E=-1,T=s.length;++E<T;){var k=s[E],L=p?p(c[k],r[k],k,c,r):n;L===n&&(L=r[k]),y?fr(c,k,L):$s(c,k,L)}return c}function Pv(r,s){return Qn(r,nl(r),s)}function $v(r,s){return Qn(r,Th(r),s)}function xa(r,s){return function(c,p){var y=Ne(c)?Vy:ov,E=s?s():{};return y(c,r,Ce(p,2),E)}}function Hi(r){return $e(function(s,c){var p=-1,y=c.length,E=y>1?c[y-1]:n,T=y>2?c[2]:n;for(E=r.length>3&&typeof E=="function"?(y--,E):n,T&&Ht(c[0],c[1],T)&&(E=y<3?n:E,y=1),s=rt(s);++p<y;){var k=c[p];k&&r(s,k,p,E)}return s})}function vh(r,s){return function(c,p){if(c==null)return c;if(!Jt(c))return r(c,p);for(var y=c.length,E=s?y:-1,T=rt(c);(s?E--:++E<y)&&p(T[E],E,T)!==!1;);return c}}function _h(r){return function(s,c,p){for(var y=-1,E=rt(s),T=p(s),k=T.length;k--;){var L=T[r?k:++y];if(c(E[L],L,E)===!1)break}return s}}function zv(r,s,c){var p=s&w,y=Vs(r);function E(){var T=this&&this!==Bt&&this instanceof E?y:r;return T.apply(p?c:this,arguments)}return E}function Dh(r){return function(s){s=et(s);var c=Mi(s)?Mn(s):n,p=c?c[0]:s.charAt(0),y=c?$r(c,1).join(""):s.slice(1);return p[r]()+y}}function Vi(r){return function(s){return Dc(vp(yp(s).replace(Ny,"")),r,"")}}function Vs(r){return function(){var s=arguments;switch(s.length){case 0:return new r;case 1:return new r(s[0]);case 2:return new r(s[0],s[1]);case 3:return new r(s[0],s[1],s[2]);case 4:return new r(s[0],s[1],s[2],s[3]);case 5:return new r(s[0],s[1],s[2],s[3],s[4]);case 6:return new r(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new r(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var c=ji(r.prototype),p=r.apply(c,s);return ht(p)?p:c}}function Lv(r,s,c){var p=Vs(r);function y(){for(var E=arguments.length,T=V(E),k=E,L=Ui(y);k--;)T[k]=arguments[k];var J=E<3&&T[0]!==L&&T[E-1]!==L?[]:Br(T,L);if(E-=J.length,E<c)return bh(r,s,wa,y.placeholder,n,T,J,n,n,c-E);var Q=this&&this!==Bt&&this instanceof y?p:r;return un(Q,this,T)}return y}function xh(r){return function(s,c,p){var y=rt(s);if(!Jt(s)){var E=Ce(c,3);s=Ft(s),c=function(k){return E(y[k],k,y)}}var T=r(s,c,p);return T>-1?y[E?s[T]:T]:n}}function wh(r){return pr(function(s){var c=s.length,p=c,y=En.prototype.thru;for(r&&s.reverse();p--;){var E=s[p];if(typeof E!="function")throw new Cn(u);if(y&&!T&&Aa(E)=="wrapper")var T=new En([],!0)}for(p=T?p:c;++p<c;){E=s[p];var k=Aa(E),L=k=="wrapper"?el(E):n;L&&il(L[0])&&L[1]==(M|I|$|X)&&!L[4].length&&L[9]==1?T=T[Aa(L[0])].apply(T,L[3]):T=E.length==1&&il(E)?T[k]():T.thru(E)}return function(){var J=arguments,Q=J[0];if(T&&J.length==1&&Ne(Q))return T.plant(Q).value();for(var se=0,he=c?s[se].apply(this,J):Q;++se<c;)he=s[se].call(this,he);return he}})}function wa(r,s,c,p,y,E,T,k,L,J){var Q=s&M,se=s&w,he=s&_,_e=s&(I|N),Ee=s&B,Re=he?n:Vs(r);function be(){for(var je=arguments.length,Ze=V(je),fn=je;fn--;)Ze[fn]=arguments[fn];if(_e)var Vt=Ui(be),hn=Jy(Ze,Vt);if(p&&(Ze=mh(Ze,p,y,_e)),E&&(Ze=yh(Ze,E,T,_e)),je-=hn,_e&&je<J){var xt=Br(Ze,Vt);return bh(r,s,wa,be.placeholder,c,Ze,xt,k,L,J-je)}var $n=se?c:this,vr=he?$n[r]:r;return je=Ze.length,k?Ze=o_(Ze,k):Ee&&je>1&&Ze.reverse(),Q&&L<je&&(Ze.length=L),this&&this!==Bt&&this instanceof be&&(vr=Re||Vs(vr)),vr.apply($n,Ze)}return be}function Ch(r,s){return function(c,p){return pv(c,r,s(p),{})}}function Ca(r,s){return function(c,p){var y;if(c===n&&p===n)return s;if(c!==n&&(y=c),p!==n){if(y===n)return p;typeof c=="string"||typeof p=="string"?(c=ln(c),p=ln(p)):(c=uh(c),p=uh(p)),y=r(c,p)}return y}}function Yc(r){return pr(function(s){return s=lt(s,cn(Ce())),$e(function(c){var p=this;return r(s,function(y){return un(y,p,c)})})})}function Ea(r,s){s=s===n?" ":ln(s);var c=s.length;if(c<2)return c?Vc(s,r):s;var p=Vc(s,la(r/Oi(s)));return Mi(s)?$r(Mn(p),0,r).join(""):p.slice(0,r)}function jv(r,s,c,p){var y=s&w,E=Vs(r);function T(){for(var k=-1,L=arguments.length,J=-1,Q=p.length,se=V(Q+L),he=this&&this!==Bt&&this instanceof T?E:r;++J<Q;)se[J]=p[J];for(;L--;)se[J++]=arguments[++k];return un(he,y?c:this,se)}return T}function Eh(r){return function(s,c,p){return p&&typeof p!="number"&&Ht(s,c,p)&&(c=p=n),s=yr(s),c===n?(c=s,s=0):c=yr(c),p=p===n?s<c?1:-1:yr(p),Av(s,c,p,r)}}function ba(r){return function(s,c){return typeof s=="string"&&typeof c=="string"||(s=Fn(s),c=Fn(c)),r(s,c)}}function bh(r,s,c,p,y,E,T,k,L,J){var Q=s&I,se=Q?T:n,he=Q?n:T,_e=Q?E:n,Ee=Q?n:E;s|=Q?$:z,s&=~(Q?z:$),s&A||(s&=~(w|_));var Re=[r,s,y,_e,se,Ee,he,k,L,J],be=c.apply(n,Re);return il(r)&&Ph(be,Re),be.placeholder=p,$h(be,r,s)}function Kc(r){var s=At[r];return function(c,p){if(c=Fn(c),p=p==null?0:Pt(ke(p),292),p&&$f(c)){var y=(et(c)+"e").split("e"),E=s(y[0]+"e"+(+y[1]+p));return y=(et(E)+"e").split("e"),+(y[0]+"e"+(+y[1]-p))}return s(c)}}var Hv=zi&&1/ea(new zi([,-0]))[1]==Z?function(r){return new zi(r)}:_l;function Ah(r){return function(s){var c=$t(s);return c==He?Sc(s):c==bt?s1(s):Ky(s,r(s))}}function hr(r,s,c,p,y,E,T,k){var L=s&_;if(!L&&typeof r!="function")throw new Cn(u);var J=p?p.length:0;if(J||(s&=~($|z),p=y=n),T=T===n?T:St(ke(T),0),k=k===n?k:ke(k),J-=y?y.length:0,s&z){var Q=p,se=y;p=y=n}var he=L?n:el(r),_e=[r,s,c,p,y,Q,se,E,T,k];if(he&&r_(_e,he),r=_e[0],s=_e[1],c=_e[2],p=_e[3],y=_e[4],k=_e[9]=_e[9]===n?L?0:r.length:St(_e[9]-J,0),!k&&s&(I|N)&&(s&=~(I|N)),!s||s==w)var Ee=zv(r,s,c);else s==I||s==N?Ee=Lv(r,s,k):(s==$||s==(w|$))&&!y.length?Ee=jv(r,s,c,p):Ee=wa.apply(n,_e);var Re=he?oh:Ph;return $h(Re(Ee,_e),r,s)}function Sh(r,s,c,p){return r===n||Pn(r,$i[c])&&!tt.call(p,c)?s:r}function Fh(r,s,c,p,y,E){return ht(r)&&ht(s)&&(E.set(s,r),va(r,s,n,Fh,E),E.delete(s)),r}function Vv(r){return Zs(r)?n:r}function Nh(r,s,c,p,y,E){var T=c&x,k=r.length,L=s.length;if(k!=L&&!(T&&L>k))return!1;var J=E.get(r),Q=E.get(s);if(J&&Q)return J==s&&Q==r;var se=-1,he=!0,_e=c&v?new oi:n;for(E.set(r,s),E.set(s,r);++se<k;){var Ee=r[se],Re=s[se];if(p)var be=T?p(Re,Ee,se,s,r,E):p(Ee,Re,se,r,s,E);if(be!==n){if(be)continue;he=!1;break}if(_e){if(!xc(s,function(je,Ze){if(!ks(_e,Ze)&&(Ee===je||y(Ee,je,c,p,E)))return _e.push(Ze)})){he=!1;break}}else if(!(Ee===Re||y(Ee,Re,c,p,E))){he=!1;break}}return E.delete(r),E.delete(s),he}function Uv(r,s,c,p,y,E,T){switch(c){case an:if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case on:return!(r.byteLength!=s.byteLength||!E(new oa(r),new oa(s)));case le:case ge:case Qe:return Pn(+r,+s);case nt:return r.name==s.name&&r.message==s.message;case Ot:case _n:return r==s+"";case He:var k=Sc;case bt:var L=p&x;if(k||(k=ea),r.size!=s.size&&!L)return!1;var J=T.get(r);if(J)return J==s;p|=v,T.set(r,s);var Q=Nh(k(r),k(s),p,y,E,T);return T.delete(r),Q;case Tn:if(Ps)return Ps.call(r)==Ps.call(s)}return!1}function Gv(r,s,c,p,y,E){var T=c&x,k=Jc(r),L=k.length,J=Jc(s),Q=J.length;if(L!=Q&&!T)return!1;for(var se=L;se--;){var he=k[se];if(!(T?he in s:tt.call(s,he)))return!1}var _e=E.get(r),Ee=E.get(s);if(_e&&Ee)return _e==s&&Ee==r;var Re=!0;E.set(r,s),E.set(s,r);for(var be=T;++se<L;){he=k[se];var je=r[he],Ze=s[he];if(p)var fn=T?p(Ze,je,he,s,r,E):p(je,Ze,he,r,s,E);if(!(fn===n?je===Ze||y(je,Ze,c,p,E):fn)){Re=!1;break}be||(be=he=="constructor")}if(Re&&!be){var Vt=r.constructor,hn=s.constructor;Vt!=hn&&"constructor"in r&&"constructor"in s&&!(typeof Vt=="function"&&Vt instanceof Vt&&typeof hn=="function"&&hn instanceof hn)&&(Re=!1)}return E.delete(r),E.delete(s),Re}function pr(r){return ol(Mh(r,n,Uh),r+"")}function Jc(r){return Xf(r,Ft,nl)}function Qc(r){return Xf(r,Qt,Th)}var el=fa?function(r){return fa.get(r)}:_l;function Aa(r){for(var s=r.name+"",c=Li[s],p=tt.call(Li,s)?c.length:0;p--;){var y=c[p],E=y.func;if(E==null||E==r)return y.name}return s}function Ui(r){var s=tt.call(C,"placeholder")?C:r;return s.placeholder}function Ce(){var r=C.iteratee||yl;return r=r===yl?Jf:r,arguments.length?r(arguments[0],arguments[1]):r}function Sa(r,s){var c=r.__data__;return Qv(s)?c[typeof s=="string"?"string":"hash"]:c.map}function tl(r){for(var s=Ft(r),c=s.length;c--;){var p=s[c],y=r[p];s[c]=[p,y,Bh(y)]}return s}function ci(r,s){var c=n1(r,s);return Kf(c)?c:n}function Zv(r){var s=tt.call(r,ii),c=r[ii];try{r[ii]=n;var p=!0}catch{}var y=ia.call(r);return p&&(s?r[ii]=c:delete r[ii]),y}var nl=Nc?function(r){return r==null?[]:(r=rt(r),Ir(Nc(r),function(s){return Of.call(r,s)}))}:Dl,Th=Nc?function(r){for(var s=[];r;)kr(s,nl(r)),r=aa(r);return s}:Dl,$t=jt;(Tc&&$t(new Tc(new ArrayBuffer(1)))!=an||Rs&&$t(new Rs)!=He||Ic&&$t(Ic.resolve())!=ve||zi&&$t(new zi)!=bt||Ms&&$t(new Ms)!=Dn)&&($t=function(r){var s=jt(r),c=s==Be?r.constructor:n,p=c?li(c):"";if(p)switch(p){case F1:return an;case N1:return He;case T1:return ve;case I1:return bt;case k1:return Dn}return s});function Wv(r,s,c){for(var p=-1,y=c.length;++p<y;){var E=c[p],T=E.size;switch(E.type){case"drop":r+=T;break;case"dropRight":s-=T;break;case"take":s=Pt(s,r+T);break;case"takeRight":r=St(r,s-T);break}}return{start:r,end:s}}function qv(r){var s=r.match(Xu);return s?s[1].split(Yu):[]}function Ih(r,s,c){s=Pr(s,r);for(var p=-1,y=s.length,E=!1;++p<y;){var T=er(s[p]);if(!(E=r!=null&&c(r,T)))break;r=r[T]}return E||++p!=y?E:(y=r==null?0:r.length,!!y&&Ra(y)&&gr(T,y)&&(Ne(r)||di(r)))}function Xv(r){var s=r.length,c=new r.constructor(s);return s&&typeof r[0]=="string"&&tt.call(r,"index")&&(c.index=r.index,c.input=r.input),c}function kh(r){return typeof r.constructor=="function"&&!Us(r)?ji(aa(r)):{}}function Yv(r,s,c){var p=r.constructor;switch(s){case on:return Xc(r);case le:case ge:return new p(+r);case an:return Bv(r,c);case Yn:case ur:case Ct:case Xt:case kn:case Bn:case Kn:case Yt:case Rn:return ph(r,c);case He:return new p;case Qe:case _n:return new p(r);case Ot:return Rv(r);case bt:return new p;case Tn:return Mv(r)}}function Kv(r,s){var c=s.length;if(!c)return r;var p=c-1;return s[p]=(c>1?"& ":"")+s[p],s=s.join(c>2?", ":" "),r.replace(qu,`{
/* [wrapped with `+s+`] */
`)}function Jv(r){return Ne(r)||di(r)||!!(Pf&&r&&r[Pf])}function gr(r,s){var c=typeof r;return s=s??ee,!!s&&(c=="number"||c!="symbol"&&ic.test(r))&&r>-1&&r%1==0&&r<s}function Ht(r,s,c){if(!ht(c))return!1;var p=typeof s;return(p=="number"?Jt(c)&&gr(s,c.length):p=="string"&&s in c)?Pn(c[s],r):!1}function rl(r,s){if(Ne(r))return!1;var c=typeof r;return c=="number"||c=="symbol"||c=="boolean"||r==null||dn(r)?!0:Uu.test(r)||!Vu.test(r)||s!=null&&r in rt(s)}function Qv(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}function il(r){var s=Aa(r),c=C[s];if(typeof c!="function"||!(s in Ve.prototype))return!1;if(r===c)return!0;var p=el(c);return!!p&&r===p[0]}function e_(r){return!!Bf&&Bf in r}var t_=na?mr:xl;function Us(r){var s=r&&r.constructor,c=typeof s=="function"&&s.prototype||$i;return r===c}function Bh(r){return r===r&&!ht(r)}function Rh(r,s){return function(c){return c==null?!1:c[r]===s&&(s!==n||r in rt(c))}}function n_(r){var s=ka(r,function(p){return c.size===f&&c.clear(),p}),c=s.cache;return s}function r_(r,s){var c=r[1],p=s[1],y=c|p,E=y<(w|_|M),T=p==M&&c==I||p==M&&c==X&&r[7].length<=s[8]||p==(M|X)&&s[7].length<=s[8]&&c==I;if(!(E||T))return r;p&w&&(r[2]=s[2],y|=c&w?0:A);var k=s[3];if(k){var L=r[3];r[3]=L?mh(L,k,s[4]):k,r[4]=L?Br(r[3],h):s[4]}return k=s[5],k&&(L=r[5],r[5]=L?yh(L,k,s[6]):k,r[6]=L?Br(r[5],h):s[6]),k=s[7],k&&(r[7]=k),p&M&&(r[8]=r[8]==null?s[8]:Pt(r[8],s[8])),r[9]==null&&(r[9]=s[9]),r[0]=s[0],r[1]=y,r}function i_(r){var s=[];if(r!=null)for(var c in rt(r))s.push(c);return s}function s_(r){return ia.call(r)}function Mh(r,s,c){return s=St(s===n?r.length-1:s,0),function(){for(var p=arguments,y=-1,E=St(p.length-s,0),T=V(E);++y<E;)T[y]=p[s+y];y=-1;for(var k=V(s+1);++y<s;)k[y]=p[y];return k[s]=c(T),un(r,this,k)}}function Oh(r,s){return s.length<2?r:ui(r,An(s,0,-1))}function o_(r,s){for(var c=r.length,p=Pt(s.length,c),y=Kt(r);p--;){var E=s[p];r[p]=gr(E,c)?y[E]:n}return r}function sl(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}var Ph=zh(oh),Gs=x1||function(r,s){return Bt.setTimeout(r,s)},ol=zh(Nv);function $h(r,s,c){var p=s+"";return ol(r,Kv(p,a_(qv(p),c)))}function zh(r){var s=0,c=0;return function(){var p=b1(),y=G-(p-c);if(c=p,y>0){if(++s>=q)return arguments[0]}else s=0;return r.apply(n,arguments)}}function Fa(r,s){var c=-1,p=r.length,y=p-1;for(s=s===n?p:s;++c<s;){var E=Hc(c,y),T=r[E];r[E]=r[c],r[c]=T}return r.length=s,r}var Lh=n_(function(r){var s=[];return r.charCodeAt(0)===46&&s.push(""),r.replace(Gu,function(c,p,y,E){s.push(y?E.replace(Wo,"$1"):p||c)}),s});function er(r){if(typeof r=="string"||dn(r))return r;var s=r+"";return s=="0"&&1/r==-Z?"-0":s}function li(r){if(r!=null){try{return ra.call(r)}catch{}try{return r+""}catch{}}return""}function a_(r,s){return wn(ie,function(c){var p="_."+c[0];s&c[1]&&!Jo(r,p)&&r.push(p)}),r.sort()}function jh(r){if(r instanceof Ve)return r.clone();var s=new En(r.__wrapped__,r.__chain__);return s.__actions__=Kt(r.__actions__),s.__index__=r.__index__,s.__values__=r.__values__,s}function u_(r,s,c){(c?Ht(r,s,c):s===n)?s=1:s=St(ke(s),0);var p=r==null?0:r.length;if(!p||s<1)return[];for(var y=0,E=0,T=V(la(p/s));y<p;)T[E++]=An(r,y,y+=s);return T}function c_(r){for(var s=-1,c=r==null?0:r.length,p=0,y=[];++s<c;){var E=r[s];E&&(y[p++]=E)}return y}function l_(){var r=arguments.length;if(!r)return[];for(var s=V(r-1),c=arguments[0],p=r;p--;)s[p-1]=arguments[p];return kr(Ne(c)?Kt(c):[c],Rt(s,1))}var d_=$e(function(r,s){return Dt(r)?zs(r,Rt(s,1,Dt,!0)):[]}),f_=$e(function(r,s){var c=Sn(s);return Dt(c)&&(c=n),Dt(r)?zs(r,Rt(s,1,Dt,!0),Ce(c,2)):[]}),h_=$e(function(r,s){var c=Sn(s);return Dt(c)&&(c=n),Dt(r)?zs(r,Rt(s,1,Dt,!0),n,c):[]});function p_(r,s,c){var p=r==null?0:r.length;return p?(s=c||s===n?1:ke(s),An(r,s<0?0:s,p)):[]}function g_(r,s,c){var p=r==null?0:r.length;return p?(s=c||s===n?1:ke(s),s=p-s,An(r,0,s<0?0:s)):[]}function m_(r,s){return r&&r.length?Da(r,Ce(s,3),!0,!0):[]}function y_(r,s){return r&&r.length?Da(r,Ce(s,3),!0):[]}function v_(r,s,c,p){var y=r==null?0:r.length;return y?(c&&typeof c!="number"&&Ht(r,s,c)&&(c=0,p=y),lv(r,s,c,p)):[]}function Hh(r,s,c){var p=r==null?0:r.length;if(!p)return-1;var y=c==null?0:ke(c);return y<0&&(y=St(p+y,0)),Qo(r,Ce(s,3),y)}function Vh(r,s,c){var p=r==null?0:r.length;if(!p)return-1;var y=p-1;return c!==n&&(y=ke(c),y=c<0?St(p+y,0):Pt(y,p-1)),Qo(r,Ce(s,3),y,!0)}function Uh(r){var s=r==null?0:r.length;return s?Rt(r,1):[]}function __(r){var s=r==null?0:r.length;return s?Rt(r,Z):[]}function D_(r,s){var c=r==null?0:r.length;return c?(s=s===n?1:ke(s),Rt(r,s)):[]}function x_(r){for(var s=-1,c=r==null?0:r.length,p={};++s<c;){var y=r[s];p[y[0]]=y[1]}return p}function Gh(r){return r&&r.length?r[0]:n}function w_(r,s,c){var p=r==null?0:r.length;if(!p)return-1;var y=c==null?0:ke(c);return y<0&&(y=St(p+y,0)),Ri(r,s,y)}function C_(r){var s=r==null?0:r.length;return s?An(r,0,-1):[]}var E_=$e(function(r){var s=lt(r,Wc);return s.length&&s[0]===r[0]?Pc(s):[]}),b_=$e(function(r){var s=Sn(r),c=lt(r,Wc);return s===Sn(c)?s=n:c.pop(),c.length&&c[0]===r[0]?Pc(c,Ce(s,2)):[]}),A_=$e(function(r){var s=Sn(r),c=lt(r,Wc);return s=typeof s=="function"?s:n,s&&c.pop(),c.length&&c[0]===r[0]?Pc(c,n,s):[]});function S_(r,s){return r==null?"":C1.call(r,s)}function Sn(r){var s=r==null?0:r.length;return s?r[s-1]:n}function F_(r,s,c){var p=r==null?0:r.length;if(!p)return-1;var y=p;return c!==n&&(y=ke(c),y=y<0?St(p+y,0):Pt(y,p-1)),s===s?a1(r,s,y):Qo(r,bf,y,!0)}function N_(r,s){return r&&r.length?nh(r,ke(s)):n}var T_=$e(Zh);function Zh(r,s){return r&&r.length&&s&&s.length?jc(r,s):r}function I_(r,s,c){return r&&r.length&&s&&s.length?jc(r,s,Ce(c,2)):r}function k_(r,s,c){return r&&r.length&&s&&s.length?jc(r,s,n,c):r}var B_=pr(function(r,s){var c=r==null?0:r.length,p=Bc(r,s);return sh(r,lt(s,function(y){return gr(y,c)?+y:y}).sort(gh)),p});function R_(r,s){var c=[];if(!(r&&r.length))return c;var p=-1,y=[],E=r.length;for(s=Ce(s,3);++p<E;){var T=r[p];s(T,p,r)&&(c.push(T),y.push(p))}return sh(r,y),c}function al(r){return r==null?r:S1.call(r)}function M_(r,s,c){var p=r==null?0:r.length;return p?(c&&typeof c!="number"&&Ht(r,s,c)?(s=0,c=p):(s=s==null?0:ke(s),c=c===n?p:ke(c)),An(r,s,c)):[]}function O_(r,s){return _a(r,s)}function P_(r,s,c){return Uc(r,s,Ce(c,2))}function $_(r,s){var c=r==null?0:r.length;if(c){var p=_a(r,s);if(p<c&&Pn(r[p],s))return p}return-1}function z_(r,s){return _a(r,s,!0)}function L_(r,s,c){return Uc(r,s,Ce(c,2),!0)}function j_(r,s){var c=r==null?0:r.length;if(c){var p=_a(r,s,!0)-1;if(Pn(r[p],s))return p}return-1}function H_(r){return r&&r.length?ah(r):[]}function V_(r,s){return r&&r.length?ah(r,Ce(s,2)):[]}function U_(r){var s=r==null?0:r.length;return s?An(r,1,s):[]}function G_(r,s,c){return r&&r.length?(s=c||s===n?1:ke(s),An(r,0,s<0?0:s)):[]}function Z_(r,s,c){var p=r==null?0:r.length;return p?(s=c||s===n?1:ke(s),s=p-s,An(r,s<0?0:s,p)):[]}function W_(r,s){return r&&r.length?Da(r,Ce(s,3),!1,!0):[]}function q_(r,s){return r&&r.length?Da(r,Ce(s,3)):[]}var X_=$e(function(r){return Or(Rt(r,1,Dt,!0))}),Y_=$e(function(r){var s=Sn(r);return Dt(s)&&(s=n),Or(Rt(r,1,Dt,!0),Ce(s,2))}),K_=$e(function(r){var s=Sn(r);return s=typeof s=="function"?s:n,Or(Rt(r,1,Dt,!0),n,s)});function J_(r){return r&&r.length?Or(r):[]}function Q_(r,s){return r&&r.length?Or(r,Ce(s,2)):[]}function eD(r,s){return s=typeof s=="function"?s:n,r&&r.length?Or(r,n,s):[]}function ul(r){if(!(r&&r.length))return[];var s=0;return r=Ir(r,function(c){if(Dt(c))return s=St(c.length,s),!0}),bc(s,function(c){return lt(r,wc(c))})}function Wh(r,s){if(!(r&&r.length))return[];var c=ul(r);return s==null?c:lt(c,function(p){return un(s,n,p)})}var tD=$e(function(r,s){return Dt(r)?zs(r,s):[]}),nD=$e(function(r){return Zc(Ir(r,Dt))}),rD=$e(function(r){var s=Sn(r);return Dt(s)&&(s=n),Zc(Ir(r,Dt),Ce(s,2))}),iD=$e(function(r){var s=Sn(r);return s=typeof s=="function"?s:n,Zc(Ir(r,Dt),n,s)}),sD=$e(ul);function oD(r,s){return dh(r||[],s||[],$s)}function aD(r,s){return dh(r||[],s||[],Hs)}var uD=$e(function(r){var s=r.length,c=s>1?r[s-1]:n;return c=typeof c=="function"?(r.pop(),c):n,Wh(r,c)});function qh(r){var s=C(r);return s.__chain__=!0,s}function cD(r,s){return s(r),r}function Na(r,s){return s(r)}var lD=pr(function(r){var s=r.length,c=s?r[0]:0,p=this.__wrapped__,y=function(E){return Bc(E,r)};return s>1||this.__actions__.length||!(p instanceof Ve)||!gr(c)?this.thru(y):(p=p.slice(c,+c+(s?1:0)),p.__actions__.push({func:Na,args:[y],thisArg:n}),new En(p,this.__chain__).thru(function(E){return s&&!E.length&&E.push(n),E}))});function dD(){return qh(this)}function fD(){return new En(this.value(),this.__chain__)}function hD(){this.__values__===n&&(this.__values__=up(this.value()));var r=this.__index__>=this.__values__.length,s=r?n:this.__values__[this.__index__++];return{done:r,value:s}}function pD(){return this}function gD(r){for(var s,c=this;c instanceof pa;){var p=jh(c);p.__index__=0,p.__values__=n,s?y.__wrapped__=p:s=p;var y=p;c=c.__wrapped__}return y.__wrapped__=r,s}function mD(){var r=this.__wrapped__;if(r instanceof Ve){var s=r;return this.__actions__.length&&(s=new Ve(this)),s=s.reverse(),s.__actions__.push({func:Na,args:[al],thisArg:n}),new En(s,this.__chain__)}return this.thru(al)}function yD(){return lh(this.__wrapped__,this.__actions__)}var vD=xa(function(r,s,c){tt.call(r,c)?++r[c]:fr(r,c,1)});function _D(r,s,c){var p=Ne(r)?Cf:cv;return c&&Ht(r,s,c)&&(s=n),p(r,Ce(s,3))}function DD(r,s){var c=Ne(r)?Ir:Wf;return c(r,Ce(s,3))}var xD=xh(Hh),wD=xh(Vh);function CD(r,s){return Rt(Ta(r,s),1)}function ED(r,s){return Rt(Ta(r,s),Z)}function bD(r,s,c){return c=c===n?1:ke(c),Rt(Ta(r,s),c)}function Xh(r,s){var c=Ne(r)?wn:Mr;return c(r,Ce(s,3))}function Yh(r,s){var c=Ne(r)?Uy:Zf;return c(r,Ce(s,3))}var AD=xa(function(r,s,c){tt.call(r,c)?r[c].push(s):fr(r,c,[s])});function SD(r,s,c,p){r=Jt(r)?r:Zi(r),c=c&&!p?ke(c):0;var y=r.length;return c<0&&(c=St(y+c,0)),Ma(r)?c<=y&&r.indexOf(s,c)>-1:!!y&&Ri(r,s,c)>-1}var FD=$e(function(r,s,c){var p=-1,y=typeof s=="function",E=Jt(r)?V(r.length):[];return Mr(r,function(T){E[++p]=y?un(s,T,c):Ls(T,s,c)}),E}),ND=xa(function(r,s,c){fr(r,c,s)});function Ta(r,s){var c=Ne(r)?lt:Qf;return c(r,Ce(s,3))}function TD(r,s,c,p){return r==null?[]:(Ne(s)||(s=s==null?[]:[s]),c=p?n:c,Ne(c)||(c=c==null?[]:[c]),rh(r,s,c))}var ID=xa(function(r,s,c){r[c?0:1].push(s)},function(){return[[],[]]});function kD(r,s,c){var p=Ne(r)?Dc:Sf,y=arguments.length<3;return p(r,Ce(s,4),c,y,Mr)}function BD(r,s,c){var p=Ne(r)?Gy:Sf,y=arguments.length<3;return p(r,Ce(s,4),c,y,Zf)}function RD(r,s){var c=Ne(r)?Ir:Wf;return c(r,Ba(Ce(s,3)))}function MD(r){var s=Ne(r)?Hf:Sv;return s(r)}function OD(r,s,c){(c?Ht(r,s,c):s===n)?s=1:s=ke(s);var p=Ne(r)?iv:Fv;return p(r,s)}function PD(r){var s=Ne(r)?sv:Tv;return s(r)}function $D(r){if(r==null)return 0;if(Jt(r))return Ma(r)?Oi(r):r.length;var s=$t(r);return s==He||s==bt?r.size:zc(r).length}function zD(r,s,c){var p=Ne(r)?xc:Iv;return c&&Ht(r,s,c)&&(s=n),p(r,Ce(s,3))}var LD=$e(function(r,s){if(r==null)return[];var c=s.length;return c>1&&Ht(r,s[0],s[1])?s=[]:c>2&&Ht(s[0],s[1],s[2])&&(s=[s[0]]),rh(r,Rt(s,1),[])}),Ia=D1||function(){return Bt.Date.now()};function jD(r,s){if(typeof s!="function")throw new Cn(u);return r=ke(r),function(){if(--r<1)return s.apply(this,arguments)}}function Kh(r,s,c){return s=c?n:s,s=r&&s==null?r.length:s,hr(r,M,n,n,n,n,s)}function Jh(r,s){var c;if(typeof s!="function")throw new Cn(u);return r=ke(r),function(){return--r>0&&(c=s.apply(this,arguments)),r<=1&&(s=n),c}}var cl=$e(function(r,s,c){var p=w;if(c.length){var y=Br(c,Ui(cl));p|=$}return hr(r,p,s,c,y)}),Qh=$e(function(r,s,c){var p=w|_;if(c.length){var y=Br(c,Ui(Qh));p|=$}return hr(s,p,r,c,y)});function ep(r,s,c){s=c?n:s;var p=hr(r,I,n,n,n,n,n,s);return p.placeholder=ep.placeholder,p}function tp(r,s,c){s=c?n:s;var p=hr(r,N,n,n,n,n,n,s);return p.placeholder=tp.placeholder,p}function np(r,s,c){var p,y,E,T,k,L,J=0,Q=!1,se=!1,he=!0;if(typeof r!="function")throw new Cn(u);s=Fn(s)||0,ht(c)&&(Q=!!c.leading,se="maxWait"in c,E=se?St(Fn(c.maxWait)||0,s):E,he="trailing"in c?!!c.trailing:he);function _e(xt){var $n=p,vr=y;return p=y=n,J=xt,T=r.apply(vr,$n),T}function Ee(xt){return J=xt,k=Gs(je,s),Q?_e(xt):T}function Re(xt){var $n=xt-L,vr=xt-J,xp=s-$n;return se?Pt(xp,E-vr):xp}function be(xt){var $n=xt-L,vr=xt-J;return L===n||$n>=s||$n<0||se&&vr>=E}function je(){var xt=Ia();if(be(xt))return Ze(xt);k=Gs(je,Re(xt))}function Ze(xt){return k=n,he&&p?_e(xt):(p=y=n,T)}function fn(){k!==n&&fh(k),J=0,p=L=y=k=n}function Vt(){return k===n?T:Ze(Ia())}function hn(){var xt=Ia(),$n=be(xt);if(p=arguments,y=this,L=xt,$n){if(k===n)return Ee(L);if(se)return fh(k),k=Gs(je,s),_e(L)}return k===n&&(k=Gs(je,s)),T}return hn.cancel=fn,hn.flush=Vt,hn}var HD=$e(function(r,s){return Gf(r,1,s)}),VD=$e(function(r,s,c){return Gf(r,Fn(s)||0,c)});function UD(r){return hr(r,B)}function ka(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new Cn(u);var c=function(){var p=arguments,y=s?s.apply(this,p):p[0],E=c.cache;if(E.has(y))return E.get(y);var T=r.apply(this,p);return c.cache=E.set(y,T)||E,T};return c.cache=new(ka.Cache||dr),c}ka.Cache=dr;function Ba(r){if(typeof r!="function")throw new Cn(u);return function(){var s=arguments;switch(s.length){case 0:return!r.call(this);case 1:return!r.call(this,s[0]);case 2:return!r.call(this,s[0],s[1]);case 3:return!r.call(this,s[0],s[1],s[2])}return!r.apply(this,s)}}function GD(r){return Jh(2,r)}var ZD=kv(function(r,s){s=s.length==1&&Ne(s[0])?lt(s[0],cn(Ce())):lt(Rt(s,1),cn(Ce()));var c=s.length;return $e(function(p){for(var y=-1,E=Pt(p.length,c);++y<E;)p[y]=s[y].call(this,p[y]);return un(r,this,p)})}),ll=$e(function(r,s){var c=Br(s,Ui(ll));return hr(r,$,n,s,c)}),rp=$e(function(r,s){var c=Br(s,Ui(rp));return hr(r,z,n,s,c)}),WD=pr(function(r,s){return hr(r,X,n,n,n,s)});function qD(r,s){if(typeof r!="function")throw new Cn(u);return s=s===n?s:ke(s),$e(r,s)}function XD(r,s){if(typeof r!="function")throw new Cn(u);return s=s==null?0:St(ke(s),0),$e(function(c){var p=c[s],y=$r(c,0,s);return p&&kr(y,p),un(r,this,y)})}function YD(r,s,c){var p=!0,y=!0;if(typeof r!="function")throw new Cn(u);return ht(c)&&(p="leading"in c?!!c.leading:p,y="trailing"in c?!!c.trailing:y),np(r,s,{leading:p,maxWait:s,trailing:y})}function KD(r){return Kh(r,1)}function JD(r,s){return ll(qc(s),r)}function QD(){if(!arguments.length)return[];var r=arguments[0];return Ne(r)?r:[r]}function ex(r){return bn(r,D)}function tx(r,s){return s=typeof s=="function"?s:n,bn(r,D,s)}function nx(r){return bn(r,g|D)}function rx(r,s){return s=typeof s=="function"?s:n,bn(r,g|D,s)}function ix(r,s){return s==null||Uf(r,s,Ft(s))}function Pn(r,s){return r===s||r!==r&&s!==s}var sx=ba(Oc),ox=ba(function(r,s){return r>=s}),di=Yf(function(){return arguments}())?Yf:function(r){return mt(r)&&tt.call(r,"callee")&&!Of.call(r,"callee")},Ne=V.isArray,ax=yf?cn(yf):gv;function Jt(r){return r!=null&&Ra(r.length)&&!mr(r)}function Dt(r){return mt(r)&&Jt(r)}function ux(r){return r===!0||r===!1||mt(r)&&jt(r)==le}var zr=w1||xl,cx=vf?cn(vf):mv;function lx(r){return mt(r)&&r.nodeType===1&&!Zs(r)}function dx(r){if(r==null)return!0;if(Jt(r)&&(Ne(r)||typeof r=="string"||typeof r.splice=="function"||zr(r)||Gi(r)||di(r)))return!r.length;var s=$t(r);if(s==He||s==bt)return!r.size;if(Us(r))return!zc(r).length;for(var c in r)if(tt.call(r,c))return!1;return!0}function fx(r,s){return js(r,s)}function hx(r,s,c){c=typeof c=="function"?c:n;var p=c?c(r,s):n;return p===n?js(r,s,n,c):!!p}function dl(r){if(!mt(r))return!1;var s=jt(r);return s==nt||s==we||typeof r.message=="string"&&typeof r.name=="string"&&!Zs(r)}function px(r){return typeof r=="number"&&$f(r)}function mr(r){if(!ht(r))return!1;var s=jt(r);return s==Je||s==Le||s==fe||s==_t}function ip(r){return typeof r=="number"&&r==ke(r)}function Ra(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=ee}function ht(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}function mt(r){return r!=null&&typeof r=="object"}var sp=_f?cn(_f):vv;function gx(r,s){return r===s||$c(r,s,tl(s))}function mx(r,s,c){return c=typeof c=="function"?c:n,$c(r,s,tl(s),c)}function yx(r){return op(r)&&r!=+r}function vx(r){if(t_(r))throw new Fe(a);return Kf(r)}function _x(r){return r===null}function Dx(r){return r==null}function op(r){return typeof r=="number"||mt(r)&&jt(r)==Qe}function Zs(r){if(!mt(r)||jt(r)!=Be)return!1;var s=aa(r);if(s===null)return!0;var c=tt.call(s,"constructor")&&s.constructor;return typeof c=="function"&&c instanceof c&&ra.call(c)==m1}var fl=Df?cn(Df):_v;function xx(r){return ip(r)&&r>=-ee&&r<=ee}var ap=xf?cn(xf):Dv;function Ma(r){return typeof r=="string"||!Ne(r)&&mt(r)&&jt(r)==_n}function dn(r){return typeof r=="symbol"||mt(r)&&jt(r)==Tn}var Gi=wf?cn(wf):xv;function wx(r){return r===n}function Cx(r){return mt(r)&&$t(r)==Dn}function Ex(r){return mt(r)&&jt(r)==ar}var bx=ba(Lc),Ax=ba(function(r,s){return r<=s});function up(r){if(!r)return[];if(Jt(r))return Ma(r)?Mn(r):Kt(r);if(Bs&&r[Bs])return i1(r[Bs]());var s=$t(r),c=s==He?Sc:s==bt?ea:Zi;return c(r)}function yr(r){if(!r)return r===0?r:0;if(r=Fn(r),r===Z||r===-Z){var s=r<0?-1:1;return s*H}return r===r?r:0}function ke(r){var s=yr(r),c=s%1;return s===s?c?s-c:s:0}function cp(r){return r?ai(ke(r),0,re):0}function Fn(r){if(typeof r=="number")return r;if(dn(r))return ne;if(ht(r)){var s=typeof r.valueOf=="function"?r.valueOf():r;r=ht(s)?s+"":s}if(typeof r!="string")return r===0?r:+r;r=Ff(r);var c=tc.test(r);return c||rc.test(r)?jy(r.slice(2),c?2:8):ec.test(r)?ne:+r}function lp(r){return Qn(r,Qt(r))}function Sx(r){return r?ai(ke(r),-ee,ee):r===0?r:0}function et(r){return r==null?"":ln(r)}var Fx=Hi(function(r,s){if(Us(s)||Jt(s)){Qn(s,Ft(s),r);return}for(var c in s)tt.call(s,c)&&$s(r,c,s[c])}),dp=Hi(function(r,s){Qn(s,Qt(s),r)}),Oa=Hi(function(r,s,c,p){Qn(s,Qt(s),r,p)}),Nx=Hi(function(r,s,c,p){Qn(s,Ft(s),r,p)}),Tx=pr(Bc);function Ix(r,s){var c=ji(r);return s==null?c:Vf(c,s)}var kx=$e(function(r,s){r=rt(r);var c=-1,p=s.length,y=p>2?s[2]:n;for(y&&Ht(s[0],s[1],y)&&(p=1);++c<p;)for(var E=s[c],T=Qt(E),k=-1,L=T.length;++k<L;){var J=T[k],Q=r[J];(Q===n||Pn(Q,$i[J])&&!tt.call(r,J))&&(r[J]=E[J])}return r}),Bx=$e(function(r){return r.push(n,Fh),un(fp,n,r)});function Rx(r,s){return Ef(r,Ce(s,3),Jn)}function Mx(r,s){return Ef(r,Ce(s,3),Mc)}function Ox(r,s){return r==null?r:Rc(r,Ce(s,3),Qt)}function Px(r,s){return r==null?r:qf(r,Ce(s,3),Qt)}function $x(r,s){return r&&Jn(r,Ce(s,3))}function zx(r,s){return r&&Mc(r,Ce(s,3))}function Lx(r){return r==null?[]:ya(r,Ft(r))}function jx(r){return r==null?[]:ya(r,Qt(r))}function hl(r,s,c){var p=r==null?n:ui(r,s);return p===n?c:p}function Hx(r,s){return r!=null&&Ih(r,s,dv)}function pl(r,s){return r!=null&&Ih(r,s,fv)}var Vx=Ch(function(r,s,c){s!=null&&typeof s.toString!="function"&&(s=ia.call(s)),r[s]=c},ml(en)),Ux=Ch(function(r,s,c){s!=null&&typeof s.toString!="function"&&(s=ia.call(s)),tt.call(r,s)?r[s].push(c):r[s]=[c]},Ce),Gx=$e(Ls);function Ft(r){return Jt(r)?jf(r):zc(r)}function Qt(r){return Jt(r)?jf(r,!0):wv(r)}function Zx(r,s){var c={};return s=Ce(s,3),Jn(r,function(p,y,E){fr(c,s(p,y,E),p)}),c}function Wx(r,s){var c={};return s=Ce(s,3),Jn(r,function(p,y,E){fr(c,y,s(p,y,E))}),c}var qx=Hi(function(r,s,c){va(r,s,c)}),fp=Hi(function(r,s,c,p){va(r,s,c,p)}),Xx=pr(function(r,s){var c={};if(r==null)return c;var p=!1;s=lt(s,function(E){return E=Pr(E,r),p||(p=E.length>1),E}),Qn(r,Qc(r),c),p&&(c=bn(c,g|m|D,Vv));for(var y=s.length;y--;)Gc(c,s[y]);return c});function Yx(r,s){return hp(r,Ba(Ce(s)))}var Kx=pr(function(r,s){return r==null?{}:Ev(r,s)});function hp(r,s){if(r==null)return{};var c=lt(Qc(r),function(p){return[p]});return s=Ce(s),ih(r,c,function(p,y){return s(p,y[0])})}function Jx(r,s,c){s=Pr(s,r);var p=-1,y=s.length;for(y||(y=1,r=n);++p<y;){var E=r==null?n:r[er(s[p])];E===n&&(p=y,E=c),r=mr(E)?E.call(r):E}return r}function Qx(r,s,c){return r==null?r:Hs(r,s,c)}function ew(r,s,c,p){return p=typeof p=="function"?p:n,r==null?r:Hs(r,s,c,p)}var pp=Ah(Ft),gp=Ah(Qt);function tw(r,s,c){var p=Ne(r),y=p||zr(r)||Gi(r);if(s=Ce(s,4),c==null){var E=r&&r.constructor;y?c=p?new E:[]:ht(r)?c=mr(E)?ji(aa(r)):{}:c={}}return(y?wn:Jn)(r,function(T,k,L){return s(c,T,k,L)}),c}function nw(r,s){return r==null?!0:Gc(r,s)}function rw(r,s,c){return r==null?r:ch(r,s,qc(c))}function iw(r,s,c,p){return p=typeof p=="function"?p:n,r==null?r:ch(r,s,qc(c),p)}function Zi(r){return r==null?[]:Ac(r,Ft(r))}function sw(r){return r==null?[]:Ac(r,Qt(r))}function ow(r,s,c){return c===n&&(c=s,s=n),c!==n&&(c=Fn(c),c=c===c?c:0),s!==n&&(s=Fn(s),s=s===s?s:0),ai(Fn(r),s,c)}function aw(r,s,c){return s=yr(s),c===n?(c=s,s=0):c=yr(c),r=Fn(r),hv(r,s,c)}function uw(r,s,c){if(c&&typeof c!="boolean"&&Ht(r,s,c)&&(s=c=n),c===n&&(typeof s=="boolean"?(c=s,s=n):typeof r=="boolean"&&(c=r,r=n)),r===n&&s===n?(r=0,s=1):(r=yr(r),s===n?(s=r,r=0):s=yr(s)),r>s){var p=r;r=s,s=p}if(c||r%1||s%1){var y=zf();return Pt(r+y*(s-r+Ly("1e-"+((y+"").length-1))),s)}return Hc(r,s)}var cw=Vi(function(r,s,c){return s=s.toLowerCase(),r+(c?mp(s):s)});function mp(r){return gl(et(r).toLowerCase())}function yp(r){return r=et(r),r&&r.replace(sc,Qy).replace(Ty,"")}function lw(r,s,c){r=et(r),s=ln(s);var p=r.length;c=c===n?p:ai(ke(c),0,p);var y=c;return c-=s.length,c>=0&&r.slice(c,y)==s}function dw(r){return r=et(r),r&&Lu.test(r)?r.replace(Ss,e1):r}function fw(r){return r=et(r),r&&Zu.test(r)?r.replace(Fs,"\\$&"):r}var hw=Vi(function(r,s,c){return r+(c?"-":"")+s.toLowerCase()}),pw=Vi(function(r,s,c){return r+(c?" ":"")+s.toLowerCase()}),gw=Dh("toLowerCase");function mw(r,s,c){r=et(r),s=ke(s);var p=s?Oi(r):0;if(!s||p>=s)return r;var y=(s-p)/2;return Ea(da(y),c)+r+Ea(la(y),c)}function yw(r,s,c){r=et(r),s=ke(s);var p=s?Oi(r):0;return s&&p<s?r+Ea(s-p,c):r}function vw(r,s,c){r=et(r),s=ke(s);var p=s?Oi(r):0;return s&&p<s?Ea(s-p,c)+r:r}function _w(r,s,c){return c||s==null?s=0:s&&(s=+s),A1(et(r).replace(Ns,""),s||0)}function Dw(r,s,c){return(c?Ht(r,s,c):s===n)?s=1:s=ke(s),Vc(et(r),s)}function xw(){var r=arguments,s=et(r[0]);return r.length<3?s:s.replace(r[1],r[2])}var ww=Vi(function(r,s,c){return r+(c?"_":"")+s.toLowerCase()});function Cw(r,s,c){return c&&typeof c!="number"&&Ht(r,s,c)&&(s=c=n),c=c===n?re:c>>>0,c?(r=et(r),r&&(typeof s=="string"||s!=null&&!fl(s))&&(s=ln(s),!s&&Mi(r))?$r(Mn(r),0,c):r.split(s,c)):[]}var Ew=Vi(function(r,s,c){return r+(c?" ":"")+gl(s)});function bw(r,s,c){return r=et(r),c=c==null?0:ai(ke(c),0,r.length),s=ln(s),r.slice(c,c+s.length)==s}function Aw(r,s,c){var p=C.templateSettings;c&&Ht(r,s,c)&&(s=n),r=et(r),s=Oa({},s,p,Sh);var y=Oa({},s.imports,p.imports,Sh),E=Ft(y),T=Ac(y,E),k,L,J=0,Q=s.interpolate||ni,se="__p += '",he=Fc((s.escape||ni).source+"|"+Q.source+"|"+(Q===Zo?Qu:ni).source+"|"+(s.evaluate||ni).source+"|$","g"),_e="//# sourceURL="+(tt.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++My+"]")+`
`;r.replace(he,function(be,je,Ze,fn,Vt,hn){return Ze||(Ze=fn),se+=r.slice(J,hn).replace(oc,t1),je&&(k=!0,se+=`' +
__e(`+je+`) +
'`),Vt&&(L=!0,se+=`';
`+Vt+`;
__p += '`),Ze&&(se+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),J=hn+be.length,be}),se+=`';
`;var Ee=tt.call(s,"variable")&&s.variable;if(!Ee)se=`with (obj) {
`+se+`
}
`;else if(Ju.test(Ee))throw new Fe(l);se=(L?se.replace(bs,""):se).replace(As,"$1").replace(ti,"$1;"),se="function("+(Ee||"obj")+`) {
`+(Ee?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+se+`return __p
}`;var Re=_p(function(){return Ke(E,_e+"return "+se).apply(n,T)});if(Re.source=se,dl(Re))throw Re;return Re}function Sw(r){return et(r).toLowerCase()}function Fw(r){return et(r).toUpperCase()}function Nw(r,s,c){if(r=et(r),r&&(c||s===n))return Ff(r);if(!r||!(s=ln(s)))return r;var p=Mn(r),y=Mn(s),E=Nf(p,y),T=Tf(p,y)+1;return $r(p,E,T).join("")}function Tw(r,s,c){if(r=et(r),r&&(c||s===n))return r.slice(0,kf(r)+1);if(!r||!(s=ln(s)))return r;var p=Mn(r),y=Tf(p,Mn(s))+1;return $r(p,0,y).join("")}function Iw(r,s,c){if(r=et(r),r&&(c||s===n))return r.replace(Ns,"");if(!r||!(s=ln(s)))return r;var p=Mn(r),y=Nf(p,Mn(s));return $r(p,y).join("")}function kw(r,s){var c=U,p=K;if(ht(s)){var y="separator"in s?s.separator:y;c="length"in s?ke(s.length):c,p="omission"in s?ln(s.omission):p}r=et(r);var E=r.length;if(Mi(r)){var T=Mn(r);E=T.length}if(c>=E)return r;var k=c-Oi(p);if(k<1)return p;var L=T?$r(T,0,k).join(""):r.slice(0,k);if(y===n)return L+p;if(T&&(k+=L.length-k),fl(y)){if(r.slice(k).search(y)){var J,Q=L;for(y.global||(y=Fc(y.source,et(qo.exec(y))+"g")),y.lastIndex=0;J=y.exec(Q);)var se=J.index;L=L.slice(0,se===n?k:se)}}else if(r.indexOf(ln(y),k)!=k){var he=L.lastIndexOf(y);he>-1&&(L=L.slice(0,he))}return L+p}function Bw(r){return r=et(r),r&&cr.test(r)?r.replace(Ii,u1):r}var Rw=Vi(function(r,s,c){return r+(c?" ":"")+s.toUpperCase()}),gl=Dh("toUpperCase");function vp(r,s,c){return r=et(r),s=c?n:s,s===n?r1(r)?d1(r):qy(r):r.match(s)||[]}var _p=$e(function(r,s){try{return un(r,n,s)}catch(c){return dl(c)?c:new Fe(c)}}),Mw=pr(function(r,s){return wn(s,function(c){c=er(c),fr(r,c,cl(r[c],r))}),r});function Ow(r){var s=r==null?0:r.length,c=Ce();return r=s?lt(r,function(p){if(typeof p[1]!="function")throw new Cn(u);return[c(p[0]),p[1]]}):[],$e(function(p){for(var y=-1;++y<s;){var E=r[y];if(un(E[0],this,p))return un(E[1],this,p)}})}function Pw(r){return uv(bn(r,g))}function ml(r){return function(){return r}}function $w(r,s){return r==null||r!==r?s:r}var zw=wh(),Lw=wh(!0);function en(r){return r}function yl(r){return Jf(typeof r=="function"?r:bn(r,g))}function jw(r){return eh(bn(r,g))}function Hw(r,s){return th(r,bn(s,g))}var Vw=$e(function(r,s){return function(c){return Ls(c,r,s)}}),Uw=$e(function(r,s){return function(c){return Ls(r,c,s)}});function vl(r,s,c){var p=Ft(s),y=ya(s,p);c==null&&!(ht(s)&&(y.length||!p.length))&&(c=s,s=r,r=this,y=ya(s,Ft(s)));var E=!(ht(c)&&"chain"in c)||!!c.chain,T=mr(r);return wn(y,function(k){var L=s[k];r[k]=L,T&&(r.prototype[k]=function(){var J=this.__chain__;if(E||J){var Q=r(this.__wrapped__),se=Q.__actions__=Kt(this.__actions__);return se.push({func:L,args:arguments,thisArg:r}),Q.__chain__=J,Q}return L.apply(r,kr([this.value()],arguments))})}),r}function Gw(){return Bt._===this&&(Bt._=y1),this}function _l(){}function Zw(r){return r=ke(r),$e(function(s){return nh(s,r)})}var Ww=Yc(lt),qw=Yc(Cf),Xw=Yc(xc);function Dp(r){return rl(r)?wc(er(r)):bv(r)}function Yw(r){return function(s){return r==null?n:ui(r,s)}}var Kw=Eh(),Jw=Eh(!0);function Dl(){return[]}function xl(){return!1}function Qw(){return{}}function eC(){return""}function tC(){return!0}function nC(r,s){if(r=ke(r),r<1||r>ee)return[];var c=re,p=Pt(r,re);s=Ce(s),r-=re;for(var y=bc(p,s);++c<r;)s(c);return y}function rC(r){return Ne(r)?lt(r,er):dn(r)?[r]:Kt(Lh(et(r)))}function iC(r){var s=++g1;return et(r)+s}var sC=Ca(function(r,s){return r+s},0),oC=Kc("ceil"),aC=Ca(function(r,s){return r/s},1),uC=Kc("floor");function cC(r){return r&&r.length?ma(r,en,Oc):n}function lC(r,s){return r&&r.length?ma(r,Ce(s,2),Oc):n}function dC(r){return Af(r,en)}function fC(r,s){return Af(r,Ce(s,2))}function hC(r){return r&&r.length?ma(r,en,Lc):n}function pC(r,s){return r&&r.length?ma(r,Ce(s,2),Lc):n}var gC=Ca(function(r,s){return r*s},1),mC=Kc("round"),yC=Ca(function(r,s){return r-s},0);function vC(r){return r&&r.length?Ec(r,en):0}function _C(r,s){return r&&r.length?Ec(r,Ce(s,2)):0}return C.after=jD,C.ary=Kh,C.assign=Fx,C.assignIn=dp,C.assignInWith=Oa,C.assignWith=Nx,C.at=Tx,C.before=Jh,C.bind=cl,C.bindAll=Mw,C.bindKey=Qh,C.castArray=QD,C.chain=qh,C.chunk=u_,C.compact=c_,C.concat=l_,C.cond=Ow,C.conforms=Pw,C.constant=ml,C.countBy=vD,C.create=Ix,C.curry=ep,C.curryRight=tp,C.debounce=np,C.defaults=kx,C.defaultsDeep=Bx,C.defer=HD,C.delay=VD,C.difference=d_,C.differenceBy=f_,C.differenceWith=h_,C.drop=p_,C.dropRight=g_,C.dropRightWhile=m_,C.dropWhile=y_,C.fill=v_,C.filter=DD,C.flatMap=CD,C.flatMapDeep=ED,C.flatMapDepth=bD,C.flatten=Uh,C.flattenDeep=__,C.flattenDepth=D_,C.flip=UD,C.flow=zw,C.flowRight=Lw,C.fromPairs=x_,C.functions=Lx,C.functionsIn=jx,C.groupBy=AD,C.initial=C_,C.intersection=E_,C.intersectionBy=b_,C.intersectionWith=A_,C.invert=Vx,C.invertBy=Ux,C.invokeMap=FD,C.iteratee=yl,C.keyBy=ND,C.keys=Ft,C.keysIn=Qt,C.map=Ta,C.mapKeys=Zx,C.mapValues=Wx,C.matches=jw,C.matchesProperty=Hw,C.memoize=ka,C.merge=qx,C.mergeWith=fp,C.method=Vw,C.methodOf=Uw,C.mixin=vl,C.negate=Ba,C.nthArg=Zw,C.omit=Xx,C.omitBy=Yx,C.once=GD,C.orderBy=TD,C.over=Ww,C.overArgs=ZD,C.overEvery=qw,C.overSome=Xw,C.partial=ll,C.partialRight=rp,C.partition=ID,C.pick=Kx,C.pickBy=hp,C.property=Dp,C.propertyOf=Yw,C.pull=T_,C.pullAll=Zh,C.pullAllBy=I_,C.pullAllWith=k_,C.pullAt=B_,C.range=Kw,C.rangeRight=Jw,C.rearg=WD,C.reject=RD,C.remove=R_,C.rest=qD,C.reverse=al,C.sampleSize=OD,C.set=Qx,C.setWith=ew,C.shuffle=PD,C.slice=M_,C.sortBy=LD,C.sortedUniq=H_,C.sortedUniqBy=V_,C.split=Cw,C.spread=XD,C.tail=U_,C.take=G_,C.takeRight=Z_,C.takeRightWhile=W_,C.takeWhile=q_,C.tap=cD,C.throttle=YD,C.thru=Na,C.toArray=up,C.toPairs=pp,C.toPairsIn=gp,C.toPath=rC,C.toPlainObject=lp,C.transform=tw,C.unary=KD,C.union=X_,C.unionBy=Y_,C.unionWith=K_,C.uniq=J_,C.uniqBy=Q_,C.uniqWith=eD,C.unset=nw,C.unzip=ul,C.unzipWith=Wh,C.update=rw,C.updateWith=iw,C.values=Zi,C.valuesIn=sw,C.without=tD,C.words=vp,C.wrap=JD,C.xor=nD,C.xorBy=rD,C.xorWith=iD,C.zip=sD,C.zipObject=oD,C.zipObjectDeep=aD,C.zipWith=uD,C.entries=pp,C.entriesIn=gp,C.extend=dp,C.extendWith=Oa,vl(C,C),C.add=sC,C.attempt=_p,C.camelCase=cw,C.capitalize=mp,C.ceil=oC,C.clamp=ow,C.clone=ex,C.cloneDeep=nx,C.cloneDeepWith=rx,C.cloneWith=tx,C.conformsTo=ix,C.deburr=yp,C.defaultTo=$w,C.divide=aC,C.endsWith=lw,C.eq=Pn,C.escape=dw,C.escapeRegExp=fw,C.every=_D,C.find=xD,C.findIndex=Hh,C.findKey=Rx,C.findLast=wD,C.findLastIndex=Vh,C.findLastKey=Mx,C.floor=uC,C.forEach=Xh,C.forEachRight=Yh,C.forIn=Ox,C.forInRight=Px,C.forOwn=$x,C.forOwnRight=zx,C.get=hl,C.gt=sx,C.gte=ox,C.has=Hx,C.hasIn=pl,C.head=Gh,C.identity=en,C.includes=SD,C.indexOf=w_,C.inRange=aw,C.invoke=Gx,C.isArguments=di,C.isArray=Ne,C.isArrayBuffer=ax,C.isArrayLike=Jt,C.isArrayLikeObject=Dt,C.isBoolean=ux,C.isBuffer=zr,C.isDate=cx,C.isElement=lx,C.isEmpty=dx,C.isEqual=fx,C.isEqualWith=hx,C.isError=dl,C.isFinite=px,C.isFunction=mr,C.isInteger=ip,C.isLength=Ra,C.isMap=sp,C.isMatch=gx,C.isMatchWith=mx,C.isNaN=yx,C.isNative=vx,C.isNil=Dx,C.isNull=_x,C.isNumber=op,C.isObject=ht,C.isObjectLike=mt,C.isPlainObject=Zs,C.isRegExp=fl,C.isSafeInteger=xx,C.isSet=ap,C.isString=Ma,C.isSymbol=dn,C.isTypedArray=Gi,C.isUndefined=wx,C.isWeakMap=Cx,C.isWeakSet=Ex,C.join=S_,C.kebabCase=hw,C.last=Sn,C.lastIndexOf=F_,C.lowerCase=pw,C.lowerFirst=gw,C.lt=bx,C.lte=Ax,C.max=cC,C.maxBy=lC,C.mean=dC,C.meanBy=fC,C.min=hC,C.minBy=pC,C.stubArray=Dl,C.stubFalse=xl,C.stubObject=Qw,C.stubString=eC,C.stubTrue=tC,C.multiply=gC,C.nth=N_,C.noConflict=Gw,C.noop=_l,C.now=Ia,C.pad=mw,C.padEnd=yw,C.padStart=vw,C.parseInt=_w,C.random=uw,C.reduce=kD,C.reduceRight=BD,C.repeat=Dw,C.replace=xw,C.result=Jx,C.round=mC,C.runInContext=R,C.sample=MD,C.size=$D,C.snakeCase=ww,C.some=zD,C.sortedIndex=O_,C.sortedIndexBy=P_,C.sortedIndexOf=$_,C.sortedLastIndex=z_,C.sortedLastIndexBy=L_,C.sortedLastIndexOf=j_,C.startCase=Ew,C.startsWith=bw,C.subtract=yC,C.sum=vC,C.sumBy=_C,C.template=Aw,C.times=nC,C.toFinite=yr,C.toInteger=ke,C.toLength=cp,C.toLower=Sw,C.toNumber=Fn,C.toSafeInteger=Sx,C.toString=et,C.toUpper=Fw,C.trim=Nw,C.trimEnd=Tw,C.trimStart=Iw,C.truncate=kw,C.unescape=Bw,C.uniqueId=iC,C.upperCase=Rw,C.upperFirst=gl,C.each=Xh,C.eachRight=Yh,C.first=Gh,vl(C,function(){var r={};return Jn(C,function(s,c){tt.call(C.prototype,c)||(r[c]=s)}),r}(),{chain:!1}),C.VERSION=i,wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){C[r].placeholder=C}),wn(["drop","take"],function(r,s){Ve.prototype[r]=function(c){c=c===n?1:St(ke(c),0);var p=this.__filtered__&&!s?new Ve(this):this.clone();return p.__filtered__?p.__takeCount__=Pt(c,p.__takeCount__):p.__views__.push({size:Pt(c,re),type:r+(p.__dir__<0?"Right":"")}),p},Ve.prototype[r+"Right"]=function(c){return this.reverse()[r](c).reverse()}}),wn(["filter","map","takeWhile"],function(r,s){var c=s+1,p=c==b||c==O;Ve.prototype[r]=function(y){var E=this.clone();return E.__iteratees__.push({iteratee:Ce(y,3),type:c}),E.__filtered__=E.__filtered__||p,E}}),wn(["head","last"],function(r,s){var c="take"+(s?"Right":"");Ve.prototype[r]=function(){return this[c](1).value()[0]}}),wn(["initial","tail"],function(r,s){var c="drop"+(s?"":"Right");Ve.prototype[r]=function(){return this.__filtered__?new Ve(this):this[c](1)}}),Ve.prototype.compact=function(){return this.filter(en)},Ve.prototype.find=function(r){return this.filter(r).head()},Ve.prototype.findLast=function(r){return this.reverse().find(r)},Ve.prototype.invokeMap=$e(function(r,s){return typeof r=="function"?new Ve(this):this.map(function(c){return Ls(c,r,s)})}),Ve.prototype.reject=function(r){return this.filter(Ba(Ce(r)))},Ve.prototype.slice=function(r,s){r=ke(r);var c=this;return c.__filtered__&&(r>0||s<0)?new Ve(c):(r<0?c=c.takeRight(-r):r&&(c=c.drop(r)),s!==n&&(s=ke(s),c=s<0?c.dropRight(-s):c.take(s-r)),c)},Ve.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Ve.prototype.toArray=function(){return this.take(re)},Jn(Ve.prototype,function(r,s){var c=/^(?:filter|find|map|reject)|While$/.test(s),p=/^(?:head|last)$/.test(s),y=C[p?"take"+(s=="last"?"Right":""):s],E=p||/^find/.test(s);y&&(C.prototype[s]=function(){var T=this.__wrapped__,k=p?[1]:arguments,L=T instanceof Ve,J=k[0],Q=L||Ne(T),se=function(je){var Ze=y.apply(C,kr([je],k));return p&&he?Ze[0]:Ze};Q&&c&&typeof J=="function"&&J.length!=1&&(L=Q=!1);var he=this.__chain__,_e=!!this.__actions__.length,Ee=E&&!he,Re=L&&!_e;if(!E&&Q){T=Re?T:new Ve(this);var be=r.apply(T,k);return be.__actions__.push({func:Na,args:[se],thisArg:n}),new En(be,he)}return Ee&&Re?r.apply(this,k):(be=this.thru(se),Ee?p?be.value()[0]:be.value():be)})}),wn(["pop","push","shift","sort","splice","unshift"],function(r){var s=ta[r],c=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",p=/^(?:pop|shift)$/.test(r);C.prototype[r]=function(){var y=arguments;if(p&&!this.__chain__){var E=this.value();return s.apply(Ne(E)?E:[],y)}return this[c](function(T){return s.apply(Ne(T)?T:[],y)})}}),Jn(Ve.prototype,function(r,s){var c=C[s];if(c){var p=c.name+"";tt.call(Li,p)||(Li[p]=[]),Li[p].push({name:s,func:c})}}),Li[wa(n,_).name]=[{name:"wrapper",func:n}],Ve.prototype.clone=B1,Ve.prototype.reverse=R1,Ve.prototype.value=M1,C.prototype.at=lD,C.prototype.chain=dD,C.prototype.commit=fD,C.prototype.next=hD,C.prototype.plant=gD,C.prototype.reverse=mD,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=yD,C.prototype.first=C.prototype.head,Bs&&(C.prototype[Bs]=pD),C},Pi=f1();ri?((ri.exports=Pi)._=Pi,yc._=Pi):Bt._=Pi}).call(Ws)})(gu,gu.exports);var P6=gu.exports;const Et=DC(P6),$6=navigator.platform.includes("Mac"),p0={Ctrl:"⌘",Backspace:"⌫",Alt:"⌥"},eu={shortcut:e=>$6?Object.keys(p0).reduce((t,n)=>t.replaceAll(n,p0[n]),e):e},g0={},m0=(e,t)=>{const[n,i]=S.useState(()=>g0?.[e]??t);return S.useEffect(()=>{g0[e]=n},[n]),[n,i]};function y0(e,t=0){const n=performance.now(),i={};function o(){i.id=requestAnimationFrame(a=>{a-n>t?e():o()})}return o(),i}function v0(e){e.id&&cancelAnimationFrame(e.id)}function z6(e,t){const[n,i]=S.useState(e?"enter":"from"),o=S.useRef({}),[a,u]=S.useState(e);return S.useEffect(function(){return v0(o.current),e?(i("from"),u(!0),y0(()=>{i("enter")})):(i("leave"),o.current=y0(()=>{u(!1)},t)),()=>{v0(o.current)}},[e,t]),{stage:n,shouldMount:a}}function L6({state:e,timeout:t,children:n}){const{stage:i,shouldMount:o}=z6(e,t);return n(i,o)}const sd=({className:e,...t})=>F.jsx("div",{className:Xe("grl-dn__graphCard",e),...t});sd.__docgenInfo={description:"",methods:[],displayName:"GraphCard"};var Ti=(e=>(e.Blue="var(--node-color-blue)",e.Purple="var(--node-color-purple)",e.Orange="var(--node-color-orange)",e.Green="var(--node-color-green)",e))(Ti||{});const Ud=({icon:e,name:t,children:n,actions:i=[],disabled:o=!1,isSelected:a=!1,noBodyPadding:u=!1,color:l="primary",onNameChange:d,menuItems:f=[],status:h,diffStatus:g,compactMode:m,listMode:D,helper:x,details:v,detailsOpen:w=!1,detailsTitle:_="Details",onDetailsClose:A})=>{const[I,N]=S.useState(!1),$=S.useRef(null);S.useEffect(()=>{$.current&&I&&($.current.value=t,$.current.focus(),$.current.select())},[I]);const z=Ge(l).with("primary",()=>Ti.Blue).otherwise(M=>M);return F.jsxs("div",{className:Xe("grl-dn",m&&"grl-dn--compact",D&&"grl-dn--list",!g&&a&&"grl-dn--selected",h&&`grl-dn--${h}`,g&&`grl-dn--diff-${g}`),style:{"--node-color":z},onKeyDown:M=>M.stopPropagation(),children:[F.jsxs(sd,{children:[F.jsxs("div",{className:"grl-dn__status-bar",children:[Array.isArray(x)&&x.filter(M=>!!M).map((M,X)=>F.jsx("div",{className:Xe("grl-dn__status-icon"),children:M},X)),h==="error"&&F.jsx("div",{className:Xe("grl-dn__status-icon",`grl-dn__status-icon--${h}`),children:F.jsx(po,{})}),F.jsx(z0,{status:g,style:{fontSize:16}})]}),F.jsxs("div",{className:Xe("grl-dn__header",m&&"compact"),children:[F.jsx("div",{className:Xe("grl-dn__header__icon",m&&"compact"),children:e}),F.jsxs("div",{className:"grl-dn__header__text",children:[!I&&F.jsx(Tt.Text,{className:Xe("grl-dn__header__text__name"),onClick:()=>{o||N(!0)},children:t}),I&&F.jsx("input",{ref:$,className:Xe("grl-dn__header__text__name-input","nodrag"),onBlur:M=>{M.target.value?.trim?.()?.length>0&&d?.($?.current?.value),M.preventDefault(),N(!1)},onKeyDown:M=>{M.key==="Enter"?(M.currentTarget.blur(),M.preventDefault()):M.key==="Escape"&&($.current&&($.current.value=t),N(!1),M.preventDefault())}})]}),f.length>0&&F.jsx("div",{className:Xe("grl-dn__header__actions","nodrag"),children:F.jsx(go,{trigger:["click"],overlayStyle:{minWidth:250},menu:{items:f},children:F.jsx(dt,{type:"text",size:"small",icon:F.jsx(JC,{})})})})]}),n&&F.jsx("div",{className:Xe("grl-dn__body",i.length===0&&"grl-dn__body--no-footer",u&&"grl-dn__body--no-padding"),children:n}),i.length>0&&F.jsx("div",{className:Xe("grl-dn__footer","nodrag"),children:F.jsx("div",{className:"grl-dn__footer__actions",children:i})})]}),F.jsx(L6,{state:w,timeout:100,children:(M,X)=>X&&F.jsx(sd,{className:"nodrag",style:{transition:"0.1s ease-in-out",transform:M==="enter"?"translateY(0)":"translateY(-10px)",opacity:M==="enter"?1:0},children:F.jsxs("div",{className:"grl-dn__details",children:[F.jsxs("div",{className:"grl-dn__details__header",children:[F.jsx(Tt.Text,{className:"grl-dn__details__header__text",children:_}),F.jsx(dt,{type:"text",size:"small",className:"grl-dn__details__header__close",icon:F.jsx(po,{style:{fontSize:8}}),onClick:A})]}),F.jsx("div",{className:"grl-dn__details__body",children:v})]})})})]})};Ud.__docgenInfo={description:"",methods:[],displayName:"DecisionNode",props:{name:{required:!1,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},type:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},helper:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(React.ReactNode | false)[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:"",defaultValue:{value:"[]",computed:!1}},status:{required:!1,tsType:{name:"union",raw:"'error' | 'success' | 'warning'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'success'"},{name:"literal",value:"'warning'"}]},description:""},diffStatus:{required:!1,tsType:{name:"union",raw:"'removed' | 'added' | 'modified' | 'moved'",elements:[{name:"literal",value:"'removed'"},{name:"literal",value:"'added'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'moved'"}]},description:""},noBodyPadding:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | string",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"string"}]},description:"",defaultValue:{value:"'primary'",computed:!1}},menuItems:{required:!1,tsType:{name:"MenuProps['items']",raw:"MenuProps['items']"},description:"",defaultValue:{value:"[]",computed:!1}},onNameChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},compactMode:{required:!1,tsType:{name:"boolean"},description:""},listMode:{required:!1,tsType:{name:"boolean"},description:""},details:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},detailsOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},detailsTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Details'",computed:!1}},onDetailsClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ei=j.forwardRef(({id:e,handleLeft:t=!0,handleRight:n=!0,className:i,specification:o,name:a,displayError:u,helper:l,actions:d,...f},h)=>{const[g,m]=m0(`node:details:${e}`,0),[D,x]=m0(`node:detailsOpen:${e}`,!1),v=It(),{nodeError:w,nodeTrace:_,disabled:A,compactMode:I}=ct(({simulate:M,disabled:X,compactMode:B})=>({disabled:X,nodeTrace:Ge(M).with({result:qe._},({result:U})=>U?.trace?.[e]).otherwise(()=>null),nodeError:Ge(M).with({error:{data:{nodeId:e}}},({error:U})=>U).otherwise(()=>null),compactMode:B})),{diff:N}=$u(e),$=o.renderSettings,z=[o.documentationUrl?{key:"documentation",label:F.jsx(to,{left:"Documentation",right:F.jsx(ng,{})}),onClick:()=>window.open(o.documentationUrl,"_href")}:null,o.documentationUrl?{key:"divider-1",type:"divider"}:null,!u&&{key:"copy-clipboard",label:F.jsx(to,{left:"Copy to clipboard",right:eu.shortcut("Ctrl + C")}),onClick:()=>{}},!u&&{key:"duplicate",disabled:A,label:F.jsx(to,{left:"Duplicate",right:eu.shortcut("Ctrl + D")}),onClick:()=>v.duplicateNodes([e])},!u&&{key:"divider-2",type:"divider"},{key:"delete",danger:!0,label:F.jsx(to,{left:"Delete",right:eu.shortcut("Backspace")}),disabled:A,onClick:()=>vd.confirm({icon:null,title:"Delete node",content:F.jsxs(Tt.Text,{children:["Are you sure you want to delete ",F.jsx(Tt.Text,{strong:!0,children:a})," node."]}),okButtonProps:{danger:!0},onOk:()=>v.removeNodes([e])})}].filter(M=>M!==!1);return F.jsxs("div",{className:Xe("grl-graph-node",i),style:{minWidth:220,maxWidth:220},ref:h,onClick:M=>{const X=Ge(navigator.platform.includes("Mac")).with(!0,()=>M.metaKey).otherwise(()=>M.ctrlKey);v.triggerNodeSelect(e,X?"toggle":"only")},children:[t&&F.jsx(Xr,{className:Xe("grl-graph-node__handle-left",I&&"compact"),type:"target",position:De.Left,...typeof t!="boolean"?t:{}}),F.jsx(Ud,{menuItems:z,...f,disabled:A,icon:o.icon,color:o.color,type:o.displayName,helper:l,name:a,details:$?F.jsx($,{id:e}):void 0,detailsOpen:D,detailsTitle:Ge(g).with(0,()=>"Settings").otherwise(()=>{}),onDetailsClose:()=>x(!1),actions:$?[...d??[],F.jsx(dt,{type:"text",style:{marginLeft:"auto"},onClick:()=>{x(g===0?!D:!0),m(0)},children:"Settings"},"settings")]:d,status:Ge([_,w,u]).with([qe._,qe._,!0],()=>"error").with([qe.not(qe.nullish),qe._,qe._],()=>"success").with([qe._,qe.not(qe.nullish),qe._],()=>"error").otherwise(()=>{}),diffStatus:Ge([N]).with([{status:"added"}],()=>"added").with([{status:"modified"}],()=>"modified").with([{status:"removed"}],()=>"removed").with([{status:"moved"}],()=>"moved").otherwise(()=>{}),onNameChange:M=>{v.updateNode(e,X=>(X.name=M,X))},compactMode:I}),n&&F.jsx(Xr,{className:Xe("grl-graph-node__handle-right",I&&"compact"),type:"source",position:De.Right,...typeof n!="boolean"?n:{}})]})});ei.__docgenInfo={description:"",methods:[],displayName:"GraphNode",props:{handleLeft:{defaultValue:{value:"true",computed:!1},required:!1},handleRight:{defaultValue:{value:"true",computed:!1},required:!1}}};const{createElement:ys,createContext:j6,createRef:wN,forwardRef:Sm,useCallback:tn,useContext:Fm,useEffect:xi,useImperativeHandle:Nm,useLayoutEffect:H6,useMemo:V6,useRef:rn,useState:ls}=$0,_0=$0[`useId${Math.random()}`.slice(0,5)],U6=H6,Ru=j6(null);Ru.displayName="PanelGroupContext";const wi=U6,G6=typeof _0=="function"?_0:()=>null;let Z6=0;function Gd(e=null){const t=G6(),n=rn(e||t||null);return n.current===null&&(n.current=""+Z6++),e??n.current}function Tm({children:e,className:t="",collapsedSize:n,collapsible:i,defaultSize:o,forwardedRef:a,id:u,maxSize:l,minSize:d,onCollapse:f,onExpand:h,onResize:g,order:m,style:D,tagName:x="div",...v}){const w=Fm(Ru);if(w===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:_,expandPanel:A,getPanelSize:I,getPanelStyle:N,groupId:$,isPanelCollapsed:z,reevaluatePanelConstraints:M,registerPanel:X,resizePanel:B,unregisterPanel:U}=w,K=Gd(u),q=rn({callbacks:{onCollapse:f,onExpand:h,onResize:g},constraints:{collapsedSize:n,collapsible:i,defaultSize:o,maxSize:l,minSize:d},id:K,idIsFromProps:u!==void 0,order:m});rn({didLogMissingDefaultSizeWarning:!1}),wi(()=>{const{callbacks:b,constraints:P}=q.current,O={...P};q.current.id=K,q.current.idIsFromProps=u!==void 0,q.current.order=m,b.onCollapse=f,b.onExpand=h,b.onResize=g,P.collapsedSize=n,P.collapsible=i,P.defaultSize=o,P.maxSize=l,P.minSize=d,(O.collapsedSize!==P.collapsedSize||O.collapsible!==P.collapsible||O.maxSize!==P.maxSize||O.minSize!==P.minSize)&&M(q.current,O)}),wi(()=>{const b=q.current;return X(b),()=>{U(b)}},[m,K,X,U]),Nm(a,()=>({collapse:()=>{_(q.current)},expand:b=>{A(q.current,b)},getId(){return K},getSize(){return I(q.current)},isCollapsed(){return z(q.current)},isExpanded(){return!z(q.current)},resize:b=>{B(q.current,b)}}),[_,A,I,z,K,B]);const G=N(q.current,o);return ys(x,{...v,children:e,className:t,id:u,style:{...G,...D},"data-panel":"","data-panel-collapsible":i||void 0,"data-panel-group-id":$,"data-panel-id":K,"data-panel-size":parseFloat(""+G.flexGrow).toFixed(1)})}const tu=Sm((e,t)=>ys(Tm,{...e,forwardedRef:t}));Tm.displayName="Panel";tu.displayName="forwardRef(Panel)";let od=null,_i=null;function W6(e,t){if(t){const n=(t&Mm)!==0,i=(t&Om)!==0,o=(t&Pm)!==0,a=(t&$m)!==0;if(n)return o?"se-resize":a?"ne-resize":"e-resize";if(i)return o?"sw-resize":a?"nw-resize":"w-resize";if(o)return"s-resize";if(a)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function q6(){_i!==null&&(document.head.removeChild(_i),od=null,_i=null)}function Rl(e,t){const n=W6(e,t);od!==n&&(od=n,_i===null&&(_i=document.createElement("style"),document.head.appendChild(_i)),_i.innerHTML=`*{cursor: ${n}!important;}`)}function Im(e){return e.type==="keydown"}function km(e){return e.type.startsWith("pointer")}function Bm(e){return e.type.startsWith("mouse")}function Mu(e){if(km(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Bm(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function X6(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Y6(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function K6(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:w0(e),b:w0(t)};let i;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),i=e;Oe(i,"Stacking order can only be calculated for elements with a common ancestor");const o={a:x0(D0(n.a)),b:x0(D0(n.b))};if(o.a===o.b){const a=i.childNodes,u={a:n.a.at(-1),b:n.b.at(-1)};let l=a.length;for(;l--;){const d=a[l];if(d===u.a)return 1;if(d===u.b)return-1}}return Math.sign(o.a-o.b)}const J6=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Q6(e){var t;const n=getComputedStyle((t=Rm(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function e4(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||Q6(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||J6.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function D0(e){let t=e.length;for(;t--;){const n=e[t];if(Oe(n,"Missing node"),e4(n))return n}return null}function x0(e){return e&&Number(getComputedStyle(e).zIndex)||0}function w0(e){const t=[];for(;e;)t.push(e),e=Rm(e);return t}function Rm(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Mm=1,Om=2,Pm=4,$m=8,t4=X6()==="coarse";let Gn=[],ds=!1,Ur=new Map,Ou=new Map;const bo=new Set;function n4(e,t,n,i,o){var a;const{ownerDocument:u}=t,l={direction:n,element:t,hitAreaMargins:i,setResizeHandlerState:o},d=(a=Ur.get(u))!==null&&a!==void 0?a:0;return Ur.set(u,d+1),bo.add(l),mu(),function(){var h;Ou.delete(e),bo.delete(l);const g=(h=Ur.get(u))!==null&&h!==void 0?h:1;if(Ur.set(u,g-1),mu(),g===1&&Ur.delete(u),Gn.includes(l)){const m=Gn.indexOf(l);m>=0&&Gn.splice(m,1),Wd(),o("up",!0,null)}}}function C0(e){const{target:t}=e,{x:n,y:i}=Mu(e);ds=!0,Zd({target:t,x:n,y:i}),mu(),Gn.length>0&&(yu("down",e),e.preventDefault(),e.stopPropagation())}function Qs(e){const{x:t,y:n}=Mu(e);if(ds&&e.buttons===0&&(ds=!1,yu("up",e)),!ds){const{target:i}=e;Zd({target:i,x:t,y:n})}yu("move",e),Wd(),Gn.length>0&&e.preventDefault()}function Ki(e){const{target:t}=e,{x:n,y:i}=Mu(e);Ou.clear(),ds=!1,Gn.length>0&&e.preventDefault(),yu("up",e),Zd({target:t,x:n,y:i}),Wd(),mu()}function Zd({target:e,x:t,y:n}){Gn.splice(0);let i=null;e instanceof HTMLElement&&(i=e),bo.forEach(o=>{const{element:a,hitAreaMargins:u}=o,l=a.getBoundingClientRect(),{bottom:d,left:f,right:h,top:g}=l,m=t4?u.coarse:u.fine;if(t>=f-m&&t<=h+m&&n>=g-m&&n<=d+m){if(i!==null&&document.contains(i)&&a!==i&&!a.contains(i)&&!i.contains(a)&&K6(i,a)>0){let x=i,v=!1;for(;x&&!x.contains(a);){if(Y6(x.getBoundingClientRect(),l)){v=!0;break}x=x.parentElement}if(v)return}Gn.push(o)}})}function Ml(e,t){Ou.set(e,t)}function Wd(){let e=!1,t=!1;Gn.forEach(i=>{const{direction:o}=i;o==="horizontal"?e=!0:t=!0});let n=0;Ou.forEach(i=>{n|=i}),e&&t?Rl("intersection",n):e?Rl("horizontal",n):t?Rl("vertical",n):q6()}function mu(){Ur.forEach((e,t)=>{const{body:n}=t;n.removeEventListener("contextmenu",Ki),n.removeEventListener("pointerdown",C0),n.removeEventListener("pointerleave",Qs),n.removeEventListener("pointermove",Qs)}),window.removeEventListener("pointerup",Ki),window.removeEventListener("pointercancel",Ki),bo.size>0&&(ds?(Gn.length>0&&Ur.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("contextmenu",Ki),n.addEventListener("pointerleave",Qs),n.addEventListener("pointermove",Qs))}),window.addEventListener("pointerup",Ki),window.addEventListener("pointercancel",Ki)):Ur.forEach((e,t)=>{const{body:n}=t;e>0&&(n.addEventListener("pointerdown",C0,{capture:!0}),n.addEventListener("pointermove",Qs))}))}function yu(e,t){bo.forEach(n=>{const{setResizeHandlerState:i}=n,o=Gn.includes(n);i(e,o,t)})}function r4(){const[e,t]=ls(0);return tn(()=>t(n=>n+1),[])}function Oe(e,t){if(!e)throw console.error(t),Error(t)}const qd=10;function Ai(e,t,n=qd){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Er(e,t,n=qd){return Ai(e,t,n)===0}function pn(e,t,n){return Ai(e,t,n)===0}function i4(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){const o=e[i],a=t[i];if(!pn(o,a,n))return!1}return!0}function rs({panelConstraints:e,panelIndex:t,size:n}){const i=e[t];Oe(i!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:o=0,collapsible:a,maxSize:u=100,minSize:l=0}=i;if(Ai(n,l)<0)if(a){const d=(o+l)/2;Ai(n,d)<0?n=o:n=l}else n=l;return n=Math.min(u,n),n=parseFloat(n.toFixed(qd)),n}function so({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:i,prevLayout:o,trigger:a}){if(pn(e,0))return t;const u=[...t],[l,d]=i;Oe(l!=null,"Invalid first pivot index"),Oe(d!=null,"Invalid second pivot index");let f=0;if(a==="keyboard"){{const g=e<0?d:l,m=n[g];Oe(m,`Panel constraints not found for index ${g}`);const{collapsedSize:D=0,collapsible:x,minSize:v=0}=m;if(x){const w=t[g];if(Oe(w!=null,`Previous layout not found for panel index ${g}`),pn(w,D)){const _=v-w;Ai(_,Math.abs(e))>0&&(e=e<0?0-_:_)}}}{const g=e<0?l:d,m=n[g];Oe(m,`No panel constraints found for index ${g}`);const{collapsedSize:D=0,collapsible:x,minSize:v=0}=m;if(x){const w=t[g];if(Oe(w!=null,`Previous layout not found for panel index ${g}`),pn(w,v)){const _=w-D;Ai(_,Math.abs(e))>0&&(e=e<0?0-_:_)}}}}{const g=e<0?1:-1;let m=e<0?d:l,D=0;for(;;){const v=t[m];Oe(v!=null,`Previous layout not found for panel index ${m}`);const _=rs({panelConstraints:n,panelIndex:m,size:100})-v;if(D+=_,m+=g,m<0||m>=n.length)break}const x=Math.min(Math.abs(e),Math.abs(D));e=e<0?0-x:x}{let m=e<0?l:d;for(;m>=0&&m<n.length;){const D=Math.abs(e)-Math.abs(f),x=t[m];Oe(x!=null,`Previous layout not found for panel index ${m}`);const v=x-D,w=rs({panelConstraints:n,panelIndex:m,size:v});if(!pn(x,w)&&(f+=x-w,u[m]=w,f.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?m--:m++}}if(i4(o,u))return o;{const g=e<0?d:l,m=t[g];Oe(m!=null,`Previous layout not found for panel index ${g}`);const D=m+f,x=rs({panelConstraints:n,panelIndex:g,size:D});if(u[g]=x,!pn(x,D)){let v=D-x,_=e<0?d:l;for(;_>=0&&_<n.length;){const A=u[_];Oe(A!=null,`Previous layout not found for panel index ${_}`);const I=A+v,N=rs({panelConstraints:n,panelIndex:_,size:I});if(pn(A,N)||(v-=N-A,u[_]=N),pn(v,0))break;e>0?_--:_++}}}const h=u.reduce((g,m)=>m+g,0);return pn(h,100)?u:o}function s4({layout:e,panelsArray:t,pivotIndices:n}){let i=0,o=100,a=0,u=0;const l=n[0];Oe(l!=null,"No pivot index found"),t.forEach((g,m)=>{const{constraints:D}=g,{maxSize:x=100,minSize:v=0}=D;m===l?(i=v,o=x):(a+=v,u+=x)});const d=Math.min(o,100-a),f=Math.max(i,100-u),h=e[l];return{valueMax:d,valueMin:f,valueNow:h}}function Ao(e,t=document){return Array.from(t.querySelectorAll(`[data-panel-resize-handle-id][data-panel-group-id="${e}"]`))}function zm(e,t,n=document){const o=Ao(e,n).findIndex(a=>a.getAttribute("data-panel-resize-handle-id")===t);return o??null}function Lm(e,t,n){const i=zm(e,t,n);return i!=null?[i,i+1]:[-1,-1]}function jm(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const i=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return i||null}function Pu(e,t=document){const n=t.querySelector(`[data-panel-resize-handle-id="${e}"]`);return n||null}function o4(e,t,n,i=document){var o,a,u,l;const d=Pu(t,i),f=Ao(e,i),h=d?f.indexOf(d):-1,g=(o=(a=n[h])===null||a===void 0?void 0:a.id)!==null&&o!==void 0?o:null,m=(u=(l=n[h+1])===null||l===void 0?void 0:l.id)!==null&&u!==void 0?u:null;return[g,m]}function a4({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:i,panelDataArray:o,panelGroupElement:a,setLayout:u}){rn({didWarnAboutMissingResizeHandle:!1}),wi(()=>{if(!a)return;const l=Ao(n,a);for(let d=0;d<o.length-1;d++){const{valueMax:f,valueMin:h,valueNow:g}=s4({layout:i,panelsArray:o,pivotIndices:[d,d+1]}),m=l[d];if(m!=null){const D=o[d];Oe(D,`No panel data found for index "${d}"`),m.setAttribute("aria-controls",D.id),m.setAttribute("aria-valuemax",""+Math.round(f)),m.setAttribute("aria-valuemin",""+Math.round(h)),m.setAttribute("aria-valuenow",g!=null?""+Math.round(g):"")}}return()=>{l.forEach((d,f)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[n,i,o,a]),xi(()=>{if(!a)return;const l=t.current;Oe(l,"Eager values not found");const{panelDataArray:d}=l,f=jm(n,a);Oe(f!=null,`No group found for id "${n}"`);const h=Ao(n,a);Oe(h,`No resize handles found for group id "${n}"`);const g=h.map(m=>{const D=m.getAttribute("data-panel-resize-handle-id");Oe(D,"Resize handle element has no handle id attribute");const[x,v]=o4(n,D,d,a);if(x==null||v==null)return()=>{};const w=_=>{if(!_.defaultPrevented)switch(_.key){case"Enter":{_.preventDefault();const A=d.findIndex(I=>I.id===x);if(A>=0){const I=d[A];Oe(I,`No panel data found for index ${A}`);const N=i[A],{collapsedSize:$=0,collapsible:z,minSize:M=0}=I.constraints;if(N!=null&&z){const X=so({delta:pn(N,$)?M-$:$-N,initialLayout:i,panelConstraints:d.map(B=>B.constraints),pivotIndices:Lm(n,D,a),prevLayout:i,trigger:"keyboard"});i!==X&&u(X)}}break}}};return m.addEventListener("keydown",w),()=>{m.removeEventListener("keydown",w)}});return()=>{g.forEach(m=>m())}},[a,e,t,n,i,o,u])}function E0(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Hm(e,t){const n=e==="horizontal",{x:i,y:o}=Mu(t);return n?i:o}function u4(e,t,n,i,o){const a=n==="horizontal",u=Pu(t,o);Oe(u,`No resize handle element found for id "${t}"`);const l=u.getAttribute("data-panel-group-id");Oe(l,"Resize handle element has no group id attribute");let{initialCursorPosition:d}=i;const f=Hm(n,e),h=jm(l,o);Oe(h,`No group element found for id "${l}"`);const g=h.getBoundingClientRect(),m=a?g.width:g.height;return(f-d)/m*100}function c4(e,t,n,i,o,a){if(Im(e)){const u=n==="horizontal";let l=0;e.shiftKey?l=100:o!=null?l=o:l=10;let d=0;switch(e.key){case"ArrowDown":d=u?0:l;break;case"ArrowLeft":d=u?-l:0;break;case"ArrowRight":d=u?l:0;break;case"ArrowUp":d=u?0:-l;break;case"End":d=100;break;case"Home":d=-100;break}return d}else return i==null?0:u4(e,t,n,i,a)}function l4({panelDataArray:e}){const t=Array(e.length),n=e.map(a=>a.constraints);let i=0,o=100;for(let a=0;a<e.length;a++){const u=n[a];Oe(u,`Panel constraints not found for index ${a}`);const{defaultSize:l}=u;l!=null&&(i++,t[a]=l,o-=l)}for(let a=0;a<e.length;a++){const u=n[a];Oe(u,`Panel constraints not found for index ${a}`);const{defaultSize:l}=u;if(l!=null)continue;const d=e.length-i,f=o/d;i++,t[a]=f,o-=f}return t}function Ji(e,t,n){t.forEach((i,o)=>{const a=e[o];Oe(a,`Panel data not found for index ${o}`);const{callbacks:u,constraints:l,id:d}=a,{collapsedSize:f=0,collapsible:h}=l,g=n[d];if(g==null||i!==g){n[d]=i;const{onCollapse:m,onExpand:D,onResize:x}=u;x&&x(i,g),h&&(m||D)&&(D&&(g==null||Er(g,f))&&!Er(i,f)&&D(),m&&(g==null||!Er(g,f))&&Er(i,f)&&m())}})}function Wa(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function d4({defaultSize:e,dragState:t,layout:n,panelData:i,panelIndex:o,precision:a=3}){const u=n[o];let l;return u==null?l=e!=null?e.toPrecision(a):"1":i.length===1?l="1":l=u.toPrecision(a),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function f4(e,t=10){let n=null;return(...o)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...o)},t)}}function b0(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Vm(e){return`react-resizable-panels:${e}`}function Um(e){return e.map(t=>{const{constraints:n,id:i,idIsFromProps:o,order:a}=t;return o?i:a?`${a}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function Gm(e,t){try{const n=Vm(e),i=t.getItem(n);if(i){const o=JSON.parse(i);if(typeof o=="object"&&o!=null)return o}}catch{}return null}function h4(e,t,n){var i,o;const a=(i=Gm(e,n))!==null&&i!==void 0?i:{},u=Um(t);return(o=a[u])!==null&&o!==void 0?o:null}function p4(e,t,n,i,o){var a;const u=Vm(e),l=Um(t),d=(a=Gm(e,o))!==null&&a!==void 0?a:{};d[l]={expandToSizes:Object.fromEntries(n.entries()),layout:i};try{o.setItem(u,JSON.stringify(d))}catch(f){console.error(f)}}function A0({layout:e,panelConstraints:t}){const n=[...e],i=n.reduce((a,u)=>a+u,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(a=>`${a}%`).join(", ")}`);if(!pn(i,100)&&n.length>0)for(let a=0;a<t.length;a++){const u=n[a];Oe(u!=null,`No layout data found for index ${a}`);const l=100/i*u;n[a]=l}let o=0;for(let a=0;a<t.length;a++){const u=n[a];Oe(u!=null,`No layout data found for index ${a}`);const l=rs({panelConstraints:t,panelIndex:a,size:u});u!=l&&(o+=u-l,n[a]=l)}if(!pn(o,0))for(let a=0;a<t.length;a++){const u=n[a];Oe(u!=null,`No layout data found for index ${a}`);const l=u+o,d=rs({panelConstraints:t,panelIndex:a,size:l});if(u!==d&&(o-=d-u,n[a]=d,pn(o,0)))break}return n}const g4=100,oo={getItem:e=>(b0(oo),oo.getItem(e)),setItem:(e,t)=>{b0(oo),oo.setItem(e,t)}},S0={};function Zm({autoSaveId:e=null,children:t,className:n="",direction:i,forwardedRef:o,id:a=null,onLayout:u=null,keyboardResizeBy:l=null,storage:d=oo,style:f,tagName:h="div",...g}){const m=Gd(a),D=rn(null),[x,v]=ls(null),[w,_]=ls([]),A=r4(),I=rn({}),N=rn(new Map),$=rn(0),z=rn({autoSaveId:e,direction:i,dragState:x,id:m,keyboardResizeBy:l,onLayout:u,storage:d}),M=rn({layout:w,panelDataArray:[],panelDataArrayChanged:!1});rn({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),Nm(o,()=>({getId:()=>z.current.id,getLayout:()=>{const{layout:W}=M.current;return W},setLayout:W=>{const{onLayout:ie}=z.current,{layout:ue,panelDataArray:de}=M.current,fe=A0({layout:W,panelConstraints:de.map(le=>le.constraints)});E0(ue,fe)||(_(fe),M.current.layout=fe,ie&&ie(fe),Ji(de,fe,I.current))}}),[]),wi(()=>{z.current.autoSaveId=e,z.current.direction=i,z.current.dragState=x,z.current.id=m,z.current.onLayout=u,z.current.storage=d}),a4({committedValuesRef:z,eagerValuesRef:M,groupId:m,layout:w,panelDataArray:M.current.panelDataArray,setLayout:_,panelGroupElement:D.current}),xi(()=>{const{panelDataArray:W}=M.current;if(e){if(w.length===0||w.length!==W.length)return;let ie=S0[e];ie==null&&(ie=f4(p4,g4),S0[e]=ie);const ue=[...W],de=new Map(N.current);ie(e,ue,de,w,d)}},[e,w,d]),xi(()=>{});const X=tn(W=>{const{onLayout:ie}=z.current,{layout:ue,panelDataArray:de}=M.current;if(W.constraints.collapsible){const fe=de.map(nt=>nt.constraints),{collapsedSize:le=0,panelSize:ge,pivotIndices:we}=gi(de,W,ue);if(Oe(ge!=null,`Panel size not found for panel "${W.id}"`),!Er(ge,le)){N.current.set(W.id,ge);const Je=Qi(de,W)===de.length-1?ge-le:le-ge,Le=so({delta:Je,initialLayout:ue,panelConstraints:fe,pivotIndices:we,prevLayout:ue,trigger:"imperative-api"});Wa(ue,Le)||(_(Le),M.current.layout=Le,ie&&ie(Le),Ji(de,Le,I.current))}}},[]),B=tn((W,ie)=>{const{onLayout:ue}=z.current,{layout:de,panelDataArray:fe}=M.current;if(W.constraints.collapsible){const le=fe.map(He=>He.constraints),{collapsedSize:ge=0,panelSize:we=0,minSize:nt=0,pivotIndices:Je}=gi(fe,W,de),Le=ie??nt;if(Er(we,ge)){const He=N.current.get(W.id),Qe=He!=null&&He>=Le?He:Le,Be=Qi(fe,W)===fe.length-1?we-Qe:Qe-we,ve=so({delta:Be,initialLayout:de,panelConstraints:le,pivotIndices:Je,prevLayout:de,trigger:"imperative-api"});Wa(de,ve)||(_(ve),M.current.layout=ve,ue&&ue(ve),Ji(fe,ve,I.current))}}},[]),U=tn(W=>{const{layout:ie,panelDataArray:ue}=M.current,{panelSize:de}=gi(ue,W,ie);return Oe(de!=null,`Panel size not found for panel "${W.id}"`),de},[]),K=tn((W,ie)=>{const{panelDataArray:ue}=M.current,de=Qi(ue,W);return d4({defaultSize:ie,dragState:x,layout:w,panelData:ue,panelIndex:de})},[x,w]),q=tn(W=>{const{layout:ie,panelDataArray:ue}=M.current,{collapsedSize:de=0,collapsible:fe,panelSize:le}=gi(ue,W,ie);return Oe(le!=null,`Panel size not found for panel "${W.id}"`),fe===!0&&Er(le,de)},[]),G=tn(W=>{const{layout:ie,panelDataArray:ue}=M.current,{collapsedSize:de=0,collapsible:fe,panelSize:le}=gi(ue,W,ie);return Oe(le!=null,`Panel size not found for panel "${W.id}"`),!fe||Ai(le,de)>0},[]),b=tn(W=>{const{panelDataArray:ie}=M.current;ie.push(W),ie.sort((ue,de)=>{const fe=ue.order,le=de.order;return fe==null&&le==null?0:fe==null?-1:le==null?1:fe-le}),M.current.panelDataArrayChanged=!0,A()},[A]);wi(()=>{if(M.current.panelDataArrayChanged){M.current.panelDataArrayChanged=!1;const{autoSaveId:W,onLayout:ie,storage:ue}=z.current,{layout:de,panelDataArray:fe}=M.current;let le=null;if(W){const we=h4(W,fe,ue);we&&(N.current=new Map(Object.entries(we.expandToSizes)),le=we.layout)}le==null&&(le=l4({panelDataArray:fe}));const ge=A0({layout:le,panelConstraints:fe.map(we=>we.constraints)});E0(de,ge)||(_(ge),M.current.layout=ge,ie&&ie(ge),Ji(fe,ge,I.current))}}),wi(()=>{const W=M.current;return()=>{W.layout=[]}},[]);const P=tn(W=>function(ue){ue.preventDefault();const de=D.current;if(!de)return()=>null;const{direction:fe,dragState:le,id:ge,keyboardResizeBy:we,onLayout:nt}=z.current,{layout:Je,panelDataArray:Le}=M.current,{initialLayout:He}=le??{},Qe=Lm(ge,W,de);let gt=c4(ue,W,fe,le,we,de);const Be=fe==="horizontal";document.dir==="rtl"&&Be&&(gt=-gt);const ve=Le.map(bt=>bt.constraints),_t=so({delta:gt,initialLayout:He??Je,panelConstraints:ve,pivotIndices:Qe,prevLayout:Je,trigger:Im(ue)?"keyboard":"mouse-or-touch"}),Ot=!Wa(Je,_t);(km(ue)||Bm(ue))&&$.current!=gt&&($.current=gt,!Ot&&gt!==0?Be?Ml(W,gt<0?Mm:Om):Ml(W,gt<0?Pm:$m):Ml(W,0)),Ot&&(_(_t),M.current.layout=_t,nt&&nt(_t),Ji(Le,_t,I.current))},[]),O=tn((W,ie)=>{const{onLayout:ue}=z.current,{layout:de,panelDataArray:fe}=M.current,le=fe.map(He=>He.constraints),{panelSize:ge,pivotIndices:we}=gi(fe,W,de);Oe(ge!=null,`Panel size not found for panel "${W.id}"`);const Je=Qi(fe,W)===fe.length-1?ge-ie:ie-ge,Le=so({delta:Je,initialLayout:de,panelConstraints:le,pivotIndices:we,prevLayout:de,trigger:"imperative-api"});Wa(de,Le)||(_(Le),M.current.layout=Le,ue&&ue(Le),Ji(fe,Le,I.current))},[]),Z=tn((W,ie)=>{const{layout:ue,panelDataArray:de}=M.current,{collapsedSize:fe=0,collapsible:le}=ie,{collapsedSize:ge=0,collapsible:we,maxSize:nt=100,minSize:Je=0}=W.constraints,{panelSize:Le}=gi(de,W,ue);Le!=null&&(le&&we&&Er(Le,fe)?Er(fe,ge)||O(W,ge):Le<Je?O(W,Je):Le>nt&&O(W,nt))},[O]),ee=tn((W,ie)=>{const{direction:ue}=z.current,{layout:de}=M.current;if(!D.current)return;const fe=Pu(W,D.current);Oe(fe,`Drag handle element not found for id "${W}"`);const le=Hm(ue,ie);v({dragHandleId:W,dragHandleRect:fe.getBoundingClientRect(),initialCursorPosition:le,initialLayout:de})},[]),H=tn(()=>{v(null)},[]),ne=tn(W=>{const{panelDataArray:ie}=M.current,ue=Qi(ie,W);ue>=0&&(ie.splice(ue,1),delete I.current[W.id],M.current.panelDataArrayChanged=!0,A())},[A]),re=V6(()=>({collapsePanel:X,direction:i,dragState:x,expandPanel:B,getPanelSize:U,getPanelStyle:K,groupId:m,isPanelCollapsed:q,isPanelExpanded:G,reevaluatePanelConstraints:Z,registerPanel:b,registerResizeHandle:P,resizePanel:O,startDragging:ee,stopDragging:H,unregisterPanel:ne,panelGroupElement:D.current}),[X,x,i,B,U,K,m,q,G,Z,b,P,O,ee,H,ne]),ae={display:"flex",flexDirection:i==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return ys(Ru.Provider,{value:re},ys(h,{...g,children:t,className:n,id:a,ref:D,style:{...ae,...f},"data-panel-group":"","data-panel-group-direction":i,"data-panel-group-id":m}))}const Wm=Sm((e,t)=>ys(Zm,{...e,forwardedRef:t}));Zm.displayName="PanelGroup";Wm.displayName="forwardRef(PanelGroup)";function Qi(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function gi(e,t,n){const i=Qi(e,t),a=i===e.length-1?[i-1,i]:[i,i+1],u=n[i];return{...t.constraints,panelSize:u,pivotIndices:a}}function m4({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:i}){xi(()=>{if(e||n==null||i==null)return;const o=Pu(t,i);if(o==null)return;const a=u=>{if(!u.defaultPrevented)switch(u.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{u.preventDefault(),n(u);break}case"F6":{u.preventDefault();const l=o.getAttribute("data-panel-group-id");Oe(l,`No group element found for id "${l}"`);const d=Ao(l,i),f=zm(l,t,i);Oe(f!==null,`No resize element found for id "${t}"`);const h=u.shiftKey?f>0?f-1:d.length-1:f+1<d.length?f+1:0;d[h].focus();break}}};return o.addEventListener("keydown",a),()=>{o.removeEventListener("keydown",a)}},[i,e,t,n])}function ad({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:i,id:o,onBlur:a,onDragging:u,onFocus:l,style:d={},tabIndex:f=0,tagName:h="div",...g}){var m,D;const x=rn(null),v=rn({onDragging:u});xi(()=>{v.current.onDragging=u});const w=Fm(Ru);if(w===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:_,groupId:A,registerResizeHandle:I,startDragging:N,stopDragging:$,panelGroupElement:z}=w,M=Gd(o),[X,B]=ls("inactive"),[U,K]=ls(!1),[q,G]=ls(null),b=rn({state:X});wi(()=>{b.current.state=X}),xi(()=>{if(n)G(null);else{const ee=I(M);G(()=>ee)}},[n,M,I]);const P=(m=i?.coarse)!==null&&m!==void 0?m:15,O=(D=i?.fine)!==null&&D!==void 0?D:5;return xi(()=>{if(n||q==null)return;const ee=x.current;return Oe(ee,"Element ref not attached"),n4(M,ee,_,{coarse:P,fine:O},(ne,re,ae)=>{if(re)switch(ne){case"down":{B("drag"),Oe(ae,'Expected event to be defined for "down" action'),N(M,ae);const{onDragging:W}=v.current;W&&W(!0);break}case"move":{const{state:W}=b.current;W!=="drag"&&B("hover"),Oe(ae,'Expected event to be defined for "move" action'),q(ae);break}case"up":{B("hover"),$();const{onDragging:W}=v.current;W&&W(!1);break}}else B("inactive")})},[P,_,n,O,I,M,q,N,$]),m4({disabled:n,handleId:M,resizeHandler:q,panelGroupElement:z}),ys(h,{...g,children:e,className:t,id:o,onBlur:()=>{K(!1),a?.()},onFocus:()=>{K(!0),l?.()},ref:x,role:"separator",style:{...{touchAction:"none",userSelect:"none"},...d},tabIndex:f,"data-panel-group-direction":_,"data-panel-group-id":A,"data-resize-handle":"","data-resize-handle-active":X==="drag"?"pointer":U?"keyboard":void 0,"data-resize-handle-state":X,"data-panel-resize-handle-enabled":!n,"data-panel-resize-handle-id":M})}ad.displayName="PanelResizeHandle";const y4=e=>{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}catch(n){console.error("Unable to copy to clipboard",n)}document.body.removeChild(t)},ud=async e=>{window.isSecureContext&&navigator.clipboard?await navigator.clipboard.writeText(e):y4(e)},v4=async()=>{try{return navigator.clipboard.readText()}catch{return""}},_4=({defaultRequest:e,onChange:t,onRun:n,onClear:i,loading:o=!1})=>{const[a,u]=S.useState(e),{stateStore:l,actions:d}=Es(),{nodeTypes:f,simulate:h}=ct(({decisionGraph:x,simulate:v})=>({simulate:v,nodeTypes:(x.nodes??[]).reduce((w,_)=>({...w,[_.id]:_.type}),{})})),[g,m]=S.useState("graph"),D=Ge(h).with({result:qe._},({result:x})=>x).otherwise(()=>{});return S.useEffect(()=>{if(!lo())return;const{decisionGraph:x}=l.getState(),v=x.nodes.find(w=>w.type==="inputNode");if(v)try{const w=a?pi.parse(a):"Any";d.setNodeType(v.id,st.InferredOutput,new gn(w))}catch{}},[a]),F.jsxs(Wm,{className:"grl-dg__simulator",direction:"horizontal",autoSaveId:"jdm-editor:simulator:layout",children:[F.jsxs(tu,{minSize:20,defaultSize:30,className:"grl-dg__simulator__section grl-dg__simulator__request",children:[F.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request",children:[F.jsx(Tt.Text,{children:"Request (json5)"}),F.jsxs("div",{className:"grl-dg__simulator__section__bar__actions",children:[F.jsx(ss,{title:"Copy JSON to Clipboard",children:F.jsx(dt,{type:"text",size:"small",icon:F.jsx(HC,{}),onClick:async()=>{try{await ud(JSON.stringify(pi.parse(a??""))),Mt.success("Copied to clipboard!")}catch{Mt.error("Failed to copy to clipboard.")}}})}),F.jsx(ss,{title:"Format json",children:F.jsx(dt,{size:"small",type:"text",icon:F.jsx(lE,{}),onClick:()=>{if((a||"").trim().length!==0)try{const x=pi.stringify(pi.parse(a||""),null,2);t?.(x),u(x)}catch{zl.error({message:"Invalid format",description:"Unable to format request, invalid JSON format",placement:"top"})}}})}),n&&F.jsx(dt,{size:"small",type:"primary",loading:o,icon:F.jsx(A2,{}),onClick:()=>{try{const x=(a||"").trim().length===0?null:pi.parse(a||"");n?.({graph:l.getState().decisionGraph,context:x})}catch{zl.error({message:"Invalid format",description:"Unable to format request, invalid JSON format",placement:"top"})}},children:"Run"})]})]}),F.jsx("div",{className:"grl-dg__simulator__section__content",children:F.jsx(F0,{value:a,onChange:x=>{u(x),t?.(x??"")}})})]}),F.jsx(ad,{}),F.jsxs(tu,{minSize:20,maxSize:20,className:"grl-dg__simulator__section grl-dg__simulator__nodes",children:[F.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--nodes",children:[F.jsx(Tt.Text,{children:"Nodes"}),F.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:i&&F.jsx(ss,{title:"Clear",children:F.jsx(dt,{size:"small",type:"text",icon:F.jsx(n2,{}),onClick:()=>{i?.(),m("graph")}})})})]}),F.jsx("div",{className:"grl-dg__simulator__section__content",children:F.jsx(Dd,{spinning:o,children:F.jsxs("div",{className:"grl-dg__simulator__nodes-list",children:[F.jsxs("div",{className:Xe("grl-dg__simulator__nodes-list__node",g==="graph"&&"active"),onClick:()=>m("graph"),children:[F.jsx(Tt.Text,{children:"Graph"}),F.jsx(Tt.Text,{type:"secondary",children:Ge(h).with({result:qe._},({result:x})=>x?.performance).otherwise(()=>{})})]}),Object.entries(D?.trace??{}).filter(([,x])=>![Ye.Input,Ye.Output].includes(f?.[x?.id])).map(([x,v])=>F.jsxs("div",{className:Xe("grl-dg__simulator__nodes-list__node",x===g&&"active"),onClick:()=>m(x),children:[F.jsx(Tt.Text,{children:v.name}),F.jsx(Tt.Text,{type:"secondary",children:v.performance})]},x))]})})})]}),F.jsx(ad,{}),F.jsxs(tu,{minSize:30,defaultSize:50,className:"grl-dg__simulator__section grl-dg__simulator__response",children:[F.jsx("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--response",children:F.jsx(Tt.Text,{children:"Response"})}),F.jsx("div",{className:"grl-dg__simulator__section__content",children:F.jsx(F0,{readOnly:!0,value:Ge(h).with({result:qe._},({result:x})=>Ge(g).with("graph",()=>pi.stringify(x?.result??{},void 0,2)).otherwise(()=>{const{input:v,output:w,traceData:_}=x?.trace[g]??{};return pi.stringify({input:v,output:w,traceData:_},void 0,2)})).otherwise(()=>"")})})]})]})},F0=({value:e,onChange:t,readOnly:n})=>{const{token:i}=VC.useToken();return F.jsx(dE,{loading:F.jsx(Dd,{size:"large"}),language:"javascript",value:e,onChange:t,theme:i.mode==="dark"?"vs-dark":"light",height:"100%",onMount:(o,a)=>{a.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),a.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1})},options:{readOnly:n,automaticLayout:!0,contextmenu:!1,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})};_4.__docgenInfo={description:"",methods:[],displayName:"GraphSimulator",props:{defaultRequest:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(val: string) => void",signature:{arguments:[{type:{name:"string"},name:"val"}],return:{name:"void"}}},description:""},onRun:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
  settings?: DecisionSettings;
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}},{key:"settings",value:{name:"intersection",raw:"z.infer<typeof decisionModelSchema>['settings'] & Diff",elements:[{name:"z.infer['settings']",raw:"z.infer<typeof decisionModelSchema>['settings']"},{name:"signature",type:"object",raw:`{
  _diff?: DiffMetadata<T>;
}`,signature:{properties:[{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],required:!1}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""},onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const D4=(e,t)=>e[t]?.[st.Input]??e[t]?.[st.InferredInput]??gn.fromJson({Object:{}}),ws=(e,{attachGlobals:t=!0,disabled:n=!1}={})=>{const i=ct(({nodeTypes:o,globalType:a})=>{if(!(!lo()||n))return{nodeTypes:o,globalType:a}});return S.useMemo(()=>{if(!i?.nodeTypes)return;const o=D4(i.nodeTypes,e);return t&&Object.entries(i?.globalType??{}).forEach(([a,u])=>o.set(a,u)),o},[i?.globalType,i?.nodeTypes,t])},qm=({id:e,manager:t})=>{const n=It(),i=ws(e,{attachGlobals:!1}),{nodeTrace:o,disabled:a,configurable:u,content:l,globalType:d}=ct(({simulate:g,disabled:m,configurable:D,decisionGraph:x,globalType:v})=>({nodeTrace:Ge(g).with({result:qe._},({result:w})=>w?.trace?.[e]).otherwise(()=>null),disabled:m,configurable:D,content:(x?.nodes??[]).find(w=>w.id===e)?.content,globalType:v})),f=o?.traceData!==void 0?Array.isArray(o?.traceData)?o?.traceData?.map(g=>g?.rule?._id):[o?.traceData?.rule?._id]:[],h=S.useMemo(()=>{if(!i)return;const g=Ge(l?.inputField).with(qe.string,D=>i.get(D)).otherwise(()=>i),m=l?.executionMode==="loop"?g.arrayItem():g;return Object.entries(d).forEach(([D,x])=>m.set(D,x)),m},[i,d,l?.inputField,l?.executionMode]);return F.jsx(QC,{tableHeight:"100%",value:l,onChange:g=>{n.updateNode(e,m=>(Object.assign(m.content,g),m))},manager:t,disabled:a,configurable:u,inputData:h,activeRules:(f||[]).filter(g=>!!g)})};qm.__docgenInfo={description:"",methods:[],displayName:"TabDecisionTable",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const Xd={type:Ye.DecisionTable,icon:F.jsx(I2,{}),displayName:"Decision table",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/decision-tables",shortDescription:"Rules spreadsheet",renderTab:({id:e,manager:t})=>F.jsx(qm,{id:e,manager:t}),getDiffContent:(e,t)=>yt(e,n=>{const i={};(e.executionMode??"single")!==(t.executionMode??"single")&&Et.set(i,"executionMode",{status:"modified",previousValue:t.executionMode}),(e.hitPolicy??"first")!==(t.hitPolicy??"first")&&Et.set(i,"hitPolicy",{status:"modified",previousValue:t.hitPolicy}),(e.inputField??"")!==(t.inputField??"")&&Et.set(i,"inputField",{status:"modified",previousValue:t.inputField}),(e.outputPath??"")!==(t.outputPath??"")&&Et.set(i,"outputPath",{status:"modified",previousValue:t.outputPath}),(e.passThrough??!1)!==(t.passThrough??!1)&&Et.set(i,"passThrough",{status:"modified",previousValue:t.passThrough});const o=ho(e?.inputs||[],t?.inputs||[],{compareFields:(l,d)=>{const f=(l.name??"")!==(d.name??""),h=(l.field??"")!==(d.field??""),g=(l.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:f||h||g,fields:{...f&&{name:{status:"modified",previousValue:d.name}},...h&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),a=ho(e?.outputs||[],t?.outputs||[],{compareFields:(l,d)=>{const f=(l.name??"")!==(d.name??""),h=(l.field??"")!==(d.field??""),g=(l.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:f||h||g,fields:{...f&&{name:{status:"modified",previousValue:d.name}},...h&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),u=ho(e?.rules||[],t?.rules||[],{idField:"_id",compareFields:(l,d)=>{const f=(l._description??"")!==(d._description??""),h={};o.forEach(m=>{m._diff?.status==="added"?h[m.id]={status:"added"}:m._diff?.status==="removed"?h[m.id]={status:"removed"}:(l?.[m.id]??"")!==(d?.[m.id]??"")&&(h[m.id]={status:"modified",previousValue:d?.[m.id]})});const g={};return a.forEach(m=>{m?._diff?.status==="added"?g[m.id]={status:"added"}:m?._diff?.status==="removed"?g[m.id]={status:"removed"}:(l?.[m.id]??"")!==(d?.[m.id]??"")&&(g[m.id]={status:"modified",previousValue:d?.[m.id]})}),{hasChanges:f||Object.keys(h).length>0||Object.keys(g).length>0,fields:{...f&&{_description:{status:"modified",previousValue:d._description}},...h,...g}}}});return n.inputs=o,n.outputs=a,n.rules=u,o.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&Et.set(i,"inputs",{status:"modified"}),a.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&Et.set(i,"outputs",{status:"modified"}),u.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&Et.set(i,"rules",{status:"modified"}),Object.keys(i).length>0&&(n._diff={status:"modified",fields:i}),n}),inferTypes:{needsUpdate:(e,t)=>!mn(e,t),determineOutputType:({content:e,input:t})=>{let n=t.clone(),i=gn.fromJson({Object:{}});if(e.inputField&&(n=t.calculateType(e.inputField)),e.executionMode==="loop"&&(n=n.arrayItem()),(e?.outputs||[]).filter(a=>!!a.field).forEach(a=>{for(const u of e.rules){if(!u[a.id])continue;const l=n.calculateType(u[a.id]),d=l.toJson();if(d!=="Any"&&d!=="Null"){i.set(a.field,l);return}}i.setJson(a.field,"Any")}),e.hitPolicy==="collect"&&(i=i.toArray()),e.executionMode==="loop"&&(i=i.toArray()),e.outputPath){const a=gn.fromJson({Object:{}});a.set(e.outputPath,i),i=a}return e.passThrough&&(i=t.merge(i)),i}},generateNode:({index:e})=>({name:`decisionTable${e}`,content:{hitPolicy:"first",inputs:[{id:crypto.randomUUID(),name:"Input"}],outputs:[{id:crypto.randomUUID(),field:"output",name:"Output"}],rules:[],inputField:null,outputPath:null,passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:t,selected:n,specification:i})=>{const o=It(),{passThrough:a,executionMode:u}=ct(({decisionGraph:l})=>{const d=(l?.nodes??[]).find(f=>f.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return F.jsx(ei,{id:e,specification:i,name:t.name,isSelected:n,helper:[u==="loop"&&F.jsx(rg,{}),a&&F.jsx(_d,{})],actions:[F.jsx(dt,{type:"text",onClick:()=>o.openTab(e),children:"Edit Table"},"edit-table")]})},renderSettings:({id:e})=>{const t=It(),n=ws(e),{contentDiff:i}=$u(e),{fields:o,disabled:a}=ct(({decisionGraph:l,disabled:d})=>{const f=(l?.nodes??[]).find(h=>h.id===e)?.content;return{disabled:d,fields:{passThrough:f?.passThrough||!1,inputField:f?.inputField,outputPath:f?.outputPath,executionMode:f?.executionMode||"single",hitPolicy:f?.hitPolicy||"first"}}}),u=l=>{t.updateNode(e,d=>(Object.assign(d.content,l),d))};return F.jsxs("div",{className:"settings-form",children:[F.jsx(wr.Item,{label:"Hit Policy",children:F.jsx(eE,{direction:"vertical",size:2,children:F.jsx(Pl,{size:"small",previousValue:i?.fields?.hitPolicy?.previousValue,displayDiff:i?.fields?.hitPolicy?.status==="modified",disabled:a,value:o?.hitPolicy,onChange:l=>u({hitPolicy:l?.target?.value}),options:[{value:"first",label:"First"},{value:"collect",label:"Collect"}]})})}),F.jsx(wr.Item,{label:"Passthrough",children:F.jsx(G0,{disabled:a,size:"small",displayDiff:i?.fields?.passThrough?.status==="modified",checked:o?.passThrough,previousChecked:i?.fields?.passThrough?.previousValue,onChange:l=>u({passThrough:l})})}),F.jsx(wr.Item,{label:"Input field",children:F.jsx(bu,{variableType:n,disabled:a,displayDiff:i?.fields?.inputField?.status==="modified",previousValue:i?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:o?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:o?.inputField??"",onChange:l=>u({inputField:l?.trim()||null})})}),F.jsx(wr.Item,{label:"Output path",children:F.jsx(L0,{size:"small",readOnly:a,displayDiff:i?.fields?.outputPath?.status==="modified",previousValue:i?.fields?.outputPath?.previousValue,value:o?.outputPath??"",onChange:l=>u({outputPath:l?.target?.value?.trim()||null})})}),F.jsx(wr.Item,{label:"Execution mode",children:F.jsx(Pl,{size:"small",disabled:a,displayDiff:i?.fields?.executionMode?.status==="modified",previousValue:i?.fields?.executionMode?.previousValue,value:o?.executionMode,onChange:l=>u({executionMode:l?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},Xm=({id:e,manager:t})=>{const n=It(),i=ws(e,{attachGlobals:!1}),{disabled:o,configurable:a,content:u,trace:l,globalType:d}=ct(({disabled:h,configurable:g,decisionGraph:m,simulate:D,globalType:x})=>({disabled:h,configurable:g,content:(m?.nodes??[]).find(v=>v.id===e)?.content,trace:D&&"result"in D?D.result?.trace[e]:void 0,globalType:x})),f=S.useMemo(()=>{if(!i)return;const h=Ge(u?.inputField).with(qe.string,m=>i.get(m)).otherwise(()=>i),g=u?.executionMode==="loop"?h.arrayItem():h;return Object.entries(d).forEach(([m,D])=>g.set(m,D)),g},[i,d,u?.inputField,u?.executionMode]);return F.jsx("div",{style:{height:"100%",overflowY:"auto",boxSizing:"border-box"},children:F.jsx(uE,{traceData:l?.traceData,value:u?.expressions,disabled:o,configurable:a,manager:t,inputData:f,onChange:h=>{n.updateNode(e,g=>(g.content.expressions=h,g))}})})};Xm.__docgenInfo={description:"",methods:[],displayName:"TabExpression",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const Yd={type:Ye.Expression,icon:F.jsx(C2,{}),displayName:"Expression",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/expression",shortDescription:"Mapping utility",renderTab:({id:e,manager:t})=>F.jsx(Xm,{id:e,manager:t}),getDiffContent:(e,t)=>yt(e,i=>{const o={};(e.executionMode||!1)!==(t.executionMode||!1)&&Et.set(o,"executionMode",{status:"modified",previousValue:t.executionMode}),qa(e.inputField,t.inputField)||Et.set(o,"inputField",{status:"modified",previousValue:t.inputField}),qa(e.outputPath,t.outputPath)||Et.set(o,"outputPath",{status:"modified",previousValue:t.outputPath}),(e.passThrough||!1)!==(t.passThrough||!1)&&Et.set(o,"passThrough",{status:"modified",previousValue:t.passThrough});const a=ho(e?.expressions||[],t?.expressions||[],{compareFields:(u,l)=>{const d=!qa(u.key,l.key),f=!qa(u.value,l.value);return{hasChanges:d||f,fields:{...d&&{key:{status:"modified",previousValue:l.key}},...f&&{value:{status:"modified",previousValue:l.value}}}}}});return i.expressions=a,a.find(u=>u?._diff?.status==="modified"||u?._diff?.status==="added"||u?._diff?.status==="removed")&&Et.set(o,"expressions",{status:"modified"}),Object.keys(o).length>0&&(i._diff={status:"modified",fields:o}),i}),inferTypes:{needsUpdate:(e,t)=>!mn(e,t),determineOutputType:({input:e,content:t})=>{let n=e.clone(),i=gn.fromJson({Object:{}});if(t.inputField&&(n=e.calculateType(t.inputField)),t.executionMode==="loop"&&(n=n.arrayItem()),(t.expressions||[]).forEach(o=>{if(!o.key||!o.value)return;const a=n.calculateType(o.value);n.set(`$.${o.key}`,a),i.set(o.key,a)}),t.executionMode==="loop"&&(i=i.toArray()),t.outputPath){const o=gn.fromJson({Object:{}});o.set(t.outputPath,i),i=o}return t.passThrough&&(i=e.merge(i)),i}},generateNode:({index:e})=>({name:`expression${e}`,content:{inputField:null,outputPath:null,expressions:[],passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:t,selected:n,specification:i})=>{const o=It(),{passThrough:a,executionMode:u}=ct(({decisionGraph:l})=>{const d=(l?.nodes??[]).find(f=>f.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return F.jsx(ei,{id:e,specification:i,name:t.name,isSelected:n,actions:[F.jsx(dt,{type:"text",onClick:()=>o.openTab(e),children:"Edit Expression"},"edit-table")],helper:[u==="loop"&&F.jsx(rg,{}),a&&F.jsx(_d,{})]})},renderSettings:({id:e})=>{const t=It(),n=ws(e),{contentDiff:i}=$u(e),{fields:o,disabled:a}=ct(({decisionGraph:l,disabled:d})=>{const f=(l?.nodes??[]).find(h=>h.id===e)?.content;return{disabled:d,fields:{passThrough:f?.passThrough||!1,inputField:f?.inputField,outputPath:f?.outputPath,executionMode:f?.executionMode||"single"}}}),u=l=>{t.updateNode(e,d=>(Object.assign(d.content,l),d))};return F.jsxs("div",{className:"settings-form",children:[F.jsx(wr.Item,{label:"Passthrough",children:F.jsx(G0,{disabled:a,size:"small",displayDiff:i?.fields?.passThrough?.status==="modified",checked:o?.passThrough,previousChecked:i?.fields?.passThrough?.previousValue,onChange:l=>u({passThrough:l})})}),F.jsx(wr.Item,{label:"Input field",children:F.jsx(bu,{variableType:n,disabled:a,displayDiff:i?.fields?.inputField?.status==="modified",previousValue:i?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:o?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:o?.inputField??"",onChange:l=>{u({inputField:l?.trim()||null})}})}),F.jsx(wr.Item,{label:"Output path",children:F.jsx(L0,{size:"small",readOnly:a,displayDiff:i?.fields?.outputPath?.status==="modified",previousValue:i?.fields?.outputPath?.previousValue,value:o?.outputPath??"",onChange:l=>u({outputPath:l?.target?.value?.trim()||null})})}),F.jsx(wr.Item,{label:"Execution mode",children:F.jsx(Pl,{size:"small",disabled:a,displayDiff:i?.fields?.executionMode?.status==="modified",previousValue:i?.fields?.executionMode?.previousValue,value:o?.executionMode,onChange:l=>u({executionMode:l?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},x4=j.lazy(async()=>({default:(await hE(()=>import("./index-vS5yUOdw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)).Function})),Ym=({id:e})=>{const t=Km(e),n=It(),i=ey(v=>v.onFunctionReady),[o,a]=S.useState(),u=ws(e),{nodeTrace:l,disabled:d,content:f,additionalModules:h,nodeError:g}=ct(({simulate:v,disabled:w,configurable:_,decisionGraph:A})=>({nodeTrace:Ge(v).with({result:qe._},({result:I})=>I?.trace?.[e]).otherwise(()=>null),nodeError:Ge(v).with({error:{data:{nodeId:e}}},({error:I})=>I).otherwise(()=>null),disabled:w,configurable:_,content:(A?.nodes??[]).find(I=>I.id===e)?.content,additionalModules:(A?.nodes??[]).filter(I=>I.type==="functionNode").map(I=>({id:I.id,name:I.name,content:I.content}))})),{diff:m,contentDiff:D}=$u(e),x=S.useMemo(()=>t===nu.Stable?D?.fields?.source?.previousValue:m?.fields?.content?.previousValue,[m,D]);return S.useEffect(()=>{if(!o)return;const v=o.languages.typescript.javascriptDefaults.getExtraLibs(),w=Object.entries(v).map(([_,A])=>({filePath:_,content:A.content})).filter(_=>!_.filePath.startsWith("node:"));h.forEach(_=>{w.push({filePath:`node:${_.name}`,content:`declare module 'node:${_.name}' { ${_.content} }`})}),o.languages.typescript.javascriptDefaults.setExtraLibs(w),i?.(o)},[JSON.stringify(h),o,i]),F.jsx(S.Suspense,{fallback:F.jsx(Dd,{}),children:F.jsx(x4,{onMonacoReady:v=>a(v),value:t===nu.Stable?f.source:f,previousValue:typeof x=="string"?x:void 0,error:g??void 0,inputData:u,onChange:v=>{n.updateNode(e,w=>(t===nu.Stable?w.content={source:v}:w.content=v,w))},disabled:d,trace:l})})};Ym.__docgenInfo={description:"",methods:[],displayName:"TabFunction",props:{id:{required:!0,tsType:{name:"string"},description:""}}};const Kd={type:Ye.Function,icon:F.jsx(Tt.Text,{style:{color:"white"},children:"JS"}),displayName:"Function",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/functions",shortDescription:"Javascript lambda",color:Ti.Orange,renderTab:({id:e})=>F.jsx(Ym,{id:e}),getDiffContent:(e,t)=>{const n={},i=Ge(e).with(qe.string,()=>0).otherwise(()=>1);Ge([e,t]).with([qe.string,qe.string],([a,u])=>{a!==u&&Et.set(n,"source",{previousValue:u,status:"modified"})}).with([{source:qe.string},{source:qe.string}],([a,u])=>{a?.source!==u?.source&&Et.set(n,"source",{previousValue:u.source,status:"modified"})}).otherwise(()=>{});const o=Object.keys(n).length>0;return{...i===0?{source:e}:e,...o&&{_diff:{status:"modified",fields:n}}}},generateNode:({index:e})=>({name:`function${e}`,content:{source:fE}}),renderNode:({id:e,data:t,selected:n,specification:i})=>{const o=It(),a=Km(e);return F.jsx(ei,{id:e,specification:{...i,displayName:a===1?"Function":F.jsxs("span",{children:["Function v1 ",F.jsx(N0,{})]})},name:t.name,isSelected:n,helper:[a===0&&F.jsx(N0,{size:16})],actions:[F.jsx(dt,{type:"text",onClick:()=>o.openTab(e),children:"Edit Function"},"edit-function")]})}};var nu=(e=>(e[e.Deprecated=0]="Deprecated",e[e.Stable=1]="Stable",e))(nu||{});const Km=e=>{const{kind:t}=ct(n=>({kind:Ge(n.decisionGraph.nodes.find(i=>i.id===e)?.content).with(qe.string,()=>0).otherwise(()=>1)}));return t},N0=({size:e})=>F.jsx(ss,{placement:"top",title:'Function v1 will be deprecated in one of the upcoming releases. To use a new Function, drag and drop a new Function Node and copy your logic. For more information click "Documentation". ',children:F.jsx(R2,{style:{color:"var(--grl-color-warning-text)",fontSize:e}})}),Jm={type:Ye.Switch,icon:F.jsx(QE,{}),displayName:"Switch",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/switch",shortDescription:"Conditional branching",color:Ti.Purple,getDiffContent:(e,t)=>yt(e,n=>{const i={};(e.hitPolicy??"")!==(t.hitPolicy??"")&&Et.set(i,"hitPolicy",{status:"modified",previousValue:e.hitPolicy});const o=ho(e?.statements||[],t?.statements||[],{compareFields:(a,u)=>{const l=(a.condition??"")!==u.condition;return{hasChanges:l,fields:{...l&&{condition:{status:"modified",previousValue:u.condition}}}}}});return n.statements=o,o.find(a=>a?._diff?.status==="modified"||a?._diff?.status==="added"||a?._diff?.status==="removed")&&Et.set(i,"statements",{status:"modified"}),Object.keys(i).length>0&&(n._diff={status:"modified",fields:i}),n}),inferTypes:{needsUpdate:()=>!1,determineOutputType:e=>e.input},generateNode:({index:e})=>({name:`switch${e}`,content:{hitPolicy:"first",statements:[{id:crypto.randomUUID(),condition:"",isDefault:!1}]}}),renderNode:({specification:e,...t})=>F.jsx(w4,{specification:e,...t})},w4=({id:e,data:t,selected:n,specification:i})=>{const o=It(),{content:a,disabled:u,nodeTrace:l,compactMode:d,isGraphActive:f}=ct(({decisionGraph:v,disabled:w,simulate:_,compactMode:A,activeTab:I})=>({nodeTrace:Ge(_).with({result:qe._},({result:N})=>N?.trace?.[e]).otherwise(()=>null),content:(v?.nodes||[]).find(N=>N?.id===e)?.content,disabled:w,compactMode:A,isGraphActive:I==="graph"})),h=ws(e,{disabled:!f}),g=a?.statements||[],m=a?.hitPolicy||"first",D=v=>{o.updateNode(e,w=>(w.content.hitPolicy=v,w))},x=S.useMemo(()=>d?E4:C4,[d]);return F.jsx(ei,{id:e,className:Xe(["switch"]),specification:i,name:t.name,handleRight:!1,helper:[F.jsx(_d,{},"arrow-right")],noBodyPadding:!0,isSelected:n,actions:[F.jsx(dt,{type:"text",disabled:u,onClick:()=>{m==="first"&&g?.length>0?o.updateNode(e,v=>(v.content.statements=(v.content.statements||[]).map(w=>(w.isDefault&&(w.isDefault=!1),w)),v.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!0}),v)):o.updateNode(e,v=>(v.content.statements=(v.content.statements||[]).map(w=>(w.isDefault&&(w.isDefault=!1),w)),v.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!1}),v))},children:"Add Condition"},"add condition"),F.jsx(go,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>D("first"),disabled:u},{key:"collect",label:"Collect",disabled:u,onClick:()=>{o.updateNode(e,v=>(v.content.statements=(v.content.statements||[]).map(w=>(w.isDefault&&(w.isDefault=!1),w)),v)),D("collect")}}]},children:F.jsxs(dt,{type:"text",style:{textTransform:"capitalize",marginLeft:"auto"},children:[m," ",F.jsx(sE,{})]})},"hitPolicy")],children:F.jsx("div",{className:"switchNode",children:F.jsxs("div",{className:"switchNode__body edit nodrag",children:[!(g?.length>0)&&F.jsx(Tt.Text,{type:"secondary",className:"no-conditions",children:"No conditions"}),g.map((v,w)=>F.jsx(x,{index:w,value:v.condition,diff:v?._diff,id:v.id,isDefault:v.isDefault,totalStatements:g.length,disabled:u,hitPolicy:m,variableType:h,onSetIsDefault:_=>{o.updateNode(e,A=>{const I=A.content.statements.find(N=>N.id===v.id);return _&&(I.condition=""),I.isDefault=_,A})},isActive:Ge(l?.traceData).with({statements:qe.array(qe._)},({statements:_})=>_.some(A=>typeof A=="object"&&A&&"id"in A&&A.id===v?.id)).otherwise(()=>!1),onDelete:()=>{o.updateNode(e,_=>(_.content.statements=_.content.statements.filter(A=>A?.id!==v?.id),(_.content.statements||[]).length===1&&(_.content.statements=(_.content.statements||[]).map(A=>(A.isDefault&&(A.isDefault=!1),A))),_)),o.removeEdgeByHandleId(v?.id)},onChange:_=>{o.updateNode(e,A=>{const I=A.content.statements.find(N=>N.id===v.id);return I.condition=_,A})}},v.id))]})})})},C4=({id:e,value:t,diff:n,onChange:i,disabled:o,configurable:a=!0,onDelete:u,isActive:l,index:d=0,isDefault:f=!1,onSetIsDefault:h,totalStatements:g,hitPolicy:m,variableType:D})=>{const[x,v]=S.useState(t);S.useLayoutEffect(()=>{x!==t&&v(t)},[t]);const w=I=>{v(I),i?.(I)},_=d===g-1,A=f&&m==="first"&&_&&d>0&&(t||"")?.trim?.()?.length===0;return F.jsxs("div",{className:Xe("switchNode__statement",l&&"active",n?.status&&`diff-${n?.status}`),children:[F.jsxs("div",{className:Xe("switchNode__statement__heading",A&&"switchNode__statement__heading--without-input"),children:[(d===0||m==="collect")&&F.jsx(dt,{disabled:o,className:Xe("switchNode__statement__heading__action"),size:"small",type:"text",children:"If"}),m!=="collect"&&d>0&&F.jsx(dt,{className:Xe("switchNode__statement__heading__action",A&&"inactive"),size:"small",type:"text",disabled:o,onClick:()=>{_&&m==="first"&&h?.(!1)},children:"Else If"}),m!=="collect"&&d>0&&_&&F.jsx(dt,{className:Xe("switchNode__statement__heading__action",!A&&"inactive"),size:"small",type:"text",disabled:o,onClick:()=>{_&&m==="first"&&h?.(!0)},children:"Else"}),F.jsx("div",{style:{flexGrow:1}}),!o&&a&&F.jsx(j0,{title:"Remove condition?",okText:"Remove",onConfirm:()=>u?.(),children:F.jsx(dt,{className:"switchNode__statement__delete",size:"small",type:"text",icon:F.jsx(Au,{})})}),F.jsx(Xr,{id:e,type:"source",position:De.Right,className:Xe(l&&"switchNode__activeHandle")})]}),!A&&F.jsx("div",{className:"switchNode__statement__inputArea",children:F.jsx(bu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:n?.fields?.condition?.status==="modified",previousValue:n?.fields?.condition?.previousValue,value:x,maxRows:4,disabled:o,onChange:w,variableType:D})})]})},E4=({id:e,value:t,diff:n,onChange:i,disabled:o,configurable:a=!0,onDelete:u,isActive:l,variableType:d})=>{const[f,h]=S.useState(t);S.useLayoutEffect(()=>{f!==t&&h(t)},[t]);const g=m=>{h(m),i?.(m)};return F.jsxs("div",{className:Xe("switchNode__statement","compact",l&&"active",n?.status&&`diff-${n?.status}`),children:[F.jsx("div",{className:Xe("switchNode__statement__inputArea"),children:F.jsx(bu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:n?.fields?.condition?.status==="modified",previousValue:n?.fields?.condition?.previousValue,value:f,maxRows:4,disabled:o,onChange:g,variableType:d})}),!o&&a&&F.jsx("div",{className:"switchNode__statement__button",children:F.jsx(j0,{title:"Remove condition?",okText:"Remove",onConfirm:()=>u?.(),children:F.jsx(dt,{className:"switchNode__statement__delete",size:"small",type:"text",icon:F.jsx(Au,{})})})}),F.jsx(Xr,{id:e,type:"source",position:De.Right,className:Xe(l&&"switchNode__activeHandle")})]})},qa=(e,t)=>{const n=(e||"").trim(),i=(t||"").trim();return n===i},b4=(e,t,n)=>{const i=A4(e?.nodes??[],t?.nodes??[],n),o=S4(e?.edges??[],t?.edges??[]);return{nodes:i,edges:o,settings:e?.settings}},A4=(e,t,n)=>{const i=n?.components||[],o=n?.customNodes||[],a=new Map;return(e||[]).forEach(u=>{const l=(t||[]).find(d=>d.id===u.id);if(!l)a.set(u.id,{...u,_diff:{status:"added"}});else{const d={};(l.position.x!==u.position.x||l.position.y!==u.position.y)&&Et.set(d,"position",{status:"moved",previousValue:l.position}),l.name!==u.name&&Et.set(d,"name",{status:"modified",previousValue:l.name});const f=Ge([u.type,l.type]).with([Ye.Expression,Ye.Expression],()=>Yd?.getDiffContent?.(u?.content,l?.content)).with([Ye.DecisionTable,Ye.DecisionTable],()=>Xd?.getDiffContent?.(u?.content,l?.content)).with([Ye.Function,Ye.Function],()=>{const h=Kd?.getDiffContent?.(u?.content,l?.content);return Ge(u?.content).with(qe.string,()=>(h?._diff?.fields?.source?.status==="modified"&&Et.set(d,"content",{status:"modified",previousValue:h?._diff?.fields?.source?.previousValue}),h?.source)).otherwise(()=>h)}).with([Ye.Switch,Ye.Switch],()=>Jm?.getDiffContent?.(u?.content,l?.content)).otherwise(()=>{const h=i.find(m=>m.type===u.type);if(h)return h?.getDiffContent?.(u?.content,l?.content);const g=o.find(m=>u?.type==="customNode"&&u?.content?.kind===m?.kind);return g?g?.calculateDiff?.(u?.content,l?.content):null});Object.keys(d||{}).filter(h=>h!=="position").length>0||f?._diff?.status==="modified"?a.set(u.id,{...u,content:f??u.content,_diff:{status:"modified",fields:d}}):Object.keys(d||{}).length===1&&d?.position?.status==="moved"?a.set(u.id,{...u,content:f??u.content,_diff:{status:"moved",fields:d}}):a.set(u.id,{...u,_diff:{status:"unchanged"}})}}),(t||[]).forEach(u=>{a.has(u.id)||a.set(u.id,{...u,_diff:{status:"removed"}})}),Array.from(a.values())},S4=(e,t)=>{const n=new Map;return(e||[]).forEach(i=>{(t||[]).find(a=>a.id===i.id)?n.set(i.id,{...i,_diff:{status:"unchanged"}}):n.set(i.id,{...i,_diff:{status:"added"}})}),(t||[]).forEach(i=>{n.has(i.id)||n.set(i.id,{...i,_diff:{status:"removed"}})}),Array.from(n.values())},ho=(e,t,n={})=>{const{idField:i="id",compareFields:o}=n,a=m=>m[i]||m._id,u=new Map(t.map((m,D)=>[a(m),{...m,index:D}])),l=new Map(e.map((m,D)=>[a(m),{...m,index:D}])),d=[],f=new Set,h=new Set;e.forEach((m,D)=>{u.has(a(m))||f.add(D)}),t.forEach((m,D)=>{l.has(a(m))||h.add(D)});const g=(m,D)=>{const x=Array.from(f).filter(A=>A<D).length,v=Array.from(h).filter(A=>A<m).length,w=D-x;return m-v!==w};return e.forEach((m,D)=>{const x=u.get(a(m));if(!x)d.push({...m,originalIndex:D,_diff:{status:"added",newIndex:D}});else{const v=g(x.index,D),w=o?o(m,x):{hasChanges:!1};w.hasChanges||v?d.push({...m,originalIndex:D,_diff:{status:"modified",positionChanged:v,previousIndex:x.index,newIndex:D,...w.fields?{fields:w.fields}:{}}}):d.push({...m,originalIndex:D,_diff:{status:"unchanged"}})}}),t.forEach((m,D)=>{if(!l.has(a(m))){let x=D;for(;x<d.length&&u.get(a(d[x]))?.index<D;)x++;d.splice(x,0,{...m,originalIndex:D,isRemoved:!0,_diff:{status:"removed",previousIndex:D}})}}),d.map(({originalIndex:m,isRemoved:D,...x})=>x)},nn=Symbol("private"),F4=e=>({id:e?.id,sourceId:e?.source,type:e?.type,targetId:e?.target,name:e?.label,sourceHandle:e.sourceHandle??void 0,targetHandle:e.targetHandle??void 0}),cd=e=>({id:e.id,type:e.type,position:e.position,height:e[nn]?.dimensions?.height,width:e[nn]?.dimensions?.width,selected:e[nn]?.selected,data:{name:e.name,kind:e?.content?.kind}}),ao=e=>e.map(cd),ld=e=>({id:e.id,source:e.sourceId,type:e?.type||"edge",target:e.targetId,label:e.name,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,markerEnd:{type:Co.ArrowClosed,width:20,height:20}}),dd=e=>e.filter(t=>t.sourceId&&t.targetId).map(ld);var st=(e=>(e[e.Input=0]="Input",e[e.Output=1]="Output",e[e.InferredInput=2]="InferredInput",e[e.InferredOutput=3]="InferredOutput",e))(st||{});const Cs=j.createContext({}),Qm=e=>{const{children:t}=e,n=S.useMemo(()=>wl()(()=>({id:void 0,simulate:void 0,decisionGraph:{nodes:[],edges:[]},hoveredEdgeId:null,openTabs:[],activeTab:"graph",name:"graph.json",disabled:!1,configurable:!0,components:[],customNodes:[],activePanel:void 0,panels:[],compactMode:localStorage.getItem("jdm-compact-mode")==="true",nodeTypes:{},globalType:{}})),[]),i=S.useMemo(()=>wl(()=>({onChange:void 0,onPanelsChange:void 0})),[]),o=S.useMemo(()=>wl(()=>({nodesState:S.createRef(),edgesState:S.createRef(),graphClipboard:S.createRef()})),[]),a=S.useMemo(()=>({handleNodesChange:(u=[])=>{const{nodesState:l}=o.getState(),{decisionGraph:d}=n.getState(),[,,f]=l.current;let h=!1;f?.(u);const g=yt(d,m=>{u.forEach(D=>Ge(D).with({type:"position"},x=>{const v=m.nodes.find(w=>w.id===x.id);v&&x.position&&!mn(v.position,x.position)&&(h=!0,v.position=x.position)}).with({type:"dimensions"},x=>{const v=m.nodes.find(w=>w.id===x.id);v&&!mn(v[nn]?.dimensions,x.dimensions)&&(h=!0,v[nn]??={},v[nn].dimensions={height:x.dimensions?.height,width:x.dimensions?.width})}).with({type:"select"},x=>{const v=m.nodes.find(w=>w.id===x.id);v&&v[nn]?.selected!==x.selected&&(h=!0,v[nn]??={},v[nn].selected=x.selected)}).otherwise(()=>{}))});h&&(n.setState({decisionGraph:g}),i.getState().onChange?.(g))},handleEdgesChange:(u=[])=>{const{decisionGraph:l}=n.getState(),{edgesState:d}=o.getState();if(d?.current?.[2](u),u.find(f=>f.type==="remove")){const f=yt(l,h=>{const g=(h.edges||[]).map(m=>u.find(x=>"id"in x&&x.id===m.id)?.type==="remove"?null:m).filter(m=>!!m);h.edges=g});n.setState({decisionGraph:f}),i.getState().onChange?.(f)}},setNodes:(u=[])=>{const{nodesState:l}=o.getState(),{decisionGraph:d}=n.getState();l?.current?.[1](ao(u));const f=yt(d,h=>{h.nodes=u});n.setState({decisionGraph:f}),i.getState().onChange?.(f)},addNodes:u=>{const{nodesState:l}=o.getState(),{decisionGraph:d}=n.getState();l.current[0]?.some(g=>g.type===Ye.Input)&&(u=u.filter(g=>g.type!==Ye.Input)),l.current[1]?.(g=>g.concat(ao(u)));const h=yt(d,g=>{g.nodes=(g.nodes||[]).concat(u)});n.setState({decisionGraph:h}),i.getState().onChange?.(h)},duplicateNodes:u=>{const{nodesState:l,edgesState:d}=o.getState(),{decisionGraph:f}=n.getState();let h=(f?.nodes||[]).filter(_=>u.includes(_.id));if(l.current[0]?.some(_=>_.type===Ye.Input)&&(h=h.filter(_=>_.type!==Ye.Input)),h.length===0)return;const m=h.reduce((_,A)=>({..._,[A.id]:crypto.randomUUID()}),{}),D=h.map(_=>({..._,id:m[_.id],position:{x:_.position?.x||0,y:(_.position?.y||0)+140}})),x=Object.keys(m),v=[];D.length>0&&(d.current?.[0]||[]).forEach(_=>{x.includes(_.source)&&x.includes(_.target)&&v.push({id:crypto.randomUUID(),type:_.type,sourceId:m[_.source],targetId:m[_.target],sourceHandle:_.sourceHandle??void 0,targetHandle:_.targetHandle??void 0})}),l.current[1]?.(_=>_.concat(D.map(cd))),d.current[1]?.(_=>_.concat(v.map(ld)));const w=yt(f,_=>{_.nodes.push(...D),_.edges.push(...v)});n.setState({decisionGraph:w}),i.getState().onChange?.(w)},copyNodes:u=>{const{graphClipboard:l,nodesState:d}=o.getState();if(!l.current||!d.current)return;const[f]=d.current,h=f.filter(g=>u.includes(g.id));l.current.copyNodes(h)},pasteNodes:()=>{const{graphClipboard:u}=o.getState();u.current?.pasteNodes?.()},removeNodes:(u=[])=>{const{nodesState:l,edgesState:d}=o.getState(),{decisionGraph:f,nodeTypes:h}=n.getState();l.current[1]?.(D=>D.filter(x=>u.every(v=>x.id!==v))),d.current[1]?.(D=>D.filter(x=>u.every(v=>x.source!==v&&x.target!==v&&x.sourceHandle!==v&&x.targetHandle!==v)));const g=yt(f,D=>{const x=D.nodes||[],v=D.edges||[];D.nodes=x.filter(w=>u.every(_=>w.id!==_)),D.edges=v.filter(w=>u.every(_=>w.sourceId!==_&&w.targetId!==_&&w.sourceHandle!==_&&w.targetHandle!==_))}),m=yt(h,D=>{u.forEach(x=>{x in D&&delete D[x]})});n.setState({decisionGraph:g,nodeTypes:m}),i.getState().onChange?.(g)},addEdges:u=>{const{edgesState:l}=o.getState(),{decisionGraph:d}=n.getState();l.current?.[1]?.(h=>h.concat(u.map(ld)));const f=yt(d,h=>{h.edges=(h.edges||[]).concat(u)});n.setState({decisionGraph:f}),i.getState().onChange?.(f)},setEdges:(u=[])=>{const{edgesState:l}=o.getState(),{decisionGraph:d}=n.getState();l?.current?.[1]?.(dd(u));const f=yt(d,h=>{h.edges=u});n.setState({decisionGraph:f}),i.getState().onChange?.(f)},removeEdges:u=>{const{edgesState:l}=o.getState(),{decisionGraph:d}=n.getState();l?.current?.[1]?.(h=>h.filter(g=>!u.find(m=>g.id===m)));const f=yt(d,h=>{h.edges=h.edges.filter(g=>!u.find(m=>g.id===m))});n.setState({decisionGraph:f}),i.getState().onChange?.(f)},removeEdgeByHandleId:u=>{if(!u)return;const{edgesState:l}=o.getState(),{decisionGraph:d}=n.getState();l?.current?.[1]?.(h=>h.filter(g=>g.sourceHandle!==u));const f=yt(d,h=>{h.edges=h.edges.filter(g=>g.sourceHandle!==u)});n.setState({decisionGraph:f}),i.getState().onChange?.(f)},updateNode:(u,l)=>{const{decisionGraph:d}=n.getState(),{nodesState:f}=o.getState(),[h,g]=f.current,m=yt(d,w=>{const _=(w.nodes??[]).find(A=>A?.id===u);_&&l(_)}),D=m.nodes.find(w=>w.id===u);if(!D)return;const x=cd(D),v=h.find(w=>w.id===u);mn(x,v)||g(w=>w.map(_=>_.id===u?x:_)),n.setState({decisionGraph:m}),i.getState().onChange?.(m)},setDecisionGraph:(u,l={})=>{const{decisionGraph:d}=n.getState(),{edgesState:f,nodesState:h}=o.getState(),{skipOnChangeEvent:g=!1}=l,m=yt(d,D=>{Object.assign(D,u)});f?.current?.[1](dd(m?.edges??[])),h?.current?.[1](ao(m?.nodes??[])),n.setState({decisionGraph:m}),g||i.getState().onChange?.(m)},calculateDiffGraph:(u,l)=>{const{components:d,customNodes:f}=n.getState();return b4(u,l,{components:d,customNodes:f})},setHoveredEdgeId:u=>n.setState({hoveredEdgeId:u}),openTab:u=>{const{openTabs:l}=n.getState(),d=l.find(f=>f===u);if(u==="graph")return n.setState({activeTab:u});d?n.setState({activeTab:d}):n.setState({openTabs:[...l,u],activeTab:u})},closeTab:(u,l)=>{const{openTabs:d,activeTab:f}=n.getState(),h=d?.findIndex(v=>v===u),g=d?.[h],m=Ge(l).with(void 0,()=>d.filter(v=>v!==g)).with("close",()=>d.filter(v=>v!==g)).with("close-all",()=>[]).with("close-other",()=>d.filter(v=>v===g)).with("close-right",()=>d.slice(0,h+1)).with("close-left",()=>d.slice(h)).otherwise(()=>d),D={openTabs:m};m?.find(v=>v===f)||(D.activeTab=m?.[h-1]??"graph"),n.setState(D)},setActivePanel:u=>{const{panels:l}=n.getState(),d={activePanel:u===void 0?void 0:(l||[]).find(f=>f.id===u)?.id};i.getState()?.onPanelsChange?.(u),n.setState(d)},setCompactMode:u=>{const l={compactMode:u};localStorage.setItem("jdm-compact-mode",`${u}`),n.setState(l)},toggleCompactMode:()=>{const{compactMode:u}=n.getState(),l=!u,d={compactMode:l};localStorage.setItem("jdm-compact-mode",`${l}`),n.setState(d)},setNodeType:(u,l,d)=>{const{nodeTypes:f}=n.getState(),h=yt(f,g=>{g[u]??={},g[u][l]=d});n.setState({nodeTypes:h})},removeNodeType:(u,l)=>{const{nodeTypes:d}=n.getState(),f=yt(d,h=>{u in h&&(l?l in h[u]&&delete h[u][l]:delete h[u])});n.setState({nodeTypes:f})},triggerNodeSelect:(u,l)=>{const{decisionGraph:d}=n.getState(),{nodesState:f,edgesState:h}=o.getState(),[,g]=f.current,[,m]=h.current,D=yt(d,x=>{const v=x.nodes.find(w=>w.id===u);v&&(l==="only"&&x.nodes.forEach(w=>{w[nn]&&(w[nn].selected=!1)}),v[nn]??={},v[nn].selected=Ge(l).with("only",()=>!0).otherwise(()=>!v[nn]?.selected))});g(ao(D.nodes)),l=="only"&&m(x=>x.map(v=>({...v,selected:!1}))),n.setState({decisionGraph:D}),i.getState().onChange?.(D)}}),[]);return F.jsx(Cs.Provider,{value:{stateStore:n,referenceStore:o,listenerStore:i,actions:a},children:t})};function ct(e,t=mn){return j.useContext(Cs).stateStore(e,t)}function ey(e,t=mn){return j.useContext(Cs).listenerStore(e,t)}function N4(e,t=mn){return j.useContext(Cs).referenceStore(e,t)}function It(){return j.useContext(Cs).actions}function Es(){return j.useContext(Cs)}const $u=e=>{const{diff:t,contentDiff:n}=ct(i=>{const o=(i?.decisionGraph?.nodes??[]).find(a=>a.id===e);return{diff:o?._diff,contentDiff:o?.content?._diff}});return{diff:t,contentDiff:n}},T4=e=>{const{diff:t}=ct(n=>({diff:(n?.decisionGraph?.edges??[]).find(o=>o.id===e)?._diff}));return{diff:t}};Qm.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphProvider"};const I4=({id:e,defaultValue:t,value:n,name:i,disabled:o=!1,configurable:a=!0,onChange:u,components:l,customNodes:d,defaultActivePanel:f,panels:h,simulate:g,onPanelsChange:m,onReactFlowInit:D,onCodeExtension:x,onFunctionReady:v})=>{const w=S.useRef(!1),_=It(),{stateStore:A,listenerStore:I}=Es(),{decisionGraph:N}=ct(({decisionGraph:z})=>({decisionGraph:z})),$=oE(z=>{u?.(z)},100);return S.useEffect(()=>{A.setState({id:e,disabled:o,configurable:a,components:Array.isArray(l)?l:[],customNodes:Array.isArray(d)?d:[],panels:h})},[e,o,a,l,d,h]),S.useEffect(()=>{A.setState({name:i??"graph.json"})},[i]),S.useEffect(()=>{A.setState({simulate:g})},[g]),S.useEffect(()=>{I.setState({onReactFlowInit:D,onPanelsChange:m,onCodeExtension:x,onFunctionReady:v})},[D,m,x,v]),S.useEffect(()=>{I.setState({onChange:$})},[$]),S.useEffect(()=>{w.current&&n!==void 0&&!mn(n,N)&&_.setDecisionGraph(n)},[n]),S.useEffect(()=>{n!==void 0?_.setDecisionGraph(n):t!==void 0&&_.setDecisionGraph(t),A.setState({activePanel:f}),w.current=!0},[]),null},k4=()=>{let e=null;return{walk:function*(t){const n=B4(t);if(e&&mn(n,e.digest)){yield*M4(t,e.iterator);return}const i=[];for(const o of R4(t))i.push({id:o.node.id,incomers:o.incomers.map(a=>a.id)}),yield o;e={digest:n,iterator:i}}}},B4=e=>{const t=e.nodes.map(i=>i.id),n=e.edges;return{nodes:t,edges:n}};function*R4(e){const t=ao(e.nodes),n=dd(e.edges),i=e.nodes.find(l=>l.type==="inputNode"),o=t.find(l=>l.id===i?.id);if(!i||!o||O4(o,t,n))return;yield{node:i,incomers:[]};const a=new Set;a.add(i.id);const u=pu(o,t,n);for(;u.length>0;){const l=u.pop();if(a.has(l.id))continue;const d=q3(l,t,n),f=d.filter(m=>!a.has(m.id));if(f.length>0){u.push(l,...f);continue}a.add(l.id);const h=e.nodes.find(m=>m.id===l.id);if(h){const m=e.nodes.filter(D=>d.some(x=>x.id===D.id));yield{node:h,incomers:m}}const g=pu(l,t,n);u.push(...g)}}function*M4(e,t){for(const n of t){const i=e.nodes.find(a=>a.id===n.id);if(!i)continue;const o=e.nodes.filter(a=>n.incomers.includes(a.id));yield{node:i,incomers:o}}}const O4=(e,t,n)=>{const i=new Set,o=new Set,a=u=>{i.add(u.id),o.add(u.id);const l=pu(u,t,n);for(const d of l)if(i.has(d.id)){if(o.has(d.id))return!0}else if(a(d))return!0;return o.delete(u.id),!1};return a(e)},P4={type:Ye.Input,icon:F.jsx(y2,{}),displayName:"Request",color:Ti.Green,documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Provides input context",generateNode:()=>({name:"request"}),renderNode:({id:e,data:t,selected:n,specification:i})=>{const o=It(),{disabled:a}=ct(({disabled:u})=>({disabled:u}));return F.jsx(ei,{id:e,specification:i,name:t.name,isSelected:n,handleLeft:!1,menuItems:[{key:"documentation",icon:F.jsx(ng,{}),label:"Documentation",onClick:()=>window.open(i.documentationUrl,"_href")},{key:"delete",icon:F.jsx(Au,{}),danger:!0,label:F.jsx(to,{left:"Delete",right:eu.shortcut("Backspace")}),disabled:a,onClick:()=>vd.confirm({icon:null,title:"Delete node",content:F.jsxs(Tt.Text,{children:["Are you sure you want to delete ",F.jsx(Tt.Text,{strong:!0,children:t.name})," node."]}),okButtonProps:{danger:!0},onOk:()=>o.removeNodes([e])})}]})}},$4={type:Ye.Output,icon:F.jsx(D2,{}),color:Ti.Green,displayName:"Response",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Outputs the context",generateNode:()=>({name:"response"}),renderNode:({id:e,data:t,selected:n,specification:i})=>F.jsx(ei,{id:e,specification:i,name:t.name,isSelected:n,handleRight:!1})};const Si={[Ye.Input]:P4,[Ye.Output]:$4,[Ye.DecisionTable]:Xd,[Ye.Expression]:Yd,[Ye.Function]:Kd,[Ye.Switch]:Jm},z4=()=>{const{stateStore:e}=Es();return S.useEffect(()=>{if(lo())return e.subscribe(({simulate:t,nodeTypes:n,decisionGraph:i},o)=>{if(mn(t,o?.simulate))return;const a=Ge(t).with({result:qe.nonNullable},({result:d})=>d.trace).otherwise(()=>null);if(a===null){const d=yt(n,f=>{Object.values(f).forEach(h=>{delete h[st.Input],delete h[st.Output]})});e.setState({nodeTypes:d});return}const u=Object.values(a);if(u.length===0)return;const l=yt(n,d=>{u.forEach(f=>{i.nodes.find(g=>g.id===f.id)?.type!=="inputNode"&&(d[f.id]??={},d[f.id][st.Output]=new gn(f.output??{}),d[f.id][st.Input]=new gn(f.input??{}))})});e.setState({nodeTypes:l})})},[]),S.useEffect(()=>{if(!lo())return;const t=k4();return e.subscribe((n,i)=>{const o=T0(n),a=T0(i),u=j4(n,i);if(mn(o,a)&&!u)return;const l=L4(n,i,t);l.isModified&&e.setState({nodeTypes:l.nodeTypes})})},[]),S.useEffect(()=>{if(lo())return e.subscribe((t,n)=>{const i=I0(t),o=I0(n);if(mn(i,o))return;const a=gn.fromJson({Object:{}});t.decisionGraph.nodes.forEach(u=>{const l=t.nodeTypes[u.id],d=l?.[st.Output]??l?.[st.InferredOutput]??gn.fromJson({Object:{}});a.set(u.name,d)}),e.setState({globalType:{$nodes:a}})})},[]),null},L4=({decisionGraph:e,nodeTypes:t,customNodes:n},i,o)=>{let a=!1;const u=yt(t,l=>{o.walk(e).forEach(({node:d,incomers:f})=>{if(d.type==="inputNode")return;const h=f.map(N=>{const $=l[N.id]??{};return $[st.Output]??$[st.InferredOutput]}).filter(N=>!!N).map(N=>N.clone()),g=Ge(h.length).with(1,()=>h[0]).otherwise(()=>gn.fromIncoming(h));l?.[d.id]?.[st.InferredInput]?.equal(g)||(a=!0,l[d.id]??={},l[d.id][st.InferredInput]=g);const D=Si[d.type]?.inferTypes??n.find(N=>N.kind===d.type)?.inferTypes;if(!D)return;const x=l?.[d.id]?.[st.Input]??l?.[d.id]?.[st.InferredInput]??gn.fromJson("Any"),v=i.nodeTypes?.[d.id]?.[st.Input]??i.nodeTypes?.[d.id]?.[st.InferredInput]??gn.fromJson("Any"),w=i.decisionGraph.nodes.find(N=>N.id===d.id)?.content;if(!(D.needsUpdate(d.content,w)||!x.equal(v))&&l?.[d.id]?.[st.InferredOutput])return;const A=D.determineOutputType({input:x,content:d.content});l?.[d.id]?.[st.InferredOutput]?.equal(A)||(a=!0,l[d.id]??={},l[d.id][st.InferredOutput]=A)})});return{isModified:a,nodeTypes:u}},T0=({decisionGraph:e,nodeTypes:t,customNodes:n})=>{const i=e.edges,o=e.nodes.map(({id:f,type:h})=>({id:f,type:h})),a=n.map(f=>f.kind),u=Object.entries(t).map(([f,h])=>({id:f,input:fd(h[st.Input]),output:fd(h[st.Output])})),l=e.nodes.find(f=>f.type==="inputNode")?.id,d=Ge(t?.[l??""]?.[st.InferredOutput]).with(qe.nonNullable,f=>f.hash()).otherwise(()=>null);return{edgesData:i,nodesData:o,typesData:u,customNodesData:a,inputNodeType:d}},j4=({decisionGraph:e,customNodes:t},n)=>e.nodes.map(o=>{const a=Si[o.type]?.inferTypes??t.find(l=>l.kind===o.type)?.inferTypes;if(!a)return!1;const u=n.decisionGraph.nodes.find(l=>l.id===o.id);return u?a.needsUpdate(o.content,u.content):!0}).some(o=>o),fd=e=>{if(e)return e.__hash||(e.__hash=e.hash()),e.__hash},I0=e=>({nodeInfo:e.decisionGraph.nodes.map(n=>{const i=e.nodeTypes[n.id],o=i?.[st.Output]??i?.[st.InferredOutput];return{id:n.id,type:fd(o),name:n.name}})}),ty=()=>{const e=It(),{panels:t,activePanel:n}=ct(({panels:o,activePanel:a})=>({panels:o,activePanel:a})),i=S.useMemo(()=>n===void 0?void 0:(t||[]).find(o=>o.id===n),[n,t]);return i?F.jsxs("div",{className:"grl-dg__panel",children:[F.jsxs("div",{className:"grl-dg__panel__toolbar",children:[F.jsx("div",{className:"grl-dg__panel__toolbar__content",children:F.jsx(Tt.Text,{children:i.title})}),F.jsx("div",{className:"grl-dg__panel__toolbar__actions",children:F.jsx(ss,{placement:"topLeft",title:"Close panel",children:F.jsx(dt,{size:"small",type:"text",icon:F.jsx(po,{}),onClick:()=>e.setActivePanel(void 0)})})})]}),F.jsx("div",{className:"grl-dg__panel__content",children:i?.renderPanel?.({})})]}):null};ty.__docgenInfo={description:"",methods:[],displayName:"GraphPanel"};var We;(function(e){e.assertEqual=o=>o;function t(o){}e.assertIs=t;function n(o){throw new Error}e.assertNever=n,e.arrayToEnum=o=>{const a={};for(const u of o)a[u]=u;return a},e.getValidEnumValues=o=>{const a=e.objectKeys(o).filter(l=>typeof o[o[l]]!="number"),u={};for(const l of a)u[l]=o[l];return e.objectValues(u)},e.objectValues=o=>e.objectKeys(o).map(function(a){return o[a]}),e.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const a=[];for(const u in o)Object.prototype.hasOwnProperty.call(o,u)&&a.push(u);return a},e.find=(o,a)=>{for(const u of o)if(a(u))return u},e.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function i(o,a=" | "){return o.map(u=>typeof u=="string"?`'${u}'`:u).join(a)}e.joinValues=i,e.jsonStringifyReplacer=(o,a)=>typeof a=="bigint"?a.toString():a})(We||(We={}));var hd;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(hd||(hd={}));const me=We.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Gr=e=>{switch(typeof e){case"undefined":return me.undefined;case"string":return me.string;case"number":return isNaN(e)?me.nan:me.number;case"boolean":return me.boolean;case"function":return me.function;case"bigint":return me.bigint;case"symbol":return me.symbol;case"object":return Array.isArray(e)?me.array:e===null?me.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?me.promise:typeof Map<"u"&&e instanceof Map?me.map:typeof Set<"u"&&e instanceof Set?me.set:typeof Date<"u"&&e instanceof Date?me.date:me.object;default:return me.unknown}},oe=We.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),H4=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class yn extends Error{constructor(t){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}get errors(){return this.issues}format(t){const n=t||function(a){return a.message},i={_errors:[]},o=a=>{for(const u of a.issues)if(u.code==="invalid_union")u.unionErrors.map(o);else if(u.code==="invalid_return_type")o(u.returnTypeError);else if(u.code==="invalid_arguments")o(u.argumentsError);else if(u.path.length===0)i._errors.push(n(u));else{let l=i,d=0;for(;d<u.path.length;){const f=u.path[d];d===u.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(n(u))):l[f]=l[f]||{_errors:[]},l=l[f],d++}}};return o(this),i}static assert(t){if(!(t instanceof yn))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,We.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},i=[];for(const o of this.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(t(o))):i.push(t(o));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}yn.create=e=>new yn(e);const vs=(e,t)=>{let n;switch(e.code){case oe.invalid_type:e.received===me.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case oe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,We.jsonStringifyReplacer)}`;break;case oe.unrecognized_keys:n=`Unrecognized key(s) in object: ${We.joinValues(e.keys,", ")}`;break;case oe.invalid_union:n="Invalid input";break;case oe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${We.joinValues(e.options)}`;break;case oe.invalid_enum_value:n=`Invalid enum value. Expected ${We.joinValues(e.options)}, received '${e.received}'`;break;case oe.invalid_arguments:n="Invalid function arguments";break;case oe.invalid_return_type:n="Invalid function return type";break;case oe.invalid_date:n="Invalid date";break;case oe.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:We.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case oe.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case oe.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case oe.custom:n="Invalid input";break;case oe.invalid_intersection_types:n="Intersection results could not be merged";break;case oe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case oe.not_finite:n="Number must be finite";break;default:n=t.defaultError,We.assertNever(e)}return{message:n}};let ny=vs;function V4(e){ny=e}function vu(){return ny}const _u=e=>{const{data:t,path:n,errorMaps:i,issueData:o}=e,a=[...n,...o.path||[]],u={...o,path:a};if(o.message!==void 0)return{...o,path:a,message:o.message};let l="";const d=i.filter(f=>!!f).slice().reverse();for(const f of d)l=f(u,{data:t,defaultError:l}).message;return{...o,path:a,message:l}},U4=[];function pe(e,t){const n=vu(),i=_u({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===vs?void 0:vs].filter(o=>!!o)});e.common.issues.push(i)}class Lt{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const i=[];for(const o of n){if(o.status==="aborted")return Se;o.status==="dirty"&&t.dirty(),i.push(o.value)}return{status:t.value,value:i}}static async mergeObjectAsync(t,n){const i=[];for(const o of n){const a=await o.key,u=await o.value;i.push({key:a,value:u})}return Lt.mergeObjectSync(t,i)}static mergeObjectSync(t,n){const i={};for(const o of n){const{key:a,value:u}=o;if(a.status==="aborted"||u.status==="aborted")return Se;a.status==="dirty"&&t.dirty(),u.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof u.value<"u"||o.alwaysSet)&&(i[a.value]=u.value)}return{status:t.value,value:i}}}const Se=Object.freeze({status:"aborted"}),is=e=>({status:"dirty",value:e}),Gt=e=>({status:"valid",value:e}),pd=e=>e.status==="aborted",gd=e=>e.status==="dirty",So=e=>e.status==="valid",Fo=e=>typeof Promise<"u"&&e instanceof Promise;function Du(e,t,n,i){if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function ry(e,t,n,i,o){if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var xe;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(xe||(xe={}));var uo,co;class ir{constructor(t,n,i,o){this._cachedPath=[],this.parent=t,this.data=n,this._path=i,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const k0=(e,t)=>{if(So(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new yn(e.common.issues);return this._error=n,this._error}}};function Ie(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:i,description:o}=e;if(t&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:o}:{errorMap:(u,l)=>{var d,f;const{message:h}=e;return u.code==="invalid_enum_value"?{message:h??l.defaultError}:typeof l.data>"u"?{message:(d=h??i)!==null&&d!==void 0?d:l.defaultError}:u.code!=="invalid_type"?{message:l.defaultError}:{message:(f=h??n)!==null&&f!==void 0?f:l.defaultError}},description:o}}class Pe{constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(t){return Gr(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Gr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Lt,ctx:{common:t.parent.common,data:t.data,parsedType:Gr(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Fo(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const i=this.safeParse(t,n);if(i.success)return i.data;throw i.error}safeParse(t,n){var i;const o={common:{issues:[],async:(i=n?.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gr(t)},a=this._parseSync({data:t,path:o.path,parent:o});return k0(o,a)}async parseAsync(t,n){const i=await this.safeParseAsync(t,n);if(i.success)return i.data;throw i.error}async safeParseAsync(t,n){const i={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Gr(t)},o=this._parse({data:t,path:i.path,parent:i}),a=await(Fo(o)?o:Promise.resolve(o));return k0(i,a)}refine(t,n){const i=o=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,a)=>{const u=t(o),l=()=>a.addIssue({code:oe.custom,...i(o)});return typeof Promise<"u"&&u instanceof Promise?u.then(d=>d?!0:(l(),!1)):u?!0:(l(),!1)})}refinement(t,n){return this._refinement((i,o)=>t(i)?!0:(o.addIssue(typeof n=="function"?n(i,o):n),!1))}_refinement(t){return new qn({schema:this,typeName:Ae.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}optional(){return rr.create(this,this._def)}nullable(){return Qr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Zn.create(this,this._def)}promise(){return Ds.create(this,this._def)}or(t){return ko.create([this,t],this._def)}and(t){return Bo.create(this,t,this._def)}transform(t){return new qn({...Ie(this._def),schema:this,typeName:Ae.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new $o({...Ie(this._def),innerType:this,defaultValue:n,typeName:Ae.ZodDefault})}brand(){return new Jd({typeName:Ae.ZodBranded,type:this,...Ie(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new zo({...Ie(this._def),innerType:this,catchValue:n,typeName:Ae.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Go.create(this,t)}readonly(){return Lo.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const G4=/^c[^\s-]{8,}$/i,Z4=/^[0-9a-z]+$/,W4=/^[0-9A-HJKMNP-TV-Z]{26}$/,q4=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,X4=/^[a-z0-9_-]{21}$/i,Y4=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K4=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,J4="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ol;const Q4=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,eF=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,tF=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,iy="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",nF=new RegExp(`^${iy}$`);function sy(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function rF(e){return new RegExp(`^${sy(e)}$`)}function oy(e){let t=`${iy}T${sy(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function iF(e,t){return!!((t==="v4"||!t)&&Q4.test(e)||(t==="v6"||!t)&&eF.test(e))}class Hn extends Pe{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==me.string){const a=this._getOrReturnCtx(t);return pe(a,{code:oe.invalid_type,expected:me.string,received:a.parsedType}),Se}const i=new Lt;let o;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="max")t.data.length>a.value&&(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),i.dirty());else if(a.kind==="length"){const u=t.data.length>a.value,l=t.data.length<a.value;(u||l)&&(o=this._getOrReturnCtx(t,o),u?pe(o,{code:oe.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&pe(o,{code:oe.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),i.dirty())}else if(a.kind==="email")K4.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"email",code:oe.invalid_string,message:a.message}),i.dirty());else if(a.kind==="emoji")Ol||(Ol=new RegExp(J4,"u")),Ol.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"emoji",code:oe.invalid_string,message:a.message}),i.dirty());else if(a.kind==="uuid")q4.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"uuid",code:oe.invalid_string,message:a.message}),i.dirty());else if(a.kind==="nanoid")X4.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"nanoid",code:oe.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid")G4.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"cuid",code:oe.invalid_string,message:a.message}),i.dirty());else if(a.kind==="cuid2")Z4.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"cuid2",code:oe.invalid_string,message:a.message}),i.dirty());else if(a.kind==="ulid")W4.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"ulid",code:oe.invalid_string,message:a.message}),i.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{o=this._getOrReturnCtx(t,o),pe(o,{validation:"url",code:oe.invalid_string,message:a.message}),i.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"regex",code:oe.invalid_string,message:a.message}),i.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),i.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.invalid_string,validation:{startsWith:a.value},message:a.message}),i.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.invalid_string,validation:{endsWith:a.value},message:a.message}),i.dirty()):a.kind==="datetime"?oy(a).test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.invalid_string,validation:"datetime",message:a.message}),i.dirty()):a.kind==="date"?nF.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.invalid_string,validation:"date",message:a.message}),i.dirty()):a.kind==="time"?rF(a).test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.invalid_string,validation:"time",message:a.message}),i.dirty()):a.kind==="duration"?Y4.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"duration",code:oe.invalid_string,message:a.message}),i.dirty()):a.kind==="ip"?iF(t.data,a.version)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"ip",code:oe.invalid_string,message:a.message}),i.dirty()):a.kind==="base64"?tF.test(t.data)||(o=this._getOrReturnCtx(t,o),pe(o,{validation:"base64",code:oe.invalid_string,message:a.message}),i.dirty()):We.assertNever(a);return{status:i.value,value:t.data}}_regex(t,n,i){return this.refinement(o=>t.test(o),{validation:n,code:oe.invalid_string,...xe.errToObj(i)})}_addCheck(t){return new Hn({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...xe.errToObj(t)})}url(t){return this._addCheck({kind:"url",...xe.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...xe.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...xe.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...xe.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...xe.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...xe.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...xe.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...xe.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...xe.errToObj(t)})}datetime(t){var n,i;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:(n=t?.offset)!==null&&n!==void 0?n:!1,local:(i=t?.local)!==null&&i!==void 0?i:!1,...xe.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...xe.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...xe.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...xe.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n?.position,...xe.errToObj(n?.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...xe.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...xe.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...xe.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...xe.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...xe.errToObj(n)})}nonempty(t){return this.min(1,xe.errToObj(t))}trim(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Hn({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Hn.create=e=>{var t;return new Hn({checks:[],typeName:Ae.ZodString,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...Ie(e)})};function sF(e,t){const n=(e.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,o=n>i?n:i,a=parseInt(e.toFixed(o).replace(".","")),u=parseInt(t.toFixed(o).replace(".",""));return a%u/Math.pow(10,o)}class Yr extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==me.number){const a=this._getOrReturnCtx(t);return pe(a,{code:oe.invalid_type,expected:me.number,received:a.parsedType}),Se}let i;const o=new Lt;for(const a of this._def.checks)a.kind==="int"?We.isInteger(t.data)||(i=this._getOrReturnCtx(t,i),pe(i,{code:oe.invalid_type,expected:"integer",received:"float",message:a.message}),o.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(i=this._getOrReturnCtx(t,i),pe(i,{code:oe.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(i=this._getOrReturnCtx(t,i),pe(i,{code:oe.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),o.dirty()):a.kind==="multipleOf"?sF(t.data,a.value)!==0&&(i=this._getOrReturnCtx(t,i),pe(i,{code:oe.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(i=this._getOrReturnCtx(t,i),pe(i,{code:oe.not_finite,message:a.message}),o.dirty()):We.assertNever(a);return{status:o.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,xe.toString(n))}gt(t,n){return this.setLimit("min",t,!1,xe.toString(n))}lte(t,n){return this.setLimit("max",t,!0,xe.toString(n))}lt(t,n){return this.setLimit("max",t,!1,xe.toString(n))}setLimit(t,n,i,o){return new Yr({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:i,message:xe.toString(o)}]})}_addCheck(t){return new Yr({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:xe.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:xe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:xe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:xe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:xe.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:xe.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:xe.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:xe.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:xe.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&We.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(t===null||i.value<t)&&(t=i.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Yr.create=e=>new Yr({checks:[],typeName:Ae.ZodNumber,coerce:e?.coerce||!1,...Ie(e)});class Kr extends Pe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==me.bigint){const a=this._getOrReturnCtx(t);return pe(a,{code:oe.invalid_type,expected:me.bigint,received:a.parsedType}),Se}let i;const o=new Lt;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(i=this._getOrReturnCtx(t,i),pe(i,{code:oe.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(i=this._getOrReturnCtx(t,i),pe(i,{code:oe.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),o.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(i=this._getOrReturnCtx(t,i),pe(i,{code:oe.not_multiple_of,multipleOf:a.value,message:a.message}),o.dirty()):We.assertNever(a);return{status:o.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,xe.toString(n))}gt(t,n){return this.setLimit("min",t,!1,xe.toString(n))}lte(t,n){return this.setLimit("max",t,!0,xe.toString(n))}lt(t,n){return this.setLimit("max",t,!1,xe.toString(n))}setLimit(t,n,i,o){return new Kr({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:i,message:xe.toString(o)}]})}_addCheck(t){return new Kr({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:xe.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:xe.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:xe.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:xe.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:xe.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Kr.create=e=>{var t;return new Kr({checks:[],typeName:Ae.ZodBigInt,coerce:(t=e?.coerce)!==null&&t!==void 0?t:!1,...Ie(e)})};class No extends Pe{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==me.boolean){const i=this._getOrReturnCtx(t);return pe(i,{code:oe.invalid_type,expected:me.boolean,received:i.parsedType}),Se}return Gt(t.data)}}No.create=e=>new No({typeName:Ae.ZodBoolean,coerce:e?.coerce||!1,...Ie(e)});class Fi extends Pe{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==me.date){const a=this._getOrReturnCtx(t);return pe(a,{code:oe.invalid_type,expected:me.date,received:a.parsedType}),Se}if(isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return pe(a,{code:oe.invalid_date}),Se}const i=new Lt;let o;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),i.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(o=this._getOrReturnCtx(t,o),pe(o,{code:oe.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),i.dirty()):We.assertNever(a);return{status:i.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Fi({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:xe.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:xe.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Fi.create=e=>new Fi({checks:[],coerce:e?.coerce||!1,typeName:Ae.ZodDate,...Ie(e)});class xu extends Pe{_parse(t){if(this._getType(t)!==me.symbol){const i=this._getOrReturnCtx(t);return pe(i,{code:oe.invalid_type,expected:me.symbol,received:i.parsedType}),Se}return Gt(t.data)}}xu.create=e=>new xu({typeName:Ae.ZodSymbol,...Ie(e)});class To extends Pe{_parse(t){if(this._getType(t)!==me.undefined){const i=this._getOrReturnCtx(t);return pe(i,{code:oe.invalid_type,expected:me.undefined,received:i.parsedType}),Se}return Gt(t.data)}}To.create=e=>new To({typeName:Ae.ZodUndefined,...Ie(e)});class Io extends Pe{_parse(t){if(this._getType(t)!==me.null){const i=this._getOrReturnCtx(t);return pe(i,{code:oe.invalid_type,expected:me.null,received:i.parsedType}),Se}return Gt(t.data)}}Io.create=e=>new Io({typeName:Ae.ZodNull,...Ie(e)});class _s extends Pe{constructor(){super(...arguments),this._any=!0}_parse(t){return Gt(t.data)}}_s.create=e=>new _s({typeName:Ae.ZodAny,...Ie(e)});class Ci extends Pe{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Gt(t.data)}}Ci.create=e=>new Ci({typeName:Ae.ZodUnknown,...Ie(e)});class Nr extends Pe{_parse(t){const n=this._getOrReturnCtx(t);return pe(n,{code:oe.invalid_type,expected:me.never,received:n.parsedType}),Se}}Nr.create=e=>new Nr({typeName:Ae.ZodNever,...Ie(e)});class wu extends Pe{_parse(t){if(this._getType(t)!==me.undefined){const i=this._getOrReturnCtx(t);return pe(i,{code:oe.invalid_type,expected:me.void,received:i.parsedType}),Se}return Gt(t.data)}}wu.create=e=>new wu({typeName:Ae.ZodVoid,...Ie(e)});class Zn extends Pe{_parse(t){const{ctx:n,status:i}=this._processInputParams(t),o=this._def;if(n.parsedType!==me.array)return pe(n,{code:oe.invalid_type,expected:me.array,received:n.parsedType}),Se;if(o.exactLength!==null){const u=n.data.length>o.exactLength.value,l=n.data.length<o.exactLength.value;(u||l)&&(pe(n,{code:u?oe.too_big:oe.too_small,minimum:l?o.exactLength.value:void 0,maximum:u?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(pe(n,{code:oe.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(pe(n,{code:oe.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((u,l)=>o.type._parseAsync(new ir(n,u,n.path,l)))).then(u=>Lt.mergeArray(i,u));const a=[...n.data].map((u,l)=>o.type._parseSync(new ir(n,u,n.path,l)));return Lt.mergeArray(i,a)}get element(){return this._def.type}min(t,n){return new Zn({...this._def,minLength:{value:t,message:xe.toString(n)}})}max(t,n){return new Zn({...this._def,maxLength:{value:t,message:xe.toString(n)}})}length(t,n){return new Zn({...this._def,exactLength:{value:t,message:xe.toString(n)}})}nonempty(t){return this.min(1,t)}}Zn.create=(e,t)=>new Zn({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ae.ZodArray,...Ie(t)});function es(e){if(e instanceof pt){const t={};for(const n in e.shape){const i=e.shape[n];t[n]=rr.create(es(i))}return new pt({...e._def,shape:()=>t})}else return e instanceof Zn?new Zn({...e._def,type:es(e.element)}):e instanceof rr?rr.create(es(e.unwrap())):e instanceof Qr?Qr.create(es(e.unwrap())):e instanceof sr?sr.create(e.items.map(t=>es(t))):e}class pt extends Pe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=We.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==me.object){const f=this._getOrReturnCtx(t);return pe(f,{code:oe.invalid_type,expected:me.object,received:f.parsedType}),Se}const{status:i,ctx:o}=this._processInputParams(t),{shape:a,keys:u}=this._getCached(),l=[];if(!(this._def.catchall instanceof Nr&&this._def.unknownKeys==="strip"))for(const f in o.data)u.includes(f)||l.push(f);const d=[];for(const f of u){const h=a[f],g=o.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new ir(o,g,o.path,f)),alwaysSet:f in o.data})}if(this._def.catchall instanceof Nr){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of l)d.push({key:{status:"valid",value:h},value:{status:"valid",value:o.data[h]}});else if(f==="strict")l.length>0&&(pe(o,{code:oe.unrecognized_keys,keys:l}),i.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of l){const g=o.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new ir(o,g,o.path,h)),alwaysSet:h in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of d){const g=await h.key,m=await h.value;f.push({key:g,value:m,alwaysSet:h.alwaysSet})}return f}).then(f=>Lt.mergeObjectSync(i,f)):Lt.mergeObjectSync(i,d)}get shape(){return this._def.shape()}strict(t){return xe.errToObj,new pt({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,i)=>{var o,a,u,l;const d=(u=(a=(o=this._def).errorMap)===null||a===void 0?void 0:a.call(o,n,i).message)!==null&&u!==void 0?u:i.defaultError;return n.code==="unrecognized_keys"?{message:(l=xe.errToObj(t).message)!==null&&l!==void 0?l:d}:{message:d}}}:{}})}strip(){return new pt({...this._def,unknownKeys:"strip"})}passthrough(){return new pt({...this._def,unknownKeys:"passthrough"})}extend(t){return new pt({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new pt({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ae.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new pt({...this._def,catchall:t})}pick(t){const n={};return We.objectKeys(t).forEach(i=>{t[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new pt({...this._def,shape:()=>n})}omit(t){const n={};return We.objectKeys(this.shape).forEach(i=>{t[i]||(n[i]=this.shape[i])}),new pt({...this._def,shape:()=>n})}deepPartial(){return es(this)}partial(t){const n={};return We.objectKeys(this.shape).forEach(i=>{const o=this.shape[i];t&&!t[i]?n[i]=o:n[i]=o.optional()}),new pt({...this._def,shape:()=>n})}required(t){const n={};return We.objectKeys(this.shape).forEach(i=>{if(t&&!t[i])n[i]=this.shape[i];else{let a=this.shape[i];for(;a instanceof rr;)a=a._def.innerType;n[i]=a}}),new pt({...this._def,shape:()=>n})}keyof(){return ay(We.objectKeys(this.shape))}}pt.create=(e,t)=>new pt({shape:()=>e,unknownKeys:"strip",catchall:Nr.create(),typeName:Ae.ZodObject,...Ie(t)});pt.strictCreate=(e,t)=>new pt({shape:()=>e,unknownKeys:"strict",catchall:Nr.create(),typeName:Ae.ZodObject,...Ie(t)});pt.lazycreate=(e,t)=>new pt({shape:e,unknownKeys:"strip",catchall:Nr.create(),typeName:Ae.ZodObject,...Ie(t)});class ko extends Pe{_parse(t){const{ctx:n}=this._processInputParams(t),i=this._def.options;function o(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const u=a.map(l=>new yn(l.ctx.common.issues));return pe(n,{code:oe.invalid_union,unionErrors:u}),Se}if(n.common.async)return Promise.all(i.map(async a=>{const u={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:u}),ctx:u}})).then(o);{let a;const u=[];for(const d of i){const f={...n,common:{...n.common,issues:[]},parent:null},h=d._parseSync({data:n.data,path:n.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:f}),f.common.issues.length&&u.push(f.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const l=u.map(d=>new yn(d));return pe(n,{code:oe.invalid_union,unionErrors:l}),Se}}get options(){return this._def.options}}ko.create=(e,t)=>new ko({options:e,typeName:Ae.ZodUnion,...Ie(t)});const xr=e=>e instanceof Mo?xr(e.schema):e instanceof qn?xr(e.innerType()):e instanceof Oo?[e.value]:e instanceof Jr?e.options:e instanceof Po?We.objectValues(e.enum):e instanceof $o?xr(e._def.innerType):e instanceof To?[void 0]:e instanceof Io?[null]:e instanceof rr?[void 0,...xr(e.unwrap())]:e instanceof Qr?[null,...xr(e.unwrap())]:e instanceof Jd||e instanceof Lo?xr(e.unwrap()):e instanceof zo?xr(e._def.innerType):[];class zu extends Pe{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==me.object)return pe(n,{code:oe.invalid_type,expected:me.object,received:n.parsedType}),Se;const i=this.discriminator,o=n.data[i],a=this.optionsMap.get(o);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(pe(n,{code:oe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),Se)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,i){const o=new Map;for(const a of n){const u=xr(a.shape[t]);if(!u.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of u){if(o.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);o.set(l,a)}}return new zu({typeName:Ae.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:o,...Ie(i)})}}function md(e,t){const n=Gr(e),i=Gr(t);if(e===t)return{valid:!0,data:e};if(n===me.object&&i===me.object){const o=We.objectKeys(t),a=We.objectKeys(e).filter(l=>o.indexOf(l)!==-1),u={...e,...t};for(const l of a){const d=md(e[l],t[l]);if(!d.valid)return{valid:!1};u[l]=d.data}return{valid:!0,data:u}}else if(n===me.array&&i===me.array){if(e.length!==t.length)return{valid:!1};const o=[];for(let a=0;a<e.length;a++){const u=e[a],l=t[a],d=md(u,l);if(!d.valid)return{valid:!1};o.push(d.data)}return{valid:!0,data:o}}else return n===me.date&&i===me.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Bo extends Pe{_parse(t){const{status:n,ctx:i}=this._processInputParams(t),o=(a,u)=>{if(pd(a)||pd(u))return Se;const l=md(a.value,u.value);return l.valid?((gd(a)||gd(u))&&n.dirty(),{status:n.value,value:l.data}):(pe(i,{code:oe.invalid_intersection_types}),Se)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([a,u])=>o(a,u)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Bo.create=(e,t,n)=>new Bo({left:e,right:t,typeName:Ae.ZodIntersection,...Ie(n)});class sr extends Pe{_parse(t){const{status:n,ctx:i}=this._processInputParams(t);if(i.parsedType!==me.array)return pe(i,{code:oe.invalid_type,expected:me.array,received:i.parsedType}),Se;if(i.data.length<this._def.items.length)return pe(i,{code:oe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Se;!this._def.rest&&i.data.length>this._def.items.length&&(pe(i,{code:oe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const a=[...i.data].map((u,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new ir(i,u,i.path,l)):null}).filter(u=>!!u);return i.common.async?Promise.all(a).then(u=>Lt.mergeArray(n,u)):Lt.mergeArray(n,a)}get items(){return this._def.items}rest(t){return new sr({...this._def,rest:t})}}sr.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new sr({items:e,typeName:Ae.ZodTuple,rest:null,...Ie(t)})};class Ro extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:i}=this._processInputParams(t);if(i.parsedType!==me.object)return pe(i,{code:oe.invalid_type,expected:me.object,received:i.parsedType}),Se;const o=[],a=this._def.keyType,u=this._def.valueType;for(const l in i.data)o.push({key:a._parse(new ir(i,l,i.path,l)),value:u._parse(new ir(i,i.data[l],i.path,l)),alwaysSet:l in i.data});return i.common.async?Lt.mergeObjectAsync(n,o):Lt.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(t,n,i){return n instanceof Pe?new Ro({keyType:t,valueType:n,typeName:Ae.ZodRecord,...Ie(i)}):new Ro({keyType:Hn.create(),valueType:t,typeName:Ae.ZodRecord,...Ie(n)})}}class Cu extends Pe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:i}=this._processInputParams(t);if(i.parsedType!==me.map)return pe(i,{code:oe.invalid_type,expected:me.map,received:i.parsedType}),Se;const o=this._def.keyType,a=this._def.valueType,u=[...i.data.entries()].map(([l,d],f)=>({key:o._parse(new ir(i,l,i.path,[f,"key"])),value:a._parse(new ir(i,d,i.path,[f,"value"]))}));if(i.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of u){const f=await d.key,h=await d.value;if(f.status==="aborted"||h.status==="aborted")return Se;(f.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(f.value,h.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const d of u){const f=d.key,h=d.value;if(f.status==="aborted"||h.status==="aborted")return Se;(f.status==="dirty"||h.status==="dirty")&&n.dirty(),l.set(f.value,h.value)}return{status:n.value,value:l}}}}Cu.create=(e,t,n)=>new Cu({valueType:t,keyType:e,typeName:Ae.ZodMap,...Ie(n)});class Ni extends Pe{_parse(t){const{status:n,ctx:i}=this._processInputParams(t);if(i.parsedType!==me.set)return pe(i,{code:oe.invalid_type,expected:me.set,received:i.parsedType}),Se;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(pe(i,{code:oe.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(pe(i,{code:oe.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const a=this._def.valueType;function u(d){const f=new Set;for(const h of d){if(h.status==="aborted")return Se;h.status==="dirty"&&n.dirty(),f.add(h.value)}return{status:n.value,value:f}}const l=[...i.data.values()].map((d,f)=>a._parse(new ir(i,d,i.path,f)));return i.common.async?Promise.all(l).then(d=>u(d)):u(l)}min(t,n){return new Ni({...this._def,minSize:{value:t,message:xe.toString(n)}})}max(t,n){return new Ni({...this._def,maxSize:{value:t,message:xe.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Ni.create=(e,t)=>new Ni({valueType:e,minSize:null,maxSize:null,typeName:Ae.ZodSet,...Ie(t)});class fs extends Pe{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==me.function)return pe(n,{code:oe.invalid_type,expected:me.function,received:n.parsedType}),Se;function i(l,d){return _u({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vu(),vs].filter(f=>!!f),issueData:{code:oe.invalid_arguments,argumentsError:d}})}function o(l,d){return _u({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,vu(),vs].filter(f=>!!f),issueData:{code:oe.invalid_return_type,returnTypeError:d}})}const a={errorMap:n.common.contextualErrorMap},u=n.data;if(this._def.returns instanceof Ds){const l=this;return Gt(async function(...d){const f=new yn([]),h=await l._def.args.parseAsync(d,a).catch(D=>{throw f.addIssue(i(d,D)),f}),g=await Reflect.apply(u,this,h);return await l._def.returns._def.type.parseAsync(g,a).catch(D=>{throw f.addIssue(o(g,D)),f})})}else{const l=this;return Gt(function(...d){const f=l._def.args.safeParse(d,a);if(!f.success)throw new yn([i(d,f.error)]);const h=Reflect.apply(u,this,f.data),g=l._def.returns.safeParse(h,a);if(!g.success)throw new yn([o(h,g.error)]);return g.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new fs({...this._def,args:sr.create(t).rest(Ci.create())})}returns(t){return new fs({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,i){return new fs({args:t||sr.create([]).rest(Ci.create()),returns:n||Ci.create(),typeName:Ae.ZodFunction,...Ie(i)})}}class Mo extends Pe{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Mo.create=(e,t)=>new Mo({getter:e,typeName:Ae.ZodLazy,...Ie(t)});class Oo extends Pe{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return pe(n,{received:n.data,code:oe.invalid_literal,expected:this._def.value}),Se}return{status:"valid",value:t.data}}get value(){return this._def.value}}Oo.create=(e,t)=>new Oo({value:e,typeName:Ae.ZodLiteral,...Ie(t)});function ay(e,t){return new Jr({values:e,typeName:Ae.ZodEnum,...Ie(t)})}class Jr extends Pe{constructor(){super(...arguments),uo.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),i=this._def.values;return pe(n,{expected:We.joinValues(i),received:n.parsedType,code:oe.invalid_type}),Se}if(Du(this,uo)||ry(this,uo,new Set(this._def.values)),!Du(this,uo).has(t.data)){const n=this._getOrReturnCtx(t),i=this._def.values;return pe(n,{received:n.data,code:oe.invalid_enum_value,options:i}),Se}return Gt(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Jr.create(t,{...this._def,...n})}exclude(t,n=this._def){return Jr.create(this.options.filter(i=>!t.includes(i)),{...this._def,...n})}}uo=new WeakMap;Jr.create=ay;class Po extends Pe{constructor(){super(...arguments),co.set(this,void 0)}_parse(t){const n=We.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==me.string&&i.parsedType!==me.number){const o=We.objectValues(n);return pe(i,{expected:We.joinValues(o),received:i.parsedType,code:oe.invalid_type}),Se}if(Du(this,co)||ry(this,co,new Set(We.getValidEnumValues(this._def.values))),!Du(this,co).has(t.data)){const o=We.objectValues(n);return pe(i,{received:i.data,code:oe.invalid_enum_value,options:o}),Se}return Gt(t.data)}get enum(){return this._def.values}}co=new WeakMap;Po.create=(e,t)=>new Po({values:e,typeName:Ae.ZodNativeEnum,...Ie(t)});class Ds extends Pe{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==me.promise&&n.common.async===!1)return pe(n,{code:oe.invalid_type,expected:me.promise,received:n.parsedType}),Se;const i=n.parsedType===me.promise?n.data:Promise.resolve(n.data);return Gt(i.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Ds.create=(e,t)=>new Ds({type:e,typeName:Ae.ZodPromise,...Ie(t)});class qn extends Pe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ae.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:i}=this._processInputParams(t),o=this._def.effect||null,a={addIssue:u=>{pe(i,u),u.fatal?n.abort():n.dirty()},get path(){return i.path}};if(a.addIssue=a.addIssue.bind(a),o.type==="preprocess"){const u=o.transform(i.data,a);if(i.common.async)return Promise.resolve(u).then(async l=>{if(n.value==="aborted")return Se;const d=await this._def.schema._parseAsync({data:l,path:i.path,parent:i});return d.status==="aborted"?Se:d.status==="dirty"||n.value==="dirty"?is(d.value):d});{if(n.value==="aborted")return Se;const l=this._def.schema._parseSync({data:u,path:i.path,parent:i});return l.status==="aborted"?Se:l.status==="dirty"||n.value==="dirty"?is(l.value):l}}if(o.type==="refinement"){const u=l=>{const d=o.refinement(l,a);if(i.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(i.common.async===!1){const l=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?Se:(l.status==="dirty"&&n.dirty(),u(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(l=>l.status==="aborted"?Se:(l.status==="dirty"&&n.dirty(),u(l.value).then(()=>({status:n.value,value:l.value}))))}if(o.type==="transform")if(i.common.async===!1){const u=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!So(u))return u;const l=o.transform(u.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(u=>So(u)?Promise.resolve(o.transform(u.value,a)).then(l=>({status:n.value,value:l})):u);We.assertNever(o)}}qn.create=(e,t,n)=>new qn({schema:e,typeName:Ae.ZodEffects,effect:t,...Ie(n)});qn.createWithPreprocess=(e,t,n)=>new qn({schema:t,effect:{type:"preprocess",transform:e},typeName:Ae.ZodEffects,...Ie(n)});class rr extends Pe{_parse(t){return this._getType(t)===me.undefined?Gt(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}rr.create=(e,t)=>new rr({innerType:e,typeName:Ae.ZodOptional,...Ie(t)});class Qr extends Pe{_parse(t){return this._getType(t)===me.null?Gt(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Qr.create=(e,t)=>new Qr({innerType:e,typeName:Ae.ZodNullable,...Ie(t)});class $o extends Pe{_parse(t){const{ctx:n}=this._processInputParams(t);let i=n.data;return n.parsedType===me.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}$o.create=(e,t)=>new $o({innerType:e,typeName:Ae.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ie(t)});class zo extends Pe{_parse(t){const{ctx:n}=this._processInputParams(t),i={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return Fo(o)?o.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new yn(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new yn(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}zo.create=(e,t)=>new zo({innerType:e,typeName:Ae.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ie(t)});class Eu extends Pe{_parse(t){if(this._getType(t)!==me.nan){const i=this._getOrReturnCtx(t);return pe(i,{code:oe.invalid_type,expected:me.nan,received:i.parsedType}),Se}return{status:"valid",value:t.data}}}Eu.create=e=>new Eu({typeName:Ae.ZodNaN,...Ie(e)});const oF=Symbol("zod_brand");class Jd extends Pe{_parse(t){const{ctx:n}=this._processInputParams(t),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class Go extends Pe{_parse(t){const{status:n,ctx:i}=this._processInputParams(t);if(i.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return a.status==="aborted"?Se:a.status==="dirty"?(n.dirty(),is(a.value)):this._def.out._parseAsync({data:a.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?Se:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(t,n){return new Go({in:t,out:n,typeName:Ae.ZodPipeline})}}class Lo extends Pe{_parse(t){const n=this._def.innerType._parse(t),i=o=>(So(o)&&(o.value=Object.freeze(o.value)),o);return Fo(n)?n.then(o=>i(o)):i(n)}unwrap(){return this._def.innerType}}Lo.create=(e,t)=>new Lo({innerType:e,typeName:Ae.ZodReadonly,...Ie(t)});function uy(e,t={},n){return e?_s.create().superRefine((i,o)=>{var a,u;if(!e(i)){const l=typeof t=="function"?t(i):typeof t=="string"?{message:t}:t,d=(u=(a=l.fatal)!==null&&a!==void 0?a:n)!==null&&u!==void 0?u:!0,f=typeof l=="string"?{message:l}:l;o.addIssue({code:"custom",...f,fatal:d})}}):_s.create()}const aF={object:pt.lazycreate};var Ae;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Ae||(Ae={}));const uF=(e,t={message:`Input not instance of ${e.name}`})=>uy(n=>n instanceof e,t),cy=Hn.create,ly=Yr.create,cF=Eu.create,lF=Kr.create,dy=No.create,dF=Fi.create,fF=xu.create,hF=To.create,pF=Io.create,gF=_s.create,mF=Ci.create,yF=Nr.create,vF=wu.create,_F=Zn.create,DF=pt.create,xF=pt.strictCreate,wF=ko.create,CF=zu.create,EF=Bo.create,bF=sr.create,AF=Ro.create,SF=Cu.create,FF=Ni.create,NF=fs.create,TF=Mo.create,IF=Oo.create,kF=Jr.create,BF=Po.create,RF=Ds.create,B0=qn.create,MF=rr.create,OF=Qr.create,PF=qn.createWithPreprocess,$F=Go.create,zF=()=>cy().optional(),LF=()=>ly().optional(),jF=()=>dy().optional(),HF={string:e=>Hn.create({...e,coerce:!0}),number:e=>Yr.create({...e,coerce:!0}),boolean:e=>No.create({...e,coerce:!0}),bigint:e=>Kr.create({...e,coerce:!0}),date:e=>Fi.create({...e,coerce:!0})},VF=Se;var ce=Object.freeze({__proto__:null,defaultErrorMap:vs,setErrorMap:V4,getErrorMap:vu,makeIssue:_u,EMPTY_PATH:U4,addIssueToContext:pe,ParseStatus:Lt,INVALID:Se,DIRTY:is,OK:Gt,isAborted:pd,isDirty:gd,isValid:So,isAsync:Fo,get util(){return We},get objectUtil(){return hd},ZodParsedType:me,getParsedType:Gr,ZodType:Pe,datetimeRegex:oy,ZodString:Hn,ZodNumber:Yr,ZodBigInt:Kr,ZodBoolean:No,ZodDate:Fi,ZodSymbol:xu,ZodUndefined:To,ZodNull:Io,ZodAny:_s,ZodUnknown:Ci,ZodNever:Nr,ZodVoid:wu,ZodArray:Zn,ZodObject:pt,ZodUnion:ko,ZodDiscriminatedUnion:zu,ZodIntersection:Bo,ZodTuple:sr,ZodRecord:Ro,ZodMap:Cu,ZodSet:Ni,ZodFunction:fs,ZodLazy:Mo,ZodLiteral:Oo,ZodEnum:Jr,ZodNativeEnum:Po,ZodPromise:Ds,ZodEffects:qn,ZodTransformer:qn,ZodOptional:rr,ZodNullable:Qr,ZodDefault:$o,ZodCatch:zo,ZodNaN:Eu,BRAND:oF,ZodBranded:Jd,ZodPipeline:Go,ZodReadonly:Lo,custom:uy,Schema:Pe,ZodSchema:Pe,late:aF,get ZodFirstPartyTypeKind(){return Ae},coerce:HF,any:gF,array:_F,bigint:lF,boolean:dy,date:dF,discriminatedUnion:CF,effect:B0,enum:kF,function:NF,instanceof:uF,intersection:EF,lazy:TF,literal:IF,map:SF,nan:cF,nativeEnum:BF,never:yF,null:pF,nullable:OF,number:ly,object:DF,oboolean:jF,onumber:LF,optional:MF,ostring:zF,pipeline:$F,preprocess:PF,promise:RF,record:AF,set:FF,strictObject:xF,string:cy,symbol:fF,transformer:B0,tuple:bF,undefined:hF,union:wF,unknown:mF,void:vF,NEVER:VF,ZodIssueCode:oe,quotelessJson:H4,ZodError:yn});const jo=ce.string().default(crypto.randomUUID);var fy=(e=>(e.Input="inputNode",e.Output="outputNode",e.DecisionTable="decisionTableNode",e.Function="functionNode",e.Expression="expressionNode",e.Switch="switchNode",e.Decision="decisionNode",e))(fy||{});const UF="customNode",Tr=ce.object({id:jo,name:ce.string(),position:ce.object({x:ce.number(),y:ce.number()}).default({x:0,y:0})}),GF=ce.object({type:ce.literal("inputNode")}).merge(Tr),ZF=ce.object({type:ce.literal("outputNode")}).merge(Tr),WF=ce.object({type:ce.literal("decisionTableNode"),content:ce.object({hitPolicy:ce.enum(["first","collect"]).nullish().transform(e=>e??"first"),rules:ce.array(ce.record(ce.string(),ce.string().nullish().transform(e=>e??""))).default([]),inputs:ce.array(ce.object({id:jo,name:ce.string().nullish(),field:ce.string().nullish(),defaultValue:ce.string().nullish()})),outputs:ce.array(ce.object({id:jo,name:ce.string(),field:ce.string(),defaultValue:ce.string().nullish()})),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(Tr),qF=ce.object({type:ce.literal("functionNode"),content:ce.string().or(ce.object({source:ce.string().default("")})).nullish()}).merge(Tr),XF=ce.object({type:ce.literal("expressionNode"),content:ce.object({expressions:ce.array(ce.object({id:jo,key:ce.string().default(""),value:ce.string().default("")})),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(Tr),YF=ce.object({type:ce.literal("decisionNode"),content:ce.object({key:ce.string(),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(Tr),KF=ce.object({type:ce.literal("switchNode"),content:ce.object({hitPolicy:ce.enum(["first","collect"]).nullish().transform(e=>e??"first"),statements:ce.array(ce.object({id:jo,condition:ce.string().nullish().transform(e=>e??""),isDefault:ce.boolean().nullish().transform(e=>e??!1)}))})}).merge(Tr),JF=ce.object({type:ce.literal(UF),content:ce.object({kind:ce.string(),config:ce.any()})}).merge(Tr),QF=ce.object({type:ce.string().refine(e=>!Object.values(fy).includes(e),{message:"Invalid type"}),content:ce.any().nullish()}).merge(Tr),yd=ce.discriminatedUnion("type",[YF,XF,qF,WF,KF,JF,GF,ZF]).or(QF),eN=ce.object({id:ce.string(),sourceId:ce.string(),targetId:ce.string(),sourceHandle:ce.string().nullish(),type:ce.enum(["edge"])}),tN=ce.object({inputSchema:ce.any().nullish().default(null),outputSchema:ce.any().nullish().default(null)}),nN=ce.object({validation:tN}).default({validation:{inputSchema:null,outputSchema:null}}),R0=ce.object({nodes:ce.array(yd).default([]),edges:ce.array(eN).default([]),settings:nN}),hy=e=>{const t=It(),{id:n,sourceX:i,sourceY:o,targetX:a,targetY:u,sourcePosition:l,targetPosition:d,style:f={},markerEnd:h}=e,{isHovered:g,disabled:m}=ct(({hoveredEdgeId:_,disabled:A})=>({isHovered:_===n,disabled:A})),{diff:D}=T4(n),[x,v,w]=Od({sourceX:i,sourceY:o,sourcePosition:l,targetX:a,targetY:u,targetPosition:d});return F.jsxs(F.Fragment,{children:[F.jsx(xs,{path:x,markerEnd:h,style:{...f||{},stroke:Ge(D).with({status:"added"},()=>"var(--grl-color-success)").with({status:"removed"},()=>"var(--grl-color-error)").otherwise(()=>{})}}),F.jsx(x6,{children:F.jsx("div",{className:"nodrag nopan edge-renderer",style:{transform:`translate(-50%, -50%) translate(${v}px,${w}px)`},children:!m&&F.jsx(dt,{type:"primary",shape:"round",icon:F.jsx(Au,{}),danger:!0,className:Xe("grl-edge-delete-button"),"data-visible":g,onClick:()=>t.removeEdges([n])})})})]})},rN=e=>t=>F.jsx(hy,{...t,...e});hy.__docgenInfo={description:"",methods:[],displayName:"CustomEdge"};const iN=e=>typeof e!="object"?!1:Array.isArray(e?.nodes),sN=(e,t)=>{const n=Es(),i=It(),o=S.useCallback(async u=>{try{if(!e.current)return;const l=(n.stateStore.getState()?.decisionGraph?.nodes||[]).filter(g=>u.some(m=>m.id===g.id)),d=l.map(g=>g.id),f=[];l.length>0&&e.current.getEdges().forEach(m=>{d.includes(m.source)&&d.includes(m.target)&&f.push({id:m.id,type:m.type,sourceId:m.source,targetId:m.target,sourceHandle:m.sourceHandle??void 0,targetHandle:m.targetHandle??void 0})}),await ud(JSON.stringify({nodes:l,edges:f})),Mt.success("Copied to clipboard!")}catch(l){Mt.error(l.message)}},[n]),a=S.useCallback(async()=>{try{if(!e?.current)return;const u=await v4();if(!u)return;const l=JSON.parse(u);if(!iN(l))throw new Error("invalid clipboard");const d=l.nodes.reduce((v,w)=>({...v,[w.id]:crypto.randomUUID()}),{}),f=Object.keys(d),h=e.current.getNodes().find(v=>f.includes(v.id)),g=l.nodes.find(v=>v.id===h?.id),m={x:l.nodes.reduce((v,w)=>v+w.position.x,0)/l.nodes.length,y:l.nodes.reduce((v,w)=>v+w.position.y,0)/l.nodes.length},D=l.nodes.map(v=>{const w={x:v?.position?.x||0,y:v?.position?.y||0};if(h&&g)v.id===h.id?(w.x=h.position.x,w.y=h.position.y-20):(w.x=h.position.x-g.position.x+v.position.x,w.y=h.position.y-g.position.y+v.position.y-20);else if(t.current){const _=t.current.getBoundingClientRect(),A={x:_.width/2,y:_.height/2},I=e.current.project(A);w.x=v.position.x+I.x-m.x/2,w.y=v.position.y+I.y-m.y/2}return{...v,position:w,id:d[v.id]}}),x=(l.edges||[]).map(v=>({id:crypto.randomUUID(),type:v.type,sourceId:d[v.sourceId],targetId:d[v.targetId],sourceHandle:v.sourceHandle??void 0,targetHandle:v.targetHandle??void 0}));if(i.addNodes(D),i.addEdges(x),Mt.success("Pasted from clipboard!"),h)try{await ud(JSON.stringify({nodes:D}))}catch{}}catch{Mt.error("Failed to paste from clipboard")}},[e,t]);return S.useMemo(()=>({copyNodes:o,pasteNodes:a}),[o,a])},py=j.memo(({inputDisabled:e,disabled:t})=>{const n=ct(f=>f.components||[]),i=ct(f=>f.customNodes||[]),[o,a]=S.useState(""),u=S.useCallback((f,h,g)=>{const m=f.target;if(!m)return;const{offsetX:D,offsetY:x}=f.nativeEvent,{height:v,width:w}=m.getBoundingClientRect(),_={x:D/w,y:x/v};f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("application/reactflow",h),f.dataTransfer.setData("relativePosition",JSON.stringify(_)),g&&f.dataTransfer.setData("customNodeComponent",g)},[]),l=S.useMemo(()=>{const f={core:Object.values(Si)};return n?.length>0&&(f.extended=n),(i||[]).forEach(h=>{const g=h.group?.trim?.()||"";g.length>0&&(f?.[g]?f[g].push({...h,type:"customNode"}):f[g]=[{...h,type:"customNode"}])}),(i||[]).forEach(h=>{h?.group||(f?.custom?f.custom.push({...h,type:"customNode"}):f.custom=[{...h,type:"customNode"}])}),f},[n,i]),d=S.useMemo(()=>Object.keys(l).reduce((f,h)=>({...f,[h]:(l[h]||[]).filter(g=>!(o?.trim?.().length>0)||(g.type||"").toLowerCase().indexOf(o.toLowerCase())>-1||(g.displayName||"").toLowerCase().indexOf(o.toLowerCase())>-1||(g.shortDescription||"").toLowerCase().indexOf(o.toLowerCase())>-1||(g.group||"").toLowerCase().indexOf(o.toLowerCase())>-1)}),{}),[l,o]);return F.jsxs("div",{children:[F.jsx(bC,{placeholder:"Type to search",value:o,onChange:f=>a(f.target.value||""),allowClear:!0,className:"grl-dg__aside__menu__components__search"}),F.jsx("div",{className:"grl-dg__aside__menu__components",children:Object.keys(d).map(f=>Ge(f).with("core",()=>d.core?.length>0&&F.jsx(j.Fragment,{children:(d.core||[]).map(h=>F.jsx(j.Fragment,{children:F.jsx(M0,{disabled:Ge(h.type).with(Ye.Input,()=>t||e).otherwise(()=>t),specification:h,onDragStart:g=>Si[h.type]!==void 0?u(g,h.type):u(g,"customNode","kind"in h?h.kind:"")})},"kind"in h?h.kind:h.type))},f)).otherwise(h=>d[h]?.length>0&&F.jsx(j.Fragment,{children:(d?.[h]||[]).map(g=>F.jsx(M0,{disabled:t,specification:g,onDragStart:m=>h==="extended"?u(m,g.type):u(m,"customNode","kind"in g?g.kind:"")},"kind"in g?g.kind:g.type))},h)))})]})}),M0=({specification:e,disabled:t=!1,...n})=>F.jsx("div",{className:Xe("draggable-component"),draggable:!t,...n,children:F.jsx("div",{style:{pointerEvents:"none"},children:F.jsx(Ud,{listMode:!0,compactMode:!0,color:e.color,icon:e.icon,name:e.displayName,type:e.shortDescription})})});py.__docgenInfo={description:"",methods:[],displayName:"GraphComponents",props:{inputDisabled:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const oN=Object.entries(Si).reduce((e,[t,n])=>({...e,[t]:j.memo(i=>n.renderNode({specification:n,...i}),(i,o)=>i.id===o.id&&i.selected===o.selected&&i.data===o.data)}),{}),aN={edge:j.memo(rN(null))},gy=S.forwardRef(function({reactFlowProOptions:t,className:n},i){const o=S.useRef(null),a=S.useRef(null),u=w6([]),l=C6([]),[d,f]=S.useState(!0),h=Es(),g=It(),m=N4(B=>B),{onReactFlowInit:D}=ey(({onReactFlowInit:B})=>({onReactFlowInit:B})),{disabled:x,hasInputNode:v,components:w,customNodes:_}=ct(({disabled:B,components:U,customNodes:K,decisionGraph:q})=>({disabled:B,components:U,customNodes:K,hasInputNode:(q?.nodes||[]).some(G=>G.type===Ye.Input)}));m.nodesState.current=u,m.edgesState.current=l,m.graphClipboard.current=sN(a,o);const A=S.useMemo(()=>j.memo(B=>{const U=_.find(K=>K.kind===B?.data?.kind);return U?U.renderNode({specification:U,...B}):(console.warn("node not found",B,_),F.jsx(ei,{id:B.id,specification:{displayName:`${B.data?.kind}`,color:"var(--grl-color-error)",icon:F.jsx(P2,{})},name:B?.data?.name,isSelected:B.selected,displayError:!0,noBodyPadding:!0,handleLeft:!0,handleRight:!0}))},(B,U)=>B.id===U.id&&B.selected===U.selected&&B.data===U.data),[_]),I=S.useMemo(()=>w.reduce((B,U)=>({...B,[U.type]:j.memo(K=>U.renderNode({specification:U,...K}),(K,q)=>K.id===q.id&&K.selected===q.selected&&K.data===q.data)}),{...oN,customNode:A}),[w,A]),N=async(B,U,K)=>{if(!o.current||!a.current)return;if(!U){const P=o.current.getBoundingClientRect(),O={x:P.width/2,y:P.height/2};U=a.current.project(O)}const q=Ge(B).with("customNode",()=>_.find(P=>P.kind===K)).otherwise(()=>[...Object.values(Si),...w].find(O=>O.type===B));if(!q){Mt.error(`Unknown node type ${B} - ${K}.`);return}let G=Ge(q).with({kind:qe.string},P=>{const O=(a.current?.getNodes()||[]).filter(ee=>ee.data?.kind===P.kind).length+1,Z=P.generateNode({index:O});return{id:crypto.randomUUID(),type:"customNode",name:Z.name,position:U,content:{kind:P.kind,config:Z?.config}}}).with({type:qe.string},P=>{const O=(a.current?.getNodes()||[]).filter(ee=>ee.type===P.type).length+1,Z=P.generateNode({index:O});return{id:crypto.randomUUID(),type:P.type,position:U,...Z}}).otherwise(()=>null);if(!G){Mt.error(`Unknown node type ${B} - ${K}.`);return}if(q.onNodeAdd)try{G=await q.onNodeAdd(G)}catch{return}const b=yd.safeParse(G);if(b.success)return g.addNodes([yd.parse(G)]);Mt.error(b.error?.message)},$=B=>{if(B.source===B.target||x)return!1;const[U]=u,[K]=l,q=K.some(P=>P.source===B.source&&P.target===B.target&&(P.sourceHandle??null)===(B.sourceHandle??null)&&(P.targetHandle??null)===(B.targetHandle??null)),G=U.find(P=>P.id===B.target);if(!G||G.id===B.source)return!1;const b=(P,O=new Set)=>{if(O.has(P.id))return!1;O.add(P.id);for(const Z of pu(P,U,K))if(Z.id===B.source||b(Z,O))return!0};return!q&&!b(G)},z=B=>{if(B.preventDefault(),B.stopPropagation(),!o.current||!a.current)return;const U=o.current.getBoundingClientRect(),K=B.dataTransfer.getData("application/reactflow");let q;try{q=JSON.parse(B.dataTransfer.getData("relativePosition"))}catch{return}const G=a.current.project({x:B.clientX-U.left,y:B.clientY-U.top});G.x-=Math.round(q.x*226/10)*10,G.y-=Math.round(q.y*60/10)*10;const b=Ge(B.dataTransfer.getData("customNodeComponent")).with(qe.string,P=>P).otherwise(()=>{});N(K,G,b)},M=B=>{B.preventDefault(),B.dataTransfer.dropEffect="move"},X=B=>{const U={...B,type:"edge",id:crypto.randomUUID()};x||g.addEdges([F4(U)])};return S.useImperativeHandle(i,()=>({...g,stateStore:h.stateStore})),F.jsx("div",{className:Xe(["tab-content",n]),tabIndex:0,onKeyDown:B=>{B.key==="v"&&B.metaKey&&!x&&g.pasteNodes()},children:F.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex"},children:[!x&&!d&&F.jsx("div",{className:"grl-dg__components__floating",style:{position:"absolute",top:8,right:8,zIndex:1},children:F.jsx(ss,{placement:"right",title:"Components",children:F.jsx(dt,{icon:F.jsx(tE,{}),onClick:()=>f(!0)})})}),F.jsx("div",{tabIndex:0,className:"content-wrapper",onKeyDown:B=>{const[U]=u,[K]=l;if(B.key==="c"&&B.metaKey){const q=u[0].filter(G=>G.selected).map(({id:G})=>G);if(q.length===0)return;g.copyNodes(q),B.preventDefault()}else if(B.key==="d"&&B.metaKey){if(!x){const q=U.filter(G=>G.selected).map(({id:G})=>G);if(q.length===0)return;g.duplicateNodes(q)}B.preventDefault()}else if(B.key==="Backspace"){if(!x){const q=U.filter(b=>b.selected),G=K.filter(b=>b.selected);if(q.length>0){const b=q.length,P=b>1?"nodes":"node";vd.confirm({icon:null,title:`Delete ${P}`,content:F.jsxs(Tt.Text,{children:["Are you sure you want to delete ",b>1?`${b} ${P}`:P,"?"]}),okButtonProps:{danger:!0},onOk:()=>{G.length>0&&g.removeEdges(G.map(O=>O.id)),g.removeNodes(q.map(O=>O.id))}})}else G.length>0&&g.removeEdges(G.map(b=>b.id))}B.stopPropagation(),B.preventDefault()}},children:F.jsx("div",{className:Xe(["react-flow"]),ref:o,children:F.jsxs(Cm,{onlyRenderVisibleElements:!0,deleteKeyCode:null,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,zoomOnDoubleClick:!1,connectionRadius:35,nodes:u[0],edges:l[0],onInit:B=>{a.current=B,D?.(B)},snapToGrid:!0,snapGrid:[5,5],nodeTypes:I,edgeTypes:aN,onDrop:z,onDragOver:M,onConnect:X,isValidConnection:$,proOptions:t,nodesConnectable:!x,nodesDraggable:!x,edgesUpdatable:!x,onNodesChange:g.handleNodesChange,onEdgesChange:g.handleEdgesChange,onNodesDelete:B=>{B.forEach(U=>{g.closeTab(U?.id)})},onEdgeMouseEnter:(B,U)=>g.setHoveredEdgeId(U.id),onEdgeMouseLeave:()=>g.setHoveredEdgeId(null),children:[F.jsx(T6,{showInteractive:!1,children:F.jsx(ns,{onClick:()=>g.toggleCompactMode(),children:F.jsx(d2,{})})}),F.jsx(O6,{color:"var(--grl-color-border)",gap:20})]})})}),!x&&d&&F.jsx("div",{className:"grl-dg__aside__menu",children:F.jsxs(F.Fragment,{children:[F.jsxs("div",{className:"grl-dg__aside__menu__heading",children:[F.jsx("div",{className:"grl-dg__aside__menu__heading__text",children:F.jsx(Tt.Text,{strong:!0,style:{marginBottom:0},children:"Components"})}),F.jsx(dt,{type:"text",size:"small",icon:F.jsx(po,{}),onClick:()=>f(!1)})]}),F.jsx("div",{className:"grl-dg__aside__menu__content",children:F.jsx(py,{inputDisabled:v,disabled:x})})]})})]})})});gy.__docgenInfo={description:"",methods:[],displayName:"Graph"};const O0="application/vnd.gorules.decision",my=()=>{const e=Es(),t=S.useRef(null),n=S.useRef(null),{setDecisionGraph:i,setActivePanel:o}=It(),{disabled:a,panels:u,activePanel:l}=ct(({disabled:x,panels:v,activePanel:w})=>({disabled:x,panels:v,activePanel:w})),d=async x=>{const v=x?.target?.files,w=new FileReader;w.onload=function(_){try{const A=JSON.parse(_?.target?.result);if(A?.contentType!==O0)throw new Error("Invalid content type");const I=Array.isArray(A?.nodes)?A.nodes:[],N=I.map(M=>M.id),$=A.edges.filter(M=>N.includes(M?.targetId)&&N.includes(M?.sourceId)),z=R0.safeParse({nodes:I,edges:$,settings:A?.settings});if(!z.success){console.log(z.error?.message),Mt.error(z.error?.message);return}i(z.data)}catch(A){Mt.error(A.message)}},w.readAsText(Array.from(v)?.[0],"UTF-8")},f=x=>{const v=x?.target?.files[0],w=new FileReader;try{w.readAsArrayBuffer(v),w.onload=async()=>{const _=w.result;if(!_)return;const A=await nE(_),{decisionGraph:I}=e.stateStore.getState(),N=I.nodes.map(M=>{let X=M;return A.forEach(B=>{B.id===M.id&&(X={...M,content:B.content})}),X}),$=A.filter(M=>!N.some(X=>X.id===M.id)).map((M,X)=>({...M,position:{x:X*250,y:0}})),z=R0.safeParse({nodes:[...N,...$],edges:I.edges,settings:I.settings});if(!z.success){console.log(z.error?.message),Mt.error(z.error?.message);return}i(z.data),Mt.success("Excel file has been uploaded successfully!")}}catch{Mt.error("Failed to upload Excel!")}},h=async()=>{try{const{name:x}=e.stateStore.getState(),{decisionGraph:v}=e.stateStore.getState(),w=`${x.replaceAll(".json","")}.json`,_=JSON.stringify({contentType:O0,nodes:v.nodes,edges:v.edges,settings:v.settings},null,2),A=new Blob([_],{type:"application/json"}),I=URL.createObjectURL(A),N=window.document.createElement("a");N.href=I,N.download=w,window.document.body.appendChild(N),N.click(),window.document.body.removeChild(N),URL.revokeObjectURL(I)}catch(x){Mt.error(x.message)}},g=async(x="decision tables")=>{try{const{decisionGraph:v}=e.stateStore.getState(),w=v.nodes.filter(_=>_.type===Ye.DecisionTable).map(_=>({..._.content,id:_.id,name:_.name}));await rE(x,w),Mt.success("Excel file has been downloaded successfully!")}catch{Mt.error("Failed to download Excel file!")}},m=[{key:"upload-json",label:"Upload JSON",onClick:()=>t?.current?.click?.()},{key:"upload-excel",label:"Upload Excel",onClick:()=>n?.current?.click?.()}],D=[{key:"download-json",label:"Download JSON",onClick:()=>h()},{key:"download-excel",label:"Download Excel",onClick:()=>g()}];return F.jsxs("div",{className:"grl-dg__aside",children:[F.jsx("input",{hidden:!0,accept:"application/json",type:"file",ref:t,onChange:d,onClick:x=>{x.target.value=null}}),F.jsx("input",{hidden:!0,accept:".xlsx",type:"file",ref:n,onChange:f,onClick:x=>{x.target.value=null}}),F.jsxs("div",{className:"grl-dg__aside__side-bar",children:[F.jsxs("div",{className:"grl-dg__aside__side-bar__top",children:[!a&&F.jsx(go,{menu:{items:m},placement:"bottomRight",trigger:["click"],arrow:!0,children:F.jsx(dt,{type:"text",disabled:a,icon:F.jsx(u2,{})})}),F.jsx(go,{menu:{items:D},placement:"bottomRight",trigger:["click"],arrow:!0,children:F.jsx(dt,{type:"text",icon:F.jsx(s2,{})})})]}),F.jsx("div",{className:"grl-dg__aside__side-bar__bottom",children:(u||[]).map(x=>F.jsx(dt,{type:l===x.id?"default":"text",icon:x.icon,onClick:()=>{if(x?.onClick)return x.onClick();x?.renderPanel&&o(l===x.id?void 0:x.id)}},x.id))})]})]})};my.__docgenInfo={description:"",methods:[],displayName:"GraphSideToolbar"};const yy=({disabled:e})=>{const t=It(),{openNodes:n,activeNodeId:i}=ct(({decisionGraph:o,activeTab:a,openTabs:u})=>({activeNodeId:(o?.nodes??[]).find(l=>l.id===a)?.id,openNodes:(u||[]).map(l=>{const d=(o?.nodes??[]).find(f=>f.id===l);if(d)return{id:d?.id,name:d.name,type:d.type,diff:d?._diff}}).filter(l=>!!l)}));return F.jsx("div",{children:F.jsx(iE,{hideAdd:!0,type:"editable-card",size:"small",className:"tabs",activeKey:i||"graph",onEdit:(o,a)=>{a==="remove"&&t.closeTab(o)},onChange:o=>t.openTab(o),items:[{closable:!1,key:"graph",label:F.jsx(P0,{total:n?.length,icon:F.jsx(p2,{}),name:"Graph",onContextClick:o=>{t.closeTab("graph",o)}})},...n.map((o,a)=>{const u=Si[o.type];return{disabled:e,key:o.id,label:F.jsx(P0,{onContextClick:l=>{t.closeTab(o.id,l)},icon:u?.icon,name:o?.name??o?.type,diffStatus:o?.diff?.status,color:u?.color,index:a,total:n?.length}),closable:!0}})]})})},P0=({total:e=0,index:t=-1,icon:n,name:i,diffStatus:o,color:a=Ti.Blue,onContextClick:u})=>{const l=[e>0&&t!==-1&&{key:"close",label:"Close",onClick:()=>u?.("close")},e>0&&t!==-1&&{key:"close-all",label:"Close all Tabs",onClick:()=>u?.("close-all")},e>0&&t!==-1&&{key:"close-other",label:"Close other Tabs",onClick:()=>u?.("close-other")},e>0&&t+1<e&&{key:"close-right",label:"Close Tabs to the right",onClick:()=>u?.("close-right")},e>0&&t>0&&t>0&&{key:"close-left",label:"Close Tabs to the left",onClick:()=>u?.("close-left")}].filter(d=>!!d);return F.jsx(go,{menu:{items:l},trigger:["contextMenu"],children:F.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[F.jsx(eg,{size:"small",shape:"square",style:{background:a,fontSize:14,width:20,height:20,lineHeight:"18px"},icon:n}),i,F.jsx(z0,{status:o,style:{fontSize:16}})]})})};yy.__docgenInfo={description:"",methods:[],displayName:"GraphTabs",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const vy=j.memo(S.forwardRef(function({reactFlowProOptions:t},n){const[i,o]=S.useState(!1),a=ct(({decisionGraph:u,activeTab:l})=>(u?.nodes??[]).some(d=>d.id===l));return F.jsxs(F.Fragment,{children:[F.jsx(my,{}),F.jsxs("div",{className:"grl-dg__graph",children:[F.jsx(yy,{disabled:i}),F.jsx(gy,{ref:n,className:Xe([!a&&"active"]),reactFlowProOptions:t,onDisableTabs:o}),F.jsx(uN,{})]}),F.jsx(ty,{})]})})),uN=j.memo(()=>{const{openNodes:e,activeNodeId:t,components:n}=ct(({decisionGraph:a,openTabs:u,activeTab:l,components:d})=>{const f=(a?.nodes??[]).find(g=>g.id===l)?.id;return{openNodes:(a?.nodes??[]).filter(g=>u.includes(g.id)).map(({id:g,type:m})=>({id:g,type:m})),activeNodeId:f,components:d}}),i=S.useRef(null),o=S.useMemo(()=>AC(SC,void 0,{rootElement:i.current}),[i.current]);return F.jsx("div",{style:{display:"contents"},ref:i,children:e.map(a=>F.jsx("div",{className:Xe(["tab-content",t===a?.id&&"active"]),children:Ge(a?.type).with(Ye.DecisionTable,()=>Xd?.renderTab?.({id:a?.id,manager:o})).with(Ye.Function,()=>Kd?.renderTab?.({id:a?.id,manager:o})).with(Ye.Expression,()=>Yd?.renderTab?.({id:a?.id,manager:o})).otherwise(()=>{const u=n.find(l=>l.type===a.type);return u?u?.renderTab?.({id:a.id,manager:o}):null})},a?.id))})});vy.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphWrapper"};const cN=S.forwardRef(({manager:e,reactFlowProOptions:t,...n},i)=>F.jsx("div",{className:"grl-dg",children:F.jsx(Vd,{children:F.jsxs(Qm,{children:[F.jsx(vy,{ref:i,reactFlowProOptions:t}),F.jsx(z4,{}),F.jsx(I4,{...n})]})})}));cN.__docgenInfo={description:"",methods:[],displayName:"DecisionGraph"};export{cN as D,ei as G,A2 as R,ct as a,_4 as b,b4 as c,pi as l,It as u};
