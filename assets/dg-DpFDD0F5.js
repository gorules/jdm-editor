const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-Bdy95lf0.js","./function-OhB7U_I2.js","./wrapNativeSuper-ezTqcbMv.js","./index-uubelm5h.js","./iframe-BMpW94BT.js","./index.module-oC4d_IRU.js","./wasm-BqrjSH2O.js","./index-BK_xiHMm.js","./button-ayezNGxP.js","./index-TW2i6qtr.js","./function-CiyI429m.css"])))=>i.map(i=>d[i]);
import{_ as Xt,j as S}from"./wrapNativeSuper-ezTqcbMv.js";import{r as A,R as V,c as Qt,g as i0}from"./index-uubelm5h.js";import{j as ow,k as sw,l as aw,D as o0,p as gt,b as Ln,g as Vu,f as s0,R as Gu,P as a0,a as sl,I as uw,e as bl,c as cw,H as lw}from"./diff-icon-C4Wby5hh.js";import{$ as Hs,M as u0,O as as,P as fw,a0 as c0,a1 as dw,K as l0,Q as hw,C as la,u as Uu,c as vr,a2 as pw,a3 as gw,p as mw,a7 as yw,n as vw,W as Dw,a6 as _w,ad as xw,r as ww,a as bw,az as Cw,I as Yt,z as ke,T as Pt,N as qe,t as Kl,i as Xs,V as kn,ae as gr}from"./wasm-BqrjSH2O.js";import{b as Ew,r as Sw,c as Aw,d as qs,M as Wu,N as He,e as Jl,F as ii,f as f0,g as Cl,h as Fw,R as Nw,D as Tw,z as ce,a as Iw,i as Bw,j as Rw}from"./dt-DxlnXd0_.js";import{N as Ow,a as vo,b as Mw,c as zw,u as Pw,d as $w,A as jw,D as Js,s as zt,T as Ql,f as jh,S as d0,e as kw}from"./index.module-oC4d_IRU.js";import{r as h0}from"./index-BK_xiHMm.js";import{E as Lw}from"./expression-RDrOTQUH.js";import{c as Ye}from"./ce-Cv-orWCr.js";import{R as Hw,r as qw,B as ot}from"./button-ayezNGxP.js";import{a as ef,S as us,c as Au,P as p0,b as al,e as kh,d as Vw,R as Gw,w as Uw,p as Ww}from"./function-OhB7U_I2.js";import{_ as Xw}from"./iframe-BMpW94BT.js";const Yw=e=>{const{componentCls:n,notificationMarginEdge:r,animationMaxHeight:o}=e,s=`${n}-notice`,c=new Hs("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),u=new Hs("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),l=new Hs("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),f=new Hs("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[s]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:u}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:l}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:c}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:r,_skip_check_:!0},[s]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:f}}}}},Zw=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Kw={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Jw=(e,n)=>{const{componentCls:r}=e;return{[`${r}-${n}`]:{[`&${r}-stack > ${r}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Kw[n]]:{value:0,_skip_check_:!0}}}}},Qw=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},e2=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},t2=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},Qw(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},e2(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Zw.map(r=>Jw(e,r)).reduce((r,o)=>Object.assign(Object.assign({},r),o),{}))},g0=e=>{const{iconCls:n,componentCls:r,boxShadow:o,fontSizeLG:s,notificationMarginBottom:c,borderRadiusLG:u,colorSuccess:l,colorInfo:f,colorWarning:p,colorError:d,colorTextHeading:g,notificationBg:m,notificationPadding:x,notificationMarginEdge:b,notificationProgressBg:_,notificationProgressHeight:E,fontSize:v,lineHeight:N,width:R,notificationIconSize:T,colorText:P}=e,H=`${r}-notice`;return{position:"relative",marginBottom:c,marginInlineStart:"auto",background:m,borderRadius:u,boxShadow:o,[H]:{padding:x,width:R,maxWidth:`calc(100vw - ${as(e.calc(b).mul(2).equal())})`,overflow:"hidden",lineHeight:N,wordWrap:"break-word"},[`${H}-message`]:{marginBottom:e.marginXS,color:g,fontSize:s,lineHeight:e.lineHeightLG},[`${H}-description`]:{fontSize:v,color:P},[`${H}-closable ${H}-message`]:{paddingInlineEnd:e.paddingLG},[`${H}-with-icon ${H}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(T).equal(),fontSize:s},[`${H}-with-icon ${H}-description`]:{marginInlineStart:e.calc(e.marginSM).add(T).equal(),fontSize:v},[`${H}-icon`]:{position:"absolute",fontSize:T,lineHeight:1,[`&-success${n}`]:{color:l},[`&-info${n}`]:{color:f},[`&-warning${n}`]:{color:p},[`&-error${n}`]:{color:d}},[`${H}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},fw(e)),[`${H}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${as(u)} * 2)`,left:{_skip_check_:!0,value:u},right:{_skip_check_:!0,value:u},bottom:0,blockSize:E,border:0,"&, &::-webkit-progress-bar":{borderRadius:u,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:_},"&::-webkit-progress-value":{borderRadius:u,background:_}},[`${H}-btn`]:{float:"right",marginTop:e.marginSM}}},n2=e=>{const{componentCls:n,notificationMarginBottom:r,notificationMarginEdge:o,motionDurationMid:s,motionEaseInOut:c}=e,u=`${n}-notice`,l=new Hs("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:r},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},c0(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:c,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:c,animationFillMode:"both",animationDuration:s,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:l,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${u}-btn`]:{float:"left"}}})},{[n]:{[`${u}-wrapper`]:Object.assign({},g0(e))}}]},m0=e=>({zIndexPopup:e.zIndexPopupBase+dw+50,width:384}),y0=e=>{const n=e.paddingMD,r=e.paddingLG;return l0(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:r,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${as(e.paddingMD)} ${as(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},v0=u0("Notification",e=>{const n=y0(e);return[n2(n),Yw(n),t2(n)]},m0),r2=hw(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,r=y0(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},g0(r)),{width:r.width,maxWidth:`calc(100vw - ${as(e.calc(r.notificationMarginEdge).mul(2).equal())})`,margin:0})}},m0);var i2=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};function tf(e,n){return n===null||n===!1?null:n||A.createElement(vo,{className:`${e}-close-icon`})}const o2={success:Mw,info:zw,error:pw,warning:Hw},D0=e=>{const{prefixCls:n,icon:r,type:o,message:s,description:c,btn:u,role:l="alert"}=e;let f=null;return r?f=A.createElement("span",{className:`${n}-icon`},r):o&&(f=A.createElement(o2[o]||null,{className:vr(`${n}-icon`,`${n}-icon-${o}`)})),A.createElement("div",{className:vr({[`${n}-with-icon`]:f}),role:l},f,A.createElement("div",{className:`${n}-message`},s),A.createElement("div",{className:`${n}-description`},c),u&&A.createElement("div",{className:`${n}-btn`},u))},s2=e=>{const{prefixCls:n,className:r,icon:o,type:s,message:c,description:u,btn:l,closable:f=!0,closeIcon:p,className:d}=e,g=i2(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:m}=A.useContext(la),x=n||m("notification"),b=`${x}-notice`,_=Uu(x),[E,v,N]=v0(x,_);return E(A.createElement("div",{className:vr(`${b}-pure-panel`,v,r,N,_)},A.createElement(r2,{prefixCls:x}),A.createElement(Ow,Object.assign({},g,{prefixCls:x,eventKey:"pure",duration:null,closable:f,className:vr({notificationClassName:d}),closeIcon:tf(x,p),content:A.createElement(D0,{prefixCls:b,icon:o,type:s,message:c,description:u,btn:l})}))))};function a2(e,n,r){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":o={left:0,top:n,bottom:"auto"};break;case"topRight":o={right:0,top:n,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":o={left:0,top:"auto",bottom:r};break;default:o={right:0,top:"auto",bottom:r};break}return o}function u2(e){return{motionName:`${e}-fade`}}var c2=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const Lh=24,l2=4.5,f2="topRight",d2=e=>{let{children:n,prefixCls:r}=e;const o=Uu(r),[s,c,u]=v0(r,o);return s(V.createElement($w,{classNames:{list:vr(c,u,o)}},n))},h2=(e,n)=>{let{prefixCls:r,key:o}=n;return V.createElement(d2,{prefixCls:r,key:o},e)},p2=V.forwardRef((e,n)=>{const{top:r,bottom:o,prefixCls:s,getContainer:c,maxCount:u,rtl:l,onAllRemoved:f,stack:p,duration:d,pauseOnHover:g=!0,showProgress:m}=e,{getPrefixCls:x,getPopupContainer:b,notification:_,direction:E}=A.useContext(la),[,v]=mw(),N=s||x("notification"),R=J=>a2(J,r??Lh,o??Lh),T=()=>vr({[`${N}-rtl`]:l??E==="rtl"}),P=()=>u2(N),[H,G]=Pw({prefixCls:N,style:R,className:T,motion:P,closable:!0,closeIcon:tf(N),duration:d??l2,getContainer:()=>c?.()||b?.()||document.body,maxCount:u,pauseOnHover:g,showProgress:m,onAllRemoved:f,renderNotifications:h2,stack:p===!1?!1:{threshold:typeof p=="object"?p?.threshold:void 0,offset:8,gap:v.margin}});return V.useImperativeHandle(n,()=>Object.assign(Object.assign({},H),{prefixCls:N,notification:_})),G});function _0(e){const n=V.useRef(null);return gw(),[V.useMemo(()=>{const o=l=>{var f;if(!n.current)return;const{open:p,prefixCls:d,notification:g}=n.current,m=`${d}-notice`,{message:x,description:b,icon:_,type:E,btn:v,className:N,style:R,role:T="alert",closeIcon:P,closable:H}=l,G=c2(l,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),J=tf(m,typeof P<"u"?P:g?.closeIcon);return p(Object.assign(Object.assign({placement:(f=e?.placement)!==null&&f!==void 0?f:f2},G),{content:V.createElement(D0,{prefixCls:m,icon:_,type:E,message:x,description:b,btn:v,role:T}),className:vr(E&&`${m}-${E}`,N,g?.className),style:Object.assign(Object.assign({},g?.style),R),closeIcon:J,closable:H??!!J}))},c={open:o,destroy:l=>{var f,p;l!==void 0?(f=n.current)===null||f===void 0||f.close(l):(p=n.current)===null||p===void 0||p.destroy()}};return["success","info","warning","error"].forEach(l=>{c[l]=f=>o(Object.assign(Object.assign({},f),{type:l}))}),c},[]),V.createElement(p2,Object.assign({key:"notification-holder"},e,{ref:n}))]}function g2(e){return _0(e)}function m2(){const[,e]=A.useReducer(n=>n+1,0);return e}function y2(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=A.useRef({}),r=m2(),o=Ew();return yw(()=>{const s=o.subscribe(c=>{n.current=c,e&&r()});return()=>o.unsubscribe(s)},[]),n.current}const El=A.createContext({}),v2=e=>{const{antCls:n,componentCls:r,iconCls:o,avatarBg:s,avatarColor:c,containerSize:u,containerSizeLG:l,containerSizeSM:f,textFontSize:p,textFontSizeLG:d,textFontSizeSM:g,borderRadius:m,borderRadiusLG:x,borderRadiusSM:b,lineWidth:_,lineType:E}=e,v=(N,R,T)=>({width:N,height:N,borderRadius:"50%",[`&${r}-square`]:{borderRadius:T},[`&${r}-icon`]:{fontSize:R,[`> ${o}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},c0(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:c,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${as(_)} ${E} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),v(u,p,m)),{"&-lg":Object.assign({},v(l,d,x)),"&-sm":Object.assign({},v(f,g,b)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},D2=e=>{const{componentCls:n,groupBorderColor:r,groupOverlapping:o,groupSpace:s}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:o}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:s}}}},_2=e=>{const{controlHeight:n,controlHeightLG:r,controlHeightSM:o,fontSize:s,fontSizeLG:c,fontSizeXL:u,fontSizeHeading3:l,marginXS:f,marginXXS:p,colorBorderBg:d}=e;return{containerSize:n,containerSizeLG:r,containerSizeSM:o,textFontSize:Math.round((c+u)/2),textFontSizeLG:l,textFontSizeSM:s,groupSpace:p,groupOverlapping:-f,groupBorderColor:d}},x0=u0("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:r}=e,o=l0(e,{avatarBg:r,avatarColor:n});return[v2(o),D2(o)]},_2);var x2=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const w2=(e,n)=>{const[r,o]=A.useState(1),[s,c]=A.useState(!1),[u,l]=A.useState(!0),f=A.useRef(null),p=A.useRef(null),d=vw(n,f),{getPrefixCls:g,avatar:m}=A.useContext(la),x=A.useContext(El),b=()=>{if(!p.current||!f.current)return;const me=p.current.offsetWidth,be=f.current.offsetWidth;if(me!==0&&be!==0){const{gap:Te=4}=e;Te*2<be&&o(be-Te*2<me?(be-Te*2)/me:1)}};A.useEffect(()=>{c(!0)},[]),A.useEffect(()=>{l(!0),o(1)},[e.src]),A.useEffect(b,[e.gap]);const _=()=>{const{onError:me}=e;me?.()!==!1&&l(!1)},{prefixCls:E,shape:v,size:N,src:R,srcSet:T,icon:P,className:H,rootClassName:G,alt:J,draggable:$,children:Y,crossOrigin:te}=e,Q=x2(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),Z=Dw(me=>{var be,Te;return(Te=(be=N??x?.size)!==null&&be!==void 0?be:me)!==null&&Te!==void 0?Te:"default"}),B=Object.keys(typeof Z=="object"?Z||{}:{}).some(me=>["xs","sm","md","lg","xl","xxl"].includes(me)),q=y2(B),j=A.useMemo(()=>{if(typeof Z!="object")return{};const me=Sw.find(Te=>q[Te]),be=Z[me];return be?{width:be,height:be,fontSize:be&&(P||Y)?be/2:18}:{}},[q,Z]),X=g("avatar",E),ie=Uu(X),[U,oe,se]=x0(X,ie),le=vr({[`${X}-lg`]:Z==="large",[`${X}-sm`]:Z==="small"}),ue=A.isValidElement(R),ge=v||x?.shape||"circle",de=vr(X,le,m?.className,`${X}-${ge}`,{[`${X}-image`]:ue||R&&u,[`${X}-icon`]:!!P},se,ie,H,G,oe),Fe=typeof Z=="number"?{width:Z,height:Z,fontSize:P?Z/2:18}:{};let Be;if(typeof R=="string"&&u)Be=A.createElement("img",{src:R,draggable:$,srcSet:T,onError:_,alt:J,crossOrigin:te});else if(ue)Be=R;else if(P)Be=P;else if(s||r!==1){const me=`scale(${r})`,be={msTransform:me,WebkitTransform:me,transform:me};Be=A.createElement(_w,{onResize:b},A.createElement("span",{className:`${X}-string`,ref:p,style:Object.assign({},be)},Y))}else Be=A.createElement("span",{className:`${X}-string`,style:{opacity:0},ref:p},Y);return delete Q.onError,delete Q.gap,U(A.createElement("span",Object.assign({},Q,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Fe),j),m?.style),Q.style),className:de,ref:d}),Be))},w0=A.forwardRef(w2),Hh=e=>{const{size:n,shape:r}=A.useContext(El),o=A.useMemo(()=>({size:e.size||n,shape:e.shape||r}),[e.size,e.shape,n,r]);return A.createElement(El.Provider,{value:o},e.children)},b2=e=>{var n,r,o;const{getPrefixCls:s,direction:c}=A.useContext(la),{prefixCls:u,className:l,rootClassName:f,style:p,maxCount:d,maxStyle:g,size:m,shape:x,maxPopoverPlacement:b,maxPopoverTrigger:_,children:E,max:v}=e,N=s("avatar",u),R=`${N}-group`,T=Uu(N),[P,H,G]=x0(N,T),J=vr(R,{[`${R}-rtl`]:c==="rtl"},G,T,l,f,H),$=xw(E).map((Q,Z)=>ww(Q,{key:`avatar-key-${Z}`})),Y=v?.count||d,te=$.length;if(Y&&Y<te){const Q=$.slice(0,Y),Z=$.slice(Y,te),B=v?.style||g,q=((n=v?.popover)===null||n===void 0?void 0:n.trigger)||_||"hover",j=((r=v?.popover)===null||r===void 0?void 0:r.placement)||b||"top",X=Object.assign(Object.assign({content:Z},v?.popover),{overlayClassName:vr(`${R}-popover`,(o=v?.popover)===null||o===void 0?void 0:o.overlayClassName),placement:j,trigger:q});return Q.push(A.createElement(ow,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},X),A.createElement(w0,{style:B},`+${te-Y}`))),P(A.createElement(Hh,{shape:x,size:m},A.createElement("div",{className:J,style:p},Q)))}return P(A.createElement(Hh,{shape:x,size:m},A.createElement("div",{className:J,style:p},$)))},b0=w0;b0.Group=b2;let dr=null,yu=e=>e(),Fu=[],Qs={};function qh(){const{getContainer:e,rtl:n,maxCount:r,top:o,bottom:s,showProgress:c,pauseOnHover:u}=Qs,l=e?.()||document.body;return{getContainer:()=>l,rtl:n,maxCount:r,top:o,bottom:s,showProgress:c,pauseOnHover:u}}const C2=V.forwardRef((e,n)=>{const{notificationConfig:r,sync:o}=e,{getPrefixCls:s}=A.useContext(la),c=Qs.prefixCls||s("notification"),u=A.useContext(jw),[l,f]=_0(Object.assign(Object.assign(Object.assign({},r),{prefixCls:c}),u.notification));return V.useEffect(o,[]),V.useImperativeHandle(n,()=>{const p=Object.assign({},l);return Object.keys(p).forEach(d=>{p[d]=function(){return o(),l[d].apply(l,arguments)}}),{instance:p,sync:o}}),f}),E2=V.forwardRef((e,n)=>{const[r,o]=V.useState(qh),s=()=>{o(qh)};V.useEffect(s,[]);const c=Cw(),u=c.getRootPrefixCls(),l=c.getIconPrefixCls(),f=c.getTheme(),p=V.createElement(C2,{ref:n,sync:s,notificationConfig:r});return V.createElement(bw,{prefixCls:u,iconPrefixCls:l,theme:f},c.holderRender?c.holderRender(p):p)});function nf(){if(!dr){const e=document.createDocumentFragment(),n={fragment:e};dr=n,yu(()=>{qw(V.createElement(E2,{ref:r=>{const{instance:o,sync:s}=r||{};Promise.resolve().then(()=>{!n.instance&&o&&(n.instance=o,n.sync=s,nf())})}}),e)});return}dr.instance&&(Fu.forEach(e=>{switch(e.type){case"open":{yu(()=>{dr.instance.open(Object.assign(Object.assign({},Qs),e.config))});break}case"destroy":yu(()=>{dr?.instance.destroy(e.key)});break}}),Fu=[])}function S2(e){Qs=Object.assign(Object.assign({},Qs),e),yu(()=>{var n;(n=dr?.sync)===null||n===void 0||n.call(dr)})}function C0(e){Fu.push({type:"open",config:e}),nf()}const A2=e=>{Fu.push({type:"destroy",key:e}),nf()},F2=["success","info","warning","error"],N2={open:C0,destroy:A2,config:S2,useNotification:g2,_InternalPanelDoNotUseOrYouWillBeFired:s2},rf=N2;F2.forEach(e=>{rf[e]=n=>C0(Object.assign(Object.assign({},n),{type:e}))});var T2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},I2=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:T2}))},E0=A.forwardRef(I2),B2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"},R2=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:B2}))},O2=A.forwardRef(R2),M2={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:r}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:n}}]}},name:"check-circle",theme:"twotone"},z2=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:M2}))},P2=A.forwardRef(z2),$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},j2=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:$2}))},k2=A.forwardRef(j2),L2={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:r}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:n}}]}},name:"close-circle",theme:"twotone"},H2=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:L2}))},q2=A.forwardRef(H2),V2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},G2=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:V2}))},U2=A.forwardRef(G2),W2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},X2=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:W2}))},Y2=A.forwardRef(X2),Z2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},K2=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:Z2}))},J2=A.forwardRef(K2),Q2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},eb=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:Q2}))},tb=A.forwardRef(eb),nb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},rb=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:nb}))},S0=A.forwardRef(rb),ib={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"},ob=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:ib}))},sb=A.forwardRef(ob),ab={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},ub=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:ab}))},cb=A.forwardRef(ub),lb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"},fb=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:lb}))},db=A.forwardRef(fb),hb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},pb=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:hb}))},gb=A.forwardRef(pb),mb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},yb=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:mb}))},A0=A.forwardRef(yb),vb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},Db=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:vb}))},_b=A.forwardRef(Db),xb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},wb=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:xb}))},bb=A.forwardRef(wb),Cb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},Eb=function(n,r){return A.createElement(Yt,Xt({},n,{ref:r,icon:Cb}))},Sb=A.forwardRef(Eb),Ab=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Fb=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Nb=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,ul={Space_Separator:Ab,ID_Start:Fb,ID_Continue:Nb},It={isSpaceSeparator(e){return typeof e=="string"&&ul.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||ul.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e===""||e===""||ul.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let Sl,Dn,oi,Nu,Oi,mr,Wt,of,Ys;var Tb=function(n,r){Sl=String(n),Dn="start",oi=[],Nu=0,Oi=1,mr=0,Wt=void 0,of=void 0,Ys=void 0;do Wt=Ib(),Ob[Dn]();while(Wt.type!=="eof");return typeof r=="function"?Al({"":Ys},"",r):Ys};function Al(e,n,r){const o=e[n];if(o!=null&&typeof o=="object")if(Array.isArray(o))for(let s=0;s<o.length;s++){const c=String(s),u=Al(o,c,r);u===void 0?delete o[c]:Object.defineProperty(o,c,{value:u,writable:!0,enumerable:!0,configurable:!0})}else for(const s in o){const c=Al(o,s,r);c===void 0?delete o[s]:Object.defineProperty(o,s,{value:c,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,n,o)}let Pe,Oe,Vs,ri,Ue;function Ib(){for(Pe="default",Oe="",Vs=!1,ri=1;;){Ue=ai();const e=F0[Pe]();if(e)return e}}function ai(){if(Sl[Nu])return String.fromCodePoint(Sl.codePointAt(Nu))}function re(){const e=ai();return e===`
`?(Oi++,mr=0):e?mr+=e.length:mr++,e&&(Nu+=e.length),e}const F0={default(){switch(Ue){case"	":case"\v":case"\f":case" ":case"":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":re();return;case"/":re(),Pe="comment";return;case void 0:return re(),ft("eof")}if(It.isSpaceSeparator(Ue)){re();return}return F0[Dn]()},comment(){switch(Ue){case"*":re(),Pe="multiLineComment";return;case"/":re(),Pe="singleLineComment";return}throw dt(re())},multiLineComment(){switch(Ue){case"*":re(),Pe="multiLineCommentAsterisk";return;case void 0:throw dt(re())}re()},multiLineCommentAsterisk(){switch(Ue){case"*":re();return;case"/":re(),Pe="default";return;case void 0:throw dt(re())}re(),Pe="multiLineComment"},singleLineComment(){switch(Ue){case`
`:case"\r":case"\u2028":case"\u2029":re(),Pe="default";return;case void 0:return re(),ft("eof")}re()},value(){switch(Ue){case"{":case"[":return ft("punctuator",re());case"n":return re(),fo("ull"),ft("null",null);case"t":return re(),fo("rue"),ft("boolean",!0);case"f":return re(),fo("alse"),ft("boolean",!1);case"-":case"+":re()==="-"&&(ri=-1),Pe="sign";return;case".":Oe=re(),Pe="decimalPointLeading";return;case"0":Oe=re(),Pe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Oe=re(),Pe="decimalInteger";return;case"I":return re(),fo("nfinity"),ft("numeric",1/0);case"N":return re(),fo("aN"),ft("numeric",NaN);case'"':case"'":Vs=re()==='"',Oe="",Pe="string";return}throw dt(re())},identifierNameStartEscape(){if(Ue!=="u")throw dt(re());re();const e=Fl();switch(e){case"$":case"_":break;default:if(!It.isIdStartChar(e))throw Vh();break}Oe+=e,Pe="identifierName"},identifierName(){switch(Ue){case"$":case"_":case"":case"":Oe+=re();return;case"\\":re(),Pe="identifierNameEscape";return}if(It.isIdContinueChar(Ue)){Oe+=re();return}return ft("identifier",Oe)},identifierNameEscape(){if(Ue!=="u")throw dt(re());re();const e=Fl();switch(e){case"$":case"_":case"":case"":break;default:if(!It.isIdContinueChar(e))throw Vh();break}Oe+=e,Pe="identifierName"},sign(){switch(Ue){case".":Oe=re(),Pe="decimalPointLeading";return;case"0":Oe=re(),Pe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Oe=re(),Pe="decimalInteger";return;case"I":return re(),fo("nfinity"),ft("numeric",ri*(1/0));case"N":return re(),fo("aN"),ft("numeric",NaN)}throw dt(re())},zero(){switch(Ue){case".":Oe+=re(),Pe="decimalPoint";return;case"e":case"E":Oe+=re(),Pe="decimalExponent";return;case"x":case"X":Oe+=re(),Pe="hexadecimal";return}return ft("numeric",ri*0)},decimalInteger(){switch(Ue){case".":Oe+=re(),Pe="decimalPoint";return;case"e":case"E":Oe+=re(),Pe="decimalExponent";return}if(It.isDigit(Ue)){Oe+=re();return}return ft("numeric",ri*Number(Oe))},decimalPointLeading(){if(It.isDigit(Ue)){Oe+=re(),Pe="decimalFraction";return}throw dt(re())},decimalPoint(){switch(Ue){case"e":case"E":Oe+=re(),Pe="decimalExponent";return}if(It.isDigit(Ue)){Oe+=re(),Pe="decimalFraction";return}return ft("numeric",ri*Number(Oe))},decimalFraction(){switch(Ue){case"e":case"E":Oe+=re(),Pe="decimalExponent";return}if(It.isDigit(Ue)){Oe+=re();return}return ft("numeric",ri*Number(Oe))},decimalExponent(){switch(Ue){case"+":case"-":Oe+=re(),Pe="decimalExponentSign";return}if(It.isDigit(Ue)){Oe+=re(),Pe="decimalExponentInteger";return}throw dt(re())},decimalExponentSign(){if(It.isDigit(Ue)){Oe+=re(),Pe="decimalExponentInteger";return}throw dt(re())},decimalExponentInteger(){if(It.isDigit(Ue)){Oe+=re();return}return ft("numeric",ri*Number(Oe))},hexadecimal(){if(It.isHexDigit(Ue)){Oe+=re(),Pe="hexadecimalInteger";return}throw dt(re())},hexadecimalInteger(){if(It.isHexDigit(Ue)){Oe+=re();return}return ft("numeric",ri*Number(Oe))},string(){switch(Ue){case"\\":re(),Oe+=Bb();return;case'"':if(Vs)return re(),ft("string",Oe);Oe+=re();return;case"'":if(!Vs)return re(),ft("string",Oe);Oe+=re();return;case`
`:case"\r":throw dt(re());case"\u2028":case"\u2029":Mb(Ue);break;case void 0:throw dt(re())}Oe+=re()},start(){switch(Ue){case"{":case"[":return ft("punctuator",re())}Pe="value"},beforePropertyName(){switch(Ue){case"$":case"_":Oe=re(),Pe="identifierName";return;case"\\":re(),Pe="identifierNameStartEscape";return;case"}":return ft("punctuator",re());case'"':case"'":Vs=re()==='"',Pe="string";return}if(It.isIdStartChar(Ue)){Oe+=re(),Pe="identifierName";return}throw dt(re())},afterPropertyName(){if(Ue===":")return ft("punctuator",re());throw dt(re())},beforePropertyValue(){Pe="value"},afterPropertyValue(){switch(Ue){case",":case"}":return ft("punctuator",re())}throw dt(re())},beforeArrayValue(){if(Ue==="]")return ft("punctuator",re());Pe="value"},afterArrayValue(){switch(Ue){case",":case"]":return ft("punctuator",re())}throw dt(re())},end(){throw dt(re())}};function ft(e,n){return{type:e,value:n,line:Oi,column:mr}}function fo(e){for(const n of e){if(ai()!==n)throw dt(re());re()}}function Bb(){switch(ai()){case"b":return re(),"\b";case"f":return re(),"\f";case"n":return re(),`
`;case"r":return re(),"\r";case"t":return re(),"	";case"v":return re(),"\v";case"0":if(re(),It.isDigit(ai()))throw dt(re());return"\0";case"x":return re(),Rb();case"u":return re(),Fl();case`
`:case"\u2028":case"\u2029":return re(),"";case"\r":return re(),ai()===`
`&&re(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw dt(re());case void 0:throw dt(re())}return re()}function Rb(){let e="",n=ai();if(!It.isHexDigit(n)||(e+=re(),n=ai(),!It.isHexDigit(n)))throw dt(re());return e+=re(),String.fromCodePoint(parseInt(e,16))}function Fl(){let e="",n=4;for(;n-- >0;){const r=ai();if(!It.isHexDigit(r))throw dt(re());e+=re()}return String.fromCodePoint(parseInt(e,16))}const Ob={start(){if(Wt.type==="eof")throw ho();cl()},beforePropertyName(){switch(Wt.type){case"identifier":case"string":of=Wt.value,Dn="afterPropertyName";return;case"punctuator":Qa();return;case"eof":throw ho()}},afterPropertyName(){if(Wt.type==="eof")throw ho();Dn="beforePropertyValue"},beforePropertyValue(){if(Wt.type==="eof")throw ho();cl()},beforeArrayValue(){if(Wt.type==="eof")throw ho();if(Wt.type==="punctuator"&&Wt.value==="]"){Qa();return}cl()},afterPropertyValue(){if(Wt.type==="eof")throw ho();switch(Wt.value){case",":Dn="beforePropertyName";return;case"}":Qa()}},afterArrayValue(){if(Wt.type==="eof")throw ho();switch(Wt.value){case",":Dn="beforeArrayValue";return;case"]":Qa()}},end(){}};function cl(){let e;switch(Wt.type){case"punctuator":switch(Wt.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=Wt.value;break}if(Ys===void 0)Ys=e;else{const n=oi[oi.length-1];Array.isArray(n)?n.push(e):Object.defineProperty(n,of,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")oi.push(e),Array.isArray(e)?Dn="beforeArrayValue":Dn="beforePropertyName";else{const n=oi[oi.length-1];n==null?Dn="end":Array.isArray(n)?Dn="afterArrayValue":Dn="afterPropertyValue"}}function Qa(){oi.pop();const e=oi[oi.length-1];e==null?Dn="end":Array.isArray(e)?Dn="afterArrayValue":Dn="afterPropertyValue"}function dt(e){return Tu(e===void 0?`JSON5: invalid end of input at ${Oi}:${mr}`:`JSON5: invalid character '${N0(e)}' at ${Oi}:${mr}`)}function ho(){return Tu(`JSON5: invalid end of input at ${Oi}:${mr}`)}function Vh(){return mr-=5,Tu(`JSON5: invalid identifier character at ${Oi}:${mr}`)}function Mb(e){console.warn(`JSON5: '${N0(e)}' in strings is not valid ECMAScript; consider escaping`)}function N0(e){const n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(n[e])return n[e];if(e<" "){const r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function Tu(e){const n=new SyntaxError(e);return n.lineNumber=Oi,n.columnNumber=mr,n}var zb=function(n,r,o){const s=[];let c="",u,l,f="",p;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(o=r.space,p=r.quote,r=r.replacer),typeof r=="function")l=r;else if(Array.isArray(r)){u=[];for(const _ of r){let E;typeof _=="string"?E=_:(typeof _=="number"||_ instanceof String||_ instanceof Number)&&(E=String(_)),E!==void 0&&u.indexOf(E)<0&&u.push(E)}}return o instanceof Number?o=Number(o):o instanceof String&&(o=String(o)),typeof o=="number"?o>0&&(o=Math.min(10,Math.floor(o)),f="          ".substr(0,o)):typeof o=="string"&&(f=o.substr(0,10)),d("",{"":n});function d(_,E){let v=E[_];switch(v!=null&&(typeof v.toJSON5=="function"?v=v.toJSON5(_):typeof v.toJSON=="function"&&(v=v.toJSON(_))),l&&(v=l.call(E,_,v)),v instanceof Number?v=Number(v):v instanceof String?v=String(v):v instanceof Boolean&&(v=v.valueOf()),v){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof v=="string")return g(v);if(typeof v=="number")return String(v);if(typeof v=="object")return Array.isArray(v)?b(v):m(v)}function g(_){const E={"'":.1,'"':.2},v={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let N="";for(let T=0;T<_.length;T++){const P=_[T];switch(P){case"'":case'"':E[P]++,N+=P;continue;case"\0":if(It.isDigit(_[T+1])){N+="\\x00";continue}}if(v[P]){N+=v[P];continue}if(P<" "){let H=P.charCodeAt(0).toString(16);N+="\\x"+("00"+H).substring(H.length);continue}N+=P}const R=p||Object.keys(E).reduce((T,P)=>E[T]<E[P]?T:P);return N=N.replace(new RegExp(R,"g"),v[R]),R+N+R}function m(_){if(s.indexOf(_)>=0)throw TypeError("Converting circular structure to JSON5");s.push(_);let E=c;c=c+f;let v=u||Object.keys(_),N=[];for(const T of v){const P=d(T,_);if(P!==void 0){let H=x(T)+":";f!==""&&(H+=" "),H+=P,N.push(H)}}let R;if(N.length===0)R="{}";else{let T;if(f==="")T=N.join(","),R="{"+T+"}";else{let P=`,
`+c;T=N.join(P),R=`{
`+c+T+`,
`+E+"}"}}return s.pop(),c=E,R}function x(_){if(_.length===0)return g(_);const E=String.fromCodePoint(_.codePointAt(0));if(!It.isIdStartChar(E))return g(_);for(let v=E.length;v<_.length;v++)if(!It.isIdContinueChar(String.fromCodePoint(_.codePointAt(v))))return g(_);return _}function b(_){if(s.indexOf(_)>=0)throw TypeError("Converting circular structure to JSON5");s.push(_);let E=c;c=c+f;let v=[];for(let R=0;R<_.length;R++){const T=d(String(R),_);v.push(T!==void 0?T:"null")}let N;if(v.length===0)N="[]";else if(f==="")N="["+v.join(",")+"]";else{let R=`,
`+c,T=v.join(R);N=`[
`+c+T+`,
`+E+"]"}return s.pop(),c=E,N}};const Pb={parse:Tb,stringify:zb};var Ii=Pb;function _n(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=_n(e[r]))!==""&&(n+=(n&&" ")+o);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}const{useDebugValue:$b}=V,{useSyncExternalStoreWithSelector:jb}=sw,kb=e=>e;function T0(e,n=kb,r){const o=jb(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return $b(o),o}const Gh=(e,n)=>{const r=aw(e),o=(s,c=n)=>T0(r,s,c);return Object.assign(o,r),o},Lb=(e,n)=>e?Gh(e,n):Gh;function cn(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[o,s]of e)if(!Object.is(s,n.get(o)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const o of e)if(!n.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(n,o)||!Object.is(e[o],n[o]))return!1;return!0}var Hb={value:()=>{}};function Xu(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new vu(r)}function vu(e){this._=e}function qb(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}vu.prototype=Xu.prototype={constructor:vu,on:function(e,n){var r=this._,o=qb(e+"",r),s,c=-1,u=o.length;if(arguments.length<2){for(;++c<u;)if((s=(e=o[c]).type)&&(s=Vb(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<u;)if(s=(e=o[c]).type)r[s]=Uh(r[s],e.name,n);else if(n==null)for(s in r)r[s]=Uh(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new vu(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,c;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],o=0,s=c.length;o<s;++o)c[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,c=o.length;s<c;++s)o[s].value.apply(n,r)}};function Vb(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function Uh(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=Hb,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var Nl="http://www.w3.org/1999/xhtml";const Wh={svg:"http://www.w3.org/2000/svg",xhtml:Nl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yu(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Wh.hasOwnProperty(n)?{space:Wh[n],local:e}:e}function Gb(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Nl&&n.documentElement.namespaceURI===Nl?n.createElement(e):n.createElementNS(r,e)}}function Ub(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function I0(e){var n=Yu(e);return(n.local?Ub:Gb)(n)}function Wb(){}function sf(e){return e==null?Wb:function(){return this.querySelector(e)}}function Xb(e){typeof e!="function"&&(e=sf(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],u=c.length,l=o[s]=new Array(u),f,p,d=0;d<u;++d)(f=c[d])&&(p=e.call(f,f.__data__,d,c))&&("__data__"in f&&(p.__data__=f.__data__),l[d]=p);return new Hn(o,this._parents)}function Yb(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Zb(){return[]}function B0(e){return e==null?Zb:function(){return this.querySelectorAll(e)}}function Kb(e){return function(){return Yb(e.apply(this,arguments))}}function Jb(e){typeof e=="function"?e=Kb(e):e=B0(e);for(var n=this._groups,r=n.length,o=[],s=[],c=0;c<r;++c)for(var u=n[c],l=u.length,f,p=0;p<l;++p)(f=u[p])&&(o.push(e.call(f,f.__data__,p,u)),s.push(f));return new Hn(o,s)}function R0(e){return function(){return this.matches(e)}}function O0(e){return function(n){return n.matches(e)}}var Qb=Array.prototype.find;function eC(e){return function(){return Qb.call(this.children,e)}}function tC(){return this.firstElementChild}function nC(e){return this.select(e==null?tC:eC(typeof e=="function"?e:O0(e)))}var rC=Array.prototype.filter;function iC(){return Array.from(this.children)}function oC(e){return function(){return rC.call(this.children,e)}}function sC(e){return this.selectAll(e==null?iC:oC(typeof e=="function"?e:O0(e)))}function aC(e){typeof e!="function"&&(e=R0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],u=c.length,l=o[s]=[],f,p=0;p<u;++p)(f=c[p])&&e.call(f,f.__data__,p,c)&&l.push(f);return new Hn(o,this._parents)}function M0(e){return new Array(e.length)}function uC(){return new Hn(this._enter||this._groups.map(M0),this._parents)}function Iu(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Iu.prototype={constructor:Iu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cC(e){return function(){return e}}function lC(e,n,r,o,s,c){for(var u=0,l,f=n.length,p=c.length;u<p;++u)(l=n[u])?(l.__data__=c[u],o[u]=l):r[u]=new Iu(e,c[u]);for(;u<f;++u)(l=n[u])&&(s[u]=l)}function fC(e,n,r,o,s,c,u){var l,f,p=new Map,d=n.length,g=c.length,m=new Array(d),x;for(l=0;l<d;++l)(f=n[l])&&(m[l]=x=u.call(f,f.__data__,l,n)+"",p.has(x)?s[l]=f:p.set(x,f));for(l=0;l<g;++l)x=u.call(e,c[l],l,c)+"",(f=p.get(x))?(o[l]=f,f.__data__=c[l],p.delete(x)):r[l]=new Iu(e,c[l]);for(l=0;l<d;++l)(f=n[l])&&p.get(m[l])===f&&(s[l]=f)}function dC(e){return e.__data__}function hC(e,n){if(!arguments.length)return Array.from(this,dC);var r=n?fC:lC,o=this._parents,s=this._groups;typeof e!="function"&&(e=cC(e));for(var c=s.length,u=new Array(c),l=new Array(c),f=new Array(c),p=0;p<c;++p){var d=o[p],g=s[p],m=g.length,x=pC(e.call(d,d&&d.__data__,p,o)),b=x.length,_=l[p]=new Array(b),E=u[p]=new Array(b),v=f[p]=new Array(m);r(d,g,_,E,v,x,n);for(var N=0,R=0,T,P;N<b;++N)if(T=_[N]){for(N>=R&&(R=N+1);!(P=E[R])&&++R<b;);T._next=P||null}}return u=new Hn(u,o),u._enter=l,u._exit=f,u}function pC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gC(){return new Hn(this._exit||this._groups.map(M0),this._parents)}function mC(e,n,r){var o=this.enter(),s=this,c=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?c.remove():r(c),o&&s?o.merge(s).order():s}function yC(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,c=o.length,u=Math.min(s,c),l=new Array(s),f=0;f<u;++f)for(var p=r[f],d=o[f],g=p.length,m=l[f]=new Array(g),x,b=0;b<g;++b)(x=p[b]||d[b])&&(m[b]=x);for(;f<s;++f)l[f]=r[f];return new Hn(l,this._parents)}function vC(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,c=o[s],u;--s>=0;)(u=o[s])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function DC(e){e||(e=_C);function n(g,m){return g&&m?e(g.__data__,m.__data__):!g-!m}for(var r=this._groups,o=r.length,s=new Array(o),c=0;c<o;++c){for(var u=r[c],l=u.length,f=s[c]=new Array(l),p,d=0;d<l;++d)(p=u[d])&&(f[d]=p);f.sort(n)}return new Hn(s,this._parents).order()}function _C(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function xC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function wC(){return Array.from(this)}function bC(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,c=o.length;s<c;++s){var u=o[s];if(u)return u}return null}function CC(){let e=0;for(const n of this)++e;return e}function EC(){return!this.node()}function SC(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],c=0,u=s.length,l;c<u;++c)(l=s[c])&&e.call(l,l.__data__,c,s);return this}function AC(e){return function(){this.removeAttribute(e)}}function FC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function NC(e,n){return function(){this.setAttribute(e,n)}}function TC(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function IC(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function BC(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function RC(e,n){var r=Yu(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?FC:AC:typeof n=="function"?r.local?BC:IC:r.local?TC:NC)(r,n))}function z0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function OC(e){return function(){this.style.removeProperty(e)}}function MC(e,n,r){return function(){this.style.setProperty(e,n,r)}}function zC(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function PC(e,n,r){return arguments.length>1?this.each((n==null?OC:typeof n=="function"?zC:MC)(e,n,r??"")):cs(this.node(),e)}function cs(e,n){return e.style.getPropertyValue(n)||z0(e).getComputedStyle(e,null).getPropertyValue(n)}function $C(e){return function(){delete this[e]}}function jC(e,n){return function(){this[e]=n}}function kC(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function LC(e,n){return arguments.length>1?this.each((n==null?$C:typeof n=="function"?kC:jC)(e,n)):this.node()[e]}function P0(e){return e.trim().split(/^|\s+/)}function af(e){return e.classList||new $0(e)}function $0(e){this._node=e,this._names=P0(e.getAttribute("class")||"")}$0.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function j0(e,n){for(var r=af(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function k0(e,n){for(var r=af(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function HC(e){return function(){j0(this,e)}}function qC(e){return function(){k0(this,e)}}function VC(e,n){return function(){(n.apply(this,arguments)?j0:k0)(this,e)}}function GC(e,n){var r=P0(e+"");if(arguments.length<2){for(var o=af(this.node()),s=-1,c=r.length;++s<c;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?VC:n?HC:qC)(r,n))}function UC(){this.textContent=""}function WC(e){return function(){this.textContent=e}}function XC(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function YC(e){return arguments.length?this.each(e==null?UC:(typeof e=="function"?XC:WC)(e)):this.node().textContent}function ZC(){this.innerHTML=""}function KC(e){return function(){this.innerHTML=e}}function JC(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function QC(e){return arguments.length?this.each(e==null?ZC:(typeof e=="function"?JC:KC)(e)):this.node().innerHTML}function eE(){this.nextSibling&&this.parentNode.appendChild(this)}function tE(){return this.each(eE)}function nE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function rE(){return this.each(nE)}function iE(e){var n=typeof e=="function"?e:I0(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function oE(){return null}function sE(e,n){var r=typeof e=="function"?e:I0(e),o=n==null?oE:typeof n=="function"?n:sf(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function aE(){var e=this.parentNode;e&&e.removeChild(this)}function uE(){return this.each(aE)}function cE(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function lE(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function fE(e){return this.select(e?lE:cE)}function dE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function hE(e){return function(n){e.call(this,n,this.__data__)}}function pE(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function gE(e){return function(){var n=this.__on;if(n){for(var r=0,o=-1,s=n.length,c;r<s;++r)c=n[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++o]=c;++o?n.length=o:delete this.__on}}}function mE(e,n,r){return function(){var o=this.__on,s,c=hE(n);if(o){for(var u=0,l=o.length;u<l;++u)if((s=o[u]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=c,s.options=r),s.value=n;return}}this.addEventListener(e.type,c,r),s={type:e.type,name:e.name,value:n,listener:c,options:r},o?o.push(s):this.__on=[s]}}function yE(e,n,r){var o=pE(e+""),s,c=o.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var f=0,p=l.length,d;f<p;++f)for(s=0,d=l[f];s<c;++s)if((u=o[s]).type===d.type&&u.name===d.name)return d.value}return}for(l=n?mE:gE,s=0;s<c;++s)this.each(l(o[s],n,r));return this}function L0(e,n,r){var o=z0(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function vE(e,n){return function(){return L0(this,e,n)}}function DE(e,n){return function(){return L0(this,e,n.apply(this,arguments))}}function _E(e,n){return this.each((typeof n=="function"?DE:vE)(e,n))}function*xE(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,c=o.length,u;s<c;++s)(u=o[s])&&(yield u)}var H0=[null];function Hn(e,n){this._groups=e,this._parents=n}function fa(){return new Hn([[document.documentElement]],H0)}function wE(){return this}Hn.prototype=fa.prototype={constructor:Hn,select:Xb,selectAll:Jb,selectChild:nC,selectChildren:sC,filter:aC,data:hC,enter:uC,exit:gC,join:mC,merge:yC,selection:wE,order:vC,sort:DC,call:xC,nodes:wC,node:bC,size:CC,empty:EC,each:SC,attr:RC,style:PC,property:LC,classed:GC,text:YC,html:QC,raise:tE,lower:rE,append:iE,insert:sE,remove:uE,clone:fE,datum:dE,on:yE,dispatch:_E,[Symbol.iterator]:xE};function hr(e){return typeof e=="string"?new Hn([[document.querySelector(e)]],[document.documentElement]):new Hn([[e]],H0)}function bE(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Nr(e,n){if(e=bE(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const CE={passive:!1},ea={capture:!0,passive:!1};function ll(e){e.stopImmediatePropagation()}function rs(e){e.preventDefault(),e.stopImmediatePropagation()}function q0(e){var n=e.document.documentElement,r=hr(e).on("dragstart.drag",rs,ea);"onselectstart"in n?r.on("selectstart.drag",rs,ea):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function V0(e,n){var r=e.document.documentElement,o=hr(e).on("dragstart.drag",null);n&&(o.on("click.drag",rs,ea),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const eu=e=>()=>e;function Tl(e,{sourceEvent:n,subject:r,target:o,identifier:s,active:c,x:u,y:l,dx:f,dy:p,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:d}})}Tl.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function EE(e){return!e.ctrlKey&&!e.button}function SE(){return this.parentNode}function AE(e,n){return n??{x:e.x,y:e.y}}function FE(){return navigator.maxTouchPoints||"ontouchstart"in this}function NE(){var e=EE,n=SE,r=AE,o=FE,s={},c=Xu("start","drag","end"),u=0,l,f,p,d,g=0;function m(T){T.on("mousedown.drag",x).filter(o).on("touchstart.drag",E).on("touchmove.drag",v,CE).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(T,P){if(!(d||!e.call(this,T,P))){var H=R(this,n.call(this,T,P),T,P,"mouse");H&&(hr(T.view).on("mousemove.drag",b,ea).on("mouseup.drag",_,ea),q0(T.view),ll(T),p=!1,l=T.clientX,f=T.clientY,H("start",T))}}function b(T){if(rs(T),!p){var P=T.clientX-l,H=T.clientY-f;p=P*P+H*H>g}s.mouse("drag",T)}function _(T){hr(T.view).on("mousemove.drag mouseup.drag",null),V0(T.view,p),rs(T),s.mouse("end",T)}function E(T,P){if(e.call(this,T,P)){var H=T.changedTouches,G=n.call(this,T,P),J=H.length,$,Y;for($=0;$<J;++$)(Y=R(this,G,T,P,H[$].identifier,H[$]))&&(ll(T),Y("start",T,H[$]))}}function v(T){var P=T.changedTouches,H=P.length,G,J;for(G=0;G<H;++G)(J=s[P[G].identifier])&&(rs(T),J("drag",T,P[G]))}function N(T){var P=T.changedTouches,H=P.length,G,J;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),G=0;G<H;++G)(J=s[P[G].identifier])&&(ll(T),J("end",T,P[G]))}function R(T,P,H,G,J,$){var Y=c.copy(),te=Nr($||H,P),Q,Z,B;if((B=r.call(T,new Tl("beforestart",{sourceEvent:H,target:m,identifier:J,active:u,x:te[0],y:te[1],dx:0,dy:0,dispatch:Y}),G))!=null)return Q=B.x-te[0]||0,Z=B.y-te[1]||0,function q(j,X,ie){var U=te,oe;switch(j){case"start":s[J]=q,oe=u++;break;case"end":delete s[J],--u;case"drag":te=Nr(ie||X,P),oe=u;break}Y.call(j,T,new Tl(j,{sourceEvent:X,subject:B,target:m,identifier:J,active:oe,x:te[0]+Q,y:te[1]+Z,dx:te[0]-U[0],dy:te[1]-U[1],dispatch:Y}),G)}}return m.filter=function(T){return arguments.length?(e=typeof T=="function"?T:eu(!!T),m):e},m.container=function(T){return arguments.length?(n=typeof T=="function"?T:eu(T),m):n},m.subject=function(T){return arguments.length?(r=typeof T=="function"?T:eu(T),m):r},m.touchable=function(T){return arguments.length?(o=typeof T=="function"?T:eu(!!T),m):o},m.on=function(){var T=c.on.apply(c,arguments);return T===c?m:T},m.clickDistance=function(T){return arguments.length?(g=(T=+T)*T,m):Math.sqrt(g)},m}function uf(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function G0(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function da(){}var ta=.7,Bu=1/ta,is="\\s*([+-]?\\d+)\\s*",na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",TE=/^#([0-9a-f]{3,8})$/,IE=new RegExp(`^rgb\\(${is},${is},${is}\\)$`),BE=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),RE=new RegExp(`^rgba\\(${is},${is},${is},${na}\\)$`),OE=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${na}\\)$`),ME=new RegExp(`^hsl\\(${na},${Tr},${Tr}\\)$`),zE=new RegExp(`^hsla\\(${na},${Tr},${Tr},${na}\\)$`),Xh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uf(da,ra,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yh,formatHex:Yh,formatHex8:PE,formatHsl:$E,formatRgb:Zh,toString:Zh});function Yh(){return this.rgb().formatHex()}function PE(){return this.rgb().formatHex8()}function $E(){return U0(this).formatHsl()}function Zh(){return this.rgb().formatRgb()}function ra(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=TE.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Kh(n):r===3?new Tn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?tu(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?tu(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=IE.exec(e))?new Tn(n[1],n[2],n[3],1):(n=BE.exec(e))?new Tn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=RE.exec(e))?tu(n[1],n[2],n[3],n[4]):(n=OE.exec(e))?tu(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=ME.exec(e))?ep(n[1],n[2]/100,n[3]/100,1):(n=zE.exec(e))?ep(n[1],n[2]/100,n[3]/100,n[4]):Xh.hasOwnProperty(e)?Kh(Xh[e]):e==="transparent"?new Tn(NaN,NaN,NaN,0):null}function Kh(e){return new Tn(e>>16&255,e>>8&255,e&255,1)}function tu(e,n,r,o){return o<=0&&(e=n=r=NaN),new Tn(e,n,r,o)}function jE(e){return e instanceof da||(e=ra(e)),e?(e=e.rgb(),new Tn(e.r,e.g,e.b,e.opacity)):new Tn}function Il(e,n,r,o){return arguments.length===1?jE(e):new Tn(e,n,r,o??1)}function Tn(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}uf(Tn,Il,G0(da,{brighter(e){return e=e==null?Bu:Math.pow(Bu,e),new Tn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ta:Math.pow(ta,e),new Tn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Tn(yo(this.r),yo(this.g),yo(this.b),Ru(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Jh,formatHex:Jh,formatHex8:kE,formatRgb:Qh,toString:Qh}));function Jh(){return`#${go(this.r)}${go(this.g)}${go(this.b)}`}function kE(){return`#${go(this.r)}${go(this.g)}${go(this.b)}${go((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qh(){const e=Ru(this.opacity);return`${e===1?"rgb(":"rgba("}${yo(this.r)}, ${yo(this.g)}, ${yo(this.b)}${e===1?")":`, ${e})`}`}function Ru(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function go(e){return e=yo(e),(e<16?"0":"")+e.toString(16)}function ep(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new pr(e,n,r,o)}function U0(e){if(e instanceof pr)return new pr(e.h,e.s,e.l,e.opacity);if(e instanceof da||(e=ra(e)),!e)return new pr;if(e instanceof pr)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),c=Math.max(n,r,o),u=NaN,l=c-s,f=(c+s)/2;return l?(n===c?u=(r-o)/l+(r<o)*6:r===c?u=(o-n)/l+2:u=(n-r)/l+4,l/=f<.5?c+s:2-c-s,u*=60):l=f>0&&f<1?0:u,new pr(u,l,f,e.opacity)}function LE(e,n,r,o){return arguments.length===1?U0(e):new pr(e,n,r,o??1)}function pr(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}uf(pr,LE,G0(da,{brighter(e){return e=e==null?Bu:Math.pow(Bu,e),new pr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ta:Math.pow(ta,e),new pr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new Tn(fl(e>=240?e-240:e+120,s,o),fl(e,s,o),fl(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new pr(tp(this.h),nu(this.s),nu(this.l),Ru(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ru(this.opacity);return`${e===1?"hsl(":"hsla("}${tp(this.h)}, ${nu(this.s)*100}%, ${nu(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tp(e){return e=(e||0)%360,e<0?e+360:e}function nu(e){return Math.max(0,Math.min(1,e||0))}function fl(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const W0=e=>()=>e;function HE(e,n){return function(r){return e+r*n}}function qE(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function VE(e){return(e=+e)==1?X0:function(n,r){return r-n?qE(n,r,e):W0(isNaN(n)?r:n)}}function X0(e,n){var r=n-e;return r?HE(e,r):W0(isNaN(e)?n:e)}const np=function e(n){var r=VE(n);function o(s,c){var u=r((s=Il(s)).r,(c=Il(c)).r),l=r(s.g,c.g),f=r(s.b,c.b),p=X0(s.opacity,c.opacity);return function(d){return s.r=u(d),s.g=l(d),s.b=f(d),s.opacity=p(d),s+""}}return o.gamma=e,o}(1);function Fi(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var Bl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,dl=new RegExp(Bl.source,"g");function GE(e){return function(){return e}}function UE(e){return function(n){return e(n)+""}}function WE(e,n){var r=Bl.lastIndex=dl.lastIndex=0,o,s,c,u=-1,l=[],f=[];for(e=e+"",n=n+"";(o=Bl.exec(e))&&(s=dl.exec(n));)(c=s.index)>r&&(c=n.slice(r,c),l[u]?l[u]+=c:l[++u]=c),(o=o[0])===(s=s[0])?l[u]?l[u]+=s:l[++u]=s:(l[++u]=null,f.push({i:u,x:Fi(o,s)})),r=dl.lastIndex;return r<n.length&&(c=n.slice(r),l[u]?l[u]+=c:l[++u]=c),l.length<2?f[0]?UE(f[0].x):GE(n):(n=f.length,function(p){for(var d=0,g;d<n;++d)l[(g=f[d]).i]=g.x(p);return l.join("")})}var rp=180/Math.PI,Rl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Y0(e,n,r,o,s,c){var u,l,f;return(u=Math.sqrt(e*e+n*n))&&(e/=u,n/=u),(f=e*r+n*o)&&(r-=e*f,o-=n*f),(l=Math.sqrt(r*r+o*o))&&(r/=l,o/=l,f/=l),e*o<n*r&&(e=-e,n=-n,f=-f,u=-u),{translateX:s,translateY:c,rotate:Math.atan2(n,e)*rp,skewX:Math.atan(f)*rp,scaleX:u,scaleY:l}}var ru;function XE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Rl:Y0(n.a,n.b,n.c,n.d,n.e,n.f)}function YE(e){return e==null||(ru||(ru=document.createElementNS("http://www.w3.org/2000/svg","g")),ru.setAttribute("transform",e),!(e=ru.transform.baseVal.consolidate()))?Rl:(e=e.matrix,Y0(e.a,e.b,e.c,e.d,e.e,e.f))}function Z0(e,n,r,o){function s(p){return p.length?p.pop()+" ":""}function c(p,d,g,m,x,b){if(p!==g||d!==m){var _=x.push("translate(",null,n,null,r);b.push({i:_-4,x:Fi(p,g)},{i:_-2,x:Fi(d,m)})}else(g||m)&&x.push("translate("+g+n+m+r)}function u(p,d,g,m){p!==d?(p-d>180?d+=360:d-p>180&&(p+=360),m.push({i:g.push(s(g)+"rotate(",null,o)-2,x:Fi(p,d)})):d&&g.push(s(g)+"rotate("+d+o)}function l(p,d,g,m){p!==d?m.push({i:g.push(s(g)+"skewX(",null,o)-2,x:Fi(p,d)}):d&&g.push(s(g)+"skewX("+d+o)}function f(p,d,g,m,x,b){if(p!==g||d!==m){var _=x.push(s(x)+"scale(",null,",",null,")");b.push({i:_-4,x:Fi(p,g)},{i:_-2,x:Fi(d,m)})}else(g!==1||m!==1)&&x.push(s(x)+"scale("+g+","+m+")")}return function(p,d){var g=[],m=[];return p=e(p),d=e(d),c(p.translateX,p.translateY,d.translateX,d.translateY,g,m),u(p.rotate,d.rotate,g,m),l(p.skewX,d.skewX,g,m),f(p.scaleX,p.scaleY,d.scaleX,d.scaleY,g,m),p=d=null,function(x){for(var b=-1,_=m.length,E;++b<_;)g[(E=m[b]).i]=E.x(x);return g.join("")}}}var ZE=Z0(XE,"px, ","px)","deg)"),KE=Z0(YE,", ",")",")"),JE=1e-12;function ip(e){return((e=Math.exp(e))+1/e)/2}function QE(e){return((e=Math.exp(e))-1/e)/2}function eS(e){return((e=Math.exp(2*e))-1)/(e+1)}const tS=function e(n,r,o){function s(c,u){var l=c[0],f=c[1],p=c[2],d=u[0],g=u[1],m=u[2],x=d-l,b=g-f,_=x*x+b*b,E,v;if(_<JE)v=Math.log(m/p)/n,E=function(G){return[l+G*x,f+G*b,p*Math.exp(n*G*v)]};else{var N=Math.sqrt(_),R=(m*m-p*p+o*_)/(2*p*r*N),T=(m*m-p*p-o*_)/(2*m*r*N),P=Math.log(Math.sqrt(R*R+1)-R),H=Math.log(Math.sqrt(T*T+1)-T);v=(H-P)/n,E=function(G){var J=G*v,$=ip(P),Y=p/(r*N)*($*eS(n*J+P)-QE(P));return[l+Y*x,f+Y*b,p*$/ip(n*J+P)]}}return E.duration=v*1e3*n/Math.SQRT2,E}return s.rho=function(c){var u=Math.max(.001,+c),l=u*u,f=l*l;return e(u,l,f)},s}(Math.SQRT2,2,4);var ls=0,Gs=0,Ps=0,K0=1e3,Ou,Us,Mu=0,Do=0,Zu=0,ia=typeof performance=="object"&&performance.now?performance:Date,J0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function cf(){return Do||(J0(nS),Do=ia.now()+Zu)}function nS(){Do=0}function zu(){this._call=this._time=this._next=null}zu.prototype=Q0.prototype={constructor:zu,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?cf():+r)+(n==null?0:+n),!this._next&&Us!==this&&(Us?Us._next=this:Ou=this,Us=this),this._call=e,this._time=r,Ol()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ol())}};function Q0(e,n,r){var o=new zu;return o.restart(e,n,r),o}function rS(){cf(),++ls;for(var e=Ou,n;e;)(n=Do-e._time)>=0&&e._call.call(void 0,n),e=e._next;--ls}function op(){Do=(Mu=ia.now())+Zu,ls=Gs=0;try{rS()}finally{ls=0,oS(),Do=0}}function iS(){var e=ia.now(),n=e-Mu;n>K0&&(Zu-=n,Mu=e)}function oS(){for(var e,n=Ou,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Ou=r);Us=e,Ol(o)}function Ol(e){if(!ls){Gs&&(Gs=clearTimeout(Gs));var n=e-Do;n>24?(e<1/0&&(Gs=setTimeout(op,e-ia.now()-Zu)),Ps&&(Ps=clearInterval(Ps))):(Ps||(Mu=ia.now(),Ps=setInterval(iS,K0)),ls=1,J0(op))}}function sp(e,n,r){var o=new zu;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var sS=Xu("start","end","cancel","interrupt"),aS=[],eg=0,ap=1,Ml=2,Du=3,up=4,zl=5,_u=6;function Ku(e,n,r,o,s,c){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;uS(e,r,{name:n,index:o,group:s,on:sS,tween:aS,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:eg})}function lf(e,n){var r=Dr(e,n);if(r.state>eg)throw new Error("too late; already scheduled");return r}function Ir(e,n){var r=Dr(e,n);if(r.state>Du)throw new Error("too late; already running");return r}function Dr(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function uS(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=Q0(c,0,r.time);function c(p){r.state=ap,r.timer.restart(u,r.delay,r.time),r.delay<=p&&u(p-r.delay)}function u(p){var d,g,m,x;if(r.state!==ap)return f();for(d in o)if(x=o[d],x.name===r.name){if(x.state===Du)return sp(u);x.state===up?(x.state=_u,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete o[d]):+d<n&&(x.state=_u,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete o[d])}if(sp(function(){r.state===Du&&(r.state=up,r.timer.restart(l,r.delay,r.time),l(p))}),r.state=Ml,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Ml){for(r.state=Du,s=new Array(m=r.tween.length),d=0,g=-1;d<m;++d)(x=r.tween[d].value.call(e,e.__data__,r.index,r.group))&&(s[++g]=x);s.length=g+1}}function l(p){for(var d=p<r.duration?r.ease.call(null,p/r.duration):(r.timer.restart(f),r.state=zl,1),g=-1,m=s.length;++g<m;)s[g].call(e,d);r.state===zl&&(r.on.call("end",e,e.__data__,r.index,r.group),f())}function f(){r.state=_u,r.timer.stop(),delete o[n];for(var p in o)return;delete e.__transition}}function xu(e,n){var r=e.__transition,o,s,c=!0,u;if(r){n=n==null?null:n+"";for(u in r){if((o=r[u]).name!==n){c=!1;continue}s=o.state>Ml&&o.state<zl,o.state=_u,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[u]}c&&delete e.__transition}}function cS(e){return this.each(function(){xu(this,e)})}function lS(e,n){var r,o;return function(){var s=Ir(this,e),c=s.tween;if(c!==r){o=r=c;for(var u=0,l=o.length;u<l;++u)if(o[u].name===n){o=o.slice(),o.splice(u,1);break}}s.tween=o}}function fS(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var c=Ir(this,e),u=c.tween;if(u!==o){s=(o=u).slice();for(var l={name:n,value:r},f=0,p=s.length;f<p;++f)if(s[f].name===n){s[f]=l;break}f===p&&s.push(l)}c.tween=s}}function dS(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=Dr(this.node(),r).tween,s=0,c=o.length,u;s<c;++s)if((u=o[s]).name===e)return u.value;return null}return this.each((n==null?lS:fS)(r,e,n))}function ff(e,n,r){var o=e._id;return e.each(function(){var s=Ir(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Dr(s,o).value[n]}}function tg(e,n){var r;return(typeof n=="number"?Fi:n instanceof ra?np:(r=ra(n))?(n=r,np):WE)(e,n)}function hS(e){return function(){this.removeAttribute(e)}}function pS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function gS(e,n,r){var o,s=r+"",c;return function(){var u=this.getAttribute(e);return u===s?null:u===o?c:c=n(o=u,r)}}function mS(e,n,r){var o,s=r+"",c;return function(){var u=this.getAttributeNS(e.space,e.local);return u===s?null:u===o?c:c=n(o=u,r)}}function yS(e,n,r){var o,s,c;return function(){var u,l=r(this),f;return l==null?void this.removeAttribute(e):(u=this.getAttribute(e),f=l+"",u===f?null:u===o&&f===s?c:(s=f,c=n(o=u,l)))}}function vS(e,n,r){var o,s,c;return function(){var u,l=r(this),f;return l==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),f=l+"",u===f?null:u===o&&f===s?c:(s=f,c=n(o=u,l)))}}function DS(e,n){var r=Yu(e),o=r==="transform"?KE:tg;return this.attrTween(e,typeof n=="function"?(r.local?vS:yS)(r,o,ff(this,"attr."+e,n)):n==null?(r.local?pS:hS)(r):(r.local?mS:gS)(r,o,n))}function _S(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function xS(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function wS(e,n){var r,o;function s(){var c=n.apply(this,arguments);return c!==o&&(r=(o=c)&&xS(e,c)),r}return s._value=n,s}function bS(e,n){var r,o;function s(){var c=n.apply(this,arguments);return c!==o&&(r=(o=c)&&_S(e,c)),r}return s._value=n,s}function CS(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=Yu(e);return this.tween(r,(o.local?wS:bS)(o,n))}function ES(e,n){return function(){lf(this,e).delay=+n.apply(this,arguments)}}function SS(e,n){return n=+n,function(){lf(this,e).delay=n}}function AS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?ES:SS)(n,e)):Dr(this.node(),n).delay}function FS(e,n){return function(){Ir(this,e).duration=+n.apply(this,arguments)}}function NS(e,n){return n=+n,function(){Ir(this,e).duration=n}}function TS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?FS:NS)(n,e)):Dr(this.node(),n).duration}function IS(e,n){if(typeof n!="function")throw new Error;return function(){Ir(this,e).ease=n}}function BS(e){var n=this._id;return arguments.length?this.each(IS(n,e)):Dr(this.node(),n).ease}function RS(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;Ir(this,e).ease=r}}function OS(e){if(typeof e!="function")throw new Error;return this.each(RS(this._id,e))}function MS(e){typeof e!="function"&&(e=R0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],u=c.length,l=o[s]=[],f,p=0;p<u;++p)(f=c[p])&&e.call(f,f.__data__,p,c)&&l.push(f);return new ui(o,this._parents,this._name,this._id)}function zS(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,c=Math.min(o,s),u=new Array(o),l=0;l<c;++l)for(var f=n[l],p=r[l],d=f.length,g=u[l]=new Array(d),m,x=0;x<d;++x)(m=f[x]||p[x])&&(g[x]=m);for(;l<o;++l)u[l]=n[l];return new ui(u,this._parents,this._name,this._id)}function PS(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function $S(e,n,r){var o,s,c=PS(n)?lf:Ir;return function(){var u=c(this,e),l=u.on;l!==o&&(s=(o=l).copy()).on(n,r),u.on=s}}function jS(e,n){var r=this._id;return arguments.length<2?Dr(this.node(),r).on.on(e):this.each($S(r,e,n))}function kS(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function LS(){return this.on("end.remove",kS(this._id))}function HS(e){var n=this._name,r=this._id;typeof e!="function"&&(e=sf(e));for(var o=this._groups,s=o.length,c=new Array(s),u=0;u<s;++u)for(var l=o[u],f=l.length,p=c[u]=new Array(f),d,g,m=0;m<f;++m)(d=l[m])&&(g=e.call(d,d.__data__,m,l))&&("__data__"in d&&(g.__data__=d.__data__),p[m]=g,Ku(p[m],n,r,m,p,Dr(d,r)));return new ui(c,this._parents,n,r)}function qS(e){var n=this._name,r=this._id;typeof e!="function"&&(e=B0(e));for(var o=this._groups,s=o.length,c=[],u=[],l=0;l<s;++l)for(var f=o[l],p=f.length,d,g=0;g<p;++g)if(d=f[g]){for(var m=e.call(d,d.__data__,g,f),x,b=Dr(d,r),_=0,E=m.length;_<E;++_)(x=m[_])&&Ku(x,n,r,_,m,b);c.push(m),u.push(d)}return new ui(c,u,n,r)}var VS=fa.prototype.constructor;function GS(){return new VS(this._groups,this._parents)}function US(e,n){var r,o,s;return function(){var c=cs(this,e),u=(this.style.removeProperty(e),cs(this,e));return c===u?null:c===r&&u===o?s:s=n(r=c,o=u)}}function ng(e){return function(){this.style.removeProperty(e)}}function WS(e,n,r){var o,s=r+"",c;return function(){var u=cs(this,e);return u===s?null:u===o?c:c=n(o=u,r)}}function XS(e,n,r){var o,s,c;return function(){var u=cs(this,e),l=r(this),f=l+"";return l==null&&(f=l=(this.style.removeProperty(e),cs(this,e))),u===f?null:u===o&&f===s?c:(s=f,c=n(o=u,l))}}function YS(e,n){var r,o,s,c="style."+n,u="end."+c,l;return function(){var f=Ir(this,e),p=f.on,d=f.value[c]==null?l||(l=ng(n)):void 0;(p!==r||s!==d)&&(o=(r=p).copy()).on(u,s=d),f.on=o}}function ZS(e,n,r){var o=(e+="")=="transform"?ZE:tg;return n==null?this.styleTween(e,US(e,o)).on("end.style."+e,ng(e)):typeof n=="function"?this.styleTween(e,XS(e,o,ff(this,"style."+e,n))).each(YS(this._id,e)):this.styleTween(e,WS(e,o,n),r).on("end.style."+e,null)}function KS(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function JS(e,n,r){var o,s;function c(){var u=n.apply(this,arguments);return u!==s&&(o=(s=u)&&KS(e,u,r)),o}return c._value=n,c}function QS(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,JS(e,n,r??""))}function eA(e){return function(){this.textContent=e}}function tA(e){return function(){var n=e(this);this.textContent=n??""}}function nA(e){return this.tween("text",typeof e=="function"?tA(ff(this,"text",e)):eA(e==null?"":e+""))}function rA(e){return function(n){this.textContent=e.call(this,n)}}function iA(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&rA(s)),n}return o._value=e,o}function oA(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,iA(e))}function sA(){for(var e=this._name,n=this._id,r=rg(),o=this._groups,s=o.length,c=0;c<s;++c)for(var u=o[c],l=u.length,f,p=0;p<l;++p)if(f=u[p]){var d=Dr(f,n);Ku(f,e,r,p,u,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ui(o,this._parents,e,r)}function aA(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(c,u){var l={value:u},f={value:function(){--s===0&&c()}};r.each(function(){var p=Ir(this,o),d=p.on;d!==e&&(n=(e=d).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(f)),p.on=n}),s===0&&c()})}var uA=0;function ui(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function rg(){return++uA}var ni=fa.prototype;ui.prototype={constructor:ui,select:HS,selectAll:qS,selectChild:ni.selectChild,selectChildren:ni.selectChildren,filter:MS,merge:zS,selection:GS,transition:sA,call:ni.call,nodes:ni.nodes,node:ni.node,size:ni.size,empty:ni.empty,each:ni.each,on:jS,attr:DS,attrTween:CS,style:ZS,styleTween:QS,text:nA,textTween:oA,remove:LS,tween:dS,delay:AS,duration:TS,ease:BS,easeVarying:OS,end:aA,[Symbol.iterator]:ni[Symbol.iterator]};function cA(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var lA={time:null,delay:0,duration:250,ease:cA};function fA(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function dA(e){var n,r;e instanceof ui?(n=e._id,e=e._name):(n=rg(),(r=lA).time=cf(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,c=0;c<s;++c)for(var u=o[c],l=u.length,f,p=0;p<l;++p)(f=u[p])&&Ku(f,e,n,p,u,r||fA(f,n));return new ui(o,this._parents,e,n)}fa.prototype.interrupt=cS;fa.prototype.transition=dA;const iu=e=>()=>e;function hA(e,{sourceEvent:n,target:r,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function si(e,n,r){this.k=e,this.x=n,this.y=r}si.prototype={constructor:si,scale:function(e){return e===1?this:new si(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new si(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bi=new si(1,0,0);si.prototype;function hl(e){e.stopImmediatePropagation()}function $s(e){e.preventDefault(),e.stopImmediatePropagation()}function pA(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function gA(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cp(){return this.__zoom||Bi}function mA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function yA(){return navigator.maxTouchPoints||"ontouchstart"in this}function vA(e,n,r){var o=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],c=e.invertY(n[0][1])-r[0][1],u=e.invertY(n[1][1])-r[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function DA(){var e=pA,n=gA,r=vA,o=mA,s=yA,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,f=tS,p=Xu("start","zoom","end"),d,g,m,x=500,b=150,_=0,E=10;function v(B){B.property("__zoom",cp).on("wheel.zoom",J,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",Y).filter(s).on("touchstart.zoom",te).on("touchmove.zoom",Q).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}v.transform=function(B,q,j,X){var ie=B.selection?B.selection():B;ie.property("__zoom",cp),B!==ie?P(B,q,j,X):ie.interrupt().each(function(){H(this,arguments).event(X).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},v.scaleBy=function(B,q,j,X){v.scaleTo(B,function(){var ie=this.__zoom.k,U=typeof q=="function"?q.apply(this,arguments):q;return ie*U},j,X)},v.scaleTo=function(B,q,j,X){v.transform(B,function(){var ie=n.apply(this,arguments),U=this.__zoom,oe=j==null?T(ie):typeof j=="function"?j.apply(this,arguments):j,se=U.invert(oe),le=typeof q=="function"?q.apply(this,arguments):q;return r(R(N(U,le),oe,se),ie,u)},j,X)},v.translateBy=function(B,q,j,X){v.transform(B,function(){return r(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof j=="function"?j.apply(this,arguments):j),n.apply(this,arguments),u)},null,X)},v.translateTo=function(B,q,j,X,ie){v.transform(B,function(){var U=n.apply(this,arguments),oe=this.__zoom,se=X==null?T(U):typeof X=="function"?X.apply(this,arguments):X;return r(Bi.translate(se[0],se[1]).scale(oe.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof j=="function"?-j.apply(this,arguments):-j),U,u)},X,ie)};function N(B,q){return q=Math.max(c[0],Math.min(c[1],q)),q===B.k?B:new si(q,B.x,B.y)}function R(B,q,j){var X=q[0]-j[0]*B.k,ie=q[1]-j[1]*B.k;return X===B.x&&ie===B.y?B:new si(B.k,X,ie)}function T(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function P(B,q,j,X){B.on("start.zoom",function(){H(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(X).end()}).tween("zoom",function(){var ie=this,U=arguments,oe=H(ie,U).event(X),se=n.apply(ie,U),le=j==null?T(se):typeof j=="function"?j.apply(ie,U):j,ue=Math.max(se[1][0]-se[0][0],se[1][1]-se[0][1]),ge=ie.__zoom,de=typeof q=="function"?q.apply(ie,U):q,Fe=f(ge.invert(le).concat(ue/ge.k),de.invert(le).concat(ue/de.k));return function(Be){if(Be===1)Be=de;else{var me=Fe(Be),be=ue/me[2];Be=new si(be,le[0]-me[0]*be,le[1]-me[1]*be)}oe.zoom(null,Be)}})}function H(B,q,j){return!j&&B.__zooming||new G(B,q)}function G(B,q){this.that=B,this.args=q,this.active=0,this.sourceEvent=null,this.extent=n.apply(B,q),this.taps=0}G.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,q){return this.mouse&&B!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var q=hr(this.that).datum();p.call(B,this.that,new hA(B,{sourceEvent:this.sourceEvent,target:v,type:B,transform:this.that.__zoom,dispatch:p}),q)}};function J(B,...q){if(!e.apply(this,arguments))return;var j=H(this,q).event(B),X=this.__zoom,ie=Math.max(c[0],Math.min(c[1],X.k*Math.pow(2,o.apply(this,arguments)))),U=Nr(B);if(j.wheel)(j.mouse[0][0]!==U[0]||j.mouse[0][1]!==U[1])&&(j.mouse[1]=X.invert(j.mouse[0]=U)),clearTimeout(j.wheel);else{if(X.k===ie)return;j.mouse=[U,X.invert(U)],xu(this),j.start()}$s(B),j.wheel=setTimeout(oe,b),j.zoom("mouse",r(R(N(X,ie),j.mouse[0],j.mouse[1]),j.extent,u));function oe(){j.wheel=null,j.end()}}function $(B,...q){if(m||!e.apply(this,arguments))return;var j=B.currentTarget,X=H(this,q,!0).event(B),ie=hr(B.view).on("mousemove.zoom",le,!0).on("mouseup.zoom",ue,!0),U=Nr(B,j),oe=B.clientX,se=B.clientY;q0(B.view),hl(B),X.mouse=[U,this.__zoom.invert(U)],xu(this),X.start();function le(ge){if($s(ge),!X.moved){var de=ge.clientX-oe,Fe=ge.clientY-se;X.moved=de*de+Fe*Fe>_}X.event(ge).zoom("mouse",r(R(X.that.__zoom,X.mouse[0]=Nr(ge,j),X.mouse[1]),X.extent,u))}function ue(ge){ie.on("mousemove.zoom mouseup.zoom",null),V0(ge.view,X.moved),$s(ge),X.event(ge).end()}}function Y(B,...q){if(e.apply(this,arguments)){var j=this.__zoom,X=Nr(B.changedTouches?B.changedTouches[0]:B,this),ie=j.invert(X),U=j.k*(B.shiftKey?.5:2),oe=r(R(N(j,U),X,ie),n.apply(this,q),u);$s(B),l>0?hr(this).transition().duration(l).call(P,oe,X,B):hr(this).call(v.transform,oe,X,B)}}function te(B,...q){if(e.apply(this,arguments)){var j=B.touches,X=j.length,ie=H(this,q,B.changedTouches.length===X).event(B),U,oe,se,le;for(hl(B),oe=0;oe<X;++oe)se=j[oe],le=Nr(se,this),le=[le,this.__zoom.invert(le),se.identifier],ie.touch0?!ie.touch1&&ie.touch0[2]!==le[2]&&(ie.touch1=le,ie.taps=0):(ie.touch0=le,U=!0,ie.taps=1+!!d);d&&(d=clearTimeout(d)),U&&(ie.taps<2&&(g=le[0],d=setTimeout(function(){d=null},x)),xu(this),ie.start())}}function Q(B,...q){if(this.__zooming){var j=H(this,q).event(B),X=B.changedTouches,ie=X.length,U,oe,se,le;for($s(B),U=0;U<ie;++U)oe=X[U],se=Nr(oe,this),j.touch0&&j.touch0[2]===oe.identifier?j.touch0[0]=se:j.touch1&&j.touch1[2]===oe.identifier&&(j.touch1[0]=se);if(oe=j.that.__zoom,j.touch1){var ue=j.touch0[0],ge=j.touch0[1],de=j.touch1[0],Fe=j.touch1[1],Be=(Be=de[0]-ue[0])*Be+(Be=de[1]-ue[1])*Be,me=(me=Fe[0]-ge[0])*me+(me=Fe[1]-ge[1])*me;oe=N(oe,Math.sqrt(Be/me)),se=[(ue[0]+de[0])/2,(ue[1]+de[1])/2],le=[(ge[0]+Fe[0])/2,(ge[1]+Fe[1])/2]}else if(j.touch0)se=j.touch0[0],le=j.touch0[1];else return;j.zoom("touch",r(R(oe,se,le),j.extent,u))}}function Z(B,...q){if(this.__zooming){var j=H(this,q).event(B),X=B.changedTouches,ie=X.length,U,oe;for(hl(B),m&&clearTimeout(m),m=setTimeout(function(){m=null},x),U=0;U<ie;++U)oe=X[U],j.touch0&&j.touch0[2]===oe.identifier?delete j.touch0:j.touch1&&j.touch1[2]===oe.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(oe=Nr(oe,this),Math.hypot(g[0]-oe[0],g[1]-oe[1])<E)){var se=hr(this).on("dblclick.zoom");se&&se.apply(this,arguments)}}}return v.wheelDelta=function(B){return arguments.length?(o=typeof B=="function"?B:iu(+B),v):o},v.filter=function(B){return arguments.length?(e=typeof B=="function"?B:iu(!!B),v):e},v.touchable=function(B){return arguments.length?(s=typeof B=="function"?B:iu(!!B),v):s},v.extent=function(B){return arguments.length?(n=typeof B=="function"?B:iu([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),v):n},v.scaleExtent=function(B){return arguments.length?(c[0]=+B[0],c[1]=+B[1],v):[c[0],c[1]]},v.translateExtent=function(B){return arguments.length?(u[0][0]=+B[0][0],u[1][0]=+B[1][0],u[0][1]=+B[0][1],u[1][1]=+B[1][1],v):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},v.constrain=function(B){return arguments.length?(r=B,v):r},v.duration=function(B){return arguments.length?(l=+B,v):l},v.interpolate=function(B){return arguments.length?(f=B,v):f},v.on=function(){var B=p.on.apply(p,arguments);return B===p?v:B},v.clickDistance=function(B){return arguments.length?(_=(B=+B)*B,v):Math.sqrt(_)},v.tapDistance=function(B){return arguments.length?(E=+B,v):E},v}const Ju=A.createContext(null),_A=Ju.Provider,ci={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,n)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?n.targetHandle:n.sourceHandle}", edge id: ${n.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ig=ci.error001();function mt(e,n){const r=A.useContext(Ju);if(r===null)throw new Error(ig);return T0(r,e,n)}const Zt=()=>{const e=A.useContext(Ju);if(e===null)throw new Error(ig);return A.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},xA=e=>e.userSelectionActive?"none":"all";function og({position:e,children:n,className:r,style:o,...s}){const c=mt(xA),u=`${e}`.split("-");return V.createElement("div",{className:_n(["react-flow__panel",r,...u]),style:{...o,pointerEvents:c},...s},n)}function wA({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:V.createElement(og,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},V.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const bA=({x:e,y:n,label:r,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:c={},labelBgPadding:u=[2,4],labelBgBorderRadius:l=2,children:f,className:p,...d})=>{const g=A.useRef(null),[m,x]=A.useState({x:0,y:0,width:0,height:0}),b=_n(["react-flow__edge-textwrapper",p]);return A.useEffect(()=>{if(g.current){const _=g.current.getBBox();x({x:_.x,y:_.y,width:_.width,height:_.height})}},[r]),typeof r>"u"||!r?null:V.createElement("g",{transform:`translate(${e-m.width/2} ${n-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...d},s&&V.createElement("rect",{width:m.width+2*u[0],x:-u[0],y:-u[1],height:m.height+2*u[1],className:"react-flow__edge-textbg",style:c,rx:l,ry:l}),V.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:g,style:o},r),f)};var CA=A.memo(bA);const df=e=>({width:e.offsetWidth,height:e.offsetHeight}),fs=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),hf=(e={x:0,y:0},n)=>({x:fs(e.x,n[0][0],n[1][0]),y:fs(e.y,n[0][1],n[1][1])}),lp=(e,n,r)=>e<n?fs(Math.abs(e-n),1,50)/50:e>r?-fs(Math.abs(e-r),1,50)/50:0,sg=(e,n)=>{const r=lp(e.x,35,n.width-35)*20,o=lp(e.y,35,n.height-35)*20;return[r,o]},ag=e=>e.getRootNode?.()||window?.document,EA=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),pf=({x:e,y:n,width:r,height:o})=>({x:e,y:n,x2:e+r,y2:n+o}),SA=({x:e,y:n,x2:r,y2:o})=>({x:e,y:n,width:r-e,height:o-n}),fp=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Pl=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*o)},AA=e=>tr(e.width)&&tr(e.height)&&tr(e.x)&&tr(e.y),tr=e=>!isNaN(e)&&isFinite(e),At=Symbol.for("internals"),ug=["Enter"," ","Escape"],FA=(e,n)=>{},NA=e=>"nativeEvent"in e;function $l(e){const r=(NA(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r?.nodeName)||r?.hasAttribute("contenteditable")||!!r?.closest(".nokey")}const cg=e=>"clientX"in e,Ri=(e,n)=>{const r=cg(e),o=r?e.clientX:e.touches?.[0].clientX,s=r?e.clientY:e.touches?.[0].clientY;return{x:o-(n?.left??0),y:s-(n?.top??0)}},Pu=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,hs=({id:e,path:n,labelX:r,labelY:o,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:p,style:d,markerEnd:g,markerStart:m,interactionWidth:x=20})=>V.createElement(V.Fragment,null,V.createElement("path",{id:e,style:d,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:m}),x&&V.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),s&&tr(r)&&tr(o)?V.createElement(CA,{x:r,y:o,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:p}):null);hs.displayName="BaseEdge";function js(e,n,r){return r===void 0?r:o=>{const s=n().edges.find(c=>c.id===e);s&&r(o,{...s})}}function lg({sourceX:e,sourceY:n,targetX:r,targetY:o}){const s=Math.abs(r-e)/2,c=r<e?r+s:r-s,u=Math.abs(o-n)/2,l=o<n?o+u:o-u;return[c,l,s,u]}function fg({sourceX:e,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:u,targetControlY:l}){const f=e*.125+s*.375+u*.375+r*.125,p=n*.125+c*.375+l*.375+o*.125,d=Math.abs(f-e),g=Math.abs(p-n);return[f,p,d,g]}var _o;(function(e){e.Strict="strict",e.Loose="loose"})(_o||(_o={}));var mo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mo||(mo={}));var ds;(function(e){e.Partial="partial",e.Full="full"})(ds||(ds={}));var Ti;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ti||(Ti={}));var oa;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(oa||(oa={}));var xe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(xe||(xe={}));function dp({pos:e,x1:n,y1:r,x2:o,y2:s}){return e===xe.Left||e===xe.Right?[.5*(n+o),r]:[n,.5*(r+s)]}function dg({sourceX:e,sourceY:n,sourcePosition:r=xe.Bottom,targetX:o,targetY:s,targetPosition:c=xe.Top}){const[u,l]=dp({pos:r,x1:e,y1:n,x2:o,y2:s}),[f,p]=dp({pos:c,x1:o,y1:s,x2:e,y2:n}),[d,g,m,x]=fg({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:u,sourceControlY:l,targetControlX:f,targetControlY:p});return[`M${e},${n} C${u},${l} ${f},${p} ${o},${s}`,d,g,m,x]}const gf=A.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=xe.Bottom,targetPosition:c=xe.Top,label:u,labelStyle:l,labelShowBg:f,labelBgStyle:p,labelBgPadding:d,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:b,interactionWidth:_})=>{const[E,v,N]=dg({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:c});return V.createElement(hs,{path:E,labelX:v,labelY:N,label:u,labelStyle:l,labelShowBg:f,labelBgStyle:p,labelBgPadding:d,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:b,interactionWidth:_})});gf.displayName="SimpleBezierEdge";const hp={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},TA=({source:e,sourcePosition:n=xe.Bottom,target:r})=>n===xe.Left||n===xe.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},pp=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function IA({source:e,sourcePosition:n=xe.Bottom,target:r,targetPosition:o=xe.Top,center:s,offset:c}){const u=hp[n],l=hp[o],f={x:e.x+u.x*c,y:e.y+u.y*c},p={x:r.x+l.x*c,y:r.y+l.y*c},d=TA({source:f,sourcePosition:n,target:p}),g=d.x!==0?"x":"y",m=d[g];let x=[],b,_;const E={x:0,y:0},v={x:0,y:0},[N,R,T,P]=lg({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(u[g]*l[g]===-1){b=s.x??N,_=s.y??R;const G=[{x:b,y:f.y},{x:b,y:p.y}],J=[{x:f.x,y:_},{x:p.x,y:_}];u[g]===m?x=g==="x"?G:J:x=g==="x"?J:G}else{const G=[{x:f.x,y:p.y}],J=[{x:p.x,y:f.y}];if(g==="x"?x=u.x===m?J:G:x=u.y===m?G:J,n===o){const Z=Math.abs(e[g]-r[g]);if(Z<=c){const B=Math.min(c-1,c-Z);u[g]===m?E[g]=(f[g]>e[g]?-1:1)*B:v[g]=(p[g]>r[g]?-1:1)*B}}if(n!==o){const Z=g==="x"?"y":"x",B=u[g]===l[Z],q=f[Z]>p[Z],j=f[Z]<p[Z];(u[g]===1&&(!B&&q||B&&j)||u[g]!==1&&(!B&&j||B&&q))&&(x=g==="x"?G:J)}const $={x:f.x+E.x,y:f.y+E.y},Y={x:p.x+v.x,y:p.y+v.y},te=Math.max(Math.abs($.x-x[0].x),Math.abs(Y.x-x[0].x)),Q=Math.max(Math.abs($.y-x[0].y),Math.abs(Y.y-x[0].y));te>=Q?(b=($.x+Y.x)/2,_=x[0].y):(b=x[0].x,_=($.y+Y.y)/2)}return[[e,{x:f.x+E.x,y:f.y+E.y},...x,{x:p.x+v.x,y:p.y+v.y},r],b,_,T,P]}function BA(e,n,r,o){const s=Math.min(pp(e,n)/2,pp(n,r)/2,o),{x:c,y:u}=n;if(e.x===c&&c===r.x||e.y===u&&u===r.y)return`L${c} ${u}`;if(e.y===u){const p=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${c+s*p},${u}Q ${c},${u} ${c},${u+s*d}`}const l=e.x<r.x?1:-1,f=e.y<r.y?-1:1;return`L ${c},${u+s*f}Q ${c},${u} ${c+s*l},${u}`}function jl({sourceX:e,sourceY:n,sourcePosition:r=xe.Bottom,targetX:o,targetY:s,targetPosition:c=xe.Top,borderRadius:u=5,centerX:l,centerY:f,offset:p=20}){const[d,g,m,x,b]=IA({source:{x:e,y:n},sourcePosition:r,target:{x:o,y:s},targetPosition:c,center:{x:l,y:f},offset:p});return[d.reduce((E,v,N)=>{let R="";return N>0&&N<d.length-1?R=BA(d[N-1],v,d[N+1],u):R=`${N===0?"M":"L"}${v.x} ${v.y}`,E+=R,E},""),g,m,x,b]}const Qu=A.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:p,style:d,sourcePosition:g=xe.Bottom,targetPosition:m=xe.Top,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:E})=>{const[v,N,R]=jl({sourceX:e,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:m,borderRadius:_?.borderRadius,offset:_?.offset});return V.createElement(hs,{path:v,labelX:N,labelY:R,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:p,style:d,markerEnd:x,markerStart:b,interactionWidth:E})});Qu.displayName="SmoothStepEdge";const mf=A.memo(e=>V.createElement(Qu,{...e,pathOptions:A.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));mf.displayName="StepEdge";function RA({sourceX:e,sourceY:n,targetX:r,targetY:o}){const[s,c,u,l]=lg({sourceX:e,sourceY:n,targetX:r,targetY:o});return[`M ${e},${n}L ${r},${o}`,s,c,u,l]}const yf=A.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:p,style:d,markerEnd:g,markerStart:m,interactionWidth:x})=>{const[b,_,E]=RA({sourceX:e,sourceY:n,targetX:r,targetY:o});return V.createElement(hs,{path:b,labelX:_,labelY:E,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:p,style:d,markerEnd:g,markerStart:m,interactionWidth:x})});yf.displayName="StraightEdge";function ou(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function gp({pos:e,x1:n,y1:r,x2:o,y2:s,c}){switch(e){case xe.Left:return[n-ou(n-o,c),r];case xe.Right:return[n+ou(o-n,c),r];case xe.Top:return[n,r-ou(r-s,c)];case xe.Bottom:return[n,r+ou(s-r,c)]}}function vf({sourceX:e,sourceY:n,sourcePosition:r=xe.Bottom,targetX:o,targetY:s,targetPosition:c=xe.Top,curvature:u=.25}){const[l,f]=gp({pos:r,x1:e,y1:n,x2:o,y2:s,c:u}),[p,d]=gp({pos:c,x1:o,y1:s,x2:e,y2:n,c:u}),[g,m,x,b]=fg({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:f,targetControlX:p,targetControlY:d});return[`M${e},${n} C${l},${f} ${p},${d} ${o},${s}`,g,m,x,b]}const $u=A.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=xe.Bottom,targetPosition:c=xe.Top,label:u,labelStyle:l,labelShowBg:f,labelBgStyle:p,labelBgPadding:d,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:E})=>{const[v,N,R]=vf({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:c,curvature:_?.curvature});return V.createElement(hs,{path:v,labelX:N,labelY:R,label:u,labelStyle:l,labelShowBg:f,labelBgStyle:p,labelBgPadding:d,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:b,interactionWidth:E})});$u.displayName="BezierEdge";const Df=A.createContext(null),OA=Df.Provider;Df.Consumer;const MA=()=>A.useContext(Df),zA=e=>"id"in e&&"source"in e&&"target"in e,hg=e=>"id"in e&&!("source"in e)&&!("target"in e),ju=(e,n,r)=>{if(!hg(e))return[];const o=r.filter(s=>s.source===e.id).map(s=>s.target);return n.filter(s=>o.includes(s.id))},PA=(e,n,r)=>{if(!hg(e))return[];const o=r.filter(s=>s.target===e.id).map(s=>s.source);return n.filter(s=>o.includes(s.id))},$A=({source:e,sourceHandle:n,target:r,targetHandle:o})=>`reactflow__edge-${e}${n||""}-${r}${o||""}`,kl=(e,n)=>typeof e>"u"?"":typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,jA=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),kA=(e,n)=>{if(!e.source||!e.target)return n;let r;return zA(e)?r={...e}:r={...e,id:$A(e)},jA(r,n)?n:n.concat(r)},Ll=({x:e,y:n},[r,o,s],c,[u,l])=>{const f={x:(e-r)/s,y:(n-o)/s};return c?{x:u*Math.round(f.x/u),y:l*Math.round(f.y/l)}:f},pg=({x:e,y:n},[r,o,s])=>({x:e*s+r,y:n*s+o}),os=(e,n=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*n[0],o=(e.height??0)*n[1],s={x:e.position.x-r,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-o}:s}},_f=(e,n=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,s)=>{const{x:c,y:u}=os(s,n).positionAbsolute;return EA(o,pf({x:c,y:u,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return SA(r)},gg=(e,n,[r,o,s]=[0,0,1],c=!1,u=!1,l=[0,0])=>{const f={x:(n.x-r)/s,y:(n.y-o)/s,width:n.width/s,height:n.height/s},p=[];return e.forEach(d=>{const{width:g,height:m,selectable:x=!0,hidden:b=!1}=d;if(u&&!x||b)return!1;const{positionAbsolute:_}=os(d,l),E={x:_.x,y:_.y,width:g||0,height:m||0},v=Pl(f,E),N=typeof g>"u"||typeof m>"u"||g===null||m===null,R=c&&v>0,T=(g||0)*(m||0);(N||R||v>=T||d.dragging)&&p.push(d)}),p},mg=(e,n)=>{const r=e.map(o=>o.id);return n.filter(o=>r.includes(o.source)||r.includes(o.target))},yg=(e,n,r,o,s,c=.1)=>{const u=n/(e.width*(1+c)),l=r/(e.height*(1+c)),f=Math.min(u,l),p=fs(f,o,s),d=e.x+e.width/2,g=e.y+e.height/2,m=n/2-d*p,x=r/2-g*p;return{x:m,y:x,zoom:p}},po=(e,n=0)=>e.transition().duration(n);function mp(e,n,r,o){return(n[r]||[]).reduce((s,c)=>(`${e.id}-${c.id}-${r}`!==o&&s.push({id:c.id||null,type:r,nodeId:e.id,x:(e.positionAbsolute?.x??0)+c.x+c.width/2,y:(e.positionAbsolute?.y??0)+c.y+c.height/2}),s),[])}function LA(e,n,r,o,s,c){const{x:u,y:l}=Ri(e),p=n.elementsFromPoint(u,l).find(b=>b.classList.contains("react-flow__handle"));if(p){const b=p.getAttribute("data-nodeid");if(b){const _=xf(void 0,p),E=p.getAttribute("data-handleid"),v=c({nodeId:b,id:E,type:_});if(v){const N=s.find(R=>R.nodeId===b&&R.type===_&&R.id===E);return{handle:{id:E,type:_,nodeId:b,x:N?.x||r.x,y:N?.y||r.y},validHandleResult:v}}}}let d=[],g=1/0;if(s.forEach(b=>{const _=Math.sqrt((b.x-r.x)**2+(b.y-r.y)**2);if(_<=o){const E=c(b);_<=g&&(_<g?d=[{handle:b,validHandleResult:E}]:_===g&&d.push({handle:b,validHandleResult:E}),g=_)}}),!d.length)return{handle:null,validHandleResult:vg()};if(d.length===1)return d[0];const m=d.some(({validHandleResult:b})=>b.isValid),x=d.some(({handle:b})=>b.type==="target");return d.find(({handle:b,validHandleResult:_})=>x?b.type==="target":m?_.isValid:!0)||d[0]}const HA={source:null,target:null,sourceHandle:null,targetHandle:null},vg=()=>({handleDomNode:null,isValid:!1,connection:HA,endHandle:null});function Dg(e,n,r,o,s,c,u){const l=s==="target",f=u.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),p={...vg(),handleDomNode:f};if(f){const d=xf(void 0,f),g=f.getAttribute("data-nodeid"),m=f.getAttribute("data-handleid"),x=f.classList.contains("connectable"),b=f.classList.contains("connectableend"),_={source:l?g:r,sourceHandle:l?m:o,target:l?r:g,targetHandle:l?o:m};p.connection=_,x&&b&&(n===_o.Strict?l&&d==="source"||!l&&d==="target":g!==r||m!==o)&&(p.endHandle={nodeId:g,handleId:m,type:d},p.isValid=c(_))}return p}function qA({nodes:e,nodeId:n,handleId:r,handleType:o}){return e.reduce((s,c)=>{if(c[At]){const{handleBounds:u}=c[At];let l=[],f=[];u&&(l=mp(c,u,"source",`${n}-${r}-${o}`),f=mp(c,u,"target",`${n}-${r}-${o}`)),s.push(...l,...f)}return s},[])}function xf(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function pl(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function VA(e,n){let r=null;return n?r="valid":e&&!n&&(r="invalid"),r}function _g({event:e,handleId:n,nodeId:r,onConnect:o,isTarget:s,getState:c,setState:u,isValidConnection:l,edgeUpdaterType:f,onReconnectEnd:p}){const d=ag(e.target),{connectionMode:g,domNode:m,autoPanOnConnect:x,connectionRadius:b,onConnectStart:_,panBy:E,getNodes:v,cancelConnection:N}=c();let R=0,T;const{x:P,y:H}=Ri(e),G=d?.elementFromPoint(P,H),J=xf(f,G),$=m?.getBoundingClientRect();if(!$||!J)return;let Y,te=Ri(e,$),Q=!1,Z=null,B=!1,q=null;const j=qA({nodes:v(),nodeId:r,handleId:n,handleType:J}),X=()=>{if(!x)return;const[oe,se]=sg(te,$);E({x:oe,y:se}),R=requestAnimationFrame(X)};u({connectionPosition:te,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:J,connectionStartHandle:{nodeId:r,handleId:n,type:J},connectionEndHandle:null}),_?.(e,{nodeId:r,handleId:n,handleType:J});function ie(oe){const{transform:se}=c();te=Ri(oe,$);const{handle:le,validHandleResult:ue}=LA(oe,d,Ll(te,se,!1,[1,1]),b,j,ge=>Dg(ge,g,r,n,s?"target":"source",l,d));if(T=le,Q||(X(),Q=!0),q=ue.handleDomNode,Z=ue.connection,B=ue.isValid,u({connectionPosition:T&&B?pg({x:T.x,y:T.y},se):te,connectionStatus:VA(!!T,B),connectionEndHandle:ue.endHandle}),!T&&!B&&!q)return pl(Y);Z.source!==Z.target&&q&&(pl(Y),Y=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",B),q.classList.toggle("react-flow__handle-valid",B))}function U(oe){(T||q)&&Z&&B&&o?.(Z),c().onConnectEnd?.(oe),f&&p?.(oe),pl(Y),N(),cancelAnimationFrame(R),Q=!1,B=!1,Z=null,q=null,d.removeEventListener("mousemove",ie),d.removeEventListener("mouseup",U),d.removeEventListener("touchmove",ie),d.removeEventListener("touchend",U)}d.addEventListener("mousemove",ie),d.addEventListener("mouseup",U),d.addEventListener("touchmove",ie),d.addEventListener("touchend",U)}const yp=()=>!0,GA=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),UA=(e,n,r)=>o=>{const{connectionStartHandle:s,connectionEndHandle:c,connectionClickStartHandle:u}=o;return{connecting:s?.nodeId===e&&s?.handleId===n&&s?.type===r||c?.nodeId===e&&c?.handleId===n&&c?.type===r,clickConnecting:u?.nodeId===e&&u?.handleId===n&&u?.type===r}},xg=A.forwardRef(({type:e="source",position:n=xe.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:c=!0,id:u,onConnect:l,children:f,className:p,onMouseDown:d,onTouchStart:g,...m},x)=>{const b=u||null,_=e==="target",E=Zt(),v=MA(),{connectOnClick:N,noPanClassName:R}=mt(GA,cn),{connecting:T,clickConnecting:P}=mt(UA(v,b,e),cn);v||E.getState().onError?.("010",ci.error010());const H=$=>{const{defaultEdgeOptions:Y,onConnect:te,hasDefaultEdges:Q}=E.getState(),Z={...Y,...$};if(Q){const{edges:B,setEdges:q}=E.getState();q(kA(Z,B))}te?.(Z),l?.(Z)},G=$=>{if(!v)return;const Y=cg($);s&&(Y&&$.button===0||!Y)&&_g({event:$,handleId:b,nodeId:v,onConnect:H,isTarget:_,getState:E.getState,setState:E.setState,isValidConnection:r||E.getState().isValidConnection||yp}),Y?d?.($):g?.($)},J=$=>{const{onClickConnectStart:Y,onClickConnectEnd:te,connectionClickStartHandle:Q,connectionMode:Z,isValidConnection:B}=E.getState();if(!v||!Q&&!s)return;if(!Q){Y?.($,{nodeId:v,handleId:b,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:v,type:e,handleId:b}});return}const q=ag($.target),j=r||B||yp,{connection:X,isValid:ie}=Dg({nodeId:v,id:b,type:e},Z,Q.nodeId,Q.handleId||null,Q.type,j,q);ie&&H(X),te?.($),E.setState({connectionClickStartHandle:null})};return V.createElement("div",{"data-handleid":b,"data-nodeid":v,"data-handlepos":n,"data-id":`${v}-${b}-${e}`,className:_n(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",R,p,{source:!_,target:_,connectable:o,connectablestart:s,connectableend:c,connecting:P,connectionindicator:o&&(s&&!T||c&&T)}]),onMouseDown:G,onTouchStart:G,onClick:N?J:void 0,ref:x,...m},f)});xg.displayName="Handle";var Mi=A.memo(xg);const wg=({data:e,isConnectable:n,targetPosition:r=xe.Top,sourcePosition:o=xe.Bottom})=>V.createElement(V.Fragment,null,V.createElement(Mi,{type:"target",position:r,isConnectable:n}),e?.label,V.createElement(Mi,{type:"source",position:o,isConnectable:n}));wg.displayName="DefaultNode";var Hl=A.memo(wg);const bg=({data:e,isConnectable:n,sourcePosition:r=xe.Bottom})=>V.createElement(V.Fragment,null,e?.label,V.createElement(Mi,{type:"source",position:r,isConnectable:n}));bg.displayName="InputNode";var Cg=A.memo(bg);const Eg=({data:e,isConnectable:n,targetPosition:r=xe.Top})=>V.createElement(V.Fragment,null,V.createElement(Mi,{type:"target",position:r,isConnectable:n}),e?.label);Eg.displayName="OutputNode";var Sg=A.memo(Eg);const wf=()=>null;wf.displayName="GroupNode";const WA=e=>({selectedNodes:e.getNodes().filter(n=>n.selected),selectedEdges:e.edges.filter(n=>n.selected).map(n=>({...n}))}),su=e=>e.id;function XA(e,n){return cn(e.selectedNodes.map(su),n.selectedNodes.map(su))&&cn(e.selectedEdges.map(su),n.selectedEdges.map(su))}const Ag=A.memo(({onSelectionChange:e})=>{const n=Zt(),{selectedNodes:r,selectedEdges:o}=mt(WA,XA);return A.useEffect(()=>{const s={nodes:r,edges:o};e?.(s),n.getState().onSelectionChange.forEach(c=>c(s))},[r,o,e]),null});Ag.displayName="SelectionListener";const YA=e=>!!e.onSelectionChange;function ZA({onSelectionChange:e}){const n=mt(YA);return e||n?V.createElement(Ag,{onSelectionChange:e}):null}const KA=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Zo(e,n){A.useEffect(()=>{typeof e<"u"&&n(e)},[e])}function Le(e,n,r){A.useEffect(()=>{typeof n<"u"&&r({[e]:n})},[n])}const JA=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:s,onConnectStart:c,onConnectEnd:u,onClickConnectStart:l,onClickConnectEnd:f,nodesDraggable:p,nodesConnectable:d,nodesFocusable:g,edgesFocusable:m,edgesUpdatable:x,elevateNodesOnSelect:b,minZoom:_,maxZoom:E,nodeExtent:v,onNodesChange:N,onEdgesChange:R,elementsSelectable:T,connectionMode:P,snapGrid:H,snapToGrid:G,translateExtent:J,connectOnClick:$,defaultEdgeOptions:Y,fitView:te,fitViewOptions:Q,onNodesDelete:Z,onEdgesDelete:B,onNodeDrag:q,onNodeDragStart:j,onNodeDragStop:X,onSelectionDrag:ie,onSelectionDragStart:U,onSelectionDragStop:oe,noPanClassName:se,nodeOrigin:le,rfId:ue,autoPanOnConnect:ge,autoPanOnNodeDrag:de,onError:Fe,connectionRadius:Be,isValidConnection:me,nodeDragThreshold:be})=>{const{setNodes:Te,setEdges:xt,setDefaultNodesAndEdges:ht,setMinZoom:jt,setMaxZoom:Qe,setTranslateExtent:et,setNodeExtent:en,reset:$e}=mt(KA,cn),_e=Zt();return A.useEffect(()=>{const kt=o?.map(Bt=>({...Bt,...Y}));return ht(r,kt),()=>{$e()}},[]),Le("defaultEdgeOptions",Y,_e.setState),Le("connectionMode",P,_e.setState),Le("onConnect",s,_e.setState),Le("onConnectStart",c,_e.setState),Le("onConnectEnd",u,_e.setState),Le("onClickConnectStart",l,_e.setState),Le("onClickConnectEnd",f,_e.setState),Le("nodesDraggable",p,_e.setState),Le("nodesConnectable",d,_e.setState),Le("nodesFocusable",g,_e.setState),Le("edgesFocusable",m,_e.setState),Le("edgesUpdatable",x,_e.setState),Le("elementsSelectable",T,_e.setState),Le("elevateNodesOnSelect",b,_e.setState),Le("snapToGrid",G,_e.setState),Le("snapGrid",H,_e.setState),Le("onNodesChange",N,_e.setState),Le("onEdgesChange",R,_e.setState),Le("connectOnClick",$,_e.setState),Le("fitViewOnInit",te,_e.setState),Le("fitViewOnInitOptions",Q,_e.setState),Le("onNodesDelete",Z,_e.setState),Le("onEdgesDelete",B,_e.setState),Le("onNodeDrag",q,_e.setState),Le("onNodeDragStart",j,_e.setState),Le("onNodeDragStop",X,_e.setState),Le("onSelectionDrag",ie,_e.setState),Le("onSelectionDragStart",U,_e.setState),Le("onSelectionDragStop",oe,_e.setState),Le("noPanClassName",se,_e.setState),Le("nodeOrigin",le,_e.setState),Le("rfId",ue,_e.setState),Le("autoPanOnConnect",ge,_e.setState),Le("autoPanOnNodeDrag",de,_e.setState),Le("onError",Fe,_e.setState),Le("connectionRadius",Be,_e.setState),Le("isValidConnection",me,_e.setState),Le("nodeDragThreshold",be,_e.setState),Zo(e,Te),Zo(n,xt),Zo(_,jt),Zo(E,Qe),Zo(J,et),Zo(v,en),null},vp={display:"none"},QA={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Fg="react-flow__node-desc",Ng="react-flow__edge-desc",e3="react-flow__aria-live",t3=e=>e.ariaLiveMessage;function n3({rfId:e}){const n=mt(t3);return V.createElement("div",{id:`${e3}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:QA},n)}function r3({rfId:e,disableKeyboardA11y:n}){return V.createElement(V.Fragment,null,V.createElement("div",{id:`${Fg}-${e}`,style:vp},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),V.createElement("div",{id:`${Ng}-${e}`,style:vp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&V.createElement(n3,{rfId:e}))}var sa=(e=null,n={actInsideInputWithModifier:!0})=>{const[r,o]=A.useState(!1),s=A.useRef(!1),c=A.useRef(new Set([])),[u,l]=A.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),d=p.reduce((g,m)=>g.concat(...m),[]);return[p,d]}return[[],[]]},[e]);return A.useEffect(()=>{const f=typeof document<"u"?document:null,p=n?.target||f;if(e!==null){const d=x=>{if(s.current=x.ctrlKey||x.metaKey||x.shiftKey,(!s.current||s.current&&!n.actInsideInputWithModifier)&&$l(x))return!1;const _=_p(x.code,l);c.current.add(x[_]),Dp(u,c.current,!1)&&(x.preventDefault(),o(!0))},g=x=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&$l(x))return!1;const _=_p(x.code,l);Dp(u,c.current,!0)?(o(!1),c.current.clear()):c.current.delete(x[_]),x.key==="Meta"&&c.current.clear(),s.current=!1},m=()=>{c.current.clear(),o(!1)};return p?.addEventListener("keydown",d),p?.addEventListener("keyup",g),window.addEventListener("blur",m),()=>{p?.removeEventListener("keydown",d),p?.removeEventListener("keyup",g),window.removeEventListener("blur",m)}}},[e,o]),r};function Dp(e,n,r){return e.filter(o=>r||o.length===n.size).some(o=>o.every(s=>n.has(s)))}function _p(e,n){return n.includes(e)?"code":"key"}function Tg(e,n,r,o){const s=e.parentNode||e.parentId;if(!s)return r;const c=n.get(s),u=os(c,o);return Tg(c,n,{x:(r.x??0)+u.x,y:(r.y??0)+u.y,z:(c[At]?.z??0)>(r.z??0)?c[At]?.z??0:r.z??0},o)}function Ig(e,n,r){e.forEach(o=>{const s=o.parentNode||o.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||r?.[o.id]){const{x:c,y:u,z:l}=Tg(o,e,{...o.position,z:o[At]?.z??0},n);o.positionAbsolute={x:c,y:u},o[At].z=l,r?.[o.id]&&(o[At].isParent=!0)}})}function gl(e,n,r,o){const s=new Map,c={},u=o?1e3:0;return e.forEach(l=>{const f=(tr(l.zIndex)?l.zIndex:0)+(l.selected?u:0),p=n.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},g=l.parentNode||l.parentId;g&&(c[g]=!0);const m=p?.type&&p?.type!==l.type;Object.defineProperty(d,At,{enumerable:!1,value:{handleBounds:m?void 0:p?.[At]?.handleBounds,z:f}}),s.set(l.id,d)}),Ig(s,r,c),s}function Bg(e,n={}){const{getNodes:r,width:o,height:s,minZoom:c,maxZoom:u,d3Zoom:l,d3Selection:f,fitViewOnInitDone:p,fitViewOnInit:d,nodeOrigin:g}=e(),m=n.initial&&!p&&d;if(l&&f&&(m||!n.initial)){const b=r().filter(E=>{const v=n.includeHiddenNodes?E.width&&E.height:!E.hidden;return n.nodes?.length?v&&n.nodes.some(N=>N.id===E.id):v}),_=b.every(E=>E.width&&E.height);if(b.length>0&&_){const E=_f(b,g),{x:v,y:N,zoom:R}=yg(E,o,s,n.minZoom??c,n.maxZoom??u,n.padding??.1),T=Bi.translate(v,N).scale(R);return typeof n.duration=="number"&&n.duration>0?l.transform(po(f,n.duration),T):l.transform(f,T),!0}}return!1}function i3(e,n){return e.forEach(r=>{const o=n.get(r.id);o&&n.set(o.id,{...o,[At]:o[At],selected:r.selected})}),new Map(n)}function o3(e,n){return n.map(r=>{const o=e.find(s=>s.id===r.id);return o&&(r.selected=o.selected),r})}function au({changedNodes:e,changedEdges:n,get:r,set:o}){const{nodeInternals:s,edges:c,onNodesChange:u,onEdgesChange:l,hasDefaultNodes:f,hasDefaultEdges:p}=r();e?.length&&(f&&o({nodeInternals:i3(e,s)}),u?.(e)),n?.length&&(p&&o({edges:o3(n,c)}),l?.(n))}const Ko=()=>{},s3={zoomIn:Ko,zoomOut:Ko,zoomTo:Ko,getZoom:()=>1,setViewport:Ko,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ko,fitBounds:Ko,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},a3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),u3=()=>{const e=Zt(),{d3Zoom:n,d3Selection:r}=mt(a3,cn);return A.useMemo(()=>r&&n?{zoomIn:s=>n.scaleBy(po(r,s?.duration),1.2),zoomOut:s=>n.scaleBy(po(r,s?.duration),1/1.2),zoomTo:(s,c)=>n.scaleTo(po(r,c?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,c)=>{const[u,l,f]=e.getState().transform,p=Bi.translate(s.x??u,s.y??l).scale(s.zoom??f);n.transform(po(r,c?.duration),p)},getViewport:()=>{const[s,c,u]=e.getState().transform;return{x:s,y:c,zoom:u}},fitView:s=>Bg(e.getState,s),setCenter:(s,c,u)=>{const{width:l,height:f,maxZoom:p}=e.getState(),d=typeof u?.zoom<"u"?u.zoom:p,g=l/2-s*d,m=f/2-c*d,x=Bi.translate(g,m).scale(d);n.transform(po(r,u?.duration),x)},fitBounds:(s,c)=>{const{width:u,height:l,minZoom:f,maxZoom:p}=e.getState(),{x:d,y:g,zoom:m}=yg(s,u,l,f,p,c?.padding??.1),x=Bi.translate(d,g).scale(m);n.transform(po(r,c?.duration),x)},project:s=>{const{transform:c,snapToGrid:u,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ll(s,c,u,l)},screenToFlowPosition:s=>{const{transform:c,snapToGrid:u,snapGrid:l,domNode:f}=e.getState();if(!f)return s;const{x:p,y:d}=f.getBoundingClientRect(),g={x:s.x-p,y:s.y-d};return Ll(g,c,u,l)},flowToScreenPosition:s=>{const{transform:c,domNode:u}=e.getState();if(!u)return s;const{x:l,y:f}=u.getBoundingClientRect(),p=pg(s,c);return{x:p.x+l,y:p.y+f}},viewportInitialized:!0}:s3,[n,r])};function bf(){const e=u3(),n=Zt(),r=A.useCallback(()=>n.getState().getNodes().map(_=>({..._})),[]),o=A.useCallback(_=>n.getState().nodeInternals.get(_),[]),s=A.useCallback(()=>{const{edges:_=[]}=n.getState();return _.map(E=>({...E}))},[]),c=A.useCallback(_=>{const{edges:E=[]}=n.getState();return E.find(v=>v.id===_)},[]),u=A.useCallback(_=>{const{getNodes:E,setNodes:v,hasDefaultNodes:N,onNodesChange:R}=n.getState(),T=E(),P=typeof _=="function"?_(T):_;if(N)v(P);else if(R){const H=P.length===0?T.map(G=>({type:"remove",id:G.id})):P.map(G=>({item:G,type:"reset"}));R(H)}},[]),l=A.useCallback(_=>{const{edges:E=[],setEdges:v,hasDefaultEdges:N,onEdgesChange:R}=n.getState(),T=typeof _=="function"?_(E):_;if(N)v(T);else if(R){const P=T.length===0?E.map(H=>({type:"remove",id:H.id})):T.map(H=>({item:H,type:"reset"}));R(P)}},[]),f=A.useCallback(_=>{const E=Array.isArray(_)?_:[_],{getNodes:v,setNodes:N,hasDefaultNodes:R,onNodesChange:T}=n.getState();if(R){const H=[...v(),...E];N(H)}else if(T){const P=E.map(H=>({item:H,type:"add"}));T(P)}},[]),p=A.useCallback(_=>{const E=Array.isArray(_)?_:[_],{edges:v=[],setEdges:N,hasDefaultEdges:R,onEdgesChange:T}=n.getState();if(R)N([...v,...E]);else if(T){const P=E.map(H=>({item:H,type:"add"}));T(P)}},[]),d=A.useCallback(()=>{const{getNodes:_,edges:E=[],transform:v}=n.getState(),[N,R,T]=v;return{nodes:_().map(P=>({...P})),edges:E.map(P=>({...P})),viewport:{x:N,y:R,zoom:T}}},[]),g=A.useCallback(({nodes:_,edges:E})=>{const{nodeInternals:v,getNodes:N,edges:R,hasDefaultNodes:T,hasDefaultEdges:P,onNodesDelete:H,onEdgesDelete:G,onNodesChange:J,onEdgesChange:$}=n.getState(),Y=(_||[]).map(q=>q.id),te=(E||[]).map(q=>q.id),Q=N().reduce((q,j)=>{const X=j.parentNode||j.parentId,ie=!Y.includes(j.id)&&X&&q.find(oe=>oe.id===X);return(typeof j.deletable=="boolean"?j.deletable:!0)&&(Y.includes(j.id)||ie)&&q.push(j),q},[]),Z=R.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),B=Z.filter(q=>te.includes(q.id));if(Q||B){const q=mg(Q,Z),j=[...B,...q],X=j.reduce((ie,U)=>(ie.includes(U.id)||ie.push(U.id),ie),[]);if((P||T)&&(P&&n.setState({edges:R.filter(ie=>!X.includes(ie.id))}),T&&(Q.forEach(ie=>{v.delete(ie.id)}),n.setState({nodeInternals:new Map(v)}))),X.length>0&&(G?.(j),$&&$(X.map(ie=>({id:ie,type:"remove"})))),Q.length>0&&(H?.(Q),J)){const ie=Q.map(U=>({id:U.id,type:"remove"}));J(ie)}}},[]),m=A.useCallback(_=>{const E=AA(_),v=E?null:n.getState().nodeInternals.get(_.id);return!E&&!v?[null,null,E]:[E?_:fp(v),v,E]},[]),x=A.useCallback((_,E=!0,v)=>{const[N,R,T]=m(_);return N?(v||n.getState().getNodes()).filter(P=>{if(!T&&(P.id===R.id||!P.positionAbsolute))return!1;const H=fp(P),G=Pl(H,N);return E&&G>0||G>=N.width*N.height}):[]},[]),b=A.useCallback((_,E,v=!0)=>{const[N]=m(_);if(!N)return!1;const R=Pl(N,E);return v&&R>0||R>=N.width*N.height},[]);return A.useMemo(()=>({...e,getNodes:r,getNode:o,getEdges:s,getEdge:c,setNodes:u,setEdges:l,addNodes:f,addEdges:p,toObject:d,deleteElements:g,getIntersectingNodes:x,isNodeIntersecting:b}),[e,r,o,s,c,u,l,f,p,d,g,x,b])}const c3={actInsideInputWithModifier:!1};var l3=({deleteKeyCode:e,multiSelectionKeyCode:n})=>{const r=Zt(),{deleteElements:o}=bf(),s=sa(e,c3),c=sa(n);A.useEffect(()=>{if(s){const{edges:u,getNodes:l}=r.getState(),f=l().filter(d=>d.selected),p=u.filter(d=>d.selected);o({nodes:f,edges:p}),r.setState({nodesSelectionActive:!1})}},[s]),A.useEffect(()=>{r.setState({multiSelectionActive:c})},[c])};function f3(e){const n=Zt();A.useEffect(()=>{let r;const o=()=>{if(!e.current)return;const s=df(e.current);(s.height===0||s.width===0)&&n.getState().onError?.("004",ci.error004()),n.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(r=new ResizeObserver(()=>o()),r.observe(e.current)),()=>{window.removeEventListener("resize",o),r&&e.current&&r.unobserve(e.current)}},[])}const Cf={position:"absolute",width:"100%",height:"100%",top:0,left:0},d3=(e,n)=>e.x!==n.x||e.y!==n.y||e.zoom!==n.k,uu=e=>({x:e.x,y:e.y,zoom:e.k}),Jo=(e,n)=>e.target.closest(`.${n}`),xp=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),wp=e=>{const n=e.ctrlKey&&Pu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n},h3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),p3=({onMove:e,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:c=!0,panOnScroll:u=!1,panOnScrollSpeed:l=.5,panOnScrollMode:f=mo.Free,zoomOnDoubleClick:p=!0,elementsSelectable:d,panOnDrag:g=!0,defaultViewport:m,translateExtent:x,minZoom:b,maxZoom:_,zoomActivationKeyCode:E,preventScrolling:v=!0,children:N,noWheelClassName:R,noPanClassName:T})=>{const P=A.useRef(),H=Zt(),G=A.useRef(!1),J=A.useRef(!1),$=A.useRef(null),Y=A.useRef({x:0,y:0,zoom:0}),{d3Zoom:te,d3Selection:Q,d3ZoomHandler:Z,userSelectionActive:B}=mt(h3,cn),q=sa(E),j=A.useRef(0),X=A.useRef(!1),ie=A.useRef();return f3($),A.useEffect(()=>{if($.current){const U=$.current.getBoundingClientRect(),oe=DA().scaleExtent([b,_]).translateExtent(x),se=hr($.current).call(oe),le=Bi.translate(m.x,m.y).scale(fs(m.zoom,b,_)),ue=[[0,0],[U.width,U.height]],ge=oe.constrain()(le,ue,x);oe.transform(se,ge),oe.wheelDelta(wp),H.setState({d3Zoom:oe,d3Selection:se,d3ZoomHandler:se.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:$.current.closest(".react-flow")})}},[]),A.useEffect(()=>{Q&&te&&(u&&!q&&!B?Q.on("wheel.zoom",U=>{if(Jo(U,R))return!1;U.preventDefault(),U.stopImmediatePropagation();const oe=Q.property("__zoom").k||1;if(U.ctrlKey&&c){const me=Nr(U),be=wp(U),Te=oe*Math.pow(2,be);te.scaleTo(Q,Te,me,U);return}const se=U.deltaMode===1?20:1;let le=f===mo.Vertical?0:U.deltaX*se,ue=f===mo.Horizontal?0:U.deltaY*se;!Pu()&&U.shiftKey&&f!==mo.Vertical&&(le=U.deltaY*se,ue=0),te.translateBy(Q,-(le/oe)*l,-(ue/oe)*l,{internal:!0});const ge=uu(Q.property("__zoom")),{onViewportChangeStart:de,onViewportChange:Fe,onViewportChangeEnd:Be}=H.getState();clearTimeout(ie.current),X.current||(X.current=!0,n?.(U,ge),de?.(ge)),X.current&&(e?.(U,ge),Fe?.(ge),ie.current=setTimeout(()=>{r?.(U,ge),Be?.(ge),X.current=!1},150))},{passive:!1}):typeof Z<"u"&&Q.on("wheel.zoom",function(U,oe){if(!v&&U.type==="wheel"&&!U.ctrlKey||Jo(U,R))return null;U.preventDefault(),Z.call(this,U,oe)},{passive:!1}))},[B,u,f,Q,te,Z,q,c,v,R,n,e,r]),A.useEffect(()=>{te&&te.on("start",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;j.current=U.sourceEvent?.button;const{onViewportChangeStart:oe}=H.getState(),se=uu(U.transform);G.current=!0,Y.current=se,U.sourceEvent?.type==="mousedown"&&H.setState({paneDragging:!0}),oe?.(se),n?.(U.sourceEvent,se)})},[te,n]),A.useEffect(()=>{te&&(B&&!G.current?te.on("zoom",null):B||te.on("zoom",U=>{const{onViewportChange:oe}=H.getState();if(H.setState({transform:[U.transform.x,U.transform.y,U.transform.k]}),J.current=!!(o&&xp(g,j.current??0)),(e||oe)&&!U.sourceEvent?.internal){const se=uu(U.transform);oe?.(se),e?.(U.sourceEvent,se)}}))},[B,te,e,g,o]),A.useEffect(()=>{te&&te.on("end",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;const{onViewportChangeEnd:oe}=H.getState();if(G.current=!1,H.setState({paneDragging:!1}),o&&xp(g,j.current??0)&&!J.current&&o(U.sourceEvent),J.current=!1,(r||oe)&&d3(Y.current,U.transform)){const se=uu(U.transform);Y.current=se,clearTimeout(P.current),P.current=setTimeout(()=>{oe?.(se),r?.(U.sourceEvent,se)},u?150:0)}})},[te,u,g,r,o]),A.useEffect(()=>{te&&te.filter(U=>{const oe=q||s,se=c&&U.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&U.button===1&&U.type==="mousedown"&&(Jo(U,"react-flow__node")||Jo(U,"react-flow__edge")))return!0;if(!g&&!oe&&!u&&!p&&!c||B||!p&&U.type==="dblclick"||Jo(U,R)&&U.type==="wheel"||Jo(U,T)&&(U.type!=="wheel"||u&&U.type==="wheel"&&!q)||!c&&U.ctrlKey&&U.type==="wheel"||!oe&&!u&&!se&&U.type==="wheel"||!g&&(U.type==="mousedown"||U.type==="touchstart")||Array.isArray(g)&&!g.includes(U.button)&&U.type==="mousedown")return!1;const le=Array.isArray(g)&&g.includes(U.button)||!U.button||U.button<=1;return(!U.ctrlKey||U.type==="wheel")&&le})},[B,te,s,c,u,p,g,d,q]),V.createElement("div",{className:"react-flow__renderer",ref:$,style:Cf},N)},g3=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function m3(){const{userSelectionActive:e,userSelectionRect:n}=mt(g3,cn);return e&&n?V.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}function bp(e,n){const r=n.parentNode||n.parentId,o=e.find(s=>s.id===r);if(o){const s=n.position.x+n.width-o.width,c=n.position.y+n.height-o.height;if(s>0||c>0||n.position.x<0||n.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,s>0&&(o.style.width+=s),c>0&&(o.style.height+=c),n.position.x<0){const u=Math.abs(n.position.x);o.position.x=o.position.x-u,o.style.width+=u,n.position.x=0}if(n.position.y<0){const u=Math.abs(n.position.y);o.position.y=o.position.y-u,o.style.height+=u,n.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function Rg(e,n){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const r=e.filter(o=>o.type==="add").map(o=>o.item);return n.reduce((o,s)=>{const c=e.filter(l=>l.id===s.id);if(c.length===0)return o.push(s),o;const u={...s};for(const l of c)if(l)switch(l.type){case"select":{u.selected=l.selected;break}case"position":{typeof l.position<"u"&&(u.position=l.position),typeof l.positionAbsolute<"u"&&(u.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(u.dragging=l.dragging),u.expandParent&&bp(o,u);break}case"dimensions":{typeof l.dimensions<"u"&&(u.width=l.dimensions.width,u.height=l.dimensions.height),typeof l.updateStyle<"u"&&(u.style={...u.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(u.resizing=l.resizing),u.expandParent&&bp(o,u);break}case"remove":return o}return o.push(u),o},r)}function Og(e,n){return Rg(e,n)}function y3(e,n){return Rg(e,n)}const Ni=(e,n)=>({id:e,type:"select",selected:n});function ts(e,n){return e.reduce((r,o)=>{const s=n.includes(o.id);return!o.selected&&s?(o.selected=!0,r.push(Ni(o.id,!0))):o.selected&&!s&&(o.selected=!1,r.push(Ni(o.id,!1))),r},[])}const ml=(e,n)=>r=>{r.target===n.current&&e?.(r)},v3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Mg=A.memo(({isSelecting:e,selectionMode:n=ds.Full,panOnDrag:r,onSelectionStart:o,onSelectionEnd:s,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:l,onPaneMouseEnter:f,onPaneMouseMove:p,onPaneMouseLeave:d,children:g})=>{const m=A.useRef(null),x=Zt(),b=A.useRef(0),_=A.useRef(0),E=A.useRef(),{userSelectionActive:v,elementsSelectable:N,dragging:R}=mt(v3,cn),T=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,_.current=0},P=Z=>{c?.(Z),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},H=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}u?.(Z)},G=l?Z=>l(Z):void 0,J=Z=>{const{resetSelectedElements:B,domNode:q}=x.getState();if(E.current=q?.getBoundingClientRect(),!N||!e||Z.button!==0||Z.target!==m.current||!E.current)return;const{x:j,y:X}=Ri(Z,E.current);B(),x.setState({userSelectionRect:{width:0,height:0,startX:j,startY:X,x:j,y:X}}),o?.(Z)},$=Z=>{const{userSelectionRect:B,nodeInternals:q,edges:j,transform:X,onNodesChange:ie,onEdgesChange:U,nodeOrigin:oe,getNodes:se}=x.getState();if(!e||!E.current||!B)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const le=Ri(Z,E.current),ue=B.startX??0,ge=B.startY??0,de={...B,x:le.x<ue?le.x:ue,y:le.y<ge?le.y:ge,width:Math.abs(le.x-ue),height:Math.abs(le.y-ge)},Fe=se(),Be=gg(q,de,X,n===ds.Partial,!0,oe),me=mg(Be,j).map(Te=>Te.id),be=Be.map(Te=>Te.id);if(b.current!==be.length){b.current=be.length;const Te=ts(Fe,be);Te.length&&ie?.(Te)}if(_.current!==me.length){_.current=me.length;const Te=ts(j,me);Te.length&&U?.(Te)}x.setState({userSelectionRect:de})},Y=Z=>{if(Z.button!==0)return;const{userSelectionRect:B}=x.getState();!v&&B&&Z.target===m.current&&P?.(Z),x.setState({nodesSelectionActive:b.current>0}),T(),s?.(Z)},te=Z=>{v&&(x.setState({nodesSelectionActive:b.current>0}),s?.(Z)),T()},Q=N&&(e||v);return V.createElement("div",{className:_n(["react-flow__pane",{dragging:R,selection:e}]),onClick:Q?void 0:ml(P,m),onContextMenu:ml(H,m),onWheel:ml(G,m),onMouseEnter:Q?void 0:f,onMouseDown:Q?J:void 0,onMouseMove:Q?$:p,onMouseUp:Q?Y:void 0,onMouseLeave:Q?te:d,ref:m,style:Cf},g,V.createElement(m3,null))});Mg.displayName="Pane";function zg(e,n){const r=e.parentNode||e.parentId;if(!r)return!1;const o=n.get(r);return o?o.selected?!0:zg(o,n):!1}function Cp(e,n,r){let o=e;do{if(o?.matches(n))return!0;if(o===r.current)return!1;o=o.parentElement}while(o);return!1}function D3(e,n,r,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||s.parentId||!zg(s,e))&&(s.draggable||n&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(s.positionAbsolute?.x??0),y:r.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function _3(e,n){return!n||n==="parent"?n:[n[0],[n[1][0]-(e.width||0),n[1][1]-(e.height||0)]]}function Pg(e,n,r,o,s=[0,0],c){const u=_3(e,e.extent||o);let l=u;const f=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(f&&e.width&&e.height){const g=r.get(f),{x:m,y:x}=os(g,s).positionAbsolute;l=g&&tr(m)&&tr(x)&&tr(g.width)&&tr(g.height)?[[m+e.width*s[0],x+e.height*s[1]],[m+g.width-e.width+e.width*s[0],x+g.height-e.height+e.height*s[1]]]:l}else c?.("005",ci.error005()),l=u;else if(e.extent&&f&&e.extent!=="parent"){const g=r.get(f),{x:m,y:x}=os(g,s).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+x],[e.extent[1][0]+m,e.extent[1][1]+x]]}let p={x:0,y:0};if(f){const g=r.get(f);p=os(g,s).positionAbsolute}const d=l&&l!=="parent"?hf(n,l):n;return{position:{x:d.x-p.x,y:d.y-p.y},positionAbsolute:d}}function yl({nodeId:e,dragItems:n,nodeInternals:r}){const o=n.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const Ep=(e,n,r,o)=>{const s=n.querySelectorAll(e);if(!s||!s.length)return null;const c=Array.from(s),u=n.getBoundingClientRect(),l={x:u.width*o[0],y:u.height*o[1]};return c.map(f=>{const p=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(p.left-u.left-l.x)/r,y:(p.top-u.top-l.y)/r,...df(f)}})};function ks(e,n,r){return r===void 0?r:o=>{const s=n().nodeInternals.get(e);s&&r(o,{...s})}}function ql({id:e,store:n,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:c,multiSelectionActive:u,nodeInternals:l,onError:f}=n.getState(),p=l.get(e);if(!p){f?.("012",ci.error012(e));return}n.setState({nodesSelectionActive:!1}),p.selected?(r||p.selected&&u)&&(c({nodes:[p],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([e])}function x3(){const e=Zt();return A.useCallback(({sourceEvent:r})=>{const{transform:o,snapGrid:s,snapToGrid:c}=e.getState(),u=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,f={x:(u-o[0])/o[2],y:(l-o[1])/o[2]};return{xSnapped:c?s[0]*Math.round(f.x/s[0]):f.x,ySnapped:c?s[1]*Math.round(f.y/s[1]):f.y,...f}},[])}function vl(e){return(n,r,o)=>e?.(n,o)}function $g({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:o,nodeId:s,isSelectable:c,selectNodesOnDrag:u}){const l=Zt(),[f,p]=A.useState(!1),d=A.useRef([]),g=A.useRef({x:null,y:null}),m=A.useRef(0),x=A.useRef(null),b=A.useRef({x:0,y:0}),_=A.useRef(null),E=A.useRef(!1),v=A.useRef(!1),N=A.useRef(!1),R=x3();return A.useEffect(()=>{if(e?.current){const T=hr(e.current),P=({x:J,y:$})=>{const{nodeInternals:Y,onNodeDrag:te,onSelectionDrag:Q,updateNodePositions:Z,nodeExtent:B,snapGrid:q,snapToGrid:j,nodeOrigin:X,onError:ie}=l.getState();g.current={x:J,y:$};let U=!1,oe={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&B){const le=_f(d.current,X);oe=pf(le)}if(d.current=d.current.map(le=>{const ue={x:J-le.distance.x,y:$-le.distance.y};j&&(ue.x=q[0]*Math.round(ue.x/q[0]),ue.y=q[1]*Math.round(ue.y/q[1]));const ge=[[B[0][0],B[0][1]],[B[1][0],B[1][1]]];d.current.length>1&&B&&!le.extent&&(ge[0][0]=le.positionAbsolute.x-oe.x+B[0][0],ge[1][0]=le.positionAbsolute.x+(le.width??0)-oe.x2+B[1][0],ge[0][1]=le.positionAbsolute.y-oe.y+B[0][1],ge[1][1]=le.positionAbsolute.y+(le.height??0)-oe.y2+B[1][1]);const de=Pg(le,ue,Y,ge,X,ie);return U=U||le.position.x!==de.position.x||le.position.y!==de.position.y,le.position=de.position,le.positionAbsolute=de.positionAbsolute,le}),!U)return;Z(d.current,!0,!0),p(!0);const se=s?te:vl(Q);if(se&&_.current){const[le,ue]=yl({nodeId:s,dragItems:d.current,nodeInternals:Y});se(_.current,le,ue)}},H=()=>{if(!x.current)return;const[J,$]=sg(b.current,x.current);if(J!==0||$!==0){const{transform:Y,panBy:te}=l.getState();g.current.x=(g.current.x??0)-J/Y[2],g.current.y=(g.current.y??0)-$/Y[2],te({x:J,y:$})&&P(g.current)}m.current=requestAnimationFrame(H)},G=J=>{const{nodeInternals:$,multiSelectionActive:Y,nodesDraggable:te,unselectNodesAndEdges:Q,onNodeDragStart:Z,onSelectionDragStart:B}=l.getState();v.current=!0;const q=s?Z:vl(B);(!u||!c)&&!Y&&s&&($.get(s)?.selected||Q()),s&&c&&u&&ql({id:s,store:l,nodeRef:e});const j=R(J);if(g.current=j,d.current=D3($,te,j,s),q&&d.current){const[X,ie]=yl({nodeId:s,dragItems:d.current,nodeInternals:$});q(J.sourceEvent,X,ie)}};if(n)T.on(".drag",null);else{const J=NE().on("start",$=>{const{domNode:Y,nodeDragThreshold:te}=l.getState();te===0&&G($),N.current=!1;const Q=R($);g.current=Q,x.current=Y?.getBoundingClientRect()||null,b.current=Ri($.sourceEvent,x.current)}).on("drag",$=>{const Y=R($),{autoPanOnNodeDrag:te,nodeDragThreshold:Q}=l.getState();if($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1&&(N.current=!0),!N.current){if(!E.current&&v.current&&te&&(E.current=!0,H()),!v.current){const Z=Y.xSnapped-(g?.current?.x??0),B=Y.ySnapped-(g?.current?.y??0);Math.sqrt(Z*Z+B*B)>Q&&G($)}(g.current.x!==Y.xSnapped||g.current.y!==Y.ySnapped)&&d.current&&v.current&&(_.current=$.sourceEvent,b.current=Ri($.sourceEvent,x.current),P(Y))}}).on("end",$=>{if(!(!v.current||N.current)&&(p(!1),E.current=!1,v.current=!1,cancelAnimationFrame(m.current),d.current)){const{updateNodePositions:Y,nodeInternals:te,onNodeDragStop:Q,onSelectionDragStop:Z}=l.getState(),B=s?Q:vl(Z);if(Y(d.current,!1,!1),B){const[q,j]=yl({nodeId:s,dragItems:d.current,nodeInternals:te});B($.sourceEvent,q,j)}}}).filter($=>{const Y=$.target;return!$.button&&(!r||!Cp(Y,`.${r}`,e))&&(!o||Cp(Y,o,e))});return T.call(J),()=>{T.on(".drag",null)}}}},[e,n,r,o,c,l,s,u,R]),f}function jg(){const e=Zt();return A.useCallback(r=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:c,getNodes:u,snapToGrid:l,snapGrid:f,onError:p,nodesDraggable:d}=e.getState(),g=u().filter(N=>N.selected&&(N.draggable||d&&typeof N.draggable>"u")),m=l?f[0]:5,x=l?f[1]:5,b=r.isShiftPressed?4:1,_=r.x*m*b,E=r.y*x*b,v=g.map(N=>{if(N.positionAbsolute){const R={x:N.positionAbsolute.x+_,y:N.positionAbsolute.y+E};l&&(R.x=f[0]*Math.round(R.x/f[0]),R.y=f[1]*Math.round(R.y/f[1]));const{positionAbsolute:T,position:P}=Pg(N,R,o,s,void 0,p);N.position=P,N.positionAbsolute=T}return N});c(v,!0,!1)},[])}const ss={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ls=e=>{const n=({id:r,type:o,data:s,xPos:c,yPos:u,xPosOrigin:l,yPosOrigin:f,selected:p,onClick:d,onMouseEnter:g,onMouseMove:m,onMouseLeave:x,onContextMenu:b,onDoubleClick:_,style:E,className:v,isDraggable:N,isSelectable:R,isConnectable:T,isFocusable:P,selectNodesOnDrag:H,sourcePosition:G,targetPosition:J,hidden:$,resizeObserver:Y,dragHandle:te,zIndex:Q,isParent:Z,noDragClassName:B,noPanClassName:q,initialized:j,disableKeyboardA11y:X,ariaLabel:ie,rfId:U,hasHandleBounds:oe})=>{const se=Zt(),le=A.useRef(null),ue=A.useRef(null),ge=A.useRef(G),de=A.useRef(J),Fe=A.useRef(o),Be=R||N||d||g||m||x,me=jg(),be=ks(r,se.getState,g),Te=ks(r,se.getState,m),xt=ks(r,se.getState,x),ht=ks(r,se.getState,b),jt=ks(r,se.getState,_),Qe=$e=>{const{nodeDragThreshold:_e}=se.getState();if(R&&(!H||!N||_e>0)&&ql({id:r,store:se,nodeRef:le}),d){const kt=se.getState().nodeInternals.get(r);kt&&d($e,{...kt})}},et=$e=>{if(!$l($e)&&!X)if(ug.includes($e.key)&&R){const _e=$e.key==="Escape";ql({id:r,store:se,unselect:_e,nodeRef:le})}else N&&p&&Object.prototype.hasOwnProperty.call(ss,$e.key)&&(se.setState({ariaLiveMessage:`Moved selected node ${$e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~c}, y: ${~~u}`}),me({x:ss[$e.key].x,y:ss[$e.key].y,isShiftPressed:$e.shiftKey}))};A.useEffect(()=>()=>{ue.current&&(Y?.unobserve(ue.current),ue.current=null)},[]),A.useEffect(()=>{if(le.current&&!$){const $e=le.current;(!j||!oe||ue.current!==$e)&&(ue.current&&Y?.unobserve(ue.current),Y?.observe($e),ue.current=$e)}},[$,j,oe]),A.useEffect(()=>{const $e=Fe.current!==o,_e=ge.current!==G,kt=de.current!==J;le.current&&($e||_e||kt)&&($e&&(Fe.current=o),_e&&(ge.current=G),kt&&(de.current=J),se.getState().updateNodeDimensions([{id:r,nodeElement:le.current,forceUpdate:!0}]))},[r,o,G,J]);const en=$g({nodeRef:le,disabled:$||!N,noDragClassName:B,handleSelector:te,nodeId:r,isSelectable:R,selectNodesOnDrag:H});return $?null:V.createElement("div",{className:_n(["react-flow__node",`react-flow__node-${o}`,{[q]:N},v,{selected:p,selectable:R,parent:Z,dragging:en}]),ref:le,style:{zIndex:Q,transform:`translate(${l}px,${f}px)`,pointerEvents:Be?"all":"none",visibility:j?"visible":"hidden",...E},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:be,onMouseMove:Te,onMouseLeave:xt,onContextMenu:ht,onClick:Qe,onDoubleClick:jt,onKeyDown:P?et:void 0,tabIndex:P?0:void 0,role:P?"button":void 0,"aria-describedby":X?void 0:`${Fg}-${U}`,"aria-label":ie},V.createElement(OA,{value:r},V.createElement(e,{id:r,data:s,type:o,xPos:c,yPos:u,selected:p,isConnectable:T,sourcePosition:G,targetPosition:J,dragging:en,dragHandle:te,zIndex:Q})))};return n.displayName="NodeWrapper",A.memo(n)};const w3=e=>{const n=e.getNodes().filter(r=>r.selected);return{..._f(n,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function b3({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const o=Zt(),{width:s,height:c,x:u,y:l,transformString:f,userSelectionActive:p}=mt(w3,cn),d=jg(),g=A.useRef(null);if(A.useEffect(()=>{r||g.current?.focus({preventScroll:!0})},[r]),$g({nodeRef:g}),p||!s||!c)return null;const m=e?b=>{const _=o.getState().getNodes().filter(E=>E.selected);e(b,_)}:void 0,x=b=>{Object.prototype.hasOwnProperty.call(ss,b.key)&&d({x:ss[b.key].x,y:ss[b.key].y,isShiftPressed:b.shiftKey})};return V.createElement("div",{className:_n(["react-flow__nodesselection","react-flow__container",n]),style:{transform:f}},V.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:x,style:{width:s,height:c,top:l,left:u}}))}var C3=A.memo(b3);const E3=e=>e.nodesSelectionActive,kg=({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:u,deleteKeyCode:l,onMove:f,onMoveStart:p,onMoveEnd:d,selectionKeyCode:g,selectionOnDrag:m,selectionMode:x,onSelectionStart:b,onSelectionEnd:_,multiSelectionKeyCode:E,panActivationKeyCode:v,zoomActivationKeyCode:N,elementsSelectable:R,zoomOnScroll:T,zoomOnPinch:P,panOnScroll:H,panOnScrollSpeed:G,panOnScrollMode:J,zoomOnDoubleClick:$,panOnDrag:Y,defaultViewport:te,translateExtent:Q,minZoom:Z,maxZoom:B,preventScrolling:q,onSelectionContextMenu:j,noWheelClassName:X,noPanClassName:ie,disableKeyboardA11y:U})=>{const oe=mt(E3),se=sa(g),le=sa(v),ue=le||Y,ge=le||H,de=se||m&&ue!==!0;return l3({deleteKeyCode:l,multiSelectionKeyCode:E}),V.createElement(p3,{onMove:f,onMoveStart:p,onMoveEnd:d,onPaneContextMenu:c,elementsSelectable:R,zoomOnScroll:T,zoomOnPinch:P,panOnScroll:ge,panOnScrollSpeed:G,panOnScrollMode:J,zoomOnDoubleClick:$,panOnDrag:!se&&ue,defaultViewport:te,translateExtent:Q,minZoom:Z,maxZoom:B,zoomActivationKeyCode:N,preventScrolling:q,noWheelClassName:X,noPanClassName:ie},V.createElement(Mg,{onSelectionStart:b,onSelectionEnd:_,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:u,panOnDrag:ue,isSelecting:!!de,selectionMode:x},e,oe&&V.createElement(C3,{onSelectionContextMenu:j,noPanClassName:ie,disableKeyboardA11y:U})))};kg.displayName="FlowRenderer";var S3=A.memo(kg);function A3(e){return mt(A.useCallback(r=>e?gg(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function F3(e){const n={input:Ls(e.input||Cg),default:Ls(e.default||Hl),output:Ls(e.output||Sg),group:Ls(e.group||wf)},r={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,c)=>(s[c]=Ls(e[c]||Hl),s),r);return{...n,...o}}const N3=({x:e,y:n,width:r,height:o,origin:s})=>!r||!o?{x:e,y:n}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:n}:{x:e-r*s[0],y:n-o*s[1]},T3=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Lg=e=>{const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:c,onError:u}=mt(T3,cn),l=A3(e.onlyRenderVisibleElements),f=A.useRef(),p=A.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(g=>{const m=g.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));c(m)});return f.current=d,d},[]);return A.useEffect(()=>()=>{f?.current?.disconnect()},[]),V.createElement("div",{className:"react-flow__nodes",style:Cf},l.map(d=>{let g=d.type||"default";e.nodeTypes[g]||(u?.("003",ci.error003(g)),g="default");const m=e.nodeTypes[g]||e.nodeTypes.default,x=!!(d.draggable||n&&typeof d.draggable>"u"),b=!!(d.selectable||s&&typeof d.selectable>"u"),_=!!(d.connectable||r&&typeof d.connectable>"u"),E=!!(d.focusable||o&&typeof d.focusable>"u"),v=e.nodeExtent?hf(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,N=v?.x??0,R=v?.y??0,T=N3({x:N,y:R,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return V.createElement(m,{key:d.id,id:d.id,className:d.className,style:d.style,type:g,data:d.data,sourcePosition:d.sourcePosition||xe.Bottom,targetPosition:d.targetPosition||xe.Top,hidden:d.hidden,xPos:N,yPos:R,xPosOrigin:T.x,yPosOrigin:T.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:x,isSelectable:b,isConnectable:_,isFocusable:E,resizeObserver:p,dragHandle:d.dragHandle,zIndex:d[At]?.z??0,isParent:!!d[At]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!d[At]?.handleBounds})}))};Lg.displayName="NodeRenderer";var I3=A.memo(Lg);const B3=(e,n,r)=>r===xe.Left?e-n:r===xe.Right?e+n:e,R3=(e,n,r)=>r===xe.Top?e-n:r===xe.Bottom?e+n:e,Sp="react-flow__edgeupdater",Ap=({position:e,centerX:n,centerY:r,radius:o=10,onMouseDown:s,onMouseEnter:c,onMouseOut:u,type:l})=>V.createElement("circle",{onMouseDown:s,onMouseEnter:c,onMouseOut:u,className:_n([Sp,`${Sp}-${l}`]),cx:B3(n,o,e),cy:R3(r,o,e),r:o,stroke:"transparent",fill:"transparent"}),O3=()=>!0;var Qo=e=>{const n=({id:r,className:o,type:s,data:c,onClick:u,onEdgeDoubleClick:l,selected:f,animated:p,label:d,labelStyle:g,labelShowBg:m,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:_,style:E,source:v,target:N,sourceX:R,sourceY:T,targetX:P,targetY:H,sourcePosition:G,targetPosition:J,elementsSelectable:$,hidden:Y,sourceHandleId:te,targetHandleId:Q,onContextMenu:Z,onMouseEnter:B,onMouseMove:q,onMouseLeave:j,reconnectRadius:X,onReconnect:ie,onReconnectStart:U,onReconnectEnd:oe,markerEnd:se,markerStart:le,rfId:ue,ariaLabel:ge,isFocusable:de,isReconnectable:Fe,pathOptions:Be,interactionWidth:me,disableKeyboardA11y:be})=>{const Te=A.useRef(null),[xt,ht]=A.useState(!1),[jt,Qe]=A.useState(!1),et=Zt(),en=A.useMemo(()=>`url('#${kl(le,ue)}')`,[le,ue]),$e=A.useMemo(()=>`url('#${kl(se,ue)}')`,[se,ue]);if(Y)return null;const _e=at=>{const{edges:Ot,addSelectedEdges:ln,unselectNodesAndEdges:rn,multiSelectionActive:Dt}=et.getState(),Ct=Ot.find(on=>on.id===r);Ct&&($&&(et.setState({nodesSelectionActive:!1}),Ct.selected&&Dt?(rn({nodes:[],edges:[Ct]}),Te.current?.blur()):ln([r])),u&&u(at,Ct))},kt=js(r,et.getState,l),Bt=js(r,et.getState,Z),yt=js(r,et.getState,B),Lt=js(r,et.getState,q),wt=js(r,et.getState,j),tn=(at,Ot)=>{if(at.button!==0)return;const{edges:ln,isValidConnection:rn}=et.getState(),Dt=Ot?N:v,Ct=(Ot?Q:te)||null,on=Ot?"target":"source",_r=rn||O3,fn=Ot,Bn=ln.find(Ft=>Ft.id===r);Qe(!0),U?.(at,Bn,on);const xn=Ft=>{Qe(!1),oe?.(Ft,Bn,on)};_g({event:at,handleId:Ct,nodeId:Dt,onConnect:Ft=>ie?.(Bn,Ft),isTarget:fn,getState:et.getState,setState:et.setState,isValidConnection:_r,edgeUpdaterType:on,onReconnectEnd:xn})},Kt=at=>tn(at,!0),In=at=>tn(at,!1),Rt=()=>ht(!0),bt=()=>ht(!1),nn=!$&&!u,vt=at=>{if(!be&&ug.includes(at.key)&&$){const{unselectNodesAndEdges:Ot,addSelectedEdges:ln,edges:rn}=et.getState();at.key==="Escape"?(Te.current?.blur(),Ot({edges:[rn.find(Ct=>Ct.id===r)]})):ln([r])}};return V.createElement("g",{className:_n(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:f,animated:p,inactive:nn,updating:xt}]),onClick:_e,onDoubleClick:kt,onContextMenu:Bt,onMouseEnter:yt,onMouseMove:Lt,onMouseLeave:wt,onKeyDown:de?vt:void 0,tabIndex:de?0:void 0,role:de?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":ge===null?void 0:ge||`Edge from ${v} to ${N}`,"aria-describedby":de?`${Ng}-${ue}`:void 0,ref:Te},!jt&&V.createElement(e,{id:r,source:v,target:N,selected:f,animated:p,label:d,labelStyle:g,labelShowBg:m,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:_,data:c,style:E,sourceX:R,sourceY:T,targetX:P,targetY:H,sourcePosition:G,targetPosition:J,sourceHandleId:te,targetHandleId:Q,markerStart:en,markerEnd:$e,pathOptions:Be,interactionWidth:me}),Fe&&V.createElement(V.Fragment,null,(Fe==="source"||Fe===!0)&&V.createElement(Ap,{position:G,centerX:R,centerY:T,radius:X,onMouseDown:Kt,onMouseEnter:Rt,onMouseOut:bt,type:"source"}),(Fe==="target"||Fe===!0)&&V.createElement(Ap,{position:J,centerX:P,centerY:H,radius:X,onMouseDown:In,onMouseEnter:Rt,onMouseOut:bt,type:"target"})))};return n.displayName="EdgeWrapper",A.memo(n)};function M3(e){const n={default:Qo(e.default||$u),straight:Qo(e.bezier||yf),step:Qo(e.step||mf),smoothstep:Qo(e.step||Qu),simplebezier:Qo(e.simplebezier||gf)},r={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,c)=>(s[c]=Qo(e[c]||$u),s),r);return{...n,...o}}function Fp(e,n,r=null){const o=(r?.x||0)+n.x,s=(r?.y||0)+n.y,c=r?.width||n.width,u=r?.height||n.height;switch(e){case xe.Top:return{x:o+c/2,y:s};case xe.Right:return{x:o+c,y:s+u/2};case xe.Bottom:return{x:o+c/2,y:s+u};case xe.Left:return{x:o,y:s+u/2}}}function Np(e,n){return e?e.length===1||!n?e[0]:n&&e.find(r=>r.id===n)||null:null}const z3=(e,n,r,o,s,c)=>{const u=Fp(r,e,n),l=Fp(c,o,s);return{sourceX:u.x,sourceY:u.y,targetX:l.x,targetY:l.y}};function P3({sourcePos:e,targetPos:n,sourceWidth:r,sourceHeight:o,targetWidth:s,targetHeight:c,width:u,height:l,transform:f}){const p={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x+r,n.x+s),y2:Math.max(e.y+o,n.y+c)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const d=pf({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:u/f[2],height:l/f[2]}),g=Math.max(0,Math.min(d.x2,p.x2)-Math.max(d.x,p.x)),m=Math.max(0,Math.min(d.y2,p.y2)-Math.max(d.y,p.y));return Math.ceil(g*m)>0}function Tp(e){const n=e?.[At]?.handleBounds||null,r=n&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},n,!!r]}const $3=[{level:0,isMaxLevel:!0,edges:[]}];function j3(e,n,r=!1){let o=-1;const s=e.reduce((u,l)=>{const f=tr(l.zIndex);let p=f?l.zIndex:0;if(r){const d=n.get(l.target),g=n.get(l.source),m=l.selected||d?.selected||g?.selected,x=Math.max(g?.[At]?.z||0,d?.[At]?.z||0,1e3);p=(f?l.zIndex:0)+(m?x:0)}return u[p]?u[p].push(l):u[p]=[l],o=p>o?p:o,u},{}),c=Object.entries(s).map(([u,l])=>{const f=+u;return{edges:l,level:f,isMaxLevel:f===o}});return c.length===0?$3:c}function k3(e,n,r){const o=mt(A.useCallback(s=>e?s.edges.filter(c=>{const u=n.get(c.source),l=n.get(c.target);return u?.width&&u?.height&&l?.width&&l?.height&&P3({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,n]));return j3(o,n,r)}const L3=({color:e="none",strokeWidth:n=1})=>V.createElement("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),H3=({color:e="none",strokeWidth:n=1})=>V.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ip={[oa.Arrow]:L3,[oa.ArrowClosed]:H3};function q3(e){const n=Zt();return A.useMemo(()=>Object.prototype.hasOwnProperty.call(Ip,e)?Ip[e]:(n.getState().onError?.("009",ci.error009(e)),null),[e])}const V3=({id:e,type:n,color:r,width:o=12.5,height:s=12.5,markerUnits:c="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"})=>{const f=q3(n);return f?V.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:l,refX:"0",refY:"0"},V.createElement(f,{color:r,strokeWidth:u})):null},G3=({defaultColor:e,rfId:n})=>r=>{const o=[];return r.edges.reduce((s,c)=>([c.markerStart,c.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const l=kl(u,n);o.includes(l)||(s.push({id:l,color:u.color||e,...u}),o.push(l))}}),s),[]).sort((s,c)=>s.id.localeCompare(c.id))},Hg=({defaultColor:e,rfId:n})=>{const r=mt(A.useCallback(G3({defaultColor:e,rfId:n}),[e,n]),(o,s)=>!(o.length!==s.length||o.some((c,u)=>c.id!==s[u].id)));return V.createElement("defs",null,r.map(o=>V.createElement(V3,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};Hg.displayName="MarkerDefinitions";var U3=A.memo(Hg);const W3=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),qg=({defaultMarkerColor:e,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:o,edgeTypes:s,noPanClassName:c,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:f,onEdgeMouseLeave:p,onEdgeClick:d,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:x,onReconnectEnd:b,reconnectRadius:_,children:E,disableKeyboardA11y:v})=>{const{edgesFocusable:N,edgesUpdatable:R,elementsSelectable:T,width:P,height:H,connectionMode:G,nodeInternals:J,onError:$}=mt(W3,cn),Y=k3(n,J,r);return P?V.createElement(V.Fragment,null,Y.map(({level:te,edges:Q,isMaxLevel:Z})=>V.createElement("svg",{key:te,style:{zIndex:te},width:P,height:H,className:"react-flow__edges react-flow__container"},Z&&V.createElement(U3,{defaultColor:e,rfId:o}),V.createElement("g",null,Q.map(B=>{const[q,j,X]=Tp(J.get(B.source)),[ie,U,oe]=Tp(J.get(B.target));if(!X||!oe)return null;let se=B.type||"default";s[se]||($?.("011",ci.error011(se)),se="default");const le=s[se]||s.default,ue=G===_o.Strict?U.target:(U.target??[]).concat(U.source??[]),ge=Np(j.source,B.sourceHandle),de=Np(ue,B.targetHandle),Fe=ge?.position||xe.Bottom,Be=de?.position||xe.Top,me=!!(B.focusable||N&&typeof B.focusable>"u"),be=B.reconnectable||B.updatable,Te=typeof m<"u"&&(be||R&&typeof be>"u");if(!ge||!de)return $?.("008",ci.error008(ge,B)),null;const{sourceX:xt,sourceY:ht,targetX:jt,targetY:Qe}=z3(q,ge,Fe,ie,de,Be);return V.createElement(le,{key:B.id,id:B.id,className:_n([B.className,c]),type:se,data:B.data,selected:!!B.selected,animated:!!B.animated,hidden:!!B.hidden,label:B.label,labelStyle:B.labelStyle,labelShowBg:B.labelShowBg,labelBgStyle:B.labelBgStyle,labelBgPadding:B.labelBgPadding,labelBgBorderRadius:B.labelBgBorderRadius,style:B.style,source:B.source,target:B.target,sourceHandleId:B.sourceHandle,targetHandleId:B.targetHandle,markerEnd:B.markerEnd,markerStart:B.markerStart,sourceX:xt,sourceY:ht,targetX:jt,targetY:Qe,sourcePosition:Fe,targetPosition:Be,elementsSelectable:T,onContextMenu:u,onMouseEnter:l,onMouseMove:f,onMouseLeave:p,onClick:d,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:x,onReconnectEnd:b,reconnectRadius:_,rfId:o,ariaLabel:B.ariaLabel,isFocusable:me,isReconnectable:Te,pathOptions:"pathOptions"in B?B.pathOptions:void 0,interactionWidth:B.interactionWidth,disableKeyboardA11y:v})})))),E):null};qg.displayName="EdgeRenderer";var X3=A.memo(qg);const Y3=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Z3({children:e}){const n=mt(Y3);return V.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},e)}function K3(e){const n=bf(),r=A.useRef(!1);A.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const J3={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top},Vg=({nodeId:e,handleType:n,style:r,type:o=Ti.Bezier,CustomComponent:s,connectionStatus:c})=>{const{fromNode:u,handleId:l,toX:f,toY:p,connectionMode:d}=mt(A.useCallback(H=>({fromNode:H.nodeInternals.get(e),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2],connectionMode:H.connectionMode}),[e]),cn),g=u?.[At]?.handleBounds;let m=g?.[n];if(d===_o.Loose&&(m=m||g?.[n==="source"?"target":"source"]),!u||!m)return null;const x=l?m.find(H=>H.id===l):m[0],b=x?x.x+x.width/2:(u.width??0)/2,_=x?x.y+x.height/2:u.height??0,E=(u.positionAbsolute?.x??0)+b,v=(u.positionAbsolute?.y??0)+_,N=x?.position,R=N?J3[N]:null;if(!N||!R)return null;if(s)return V.createElement(s,{connectionLineType:o,connectionLineStyle:r,fromNode:u,fromHandle:x,fromX:E,fromY:v,toX:f,toY:p,fromPosition:N,toPosition:R,connectionStatus:c});let T="";const P={sourceX:E,sourceY:v,sourcePosition:N,targetX:f,targetY:p,targetPosition:R};return o===Ti.Bezier?[T]=vf(P):o===Ti.Step?[T]=jl({...P,borderRadius:0}):o===Ti.SmoothStep?[T]=jl(P):o===Ti.SimpleBezier?[T]=dg(P):T=`M${E},${v} ${f},${p}`,V.createElement("path",{d:T,fill:"none",className:"react-flow__connection-path",style:r})};Vg.displayName="ConnectionLine";const Q3=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function e6({containerStyle:e,style:n,type:r,component:o}){const{nodeId:s,handleType:c,nodesConnectable:u,width:l,height:f,connectionStatus:p}=mt(Q3,cn);return!(s&&c&&l&&u)?null:V.createElement("svg",{style:e,width:l,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},V.createElement("g",{className:_n(["react-flow__connection",p])},V.createElement(Vg,{nodeId:s,handleType:c,style:n,type:r,CustomComponent:o,connectionStatus:p})))}function Bp(e,n){return A.useRef(null),Zt(),A.useMemo(()=>n(e),[e])}const Gg=({nodeTypes:e,edgeTypes:n,onMove:r,onMoveStart:o,onMoveEnd:s,onInit:c,onNodeClick:u,onEdgeClick:l,onNodeDoubleClick:f,onEdgeDoubleClick:p,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:x,onSelectionContextMenu:b,onSelectionStart:_,onSelectionEnd:E,connectionLineType:v,connectionLineStyle:N,connectionLineComponent:R,connectionLineContainerStyle:T,selectionKeyCode:P,selectionOnDrag:H,selectionMode:G,multiSelectionKeyCode:J,panActivationKeyCode:$,zoomActivationKeyCode:Y,deleteKeyCode:te,onlyRenderVisibleElements:Q,elementsSelectable:Z,selectNodesOnDrag:B,defaultViewport:q,translateExtent:j,minZoom:X,maxZoom:ie,preventScrolling:U,defaultMarkerColor:oe,zoomOnScroll:se,zoomOnPinch:le,panOnScroll:ue,panOnScrollSpeed:ge,panOnScrollMode:de,zoomOnDoubleClick:Fe,panOnDrag:Be,onPaneClick:me,onPaneMouseEnter:be,onPaneMouseMove:Te,onPaneMouseLeave:xt,onPaneScroll:ht,onPaneContextMenu:jt,onEdgeContextMenu:Qe,onEdgeMouseEnter:et,onEdgeMouseMove:en,onEdgeMouseLeave:$e,onReconnect:_e,onReconnectStart:kt,onReconnectEnd:Bt,reconnectRadius:yt,noDragClassName:Lt,noWheelClassName:wt,noPanClassName:tn,elevateEdgesOnSelect:Kt,disableKeyboardA11y:In,nodeOrigin:Rt,nodeExtent:bt,rfId:nn})=>{const vt=Bp(e,F3),at=Bp(n,M3);return K3(c),V.createElement(S3,{onPaneClick:me,onPaneMouseEnter:be,onPaneMouseMove:Te,onPaneMouseLeave:xt,onPaneContextMenu:jt,onPaneScroll:ht,deleteKeyCode:te,selectionKeyCode:P,selectionOnDrag:H,selectionMode:G,onSelectionStart:_,onSelectionEnd:E,multiSelectionKeyCode:J,panActivationKeyCode:$,zoomActivationKeyCode:Y,elementsSelectable:Z,onMove:r,onMoveStart:o,onMoveEnd:s,zoomOnScroll:se,zoomOnPinch:le,zoomOnDoubleClick:Fe,panOnScroll:ue,panOnScrollSpeed:ge,panOnScrollMode:de,panOnDrag:Be,defaultViewport:q,translateExtent:j,minZoom:X,maxZoom:ie,onSelectionContextMenu:b,preventScrolling:U,noDragClassName:Lt,noWheelClassName:wt,noPanClassName:tn,disableKeyboardA11y:In},V.createElement(Z3,null,V.createElement(X3,{edgeTypes:at,onEdgeClick:l,onEdgeDoubleClick:p,onlyRenderVisibleElements:Q,onEdgeContextMenu:Qe,onEdgeMouseEnter:et,onEdgeMouseMove:en,onEdgeMouseLeave:$e,onReconnect:_e,onReconnectStart:kt,onReconnectEnd:Bt,reconnectRadius:yt,defaultMarkerColor:oe,noPanClassName:tn,elevateEdgesOnSelect:!!Kt,disableKeyboardA11y:In,rfId:nn},V.createElement(e6,{style:N,type:v,component:R,containerStyle:T})),V.createElement("div",{className:"react-flow__edgelabel-renderer"}),V.createElement(I3,{nodeTypes:vt,onNodeClick:u,onNodeDoubleClick:f,onNodeMouseEnter:d,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:x,selectNodesOnDrag:B,onlyRenderVisibleElements:Q,noPanClassName:tn,noDragClassName:Lt,disableKeyboardA11y:In,nodeOrigin:Rt,nodeExtent:bt,rfId:nn})))};Gg.displayName="GraphView";var t6=A.memo(Gg);const Vl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ai={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Vl,nodeExtent:Vl,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:_o.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:FA,isValidConnection:void 0},n6=()=>Lb((e,n)=>({...Ai,setNodes:r=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:c}=n();e({nodeInternals:gl(r,o,s,c)})},getNodes:()=>Array.from(n().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:o={}}=n();e({edges:r.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(r,o)=>{const s=typeof r<"u",c=typeof o<"u",u=s?gl(r,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;e({nodeInternals:u,edges:c?o:[],hasDefaultNodes:s,hasDefaultEdges:c})},updateNodeDimensions:r=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:c,fitViewOnInitDone:u,fitViewOnInitOptions:l,domNode:f,nodeOrigin:p}=n(),d=f?.querySelector(".react-flow__viewport");if(!d)return;const g=window.getComputedStyle(d),{m22:m}=new window.DOMMatrixReadOnly(g.transform),x=r.reduce((_,E)=>{const v=s.get(E.id);if(v?.hidden)s.set(v.id,{...v,[At]:{...v[At],handleBounds:void 0}});else if(v){const N=df(E.nodeElement);!!(N.width&&N.height&&(v.width!==N.width||v.height!==N.height||E.forceUpdate))&&(s.set(v.id,{...v,[At]:{...v[At],handleBounds:{source:Ep(".source",E.nodeElement,m,p),target:Ep(".target",E.nodeElement,m,p)}},...N}),_.push({id:v.id,type:"dimensions",dimensions:N}))}return _},[]);Ig(s,p);const b=u||c&&!u&&Bg(n,{initial:!0,...l});e({nodeInternals:new Map(s),fitViewOnInitDone:b}),x?.length>0&&o?.(x)},updateNodePositions:(r,o=!0,s=!1)=>{const{triggerNodeChanges:c}=n(),u=r.map(l=>{const f={id:l.id,type:"position",dragging:s};return o&&(f.positionAbsolute=l.positionAbsolute,f.position=l.position),f});c(u)},triggerNodeChanges:r=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:c,nodeOrigin:u,getNodes:l,elevateNodesOnSelect:f}=n();if(r?.length){if(c){const p=Og(r,l()),d=gl(p,s,u,f);e({nodeInternals:d})}o?.(r)}},addSelectedNodes:r=>{const{multiSelectionActive:o,edges:s,getNodes:c}=n();let u,l=null;o?u=r.map(f=>Ni(f,!0)):(u=ts(c(),r),l=ts(s,[])),au({changedNodes:u,changedEdges:l,get:n,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:o,edges:s,getNodes:c}=n();let u,l=null;o?u=r.map(f=>Ni(f,!0)):(u=ts(s,r),l=ts(c(),[])),au({changedNodes:l,changedEdges:u,get:n,set:e})},unselectNodesAndEdges:({nodes:r,edges:o}={})=>{const{edges:s,getNodes:c}=n(),u=r||c(),l=o||s,f=u.map(d=>(d.selected=!1,Ni(d.id,!1))),p=l.map(d=>Ni(d.id,!1));au({changedNodes:f,changedEdges:p,get:n,set:e})},setMinZoom:r=>{const{d3Zoom:o,maxZoom:s}=n();o?.scaleExtent([r,s]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:o,minZoom:s}=n();o?.scaleExtent([s,r]),e({maxZoom:r})},setTranslateExtent:r=>{n().d3Zoom?.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:o}=n(),c=o().filter(l=>l.selected).map(l=>Ni(l.id,!1)),u=r.filter(l=>l.selected).map(l=>Ni(l.id,!1));au({changedNodes:c,changedEdges:u,get:n,set:e})},setNodeExtent:r=>{const{nodeInternals:o}=n();o.forEach(s=>{s.positionAbsolute=hf(s.position,r)}),e({nodeExtent:r,nodeInternals:new Map(o)})},panBy:r=>{const{transform:o,width:s,height:c,d3Zoom:u,d3Selection:l,translateExtent:f}=n();if(!u||!l||!r.x&&!r.y)return!1;const p=Bi.translate(o[0]+r.x,o[1]+r.y).scale(o[2]),d=[[0,0],[s,c]],g=u?.constrain()(p,d,f);return u.transform(l,g),o[0]!==g.x||o[1]!==g.y||o[2]!==g.k},cancelConnection:()=>e({connectionNodeId:Ai.connectionNodeId,connectionHandleId:Ai.connectionHandleId,connectionHandleType:Ai.connectionHandleType,connectionStatus:Ai.connectionStatus,connectionStartHandle:Ai.connectionStartHandle,connectionEndHandle:Ai.connectionEndHandle}),reset:()=>e({...Ai})}),Object.is),Ef=({children:e})=>{const n=A.useRef(null);return n.current||(n.current=n6()),V.createElement(_A,{value:n.current},e)};Ef.displayName="ReactFlowProvider";const Ug=({children:e})=>A.useContext(Ju)?V.createElement(V.Fragment,null,e):V.createElement(Ef,null,e);Ug.displayName="ReactFlowWrapper";const r6={input:Cg,default:Hl,output:Sg,group:wf},i6={default:$u,straight:yf,step:mf,smoothstep:Qu,simplebezier:gf},o6=[0,0],s6=[15,15],a6={x:0,y:0,zoom:1},u6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Wg=A.forwardRef(({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,className:s,nodeTypes:c=r6,edgeTypes:u=i6,onNodeClick:l,onEdgeClick:f,onInit:p,onMove:d,onMoveStart:g,onMoveEnd:m,onConnect:x,onConnectStart:b,onConnectEnd:_,onClickConnectStart:E,onClickConnectEnd:v,onNodeMouseEnter:N,onNodeMouseMove:R,onNodeMouseLeave:T,onNodeContextMenu:P,onNodeDoubleClick:H,onNodeDragStart:G,onNodeDrag:J,onNodeDragStop:$,onNodesDelete:Y,onEdgesDelete:te,onSelectionChange:Q,onSelectionDragStart:Z,onSelectionDrag:B,onSelectionDragStop:q,onSelectionContextMenu:j,onSelectionStart:X,onSelectionEnd:ie,connectionMode:U=_o.Strict,connectionLineType:oe=Ti.Bezier,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:ue,deleteKeyCode:ge="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:Fe=!1,selectionMode:Be=ds.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:be=Pu()?"Meta":"Control",zoomActivationKeyCode:Te=Pu()?"Meta":"Control",snapToGrid:xt=!1,snapGrid:ht=s6,onlyRenderVisibleElements:jt=!1,selectNodesOnDrag:Qe=!0,nodesDraggable:et,nodesConnectable:en,nodesFocusable:$e,nodeOrigin:_e=o6,edgesFocusable:kt,edgesUpdatable:Bt,elementsSelectable:yt,defaultViewport:Lt=a6,minZoom:wt=.5,maxZoom:tn=2,translateExtent:Kt=Vl,preventScrolling:In=!0,nodeExtent:Rt,defaultMarkerColor:bt="#b1b1b7",zoomOnScroll:nn=!0,zoomOnPinch:vt=!0,panOnScroll:at=!1,panOnScrollSpeed:Ot=.5,panOnScrollMode:ln=mo.Free,zoomOnDoubleClick:rn=!0,panOnDrag:Dt=!0,onPaneClick:Ct,onPaneMouseEnter:on,onPaneMouseMove:_r,onPaneMouseLeave:fn,onPaneScroll:Bn,onPaneContextMenu:xn,children:Br,onEdgeContextMenu:Ft,onEdgeDoubleClick:nr,onEdgeMouseEnter:Rr,onEdgeMouseMove:Or,onEdgeMouseLeave:xr,onEdgeUpdate:rr,onEdgeUpdateStart:dn,onEdgeUpdateEnd:Pi,onReconnect:Mr,onReconnectStart:$i,onReconnectEnd:zr,reconnectRadius:fi=10,edgeUpdaterRadius:wn=10,onNodesChange:Rn,onEdgesChange:ji,noDragClassName:ki="nodrag",noWheelClassName:Li="nowheel",noPanClassName:di="nopan",fitView:qn=!1,fitViewOptions:sn,connectOnClick:Hi=!0,attributionPosition:qi,proOptions:Vi,defaultEdgeOptions:Gi,elevateNodesOnSelect:Ui=!0,elevateEdgesOnSelect:hn=!1,disableKeyboardA11y:ir=!1,autoPanOnConnect:wr=!0,autoPanOnNodeDrag:Vn=!0,connectionRadius:Wi=20,isValidConnection:br,onError:or,style:hi,id:Pr,nodeDragThreshold:pn,...pi},Xi)=>{const $r=Pr||"1";return V.createElement("div",{...pi,style:{...hi,...u6},ref:Xi,className:_n(["react-flow",s]),"data-testid":"rf__wrapper",id:Pr},V.createElement(Ug,null,V.createElement(t6,{onInit:p,onMove:d,onMoveStart:g,onMoveEnd:m,onNodeClick:l,onEdgeClick:f,onNodeMouseEnter:N,onNodeMouseMove:R,onNodeMouseLeave:T,onNodeContextMenu:P,onNodeDoubleClick:H,nodeTypes:c,edgeTypes:u,connectionLineType:oe,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:ue,selectionKeyCode:de,selectionOnDrag:Fe,selectionMode:Be,deleteKeyCode:ge,multiSelectionKeyCode:be,panActivationKeyCode:me,zoomActivationKeyCode:Te,onlyRenderVisibleElements:jt,selectNodesOnDrag:Qe,defaultViewport:Lt,translateExtent:Kt,minZoom:wt,maxZoom:tn,preventScrolling:In,zoomOnScroll:nn,zoomOnPinch:vt,zoomOnDoubleClick:rn,panOnScroll:at,panOnScrollSpeed:Ot,panOnScrollMode:ln,panOnDrag:Dt,onPaneClick:Ct,onPaneMouseEnter:on,onPaneMouseMove:_r,onPaneMouseLeave:fn,onPaneScroll:Bn,onPaneContextMenu:xn,onSelectionContextMenu:j,onSelectionStart:X,onSelectionEnd:ie,onEdgeContextMenu:Ft,onEdgeDoubleClick:nr,onEdgeMouseEnter:Rr,onEdgeMouseMove:Or,onEdgeMouseLeave:xr,onReconnect:Mr??rr,onReconnectStart:$i??dn,onReconnectEnd:zr??Pi,reconnectRadius:fi??wn,defaultMarkerColor:bt,noDragClassName:ki,noWheelClassName:Li,noPanClassName:di,elevateEdgesOnSelect:hn,rfId:$r,disableKeyboardA11y:ir,nodeOrigin:_e,nodeExtent:Rt}),V.createElement(JA,{nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:x,onConnectStart:b,onConnectEnd:_,onClickConnectStart:E,onClickConnectEnd:v,nodesDraggable:et,nodesConnectable:en,nodesFocusable:$e,edgesFocusable:kt,edgesUpdatable:Bt,elementsSelectable:yt,elevateNodesOnSelect:Ui,minZoom:wt,maxZoom:tn,nodeExtent:Rt,onNodesChange:Rn,onEdgesChange:ji,snapToGrid:xt,snapGrid:ht,connectionMode:U,translateExtent:Kt,connectOnClick:Hi,defaultEdgeOptions:Gi,fitView:qn,fitViewOptions:sn,onNodesDelete:Y,onEdgesDelete:te,onNodeDragStart:G,onNodeDrag:J,onNodeDragStop:$,onSelectionDrag:B,onSelectionDragStart:Z,onSelectionDragStop:q,noPanClassName:di,nodeOrigin:_e,rfId:$r,autoPanOnConnect:wr,autoPanOnNodeDrag:Vn,onError:or,connectionRadius:Wi,isValidConnection:br,nodeDragThreshold:pn}),V.createElement(ZA,{onSelectionChange:Q}),Br,V.createElement(wA,{proOptions:Vi,position:qi}),V.createElement(r3,{rfId:$r,disableKeyboardA11y:ir})))});Wg.displayName="ReactFlow";const c6=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function l6({children:e}){const n=mt(c6);return n?h0.createPortal(e,n):null}function Xg(e){return n=>{const[r,o]=A.useState(n),s=A.useCallback(c=>o(u=>e(c,u)),[]);return[r,o,s]}}const f6=Xg(Og),d6=Xg(y3);function h6(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},V.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function p6(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},V.createElement("path",{d:"M0 0h32v4.2H0z"}))}function g6(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},V.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function m6(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function y6(){return V.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},V.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ns=({children:e,className:n,...r})=>V.createElement("button",{type:"button",className:_n(["react-flow__controls-button",n]),...r},e);ns.displayName="ControlButton";const v6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Yg=({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:c,onZoomOut:u,onFitView:l,onInteractiveChange:f,className:p,children:d,position:g="bottom-left"})=>{const m=Zt(),[x,b]=A.useState(!1),{isInteractive:_,minZoomReached:E,maxZoomReached:v}=mt(v6,cn),{zoomIn:N,zoomOut:R,fitView:T}=bf();if(A.useEffect(()=>{b(!0)},[]),!x)return null;const P=()=>{N(),c?.()},H=()=>{R(),u?.()},G=()=>{T(s),l?.()},J=()=>{m.setState({nodesDraggable:!_,nodesConnectable:!_,elementsSelectable:!_}),f?.(!_)};return V.createElement(og,{className:_n(["react-flow__controls",p]),position:g,style:e,"data-testid":"rf__controls"},n&&V.createElement(V.Fragment,null,V.createElement(ns,{onClick:P,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},V.createElement(h6,null)),V.createElement(ns,{onClick:H,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},V.createElement(p6,null))),r&&V.createElement(ns,{className:"react-flow__controls-fitview",onClick:G,title:"fit view","aria-label":"fit view"},V.createElement(g6,null)),o&&V.createElement(ns,{className:"react-flow__controls-interactive",onClick:J,title:"toggle interactivity","aria-label":"toggle interactivity"},_?V.createElement(y6,null):V.createElement(m6,null)),d)};Yg.displayName="Controls";var D6=A.memo(Yg),yr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(yr||(yr={}));function _6({color:e,dimensions:n,lineWidth:r}){return V.createElement("path",{stroke:e,strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function x6({color:e,radius:n}){return V.createElement("circle",{cx:n,cy:n,r:n,fill:e})}const w6={[yr.Dots]:"#91919a",[yr.Lines]:"#eee",[yr.Cross]:"#e2e2e2"},b6={[yr.Dots]:1,[yr.Lines]:1,[yr.Cross]:6},C6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Zg({id:e,variant:n=yr.Dots,gap:r=20,size:o,lineWidth:s=1,offset:c=2,color:u,style:l,className:f}){const p=A.useRef(null),{transform:d,patternId:g}=mt(C6,cn),m=u||w6[n],x=o||b6[n],b=n===yr.Dots,_=n===yr.Cross,E=Array.isArray(r)?r:[r,r],v=[E[0]*d[2]||1,E[1]*d[2]||1],N=x*d[2],R=_?[N,N]:v,T=b?[N/c,N/c]:[R[0]/c,R[1]/c];return V.createElement("svg",{className:_n(["react-flow__background",f]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},V.createElement("pattern",{id:g+e,x:d[0]%v[0],y:d[1]%v[1],width:v[0],height:v[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${T[0]},-${T[1]})`},b?V.createElement(x6,{color:m,radius:N/c}):V.createElement(_6,{dimensions:R,color:m,lineWidth:s})),V.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}Zg.displayName="Background";var E6=A.memo(Zg),ku={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */ku.exports;(function(e,n){(function(){var r,o="4.17.21",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",p=500,d="__lodash_placeholder__",g=1,m=2,x=4,b=1,_=2,E=1,v=2,N=4,R=8,T=16,P=32,H=64,G=128,J=256,$=512,Y=30,te="...",Q=800,Z=16,B=1,q=2,j=3,X=1/0,ie=9007199254740991,U=17976931348623157e292,oe=NaN,se=4294967295,le=se-1,ue=se>>>1,ge=[["ary",G],["bind",E],["bindKey",v],["curry",R],["curryRight",T],["flip",$],["partial",P],["partialRight",H],["rearg",J]],de="[object Arguments]",Fe="[object Array]",Be="[object AsyncFunction]",me="[object Boolean]",be="[object Date]",Te="[object DOMException]",xt="[object Error]",ht="[object Function]",jt="[object GeneratorFunction]",Qe="[object Map]",et="[object Number]",en="[object Null]",$e="[object Object]",_e="[object Promise]",kt="[object Proxy]",Bt="[object RegExp]",yt="[object Set]",Lt="[object String]",wt="[object Symbol]",tn="[object Undefined]",Kt="[object WeakMap]",In="[object WeakSet]",Rt="[object ArrayBuffer]",bt="[object DataView]",nn="[object Float32Array]",vt="[object Float64Array]",at="[object Int8Array]",Ot="[object Int16Array]",ln="[object Int32Array]",rn="[object Uint8Array]",Dt="[object Uint8ClampedArray]",Ct="[object Uint16Array]",on="[object Uint32Array]",_r=/\b__p \+= '';/g,fn=/\b(__p \+=) '' \+/g,Bn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xn=/&(?:amp|lt|gt|quot|#39);/g,Br=/[&<>"']/g,Ft=RegExp(xn.source),nr=RegExp(Br.source),Rr=/<%-([\s\S]+?)%>/g,Or=/<%([\s\S]+?)%>/g,xr=/<%=([\s\S]+?)%>/g,rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,dn=/^\w*$/,Pi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mr=/[\\^$.*+?()[\]{}|]/g,$i=RegExp(Mr.source),zr=/^\s+/,fi=/\s/,wn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rn=/\{\n\/\* \[wrapped with (.+)\] \*/,ji=/,? & /,ki=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Li=/[()=,{}\[\]\/\s]/,di=/\\(\\)?/g,qn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sn=/\w*$/,Hi=/^[-+]0x[0-9a-f]+$/i,qi=/^0b[01]+$/i,Vi=/^\[object .+?Constructor\]$/,Gi=/^0o[0-7]+$/i,Ui=/^(?:0|[1-9]\d*)$/,hn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ir=/($^)/,wr=/['\n\r\u2028\u2029\\]/g,Vn="\\ud800-\\udfff",Wi="\\u0300-\\u036f",br="\\ufe20-\\ufe2f",or="\\u20d0-\\u20ff",hi=Wi+br+or,Pr="\\u2700-\\u27bf",pn="a-z\\xdf-\\xf6\\xf8-\\xff",pi="\\xac\\xb1\\xd7\\xf7",Xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$r="\\u2000-\\u206f",vs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Eo="A-Z\\xc0-\\xd6\\xd8-\\xde",So="\\ufe0e\\ufe0f",jr=pi+Xi+$r+vs,Yi="[']",kr="["+Vn+"]",Zi="["+jr+"]",Lr="["+hi+"]",Hr="\\d+",Ki="["+Pr+"]",Ao="["+pn+"]",Fo="[^"+Vn+jr+Hr+Pr+pn+Eo+"]",qr="\\ud83c[\\udffb-\\udfff]",Ds="(?:"+Lr+"|"+qr+")",No="[^"+Vn+"]",gi="(?:\\ud83c[\\udde6-\\uddff]){2}",sr="[\\ud800-\\udbff][\\udc00-\\udfff]",gn="["+Eo+"]",To="\\u200d",Io="(?:"+Ao+"|"+Fo+")",bn="(?:"+gn+"|"+Fo+")",Bo="(?:"+Yi+"(?:d|ll|m|re|s|t|ve))?",Ro="(?:"+Yi+"(?:D|LL|M|RE|S|T|VE))?",Oo=Ds+"?",Vr="["+So+"]?",Ji="(?:"+To+"(?:"+[No,gi,sr].join("|")+")"+Vr+Oo+")*",On="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mo=Vr+Oo+Ji,Gr="(?:"+[Ki,gi,sr].join("|")+")"+Mo,Qi="(?:"+[No+Lr+"?",Lr,gi,sr,kr].join("|")+")",yi=RegExp(Yi,"g"),ar=RegExp(Lr,"g"),Gn=RegExp(qr+"(?="+qr+")|"+Qi+Mo,"g"),zo=RegExp([gn+"?"+Ao+"+"+Bo+"(?="+[Zi,gn,"$"].join("|")+")",bn+"+"+Ro+"(?="+[Zi,gn+Io,"$"].join("|")+")",gn+"?"+Io+"+"+Bo,gn+"+"+Ro,mi,On,Hr,Gr].join("|"),"g"),eo=RegExp("["+To+Vn+hi+So+"]"),Ur=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,to=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_s=-1,tt={};tt[nn]=tt[vt]=tt[at]=tt[Ot]=tt[ln]=tt[rn]=tt[Dt]=tt[Ct]=tt[on]=!0,tt[de]=tt[Fe]=tt[Rt]=tt[me]=tt[bt]=tt[be]=tt[xt]=tt[ht]=tt[Qe]=tt[et]=tt[$e]=tt[Bt]=tt[yt]=tt[Lt]=tt[Kt]=!1;var Ze={};Ze[de]=Ze[Fe]=Ze[Rt]=Ze[bt]=Ze[me]=Ze[be]=Ze[nn]=Ze[vt]=Ze[at]=Ze[Ot]=Ze[ln]=Ze[Qe]=Ze[et]=Ze[$e]=Ze[Bt]=Ze[yt]=Ze[Lt]=Ze[wt]=Ze[rn]=Ze[Dt]=Ze[Ct]=Ze[on]=!0,Ze[xt]=Ze[ht]=Ze[Kt]=!1;var I={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},F={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fe=parseFloat,he=parseInt,we=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt,Ne=typeof self=="object"&&self&&self.Object===Object&&self,ye=we||Ne||Function("return this")(),Ce=n&&!n.nodeType&&n,Xe=Ce&&!0&&e&&!e.nodeType&&e,it=Xe&&Xe.exports===Ce,ut=it&&we.process,nt=function(){try{var k=Xe&&Xe.require&&Xe.require("util").types;return k||ut&&ut.binding&&ut.binding("util")}catch{}}(),Ht=nt&&nt.isArrayBuffer,Cn=nt&&nt.isDate,Un=nt&&nt.isMap,Cr=nt&&nt.isRegExp,xs=nt&&nt.isSet,no=nt&&nt.isTypedArray;function Gt(k,K,W){switch(W.length){case 0:return k.call(K);case 1:return k.call(K,W[0]);case 2:return k.call(K,W[0],W[1]);case 3:return k.call(K,W[0],W[1],W[2])}return k.apply(K,W)}function Fm(k,K,W,ve){for(var Ie=-1,Ke=k==null?0:k.length;++Ie<Ke;){var qt=k[Ie];K(ve,qt,W(qt),k)}return ve}function Wn(k,K){for(var W=-1,ve=k==null?0:k.length;++W<ve&&K(k[W],W,k)!==!1;);return k}function Nm(k,K){for(var W=k==null?0:k.length;W--&&K(k[W],W,k)!==!1;);return k}function kf(k,K){for(var W=-1,ve=k==null?0:k.length;++W<ve;)if(!K(k[W],W,k))return!1;return!0}function vi(k,K){for(var W=-1,ve=k==null?0:k.length,Ie=0,Ke=[];++W<ve;){var qt=k[W];K(qt,W,k)&&(Ke[Ie++]=qt)}return Ke}function pa(k,K){var W=k==null?0:k.length;return!!W&&Po(k,K,0)>-1}function rc(k,K,W){for(var ve=-1,Ie=k==null?0:k.length;++ve<Ie;)if(W(K,k[ve]))return!0;return!1}function pt(k,K){for(var W=-1,ve=k==null?0:k.length,Ie=Array(ve);++W<ve;)Ie[W]=K(k[W],W,k);return Ie}function Di(k,K){for(var W=-1,ve=K.length,Ie=k.length;++W<ve;)k[Ie+W]=K[W];return k}function ic(k,K,W,ve){var Ie=-1,Ke=k==null?0:k.length;for(ve&&Ke&&(W=k[++Ie]);++Ie<Ke;)W=K(W,k[Ie],Ie,k);return W}function Tm(k,K,W,ve){var Ie=k==null?0:k.length;for(ve&&Ie&&(W=k[--Ie]);Ie--;)W=K(W,k[Ie],Ie,k);return W}function oc(k,K){for(var W=-1,ve=k==null?0:k.length;++W<ve;)if(K(k[W],W,k))return!0;return!1}var Im=sc("length");function Bm(k){return k.split("")}function Rm(k){return k.match(ki)||[]}function Lf(k,K,W){var ve;return W(k,function(Ie,Ke,qt){if(K(Ie,Ke,qt))return ve=Ke,!1}),ve}function ga(k,K,W,ve){for(var Ie=k.length,Ke=W+(ve?1:-1);ve?Ke--:++Ke<Ie;)if(K(k[Ke],Ke,k))return Ke;return-1}function Po(k,K,W){return K===K?Gm(k,K,W):ga(k,Hf,W)}function Om(k,K,W,ve){for(var Ie=W-1,Ke=k.length;++Ie<Ke;)if(ve(k[Ie],K))return Ie;return-1}function Hf(k){return k!==k}function qf(k,K){var W=k==null?0:k.length;return W?uc(k,K)/W:oe}function sc(k){return function(K){return K==null?r:K[k]}}function ac(k){return function(K){return k==null?r:k[K]}}function Vf(k,K,W,ve,Ie){return Ie(k,function(Ke,qt,st){W=ve?(ve=!1,Ke):K(W,Ke,qt,st)}),W}function Mm(k,K){var W=k.length;for(k.sort(K);W--;)k[W]=k[W].value;return k}function uc(k,K){for(var W,ve=-1,Ie=k.length;++ve<Ie;){var Ke=K(k[ve]);Ke!==r&&(W=W===r?Ke:W+Ke)}return W}function cc(k,K){for(var W=-1,ve=Array(k);++W<k;)ve[W]=K(W);return ve}function zm(k,K){return pt(K,function(W){return[W,k[W]]})}function Gf(k){return k&&k.slice(0,Yf(k)+1).replace(zr,"")}function Mn(k){return function(K){return k(K)}}function lc(k,K){return pt(K,function(W){return k[W]})}function ws(k,K){return k.has(K)}function Uf(k,K){for(var W=-1,ve=k.length;++W<ve&&Po(K,k[W],0)>-1;);return W}function Wf(k,K){for(var W=k.length;W--&&Po(K,k[W],0)>-1;);return W}function Pm(k,K){for(var W=k.length,ve=0;W--;)k[W]===K&&++ve;return ve}var $m=ac(I),jm=ac(y);function km(k){return"\\"+z[k]}function Lm(k,K){return k==null?r:k[K]}function $o(k){return eo.test(k)}function Hm(k){return Ur.test(k)}function qm(k){for(var K,W=[];!(K=k.next()).done;)W.push(K.value);return W}function fc(k){var K=-1,W=Array(k.size);return k.forEach(function(ve,Ie){W[++K]=[Ie,ve]}),W}function Xf(k,K){return function(W){return k(K(W))}}function _i(k,K){for(var W=-1,ve=k.length,Ie=0,Ke=[];++W<ve;){var qt=k[W];(qt===K||qt===d)&&(k[W]=d,Ke[Ie++]=W)}return Ke}function ma(k){var K=-1,W=Array(k.size);return k.forEach(function(ve){W[++K]=ve}),W}function Vm(k){var K=-1,W=Array(k.size);return k.forEach(function(ve){W[++K]=[ve,ve]}),W}function Gm(k,K,W){for(var ve=W-1,Ie=k.length;++ve<Ie;)if(k[ve]===K)return ve;return-1}function Um(k,K,W){for(var ve=W+1;ve--;)if(k[ve]===K)return ve;return ve}function jo(k){return $o(k)?Xm(k):Im(k)}function ur(k){return $o(k)?Ym(k):Bm(k)}function Yf(k){for(var K=k.length;K--&&fi.test(k.charAt(K)););return K}var Wm=ac(F);function Xm(k){for(var K=Gn.lastIndex=0;Gn.test(k);)++K;return K}function Ym(k){return k.match(Gn)||[]}function Zm(k){return k.match(zo)||[]}var Km=function k(K){K=K==null?ye:ko.defaults(ye.Object(),K,ko.pick(ye,to));var W=K.Array,ve=K.Date,Ie=K.Error,Ke=K.Function,qt=K.Math,st=K.Object,dc=K.RegExp,Jm=K.String,Xn=K.TypeError,ya=W.prototype,Qm=Ke.prototype,Lo=st.prototype,va=K["__core-js_shared__"],Da=Qm.toString,rt=Lo.hasOwnProperty,e1=0,Zf=function(){var t=/[^.]+$/.exec(va&&va.keys&&va.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_a=Lo.toString,t1=Da.call(st),n1=ye._,r1=dc("^"+Da.call(rt).replace(Mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xa=it?K.Buffer:r,xi=K.Symbol,wa=K.Uint8Array,Kf=xa?xa.allocUnsafe:r,ba=Xf(st.getPrototypeOf,st),Jf=st.create,Qf=Lo.propertyIsEnumerable,Ca=ya.splice,ed=xi?xi.isConcatSpreadable:r,bs=xi?xi.iterator:r,ro=xi?xi.toStringTag:r,Ea=function(){try{var t=uo(st,"defineProperty");return t({},"",{}),t}catch{}}(),i1=K.clearTimeout!==ye.clearTimeout&&K.clearTimeout,o1=ve&&ve.now!==ye.Date.now&&ve.now,s1=K.setTimeout!==ye.setTimeout&&K.setTimeout,Sa=qt.ceil,Aa=qt.floor,hc=st.getOwnPropertySymbols,a1=xa?xa.isBuffer:r,td=K.isFinite,u1=ya.join,c1=Xf(st.keys,st),Vt=qt.max,an=qt.min,l1=ve.now,f1=K.parseInt,nd=qt.random,d1=ya.reverse,pc=uo(K,"DataView"),Cs=uo(K,"Map"),gc=uo(K,"Promise"),Ho=uo(K,"Set"),Es=uo(K,"WeakMap"),Ss=uo(st,"create"),Fa=Es&&new Es,qo={},h1=co(pc),p1=co(Cs),g1=co(gc),m1=co(Ho),y1=co(Es),Na=xi?xi.prototype:r,As=Na?Na.valueOf:r,rd=Na?Na.toString:r;function w(t){if(Et(t)&&!Re(t)&&!(t instanceof Ge)){if(t instanceof Yn)return t;if(rt.call(t,"__wrapped__"))return ih(t)}return new Yn(t)}var Vo=function(){function t(){}return function(i){if(!_t(i))return{};if(Jf)return Jf(i);t.prototype=i;var a=new t;return t.prototype=r,a}}();function Ta(){}function Yn(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}w.templateSettings={escape:Rr,evaluate:Or,interpolate:xr,variable:"",imports:{_:w}},w.prototype=Ta.prototype,w.prototype.constructor=w,Yn.prototype=Vo(Ta.prototype),Yn.prototype.constructor=Yn;function Ge(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function v1(){var t=new Ge(this.__wrapped__);return t.__actions__=En(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=En(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=En(this.__views__),t}function D1(){if(this.__filtered__){var t=new Ge(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function _1(){var t=this.__wrapped__.value(),i=this.__dir__,a=Re(t),h=i<0,D=a?t.length:0,C=By(0,D,this.__views__),O=C.start,M=C.end,L=M-O,ee=h?M:O-1,ne=this.__iteratees__,ae=ne.length,pe=0,De=an(L,this.__takeCount__);if(!a||!h&&D==L&&De==L)return Ad(t,this.__actions__);var Se=[];e:for(;L--&&pe<De;){ee+=i;for(var ze=-1,Ae=t[ee];++ze<ae;){var Ve=ne[ze],We=Ve.iteratee,$n=Ve.type,vn=We(Ae);if($n==q)Ae=vn;else if(!vn){if($n==B)continue e;break e}}Se[pe++]=Ae}return Se}Ge.prototype=Vo(Ta.prototype),Ge.prototype.constructor=Ge;function io(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function x1(){this.__data__=Ss?Ss(null):{},this.size=0}function w1(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function b1(t){var i=this.__data__;if(Ss){var a=i[t];return a===f?r:a}return rt.call(i,t)?i[t]:r}function C1(t){var i=this.__data__;return Ss?i[t]!==r:rt.call(i,t)}function E1(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Ss&&i===r?f:i,this}io.prototype.clear=x1,io.prototype.delete=w1,io.prototype.get=b1,io.prototype.has=C1,io.prototype.set=E1;function Wr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function S1(){this.__data__=[],this.size=0}function A1(t){var i=this.__data__,a=Ia(i,t);if(a<0)return!1;var h=i.length-1;return a==h?i.pop():Ca.call(i,a,1),--this.size,!0}function F1(t){var i=this.__data__,a=Ia(i,t);return a<0?r:i[a][1]}function N1(t){return Ia(this.__data__,t)>-1}function T1(t,i){var a=this.__data__,h=Ia(a,t);return h<0?(++this.size,a.push([t,i])):a[h][1]=i,this}Wr.prototype.clear=S1,Wr.prototype.delete=A1,Wr.prototype.get=F1,Wr.prototype.has=N1,Wr.prototype.set=T1;function Xr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function I1(){this.size=0,this.__data__={hash:new io,map:new(Cs||Wr),string:new io}}function B1(t){var i=qa(this,t).delete(t);return this.size-=i?1:0,i}function R1(t){return qa(this,t).get(t)}function O1(t){return qa(this,t).has(t)}function M1(t,i){var a=qa(this,t),h=a.size;return a.set(t,i),this.size+=a.size==h?0:1,this}Xr.prototype.clear=I1,Xr.prototype.delete=B1,Xr.prototype.get=R1,Xr.prototype.has=O1,Xr.prototype.set=M1;function oo(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new Xr;++i<a;)this.add(t[i])}function z1(t){return this.__data__.set(t,f),this}function P1(t){return this.__data__.has(t)}oo.prototype.add=oo.prototype.push=z1,oo.prototype.has=P1;function cr(t){var i=this.__data__=new Wr(t);this.size=i.size}function $1(){this.__data__=new Wr,this.size=0}function j1(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}function k1(t){return this.__data__.get(t)}function L1(t){return this.__data__.has(t)}function H1(t,i){var a=this.__data__;if(a instanceof Wr){var h=a.__data__;if(!Cs||h.length<s-1)return h.push([t,i]),this.size=++a.size,this;a=this.__data__=new Xr(h)}return a.set(t,i),this.size=a.size,this}cr.prototype.clear=$1,cr.prototype.delete=j1,cr.prototype.get=k1,cr.prototype.has=L1,cr.prototype.set=H1;function id(t,i){var a=Re(t),h=!a&&lo(t),D=!a&&!h&&Si(t),C=!a&&!h&&!D&&Xo(t),O=a||h||D||C,M=O?cc(t.length,Jm):[],L=M.length;for(var ee in t)(i||rt.call(t,ee))&&!(O&&(ee=="length"||D&&(ee=="offset"||ee=="parent")||C&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||Jr(ee,L)))&&M.push(ee);return M}function od(t){var i=t.length;return i?t[Sc(0,i-1)]:r}function q1(t,i){return Va(En(t),so(i,0,t.length))}function V1(t){return Va(En(t))}function mc(t,i,a){(a!==r&&!lr(t[i],a)||a===r&&!(i in t))&&Yr(t,i,a)}function Fs(t,i,a){var h=t[i];(!(rt.call(t,i)&&lr(h,a))||a===r&&!(i in t))&&Yr(t,i,a)}function Ia(t,i){for(var a=t.length;a--;)if(lr(t[a][0],i))return a;return-1}function G1(t,i,a,h){return wi(t,function(D,C,O){i(h,D,a(D),O)}),h}function sd(t,i){return t&&Sr(i,Ut(i),t)}function U1(t,i){return t&&Sr(i,An(i),t)}function Yr(t,i,a){i=="__proto__"&&Ea?Ea(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function yc(t,i){for(var a=-1,h=i.length,D=W(h),C=t==null;++a<h;)D[a]=C?r:Kc(t,i[a]);return D}function so(t,i,a){return t===t&&(a!==r&&(t=t<=a?t:a),i!==r&&(t=t>=i?t:i)),t}function Zn(t,i,a,h,D,C){var O,M=i&g,L=i&m,ee=i&x;if(a&&(O=D?a(t,h,D,C):a(t)),O!==r)return O;if(!_t(t))return t;var ne=Re(t);if(ne){if(O=Oy(t),!M)return En(t,O)}else{var ae=un(t),pe=ae==ht||ae==jt;if(Si(t))return Td(t,M);if(ae==$e||ae==de||pe&&!D){if(O=L||pe?{}:Yd(t),!M)return L?by(t,U1(O,t)):wy(t,sd(O,t))}else{if(!Ze[ae])return D?t:{};O=My(t,ae,M)}}C||(C=new cr);var De=C.get(t);if(De)return De;C.set(t,O),Ch(t)?t.forEach(function(Ae){O.add(Zn(Ae,i,a,Ae,t,C))}):wh(t)&&t.forEach(function(Ae,Ve){O.set(Ve,Zn(Ae,i,a,Ve,t,C))});var Se=ee?L?Pc:zc:L?An:Ut,ze=ne?r:Se(t);return Wn(ze||t,function(Ae,Ve){ze&&(Ve=Ae,Ae=t[Ve]),Fs(O,Ve,Zn(Ae,i,a,Ve,t,C))}),O}function W1(t){var i=Ut(t);return function(a){return ad(a,t,i)}}function ad(t,i,a){var h=a.length;if(t==null)return!h;for(t=st(t);h--;){var D=a[h],C=i[D],O=t[D];if(O===r&&!(D in t)||!C(O))return!1}return!0}function ud(t,i,a){if(typeof t!="function")throw new Xn(u);return Ms(function(){t.apply(r,a)},i)}function Ns(t,i,a,h){var D=-1,C=pa,O=!0,M=t.length,L=[],ee=i.length;if(!M)return L;a&&(i=pt(i,Mn(a))),h?(C=rc,O=!1):i.length>=s&&(C=ws,O=!1,i=new oo(i));e:for(;++D<M;){var ne=t[D],ae=a==null?ne:a(ne);if(ne=h||ne!==0?ne:0,O&&ae===ae){for(var pe=ee;pe--;)if(i[pe]===ae)continue e;L.push(ne)}else C(i,ae,h)||L.push(ne)}return L}var wi=Md(Er),cd=Md(Dc,!0);function X1(t,i){var a=!0;return wi(t,function(h,D,C){return a=!!i(h,D,C),a}),a}function Ba(t,i,a){for(var h=-1,D=t.length;++h<D;){var C=t[h],O=i(C);if(O!=null&&(M===r?O===O&&!Pn(O):a(O,M)))var M=O,L=C}return L}function Y1(t,i,a,h){var D=t.length;for(a=Me(a),a<0&&(a=-a>D?0:D+a),h=h===r||h>D?D:Me(h),h<0&&(h+=D),h=a>h?0:Sh(h);a<h;)t[a++]=i;return t}function ld(t,i){var a=[];return wi(t,function(h,D,C){i(h,D,C)&&a.push(h)}),a}function Jt(t,i,a,h,D){var C=-1,O=t.length;for(a||(a=Py),D||(D=[]);++C<O;){var M=t[C];i>0&&a(M)?i>1?Jt(M,i-1,a,h,D):Di(D,M):h||(D[D.length]=M)}return D}var vc=zd(),fd=zd(!0);function Er(t,i){return t&&vc(t,i,Ut)}function Dc(t,i){return t&&fd(t,i,Ut)}function Ra(t,i){return vi(i,function(a){return Qr(t[a])})}function ao(t,i){i=Ci(i,t);for(var a=0,h=i.length;t!=null&&a<h;)t=t[Ar(i[a++])];return a&&a==h?t:r}function dd(t,i,a){var h=i(t);return Re(t)?h:Di(h,a(t))}function mn(t){return t==null?t===r?tn:en:ro&&ro in st(t)?Iy(t):Vy(t)}function _c(t,i){return t>i}function Z1(t,i){return t!=null&&rt.call(t,i)}function K1(t,i){return t!=null&&i in st(t)}function J1(t,i,a){return t>=an(i,a)&&t<Vt(i,a)}function xc(t,i,a){for(var h=a?rc:pa,D=t[0].length,C=t.length,O=C,M=W(C),L=1/0,ee=[];O--;){var ne=t[O];O&&i&&(ne=pt(ne,Mn(i))),L=an(ne.length,L),M[O]=!a&&(i||D>=120&&ne.length>=120)?new oo(O&&ne):r}ne=t[0];var ae=-1,pe=M[0];e:for(;++ae<D&&ee.length<L;){var De=ne[ae],Se=i?i(De):De;if(De=a||De!==0?De:0,!(pe?ws(pe,Se):h(ee,Se,a))){for(O=C;--O;){var ze=M[O];if(!(ze?ws(ze,Se):h(t[O],Se,a)))continue e}pe&&pe.push(Se),ee.push(De)}}return ee}function Q1(t,i,a,h){return Er(t,function(D,C,O){i(h,a(D),C,O)}),h}function Ts(t,i,a){i=Ci(i,t),t=Qd(t,i);var h=t==null?t:t[Ar(Jn(i))];return h==null?r:Gt(h,t,a)}function hd(t){return Et(t)&&mn(t)==de}function ey(t){return Et(t)&&mn(t)==Rt}function ty(t){return Et(t)&&mn(t)==be}function Is(t,i,a,h,D){return t===i?!0:t==null||i==null||!Et(t)&&!Et(i)?t!==t&&i!==i:ny(t,i,a,h,Is,D)}function ny(t,i,a,h,D,C){var O=Re(t),M=Re(i),L=O?Fe:un(t),ee=M?Fe:un(i);L=L==de?$e:L,ee=ee==de?$e:ee;var ne=L==$e,ae=ee==$e,pe=L==ee;if(pe&&Si(t)){if(!Si(i))return!1;O=!0,ne=!1}if(pe&&!ne)return C||(C=new cr),O||Xo(t)?Ud(t,i,a,h,D,C):Ny(t,i,L,a,h,D,C);if(!(a&b)){var De=ne&&rt.call(t,"__wrapped__"),Se=ae&&rt.call(i,"__wrapped__");if(De||Se){var ze=De?t.value():t,Ae=Se?i.value():i;return C||(C=new cr),D(ze,Ae,a,h,C)}}return pe?(C||(C=new cr),Ty(t,i,a,h,D,C)):!1}function ry(t){return Et(t)&&un(t)==Qe}function wc(t,i,a,h){var D=a.length,C=D,O=!h;if(t==null)return!C;for(t=st(t);D--;){var M=a[D];if(O&&M[2]?M[1]!==t[M[0]]:!(M[0]in t))return!1}for(;++D<C;){M=a[D];var L=M[0],ee=t[L],ne=M[1];if(O&&M[2]){if(ee===r&&!(L in t))return!1}else{var ae=new cr;if(h)var pe=h(ee,ne,L,t,i,ae);if(!(pe===r?Is(ne,ee,b|_,h,ae):pe))return!1}}return!0}function pd(t){if(!_t(t)||jy(t))return!1;var i=Qr(t)?r1:Vi;return i.test(co(t))}function iy(t){return Et(t)&&mn(t)==Bt}function oy(t){return Et(t)&&un(t)==yt}function sy(t){return Et(t)&&Za(t.length)&&!!tt[mn(t)]}function gd(t){return typeof t=="function"?t:t==null?Fn:typeof t=="object"?Re(t)?vd(t[0],t[1]):yd(t):Ph(t)}function bc(t){if(!Os(t))return c1(t);var i=[];for(var a in st(t))rt.call(t,a)&&a!="constructor"&&i.push(a);return i}function ay(t){if(!_t(t))return qy(t);var i=Os(t),a=[];for(var h in t)h=="constructor"&&(i||!rt.call(t,h))||a.push(h);return a}function Cc(t,i){return t<i}function md(t,i){var a=-1,h=Sn(t)?W(t.length):[];return wi(t,function(D,C,O){h[++a]=i(D,C,O)}),h}function yd(t){var i=jc(t);return i.length==1&&i[0][2]?Kd(i[0][0],i[0][1]):function(a){return a===t||wc(a,t,i)}}function vd(t,i){return Lc(t)&&Zd(i)?Kd(Ar(t),i):function(a){var h=Kc(a,t);return h===r&&h===i?Jc(a,t):Is(i,h,b|_)}}function Oa(t,i,a,h,D){t!==i&&vc(i,function(C,O){if(D||(D=new cr),_t(C))uy(t,i,O,a,Oa,h,D);else{var M=h?h(qc(t,O),C,O+"",t,i,D):r;M===r&&(M=C),mc(t,O,M)}},An)}function uy(t,i,a,h,D,C,O){var M=qc(t,a),L=qc(i,a),ee=O.get(L);if(ee){mc(t,a,ee);return}var ne=C?C(M,L,a+"",t,i,O):r,ae=ne===r;if(ae){var pe=Re(L),De=!pe&&Si(L),Se=!pe&&!De&&Xo(L);ne=L,pe||De||Se?Re(M)?ne=M:Nt(M)?ne=En(M):De?(ae=!1,ne=Td(L,!0)):Se?(ae=!1,ne=Id(L,!0)):ne=[]:zs(L)||lo(L)?(ne=M,lo(M)?ne=Ah(M):(!_t(M)||Qr(M))&&(ne=Yd(L))):ae=!1}ae&&(O.set(L,ne),D(ne,L,h,C,O),O.delete(L)),mc(t,a,ne)}function Dd(t,i){var a=t.length;if(a)return i+=i<0?a:0,Jr(i,a)?t[i]:r}function _d(t,i,a){i.length?i=pt(i,function(C){return Re(C)?function(O){return ao(O,C.length===1?C[0]:C)}:C}):i=[Fn];var h=-1;i=pt(i,Mn(Ee()));var D=md(t,function(C,O,M){var L=pt(i,function(ee){return ee(C)});return{criteria:L,index:++h,value:C}});return Mm(D,function(C,O){return xy(C,O,a)})}function cy(t,i){return xd(t,i,function(a,h){return Jc(t,h)})}function xd(t,i,a){for(var h=-1,D=i.length,C={};++h<D;){var O=i[h],M=ao(t,O);a(M,O)&&Bs(C,Ci(O,t),M)}return C}function ly(t){return function(i){return ao(i,t)}}function Ec(t,i,a,h){var D=h?Om:Po,C=-1,O=i.length,M=t;for(t===i&&(i=En(i)),a&&(M=pt(t,Mn(a)));++C<O;)for(var L=0,ee=i[C],ne=a?a(ee):ee;(L=D(M,ne,L,h))>-1;)M!==t&&Ca.call(M,L,1),Ca.call(t,L,1);return t}function wd(t,i){for(var a=t?i.length:0,h=a-1;a--;){var D=i[a];if(a==h||D!==C){var C=D;Jr(D)?Ca.call(t,D,1):Nc(t,D)}}return t}function Sc(t,i){return t+Aa(nd()*(i-t+1))}function fy(t,i,a,h){for(var D=-1,C=Vt(Sa((i-t)/(a||1)),0),O=W(C);C--;)O[h?C:++D]=t,t+=a;return O}function Ac(t,i){var a="";if(!t||i<1||i>ie)return a;do i%2&&(a+=t),i=Aa(i/2),i&&(t+=t);while(i);return a}function je(t,i){return Vc(Jd(t,i,Fn),t+"")}function dy(t){return od(Yo(t))}function hy(t,i){var a=Yo(t);return Va(a,so(i,0,a.length))}function Bs(t,i,a,h){if(!_t(t))return t;i=Ci(i,t);for(var D=-1,C=i.length,O=C-1,M=t;M!=null&&++D<C;){var L=Ar(i[D]),ee=a;if(L==="__proto__"||L==="constructor"||L==="prototype")return t;if(D!=O){var ne=M[L];ee=h?h(ne,L,M):r,ee===r&&(ee=_t(ne)?ne:Jr(i[D+1])?[]:{})}Fs(M,L,ee),M=M[L]}return t}var bd=Fa?function(t,i){return Fa.set(t,i),t}:Fn,py=Ea?function(t,i){return Ea(t,"toString",{configurable:!0,enumerable:!1,value:el(i),writable:!0})}:Fn;function gy(t){return Va(Yo(t))}function Kn(t,i,a){var h=-1,D=t.length;i<0&&(i=-i>D?0:D+i),a=a>D?D:a,a<0&&(a+=D),D=i>a?0:a-i>>>0,i>>>=0;for(var C=W(D);++h<D;)C[h]=t[h+i];return C}function my(t,i){var a;return wi(t,function(h,D,C){return a=i(h,D,C),!a}),!!a}function Ma(t,i,a){var h=0,D=t==null?h:t.length;if(typeof i=="number"&&i===i&&D<=ue){for(;h<D;){var C=h+D>>>1,O=t[C];O!==null&&!Pn(O)&&(a?O<=i:O<i)?h=C+1:D=C}return D}return Fc(t,i,Fn,a)}function Fc(t,i,a,h){var D=0,C=t==null?0:t.length;if(C===0)return 0;i=a(i);for(var O=i!==i,M=i===null,L=Pn(i),ee=i===r;D<C;){var ne=Aa((D+C)/2),ae=a(t[ne]),pe=ae!==r,De=ae===null,Se=ae===ae,ze=Pn(ae);if(O)var Ae=h||Se;else ee?Ae=Se&&(h||pe):M?Ae=Se&&pe&&(h||!De):L?Ae=Se&&pe&&!De&&(h||!ze):De||ze?Ae=!1:Ae=h?ae<=i:ae<i;Ae?D=ne+1:C=ne}return an(C,le)}function Cd(t,i){for(var a=-1,h=t.length,D=0,C=[];++a<h;){var O=t[a],M=i?i(O):O;if(!a||!lr(M,L)){var L=M;C[D++]=O===0?0:O}}return C}function Ed(t){return typeof t=="number"?t:Pn(t)?oe:+t}function zn(t){if(typeof t=="string")return t;if(Re(t))return pt(t,zn)+"";if(Pn(t))return rd?rd.call(t):"";var i=t+"";return i=="0"&&1/t==-X?"-0":i}function bi(t,i,a){var h=-1,D=pa,C=t.length,O=!0,M=[],L=M;if(a)O=!1,D=rc;else if(C>=s){var ee=i?null:Ay(t);if(ee)return ma(ee);O=!1,D=ws,L=new oo}else L=i?[]:M;e:for(;++h<C;){var ne=t[h],ae=i?i(ne):ne;if(ne=a||ne!==0?ne:0,O&&ae===ae){for(var pe=L.length;pe--;)if(L[pe]===ae)continue e;i&&L.push(ae),M.push(ne)}else D(L,ae,a)||(L!==M&&L.push(ae),M.push(ne))}return M}function Nc(t,i){return i=Ci(i,t),t=Qd(t,i),t==null||delete t[Ar(Jn(i))]}function Sd(t,i,a,h){return Bs(t,i,a(ao(t,i)),h)}function za(t,i,a,h){for(var D=t.length,C=h?D:-1;(h?C--:++C<D)&&i(t[C],C,t););return a?Kn(t,h?0:C,h?C+1:D):Kn(t,h?C+1:0,h?D:C)}function Ad(t,i){var a=t;return a instanceof Ge&&(a=a.value()),ic(i,function(h,D){return D.func.apply(D.thisArg,Di([h],D.args))},a)}function Tc(t,i,a){var h=t.length;if(h<2)return h?bi(t[0]):[];for(var D=-1,C=W(h);++D<h;)for(var O=t[D],M=-1;++M<h;)M!=D&&(C[D]=Ns(C[D]||O,t[M],i,a));return bi(Jt(C,1),i,a)}function Fd(t,i,a){for(var h=-1,D=t.length,C=i.length,O={};++h<D;){var M=h<C?i[h]:r;a(O,t[h],M)}return O}function Ic(t){return Nt(t)?t:[]}function Bc(t){return typeof t=="function"?t:Fn}function Ci(t,i){return Re(t)?t:Lc(t,i)?[t]:rh(Je(t))}var yy=je;function Ei(t,i,a){var h=t.length;return a=a===r?h:a,!i&&a>=h?t:Kn(t,i,a)}var Nd=i1||function(t){return ye.clearTimeout(t)};function Td(t,i){if(i)return t.slice();var a=t.length,h=Kf?Kf(a):new t.constructor(a);return t.copy(h),h}function Rc(t){var i=new t.constructor(t.byteLength);return new wa(i).set(new wa(t)),i}function vy(t,i){var a=i?Rc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function Dy(t){var i=new t.constructor(t.source,sn.exec(t));return i.lastIndex=t.lastIndex,i}function _y(t){return As?st(As.call(t)):{}}function Id(t,i){var a=i?Rc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Bd(t,i){if(t!==i){var a=t!==r,h=t===null,D=t===t,C=Pn(t),O=i!==r,M=i===null,L=i===i,ee=Pn(i);if(!M&&!ee&&!C&&t>i||C&&O&&L&&!M&&!ee||h&&O&&L||!a&&L||!D)return 1;if(!h&&!C&&!ee&&t<i||ee&&a&&D&&!h&&!C||M&&a&&D||!O&&D||!L)return-1}return 0}function xy(t,i,a){for(var h=-1,D=t.criteria,C=i.criteria,O=D.length,M=a.length;++h<O;){var L=Bd(D[h],C[h]);if(L){if(h>=M)return L;var ee=a[h];return L*(ee=="desc"?-1:1)}}return t.index-i.index}function Rd(t,i,a,h){for(var D=-1,C=t.length,O=a.length,M=-1,L=i.length,ee=Vt(C-O,0),ne=W(L+ee),ae=!h;++M<L;)ne[M]=i[M];for(;++D<O;)(ae||D<C)&&(ne[a[D]]=t[D]);for(;ee--;)ne[M++]=t[D++];return ne}function Od(t,i,a,h){for(var D=-1,C=t.length,O=-1,M=a.length,L=-1,ee=i.length,ne=Vt(C-M,0),ae=W(ne+ee),pe=!h;++D<ne;)ae[D]=t[D];for(var De=D;++L<ee;)ae[De+L]=i[L];for(;++O<M;)(pe||D<C)&&(ae[De+a[O]]=t[D++]);return ae}function En(t,i){var a=-1,h=t.length;for(i||(i=W(h));++a<h;)i[a]=t[a];return i}function Sr(t,i,a,h){var D=!a;a||(a={});for(var C=-1,O=i.length;++C<O;){var M=i[C],L=h?h(a[M],t[M],M,a,t):r;L===r&&(L=t[M]),D?Yr(a,M,L):Fs(a,M,L)}return a}function wy(t,i){return Sr(t,kc(t),i)}function by(t,i){return Sr(t,Wd(t),i)}function Pa(t,i){return function(a,h){var D=Re(a)?Fm:G1,C=i?i():{};return D(a,t,Ee(h,2),C)}}function Go(t){return je(function(i,a){var h=-1,D=a.length,C=D>1?a[D-1]:r,O=D>2?a[2]:r;for(C=t.length>3&&typeof C=="function"?(D--,C):r,O&&yn(a[0],a[1],O)&&(C=D<3?r:C,D=1),i=st(i);++h<D;){var M=a[h];M&&t(i,M,h,C)}return i})}function Md(t,i){return function(a,h){if(a==null)return a;if(!Sn(a))return t(a,h);for(var D=a.length,C=i?D:-1,O=st(a);(i?C--:++C<D)&&h(O[C],C,O)!==!1;);return a}}function zd(t){return function(i,a,h){for(var D=-1,C=st(i),O=h(i),M=O.length;M--;){var L=O[t?M:++D];if(a(C[L],L,C)===!1)break}return i}}function Cy(t,i,a){var h=i&E,D=Rs(t);function C(){var O=this&&this!==ye&&this instanceof C?D:t;return O.apply(h?a:this,arguments)}return C}function Pd(t){return function(i){i=Je(i);var a=$o(i)?ur(i):r,h=a?a[0]:i.charAt(0),D=a?Ei(a,1).join(""):i.slice(1);return h[t]()+D}}function Uo(t){return function(i){return ic(Mh(Oh(i).replace(yi,"")),t,"")}}function Rs(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=Vo(t.prototype),h=t.apply(a,i);return _t(h)?h:a}}function Ey(t,i,a){var h=Rs(t);function D(){for(var C=arguments.length,O=W(C),M=C,L=Wo(D);M--;)O[M]=arguments[M];var ee=C<3&&O[0]!==L&&O[C-1]!==L?[]:_i(O,L);if(C-=ee.length,C<a)return Hd(t,i,$a,D.placeholder,r,O,ee,r,r,a-C);var ne=this&&this!==ye&&this instanceof D?h:t;return Gt(ne,this,O)}return D}function $d(t){return function(i,a,h){var D=st(i);if(!Sn(i)){var C=Ee(a,3);i=Ut(i),a=function(M){return C(D[M],M,D)}}var O=t(i,a,h);return O>-1?D[C?i[O]:O]:r}}function jd(t){return Kr(function(i){var a=i.length,h=a,D=Yn.prototype.thru;for(t&&i.reverse();h--;){var C=i[h];if(typeof C!="function")throw new Xn(u);if(D&&!O&&Ha(C)=="wrapper")var O=new Yn([],!0)}for(h=O?h:a;++h<a;){C=i[h];var M=Ha(C),L=M=="wrapper"?$c(C):r;L&&Hc(L[0])&&L[1]==(G|R|P|J)&&!L[4].length&&L[9]==1?O=O[Ha(L[0])].apply(O,L[3]):O=C.length==1&&Hc(C)?O[M]():O.thru(C)}return function(){var ee=arguments,ne=ee[0];if(O&&ee.length==1&&Re(ne))return O.plant(ne).value();for(var ae=0,pe=a?i[ae].apply(this,ee):ne;++ae<a;)pe=i[ae].call(this,pe);return pe}})}function $a(t,i,a,h,D,C,O,M,L,ee){var ne=i&G,ae=i&E,pe=i&v,De=i&(R|T),Se=i&$,ze=pe?r:Rs(t);function Ae(){for(var Ve=arguments.length,We=W(Ve),$n=Ve;$n--;)We[$n]=arguments[$n];if(De)var vn=Wo(Ae),jn=Pm(We,vn);if(h&&(We=Rd(We,h,D,De)),C&&(We=Od(We,C,O,De)),Ve-=jn,De&&Ve<ee){var Tt=_i(We,vn);return Hd(t,i,$a,Ae.placeholder,a,We,Tt,M,L,ee-Ve)}var fr=ae?a:this,ti=pe?fr[t]:t;return Ve=We.length,M?We=Gy(We,M):Se&&Ve>1&&We.reverse(),ne&&L<Ve&&(We.length=L),this&&this!==ye&&this instanceof Ae&&(ti=ze||Rs(ti)),ti.apply(fr,We)}return Ae}function kd(t,i){return function(a,h){return Q1(a,t,i(h),{})}}function ja(t,i){return function(a,h){var D;if(a===r&&h===r)return i;if(a!==r&&(D=a),h!==r){if(D===r)return h;typeof a=="string"||typeof h=="string"?(a=zn(a),h=zn(h)):(a=Ed(a),h=Ed(h)),D=t(a,h)}return D}}function Oc(t){return Kr(function(i){return i=pt(i,Mn(Ee())),je(function(a){var h=this;return t(i,function(D){return Gt(D,h,a)})})})}function ka(t,i){i=i===r?" ":zn(i);var a=i.length;if(a<2)return a?Ac(i,t):i;var h=Ac(i,Sa(t/jo(i)));return $o(i)?Ei(ur(h),0,t).join(""):h.slice(0,t)}function Sy(t,i,a,h){var D=i&E,C=Rs(t);function O(){for(var M=-1,L=arguments.length,ee=-1,ne=h.length,ae=W(ne+L),pe=this&&this!==ye&&this instanceof O?C:t;++ee<ne;)ae[ee]=h[ee];for(;L--;)ae[ee++]=arguments[++M];return Gt(pe,D?a:this,ae)}return O}function Ld(t){return function(i,a,h){return h&&typeof h!="number"&&yn(i,a,h)&&(a=h=r),i=ei(i),a===r?(a=i,i=0):a=ei(a),h=h===r?i<a?1:-1:ei(h),fy(i,a,h,t)}}function La(t){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Qn(i),a=Qn(a)),t(i,a)}}function Hd(t,i,a,h,D,C,O,M,L,ee){var ne=i&R,ae=ne?O:r,pe=ne?r:O,De=ne?C:r,Se=ne?r:C;i|=ne?P:H,i&=~(ne?H:P),i&N||(i&=~(E|v));var ze=[t,i,D,De,ae,Se,pe,M,L,ee],Ae=a.apply(r,ze);return Hc(t)&&eh(Ae,ze),Ae.placeholder=h,th(Ae,t,i)}function Mc(t){var i=qt[t];return function(a,h){if(a=Qn(a),h=h==null?0:an(Me(h),292),h&&td(a)){var D=(Je(a)+"e").split("e"),C=i(D[0]+"e"+(+D[1]+h));return D=(Je(C)+"e").split("e"),+(D[0]+"e"+(+D[1]-h))}return i(a)}}var Ay=Ho&&1/ma(new Ho([,-0]))[1]==X?function(t){return new Ho(t)}:rl;function qd(t){return function(i){var a=un(i);return a==Qe?fc(i):a==yt?Vm(i):zm(i,t(i))}}function Zr(t,i,a,h,D,C,O,M){var L=i&v;if(!L&&typeof t!="function")throw new Xn(u);var ee=h?h.length:0;if(ee||(i&=~(P|H),h=D=r),O=O===r?O:Vt(Me(O),0),M=M===r?M:Me(M),ee-=D?D.length:0,i&H){var ne=h,ae=D;h=D=r}var pe=L?r:$c(t),De=[t,i,a,h,D,ne,ae,C,O,M];if(pe&&Hy(De,pe),t=De[0],i=De[1],a=De[2],h=De[3],D=De[4],M=De[9]=De[9]===r?L?0:t.length:Vt(De[9]-ee,0),!M&&i&(R|T)&&(i&=~(R|T)),!i||i==E)var Se=Cy(t,i,a);else i==R||i==T?Se=Ey(t,i,M):(i==P||i==(E|P))&&!D.length?Se=Sy(t,i,a,h):Se=$a.apply(r,De);var ze=pe?bd:eh;return th(ze(Se,De),t,i)}function Vd(t,i,a,h){return t===r||lr(t,Lo[a])&&!rt.call(h,a)?i:t}function Gd(t,i,a,h,D,C){return _t(t)&&_t(i)&&(C.set(i,t),Oa(t,i,r,Gd,C),C.delete(i)),t}function Fy(t){return zs(t)?r:t}function Ud(t,i,a,h,D,C){var O=a&b,M=t.length,L=i.length;if(M!=L&&!(O&&L>M))return!1;var ee=C.get(t),ne=C.get(i);if(ee&&ne)return ee==i&&ne==t;var ae=-1,pe=!0,De=a&_?new oo:r;for(C.set(t,i),C.set(i,t);++ae<M;){var Se=t[ae],ze=i[ae];if(h)var Ae=O?h(ze,Se,ae,i,t,C):h(Se,ze,ae,t,i,C);if(Ae!==r){if(Ae)continue;pe=!1;break}if(De){if(!oc(i,function(Ve,We){if(!ws(De,We)&&(Se===Ve||D(Se,Ve,a,h,C)))return De.push(We)})){pe=!1;break}}else if(!(Se===ze||D(Se,ze,a,h,C))){pe=!1;break}}return C.delete(t),C.delete(i),pe}function Ny(t,i,a,h,D,C,O){switch(a){case bt:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Rt:return!(t.byteLength!=i.byteLength||!C(new wa(t),new wa(i)));case me:case be:case et:return lr(+t,+i);case xt:return t.name==i.name&&t.message==i.message;case Bt:case Lt:return t==i+"";case Qe:var M=fc;case yt:var L=h&b;if(M||(M=ma),t.size!=i.size&&!L)return!1;var ee=O.get(t);if(ee)return ee==i;h|=_,O.set(t,i);var ne=Ud(M(t),M(i),h,D,C,O);return O.delete(t),ne;case wt:if(As)return As.call(t)==As.call(i)}return!1}function Ty(t,i,a,h,D,C){var O=a&b,M=zc(t),L=M.length,ee=zc(i),ne=ee.length;if(L!=ne&&!O)return!1;for(var ae=L;ae--;){var pe=M[ae];if(!(O?pe in i:rt.call(i,pe)))return!1}var De=C.get(t),Se=C.get(i);if(De&&Se)return De==i&&Se==t;var ze=!0;C.set(t,i),C.set(i,t);for(var Ae=O;++ae<L;){pe=M[ae];var Ve=t[pe],We=i[pe];if(h)var $n=O?h(We,Ve,pe,i,t,C):h(Ve,We,pe,t,i,C);if(!($n===r?Ve===We||D(Ve,We,a,h,C):$n)){ze=!1;break}Ae||(Ae=pe=="constructor")}if(ze&&!Ae){var vn=t.constructor,jn=i.constructor;vn!=jn&&"constructor"in t&&"constructor"in i&&!(typeof vn=="function"&&vn instanceof vn&&typeof jn=="function"&&jn instanceof jn)&&(ze=!1)}return C.delete(t),C.delete(i),ze}function Kr(t){return Vc(Jd(t,r,ah),t+"")}function zc(t){return dd(t,Ut,kc)}function Pc(t){return dd(t,An,Wd)}var $c=Fa?function(t){return Fa.get(t)}:rl;function Ha(t){for(var i=t.name+"",a=qo[i],h=rt.call(qo,i)?a.length:0;h--;){var D=a[h],C=D.func;if(C==null||C==t)return D.name}return i}function Wo(t){var i=rt.call(w,"placeholder")?w:t;return i.placeholder}function Ee(){var t=w.iteratee||tl;return t=t===tl?gd:t,arguments.length?t(arguments[0],arguments[1]):t}function qa(t,i){var a=t.__data__;return $y(i)?a[typeof i=="string"?"string":"hash"]:a.map}function jc(t){for(var i=Ut(t),a=i.length;a--;){var h=i[a],D=t[h];i[a]=[h,D,Zd(D)]}return i}function uo(t,i){var a=Lm(t,i);return pd(a)?a:r}function Iy(t){var i=rt.call(t,ro),a=t[ro];try{t[ro]=r;var h=!0}catch{}var D=_a.call(t);return h&&(i?t[ro]=a:delete t[ro]),D}var kc=hc?function(t){return t==null?[]:(t=st(t),vi(hc(t),function(i){return Qf.call(t,i)}))}:il,Wd=hc?function(t){for(var i=[];t;)Di(i,kc(t)),t=ba(t);return i}:il,un=mn;(pc&&un(new pc(new ArrayBuffer(1)))!=bt||Cs&&un(new Cs)!=Qe||gc&&un(gc.resolve())!=_e||Ho&&un(new Ho)!=yt||Es&&un(new Es)!=Kt)&&(un=function(t){var i=mn(t),a=i==$e?t.constructor:r,h=a?co(a):"";if(h)switch(h){case h1:return bt;case p1:return Qe;case g1:return _e;case m1:return yt;case y1:return Kt}return i});function By(t,i,a){for(var h=-1,D=a.length;++h<D;){var C=a[h],O=C.size;switch(C.type){case"drop":t+=O;break;case"dropRight":i-=O;break;case"take":i=an(i,t+O);break;case"takeRight":t=Vt(t,i-O);break}}return{start:t,end:i}}function Ry(t){var i=t.match(Rn);return i?i[1].split(ji):[]}function Xd(t,i,a){i=Ci(i,t);for(var h=-1,D=i.length,C=!1;++h<D;){var O=Ar(i[h]);if(!(C=t!=null&&a(t,O)))break;t=t[O]}return C||++h!=D?C:(D=t==null?0:t.length,!!D&&Za(D)&&Jr(O,D)&&(Re(t)||lo(t)))}function Oy(t){var i=t.length,a=new t.constructor(i);return i&&typeof t[0]=="string"&&rt.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Yd(t){return typeof t.constructor=="function"&&!Os(t)?Vo(ba(t)):{}}function My(t,i,a){var h=t.constructor;switch(i){case Rt:return Rc(t);case me:case be:return new h(+t);case bt:return vy(t,a);case nn:case vt:case at:case Ot:case ln:case rn:case Dt:case Ct:case on:return Id(t,a);case Qe:return new h;case et:case Lt:return new h(t);case Bt:return Dy(t);case yt:return new h;case wt:return _y(t)}}function zy(t,i){var a=i.length;if(!a)return t;var h=a-1;return i[h]=(a>1?"& ":"")+i[h],i=i.join(a>2?", ":" "),t.replace(wn,`{
/* [wrapped with `+i+`] */
`)}function Py(t){return Re(t)||lo(t)||!!(ed&&t&&t[ed])}function Jr(t,i){var a=typeof t;return i=i??ie,!!i&&(a=="number"||a!="symbol"&&Ui.test(t))&&t>-1&&t%1==0&&t<i}function yn(t,i,a){if(!_t(a))return!1;var h=typeof i;return(h=="number"?Sn(a)&&Jr(i,a.length):h=="string"&&i in a)?lr(a[i],t):!1}function Lc(t,i){if(Re(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Pn(t)?!0:dn.test(t)||!rr.test(t)||i!=null&&t in st(i)}function $y(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function Hc(t){var i=Ha(t),a=w[i];if(typeof a!="function"||!(i in Ge.prototype))return!1;if(t===a)return!0;var h=$c(a);return!!h&&t===h[0]}function jy(t){return!!Zf&&Zf in t}var ky=va?Qr:ol;function Os(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||Lo;return t===a}function Zd(t){return t===t&&!_t(t)}function Kd(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==r||t in st(a))}}function Ly(t){var i=Xa(t,function(h){return a.size===p&&a.clear(),h}),a=i.cache;return i}function Hy(t,i){var a=t[1],h=i[1],D=a|h,C=D<(E|v|G),O=h==G&&a==R||h==G&&a==J&&t[7].length<=i[8]||h==(G|J)&&i[7].length<=i[8]&&a==R;if(!(C||O))return t;h&E&&(t[2]=i[2],D|=a&E?0:N);var M=i[3];if(M){var L=t[3];t[3]=L?Rd(L,M,i[4]):M,t[4]=L?_i(t[3],d):i[4]}return M=i[5],M&&(L=t[5],t[5]=L?Od(L,M,i[6]):M,t[6]=L?_i(t[5],d):i[6]),M=i[7],M&&(t[7]=M),h&G&&(t[8]=t[8]==null?i[8]:an(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=D,t}function qy(t){var i=[];if(t!=null)for(var a in st(t))i.push(a);return i}function Vy(t){return _a.call(t)}function Jd(t,i,a){return i=Vt(i===r?t.length-1:i,0),function(){for(var h=arguments,D=-1,C=Vt(h.length-i,0),O=W(C);++D<C;)O[D]=h[i+D];D=-1;for(var M=W(i+1);++D<i;)M[D]=h[D];return M[i]=a(O),Gt(t,this,M)}}function Qd(t,i){return i.length<2?t:ao(t,Kn(i,0,-1))}function Gy(t,i){for(var a=t.length,h=an(i.length,a),D=En(t);h--;){var C=i[h];t[h]=Jr(C,a)?D[C]:r}return t}function qc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var eh=nh(bd),Ms=s1||function(t,i){return ye.setTimeout(t,i)},Vc=nh(py);function th(t,i,a){var h=i+"";return Vc(t,zy(h,Uy(Ry(h),a)))}function nh(t){var i=0,a=0;return function(){var h=l1(),D=Z-(h-a);if(a=h,D>0){if(++i>=Q)return arguments[0]}else i=0;return t.apply(r,arguments)}}function Va(t,i){var a=-1,h=t.length,D=h-1;for(i=i===r?h:i;++a<i;){var C=Sc(a,D),O=t[C];t[C]=t[a],t[a]=O}return t.length=i,t}var rh=Ly(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Pi,function(a,h,D,C){i.push(D?C.replace(di,"$1"):h||a)}),i});function Ar(t){if(typeof t=="string"||Pn(t))return t;var i=t+"";return i=="0"&&1/t==-X?"-0":i}function co(t){if(t!=null){try{return Da.call(t)}catch{}try{return t+""}catch{}}return""}function Uy(t,i){return Wn(ge,function(a){var h="_."+a[0];i&a[1]&&!pa(t,h)&&t.push(h)}),t.sort()}function ih(t){if(t instanceof Ge)return t.clone();var i=new Yn(t.__wrapped__,t.__chain__);return i.__actions__=En(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function Wy(t,i,a){(a?yn(t,i,a):i===r)?i=1:i=Vt(Me(i),0);var h=t==null?0:t.length;if(!h||i<1)return[];for(var D=0,C=0,O=W(Sa(h/i));D<h;)O[C++]=Kn(t,D,D+=i);return O}function Xy(t){for(var i=-1,a=t==null?0:t.length,h=0,D=[];++i<a;){var C=t[i];C&&(D[h++]=C)}return D}function Yy(){var t=arguments.length;if(!t)return[];for(var i=W(t-1),a=arguments[0],h=t;h--;)i[h-1]=arguments[h];return Di(Re(a)?En(a):[a],Jt(i,1))}var Zy=je(function(t,i){return Nt(t)?Ns(t,Jt(i,1,Nt,!0)):[]}),Ky=je(function(t,i){var a=Jn(i);return Nt(a)&&(a=r),Nt(t)?Ns(t,Jt(i,1,Nt,!0),Ee(a,2)):[]}),Jy=je(function(t,i){var a=Jn(i);return Nt(a)&&(a=r),Nt(t)?Ns(t,Jt(i,1,Nt,!0),r,a):[]});function Qy(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:Me(i),Kn(t,i<0?0:i,h)):[]}function ev(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:Me(i),i=h-i,Kn(t,0,i<0?0:i)):[]}function tv(t,i){return t&&t.length?za(t,Ee(i,3),!0,!0):[]}function nv(t,i){return t&&t.length?za(t,Ee(i,3),!0):[]}function rv(t,i,a,h){var D=t==null?0:t.length;return D?(a&&typeof a!="number"&&yn(t,i,a)&&(a=0,h=D),Y1(t,i,a,h)):[]}function oh(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var D=a==null?0:Me(a);return D<0&&(D=Vt(h+D,0)),ga(t,Ee(i,3),D)}function sh(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var D=h-1;return a!==r&&(D=Me(a),D=a<0?Vt(h+D,0):an(D,h-1)),ga(t,Ee(i,3),D,!0)}function ah(t){var i=t==null?0:t.length;return i?Jt(t,1):[]}function iv(t){var i=t==null?0:t.length;return i?Jt(t,X):[]}function ov(t,i){var a=t==null?0:t.length;return a?(i=i===r?1:Me(i),Jt(t,i)):[]}function sv(t){for(var i=-1,a=t==null?0:t.length,h={};++i<a;){var D=t[i];h[D[0]]=D[1]}return h}function uh(t){return t&&t.length?t[0]:r}function av(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var D=a==null?0:Me(a);return D<0&&(D=Vt(h+D,0)),Po(t,i,D)}function uv(t){var i=t==null?0:t.length;return i?Kn(t,0,-1):[]}var cv=je(function(t){var i=pt(t,Ic);return i.length&&i[0]===t[0]?xc(i):[]}),lv=je(function(t){var i=Jn(t),a=pt(t,Ic);return i===Jn(a)?i=r:a.pop(),a.length&&a[0]===t[0]?xc(a,Ee(i,2)):[]}),fv=je(function(t){var i=Jn(t),a=pt(t,Ic);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===t[0]?xc(a,r,i):[]});function dv(t,i){return t==null?"":u1.call(t,i)}function Jn(t){var i=t==null?0:t.length;return i?t[i-1]:r}function hv(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var D=h;return a!==r&&(D=Me(a),D=D<0?Vt(h+D,0):an(D,h-1)),i===i?Um(t,i,D):ga(t,Hf,D,!0)}function pv(t,i){return t&&t.length?Dd(t,Me(i)):r}var gv=je(ch);function ch(t,i){return t&&t.length&&i&&i.length?Ec(t,i):t}function mv(t,i,a){return t&&t.length&&i&&i.length?Ec(t,i,Ee(a,2)):t}function yv(t,i,a){return t&&t.length&&i&&i.length?Ec(t,i,r,a):t}var vv=Kr(function(t,i){var a=t==null?0:t.length,h=yc(t,i);return wd(t,pt(i,function(D){return Jr(D,a)?+D:D}).sort(Bd)),h});function Dv(t,i){var a=[];if(!(t&&t.length))return a;var h=-1,D=[],C=t.length;for(i=Ee(i,3);++h<C;){var O=t[h];i(O,h,t)&&(a.push(O),D.push(h))}return wd(t,D),a}function Gc(t){return t==null?t:d1.call(t)}function _v(t,i,a){var h=t==null?0:t.length;return h?(a&&typeof a!="number"&&yn(t,i,a)?(i=0,a=h):(i=i==null?0:Me(i),a=a===r?h:Me(a)),Kn(t,i,a)):[]}function xv(t,i){return Ma(t,i)}function wv(t,i,a){return Fc(t,i,Ee(a,2))}function bv(t,i){var a=t==null?0:t.length;if(a){var h=Ma(t,i);if(h<a&&lr(t[h],i))return h}return-1}function Cv(t,i){return Ma(t,i,!0)}function Ev(t,i,a){return Fc(t,i,Ee(a,2),!0)}function Sv(t,i){var a=t==null?0:t.length;if(a){var h=Ma(t,i,!0)-1;if(lr(t[h],i))return h}return-1}function Av(t){return t&&t.length?Cd(t):[]}function Fv(t,i){return t&&t.length?Cd(t,Ee(i,2)):[]}function Nv(t){var i=t==null?0:t.length;return i?Kn(t,1,i):[]}function Tv(t,i,a){return t&&t.length?(i=a||i===r?1:Me(i),Kn(t,0,i<0?0:i)):[]}function Iv(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:Me(i),i=h-i,Kn(t,i<0?0:i,h)):[]}function Bv(t,i){return t&&t.length?za(t,Ee(i,3),!1,!0):[]}function Rv(t,i){return t&&t.length?za(t,Ee(i,3)):[]}var Ov=je(function(t){return bi(Jt(t,1,Nt,!0))}),Mv=je(function(t){var i=Jn(t);return Nt(i)&&(i=r),bi(Jt(t,1,Nt,!0),Ee(i,2))}),zv=je(function(t){var i=Jn(t);return i=typeof i=="function"?i:r,bi(Jt(t,1,Nt,!0),r,i)});function Pv(t){return t&&t.length?bi(t):[]}function $v(t,i){return t&&t.length?bi(t,Ee(i,2)):[]}function jv(t,i){return i=typeof i=="function"?i:r,t&&t.length?bi(t,r,i):[]}function Uc(t){if(!(t&&t.length))return[];var i=0;return t=vi(t,function(a){if(Nt(a))return i=Vt(a.length,i),!0}),cc(i,function(a){return pt(t,sc(a))})}function lh(t,i){if(!(t&&t.length))return[];var a=Uc(t);return i==null?a:pt(a,function(h){return Gt(i,r,h)})}var kv=je(function(t,i){return Nt(t)?Ns(t,i):[]}),Lv=je(function(t){return Tc(vi(t,Nt))}),Hv=je(function(t){var i=Jn(t);return Nt(i)&&(i=r),Tc(vi(t,Nt),Ee(i,2))}),qv=je(function(t){var i=Jn(t);return i=typeof i=="function"?i:r,Tc(vi(t,Nt),r,i)}),Vv=je(Uc);function Gv(t,i){return Fd(t||[],i||[],Fs)}function Uv(t,i){return Fd(t||[],i||[],Bs)}var Wv=je(function(t){var i=t.length,a=i>1?t[i-1]:r;return a=typeof a=="function"?(t.pop(),a):r,lh(t,a)});function fh(t){var i=w(t);return i.__chain__=!0,i}function Xv(t,i){return i(t),t}function Ga(t,i){return i(t)}var Yv=Kr(function(t){var i=t.length,a=i?t[0]:0,h=this.__wrapped__,D=function(C){return yc(C,t)};return i>1||this.__actions__.length||!(h instanceof Ge)||!Jr(a)?this.thru(D):(h=h.slice(a,+a+(i?1:0)),h.__actions__.push({func:Ga,args:[D],thisArg:r}),new Yn(h,this.__chain__).thru(function(C){return i&&!C.length&&C.push(r),C}))});function Zv(){return fh(this)}function Kv(){return new Yn(this.value(),this.__chain__)}function Jv(){this.__values__===r&&(this.__values__=Eh(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function Qv(){return this}function eD(t){for(var i,a=this;a instanceof Ta;){var h=ih(a);h.__index__=0,h.__values__=r,i?D.__wrapped__=h:i=h;var D=h;a=a.__wrapped__}return D.__wrapped__=t,i}function tD(){var t=this.__wrapped__;if(t instanceof Ge){var i=t;return this.__actions__.length&&(i=new Ge(this)),i=i.reverse(),i.__actions__.push({func:Ga,args:[Gc],thisArg:r}),new Yn(i,this.__chain__)}return this.thru(Gc)}function nD(){return Ad(this.__wrapped__,this.__actions__)}var rD=Pa(function(t,i,a){rt.call(t,a)?++t[a]:Yr(t,a,1)});function iD(t,i,a){var h=Re(t)?kf:X1;return a&&yn(t,i,a)&&(i=r),h(t,Ee(i,3))}function oD(t,i){var a=Re(t)?vi:ld;return a(t,Ee(i,3))}var sD=$d(oh),aD=$d(sh);function uD(t,i){return Jt(Ua(t,i),1)}function cD(t,i){return Jt(Ua(t,i),X)}function lD(t,i,a){return a=a===r?1:Me(a),Jt(Ua(t,i),a)}function dh(t,i){var a=Re(t)?Wn:wi;return a(t,Ee(i,3))}function hh(t,i){var a=Re(t)?Nm:cd;return a(t,Ee(i,3))}var fD=Pa(function(t,i,a){rt.call(t,a)?t[a].push(i):Yr(t,a,[i])});function dD(t,i,a,h){t=Sn(t)?t:Yo(t),a=a&&!h?Me(a):0;var D=t.length;return a<0&&(a=Vt(D+a,0)),Ka(t)?a<=D&&t.indexOf(i,a)>-1:!!D&&Po(t,i,a)>-1}var hD=je(function(t,i,a){var h=-1,D=typeof i=="function",C=Sn(t)?W(t.length):[];return wi(t,function(O){C[++h]=D?Gt(i,O,a):Ts(O,i,a)}),C}),pD=Pa(function(t,i,a){Yr(t,a,i)});function Ua(t,i){var a=Re(t)?pt:md;return a(t,Ee(i,3))}function gD(t,i,a,h){return t==null?[]:(Re(i)||(i=i==null?[]:[i]),a=h?r:a,Re(a)||(a=a==null?[]:[a]),_d(t,i,a))}var mD=Pa(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]});function yD(t,i,a){var h=Re(t)?ic:Vf,D=arguments.length<3;return h(t,Ee(i,4),a,D,wi)}function vD(t,i,a){var h=Re(t)?Tm:Vf,D=arguments.length<3;return h(t,Ee(i,4),a,D,cd)}function DD(t,i){var a=Re(t)?vi:ld;return a(t,Ya(Ee(i,3)))}function _D(t){var i=Re(t)?od:dy;return i(t)}function xD(t,i,a){(a?yn(t,i,a):i===r)?i=1:i=Me(i);var h=Re(t)?q1:hy;return h(t,i)}function wD(t){var i=Re(t)?V1:gy;return i(t)}function bD(t){if(t==null)return 0;if(Sn(t))return Ka(t)?jo(t):t.length;var i=un(t);return i==Qe||i==yt?t.size:bc(t).length}function CD(t,i,a){var h=Re(t)?oc:my;return a&&yn(t,i,a)&&(i=r),h(t,Ee(i,3))}var ED=je(function(t,i){if(t==null)return[];var a=i.length;return a>1&&yn(t,i[0],i[1])?i=[]:a>2&&yn(i[0],i[1],i[2])&&(i=[i[0]]),_d(t,Jt(i,1),[])}),Wa=o1||function(){return ye.Date.now()};function SD(t,i){if(typeof i!="function")throw new Xn(u);return t=Me(t),function(){if(--t<1)return i.apply(this,arguments)}}function ph(t,i,a){return i=a?r:i,i=t&&i==null?t.length:i,Zr(t,G,r,r,r,r,i)}function gh(t,i){var a;if(typeof i!="function")throw new Xn(u);return t=Me(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=r),a}}var Wc=je(function(t,i,a){var h=E;if(a.length){var D=_i(a,Wo(Wc));h|=P}return Zr(t,h,i,a,D)}),mh=je(function(t,i,a){var h=E|v;if(a.length){var D=_i(a,Wo(mh));h|=P}return Zr(i,h,t,a,D)});function yh(t,i,a){i=a?r:i;var h=Zr(t,R,r,r,r,r,r,i);return h.placeholder=yh.placeholder,h}function vh(t,i,a){i=a?r:i;var h=Zr(t,T,r,r,r,r,r,i);return h.placeholder=vh.placeholder,h}function Dh(t,i,a){var h,D,C,O,M,L,ee=0,ne=!1,ae=!1,pe=!0;if(typeof t!="function")throw new Xn(u);i=Qn(i)||0,_t(a)&&(ne=!!a.leading,ae="maxWait"in a,C=ae?Vt(Qn(a.maxWait)||0,i):C,pe="trailing"in a?!!a.trailing:pe);function De(Tt){var fr=h,ti=D;return h=D=r,ee=Tt,O=t.apply(ti,fr),O}function Se(Tt){return ee=Tt,M=Ms(Ve,i),ne?De(Tt):O}function ze(Tt){var fr=Tt-L,ti=Tt-ee,$h=i-fr;return ae?an($h,C-ti):$h}function Ae(Tt){var fr=Tt-L,ti=Tt-ee;return L===r||fr>=i||fr<0||ae&&ti>=C}function Ve(){var Tt=Wa();if(Ae(Tt))return We(Tt);M=Ms(Ve,ze(Tt))}function We(Tt){return M=r,pe&&h?De(Tt):(h=D=r,O)}function $n(){M!==r&&Nd(M),ee=0,h=L=D=M=r}function vn(){return M===r?O:We(Wa())}function jn(){var Tt=Wa(),fr=Ae(Tt);if(h=arguments,D=this,L=Tt,fr){if(M===r)return Se(L);if(ae)return Nd(M),M=Ms(Ve,i),De(L)}return M===r&&(M=Ms(Ve,i)),O}return jn.cancel=$n,jn.flush=vn,jn}var AD=je(function(t,i){return ud(t,1,i)}),FD=je(function(t,i,a){return ud(t,Qn(i)||0,a)});function ND(t){return Zr(t,$)}function Xa(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new Xn(u);var a=function(){var h=arguments,D=i?i.apply(this,h):h[0],C=a.cache;if(C.has(D))return C.get(D);var O=t.apply(this,h);return a.cache=C.set(D,O)||C,O};return a.cache=new(Xa.Cache||Xr),a}Xa.Cache=Xr;function Ya(t){if(typeof t!="function")throw new Xn(u);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function TD(t){return gh(2,t)}var ID=yy(function(t,i){i=i.length==1&&Re(i[0])?pt(i[0],Mn(Ee())):pt(Jt(i,1),Mn(Ee()));var a=i.length;return je(function(h){for(var D=-1,C=an(h.length,a);++D<C;)h[D]=i[D].call(this,h[D]);return Gt(t,this,h)})}),Xc=je(function(t,i){var a=_i(i,Wo(Xc));return Zr(t,P,r,i,a)}),_h=je(function(t,i){var a=_i(i,Wo(_h));return Zr(t,H,r,i,a)}),BD=Kr(function(t,i){return Zr(t,J,r,r,r,i)});function RD(t,i){if(typeof t!="function")throw new Xn(u);return i=i===r?i:Me(i),je(t,i)}function OD(t,i){if(typeof t!="function")throw new Xn(u);return i=i==null?0:Vt(Me(i),0),je(function(a){var h=a[i],D=Ei(a,0,i);return h&&Di(D,h),Gt(t,this,D)})}function MD(t,i,a){var h=!0,D=!0;if(typeof t!="function")throw new Xn(u);return _t(a)&&(h="leading"in a?!!a.leading:h,D="trailing"in a?!!a.trailing:D),Dh(t,i,{leading:h,maxWait:i,trailing:D})}function zD(t){return ph(t,1)}function PD(t,i){return Xc(Bc(i),t)}function $D(){if(!arguments.length)return[];var t=arguments[0];return Re(t)?t:[t]}function jD(t){return Zn(t,x)}function kD(t,i){return i=typeof i=="function"?i:r,Zn(t,x,i)}function LD(t){return Zn(t,g|x)}function HD(t,i){return i=typeof i=="function"?i:r,Zn(t,g|x,i)}function qD(t,i){return i==null||ad(t,i,Ut(i))}function lr(t,i){return t===i||t!==t&&i!==i}var VD=La(_c),GD=La(function(t,i){return t>=i}),lo=hd(function(){return arguments}())?hd:function(t){return Et(t)&&rt.call(t,"callee")&&!Qf.call(t,"callee")},Re=W.isArray,UD=Ht?Mn(Ht):ey;function Sn(t){return t!=null&&Za(t.length)&&!Qr(t)}function Nt(t){return Et(t)&&Sn(t)}function WD(t){return t===!0||t===!1||Et(t)&&mn(t)==me}var Si=a1||ol,XD=Cn?Mn(Cn):ty;function YD(t){return Et(t)&&t.nodeType===1&&!zs(t)}function ZD(t){if(t==null)return!0;if(Sn(t)&&(Re(t)||typeof t=="string"||typeof t.splice=="function"||Si(t)||Xo(t)||lo(t)))return!t.length;var i=un(t);if(i==Qe||i==yt)return!t.size;if(Os(t))return!bc(t).length;for(var a in t)if(rt.call(t,a))return!1;return!0}function KD(t,i){return Is(t,i)}function JD(t,i,a){a=typeof a=="function"?a:r;var h=a?a(t,i):r;return h===r?Is(t,i,r,a):!!h}function Yc(t){if(!Et(t))return!1;var i=mn(t);return i==xt||i==Te||typeof t.message=="string"&&typeof t.name=="string"&&!zs(t)}function QD(t){return typeof t=="number"&&td(t)}function Qr(t){if(!_t(t))return!1;var i=mn(t);return i==ht||i==jt||i==Be||i==kt}function xh(t){return typeof t=="number"&&t==Me(t)}function Za(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ie}function _t(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function Et(t){return t!=null&&typeof t=="object"}var wh=Un?Mn(Un):ry;function e_(t,i){return t===i||wc(t,i,jc(i))}function t_(t,i,a){return a=typeof a=="function"?a:r,wc(t,i,jc(i),a)}function n_(t){return bh(t)&&t!=+t}function r_(t){if(ky(t))throw new Ie(c);return pd(t)}function i_(t){return t===null}function o_(t){return t==null}function bh(t){return typeof t=="number"||Et(t)&&mn(t)==et}function zs(t){if(!Et(t)||mn(t)!=$e)return!1;var i=ba(t);if(i===null)return!0;var a=rt.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&Da.call(a)==t1}var Zc=Cr?Mn(Cr):iy;function s_(t){return xh(t)&&t>=-ie&&t<=ie}var Ch=xs?Mn(xs):oy;function Ka(t){return typeof t=="string"||!Re(t)&&Et(t)&&mn(t)==Lt}function Pn(t){return typeof t=="symbol"||Et(t)&&mn(t)==wt}var Xo=no?Mn(no):sy;function a_(t){return t===r}function u_(t){return Et(t)&&un(t)==Kt}function c_(t){return Et(t)&&mn(t)==In}var l_=La(Cc),f_=La(function(t,i){return t<=i});function Eh(t){if(!t)return[];if(Sn(t))return Ka(t)?ur(t):En(t);if(bs&&t[bs])return qm(t[bs]());var i=un(t),a=i==Qe?fc:i==yt?ma:Yo;return a(t)}function ei(t){if(!t)return t===0?t:0;if(t=Qn(t),t===X||t===-X){var i=t<0?-1:1;return i*U}return t===t?t:0}function Me(t){var i=ei(t),a=i%1;return i===i?a?i-a:i:0}function Sh(t){return t?so(Me(t),0,se):0}function Qn(t){if(typeof t=="number")return t;if(Pn(t))return oe;if(_t(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=_t(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Gf(t);var a=qi.test(t);return a||Gi.test(t)?he(t.slice(2),a?2:8):Hi.test(t)?oe:+t}function Ah(t){return Sr(t,An(t))}function d_(t){return t?so(Me(t),-ie,ie):t===0?t:0}function Je(t){return t==null?"":zn(t)}var h_=Go(function(t,i){if(Os(i)||Sn(i)){Sr(i,Ut(i),t);return}for(var a in i)rt.call(i,a)&&Fs(t,a,i[a])}),Fh=Go(function(t,i){Sr(i,An(i),t)}),Ja=Go(function(t,i,a,h){Sr(i,An(i),t,h)}),p_=Go(function(t,i,a,h){Sr(i,Ut(i),t,h)}),g_=Kr(yc);function m_(t,i){var a=Vo(t);return i==null?a:sd(a,i)}var y_=je(function(t,i){t=st(t);var a=-1,h=i.length,D=h>2?i[2]:r;for(D&&yn(i[0],i[1],D)&&(h=1);++a<h;)for(var C=i[a],O=An(C),M=-1,L=O.length;++M<L;){var ee=O[M],ne=t[ee];(ne===r||lr(ne,Lo[ee])&&!rt.call(t,ee))&&(t[ee]=C[ee])}return t}),v_=je(function(t){return t.push(r,Gd),Gt(Nh,r,t)});function D_(t,i){return Lf(t,Ee(i,3),Er)}function __(t,i){return Lf(t,Ee(i,3),Dc)}function x_(t,i){return t==null?t:vc(t,Ee(i,3),An)}function w_(t,i){return t==null?t:fd(t,Ee(i,3),An)}function b_(t,i){return t&&Er(t,Ee(i,3))}function C_(t,i){return t&&Dc(t,Ee(i,3))}function E_(t){return t==null?[]:Ra(t,Ut(t))}function S_(t){return t==null?[]:Ra(t,An(t))}function Kc(t,i,a){var h=t==null?r:ao(t,i);return h===r?a:h}function A_(t,i){return t!=null&&Xd(t,i,Z1)}function Jc(t,i){return t!=null&&Xd(t,i,K1)}var F_=kd(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=_a.call(i)),t[i]=a},el(Fn)),N_=kd(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=_a.call(i)),rt.call(t,i)?t[i].push(a):t[i]=[a]},Ee),T_=je(Ts);function Ut(t){return Sn(t)?id(t):bc(t)}function An(t){return Sn(t)?id(t,!0):ay(t)}function I_(t,i){var a={};return i=Ee(i,3),Er(t,function(h,D,C){Yr(a,i(h,D,C),h)}),a}function B_(t,i){var a={};return i=Ee(i,3),Er(t,function(h,D,C){Yr(a,D,i(h,D,C))}),a}var R_=Go(function(t,i,a){Oa(t,i,a)}),Nh=Go(function(t,i,a,h){Oa(t,i,a,h)}),O_=Kr(function(t,i){var a={};if(t==null)return a;var h=!1;i=pt(i,function(C){return C=Ci(C,t),h||(h=C.length>1),C}),Sr(t,Pc(t),a),h&&(a=Zn(a,g|m|x,Fy));for(var D=i.length;D--;)Nc(a,i[D]);return a});function M_(t,i){return Th(t,Ya(Ee(i)))}var z_=Kr(function(t,i){return t==null?{}:cy(t,i)});function Th(t,i){if(t==null)return{};var a=pt(Pc(t),function(h){return[h]});return i=Ee(i),xd(t,a,function(h,D){return i(h,D[0])})}function P_(t,i,a){i=Ci(i,t);var h=-1,D=i.length;for(D||(D=1,t=r);++h<D;){var C=t==null?r:t[Ar(i[h])];C===r&&(h=D,C=a),t=Qr(C)?C.call(t):C}return t}function $_(t,i,a){return t==null?t:Bs(t,i,a)}function j_(t,i,a,h){return h=typeof h=="function"?h:r,t==null?t:Bs(t,i,a,h)}var Ih=qd(Ut),Bh=qd(An);function k_(t,i,a){var h=Re(t),D=h||Si(t)||Xo(t);if(i=Ee(i,4),a==null){var C=t&&t.constructor;D?a=h?new C:[]:_t(t)?a=Qr(C)?Vo(ba(t)):{}:a={}}return(D?Wn:Er)(t,function(O,M,L){return i(a,O,M,L)}),a}function L_(t,i){return t==null?!0:Nc(t,i)}function H_(t,i,a){return t==null?t:Sd(t,i,Bc(a))}function q_(t,i,a,h){return h=typeof h=="function"?h:r,t==null?t:Sd(t,i,Bc(a),h)}function Yo(t){return t==null?[]:lc(t,Ut(t))}function V_(t){return t==null?[]:lc(t,An(t))}function G_(t,i,a){return a===r&&(a=i,i=r),a!==r&&(a=Qn(a),a=a===a?a:0),i!==r&&(i=Qn(i),i=i===i?i:0),so(Qn(t),i,a)}function U_(t,i,a){return i=ei(i),a===r?(a=i,i=0):a=ei(a),t=Qn(t),J1(t,i,a)}function W_(t,i,a){if(a&&typeof a!="boolean"&&yn(t,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&i===r?(t=0,i=1):(t=ei(t),i===r?(i=t,t=0):i=ei(i)),t>i){var h=t;t=i,i=h}if(a||t%1||i%1){var D=nd();return an(t+D*(i-t+fe("1e-"+((D+"").length-1))),i)}return Sc(t,i)}var X_=Uo(function(t,i,a){return i=i.toLowerCase(),t+(a?Rh(i):i)});function Rh(t){return Qc(Je(t).toLowerCase())}function Oh(t){return t=Je(t),t&&t.replace(hn,$m).replace(ar,"")}function Y_(t,i,a){t=Je(t),i=zn(i);var h=t.length;a=a===r?h:so(Me(a),0,h);var D=a;return a-=i.length,a>=0&&t.slice(a,D)==i}function Z_(t){return t=Je(t),t&&nr.test(t)?t.replace(Br,jm):t}function K_(t){return t=Je(t),t&&$i.test(t)?t.replace(Mr,"\\$&"):t}var J_=Uo(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),Q_=Uo(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),ex=Pd("toLowerCase");function tx(t,i,a){t=Je(t),i=Me(i);var h=i?jo(t):0;if(!i||h>=i)return t;var D=(i-h)/2;return ka(Aa(D),a)+t+ka(Sa(D),a)}function nx(t,i,a){t=Je(t),i=Me(i);var h=i?jo(t):0;return i&&h<i?t+ka(i-h,a):t}function rx(t,i,a){t=Je(t),i=Me(i);var h=i?jo(t):0;return i&&h<i?ka(i-h,a)+t:t}function ix(t,i,a){return a||i==null?i=0:i&&(i=+i),f1(Je(t).replace(zr,""),i||0)}function ox(t,i,a){return(a?yn(t,i,a):i===r)?i=1:i=Me(i),Ac(Je(t),i)}function sx(){var t=arguments,i=Je(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var ax=Uo(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()});function ux(t,i,a){return a&&typeof a!="number"&&yn(t,i,a)&&(i=a=r),a=a===r?se:a>>>0,a?(t=Je(t),t&&(typeof i=="string"||i!=null&&!Zc(i))&&(i=zn(i),!i&&$o(t))?Ei(ur(t),0,a):t.split(i,a)):[]}var cx=Uo(function(t,i,a){return t+(a?" ":"")+Qc(i)});function lx(t,i,a){return t=Je(t),a=a==null?0:so(Me(a),0,t.length),i=zn(i),t.slice(a,a+i.length)==i}function fx(t,i,a){var h=w.templateSettings;a&&yn(t,i,a)&&(i=r),t=Je(t),i=Ja({},i,h,Vd);var D=Ja({},i.imports,h.imports,Vd),C=Ut(D),O=lc(D,C),M,L,ee=0,ne=i.interpolate||ir,ae="__p += '",pe=dc((i.escape||ir).source+"|"+ne.source+"|"+(ne===xr?qn:ir).source+"|"+(i.evaluate||ir).source+"|$","g"),De="//# sourceURL="+(rt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_s+"]")+`
`;t.replace(pe,function(Ae,Ve,We,$n,vn,jn){return We||(We=$n),ae+=t.slice(ee,jn).replace(wr,km),Ve&&(M=!0,ae+=`' +
__e(`+Ve+`) +
'`),vn&&(L=!0,ae+=`';
`+vn+`;
__p += '`),We&&(ae+=`' +
((__t = (`+We+`)) == null ? '' : __t) +
'`),ee=jn+Ae.length,Ae}),ae+=`';
`;var Se=rt.call(i,"variable")&&i.variable;if(!Se)ae=`with (obj) {
`+ae+`
}
`;else if(Li.test(Se))throw new Ie(l);ae=(L?ae.replace(_r,""):ae).replace(fn,"$1").replace(Bn,"$1;"),ae="function("+(Se||"obj")+`) {
`+(Se?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ae+`return __p
}`;var ze=zh(function(){return Ke(C,De+"return "+ae).apply(r,O)});if(ze.source=ae,Yc(ze))throw ze;return ze}function dx(t){return Je(t).toLowerCase()}function hx(t){return Je(t).toUpperCase()}function px(t,i,a){if(t=Je(t),t&&(a||i===r))return Gf(t);if(!t||!(i=zn(i)))return t;var h=ur(t),D=ur(i),C=Uf(h,D),O=Wf(h,D)+1;return Ei(h,C,O).join("")}function gx(t,i,a){if(t=Je(t),t&&(a||i===r))return t.slice(0,Yf(t)+1);if(!t||!(i=zn(i)))return t;var h=ur(t),D=Wf(h,ur(i))+1;return Ei(h,0,D).join("")}function mx(t,i,a){if(t=Je(t),t&&(a||i===r))return t.replace(zr,"");if(!t||!(i=zn(i)))return t;var h=ur(t),D=Uf(h,ur(i));return Ei(h,D).join("")}function yx(t,i){var a=Y,h=te;if(_t(i)){var D="separator"in i?i.separator:D;a="length"in i?Me(i.length):a,h="omission"in i?zn(i.omission):h}t=Je(t);var C=t.length;if($o(t)){var O=ur(t);C=O.length}if(a>=C)return t;var M=a-jo(h);if(M<1)return h;var L=O?Ei(O,0,M).join(""):t.slice(0,M);if(D===r)return L+h;if(O&&(M+=L.length-M),Zc(D)){if(t.slice(M).search(D)){var ee,ne=L;for(D.global||(D=dc(D.source,Je(sn.exec(D))+"g")),D.lastIndex=0;ee=D.exec(ne);)var ae=ee.index;L=L.slice(0,ae===r?M:ae)}}else if(t.indexOf(zn(D),M)!=M){var pe=L.lastIndexOf(D);pe>-1&&(L=L.slice(0,pe))}return L+h}function vx(t){return t=Je(t),t&&Ft.test(t)?t.replace(xn,Wm):t}var Dx=Uo(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),Qc=Pd("toUpperCase");function Mh(t,i,a){return t=Je(t),i=a?r:i,i===r?Hm(t)?Zm(t):Rm(t):t.match(i)||[]}var zh=je(function(t,i){try{return Gt(t,r,i)}catch(a){return Yc(a)?a:new Ie(a)}}),_x=Kr(function(t,i){return Wn(i,function(a){a=Ar(a),Yr(t,a,Wc(t[a],t))}),t});function xx(t){var i=t==null?0:t.length,a=Ee();return t=i?pt(t,function(h){if(typeof h[1]!="function")throw new Xn(u);return[a(h[0]),h[1]]}):[],je(function(h){for(var D=-1;++D<i;){var C=t[D];if(Gt(C[0],this,h))return Gt(C[1],this,h)}})}function wx(t){return W1(Zn(t,g))}function el(t){return function(){return t}}function bx(t,i){return t==null||t!==t?i:t}var Cx=jd(),Ex=jd(!0);function Fn(t){return t}function tl(t){return gd(typeof t=="function"?t:Zn(t,g))}function Sx(t){return yd(Zn(t,g))}function Ax(t,i){return vd(t,Zn(i,g))}var Fx=je(function(t,i){return function(a){return Ts(a,t,i)}}),Nx=je(function(t,i){return function(a){return Ts(t,a,i)}});function nl(t,i,a){var h=Ut(i),D=Ra(i,h);a==null&&!(_t(i)&&(D.length||!h.length))&&(a=i,i=t,t=this,D=Ra(i,Ut(i)));var C=!(_t(a)&&"chain"in a)||!!a.chain,O=Qr(t);return Wn(D,function(M){var L=i[M];t[M]=L,O&&(t.prototype[M]=function(){var ee=this.__chain__;if(C||ee){var ne=t(this.__wrapped__),ae=ne.__actions__=En(this.__actions__);return ae.push({func:L,args:arguments,thisArg:t}),ne.__chain__=ee,ne}return L.apply(t,Di([this.value()],arguments))})}),t}function Tx(){return ye._===this&&(ye._=n1),this}function rl(){}function Ix(t){return t=Me(t),je(function(i){return Dd(i,t)})}var Bx=Oc(pt),Rx=Oc(kf),Ox=Oc(oc);function Ph(t){return Lc(t)?sc(Ar(t)):ly(t)}function Mx(t){return function(i){return t==null?r:ao(t,i)}}var zx=Ld(),Px=Ld(!0);function il(){return[]}function ol(){return!1}function $x(){return{}}function jx(){return""}function kx(){return!0}function Lx(t,i){if(t=Me(t),t<1||t>ie)return[];var a=se,h=an(t,se);i=Ee(i),t-=se;for(var D=cc(h,i);++a<t;)i(a);return D}function Hx(t){return Re(t)?pt(t,Ar):Pn(t)?[t]:En(rh(Je(t)))}function qx(t){var i=++e1;return Je(t)+i}var Vx=ja(function(t,i){return t+i},0),Gx=Mc("ceil"),Ux=ja(function(t,i){return t/i},1),Wx=Mc("floor");function Xx(t){return t&&t.length?Ba(t,Fn,_c):r}function Yx(t,i){return t&&t.length?Ba(t,Ee(i,2),_c):r}function Zx(t){return qf(t,Fn)}function Kx(t,i){return qf(t,Ee(i,2))}function Jx(t){return t&&t.length?Ba(t,Fn,Cc):r}function Qx(t,i){return t&&t.length?Ba(t,Ee(i,2),Cc):r}var ew=ja(function(t,i){return t*i},1),tw=Mc("round"),nw=ja(function(t,i){return t-i},0);function rw(t){return t&&t.length?uc(t,Fn):0}function iw(t,i){return t&&t.length?uc(t,Ee(i,2)):0}return w.after=SD,w.ary=ph,w.assign=h_,w.assignIn=Fh,w.assignInWith=Ja,w.assignWith=p_,w.at=g_,w.before=gh,w.bind=Wc,w.bindAll=_x,w.bindKey=mh,w.castArray=$D,w.chain=fh,w.chunk=Wy,w.compact=Xy,w.concat=Yy,w.cond=xx,w.conforms=wx,w.constant=el,w.countBy=rD,w.create=m_,w.curry=yh,w.curryRight=vh,w.debounce=Dh,w.defaults=y_,w.defaultsDeep=v_,w.defer=AD,w.delay=FD,w.difference=Zy,w.differenceBy=Ky,w.differenceWith=Jy,w.drop=Qy,w.dropRight=ev,w.dropRightWhile=tv,w.dropWhile=nv,w.fill=rv,w.filter=oD,w.flatMap=uD,w.flatMapDeep=cD,w.flatMapDepth=lD,w.flatten=ah,w.flattenDeep=iv,w.flattenDepth=ov,w.flip=ND,w.flow=Cx,w.flowRight=Ex,w.fromPairs=sv,w.functions=E_,w.functionsIn=S_,w.groupBy=fD,w.initial=uv,w.intersection=cv,w.intersectionBy=lv,w.intersectionWith=fv,w.invert=F_,w.invertBy=N_,w.invokeMap=hD,w.iteratee=tl,w.keyBy=pD,w.keys=Ut,w.keysIn=An,w.map=Ua,w.mapKeys=I_,w.mapValues=B_,w.matches=Sx,w.matchesProperty=Ax,w.memoize=Xa,w.merge=R_,w.mergeWith=Nh,w.method=Fx,w.methodOf=Nx,w.mixin=nl,w.negate=Ya,w.nthArg=Ix,w.omit=O_,w.omitBy=M_,w.once=TD,w.orderBy=gD,w.over=Bx,w.overArgs=ID,w.overEvery=Rx,w.overSome=Ox,w.partial=Xc,w.partialRight=_h,w.partition=mD,w.pick=z_,w.pickBy=Th,w.property=Ph,w.propertyOf=Mx,w.pull=gv,w.pullAll=ch,w.pullAllBy=mv,w.pullAllWith=yv,w.pullAt=vv,w.range=zx,w.rangeRight=Px,w.rearg=BD,w.reject=DD,w.remove=Dv,w.rest=RD,w.reverse=Gc,w.sampleSize=xD,w.set=$_,w.setWith=j_,w.shuffle=wD,w.slice=_v,w.sortBy=ED,w.sortedUniq=Av,w.sortedUniqBy=Fv,w.split=ux,w.spread=OD,w.tail=Nv,w.take=Tv,w.takeRight=Iv,w.takeRightWhile=Bv,w.takeWhile=Rv,w.tap=Xv,w.throttle=MD,w.thru=Ga,w.toArray=Eh,w.toPairs=Ih,w.toPairsIn=Bh,w.toPath=Hx,w.toPlainObject=Ah,w.transform=k_,w.unary=zD,w.union=Ov,w.unionBy=Mv,w.unionWith=zv,w.uniq=Pv,w.uniqBy=$v,w.uniqWith=jv,w.unset=L_,w.unzip=Uc,w.unzipWith=lh,w.update=H_,w.updateWith=q_,w.values=Yo,w.valuesIn=V_,w.without=kv,w.words=Mh,w.wrap=PD,w.xor=Lv,w.xorBy=Hv,w.xorWith=qv,w.zip=Vv,w.zipObject=Gv,w.zipObjectDeep=Uv,w.zipWith=Wv,w.entries=Ih,w.entriesIn=Bh,w.extend=Fh,w.extendWith=Ja,nl(w,w),w.add=Vx,w.attempt=zh,w.camelCase=X_,w.capitalize=Rh,w.ceil=Gx,w.clamp=G_,w.clone=jD,w.cloneDeep=LD,w.cloneDeepWith=HD,w.cloneWith=kD,w.conformsTo=qD,w.deburr=Oh,w.defaultTo=bx,w.divide=Ux,w.endsWith=Y_,w.eq=lr,w.escape=Z_,w.escapeRegExp=K_,w.every=iD,w.find=sD,w.findIndex=oh,w.findKey=D_,w.findLast=aD,w.findLastIndex=sh,w.findLastKey=__,w.floor=Wx,w.forEach=dh,w.forEachRight=hh,w.forIn=x_,w.forInRight=w_,w.forOwn=b_,w.forOwnRight=C_,w.get=Kc,w.gt=VD,w.gte=GD,w.has=A_,w.hasIn=Jc,w.head=uh,w.identity=Fn,w.includes=dD,w.indexOf=av,w.inRange=U_,w.invoke=T_,w.isArguments=lo,w.isArray=Re,w.isArrayBuffer=UD,w.isArrayLike=Sn,w.isArrayLikeObject=Nt,w.isBoolean=WD,w.isBuffer=Si,w.isDate=XD,w.isElement=YD,w.isEmpty=ZD,w.isEqual=KD,w.isEqualWith=JD,w.isError=Yc,w.isFinite=QD,w.isFunction=Qr,w.isInteger=xh,w.isLength=Za,w.isMap=wh,w.isMatch=e_,w.isMatchWith=t_,w.isNaN=n_,w.isNative=r_,w.isNil=o_,w.isNull=i_,w.isNumber=bh,w.isObject=_t,w.isObjectLike=Et,w.isPlainObject=zs,w.isRegExp=Zc,w.isSafeInteger=s_,w.isSet=Ch,w.isString=Ka,w.isSymbol=Pn,w.isTypedArray=Xo,w.isUndefined=a_,w.isWeakMap=u_,w.isWeakSet=c_,w.join=dv,w.kebabCase=J_,w.last=Jn,w.lastIndexOf=hv,w.lowerCase=Q_,w.lowerFirst=ex,w.lt=l_,w.lte=f_,w.max=Xx,w.maxBy=Yx,w.mean=Zx,w.meanBy=Kx,w.min=Jx,w.minBy=Qx,w.stubArray=il,w.stubFalse=ol,w.stubObject=$x,w.stubString=jx,w.stubTrue=kx,w.multiply=ew,w.nth=pv,w.noConflict=Tx,w.noop=rl,w.now=Wa,w.pad=tx,w.padEnd=nx,w.padStart=rx,w.parseInt=ix,w.random=W_,w.reduce=yD,w.reduceRight=vD,w.repeat=ox,w.replace=sx,w.result=P_,w.round=tw,w.runInContext=k,w.sample=_D,w.size=bD,w.snakeCase=ax,w.some=CD,w.sortedIndex=xv,w.sortedIndexBy=wv,w.sortedIndexOf=bv,w.sortedLastIndex=Cv,w.sortedLastIndexBy=Ev,w.sortedLastIndexOf=Sv,w.startCase=cx,w.startsWith=lx,w.subtract=nw,w.sum=rw,w.sumBy=iw,w.template=fx,w.times=Lx,w.toFinite=ei,w.toInteger=Me,w.toLength=Sh,w.toLower=dx,w.toNumber=Qn,w.toSafeInteger=d_,w.toString=Je,w.toUpper=hx,w.trim=px,w.trimEnd=gx,w.trimStart=mx,w.truncate=yx,w.unescape=vx,w.uniqueId=qx,w.upperCase=Dx,w.upperFirst=Qc,w.each=dh,w.eachRight=hh,w.first=uh,nl(w,function(){var t={};return Er(w,function(i,a){rt.call(w.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),w.VERSION=o,Wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){w[t].placeholder=w}),Wn(["drop","take"],function(t,i){Ge.prototype[t]=function(a){a=a===r?1:Vt(Me(a),0);var h=this.__filtered__&&!i?new Ge(this):this.clone();return h.__filtered__?h.__takeCount__=an(a,h.__takeCount__):h.__views__.push({size:an(a,se),type:t+(h.__dir__<0?"Right":"")}),h},Ge.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),Wn(["filter","map","takeWhile"],function(t,i){var a=i+1,h=a==B||a==j;Ge.prototype[t]=function(D){var C=this.clone();return C.__iteratees__.push({iteratee:Ee(D,3),type:a}),C.__filtered__=C.__filtered__||h,C}}),Wn(["head","last"],function(t,i){var a="take"+(i?"Right":"");Ge.prototype[t]=function(){return this[a](1).value()[0]}}),Wn(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");Ge.prototype[t]=function(){return this.__filtered__?new Ge(this):this[a](1)}}),Ge.prototype.compact=function(){return this.filter(Fn)},Ge.prototype.find=function(t){return this.filter(t).head()},Ge.prototype.findLast=function(t){return this.reverse().find(t)},Ge.prototype.invokeMap=je(function(t,i){return typeof t=="function"?new Ge(this):this.map(function(a){return Ts(a,t,i)})}),Ge.prototype.reject=function(t){return this.filter(Ya(Ee(t)))},Ge.prototype.slice=function(t,i){t=Me(t);var a=this;return a.__filtered__&&(t>0||i<0)?new Ge(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==r&&(i=Me(i),a=i<0?a.dropRight(-i):a.take(i-t)),a)},Ge.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ge.prototype.toArray=function(){return this.take(se)},Er(Ge.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),D=w[h?"take"+(i=="last"?"Right":""):i],C=h||/^find/.test(i);D&&(w.prototype[i]=function(){var O=this.__wrapped__,M=h?[1]:arguments,L=O instanceof Ge,ee=M[0],ne=L||Re(O),ae=function(Ve){var We=D.apply(w,Di([Ve],M));return h&&pe?We[0]:We};ne&&a&&typeof ee=="function"&&ee.length!=1&&(L=ne=!1);var pe=this.__chain__,De=!!this.__actions__.length,Se=C&&!pe,ze=L&&!De;if(!C&&ne){O=ze?O:new Ge(this);var Ae=t.apply(O,M);return Ae.__actions__.push({func:Ga,args:[ae],thisArg:r}),new Yn(Ae,pe)}return Se&&ze?t.apply(this,M):(Ae=this.thru(ae),Se?h?Ae.value()[0]:Ae.value():Ae)})}),Wn(["pop","push","shift","sort","splice","unshift"],function(t){var i=ya[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",h=/^(?:pop|shift)$/.test(t);w.prototype[t]=function(){var D=arguments;if(h&&!this.__chain__){var C=this.value();return i.apply(Re(C)?C:[],D)}return this[a](function(O){return i.apply(Re(O)?O:[],D)})}}),Er(Ge.prototype,function(t,i){var a=w[i];if(a){var h=a.name+"";rt.call(qo,h)||(qo[h]=[]),qo[h].push({name:i,func:a})}}),qo[$a(r,v).name]=[{name:"wrapper",func:r}],Ge.prototype.clone=v1,Ge.prototype.reverse=D1,Ge.prototype.value=_1,w.prototype.at=Yv,w.prototype.chain=Zv,w.prototype.commit=Kv,w.prototype.next=Jv,w.prototype.plant=eD,w.prototype.reverse=tD,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=nD,w.prototype.first=w.prototype.head,bs&&(w.prototype[bs]=Qv),w},ko=Km();Xe?((Xe.exports=ko)._=ko,Ce._=ko):ye._=ko}).call(Qt)})(ku,ku.exports);var S6=ku.exports;const St=i0(S6),A6=navigator.platform.includes("Mac"),Rp={Ctrl:"",Backspace:"",Alt:""},wu={shortcut:e=>A6?Object.keys(Rp).reduce((n,r)=>n.replaceAll(r,Rp[r]),e):e},Op={},Lu=(e,n)=>{const[r,o]=A.useState(()=>Op?.[e]??n);return A.useEffect(()=>{Op[e]=r},[r]),[r,o]};function Mp(e,n=0){const r=performance.now(),o={};function s(){o.id=requestAnimationFrame(c=>{c-r>n?e():s()})}return s(),o}function zp(e){e.id&&cancelAnimationFrame(e.id)}function F6(e,n){const[r,o]=A.useState(e?"enter":"from"),s=A.useRef({}),[c,u]=A.useState(e);return A.useEffect(function(){return zp(s.current),e?(o("from"),u(!0),Mp(()=>{o("enter")})):(o("leave"),s.current=Mp(()=>{u(!1)},n)),()=>{zp(s.current)}},[e,n]),{stage:r,shouldMount:c}}function N6({state:e,timeout:n,children:r}){const{stage:o,shouldMount:s}=F6(e,n);return r(o,s)}const Gl=({className:e,...n})=>S.jsx("div",{className:Ye("grl-dn__graphCard",e),...n});Gl.__docgenInfo={description:"",methods:[],displayName:"GraphCard"};var bo=(e=>(e.Blue="var(--node-color-blue)",e.Purple="var(--node-color-purple)",e.Orange="var(--node-color-orange)",e.Green="var(--node-color-green)",e))(bo||{});const Sf=({icon:e,name:n,children:r,actions:o=[],disabled:s=!1,isSelected:c=!1,noBodyPadding:u=!1,color:l="primary",onNameChange:f,menuItems:p=[],status:d,diffStatus:g,compactMode:m,listMode:x,helper:b,details:_,detailsOpen:E=!1,detailsTitle:v="Details",onDetailsClose:N})=>{const[R,T]=A.useState(!1),P=A.useRef(null);A.useEffect(()=>{P.current&&R&&(P.current.value=n,P.current.focus(),P.current.select())},[R]);const H=ke(l).with("primary",()=>bo.Blue).otherwise(G=>G);return S.jsxs("div",{className:Ye("grl-dn",m&&"grl-dn--compact",x&&"grl-dn--list",!g&&c&&"grl-dn--selected",d&&`grl-dn--${d}`,g&&`grl-dn--diff-${g}`),style:{"--node-color":H},onKeyDown:G=>G.stopPropagation(),children:[S.jsxs(Gl,{children:[S.jsxs("div",{className:"grl-dn__status-bar",children:[Array.isArray(b)&&b.filter(G=>!!G).map((G,J)=>S.jsx("div",{className:Ye("grl-dn__status-icon"),children:G},J)),d==="error"&&S.jsx("div",{className:Ye("grl-dn__status-icon",`grl-dn__status-icon--${d}`),children:S.jsx(vo,{})}),S.jsx(o0,{status:g,style:{fontSize:16}})]}),S.jsxs("div",{className:Ye("grl-dn__header",m&&"compact"),children:[S.jsx("div",{className:Ye("grl-dn__header__icon",m&&"compact"),children:e}),S.jsxs("div",{className:"grl-dn__header__text",children:[!R&&S.jsx(Pt.Text,{className:Ye("grl-dn__header__text__name"),onClick:()=>{s||T(!0)},children:n}),R&&S.jsx("input",{ref:P,className:Ye("grl-dn__header__text__name-input","nodrag"),onBlur:G=>{G.target.value?.trim?.()?.length>0&&f?.(P?.current?.value),G.preventDefault(),T(!1)},onKeyDown:G=>{G.key==="Enter"?(G.currentTarget.blur(),G.preventDefault()):G.key==="Escape"&&(P.current&&(P.current.value=n),T(!1),G.preventDefault())}})]}),p.length>0&&S.jsx("div",{className:Ye("grl-dn__header__actions","nodrag"),children:S.jsx(Js,{trigger:["click"],overlayStyle:{minWidth:250},menu:{items:p},children:S.jsx(ot,{type:"text",size:"small",icon:S.jsx(Aw,{})})})})]}),r&&S.jsx("div",{className:Ye("grl-dn__body",o.length===0&&"grl-dn__body--no-footer",u&&"grl-dn__body--no-padding"),children:r}),o.length>0&&S.jsx("div",{className:Ye("grl-dn__footer","nodrag"),children:S.jsx("div",{className:"grl-dn__footer__actions",children:o})})]}),S.jsx(N6,{state:E,timeout:100,children:(G,J)=>J&&S.jsx(Gl,{className:"nodrag",style:{transition:"0.1s ease-in-out",transform:G==="enter"?"translateY(0)":"translateY(-10px)",opacity:G==="enter"?1:0},children:S.jsxs("div",{className:"grl-dn__details",children:[S.jsxs("div",{className:"grl-dn__details__header",children:[S.jsx(Pt.Text,{className:"grl-dn__details__header__text",children:v}),S.jsx(ot,{type:"text",size:"small",className:"grl-dn__details__header__close",icon:S.jsx(vo,{style:{fontSize:8}}),onClick:N})]}),S.jsx("div",{className:"grl-dn__details__body",children:_})]})})})]})};Sf.__docgenInfo={description:"",methods:[],displayName:"DecisionNode",props:{name:{required:!1,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},type:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},helper:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(React.ReactNode | false)[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:"",defaultValue:{value:"[]",computed:!1}},status:{required:!1,tsType:{name:"union",raw:"'error' | 'success' | 'warning'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'success'"},{name:"literal",value:"'warning'"}]},description:""},diffStatus:{required:!1,tsType:{name:"union",raw:"'removed' | 'added' | 'modified' | 'moved'",elements:[{name:"literal",value:"'removed'"},{name:"literal",value:"'added'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'moved'"}]},description:""},noBodyPadding:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | string",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"string"}]},description:"",defaultValue:{value:"'primary'",computed:!1}},menuItems:{required:!1,tsType:{name:"MenuProps['items']",raw:"MenuProps['items']"},description:"",defaultValue:{value:"[]",computed:!1}},onNameChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},compactMode:{required:!1,tsType:{name:"boolean"},description:""},listMode:{required:!1,tsType:{name:"boolean"},description:""},details:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},detailsOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},detailsTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Details'",computed:!1}},onDetailsClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const zi=V.forwardRef(({id:e,handleLeft:n=!0,handleRight:r=!0,className:o,specification:s,name:c,displayError:u,helper:l,actions:f,...p},d)=>{const[g,m]=Lu(`node:details:${e}`,0),[x,b]=Lu(`node:detailsOpen:${e}`,!1),_=$t(),{nodeError:E,nodeTrace:v,disabled:N,compactMode:R}=lt(({simulate:G,disabled:J,compactMode:$})=>({disabled:J,nodeTrace:ke(G).with({result:qe._},({result:Y})=>Y?.trace?.[e]).otherwise(()=>null),nodeError:ke(G).with({error:{data:{nodeId:e}}},({error:Y})=>Y).otherwise(()=>null),compactMode:$})),{diff:T}=ha(e),P=s.renderSettings,H=[s.documentationUrl?{key:"documentation",label:S.jsx(qs,{left:"Documentation",right:S.jsx(E0,{})}),onClick:()=>window.open(s.documentationUrl,"_href")}:null,s.documentationUrl?{key:"divider-1",type:"divider"}:null,!u&&{key:"copy-clipboard",label:S.jsx(qs,{left:"Copy to clipboard",right:wu.shortcut("Ctrl + C")}),onClick:()=>{}},!u&&{key:"duplicate",disabled:N,label:S.jsx(qs,{left:"Duplicate",right:wu.shortcut("Ctrl + D")}),onClick:()=>_.duplicateNodes([e])},!u&&{key:"divider-2",type:"divider"},{key:"delete",danger:!0,label:S.jsx(qs,{left:"Delete",right:wu.shortcut("Backspace")}),disabled:N,onClick:()=>Wu.confirm({icon:null,title:"Delete node",content:S.jsxs(Pt.Text,{children:["Are you sure you want to delete ",S.jsx(Pt.Text,{strong:!0,children:c})," node."]}),okButtonProps:{danger:!0},onOk:()=>_.removeNodes([e])})}].filter(G=>G!==!1);return S.jsxs("div",{className:Ye("grl-graph-node",o),style:{minWidth:220,maxWidth:220},ref:d,onClick:G=>{const J=ke(navigator.platform.includes("Mac")).with(!0,()=>G.metaKey).otherwise(()=>G.ctrlKey);_.triggerNodeSelect(e,J?"toggle":"only")},children:[n&&S.jsx(Mi,{className:Ye("grl-graph-node__handle-left",R&&"compact"),type:"target",position:xe.Left,...typeof n!="boolean"?n:{}}),S.jsx(Sf,{menuItems:H,...p,disabled:N,icon:s.icon,color:s.color,type:s.displayName,helper:l,name:c,details:P?S.jsx(P,{id:e}):void 0,detailsOpen:x,detailsTitle:ke(g).with(0,()=>"Settings").otherwise(()=>{}),onDetailsClose:()=>b(!1),actions:P?[...f??[],S.jsx(ot,{type:"text",style:{marginLeft:"auto"},onClick:()=>{b(g===0?!x:!0),m(0)},children:"Settings"},"settings")]:f,status:ke([v,E,u]).with([qe._,qe._,!0],()=>"error").with([qe._,qe.not(qe.nullish),qe._],()=>"error").with([qe.not(qe.nullish),qe._,qe._],()=>"success").otherwise(()=>{}),diffStatus:ke([T]).with([{status:"added"}],()=>"added").with([{status:"modified"}],()=>"modified").with([{status:"removed"}],()=>"removed").with([{status:"moved"}],()=>"moved").otherwise(()=>{}),onNameChange:G=>{_.updateNode(e,J=>(J.name=G,J))},compactMode:R}),r&&S.jsx(Mi,{className:Ye("grl-graph-node__handle-right",R&&"compact"),type:"source",position:xe.Right,...typeof r!="boolean"?r:{}})]})});zi.__docgenInfo={description:"",methods:[],displayName:"GraphNode",props:{handleLeft:{defaultValue:{value:"true",computed:!1},required:!1},handleRight:{defaultValue:{value:"true",computed:!1},required:!1}}};const Af=({value:e,onChange:n,readOnly:r})=>{const{token:o}=Kl.useToken();return S.jsx(ef,{loading:S.jsx(us,{size:"large"}),language:"javascript",value:e,onChange:n,theme:o.mode==="dark"?"vs-dark":"light",height:"100%",onMount:(s,c)=>{c.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),c.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),s.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async u=>{try{await Au(JSON.stringify(Ii.parse(u.getValue()))),zt.success("Copied to clipboard!")}catch{zt.error("Failed to copy to clipboard.")}}}),s.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:u=>{const l=JSON.stringify(Ii.parse(u.getValue()),null,2);u.setValue(l)}})},options:{readOnly:r,automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})};Af.__docgenInfo={description:"",methods:[],displayName:"SimulatorEditor",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};const T6="Your business context that enters through the Request node, starting the decision process. Supply JSON or JSON5 format.",Kg=({onChange:e,hasInputNode:n,loading:r,onRun:o,defaultRequest:s})=>{const[c,u]=A.useState(s),{stateStore:l,actions:f}=Co();return A.useEffect(()=>{if(!Xs())return;const{decisionGraph:p}=l.getState(),d=p.nodes.find(g=>g.type==="inputNode");if(d)try{const g=c?Ii.parse(c):"Any";f.setNodeType(d.id,ct.InferredOutput,new kn(g))}catch{}},[c]),S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request",children:[S.jsx(gr,{title:T6,children:S.jsxs(Pt.Text,{style:{fontSize:13,cursor:"help"},children:["Request",S.jsx(S0,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})]})}),S.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&S.jsx(gr,{title:n?void 0:"Request node is required to run the graph. Drag-and-drop it from the Components panel.",children:S.jsx(ot,{size:"small",type:"primary",loading:r,icon:S.jsx(gb,{}),disabled:!n,onClick:()=>{try{const p=(c||"").trim().length===0?null:Ii.parse(c||"");o?.({graph:l.getState().decisionGraph,context:p})}catch{rf.error({message:"Invalid format",description:"Unable to format request, invalid JSON format",placement:"top"})}},children:"Run"})})})]}),S.jsx("div",{className:"grl-dg__simulator__section__content",children:S.jsx(Af,{value:c,onChange:p=>{u(p),e?.(p??"")}})})]})};Kg.__docgenInfo={description:"",methods:[],displayName:"SimulatorRequestPanel",props:{defaultRequest:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}}},description:""},hasInputNode:{required:!1,tsType:{name:"boolean"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onRun:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
  settings?: DecisionSettings;
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}},{key:"settings",value:{name:"intersection",raw:"z.infer<typeof decisionModelSchema>['settings'] & Diff",elements:[{name:"z.infer['settings']",raw:"z.infer<typeof decisionModelSchema>['settings']"},{name:"signature",type:"object",raw:`{
  _diff?: DiffMetadata<T>;
}`,signature:{properties:[{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],required:!1}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""}}};var Jg=(e=>(e.Output="Output",e.Input="Input",e.Trace="Trace",e))(Jg||{});const I6=({defaultRequest:e,onChange:n,onRun:r,onClear:o,loading:s=!1,leftPanel:c=Kg})=>{const[u,l]=Lu("simulation.search",""),[f,p]=Lu("simulation.segment","Output"),{actions:d}=Co(),{nodeTypes:g,simulate:m,hasInputNode:x}=lt(({decisionGraph:v,simulate:N})=>({simulate:N,hasInputNode:v.nodes.some(R=>R.type===He.Input),nodeTypes:(v.nodes??[]).reduce((R,T)=>({...R,[T.id]:T.type}),{})})),[b,_]=A.useState("graph"),E=A.useMemo(()=>m?"result"in m?Object.entries(m.result?.trace??{}).map(([v,N])=>({...N,nodeId:v})).filter(v=>![He.Input].includes(g?.[v.nodeId])).filter(v=>v.name.toLowerCase().includes(u?.toLowerCase()??"")).sort((v,N)=>(v.order??0)-(N.order??0)):[]:[],[m,u]);return S.jsxs(p0,{className:"grl-dg__simulator",direction:"horizontal",autoSaveId:"jdm-editor:simulator:layout",children:[S.jsx(al,{minSize:20,defaultSize:30,className:"grl-dg__simulator__section grl-dg__simulator__request",children:S.jsx(c,{defaultRequest:e,loading:s,hasInputNode:x,onRun:r,onChange:n})}),S.jsx(kh,{}),S.jsxs(al,{minSize:20,maxSize:20,className:"grl-dg__simulator__section grl-dg__simulator__nodes",children:[S.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--nodes",children:[S.jsx("input",{className:"grl-dg__simulator__search",type:"text",placeholder:"Search nodes...",value:u,onChange:v=>l(v.target.value)}),S.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&S.jsx(gr,{title:"Clear",children:S.jsx(ot,{size:"small",type:"text",icon:S.jsx(k2,{}),onClick:()=>{o?.(),_("graph"),l("")}})})})]}),S.jsx("div",{className:"grl-dg__simulator__section__content",children:S.jsx(us,{spinning:s,children:S.jsxs("div",{className:"grl-dg__simulator__nodes-list",children:[!m&&S.jsxs(Pt.Text,{type:"secondary",style:{textAlign:"center",marginTop:60,fontSize:13},children:["Ready to simulate!",S.jsx("br",{}),"Run a request to see the node trace in action.",S.jsx("br",{}),S.jsx(Pt.Link,{href:"https://docs.gorules.io/docs/simulator",target:"_blank",style:{fontSize:13,marginTop:4,display:"inline-block"},children:"Learn more"})]}),"graph".includes(u?.toLowerCase()??"")&&m&&S.jsxs("div",{className:Ye("grl-dg__simulator__nodes-list__node",b==="graph"&&"active"),onClick:()=>_("graph"),children:[S.jsxs(Pt.Text,{"data-role":"name",ellipsis:!0,children:[S.jsx($p,{status:ke(m).with({error:qe.nonNullable},()=>"error").with({result:qe.nonNullable},()=>"success").otherwise(()=>"not-run")}),"Graph"]}),S.jsx(Pt.Text,{type:"secondary","data-role":"performance",children:ke(m).with({result:qe._},({result:v})=>v?.performance).otherwise(()=>{})})]}),E.map(v=>S.jsxs("div",{className:Ye("grl-dg__simulator__nodes-list__node",v.nodeId===b&&"active"),onClick:()=>_(v.nodeId),onDoubleClick:()=>d.goToNode(v.nodeId),children:[S.jsxs(Pt.Text,{"data-role":"name",ellipsis:{tooltip:v.name},children:[S.jsx($p,{status:v.nodeId===m?.error?.data?.nodeId?"error":"success"}),v.name]}),S.jsx(Pt.Text,{type:"secondary","data-role":"performance",children:v.performance})]},v.nodeId))]})})})]}),S.jsx(kh,{}),S.jsxs(al,{minSize:30,defaultSize:50,className:"grl-dg__simulator__section grl-dg__simulator__response",children:[S.jsx("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--response",children:S.jsx(Ql,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},onChange:v=>p(v),items:Object.values(Jg).map(v=>({key:v,label:v})),tabBarExtraContent:S.jsx(gr,{title:"Close panel",children:S.jsx(ot,{type:"text",icon:S.jsx(vo,{style:{fontSize:12}}),onClick:()=>d.setActivePanel(void 0)})})})}),S.jsx("div",{className:"grl-dg__simulator__section__content",children:S.jsx(Af,{readOnly:!0,value:ke(m).with({result:qe._},({result:v})=>ke(b).with("graph",()=>Pp({traceData:v?.trace,output:v?.result},f??"Output")).otherwise(()=>Pp(v?.trace[b],f??"Output"))).otherwise(()=>"")})})]})]})},Pp=(e,n)=>{const r=ke([n,e]).with(["Output",{output:qe._}],([,{output:o}])=>o).with(["Input",{input:qe._}],([,{input:o}])=>o).with(["Trace",{trace:qe._}],([,{trace:o}])=>o).with(["Trace",{traceData:qe._}],([,{traceData:o}])=>o).otherwise(()=>({}));return Ii.stringify(r,void 0,2)},$p=({status:e})=>e==="not-run"?null:e==="success"?S.jsx(P2,{twoToneColor:["var(--grl-color-success)","var(--grl-color-success-bg)"],style:{marginRight:6,fontSize:12,opacity:.5}}):S.jsx(q2,{twoToneColor:["var(--grl-color-error)","var(--grl-color-error-bg)"],style:{marginRight:5,fontSize:12}});I6.__docgenInfo={description:"",methods:[],displayName:"GraphSimulator",props:{onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultRequest:{required:!1,tsType:{name:"string",raw:"SimulatorRequestPanelProps['defaultRequest']"},description:""},onChange:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onChange']"},description:""},onRun:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onRun']"},description:""},leftPanel:{required:!1,tsType:{name:"ReactFC",raw:"React.FC<SimulatorRequestPanelProps>",elements:[{name:"signature",type:"object",raw:`{
  defaultRequest?: string;
  onChange?: (contextJson: string) => void;
  hasInputNode?: boolean;
  loading?: boolean;
  onRun?: (payload: { graph: DecisionGraphType; context: unknown }) => void;
}`,signature:{properties:[{key:"defaultRequest",value:{name:"string",required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}},required:!1}},{key:"hasInputNode",value:{name:"boolean",required:!1}},{key:"loading",value:{name:"boolean",required:!1}},{key:"onRun",value:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
  settings?: DecisionSettings;
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}},{key:"settings",value:{name:"intersection",raw:"z.infer<typeof decisionModelSchema>['settings'] & Diff",elements:[{name:"z.infer['settings']",raw:"z.infer<typeof decisionModelSchema>['settings']"},{name:"signature",type:"object",raw:`{
  _diff?: DiffMetadata<T>;
}`,signature:{properties:[{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],required:!1}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}},required:!1}}]}}]},description:"",defaultValue:{value:`({
  onChange,
  hasInputNode,
  loading,
  onRun,
  defaultRequest,
}) => {
  const [requestValue, setRequestValue] = useState(defaultRequest);
  const { stateStore, actions } = useDecisionGraphRaw();

  useEffect(() => {
    if (!isWasmAvailable()) {
      return;
    }

    const { decisionGraph } = stateStore.getState();
    const requestNode = decisionGraph.nodes.find((n) => n.type === 'inputNode');
    if (!requestNode) {
      return;
    }

    try {
      const value = requestValue ? json5.parse(requestValue) : 'Any';
      actions.setNodeType(requestNode.id, NodeTypeKind.InferredOutput, new VariableType(value));
    } catch {
      // Skip
    }
  }, [requestValue]);

  return (
    <>
      <div className={'grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request'}>
        <Tooltip title={requestTooltip}>
          <Typography.Text style={{ fontSize: 13, cursor: 'help' }}>
            Request
            <InfoCircleOutlined style={{ fontSize: 10, marginLeft: 4, opacity: 0.5, verticalAlign: 'text-top' }} />
          </Typography.Text>
        </Tooltip>
        <div className={'grl-dg__simulator__section__bar__actions'}>
          {onRun && (
            <Tooltip
              title={
                !hasInputNode
                  ? 'Request node is required to run the graph. Drag-and-drop it from the Components panel.'
                  : undefined
              }
            >
              <Button
                size={'small'}
                type={'primary'}
                loading={loading}
                icon={<PlayCircleOutlined />}
                disabled={!hasInputNode}
                onClick={() => {
                  try {
                    const parsed = (requestValue || '').trim().length === 0 ? null : json5.parse(requestValue || '');
                    onRun?.({ graph: stateStore.getState().decisionGraph, context: parsed });
                  } catch {
                    notification.error({
                      message: 'Invalid format',
                      description: 'Unable to format request, invalid JSON format',
                      placement: 'top',
                    });
                  }
                }}
              >
                Run
              </Button>
            </Tooltip>
          )}
        </div>
      </div>
      <div className={'grl-dg__simulator__section__content'}>
        <SimulatorEditor
          value={requestValue}
          onChange={(text) => {
            setRequestValue(text);
            onChange?.(text ?? '');
          }}
        />
      </div>
    </>
  );
}`,computed:!1}}}};const Qg=({id:e,manager:n})=>{const r=$t(),o=ms(e,{attachGlobals:!1}),{disabled:s,configurable:c,content:u,trace:l,globalType:f}=lt(({disabled:d,configurable:g,decisionGraph:m,simulate:x,globalType:b})=>({disabled:d,configurable:g,content:(m?.nodes??[]).find(_=>_.id===e)?.content,trace:x&&"result"in x?x.result?.trace[e]:void 0,globalType:b})),p=A.useMemo(()=>{if(!o)return;const d=ke(u?.inputField).with(qe.string,m=>o.get(m)).otherwise(()=>o),g=u?.executionMode==="loop"?d.arrayItem():d;return Object.entries(f).forEach(([m,x])=>g.set(m,x)),g},[o,f,u?.inputField,u?.executionMode]);return S.jsx("div",{style:{height:"100%",overflowY:"auto",boxSizing:"border-box"},children:S.jsx(Lw,{traceData:l?.traceData,value:u?.expressions,disabled:s,configurable:c,manager:n,inputData:p,onChange:d=>{r.updateNode(e,g=>(g.content.expressions=d,g))}})})};Qg.__docgenInfo={description:"",methods:[],displayName:"TabExpression",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const Ff={type:He.Expression,icon:S.jsx(db,{}),displayName:"Expression",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/expression",shortDescription:"Mapping utility",renderTab:({id:e,manager:n})=>S.jsx(Qg,{id:e,manager:n}),getDiffContent:(e,n)=>gt(e,o=>{const s={};(e.executionMode||!1)!==(n.executionMode||!1)&&St.set(s,"executionMode",{status:"modified",previousValue:n.executionMode}),du(e.inputField,n.inputField)||St.set(s,"inputField",{status:"modified",previousValue:n.inputField}),du(e.outputPath,n.outputPath)||St.set(s,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough||!1)!==(n.passThrough||!1)&&St.set(s,"passThrough",{status:"modified",previousValue:n.passThrough});const c=Ks(e?.expressions||[],n?.expressions||[],{compareFields:(u,l)=>{const f=!du(u.key,l.key),p=!du(u.value,l.value);return{hasChanges:f||p,fields:{...f&&{key:{status:"modified",previousValue:l.key}},...p&&{value:{status:"modified",previousValue:l.value}}}}}});return o.expressions=c,c.find(u=>u?._diff?.status==="modified"||u?._diff?.status==="added"||u?._diff?.status==="removed")&&St.set(s,"expressions",{status:"modified"}),Object.keys(s).length>0&&(o._diff={status:"modified",fields:s}),o}),inferTypes:{needsUpdate:(e,n)=>!Ln(e,n),determineOutputType:({input:e,content:n})=>{let r=e.clone(),o=kn.fromJson({Object:{}});if(n.inputField&&(r=e.calculateType(n.inputField)),n.executionMode==="loop"&&(r=r.arrayItem()),(n.expressions||[]).forEach(s=>{if(!s.key||!s.value)return;const c=r.calculateType(s.value);r.set(`$.${s.key}`,c),o.set(s.key,c)}),n.executionMode==="loop"&&(o=o.toArray()),n.outputPath){const s=kn.fromJson({Object:{}});s.set(n.outputPath,o),o=s}return n.passThrough&&(o=e.merge(o)),o}},generateNode:({index:e})=>({name:`expression${e}`,content:{inputField:null,outputPath:null,expressions:[],passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=$t(),{passThrough:c,executionMode:u}=lt(({decisionGraph:l})=>{const f=(l?.nodes??[]).find(p=>p.id===e)?.content;return{passThrough:f?.passThrough||!1,executionMode:f?.executionMode}});return S.jsx(zi,{id:e,specification:o,name:n.name,isSelected:r,actions:[S.jsx(ot,{type:"text",onClick:()=>s.openTab(e),children:"Edit Expression"},"edit-table")],helper:[u==="loop"&&S.jsx(A0,{}),c&&S.jsx(Jl,{})]})},renderSettings:({id:e})=>{const n=$t(),r=ms(e),{contentDiff:o}=ha(e),{fields:s,disabled:c}=lt(({decisionGraph:l,disabled:f})=>{const p=(l?.nodes??[]).find(d=>d.id===e)?.content;return{disabled:f,fields:{passThrough:p?.passThrough||!1,inputField:p?.inputField,outputPath:p?.outputPath,executionMode:p?.executionMode||"single"}}}),u=l=>{n.updateNode(e,f=>(Object.assign(f.content,l),f))};return S.jsxs("div",{className:"settings-form",children:[S.jsx(ii.Item,{label:"Passthrough",children:S.jsx(f0,{disabled:c,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:l=>u({passThrough:l})})}),S.jsx(ii.Item,{label:"Input field",children:S.jsx(Vu,{variableType:r,disabled:c,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:l=>{u({inputField:l?.trim()||null})}})}),S.jsx(ii.Item,{label:"Output path",children:S.jsx(s0,{size:"small",readOnly:c,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:l=>u({outputPath:l?.target?.value?.trim()||null})})}),S.jsx(ii.Item,{label:"Execution mode",children:S.jsx(Cl,{size:"small",disabled:c,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:l=>u({executionMode:l?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},B6=V.lazy(async()=>({default:(await Xw(()=>import("./index-Bdy95lf0.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)).Function})),em=({id:e})=>{const n=tm(e),r=$t(),o=Dm(b=>b.onFunctionReady),[s,c]=A.useState(),u=ms(e),{nodeTrace:l,disabled:f,content:p,nodeError:d}=lt(({simulate:b,disabled:_,configurable:E,decisionGraph:v})=>({nodeTrace:ke(b).with({result:qe._},({result:N})=>N?.trace?.[e]).otherwise(()=>null),nodeError:ke(b).with({error:{data:{nodeId:e}}},({error:N})=>N).otherwise(()=>null),disabled:_,configurable:E,content:(v?.nodes??[]).find(N=>N.id===e)?.content})),{diff:g,contentDiff:m}=ha(e),x=A.useMemo(()=>n===bu.Stable?m?.fields?.source?.previousValue:g?.fields?.content?.previousValue,[g,m]);return A.useEffect(()=>{if(!s)return;const b=s.languages.typescript.javascriptDefaults.getExtraLibs(),_=Object.entries(b).map(([E,v])=>({filePath:E,content:v.content}));s.languages.typescript.javascriptDefaults.setExtraLibs(_),o?.(s)},[s,o]),S.jsx(A.Suspense,{fallback:S.jsx(us,{}),children:S.jsx(B6,{onMonacoReady:b=>c(b),value:n===bu.Stable?p.source:p,previousValue:typeof x=="string"?x:void 0,error:d??void 0,inputData:u,onChange:b=>{r.updateNode(e,_=>(n===bu.Stable?_.content={source:b}:_.content=b,_))},disabled:f,trace:l})})};em.__docgenInfo={description:"",methods:[],displayName:"TabFunction",props:{id:{required:!0,tsType:{name:"string"},description:""}}};const Nf={type:He.Function,icon:S.jsx(Pt.Text,{style:{color:"white",fontSize:"inherit"},children:"JS"}),displayName:"Function",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/functions",shortDescription:"Javascript lambda",color:bo.Orange,renderTab:({id:e})=>S.jsx(em,{id:e}),getDiffContent:(e,n)=>{const r={},o=ke(e).with(qe.string,()=>0).otherwise(()=>1);ke([e,n]).with([qe.string,qe.string],([c,u])=>{c!==u&&St.set(r,"source",{previousValue:u,status:"modified"})}).with([{source:qe.string},{source:qe.string}],([c,u])=>{c?.source!==u?.source&&St.set(r,"source",{previousValue:u.source,status:"modified"})}).otherwise(()=>{});const s=Object.keys(r).length>0;return{...o===0?{source:e}:e,...s&&{_diff:{status:"modified",fields:r}}}},generateNode:({index:e})=>({name:`function${e}`,content:{source:Vw}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=$t(),c=tm(e);return S.jsx(zi,{id:e,specification:{...o,displayName:c===1?"Function":S.jsxs("span",{children:["Function v1 ",S.jsx(jp,{})]})},name:n.name,isSelected:r,helper:[c===0&&S.jsx(jp,{size:16})],actions:[S.jsx(ot,{type:"text",onClick:()=>s.openTab(e),children:"Edit Function"},"edit-function")]})}};var bu=(e=>(e[e.Deprecated=0]="Deprecated",e[e.Stable=1]="Stable",e))(bu||{});const tm=e=>{const{kind:n}=lt(r=>({kind:ke(r.decisionGraph.nodes.find(o=>o.id===e)?.content).with(qe.string,()=>0).otherwise(()=>1)}));return n},jp=({size:e})=>S.jsx(gr,{placement:"top",title:'Function v1 will be deprecated in one of the upcoming releases. To use a new Function, drag and drop a new Function Node and copy your logic. For more information click "Documentation". ',children:S.jsx(bb,{style:{color:"var(--grl-color-warning-text)",fontSize:e}})});var Hu={exports:{}};Hu.exports;(function(e,n){var r=200,o="__lodash_hash_undefined__",s=800,c=16,u=9007199254740991,l="[object Arguments]",f="[object Array]",p="[object AsyncFunction]",d="[object Boolean]",g="[object Date]",m="[object Error]",x="[object Function]",b="[object GeneratorFunction]",_="[object Map]",E="[object Number]",v="[object Null]",N="[object Object]",R="[object Proxy]",T="[object RegExp]",P="[object Set]",H="[object String]",G="[object Undefined]",J="[object WeakMap]",$="[object ArrayBuffer]",Y="[object DataView]",te="[object Float32Array]",Q="[object Float64Array]",Z="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",j="[object Uint8Array]",X="[object Uint8ClampedArray]",ie="[object Uint16Array]",U="[object Uint32Array]",oe=/[\\^$.*+?()[\]{}|]/g,se=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,ue={};ue[te]=ue[Q]=ue[Z]=ue[B]=ue[q]=ue[j]=ue[X]=ue[ie]=ue[U]=!0,ue[l]=ue[f]=ue[$]=ue[d]=ue[Y]=ue[g]=ue[m]=ue[x]=ue[_]=ue[E]=ue[N]=ue[T]=ue[P]=ue[H]=ue[J]=!1;var ge=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt,de=typeof self=="object"&&self&&self.Object===Object&&self,Fe=ge||de||Function("return this")(),Be=n&&!n.nodeType&&n,me=Be&&!0&&e&&!e.nodeType&&e,be=me&&me.exports===Be,Te=be&&ge.process,xt=function(){try{var y=me&&me.require&&me.require("util").types;return y||Te&&Te.binding&&Te.binding("util")}catch{}}(),ht=xt&&xt.isTypedArray;function jt(y,F,z){switch(z.length){case 0:return y.call(F);case 1:return y.call(F,z[0]);case 2:return y.call(F,z[0],z[1]);case 3:return y.call(F,z[0],z[1],z[2])}return y.apply(F,z)}function Qe(y,F){for(var z=-1,fe=Array(y);++z<y;)fe[z]=F(z);return fe}function et(y){return function(F){return y(F)}}function en(y,F){return y?.[F]}function $e(y,F){return function(z){return y(F(z))}}var _e=Array.prototype,kt=Function.prototype,Bt=Object.prototype,yt=Fe["__core-js_shared__"],Lt=kt.toString,wt=Bt.hasOwnProperty,tn=function(){var y=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Kt=Bt.toString,In=Lt.call(Object),Rt=RegExp("^"+Lt.call(wt).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=be?Fe.Buffer:void 0,nn=Fe.Symbol,vt=Fe.Uint8Array;bt&&bt.allocUnsafe;var at=$e(Object.getPrototypeOf,Object),Ot=Object.create,ln=Bt.propertyIsEnumerable,rn=_e.splice,Dt=nn?nn.toStringTag:void 0,Ct=function(){try{var y=Ki(Object,"defineProperty");return y({},"",{}),y}catch{}}(),on=bt?bt.isBuffer:void 0,_r=Math.max,fn=Date.now,Bn=Ki(Fe,"Map"),xn=Ki(Object,"create"),Br=function(){function y(){}return function(F){if(!ar(F))return{};if(Ot)return Ot(F);y.prototype=F;var z=new y;return y.prototype=void 0,z}}();function Ft(y){var F=-1,z=y==null?0:y.length;for(this.clear();++F<z;){var fe=y[F];this.set(fe[0],fe[1])}}function nr(){this.__data__=xn?xn(null):{},this.size=0}function Rr(y){var F=this.has(y)&&delete this.__data__[y];return this.size-=F?1:0,F}function Or(y){var F=this.__data__;if(xn){var z=F[y];return z===o?void 0:z}return wt.call(F,y)?F[y]:void 0}function xr(y){var F=this.__data__;return xn?F[y]!==void 0:wt.call(F,y)}function rr(y,F){var z=this.__data__;return this.size+=this.has(y)?0:1,z[y]=xn&&F===void 0?o:F,this}Ft.prototype.clear=nr,Ft.prototype.delete=Rr,Ft.prototype.get=Or,Ft.prototype.has=xr,Ft.prototype.set=rr;function dn(y){var F=-1,z=y==null?0:y.length;for(this.clear();++F<z;){var fe=y[F];this.set(fe[0],fe[1])}}function Pi(){this.__data__=[],this.size=0}function Mr(y){var F=this.__data__,z=wr(F,y);if(z<0)return!1;var fe=F.length-1;return z==fe?F.pop():rn.call(F,z,1),--this.size,!0}function $i(y){var F=this.__data__,z=wr(F,y);return z<0?void 0:F[z][1]}function zr(y){return wr(this.__data__,y)>-1}function fi(y,F){var z=this.__data__,fe=wr(z,y);return fe<0?(++this.size,z.push([y,F])):z[fe][1]=F,this}dn.prototype.clear=Pi,dn.prototype.delete=Mr,dn.prototype.get=$i,dn.prototype.has=zr,dn.prototype.set=fi;function wn(y){var F=-1,z=y==null?0:y.length;for(this.clear();++F<z;){var fe=y[F];this.set(fe[0],fe[1])}}function Rn(){this.size=0,this.__data__={hash:new Ft,map:new(Bn||dn),string:new Ft}}function ji(y){var F=Hr(this,y).delete(y);return this.size-=F?1:0,F}function ki(y){return Hr(this,y).get(y)}function Li(y){return Hr(this,y).has(y)}function di(y,F){var z=Hr(this,y),fe=z.size;return z.set(y,F),this.size+=z.size==fe?0:1,this}wn.prototype.clear=Rn,wn.prototype.delete=ji,wn.prototype.get=ki,wn.prototype.has=Li,wn.prototype.set=di;function qn(y){var F=this.__data__=new dn(y);this.size=F.size}function sn(){this.__data__=new dn,this.size=0}function Hi(y){var F=this.__data__,z=F.delete(y);return this.size=F.size,z}function qi(y){return this.__data__.get(y)}function Vi(y){return this.__data__.has(y)}function Gi(y,F){var z=this.__data__;if(z instanceof dn){var fe=z.__data__;if(!Bn||fe.length<r-1)return fe.push([y,F]),this.size=++z.size,this;z=this.__data__=new wn(fe)}return z.set(y,F),this.size=z.size,this}qn.prototype.clear=sn,qn.prototype.delete=Hi,qn.prototype.get=qi,qn.prototype.has=Vi,qn.prototype.set=Gi;function Ui(y,F){var z=On(y),fe=!z&&Ji(y),he=!z&&!fe&&Gr(y),we=!z&&!fe&&!he&&eo(y),Ne=z||fe||he||we,ye=Ne?Qe(y.length,String):[],Ce=ye.length;for(var Xe in y)Ne&&(Xe=="length"||he&&(Xe=="offset"||Xe=="parent")||we&&(Xe=="buffer"||Xe=="byteLength"||Xe=="byteOffset")||qr(Xe,Ce))||ye.push(Xe);return ye}function hn(y,F,z){(z!==void 0&&!Vr(y[F],z)||z===void 0&&!(F in y))&&Vn(y,F,z)}function ir(y,F,z){var fe=y[F];(!(wt.call(y,F)&&Vr(fe,z))||z===void 0&&!(F in y))&&Vn(y,F,z)}function wr(y,F){for(var z=y.length;z--;)if(Vr(y[z][0],F))return z;return-1}function Vn(y,F,z){F=="__proto__"&&Ct?Ct(y,F,{configurable:!0,enumerable:!0,value:z,writable:!0}):y[F]=z}var Wi=Lr();function br(y){return y==null?y===void 0?G:v:Dt&&Dt in Object(y)?Ao(y):To(y)}function or(y){return Gn(y)&&br(y)==l}function hi(y){if(!ar(y)||gi(y))return!1;var F=Qi(y)?Rt:se;return F.test(Oo(y))}function Pr(y){return Gn(y)&&yi(y.length)&&!!ue[br(y)]}function pn(y){if(!ar(y))return gn(y);var F=sr(y),z=[];for(var fe in y)fe=="constructor"&&(F||!wt.call(y,fe))||z.push(fe);return z}function pi(y,F,z,fe,he){y!==F&&Wi(F,function(we,Ne){if(he||(he=new qn),ar(we))Xi(y,F,Ne,z,pi,fe,he);else{var ye=fe?fe(bn(y,Ne),we,Ne+"",y,F,he):void 0;ye===void 0&&(ye=we),hn(y,Ne,ye)}},to)}function Xi(y,F,z,fe,he,we,Ne){var ye=bn(y,z),Ce=bn(F,z),Xe=Ne.get(Ce);if(Xe){hn(y,z,Xe);return}var it=we?we(ye,Ce,z+"",y,F,Ne):void 0,ut=it===void 0;if(ut){var nt=On(Ce),Ht=!nt&&Gr(Ce),Cn=!nt&&!Ht&&eo(Ce);it=Ce,nt||Ht||Cn?On(ye)?it=ye:Mo(ye)?it=Yi(ye):Ht?(ut=!1,it=Eo(Ce)):Cn?(ut=!1,it=jr(Ce)):it=[]:zo(Ce)||Ji(Ce)?(it=ye,Ji(ye)?it=Ur(ye):(!ar(ye)||Qi(ye))&&(it=Fo(Ce))):ut=!1}ut&&(Ne.set(Ce,it),he(it,Ce,fe,we,Ne),Ne.delete(Ce)),hn(y,z,it)}function $r(y,F){return Bo(Io(y,F,Ze),y+"")}var vs=Ct?function(y,F){return Ct(y,"toString",{configurable:!0,enumerable:!1,value:tt(F),writable:!0})}:Ze;function Eo(y,F){return y.slice()}function So(y){var F=new y.constructor(y.byteLength);return new vt(F).set(new vt(y)),F}function jr(y,F){var z=So(y.buffer);return new y.constructor(z,y.byteOffset,y.length)}function Yi(y,F){var z=-1,fe=y.length;for(F||(F=Array(fe));++z<fe;)F[z]=y[z];return F}function kr(y,F,z,fe){var he=!z;z||(z={});for(var we=-1,Ne=F.length;++we<Ne;){var ye=F[we],Ce=void 0;Ce===void 0&&(Ce=y[ye]),he?Vn(z,ye,Ce):ir(z,ye,Ce)}return z}function Zi(y){return $r(function(F,z){var fe=-1,he=z.length,we=he>1?z[he-1]:void 0,Ne=he>2?z[2]:void 0;for(we=y.length>3&&typeof we=="function"?(he--,we):void 0,Ne&&Ds(z[0],z[1],Ne)&&(we=he<3?void 0:we,he=1),F=Object(F);++fe<he;){var ye=z[fe];ye&&y(F,ye,fe,we)}return F})}function Lr(y){return function(F,z,fe){for(var he=-1,we=Object(F),Ne=fe(F),ye=Ne.length;ye--;){var Ce=Ne[++he];if(z(we[Ce],Ce,we)===!1)break}return F}}function Hr(y,F){var z=y.__data__;return No(F)?z[typeof F=="string"?"string":"hash"]:z.map}function Ki(y,F){var z=en(y,F);return hi(z)?z:void 0}function Ao(y){var F=wt.call(y,Dt),z=y[Dt];try{y[Dt]=void 0;var fe=!0}catch{}var he=Kt.call(y);return fe&&(F?y[Dt]=z:delete y[Dt]),he}function Fo(y){return typeof y.constructor=="function"&&!sr(y)?Br(at(y)):{}}function qr(y,F){var z=typeof y;return F=F??u,!!F&&(z=="number"||z!="symbol"&&le.test(y))&&y>-1&&y%1==0&&y<F}function Ds(y,F,z){if(!ar(z))return!1;var fe=typeof F;return(fe=="number"?mi(z)&&qr(F,z.length):fe=="string"&&F in z)?Vr(z[F],y):!1}function No(y){var F=typeof y;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?y!=="__proto__":y===null}function gi(y){return!!tn&&tn in y}function sr(y){var F=y&&y.constructor,z=typeof F=="function"&&F.prototype||Bt;return y===z}function gn(y){var F=[];if(y!=null)for(var z in Object(y))F.push(z);return F}function To(y){return Kt.call(y)}function Io(y,F,z){return F=_r(F===void 0?y.length-1:F,0),function(){for(var fe=arguments,he=-1,we=_r(fe.length-F,0),Ne=Array(we);++he<we;)Ne[he]=fe[F+he];he=-1;for(var ye=Array(F+1);++he<F;)ye[he]=fe[he];return ye[F]=z(Ne),jt(y,this,ye)}}function bn(y,F){if(!(F==="constructor"&&typeof y[F]=="function")&&F!="__proto__")return y[F]}var Bo=Ro(vs);function Ro(y){var F=0,z=0;return function(){var fe=fn(),he=c-(fe-z);if(z=fe,he>0){if(++F>=s)return arguments[0]}else F=0;return y.apply(void 0,arguments)}}function Oo(y){if(y!=null){try{return Lt.call(y)}catch{}try{return y+""}catch{}}return""}function Vr(y,F){return y===F||y!==y&&F!==F}var Ji=or(function(){return arguments}())?or:function(y){return Gn(y)&&wt.call(y,"callee")&&!ln.call(y,"callee")},On=Array.isArray;function mi(y){return y!=null&&yi(y.length)&&!Qi(y)}function Mo(y){return Gn(y)&&mi(y)}var Gr=on||I;function Qi(y){if(!ar(y))return!1;var F=br(y);return F==x||F==b||F==p||F==R}function yi(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=u}function ar(y){var F=typeof y;return y!=null&&(F=="object"||F=="function")}function Gn(y){return y!=null&&typeof y=="object"}function zo(y){if(!Gn(y)||br(y)!=N)return!1;var F=at(y);if(F===null)return!0;var z=wt.call(F,"constructor")&&F.constructor;return typeof z=="function"&&z instanceof z&&Lt.call(z)==In}var eo=ht?et(ht):Pr;function Ur(y){return kr(y,to(y))}function to(y){return mi(y)?Ui(y):pn(y)}var _s=Zi(function(y,F,z){pi(y,F,z)});function tt(y){return function(){return y}}function Ze(y){return y}function I(){return!1}e.exports=_s})(Hu,Hu.exports);var R6=Hu.exports,qu={exports:{}};qu.exports;(function(e,n){var r=200,o="__lodash_hash_undefined__",s=1,c=2,u=9007199254740991,l="[object Arguments]",f="[object Array]",p="[object AsyncFunction]",d="[object Boolean]",g="[object Date]",m="[object Error]",x="[object Function]",b="[object GeneratorFunction]",_="[object Map]",E="[object Number]",v="[object Null]",N="[object Object]",R="[object Promise]",T="[object Proxy]",P="[object RegExp]",H="[object Set]",G="[object String]",J="[object Symbol]",$="[object Undefined]",Y="[object WeakMap]",te="[object ArrayBuffer]",Q="[object DataView]",Z="[object Float32Array]",B="[object Float64Array]",q="[object Int8Array]",j="[object Int16Array]",X="[object Int32Array]",ie="[object Uint8Array]",U="[object Uint8ClampedArray]",oe="[object Uint16Array]",se="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,ue=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,de={};de[Z]=de[B]=de[q]=de[j]=de[X]=de[ie]=de[U]=de[oe]=de[se]=!0,de[l]=de[f]=de[te]=de[d]=de[Q]=de[g]=de[m]=de[x]=de[_]=de[E]=de[N]=de[P]=de[H]=de[G]=de[Y]=!1;var Fe=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt,Be=typeof self=="object"&&self&&self.Object===Object&&self,me=Fe||Be||Function("return this")(),be=n&&!n.nodeType&&n,Te=be&&!0&&e&&!e.nodeType&&e,xt=Te&&Te.exports===be,ht=xt&&Fe.process,jt=function(){try{return ht&&ht.binding&&ht.binding("util")}catch{}}(),Qe=jt&&jt.isTypedArray;function et(I,y){for(var F=-1,z=I==null?0:I.length,fe=0,he=[];++F<z;){var we=I[F];y(we,F,I)&&(he[fe++]=we)}return he}function en(I,y){for(var F=-1,z=y.length,fe=I.length;++F<z;)I[fe+F]=y[F];return I}function $e(I,y){for(var F=-1,z=I==null?0:I.length;++F<z;)if(y(I[F],F,I))return!0;return!1}function _e(I,y){for(var F=-1,z=Array(I);++F<I;)z[F]=y(F);return z}function kt(I){return function(y){return I(y)}}function Bt(I,y){return I.has(y)}function yt(I,y){return I?.[y]}function Lt(I){var y=-1,F=Array(I.size);return I.forEach(function(z,fe){F[++y]=[fe,z]}),F}function wt(I,y){return function(F){return I(y(F))}}function tn(I){var y=-1,F=Array(I.size);return I.forEach(function(z){F[++y]=z}),F}var Kt=Array.prototype,In=Function.prototype,Rt=Object.prototype,bt=me["__core-js_shared__"],nn=In.toString,vt=Rt.hasOwnProperty,at=function(){var I=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),Ot=Rt.toString,ln=RegExp("^"+nn.call(vt).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rn=xt?me.Buffer:void 0,Dt=me.Symbol,Ct=me.Uint8Array,on=Rt.propertyIsEnumerable,_r=Kt.splice,fn=Dt?Dt.toStringTag:void 0,Bn=Object.getOwnPropertySymbols,xn=rn?rn.isBuffer:void 0,Br=wt(Object.keys,Object),Ft=gn(me,"DataView"),nr=gn(me,"Map"),Rr=gn(me,"Promise"),Or=gn(me,"Set"),xr=gn(me,"WeakMap"),rr=gn(Object,"create"),dn=On(Ft),Pi=On(nr),Mr=On(Rr),$i=On(Or),zr=On(xr),fi=Dt?Dt.prototype:void 0,wn=fi?fi.valueOf:void 0;function Rn(I){var y=-1,F=I==null?0:I.length;for(this.clear();++y<F;){var z=I[y];this.set(z[0],z[1])}}function ji(){this.__data__=rr?rr(null):{},this.size=0}function ki(I){var y=this.has(I)&&delete this.__data__[I];return this.size-=y?1:0,y}function Li(I){var y=this.__data__;if(rr){var F=y[I];return F===o?void 0:F}return vt.call(y,I)?y[I]:void 0}function di(I){var y=this.__data__;return rr?y[I]!==void 0:vt.call(y,I)}function qn(I,y){var F=this.__data__;return this.size+=this.has(I)?0:1,F[I]=rr&&y===void 0?o:y,this}Rn.prototype.clear=ji,Rn.prototype.delete=ki,Rn.prototype.get=Li,Rn.prototype.has=di,Rn.prototype.set=qn;function sn(I){var y=-1,F=I==null?0:I.length;for(this.clear();++y<F;){var z=I[y];this.set(z[0],z[1])}}function Hi(){this.__data__=[],this.size=0}function qi(I){var y=this.__data__,F=jr(y,I);if(F<0)return!1;var z=y.length-1;return F==z?y.pop():_r.call(y,F,1),--this.size,!0}function Vi(I){var y=this.__data__,F=jr(y,I);return F<0?void 0:y[F][1]}function Gi(I){return jr(this.__data__,I)>-1}function Ui(I,y){var F=this.__data__,z=jr(F,I);return z<0?(++this.size,F.push([I,y])):F[z][1]=y,this}sn.prototype.clear=Hi,sn.prototype.delete=qi,sn.prototype.get=Vi,sn.prototype.has=Gi,sn.prototype.set=Ui;function hn(I){var y=-1,F=I==null?0:I.length;for(this.clear();++y<F;){var z=I[y];this.set(z[0],z[1])}}function ir(){this.size=0,this.__data__={hash:new Rn,map:new(nr||sn),string:new Rn}}function wr(I){var y=sr(this,I).delete(I);return this.size-=y?1:0,y}function Vn(I){return sr(this,I).get(I)}function Wi(I){return sr(this,I).has(I)}function br(I,y){var F=sr(this,I),z=F.size;return F.set(I,y),this.size+=F.size==z?0:1,this}hn.prototype.clear=ir,hn.prototype.delete=wr,hn.prototype.get=Vn,hn.prototype.has=Wi,hn.prototype.set=br;function or(I){var y=-1,F=I==null?0:I.length;for(this.__data__=new hn;++y<F;)this.add(I[y])}function hi(I){return this.__data__.set(I,o),this}function Pr(I){return this.__data__.has(I)}or.prototype.add=or.prototype.push=hi,or.prototype.has=Pr;function pn(I){var y=this.__data__=new sn(I);this.size=y.size}function pi(){this.__data__=new sn,this.size=0}function Xi(I){var y=this.__data__,F=y.delete(I);return this.size=y.size,F}function $r(I){return this.__data__.get(I)}function vs(I){return this.__data__.has(I)}function Eo(I,y){var F=this.__data__;if(F instanceof sn){var z=F.__data__;if(!nr||z.length<r-1)return z.push([I,y]),this.size=++F.size,this;F=this.__data__=new hn(z)}return F.set(I,y),this.size=F.size,this}pn.prototype.clear=pi,pn.prototype.delete=Xi,pn.prototype.get=$r,pn.prototype.has=vs,pn.prototype.set=Eo;function So(I,y){var F=Gr(I),z=!F&&Mo(I),fe=!F&&!z&&yi(I),he=!F&&!z&&!fe&&to(I),we=F||z||fe||he,Ne=we?_e(I.length,String):[],ye=Ne.length;for(var Ce in I)vt.call(I,Ce)&&!(we&&(Ce=="length"||fe&&(Ce=="offset"||Ce=="parent")||he&&(Ce=="buffer"||Ce=="byteLength"||Ce=="byteOffset")||Bo(Ce,ye)))&&Ne.push(Ce);return Ne}function jr(I,y){for(var F=I.length;F--;)if(mi(I[F][0],y))return F;return-1}function Yi(I,y,F){var z=y(I);return Gr(I)?z:en(z,F(I))}function kr(I){return I==null?I===void 0?$:v:fn&&fn in Object(I)?To(I):Ji(I)}function Zi(I){return Ur(I)&&kr(I)==l}function Lr(I,y,F,z,fe){return I===y?!0:I==null||y==null||!Ur(I)&&!Ur(y)?I!==I&&y!==y:Hr(I,y,F,z,Lr,fe)}function Hr(I,y,F,z,fe,he){var we=Gr(I),Ne=Gr(y),ye=we?f:bn(I),Ce=Ne?f:bn(y);ye=ye==l?N:ye,Ce=Ce==l?N:Ce;var Xe=ye==N,it=Ce==N,ut=ye==Ce;if(ut&&yi(I)){if(!yi(y))return!1;we=!0,Xe=!1}if(ut&&!Xe)return he||(he=new pn),we||to(I)?qr(I,y,F,z,fe,he):Ds(I,y,ye,F,z,fe,he);if(!(F&s)){var nt=Xe&&vt.call(I,"__wrapped__"),Ht=it&&vt.call(y,"__wrapped__");if(nt||Ht){var Cn=nt?I.value():I,Un=Ht?y.value():y;return he||(he=new pn),fe(Cn,Un,F,z,he)}}return ut?(he||(he=new pn),No(I,y,F,z,fe,he)):!1}function Ki(I){if(!eo(I)||Oo(I))return!1;var y=Gn(I)?ln:ue;return y.test(On(I))}function Ao(I){return Ur(I)&&zo(I.length)&&!!de[kr(I)]}function Fo(I){if(!Vr(I))return Br(I);var y=[];for(var F in Object(I))vt.call(I,F)&&F!="constructor"&&y.push(F);return y}function qr(I,y,F,z,fe,he){var we=F&s,Ne=I.length,ye=y.length;if(Ne!=ye&&!(we&&ye>Ne))return!1;var Ce=he.get(I);if(Ce&&he.get(y))return Ce==y;var Xe=-1,it=!0,ut=F&c?new or:void 0;for(he.set(I,y),he.set(y,I);++Xe<Ne;){var nt=I[Xe],Ht=y[Xe];if(z)var Cn=we?z(Ht,nt,Xe,y,I,he):z(nt,Ht,Xe,I,y,he);if(Cn!==void 0){if(Cn)continue;it=!1;break}if(ut){if(!$e(y,function(Un,Cr){if(!Bt(ut,Cr)&&(nt===Un||fe(nt,Un,F,z,he)))return ut.push(Cr)})){it=!1;break}}else if(!(nt===Ht||fe(nt,Ht,F,z,he))){it=!1;break}}return he.delete(I),he.delete(y),it}function Ds(I,y,F,z,fe,he,we){switch(F){case Q:if(I.byteLength!=y.byteLength||I.byteOffset!=y.byteOffset)return!1;I=I.buffer,y=y.buffer;case te:return!(I.byteLength!=y.byteLength||!he(new Ct(I),new Ct(y)));case d:case g:case E:return mi(+I,+y);case m:return I.name==y.name&&I.message==y.message;case P:case G:return I==y+"";case _:var Ne=Lt;case H:var ye=z&s;if(Ne||(Ne=tn),I.size!=y.size&&!ye)return!1;var Ce=we.get(I);if(Ce)return Ce==y;z|=c,we.set(I,y);var Xe=qr(Ne(I),Ne(y),z,fe,he,we);return we.delete(I),Xe;case J:if(wn)return wn.call(I)==wn.call(y)}return!1}function No(I,y,F,z,fe,he){var we=F&s,Ne=gi(I),ye=Ne.length,Ce=gi(y),Xe=Ce.length;if(ye!=Xe&&!we)return!1;for(var it=ye;it--;){var ut=Ne[it];if(!(we?ut in y:vt.call(y,ut)))return!1}var nt=he.get(I);if(nt&&he.get(y))return nt==y;var Ht=!0;he.set(I,y),he.set(y,I);for(var Cn=we;++it<ye;){ut=Ne[it];var Un=I[ut],Cr=y[ut];if(z)var xs=we?z(Cr,Un,ut,y,I,he):z(Un,Cr,ut,I,y,he);if(!(xs===void 0?Un===Cr||fe(Un,Cr,F,z,he):xs)){Ht=!1;break}Cn||(Cn=ut=="constructor")}if(Ht&&!Cn){var no=I.constructor,Gt=y.constructor;no!=Gt&&"constructor"in I&&"constructor"in y&&!(typeof no=="function"&&no instanceof no&&typeof Gt=="function"&&Gt instanceof Gt)&&(Ht=!1)}return he.delete(I),he.delete(y),Ht}function gi(I){return Yi(I,_s,Io)}function sr(I,y){var F=I.__data__;return Ro(y)?F[typeof y=="string"?"string":"hash"]:F.map}function gn(I,y){var F=yt(I,y);return Ki(F)?F:void 0}function To(I){var y=vt.call(I,fn),F=I[fn];try{I[fn]=void 0;var z=!0}catch{}var fe=Ot.call(I);return z&&(y?I[fn]=F:delete I[fn]),fe}var Io=Bn?function(I){return I==null?[]:(I=Object(I),et(Bn(I),function(y){return on.call(I,y)}))}:tt,bn=kr;(Ft&&bn(new Ft(new ArrayBuffer(1)))!=Q||nr&&bn(new nr)!=_||Rr&&bn(Rr.resolve())!=R||Or&&bn(new Or)!=H||xr&&bn(new xr)!=Y)&&(bn=function(I){var y=kr(I),F=y==N?I.constructor:void 0,z=F?On(F):"";if(z)switch(z){case dn:return Q;case Pi:return _;case Mr:return R;case $i:return H;case zr:return Y}return y});function Bo(I,y){return y=y??u,!!y&&(typeof I=="number"||ge.test(I))&&I>-1&&I%1==0&&I<y}function Ro(I){var y=typeof I;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?I!=="__proto__":I===null}function Oo(I){return!!at&&at in I}function Vr(I){var y=I&&I.constructor,F=typeof y=="function"&&y.prototype||Rt;return I===F}function Ji(I){return Ot.call(I)}function On(I){if(I!=null){try{return nn.call(I)}catch{}try{return I+""}catch{}}return""}function mi(I,y){return I===y||I!==I&&y!==y}var Mo=Zi(function(){return arguments}())?Zi:function(I){return Ur(I)&&vt.call(I,"callee")&&!on.call(I,"callee")},Gr=Array.isArray;function Qi(I){return I!=null&&zo(I.length)&&!Gn(I)}var yi=xn||Ze;function ar(I,y){return Lr(I,y)}function Gn(I){if(!eo(I))return!1;var y=kr(I);return y==x||y==b||y==p||y==T}function zo(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=u}function eo(I){var y=typeof I;return I!=null&&(y=="object"||y=="function")}function Ur(I){return I!=null&&typeof I=="object"}var to=Qe?kt(Qe):Ao;function _s(I){return Qi(I)?So(I):Fo(I)}function tt(){return[]}function Ze(){return!1}e.exports=ar})(qu,qu.exports);var nm=qu.exports,rm=200,Tf="__lodash_hash_undefined__",O6=1/0,M6=9007199254740991,z6="[object Function]",P6="[object GeneratorFunction]",$6=/[\\^$.*+?()[\]{}|]/g,j6=/^\[object .+?Constructor\]$/,k6=typeof Qt=="object"&&Qt&&Qt.Object===Object&&Qt,L6=typeof self=="object"&&self&&self.Object===Object&&self,If=k6||L6||Function("return this")();function H6(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function q6(e,n){for(var r=-1,o=e?e.length:0,s=0,c=[];++r<o;){var u=e[r];n(u,r,e)&&(c[s++]=u)}return c}function im(e,n){var r=e?e.length:0;return!!r&&U6(e,n,0)>-1}function V6(e,n){for(var r=-1,o=n.length,s=e.length;++r<o;)e[s+r]=n[r];return e}function G6(e,n,r,o){for(var s=e.length,c=r+-1;++c<s;)if(n(e[c],c,e))return c;return-1}function U6(e,n,r){if(n!==n)return G6(e,W6,r);for(var o=r-1,s=e.length;++o<s;)if(e[o]===n)return o;return-1}function W6(e){return e!==e}function om(e,n){return e.has(n)}function X6(e,n){return e?.[n]}function Y6(e){var n=!1;if(e!=null&&typeof e.toString!="function")try{n=!!(e+"")}catch{}return n}function sm(e){var n=-1,r=Array(e.size);return e.forEach(function(o){r[++n]=o}),r}var Z6=Array.prototype,K6=Function.prototype,am=Object.prototype,Dl=If["__core-js_shared__"],kp=function(){var e=/[^.]+$/.exec(Dl&&Dl.keys&&Dl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),um=K6.toString,Bf=am.hasOwnProperty,J6=am.toString,Q6=RegExp("^"+um.call(Bf).replace($6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),e8=Z6.splice,Lp=Math.max,t8=Rf(If,"Map"),_l=Rf(If,"Set"),aa=Rf(Object,"create");function xo(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function n8(){this.__data__=aa?aa(null):{}}function r8(e){return this.has(e)&&delete this.__data__[e]}function i8(e){var n=this.__data__;if(aa){var r=n[e];return r===Tf?void 0:r}return Bf.call(n,e)?n[e]:void 0}function o8(e){var n=this.__data__;return aa?n[e]!==void 0:Bf.call(n,e)}function s8(e,n){var r=this.__data__;return r[e]=aa&&n===void 0?Tf:n,this}xo.prototype.clear=n8;xo.prototype.delete=r8;xo.prototype.get=i8;xo.prototype.has=o8;xo.prototype.set=s8;function ps(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function a8(){this.__data__=[]}function u8(e){var n=this.__data__,r=ec(n,e);if(r<0)return!1;var o=n.length-1;return r==o?n.pop():e8.call(n,r,1),!0}function c8(e){var n=this.__data__,r=ec(n,e);return r<0?void 0:n[r][1]}function l8(e){return ec(this.__data__,e)>-1}function f8(e,n){var r=this.__data__,o=ec(r,e);return o<0?r.push([e,n]):r[o][1]=n,this}ps.prototype.clear=a8;ps.prototype.delete=u8;ps.prototype.get=c8;ps.prototype.has=l8;ps.prototype.set=f8;function gs(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function d8(){this.__data__={hash:new xo,map:new(t8||ps),string:new xo}}function h8(e){return tc(this,e).delete(e)}function p8(e){return tc(this,e).get(e)}function g8(e){return tc(this,e).has(e)}function m8(e,n){return tc(this,e).set(e,n),this}gs.prototype.clear=d8;gs.prototype.delete=h8;gs.prototype.get=p8;gs.prototype.has=g8;gs.prototype.set=m8;function ua(e){var n=-1,r=e?e.length:0;for(this.__data__=new gs;++n<r;)this.add(e[n])}function y8(e){return this.__data__.set(e,Tf),this}function v8(e){return this.__data__.has(e)}ua.prototype.add=ua.prototype.push=y8;ua.prototype.has=v8;function ec(e,n){for(var r=e.length;r--;)if(F8(e[r][0],n))return r;return-1}function Hp(e,n,r,o){var s=-1,c=im,u=!0,l=e.length,f=[],p=n.length;if(!l)return f;n.length>=rm&&(c=om,u=!1,n=new ua(n));e:for(;++s<l;){var d=e[s],g=d;if(d=d!==0?d:0,u&&g===g){for(var m=p;m--;)if(n[m]===g)continue e;f.push(d)}else c(n,g,o)||f.push(d)}return f}function D8(e){if(!lm(e)||E8(e))return!1;var n=cm(e)||Y6(e)?Q6:j6;return n.test(S8(e))}function _8(e,n){return n=Lp(n===void 0?e.length-1:n,0),function(){for(var r=arguments,o=-1,s=Lp(r.length-n,0),c=Array(s);++o<s;)c[o]=r[n+o];o=-1;for(var u=Array(n+1);++o<n;)u[o]=r[o];return u[n]=c,H6(e,this,u)}}function x8(e,n,r){var o=-1,s=im,c=e.length,u=!0,l=[],f=l;if(c>=rm){var p=b8(e);if(p)return sm(p);u=!1,s=om,f=new ua}else f=l;e:for(;++o<c;){var d=e[o],g=d;if(d=d!==0?d:0,u&&g===g){for(var m=f.length;m--;)if(f[m]===g)continue e;l.push(d)}else s(f,g,r)||(f!==l&&f.push(g),l.push(d))}return l}function w8(e,n,r){for(var o=-1,s=e.length;++o<s;)var c=c?V6(Hp(c,e[o],n,r),Hp(e[o],c,n,r)):e[o];return c&&c.length?x8(c,n,r):[]}var b8=_l&&1/sm(new _l([,-0]))[1]==O6?function(e){return new _l(e)}:R8;function tc(e,n){var r=e.__data__;return C8(n)?r[typeof n=="string"?"string":"hash"]:r.map}function Rf(e,n){var r=X6(e,n);return D8(r)?r:void 0}function C8(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function E8(e){return!!kp&&kp in e}function S8(e){if(e!=null){try{return um.call(e)}catch{}try{return e+""}catch{}}return""}var A8=_8(function(e){return w8(q6(e,T8))});function F8(e,n){return e===n||e!==e&&n!==n}function N8(e){return e!=null&&I8(e.length)&&!cm(e)}function T8(e){return B8(e)&&N8(e)}function cm(e){var n=lm(e)?J6.call(e):"";return n==z6||n==P6}function I8(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=M6}function lm(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function B8(e){return!!e&&typeof e=="object"}function R8(){}var O8=A8,fm=9007199254740991,M8="[object Arguments]",z8="[object Function]",P8="[object GeneratorFunction]",$8=/^(?:0|[1-9]\d*)$/;function j8(e,n){for(var r=-1,o=Array(e);++r<e;)o[r]=n(r);return o}function k8(e,n){return function(r){return e(n(r))}}var nc=Object.prototype,Of=nc.hasOwnProperty,dm=nc.toString,L8=nc.propertyIsEnumerable,H8=k8(Object.keys,Object);function q8(e,n){var r=X8(e)||W8(e)?j8(e.length,String):[],o=r.length,s=!!o;for(var c in e)Of.call(e,c)&&!(s&&(c=="length"||G8(c,o)))&&r.push(c);return r}function V8(e){if(!U8(e))return H8(e);var n=[];for(var r in Object(e))Of.call(e,r)&&r!="constructor"&&n.push(r);return n}function G8(e,n){return n=n??fm,!!n&&(typeof e=="number"||$8.test(e))&&e>-1&&e%1==0&&e<n}function U8(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||nc;return e===r}function W8(e){return Y8(e)&&Of.call(e,"callee")&&(!L8.call(e,"callee")||dm.call(e)==M8)}var X8=Array.isArray;function hm(e){return e!=null&&K8(e.length)&&!Z8(e)}function Y8(e){return Q8(e)&&hm(e)}function Z8(e){var n=J8(e)?dm.call(e):"";return n==z8||n==P8}function K8(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fm}function J8(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function Q8(e){return!!e&&typeof e=="object"}function e4(e){return hm(e)?q8(e):V8(e)}var t4=e4;function Cu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cu=function(r){return typeof r}:Cu=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Cu(e)}var n4={string:function(n){return typeof n=="string"},number:function(n){return typeof n=="number"&&isFinite(n)},integer:function(n){return typeof n=="number"&&n%1===0},boolean:function(n){return typeof n=="boolean"},array:function(n){return n instanceof Array},null:function(n){return n===null},date:function(n){return n instanceof Date},any:function(n){return!0},object:function(n){return n&&Cu(n)==="object"&&!(n instanceof Array)&&!(n instanceof Date)}},er={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w!#$%&'*+-/=?^`{|}~]+\.)*[\w!#$%&'*+-/=?^`{|}~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(n){return typeof n=="string"&&parseFloat(n)===parseInt(n,10)&&!isNaN(n)},regex:function(n){var r=!0;try{new RegExp(n)}catch{r=!1}return r},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};er.regexp=er.regex;er.pattern=er.regex;er.ipv4=er["ip-address"];var r4=function(n,r){if(typeof n=="string"&&er[r]!==void 0){if(er[r]instanceof RegExp)return er[r].test(n);if(typeof er[r]=="function")return er[r](n)}return!0},i4={types:n4,isFormat:r4,FORMAT_REGEXPS:er},cu=nm,o4=O8,lu=t4,Mf=i4,s4=Mf.types,a4=Mf.FORMAT_REGEXPS,u4=Mf.isFormat,Eu={stringFormats:lu(a4),isFormat:u4,typeNames:["integer","number","string","array","object","boolean","null","date"],getType:function(n){return Eu.typeNames.find(function(r){return s4[r](n)})},mergeSchemaObjs:function(n,r){var o=lu(n),s=lu(r);if(!cu(o,s)){if(n.type==="array"&&r.type==="array"&&cu(o4(o,s),["items"])){var c=o.length>s.length?r:n,u=o.length>s.length?n:r,l=lu(c).reduce(function(x,b){return cu(c[b],u[b])&&x},!0);if(l)return c}if(n.type!=="object"||r.type!=="object")return null}for(var f={},p=0,d=o.length;p<d;p++){var g=o[p];if(Eu.getType(n[g])==="object"){var m=Eu.mergeSchemaObjs(n[g],r[g]);if(m)f[g]=m;else{if(n.type==="object"||r.type==="object")return{type:"object"};if(g!=="items"||n.type!=="array"||r.type!=="array")return null}}else if(g==="type")if(n[g]!==r[g])if(n[g]==="integer"&&r[g]==="number"||n[g]==="number"&&r[g]==="integer")f[g]="number";else return null;else f[g]=n[g];else{if(!cu(n[g],r[g]))return null;f[g]=n[g]}}return f}},c4=Eu;function l4(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function f4(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function d4(e,n,r){return n&&f4(e.prototype,n),e}var xl=R6,h4=nm,Zs=c4,p4={required:!1,postProcessFnc:null,strings:{detectFormat:!0,preProcessFnc:null},arrays:{mode:"all"},objects:{preProcessFnc:null,postProcessFnc:null,additionalProperties:!0}},g4=["hostname","host-name","alpha","alphanumeric","regex","regexp","pattern"],qp=Zs.stringFormats.filter(function(e){return g4.indexOf(e)<0});function m4(e){for(var n,r=0,o=e.length;r<o;r++){var s=e[r];if(r>0&&(s==="integer"&&n==="number"?s="number":s==="number"&&n==="integer"&&(n="number"),n!==s))return null;n=s}return n}function y4(e){return m4(e.map(function(n){return Zs.getType(n)}))}var v4=function(){function e(n){l4(this,e),this.options=xl({},p4,n),this.getObjectSchemaDefault=this.getObjectSchemaDefault.bind(this),this.getStringSchemaDefault=this.getStringSchemaDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this),this.commmonPostProcessDefault=this.commmonPostProcessDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this)}return d4(e,[{key:"getCommonArrayItemSchema",value:function(r){var o=this,s=r.map(function(c){return o.getSchema(c)});return s.reduce(function(c,u){return Zs.mergeSchemaObjs(c,u)},s.pop())}},{key:"getObjectSchemaDefault",value:function(r){var o=this,s={type:"object"},c=Object.keys(r);return c.length>0&&(s.properties=c.reduce(function(u,l){return u[l]=o.getSchema(r[l]),u},{})),s}},{key:"getObjectSchema",value:function(r){return this.options.objects.preProcessFnc?this.options.objects.preProcessFnc(r,this.getObjectSchemaDefault):this.getObjectSchemaDefault(r)}},{key:"getArraySchemaMerging",value:function(r){var o={type:"array"},s=y4(r);if(s)if(o.items={type:s},s!=="integer"&&s!=="number"){var c=this.getCommonArrayItemSchema(r);c&&(o.items=c)}else this.options.required&&(o.items.required=!0);return o}},{key:"getArraySchemaNoMerging",value:function(r){var o={type:"array"};return r.length>0&&(o.items=this.getSchema(r[0])),o}},{key:"getArraySchemaTuple",value:function(r){var o=this,s={type:"array"};return r.length>0&&(s.items=r.map(function(c){return o.getSchema(c)})),s}},{key:"getArraySchemaUniform",value:function(r){var o=this.getArraySchemaNoMerging(r);if(r.length>1){for(var s=1;s<r.length;s++)if(!h4(o.items,this.getSchema(r[s])))throw new Error("Invalid schema, incompatible array items")}return o}},{key:"getArraySchema",value:function(r){if(r.length===0)return{type:"array"};switch(this.options.arrays.mode){case"all":return this.getArraySchemaMerging(r);case"first":return this.getArraySchemaNoMerging(r);case"uniform":return this.getArraySchemaUniform(r);case"tuple":return this.getArraySchemaTuple(r);default:throw new Error("Unknown array mode option '".concat(this.options.arrays.mode,"'"))}}},{key:"getStringSchemaDefault",value:function(r){var o={type:"string"};if(!this.options.strings.detectFormat)return o;var s=qp.findIndex(function(c){return Zs.isFormat(r,c)});return s>=0&&(o.format=qp[s]),o}},{key:"getStringSchema",value:function(r){return this.options.strings.preProcessFnc?this.options.strings.preProcessFnc(r,this.getStringSchemaDefault):this.getStringSchemaDefault(r)}},{key:"commmonPostProcessDefault",value:function(r,o,s){return this.options.required?xl({},o,{required:!0}):o}},{key:"objectPostProcessDefault",value:function(r,o){return this.options.objects.additionalProperties===!1&&Object.getOwnPropertyNames(o).length>0?xl({},r,{additionalProperties:!1}):r}},{key:"getSchema",value:function(r){var o=Zs.getType(r);if(!o)throw new Error("Type of value couldn't be determined");var s;switch(o){case"object":s=this.getObjectSchema(r);break;case"array":s=this.getArraySchema(r);break;case"string":s=this.getStringSchema(r);break;default:s={type:o}}return this.options.postProcessFnc?s=this.options.postProcessFnc(o,s,r,this.commmonPostProcessDefault):s=this.commmonPostProcessDefault(o,s,r),o==="object"&&(this.options.objects.postProcessFnc?s=this.options.objects.postProcessFnc(s,r,this.objectPostProcessDefault):s=this.objectPostProcessDefault(s,r)),s}}]),e}();function D4(e,n){var r=new v4(n);return r.getSchema(e)}var _4=D4;const x4=i0(_4),pm=e=>{const{isOpen:n,onDismiss:r,onSuccess:o,model:s}=e,{token:c}=Kl.useToken(),[u,l]=A.useState("");return A.useEffect(()=>{n&&s&&l(s)},[n]),S.jsxs(Wu,{title:"Convert to JSON Schema",open:n,destroyOnClose:!0,onCancel:r,width:540,okText:"Convert",onOk:()=>{try{o?.({schema:JSON.stringify(x4(Ii.parse(u)),null,2),model:u})}catch(f){zt.error(f?.message)}},children:[S.jsx(Pt.Text,{children:"Type or paste JSON or JSON5 model here and covert it to JSON Schema"}),S.jsx(ef,{loading:S.jsx(us,{size:"large"}),language:"javascript",theme:c.mode==="dark"?"vs-dark":"light",height:"400px",onChange:f=>l(f||""),value:u||"",onMount:(f,p)=>{p.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),p.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),f.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async d=>{try{await Au(JSON.stringify(Ii.parse(d.getValue()))),zt.success("Copied to clipboard!")}catch{zt.error("Failed to copy to clipboard.")}}}),f.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:d=>{const g=JSON.stringify(Ii.parse(d.getValue()),null,2);d.setValue(g)}})},options:{automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})]})};pm.__docgenInfo={description:"",methods:[],displayName:"JsonToJsonSchemaDialog",props:{id:{required:!1,tsType:{name:"string"},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { schema: string; model: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ schema: string; model: string }",signature:{properties:[{key:"schema",value:{name:"string",required:!0}},{key:"model",value:{name:"string",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""},onDismiss:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""},model:{required:!1,tsType:{name:"string"},description:""}}};const w4="Provide JSON Schema format. If no JSON Schema is provided, validation will be skipped.",Vp={automaticLayout:!0,contextmenu:!1,fontSize:13,fontFamily:"var(--mono-font-family)",tabSize:2,minimap:{enabled:!1},overviewRulerBorder:!1,scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4}};var gm=(e=>(e.Schema="Schema",e))(gm||{});const zf=({id:e,type:n="input"})=>{const r=$t(),o="json",{token:s}=Kl.useToken(),[c,u]=A.useState(!1),[l,f]=A.useState("Schema"),[p,d]=A.useState(),[g,m]=A.useState(),x=jh(()=>p?.layout(),100,{trailing:!0}),b=jh(()=>g?.layout(),100,{trailing:!0}),{disabled:_,content:E}=lt(({simulate:R,disabled:T,configurable:P,decisionGraph:H})=>({nodeError:ke(R).with({error:{data:{nodeId:e}}},({error:G})=>G).otherwise(()=>null),disabled:T,configurable:P,content:(H?.nodes??[]).find(G=>G.id===e)?.content})),{contentDiff:v}=ha(e),N=A.useMemo(()=>v?.fields?.schema?.previousValue,[v]);return A.useEffect(()=>(window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[x,p]),A.useEffect(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[b,g]),S.jsx("div",{className:"grl-node-content","data-theme":s.mode,style:{height:"100%","--color-text":s.colorTextBase,"--color-background-elevated":s.colorBgElevated,"--color-border":s.colorBorder,"--line-height":s.lineHeight},children:S.jsx(p0,{className:"grl-node-content-main",direction:"horizontal",autoSaveId:`jdm-editor:${n}:schema:layout`,children:S.jsx("div",{className:"grl-node-content-side",children:S.jsxs("div",{className:"grl-node-content-side__panel",children:[S.jsx("div",{className:"grl-node-content-side__header",children:S.jsx(Ql,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},items:Object.values(gm).map(R=>({key:R,label:S.jsxs("span",{children:[R," ",S.jsx(gr,{title:w4,children:S.jsx(S0,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})})]})})),activeKey:l,onChange:R=>f(R),tabBarExtraContent:S.jsxs(d0,{style:{marginRight:8},size:"small",children:[S.jsx(gr,{title:"Format code",placement:"bottomRight",children:S.jsx(ot,{size:"small",type:"text",disabled:_,icon:S.jsx(Gw,{}),onClick:()=>p?.getAction?.("editor.action.formatDocument")?.run?.()})}),S.jsx(gr,{title:"Import from JSON",placement:"bottomRight",children:S.jsx(ot,{type:"text",size:"small",disabled:_,icon:S.jsx(Fw,{}),onClick:()=>{u(!0)}})})]})})}),S.jsx("div",{className:"grl-node-content-side__body",children:ke(l).with("Schema",()=>N!==void 0?S.jsx(Uw,{loading:S.jsx(us,{size:"large"}),language:o,original:N,modified:E?.schema,onMount:R=>m(R),theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...Vp,readOnly:!0}}):S.jsx(ef,{loading:S.jsx(us,{size:"large"}),language:o,value:E?.schema||"",onMount:R=>d(R),onChange:R=>{r.updateNode(e,T=>(T.content={schema:R},T))},theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...Vp,readOnly:_}})).exhaustive()}),S.jsx(pm,{isOpen:c,onDismiss:()=>u(!1),onSuccess:({schema:R,model:T})=>{localStorage.setItem(`${e}-model`,T),r.updateNode(e,P=>(P.content={schema:R},P)),u(!1)},model:localStorage.getItem(`${e}-model`)||void 0})]})})})})};zf.__docgenInfo={description:"",methods:[],displayName:"TabJsonSchema",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""},type:{required:!1,tsType:{name:"union",raw:"'input' | 'output'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'output'"}]},description:"",defaultValue:{value:"'input'",computed:!1}}}};const Pf={type:He.Input,icon:S.jsx(sb,{}),displayName:"Request",color:bo.Green,documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Provides input context",generateNode:()=>({name:"request",content:{schema:""}}),renderTab:({id:e,manager:n})=>S.jsx(zf,{id:e,manager:n,type:"input"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=$t(),{disabled:c}=lt(({disabled:u})=>({disabled:u}));return S.jsx(zi,{id:e,specification:o,name:n.name,isSelected:r,handleLeft:!1,actions:[S.jsx(ot,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")],menuItems:[{key:"documentation",icon:S.jsx(E0,{}),label:"Documentation",onClick:()=>window.open(o.documentationUrl,"_href")},{key:"delete",icon:S.jsx(Gu,{}),danger:!0,label:S.jsx(qs,{left:"Delete",right:wu.shortcut("Backspace")}),disabled:c,onClick:()=>Wu.confirm({icon:null,title:"Delete node",content:S.jsxs(Pt.Text,{children:["Are you sure you want to delete ",S.jsx(Pt.Text,{strong:!0,children:n.name})," node."]}),okButtonProps:{danger:!0},onOk:()=>s.removeNodes([e])})}]})},getDiffContent:(e,n)=>{const r={};return gt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&St.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}},$f={type:He.Output,icon:S.jsx(cb,{}),color:bo.Green,displayName:"Response",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Outputs the context",generateNode:()=>({name:"response",content:{schema:""}}),renderTab:({id:e,manager:n})=>S.jsx(zf,{id:e,manager:n,type:"output"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=$t();return S.jsx(zi,{id:e,specification:o,name:n.name,isSelected:r,handleRight:!1,actions:[S.jsx(ot,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")]})},getDiffContent:(e,n)=>{const r={};return gt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&St.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}};var Ul=new Map,fu=new WeakMap,Gp=0,b4=void 0;function C4(e){return e?(fu.has(e)||(Gp+=1,fu.set(e,Gp.toString())),fu.get(e)):"0"}function E4(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?C4(e.root):e[n]}`).toString()}function S4(e){const n=E4(e);let r=Ul.get(n);if(!r){const o=new Map;let s;const c=new IntersectionObserver(u=>{u.forEach(l=>{var f;const p=l.isIntersecting&&s.some(d=>l.intersectionRatio>=d);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=p),(f=o.get(l.target))==null||f.forEach(d=>{d(p,l)})})},e);s=c.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:n,observer:c,elements:o},Ul.set(n,r)}return r}function A4(e,n,r={},o=b4){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const f=e.getBoundingClientRect();return n(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:f,intersectionRect:f,rootBounds:f}),()=>{}}const{id:s,observer:c,elements:u}=S4(r),l=u.get(e)||[];return u.has(e)||u.set(e,l),l.push(n),c.observe(e),function(){l.splice(l.indexOf(n),1),l.length===0&&(u.delete(e),c.unobserve(e)),u.size===0&&(c.disconnect(),Ul.delete(s))}}function F4({threshold:e,delay:n,trackVisibility:r,rootMargin:o,root:s,triggerOnce:c,skip:u,initialInView:l,fallbackInView:f,onChange:p}={}){var d;const[g,m]=A.useState(null),x=A.useRef(p),[b,_]=A.useState({inView:!!l,entry:void 0});x.current=p,A.useEffect(()=>{if(u||!g)return;let R;return R=A4(g,(T,P)=>{_({inView:T,entry:P}),x.current&&x.current(T,P),P.isIntersecting&&c&&R&&(R(),R=void 0)},{root:s,rootMargin:o,threshold:e,trackVisibility:r,delay:n},f),()=>{R&&R()}},[Array.isArray(e)?e.toString():e,g,s,o,c,u,r,f,n]);const E=(d=b.entry)==null?void 0:d.target,v=A.useRef(void 0);!g&&E&&!c&&!u&&v.current!==E&&(v.current=E,_({inView:!!l,entry:void 0}));const N=[m,b.inView,b.entry];return N.ref=N[0],N.inView=N[1],N.entry=N[2],N}const mm={type:He.Switch,icon:S.jsx(O2,{}),displayName:"Switch",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/switch",shortDescription:"Conditional branching",color:bo.Purple,getDiffContent:(e,n)=>gt(e,r=>{const o={};(e.hitPolicy??"")!==(n.hitPolicy??"")&&St.set(o,"hitPolicy",{status:"modified",previousValue:e.hitPolicy});const s=Ks(e?.statements||[],n?.statements||[],{compareFields:(c,u)=>{const l=(c.condition??"")!==u.condition;return{hasChanges:l,fields:{...l&&{condition:{status:"modified",previousValue:u.condition}}}}}});return r.statements=s,s.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&St.set(o,"statements",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:()=>!1,determineOutputType:e=>e.input},generateNode:({index:e})=>({name:`switch${e}`,content:{hitPolicy:"first",statements:[{id:crypto.randomUUID(),condition:"",isDefault:!1}]}}),renderNode:({specification:e,...n})=>S.jsx(N4,{specification:e,...n})},N4=({id:e,data:n,selected:r,specification:o})=>{const s=$t(),{ref:c,inView:u}=F4({delay:1e3}),{content:l,disabled:f,nodeTrace:p,compactMode:d,isGraphActive:g}=lt(({decisionGraph:v,disabled:N,simulate:R,compactMode:T,activeTab:P})=>({nodeTrace:ke(R).with({result:qe._},({result:H})=>H?.trace?.[e]).otherwise(()=>null),content:(v?.nodes||[]).find(H=>H?.id===e)?.content,disabled:N,compactMode:T,isGraphActive:P==="graph"})),m=ms(e,{disabled:!g||!u}),x=l?.statements||[],b=l?.hitPolicy||"first",_=v=>{s.updateNode(e,N=>(N.content.hitPolicy=v,N))},E=A.useMemo(()=>d?I4:T4,[d]);return S.jsx(zi,{id:e,ref:c,className:Ye(["switch"]),specification:o,name:n.name,handleRight:!1,helper:[S.jsx(Jl,{},"arrow-right")],noBodyPadding:!0,isSelected:r,actions:[S.jsx(ot,{type:"text",disabled:f,onClick:()=>{b==="first"&&x?.length>0?s.updateNode(e,v=>(v.content.statements=(v.content.statements||[]).map(N=>(N.isDefault&&(N.isDefault=!1),N)),v.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!0}),v)):s.updateNode(e,v=>(v.content.statements=(v.content.statements||[]).map(N=>(N.isDefault&&(N.isDefault=!1),N)),v.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!1}),v))},children:"Add Condition"},"add condition"),S.jsx(Js,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>_("first"),disabled:f},{key:"collect",label:"Collect",disabled:f,onClick:()=>{s.updateNode(e,v=>(v.content.statements=(v.content.statements||[]).map(N=>(N.isDefault&&(N.isDefault=!1),N)),v)),_("collect")}}]},children:S.jsxs(ot,{type:"text",style:{textTransform:"capitalize",marginLeft:"auto"},children:[b," ",S.jsx(Nw,{})]})},"hitPolicy")],children:S.jsx("div",{className:"switchNode",children:S.jsxs("div",{className:"switchNode__body edit nodrag",children:[!(x?.length>0)&&S.jsx(Pt.Text,{type:"secondary",className:"no-conditions",children:"No conditions"}),x.map((v,N)=>S.jsx(E,{index:N,value:v.condition,diff:v?._diff,id:v.id,isDefault:v.isDefault,totalStatements:x.length,disabled:f,hitPolicy:b,variableType:m,onSetIsDefault:R=>{s.updateNode(e,T=>{const P=T.content.statements.find(H=>H.id===v.id);return R&&(P.condition=""),P.isDefault=R,T})},isActive:ke(p?.traceData).with({statements:qe.array(qe._)},({statements:R})=>R.some(T=>typeof T=="object"&&T&&"id"in T&&T.id===v?.id)).otherwise(()=>!1),onDelete:()=>{s.updateNode(e,R=>(R.content.statements=R.content.statements.filter(T=>T?.id!==v?.id),(R.content.statements||[]).length===1&&(R.content.statements=(R.content.statements||[]).map(T=>(T.isDefault&&(T.isDefault=!1),T))),R)),s.removeEdgeByHandleId(v?.id)},onChange:R=>{s.updateNode(e,T=>{const P=T.content.statements.find(H=>H.id===v.id);return P.condition=R,T})}},v.id))]})})})},T4=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:c=!0,onDelete:u,isActive:l,index:f=0,isDefault:p=!1,onSetIsDefault:d,totalStatements:g,hitPolicy:m,variableType:x})=>{const[b,_]=A.useState(n);A.useLayoutEffect(()=>{b!==n&&_(n)},[n]);const E=R=>{_(R),o?.(R)},v=f===g-1,N=p&&m==="first"&&v&&f>0&&(n||"")?.trim?.()?.length===0;return S.jsxs("div",{className:Ye("switchNode__statement",l&&"active",r?.status&&`diff-${r?.status}`),children:[S.jsxs("div",{className:Ye("switchNode__statement__heading",N&&"switchNode__statement__heading--without-input"),children:[(f===0||m==="collect")&&S.jsx(ot,{disabled:s,className:Ye("switchNode__statement__heading__action"),size:"small",type:"text",children:"If"}),m!=="collect"&&f>0&&S.jsx(ot,{className:Ye("switchNode__statement__heading__action",N&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{v&&m==="first"&&d?.(!1)},children:"Else If"}),m!=="collect"&&f>0&&v&&S.jsx(ot,{className:Ye("switchNode__statement__heading__action",!N&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{v&&m==="first"&&d?.(!0)},children:"Else"}),S.jsx("div",{style:{flexGrow:1}}),!s&&c&&S.jsx(a0,{title:"Remove condition?",okText:"Remove",onConfirm:()=>u?.(),children:S.jsx(ot,{className:"switchNode__statement__delete",size:"small",type:"text",icon:S.jsx(Gu,{})})}),S.jsx(Mi,{id:e,type:"source",position:xe.Right,className:Ye(l&&"switchNode__activeHandle")})]}),!N&&S.jsx("div",{className:"switchNode__statement__inputArea",children:S.jsx(Vu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:b,maxRows:4,disabled:s,onChange:E,variableType:x})})]})},I4=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:c=!0,onDelete:u,isActive:l,variableType:f})=>{const[p,d]=A.useState(n);A.useLayoutEffect(()=>{p!==n&&d(n)},[n]);const g=m=>{d(m),o?.(m)};return S.jsxs("div",{className:Ye("switchNode__statement","compact",l&&"active",r?.status&&`diff-${r?.status}`),children:[S.jsx("div",{className:Ye("switchNode__statement__inputArea"),children:S.jsx(Vu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:p,maxRows:4,disabled:s,onChange:g,variableType:f})}),!s&&c&&S.jsx("div",{className:"switchNode__statement__button",children:S.jsx(a0,{title:"Remove condition?",okText:"Remove",onConfirm:()=>u?.(),children:S.jsx(ot,{className:"switchNode__statement__delete",size:"small",type:"text",icon:S.jsx(Gu,{})})})}),S.jsx(Mi,{id:e,type:"source",position:xe.Right,className:Ye(l&&"switchNode__activeHandle")})]})};const wo={[He.Input]:Pf,[He.Output]:$f,[He.DecisionTable]:jf,[He.Expression]:Ff,[He.Function]:Nf,[He.Switch]:mm},B4=(e,n)=>e[n]?.[ct.Input]??e[n]?.[ct.InferredInput]??kn.fromJson({Object:{}}),ms=(e,{attachGlobals:n=!0,disabled:r=!1}={})=>{const o=lt(({nodeTypes:s,globalType:c})=>{if(!(!Xs()||r))return{nodeTypes:s,globalType:c}});return A.useMemo(()=>{if(!o?.nodeTypes)return;const s=B4(o.nodeTypes,e);return n&&Object.entries(o?.globalType??{}).forEach(([c,u])=>s.set(c,u)),s},[o?.globalType,o?.nodeTypes,n])},ym=({id:e,manager:n})=>{const r=$t(),o=ms(e,{attachGlobals:!1}),{nodeTrace:s,disabled:c,configurable:u,content:l,globalType:f}=lt(({simulate:g,disabled:m,configurable:x,decisionGraph:b,globalType:_})=>({nodeTrace:ke(g).with({result:qe._},({result:E})=>E?.trace?.[e]).otherwise(()=>null),disabled:m,configurable:x,content:(b?.nodes??[]).find(E=>E.id===e)?.content,globalType:_})),p=s?.traceData!==void 0?Array.isArray(s?.traceData)?s?.traceData?.map(g=>g?.rule?._id):[s?.traceData?.rule?._id]:[],d=A.useMemo(()=>{if(!o)return;const g=ke(l?.inputField).with(qe.string,x=>o.get(x)).otherwise(()=>o),m=l?.executionMode==="loop"?g.arrayItem():g;return Object.entries(f).forEach(([x,b])=>m.set(x,b)),m},[o,f,l?.inputField,l?.executionMode]);return S.jsx(Tw,{id:e,tableHeight:"100%",value:l,manager:n,disabled:c,configurable:u,inputData:d,activeRules:(p||[]).filter(g=>!!g),onChange:g=>{r.updateNode(e,m=>(Object.assign(m.content,g),m))}})};ym.__docgenInfo={description:"",methods:[],displayName:"TabDecisionTable",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const jf={type:He.DecisionTable,icon:S.jsx(_b,{}),displayName:"Decision table",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/decision-tables",shortDescription:"Rules spreadsheet",renderTab:({id:e,manager:n})=>S.jsx(ym,{id:e,manager:n}),getDiffContent:(e,n)=>gt(e,r=>{const o={};(e.executionMode??"single")!==(n.executionMode??"single")&&St.set(o,"executionMode",{status:"modified",previousValue:n.executionMode}),(e.hitPolicy??"first")!==(n.hitPolicy??"first")&&St.set(o,"hitPolicy",{status:"modified",previousValue:n.hitPolicy}),(e.inputField??"")!==(n.inputField??"")&&St.set(o,"inputField",{status:"modified",previousValue:n.inputField}),(e.outputPath??"")!==(n.outputPath??"")&&St.set(o,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough??!1)!==(n.passThrough??!1)&&St.set(o,"passThrough",{status:"modified",previousValue:n.passThrough});const s=Ks(e?.inputs||[],n?.inputs||[],{compareFields:(l,f)=>{const p=(l.name??"")!==(f.name??""),d=(l.field??"")!==(f.field??""),g=(l.defaultValue??"")!==(f.defaultValue??"");return{hasChanges:p||d||g,fields:{...p&&{name:{status:"modified",previousValue:f.name}},...d&&{field:{status:"modified",previousValue:f.field}},...g&&{defaultValue:{status:"modified",previousValue:f.defaultValue}}}}}}),c=Ks(e?.outputs||[],n?.outputs||[],{compareFields:(l,f)=>{const p=(l.name??"")!==(f.name??""),d=(l.field??"")!==(f.field??""),g=(l.defaultValue??"")!==(f.defaultValue??"");return{hasChanges:p||d||g,fields:{...p&&{name:{status:"modified",previousValue:f.name}},...d&&{field:{status:"modified",previousValue:f.field}},...g&&{defaultValue:{status:"modified",previousValue:f.defaultValue}}}}}}),u=Ks(e?.rules||[],n?.rules||[],{idField:"_id",compareFields:(l,f)=>{const p=(l._description??"")!==(f._description??""),d={};s.forEach(m=>{m._diff?.status==="added"?d[m.id]={status:"added"}:m._diff?.status==="removed"?d[m.id]={status:"removed"}:(l?.[m.id]??"")!==(f?.[m.id]??"")&&(d[m.id]={status:"modified",previousValue:f?.[m.id]})});const g={};return c.forEach(m=>{m?._diff?.status==="added"?g[m.id]={status:"added"}:m?._diff?.status==="removed"?g[m.id]={status:"removed"}:(l?.[m.id]??"")!==(f?.[m.id]??"")&&(g[m.id]={status:"modified",previousValue:f?.[m.id]})}),{hasChanges:p||Object.keys(d).length>0||Object.keys(g).length>0,fields:{...p&&{_description:{status:"modified",previousValue:f._description}},...d,...g}}}});return r.inputs=s,r.outputs=c,r.rules=u,s.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&St.set(o,"inputs",{status:"modified"}),c.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&St.set(o,"outputs",{status:"modified"}),u.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&St.set(o,"rules",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:(e,n)=>!Ln(e,n),determineOutputType:({content:e,input:n})=>{let r=n.clone(),o=kn.fromJson({Object:{}});if(e.inputField&&(r=n.calculateType(e.inputField)),e.executionMode==="loop"&&(r=r.arrayItem()),(e?.outputs||[]).filter(c=>!!c.field).forEach(c=>{for(const u of e.rules){if(!u[c.id])continue;const l=r.calculateType(u[c.id]),f=l.toJson();if(f!=="Any"&&f!=="Null"){o.set(c.field,l);return}}o.setJson(c.field,"Any")}),e.hitPolicy==="collect"&&(o=o.toArray()),e.executionMode==="loop"&&(o=o.toArray()),e.outputPath){const c=kn.fromJson({Object:{}});c.set(e.outputPath,o),o=c}return e.passThrough&&(o=n.merge(o)),o}},generateNode:({index:e})=>({name:`decisionTable${e}`,content:{hitPolicy:"first",inputs:[{id:crypto.randomUUID(),name:"Input"}],outputs:[{id:crypto.randomUUID(),field:"output",name:"Output"}],rules:[],inputField:null,outputPath:null,passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=$t(),{passThrough:c,executionMode:u}=lt(({decisionGraph:l})=>{const f=(l?.nodes??[]).find(p=>p.id===e)?.content;return{passThrough:f?.passThrough||!1,executionMode:f?.executionMode}});return S.jsx(zi,{id:e,specification:o,name:n.name,isSelected:r,helper:[u==="loop"&&S.jsx(A0,{}),c&&S.jsx(Jl,{})],actions:[S.jsx(ot,{type:"text",onClick:()=>s.openTab(e),children:"Edit Table"},"edit-table")]})},renderSettings:({id:e})=>{const n=$t(),r=ms(e),{contentDiff:o}=ha(e),{fields:s,disabled:c}=lt(({decisionGraph:l,disabled:f})=>{const p=(l?.nodes??[]).find(d=>d.id===e)?.content;return{disabled:f,fields:{passThrough:p?.passThrough||!1,inputField:p?.inputField,outputPath:p?.outputPath,executionMode:p?.executionMode||"single",hitPolicy:p?.hitPolicy||"first"}}}),u=l=>{n.updateNode(e,f=>(Object.assign(f.content,l),f))};return S.jsxs("div",{className:"settings-form",children:[S.jsx(ii.Item,{label:"Hit Policy",children:S.jsx(d0,{direction:"vertical",size:2,children:S.jsx(Cl,{size:"small",previousValue:o?.fields?.hitPolicy?.previousValue,displayDiff:o?.fields?.hitPolicy?.status==="modified",disabled:c,value:s?.hitPolicy,onChange:l=>u({hitPolicy:l?.target?.value}),options:[{value:"first",label:"First"},{value:"collect",label:"Collect"}]})})}),S.jsx(ii.Item,{label:"Passthrough",children:S.jsx(f0,{disabled:c,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:l=>u({passThrough:l})})}),S.jsx(ii.Item,{label:"Input field",children:S.jsx(Vu,{variableType:r,disabled:c,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:l=>u({inputField:l?.trim()||null})})}),S.jsx(ii.Item,{label:"Output path",children:S.jsx(s0,{size:"small",readOnly:c,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:l=>u({outputPath:l?.target?.value?.trim()||null})})}),S.jsx(ii.Item,{label:"Execution mode",children:S.jsx(Cl,{size:"small",disabled:c,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:l=>u({executionMode:l?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},du=(e,n)=>{const r=(e||"").trim(),o=(n||"").trim();return r===o},R4=(e,n,r)=>{const o=O4(e?.nodes??[],n?.nodes??[],r),s=M4(e?.edges??[],n?.edges??[]);return{nodes:o,edges:s}},O4=(e,n,r)=>{const o=r?.components||[],s=r?.customNodes||[],c=new Map;return(e||[]).forEach(u=>{const l=(n||[]).find(f=>f.id===u.id);if(!l)c.set(u.id,{...u,_diff:{status:"added"}});else{const f={};(l.position.x!==u.position.x||l.position.y!==u.position.y)&&St.set(f,"position",{status:"moved",previousValue:l.position}),l.name!==u.name&&St.set(f,"name",{status:"modified",previousValue:l.name});const p=ke([u.type,l.type]).with([He.Output,He.Output],()=>$f?.getDiffContent?.(u?.content,l?.content)).with([He.Input,He.Input],()=>Pf?.getDiffContent?.(u?.content,l?.content)).with([He.Expression,He.Expression],()=>Ff?.getDiffContent?.(u?.content,l?.content)).with([He.DecisionTable,He.DecisionTable],()=>jf?.getDiffContent?.(u?.content,l?.content)).with([He.Function,He.Function],()=>{const d=Nf?.getDiffContent?.(u?.content,l?.content);return ke(u?.content).with(qe.string,()=>(d?._diff?.fields?.source?.status==="modified"&&St.set(f,"content",{status:"modified",previousValue:d?._diff?.fields?.source?.previousValue}),d?.source)).otherwise(()=>d)}).with([He.Switch,He.Switch],()=>mm?.getDiffContent?.(u?.content,l?.content)).otherwise(()=>{const d=o.find(m=>m.type===u.type);if(d)return d?.getDiffContent?.(u?.content,l?.content);const g=s.find(m=>u?.type==="customNode"&&u?.content?.kind===m?.kind);return g?g?.calculateDiff?.(u?.content,l?.content):null});Object.keys(f||{}).filter(d=>d!=="position").length>0||p?._diff?.status==="modified"?c.set(u.id,{...u,content:p??u.content,_diff:{status:"modified",fields:f}}):Object.keys(f||{}).length===1&&f?.position?.status==="moved"?c.set(u.id,{...u,content:p??u.content,_diff:{status:"moved",fields:f}}):c.set(u.id,{...u,_diff:{status:"unchanged"}})}}),(n||[]).forEach(u=>{c.has(u.id)||c.set(u.id,{...u,_diff:{status:"removed"}})}),Array.from(c.values())},M4=(e,n)=>{const r=new Map;return(e||[]).forEach(o=>{(n||[]).find(c=>c.id===o.id)?r.set(o.id,{...o,_diff:{status:"unchanged"}}):r.set(o.id,{...o,_diff:{status:"added"}})}),(n||[]).forEach(o=>{r.has(o.id)||r.set(o.id,{...o,_diff:{status:"removed"}})}),Array.from(r.values())},Ks=(e,n,r={})=>{const{idField:o="id",compareFields:s}=r,c=m=>m[o]||m._id,u=new Map(n.map((m,x)=>[c(m),{...m,index:x}])),l=new Map(e.map((m,x)=>[c(m),{...m,index:x}])),f=[],p=new Set,d=new Set;e.forEach((m,x)=>{u.has(c(m))||p.add(x)}),n.forEach((m,x)=>{l.has(c(m))||d.add(x)});const g=(m,x)=>{const b=Array.from(p).filter(N=>N<x).length,_=Array.from(d).filter(N=>N<m).length,E=x-b;return m-_!==E};return e.forEach((m,x)=>{const b=u.get(c(m));if(!b)f.push({...m,originalIndex:x,_diff:{status:"added",newIndex:x}});else{const _=g(b.index,x),E=s?s(m,b):{hasChanges:!1};E.hasChanges||_?f.push({...m,originalIndex:x,_diff:{status:"modified",positionChanged:_,previousIndex:b.index,newIndex:x,...E.fields?{fields:E.fields}:{}}}):f.push({...m,originalIndex:x,_diff:{status:"unchanged"}})}}),n.forEach((m,x)=>{if(!l.has(c(m))){let b=x;for(;b<f.length&&u.get(c(f[b]))?.index<x;)b++;f.splice(b,0,{...m,originalIndex:x,isRemoved:!0,_diff:{status:"removed",previousIndex:x}})}}),f.map(({originalIndex:m,isRemoved:x,...b})=>b)},Nn=Symbol("private"),z4=e=>({id:e?.id,sourceId:e?.source,type:e?.type,targetId:e?.target,name:e?.label,sourceHandle:e.sourceHandle??void 0,targetHandle:e.targetHandle??void 0}),Wl=e=>({id:e.id,type:e.type,position:e.position,height:e[Nn]?.dimensions?.height,width:e[Nn]?.dimensions?.width,selected:e[Nn]?.selected,data:{name:e.name,kind:e?.content?.kind}}),Ws=e=>e.map(Wl),Xl=e=>({id:e.id,source:e.sourceId,type:e?.type||"edge",target:e.targetId,label:e.name,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,markerEnd:{type:oa.ArrowClosed,width:20,height:20}}),Yl=e=>e.filter(n=>n.sourceId&&n.targetId).map(Xl);var ct=(e=>(e[e.Input=0]="Input",e[e.Output=1]="Output",e[e.InferredInput=2]="InferredInput",e[e.InferredOutput=3]="InferredOutput",e))(ct||{});const ys=V.createContext({}),vm=e=>{const{children:n}=e,r=A.useMemo(()=>sl()(()=>({id:void 0,simulate:void 0,decisionGraph:{nodes:[],edges:[]},hoveredEdgeId:null,openTabs:[],activeTab:"graph",name:"graph.json",disabled:!1,configurable:!0,components:[],customNodes:[],activePanel:void 0,panels:[],compactMode:localStorage.getItem("jdm-compact-mode")==="true",nodeTypes:{},globalType:{}})),[]),o=A.useMemo(()=>sl(()=>({onChange:void 0,onPanelsChange:void 0})),[]),s=A.useMemo(()=>sl(()=>({nodesState:A.createRef(),edgesState:A.createRef(),graphClipboard:A.createRef(),reactFlowInstance:A.createRef()})),[]),c=A.useMemo(()=>({handleNodesChange:(u=[])=>{const{nodesState:l}=s.getState(),{decisionGraph:f}=r.getState(),[,,p]=l.current;let d=!1;p?.(u);const g=gt(f,m=>{u.forEach(x=>ke(x).with({type:"position"},b=>{const _=m.nodes.find(E=>E.id===b.id);_&&b.position&&!Ln(_.position,b.position)&&(d=!0,_.position=b.position)}).with({type:"dimensions"},b=>{const _=m.nodes.find(E=>E.id===b.id);_&&!Ln(_[Nn]?.dimensions,b.dimensions)&&(d=!0,_[Nn]??={},_[Nn].dimensions={height:b.dimensions?.height,width:b.dimensions?.width})}).with({type:"select"},b=>{const _=m.nodes.find(E=>E.id===b.id);_&&_[Nn]?.selected!==b.selected&&(d=!0,_[Nn]??={},_[Nn].selected=b.selected)}).otherwise(()=>{}))});d&&(r.setState({decisionGraph:g}),o.getState().onChange?.(g))},handleEdgesChange:(u=[])=>{const{decisionGraph:l}=r.getState(),{edgesState:f}=s.getState();if(f?.current?.[2](u),u.find(p=>p.type==="remove")){const p=gt(l,d=>{const g=(d.edges||[]).map(m=>u.find(b=>"id"in b&&b.id===m.id)?.type==="remove"?null:m).filter(m=>!!m);d.edges=g});r.setState({decisionGraph:p}),o.getState().onChange?.(p)}},setNodes:(u=[])=>{const{nodesState:l}=s.getState(),{decisionGraph:f}=r.getState();l?.current?.[1](Ws(u));const p=gt(f,d=>{d.nodes=u});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},addNodes:u=>{const{nodesState:l}=s.getState(),{decisionGraph:f}=r.getState();l.current[0]?.some(g=>g.type===He.Input)&&(u=u.filter(g=>g.type!==He.Input)),l.current[1]?.(g=>g.concat(Ws(u)));const d=gt(f,g=>{g.nodes=(g.nodes||[]).concat(u)});r.setState({decisionGraph:d}),o.getState().onChange?.(d)},duplicateNodes:u=>{const{nodesState:l,edgesState:f}=s.getState(),{decisionGraph:p}=r.getState();let d=(p?.nodes||[]).filter(v=>u.includes(v.id));if(l.current[0]?.some(v=>v.type===He.Input)&&(d=d.filter(v=>v.type!==He.Input)),d.length===0)return;const m=d.reduce((v,N)=>({...v,[N.id]:crypto.randomUUID()}),{}),x=d.map(v=>({...v,id:m[v.id],position:{x:v.position?.x||0,y:(v.position?.y||0)+140}})),b=Object.keys(m),_=[];x.length>0&&(f.current?.[0]||[]).forEach(v=>{b.includes(v.source)&&b.includes(v.target)&&_.push({id:crypto.randomUUID(),type:v.type,sourceId:m[v.source],targetId:m[v.target],sourceHandle:v.sourceHandle??void 0,targetHandle:v.targetHandle??void 0})}),l.current[1]?.(v=>v.concat(x.map(Wl))),f.current[1]?.(v=>v.concat(_.map(Xl)));const E=gt(p,v=>{v.nodes.push(...x),v.edges.push(..._)});r.setState({decisionGraph:E}),o.getState().onChange?.(E)},copyNodes:u=>{const{graphClipboard:l,nodesState:f}=s.getState();if(!l.current||!f.current)return;const[p]=f.current,d=p.filter(g=>u.includes(g.id));l.current.copyNodes(d)},pasteNodes:()=>{const{graphClipboard:u}=s.getState();u.current?.pasteNodes?.()},removeNodes:(u=[])=>{const{nodesState:l,edgesState:f}=s.getState(),{decisionGraph:p,nodeTypes:d}=r.getState();l.current[1]?.(x=>x.filter(b=>u.every(_=>b.id!==_))),f.current[1]?.(x=>x.filter(b=>u.every(_=>b.source!==_&&b.target!==_&&b.sourceHandle!==_&&b.targetHandle!==_)));const g=gt(p,x=>{const b=x.nodes||[],_=x.edges||[];x.nodes=b.filter(E=>u.every(v=>E.id!==v)),x.edges=_.filter(E=>u.every(v=>E.sourceId!==v&&E.targetId!==v&&E.sourceHandle!==v&&E.targetHandle!==v))}),m=gt(d,x=>{u.forEach(b=>{b in x&&delete x[b]})});r.setState({decisionGraph:g,nodeTypes:m}),o.getState().onChange?.(g)},addEdges:u=>{const{edgesState:l}=s.getState(),{decisionGraph:f}=r.getState();l.current?.[1]?.(d=>d.concat(u.map(Xl)));const p=gt(f,d=>{d.edges=(d.edges||[]).concat(u)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},setEdges:(u=[])=>{const{edgesState:l}=s.getState(),{decisionGraph:f}=r.getState();l?.current?.[1]?.(Yl(u));const p=gt(f,d=>{d.edges=u});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdges:u=>{const{edgesState:l}=s.getState(),{decisionGraph:f}=r.getState();l?.current?.[1]?.(d=>d.filter(g=>!u.find(m=>g.id===m)));const p=gt(f,d=>{d.edges=d.edges.filter(g=>!u.find(m=>g.id===m))});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdgeByHandleId:u=>{if(!u)return;const{edgesState:l}=s.getState(),{decisionGraph:f}=r.getState();l?.current?.[1]?.(d=>d.filter(g=>g.sourceHandle!==u));const p=gt(f,d=>{d.edges=d.edges.filter(g=>g.sourceHandle!==u)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},updateNode:(u,l)=>{const{decisionGraph:f}=r.getState(),{nodesState:p}=s.getState(),[d,g]=p.current,m=gt(f,E=>{const v=(E.nodes??[]).find(N=>N?.id===u);v&&l(v)}),x=m.nodes.find(E=>E.id===u);if(!x)return;const b=Wl(x),_=d.find(E=>E.id===u);Ln(b,_)||g(E=>E.map(v=>v.id===u?b:v)),r.setState({decisionGraph:m}),o.getState().onChange?.(m)},setDecisionGraph:(u,l={})=>{const{decisionGraph:f}=r.getState(),{edgesState:p,nodesState:d}=s.getState(),{skipOnChangeEvent:g=!1}=l,m=gt(f,x=>{Object.assign(x,u)});p?.current?.[1](Yl(m?.edges??[])),d?.current?.[1](Ws(m?.nodes??[])),r.setState({decisionGraph:m}),g||o.getState().onChange?.(m)},calculateDiffGraph:(u,l)=>{const{components:f,customNodes:p}=r.getState();return R4(u,l,{components:f,customNodes:p})},setHoveredEdgeId:u=>r.setState({hoveredEdgeId:u}),goToNode:u=>{if(r.getState().activeTab!=="graph")return;const{reactFlowInstance:l}=s.getState();if(!l.current)return;const f=l.current.getNode(u);f&&l.current.fitView({nodes:[f],duration:1e3,maxZoom:1.25})},openTab:u=>{const{openTabs:l}=r.getState(),f=l.find(p=>p===u);if(u==="graph")return r.setState({activeTab:u});f?r.setState({activeTab:f}):r.setState({openTabs:[...l,u],activeTab:u})},closeTab:(u,l)=>{const{openTabs:f,activeTab:p}=r.getState(),d=f?.findIndex(_=>_===u),g=f?.[d],m=ke(l).with(void 0,()=>f.filter(_=>_!==g)).with("close",()=>f.filter(_=>_!==g)).with("close-all",()=>[]).with("close-other",()=>f.filter(_=>_===g)).with("close-right",()=>f.slice(0,d+1)).with("close-left",()=>f.slice(d)).otherwise(()=>f),x={openTabs:m};m?.find(_=>_===p)||(x.activeTab=m?.[d-1]??"graph"),r.setState(x)},setActivePanel:u=>{const{panels:l}=r.getState(),f={activePanel:u===void 0?void 0:(l||[]).find(p=>p.id===u)?.id};o.getState()?.onPanelsChange?.(u),r.setState(f)},setCompactMode:u=>{const l={compactMode:u};localStorage.setItem("jdm-compact-mode",`${u}`),r.setState(l)},toggleCompactMode:()=>{const{compactMode:u}=r.getState(),l=!u,f={compactMode:l};localStorage.setItem("jdm-compact-mode",`${l}`),r.setState(f)},setNodeType:(u,l,f)=>{const{nodeTypes:p}=r.getState(),d=gt(p,g=>{g[u]??={},g[u][l]=f});r.setState({nodeTypes:d})},removeNodeType:(u,l)=>{const{nodeTypes:f}=r.getState(),p=gt(f,d=>{u in d&&(l?l in d[u]&&delete d[u][l]:delete d[u])});r.setState({nodeTypes:p})},triggerNodeSelect:(u,l)=>{const{decisionGraph:f}=r.getState(),{nodesState:p,edgesState:d}=s.getState(),[,g]=p.current,[,m]=d.current,x=gt(f,b=>{const _=b.nodes.find(E=>E.id===u);_&&(l==="only"&&b.nodes.forEach(E=>{E[Nn]&&(E[Nn].selected=!1)}),_[Nn]??={},_[Nn].selected=ke(l).with("only",()=>!0).otherwise(()=>!_[Nn]?.selected))});g(Ws(x.nodes)),l=="only"&&m(b=>b.map(_=>({..._,selected:!1}))),r.setState({decisionGraph:x}),o.getState().onChange?.(x)}}),[]);return S.jsx(ys.Provider,{value:{stateStore:r,referenceStore:s,listenerStore:o,actions:c},children:n})};function lt(e,n=Ln){return V.useContext(ys).stateStore(e,n)}function Dm(e,n=Ln){return V.useContext(ys).listenerStore(e,n)}function P4(e,n=Ln){return V.useContext(ys).referenceStore(e,n)}function $t(){return V.useContext(ys).actions}function Co(){return V.useContext(ys)}const ha=e=>{const{diff:n,contentDiff:r}=lt(o=>{const s=(o?.decisionGraph?.nodes??[]).find(c=>c.id===e);return{diff:s?._diff,contentDiff:s?.content?._diff}});return{diff:n,contentDiff:r}},$4=e=>{const{diff:n}=lt(r=>({diff:(r?.decisionGraph?.edges??[]).find(s=>s.id===e)?._diff}));return{diff:n}};vm.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphProvider"};const j4=({id:e,defaultValue:n,value:r,name:o,disabled:s=!1,configurable:c=!0,onChange:u,components:l,customNodes:f,defaultActivePanel:p,panels:d,simulate:g,onPanelsChange:m,onReactFlowInit:x,onCodeExtension:b,onFunctionReady:_})=>{const E=A.useRef(!1),v=$t(),{stateStore:N,listenerStore:R}=Co(),{decisionGraph:T}=lt(({decisionGraph:H})=>({decisionGraph:H})),P=kw(H=>{u?.(H)},100);return A.useEffect(()=>{N.setState({id:e,disabled:s,configurable:c,components:Array.isArray(l)?l:[],customNodes:Array.isArray(f)?f:[],panels:d})},[e,s,c,l,f,d]),A.useEffect(()=>{N.setState({name:o??"graph.json"})},[o]),A.useEffect(()=>{N.setState({simulate:g})},[g]),A.useEffect(()=>{R.setState({onReactFlowInit:x,onPanelsChange:m,onCodeExtension:b,onFunctionReady:_})},[x,m,b,_]),A.useEffect(()=>{R.setState({onChange:P})},[P]),A.useEffect(()=>{E.current&&r!==void 0&&!Ln(r,T)&&v.setDecisionGraph(r)},[r]),A.useEffect(()=>{r!==void 0?v.setDecisionGraph(r):n!==void 0&&v.setDecisionGraph(n),N.setState({activePanel:p}),E.current=!0},[]),null},k4=()=>{let e=null;return{walk:function*(n){const r=L4(n);if(e&&Ln(r,e.digest)){yield*q4(n,e.iterator);return}const o=[];for(const s of H4(n))o.push({id:s.node.id,incomers:s.incomers.map(c=>c.id)}),yield s;e={digest:r,iterator:o}}}},L4=e=>{const n=e.nodes.map(o=>o.id),r=e.edges;return{nodes:n,edges:r}};function*H4(e){const n=Ws(e.nodes),r=Yl(e.edges),o=e.nodes.find(l=>l.type==="inputNode"),s=n.find(l=>l.id===o?.id);if(!o||!s||V4(s,n,r))return;yield{node:o,incomers:[]};const c=new Set;c.add(o.id);const u=ju(s,n,r);for(;u.length>0;){const l=u.pop();if(c.has(l.id))continue;const f=PA(l,n,r),p=f.filter(m=>!c.has(m.id));if(p.length>0){u.push(l,...p);continue}c.add(l.id);const d=e.nodes.find(m=>m.id===l.id);if(d){const m=e.nodes.filter(x=>f.some(b=>b.id===x.id));yield{node:d,incomers:m}}const g=ju(l,n,r);u.push(...g)}}function*q4(e,n){for(const r of n){const o=e.nodes.find(c=>c.id===r.id);if(!o)continue;const s=e.nodes.filter(c=>r.incomers.includes(c.id));yield{node:o,incomers:s}}}const V4=(e,n,r)=>{const o=new Set,s=new Set,c=u=>{o.add(u.id),s.add(u.id);const l=ju(u,n,r);for(const f of l)if(o.has(f.id)){if(s.has(f.id))return!0}else if(c(f))return!0;return s.delete(u.id),!1};return c(e)},G4=()=>{const{stateStore:e}=Co();return A.useEffect(()=>{if(Xs())return e.subscribe(({simulate:n,nodeTypes:r,decisionGraph:o},s)=>{try{if(Ln(n,s?.simulate))return;const c=ke(n).with({result:qe.nonNullable},({result:f})=>f.trace).otherwise(()=>null);if(c===null){const f=gt(r,p=>{Object.values(p).forEach(d=>{delete d[ct.Input],delete d[ct.Output]})});e.setState({nodeTypes:f});return}const u=Object.values(c);if(u.length===0)return;const l=gt(r,f=>{u.forEach(p=>{o.nodes.find(g=>g.id===p.id)?.type!=="inputNode"&&(f[p.id]??={},f[p.id][ct.Output]=new kn(p.output??{}),f[p.id][ct.Input]=new kn(p.input??{}))})});e.setState({nodeTypes:l})}catch(c){console.error("error occurred while setting up variable types from trace",c)}})},[]),A.useEffect(()=>{if(!Xs())return;const n=k4();return e.subscribe((r,o)=>{try{const s=Up(r),c=Up(o),u=W4(r,o);if(Ln(s,c)&&!u)return;const l=U4(r,o,n);l.isModified&&e.setState({nodeTypes:l.nodeTypes})}catch(s){console.error("error occurred during node type inference",s)}})},[]),A.useEffect(()=>{if(Xs())return e.subscribe((n,r)=>{try{const o=Wp(n),s=Wp(r);if(Ln(o,s))return;const c=kn.fromJson({Object:{}});n.decisionGraph.nodes.forEach(u=>{const l=n.nodeTypes[u.id],f=l?.[ct.Output]??l?.[ct.InferredOutput]??kn.fromJson({Object:{}});c.set(u.name,f)}),e.setState({globalType:{$nodes:c}})}catch(o){console.error("error occurred while global node types",o)}})},[]),null},U4=({decisionGraph:e,nodeTypes:n,customNodes:r},o,s)=>{let c=!1;const u=gt(n,l=>{s.walk(e).forEach(({node:f,incomers:p})=>{if(f.type==="inputNode")return;const d=p.map(T=>{const P=l[T.id]??{};return P[ct.Output]??P[ct.InferredOutput]}).filter(T=>!!T).map(T=>T.clone()),g=ke(d.length).with(1,()=>d[0]).otherwise(()=>kn.fromIncoming(d));l?.[f.id]?.[ct.InferredInput]?.equal(g)||(c=!0,l[f.id]??={},l[f.id][ct.InferredInput]=g);const x=wo[f.type]?.inferTypes??r.find(T=>T.kind===f.type)?.inferTypes;if(!x)return;const b=l?.[f.id]?.[ct.Input]??l?.[f.id]?.[ct.InferredInput]??kn.fromJson("Any"),_=o.nodeTypes?.[f.id]?.[ct.Input]??o.nodeTypes?.[f.id]?.[ct.InferredInput]??kn.fromJson("Any"),E=o.decisionGraph.nodes.find(T=>T.id===f.id)?.content;if(!(x.needsUpdate(f.content,E)||!b.equal(_))&&l?.[f.id]?.[ct.InferredOutput])return;const N=x.determineOutputType({input:b,content:f.content});l?.[f.id]?.[ct.InferredOutput]?.equal(N)||(c=!0,l[f.id]??={},l[f.id][ct.InferredOutput]=N)})});return{isModified:c,nodeTypes:u}},Up=({decisionGraph:e,nodeTypes:n,customNodes:r})=>{const o=e.edges,s=e.nodes.map(({id:p,type:d})=>({id:p,type:d})),c=r.map(p=>p.kind),u=Object.entries(n).map(([p,d])=>({id:p,input:Zl(d[ct.Input]),output:Zl(d[ct.Output])})),l=e.nodes.find(p=>p.type==="inputNode")?.id,f=ke(n?.[l??""]?.[ct.InferredOutput]).with(qe.nonNullable,p=>p.hash()).otherwise(()=>null);return{edgesData:o,nodesData:s,typesData:u,customNodesData:c,inputNodeType:f}},W4=({decisionGraph:e,customNodes:n},r)=>e.nodes.map(s=>{const c=wo[s.type]?.inferTypes??n.find(l=>l.kind===s.type)?.inferTypes;if(!c)return!1;const u=r.decisionGraph.nodes.find(l=>l.id===s.id);return u?c.needsUpdate(s.content,u.content):!0}).some(s=>s),Zl=e=>{if(e)return e.__hash||(e.__hash=e.hash()),e.__hash},Wp=e=>({nodeInfo:e.decisionGraph.nodes.map(r=>{const o=e.nodeTypes[r.id],s=o?.[ct.Output]??o?.[ct.InferredOutput];return{id:r.id,type:Zl(s),name:r.name}})});var X4=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c])},e(n,r)};return function(n,r){e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Mt=function(){return Mt=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mt.apply(this,arguments)},Xp={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Yp={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},hu={width:"20px",height:"20px",position:"absolute"},Y4={top:Mt(Mt({},Xp),{top:"-5px"}),right:Mt(Mt({},Yp),{left:void 0,right:"-5px"}),bottom:Mt(Mt({},Xp),{top:void 0,bottom:"-5px"}),left:Mt(Mt({},Yp),{left:"-5px"}),topRight:Mt(Mt({},hu),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Mt(Mt({},hu),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Mt(Mt({},hu),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Mt(Mt({},hu),{left:"-10px",top:"-10px",cursor:"nw-resize"})},Z4=function(e){X4(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.onMouseDown=function(o){r.props.onResizeStart(o,r.props.direction)},r.onTouchStart=function(o){r.props.onResizeStart(o,r.props.direction)},r}return n.prototype.render=function(){return A.createElement("div",{className:this.props.className||"",style:Mt(Mt({position:"absolute",userSelect:"none"},Y4[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},n}(A.PureComponent),K4=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c])},e(n,r)};return function(n,r){e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Fr=function(){return Fr=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fr.apply(this,arguments)},J4={width:"auto",height:"auto"},pu=function(e,n,r){return Math.max(Math.min(e,r),n)},Zp=function(e,n,r){var o=Math.round(e/n);return o*n+r*(o-1)},es=function(e,n){return new RegExp(e,"i").test(n)},gu=function(e){return!!(e.touches&&e.touches.length)},Q4=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},Kp=function(e,n,r){r===void 0&&(r=0);var o=n.reduce(function(c,u,l){return Math.abs(u-e)<Math.abs(n[c]-e)?l:c},0),s=Math.abs(n[o]-e);return r===0||s<r?n[o]:e},wl=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},mu=function(e,n,r,o){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var s=Number(e.replace("%",""))/100;return n*s}if(e.endsWith("vw")){var s=Number(e.replace("vw",""))/100;return r*s}if(e.endsWith("vh")){var s=Number(e.replace("vh",""))/100;return o*s}}return e},eF=function(e,n,r,o,s,c,u){return o=mu(o,e.width,n,r),s=mu(s,e.height,n,r),c=mu(c,e.width,n,r),u=mu(u,e.height,n,r),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof c>"u"?void 0:Number(c),minHeight:typeof u>"u"?void 0:Number(u)}},tF=function(e){return Array.isArray(e)?e:[e,e]},nF=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Jp="__resizable_base__",rF=function(e){K4(n,e);function n(r){var o,s,c,u,l=e.call(this,r)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.appendBase=function(){if(!l.resizable||!l.window)return null;var f=l.parentNode;if(!f)return null;var p=l.window.document.createElement("div");return p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.transform="scale(0, 0)",p.style.left="0",p.style.flex="0 0 100%",p.classList?p.classList.add(Jp):p.className+=Jp,f.appendChild(p),p},l.removeBase=function(f){var p=l.parentNode;p&&p.removeChild(f)},l.state={isResizing:!1,width:(s=(o=l.propsSize)===null||o===void 0?void 0:o.width)!==null&&s!==void 0?s:"auto",height:(u=(c=l.propsSize)===null||c===void 0?void 0:c.height)!==null&&u!==void 0?u:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(n.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||J4},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){var r=0,o=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,c=this.resizable.offsetHeight,u=this.resizable.style.position;u!=="relative"&&(this.resizable.style.position="relative"),r=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:c,this.resizable.style.position=u}return{width:r,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sizeStyle",{get:function(){var r=this,o=this.props.size,s=function(l){var f;if(typeof r.state[l]>"u"||r.state[l]==="auto")return"auto";if(r.propsSize&&r.propsSize[l]&&(!((f=r.propsSize[l])===null||f===void 0)&&f.toString().endsWith("%"))){if(r.state[l].toString().endsWith("%"))return r.state[l].toString();var p=r.getParentSize(),d=Number(r.state[l].toString().replace("px","")),g=d/p[l]*100;return g+"%"}return wl(r.state[l])},c=o&&typeof o.width<"u"&&!this.state.isResizing?wl(o.width):s("width"),u=o&&typeof o.height<"u"&&!this.state.isResizing?wl(o.height):s("height");return{width:c,height:u}},enumerable:!1,configurable:!0}),n.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var r=this.appendBase();if(!r)return{width:0,height:0};var o=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),r.style.position="relative",r.style.minWidth="100%",r.style.minHeight="100%";var c={width:r.offsetWidth,height:r.offsetHeight};return o&&(this.parentNode.style.flexWrap=s),this.removeBase(r),c},n.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},n.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},n.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var r=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:r.flexBasis!=="auto"?r.flexBasis:void 0})}},n.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},n.prototype.createSizeForCssProperty=function(r,o){var s=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===r&&(typeof s>"u"||s==="auto")?"auto":r},n.prototype.calculateNewMaxFromBoundary=function(r,o){var s=this.props.boundsByDirection,c=this.state.direction,u=s&&es("left",c),l=s&&es("top",c),f,p;if(this.props.bounds==="parent"){var d=this.parentNode;d&&(f=u?this.resizableRight-this.parentLeft:d.offsetWidth+(this.parentLeft-this.resizableLeft),p=l?this.resizableBottom-this.parentTop:d.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=u?this.resizableRight:this.window.innerWidth-this.resizableLeft,p=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=u?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),p=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(r=r&&r<f?r:f),p&&Number.isFinite(p)&&(o=o&&o<p?o:p),{maxWidth:r,maxHeight:o}},n.prototype.calculateNewSizeFromDirection=function(r,o){var s=this.props.scale||1,c=tF(this.props.resizeRatio||1),u=c[0],l=c[1],f=this.state,p=f.direction,d=f.original,g=this.props,m=g.lockAspectRatio,x=g.lockAspectRatioExtraHeight,b=g.lockAspectRatioExtraWidth,_=d.width,E=d.height,v=x||0,N=b||0;return es("right",p)&&(_=d.width+(r-d.x)*u/s,m&&(E=(_-N)/this.ratio+v)),es("left",p)&&(_=d.width-(r-d.x)*u/s,m&&(E=(_-N)/this.ratio+v)),es("bottom",p)&&(E=d.height+(o-d.y)*l/s,m&&(_=(E-v)*this.ratio+N)),es("top",p)&&(E=d.height-(o-d.y)*l/s,m&&(_=(E-v)*this.ratio+N)),{newWidth:_,newHeight:E}},n.prototype.calculateNewSizeFromAspectRatio=function(r,o,s,c){var u=this.props,l=u.lockAspectRatio,f=u.lockAspectRatioExtraHeight,p=u.lockAspectRatioExtraWidth,d=typeof c.width>"u"?10:c.width,g=typeof s.width>"u"||s.width<0?r:s.width,m=typeof c.height>"u"?10:c.height,x=typeof s.height>"u"||s.height<0?o:s.height,b=f||0,_=p||0;if(l){var E=(m-b)*this.ratio+_,v=(x-b)*this.ratio+_,N=(d-_)/this.ratio+b,R=(g-_)/this.ratio+b,T=Math.max(d,E),P=Math.min(g,v),H=Math.max(m,N),G=Math.min(x,R);r=pu(r,T,P),o=pu(o,H,G)}else r=pu(r,d,g),o=pu(o,m,x);return{newWidth:r,newHeight:o}},n.prototype.setBoundingClientRect=function(){var r=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var s=o.getBoundingClientRect();this.parentLeft=s.left*r,this.parentTop=s.top*r}}if(this.props.bounds&&typeof this.props.bounds!="string"){var c=this.props.bounds.getBoundingClientRect();this.targetLeft=c.left*r,this.targetTop=c.top*r}if(this.resizable){var u=this.resizable.getBoundingClientRect(),l=u.left,f=u.top,p=u.right,d=u.bottom;this.resizableLeft=l*r,this.resizableRight=p*r,this.resizableTop=f*r,this.resizableBottom=d*r}},n.prototype.onResizeStart=function(r,o){if(!(!this.resizable||!this.window)){var s=0,c=0;if(r.nativeEvent&&Q4(r.nativeEvent)?(s=r.nativeEvent.clientX,c=r.nativeEvent.clientY):r.nativeEvent&&gu(r.nativeEvent)&&(s=r.nativeEvent.touches[0].clientX,c=r.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var u=this.props.onResizeStart(r,o,this.resizable);if(u===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var p=this.parentNode;if(p){var d=this.window.getComputedStyle(p).flexDirection;this.flexDir=d.startsWith("row")?"row":"column",l=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var g={original:{x:s,y:c,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Fr(Fr({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(r.target).cursor||"auto"}),direction:o,flexBasis:l};this.setState(g)}},n.prototype.onMouseMove=function(r){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&gu(r))try{r.preventDefault(),r.stopPropagation()}catch{}var s=this.props,c=s.maxWidth,u=s.maxHeight,l=s.minWidth,f=s.minHeight,p=gu(r)?r.touches[0].clientX:r.clientX,d=gu(r)?r.touches[0].clientY:r.clientY,g=this.state,m=g.direction,x=g.original,b=g.width,_=g.height,E=this.getParentSize(),v=eF(E,this.window.innerWidth,this.window.innerHeight,c,u,l,f);c=v.maxWidth,u=v.maxHeight,l=v.minWidth,f=v.minHeight;var N=this.calculateNewSizeFromDirection(p,d),R=N.newHeight,T=N.newWidth,P=this.calculateNewMaxFromBoundary(c,u);this.props.snap&&this.props.snap.x&&(T=Kp(T,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(R=Kp(R,this.props.snap.y,this.props.snapGap));var H=this.calculateNewSizeFromAspectRatio(T,R,{width:P.maxWidth,height:P.maxHeight},{width:l,height:f});if(T=H.newWidth,R=H.newHeight,this.props.grid){var G=Zp(T,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),J=Zp(R,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),$=this.props.snapGap||0,Y=$===0||Math.abs(G-T)<=$?G:T,te=$===0||Math.abs(J-R)<=$?J:R;T=Y,R=te}var Q={width:T-x.width,height:R-x.height};if(b&&typeof b=="string"){if(b.endsWith("%")){var Z=T/E.width*100;T=Z+"%"}else if(b.endsWith("vw")){var B=T/this.window.innerWidth*100;T=B+"vw"}else if(b.endsWith("vh")){var q=T/this.window.innerHeight*100;T=q+"vh"}}if(_&&typeof _=="string"){if(_.endsWith("%")){var Z=R/E.height*100;R=Z+"%"}else if(_.endsWith("vw")){var B=R/this.window.innerWidth*100;R=B+"vw"}else if(_.endsWith("vh")){var q=R/this.window.innerHeight*100;R=q+"vh"}}var j={width:this.createSizeForCssProperty(T,"width"),height:this.createSizeForCssProperty(R,"height")};this.flexDir==="row"?j.flexBasis=j.width:this.flexDir==="column"&&(j.flexBasis=j.height);var X=this.state.width!==j.width,ie=this.state.height!==j.height,U=this.state.flexBasis!==j.flexBasis,oe=X||ie||U;oe&&h0.flushSync(function(){o.setState(j)}),this.props.onResize&&oe&&this.props.onResize(r,m,this.resizable,Q)}},n.prototype.onMouseUp=function(r){var o,s,c=this.state,u=c.isResizing,l=c.direction,f=c.original;if(!(!u||!this.resizable)){var p={width:this.size.width-f.width,height:this.size.height-f.height};this.props.onResizeStop&&this.props.onResizeStop(r,l,this.resizable,p),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Fr(Fr({},this.state.backgroundStyle),{cursor:"auto"})})}},n.prototype.updateSize=function(r){var o,s;this.setState({width:(o=r.width)!==null&&o!==void 0?o:"auto",height:(s=r.height)!==null&&s!==void 0?s:"auto"})},n.prototype.renderResizer=function(){var r=this,o=this.props,s=o.enable,c=o.handleStyles,u=o.handleClasses,l=o.handleWrapperStyle,f=o.handleWrapperClass,p=o.handleComponent;if(!s)return null;var d=Object.keys(s).map(function(g){return s[g]!==!1?A.createElement(Z4,{key:g,direction:g,onResizeStart:r.onResizeStart,replaceStyles:c&&c[g],className:u&&u[g]},p&&p[g]?p[g]:null):null});return A.createElement("div",{className:f,style:l},d)},n.prototype.render=function(){var r=this,o=Object.keys(this.props).reduce(function(u,l){return nF.indexOf(l)!==-1||(u[l]=r.props[l]),u},{}),s=Fr(Fr(Fr({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var c=this.props.as||"div";return A.createElement(c,Fr({style:s,className:this.props.className},o,{ref:function(u){u&&(r.resizable=u)}}),this.state.isResizing&&A.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},n.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},n}(A.PureComponent);const Qp="jdmEditor:graphPanel:height",_m=()=>{const e=$t(),{panels:n,activePanel:r}=lt(({panels:c,activePanel:u})=>({panels:c,activePanel:u})),o=A.useMemo(()=>r===void 0?void 0:(n||[]).find(c=>c.id===r),[r,n]),s=A.useMemo(()=>Number.parseFloat(localStorage.getItem(Qp)??"")??300,[o]);return o?S.jsxs(rF,{className:"grl-dg__panel",defaultSize:{height:s},handleStyles:{bottom:{display:"none"},left:{display:"none"},topLeft:{display:"none"},topRight:{display:"none"},right:{display:"none"},bottomLeft:{display:"none"},bottomRight:{display:"none"}},maxHeight:500,minHeight:150,onResize:(c,u,l)=>{localStorage.setItem(Qp,l.clientHeight.toString())},children:[!o.hideHeader&&S.jsxs("div",{className:"grl-dg__panel__toolbar",children:[S.jsx("div",{className:"grl-dg__panel__toolbar__content",children:S.jsx(Pt.Text,{style:{fontSize:13},children:o.title})}),S.jsx("div",{className:"grl-dg__panel__toolbar__actions",children:S.jsx(gr,{placement:"topLeft",title:"Close panel",children:S.jsx(ot,{size:"small",type:"text",icon:S.jsx(vo,{style:{fontSize:12}}),onClick:()=>e.setActivePanel(void 0)})})})]}),S.jsx("div",{className:"grl-dg__panel__content",children:o?.renderPanel?.({})})]}):null};_m.__docgenInfo={description:"",methods:[],displayName:"GraphPanel"};const ca=ce.string().default(()=>crypto.randomUUID());var xm=(e=>(e.Input="inputNode",e.Output="outputNode",e.DecisionTable="decisionTableNode",e.Function="functionNode",e.Expression="expressionNode",e.Switch="switchNode",e.Decision="decisionNode",e))(xm||{});const iF="customNode",li=ce.object({id:ca,name:ce.string(),position:ce.object({x:ce.number(),y:ce.number()}).default({x:0,y:0})}),oF=ce.object({type:ce.literal("inputNode"),content:ce.object({schema:ce.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(li),sF=ce.object({type:ce.literal("outputNode"),content:ce.object({schema:ce.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(li),aF=ce.object({type:ce.literal("decisionTableNode"),content:ce.object({hitPolicy:ce.enum(["first","collect"]).nullish().transform(e=>e??"first"),rules:ce.array(ce.record(ce.string(),ce.string().nullish().transform(e=>e??""))).default([]),inputs:ce.array(ce.object({id:ca,name:ce.string().nullish(),field:ce.string().nullish(),defaultValue:ce.string().nullish()})),outputs:ce.array(ce.object({id:ca,name:ce.string(),field:ce.string(),defaultValue:ce.string().nullish()})),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(li),uF=ce.object({type:ce.literal("functionNode"),content:ce.string().or(ce.object({source:ce.string().default("")})).nullish()}).merge(li),cF=ce.object({type:ce.literal("expressionNode"),content:ce.object({expressions:ce.array(ce.object({id:ca,key:ce.string().default(""),value:ce.string().default("")})),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(li),lF=ce.object({type:ce.literal("decisionNode"),content:ce.object({key:ce.string(),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(li),fF=ce.object({type:ce.literal("switchNode"),content:ce.object({hitPolicy:ce.enum(["first","collect"]).nullish().transform(e=>e??"first"),statements:ce.array(ce.object({id:ca,condition:ce.string().nullish().transform(e=>e??""),isDefault:ce.boolean().nullish().transform(e=>e??!1)}))})}).merge(li),dF=ce.object({type:ce.literal(iF),content:ce.object({kind:ce.string(),config:ce.any()})}).merge(li),hF=ce.object({type:ce.string().refine(e=>!Object.values(xm).includes(e),{message:"Invalid type"}),content:ce.any().nullish()}).merge(li),Su=ce.discriminatedUnion("type",[lF,cF,uF,aF,fF,dF,oF,sF]).or(hF),pF=ce.object({id:ce.string(),sourceId:ce.string(),targetId:ce.string(),sourceHandle:ce.string().nullish(),type:ce.enum(["edge"])});ce.object({inputSchema:ce.any().nullish().default(null),outputSchema:ce.any().nullish().default(null)});const e0=ce.object({nodes:ce.array(Su).default([]),edges:ce.array(pF).default([])}),wm=e=>{const n=$t(),{id:r,sourceX:o,sourceY:s,targetX:c,targetY:u,sourcePosition:l,targetPosition:f,style:p={},markerEnd:d}=e,{isHovered:g,disabled:m}=lt(({hoveredEdgeId:v,disabled:N})=>({isHovered:v===r,disabled:N})),{diff:x}=$4(r),[b,_,E]=vf({sourceX:o,sourceY:s,sourcePosition:l,targetX:c,targetY:u,targetPosition:f});return S.jsxs(S.Fragment,{children:[S.jsx(hs,{path:b,markerEnd:d,style:{...p||{},stroke:ke(x).with({status:"added"},()=>"var(--grl-color-success)").with({status:"removed"},()=>"var(--grl-color-error)").otherwise(()=>{})}}),S.jsx(l6,{children:S.jsx("div",{className:"nodrag nopan edge-renderer",style:{transform:`translate(-50%, -50%) translate(${_}px,${E}px)`},children:!m&&S.jsx(ot,{type:"primary",shape:"round",icon:S.jsx(Gu,{}),danger:!0,className:Ye("grl-edge-delete-button"),"data-visible":g,onClick:()=>n.removeEdges([r])})})})]})},gF=e=>n=>S.jsx(wm,{...n,...e});wm.__docgenInfo={description:"",methods:[],displayName:"CustomEdge"};const mF=e=>typeof e!="object"?!1:Array.isArray(e?.nodes),yF=(e,n)=>{const r=Co(),o=$t(),s=A.useCallback(async u=>{try{if(!e.current)return;const l=(r.stateStore.getState()?.decisionGraph?.nodes||[]).filter(g=>u.some(m=>m.id===g.id)),f=l.map(g=>g.id),p=[];l.length>0&&e.current.getEdges().forEach(m=>{f.includes(m.source)&&f.includes(m.target)&&p.push({id:m.id,type:m.type,sourceId:m.source,targetId:m.target,sourceHandle:m.sourceHandle??void 0,targetHandle:m.targetHandle??void 0})}),await Au(JSON.stringify({nodes:l,edges:p})),zt.success("Copied to clipboard!")}catch(l){zt.error(l.message)}},[r]),c=A.useCallback(async()=>{try{if(!e?.current)return;const u=await Ww();if(!u)return;const l=JSON.parse(u);if(!mF(l))throw new Error("invalid clipboard");const f=l.nodes.reduce((_,E)=>({..._,[E.id]:crypto.randomUUID()}),{}),p=Object.keys(f),d=e.current.getNodes().find(_=>p.includes(_.id)),g=l.nodes.find(_=>_.id===d?.id),m={x:l.nodes.reduce((_,E)=>_+E.position.x,0)/l.nodes.length,y:l.nodes.reduce((_,E)=>_+E.position.y,0)/l.nodes.length},x=l.nodes.map(_=>{const E={x:_?.position?.x||0,y:_?.position?.y||0};if(d&&g)_.id===d.id?(E.x=d.position.x,E.y=d.position.y-20):(E.x=d.position.x-g.position.x+_.position.x,E.y=d.position.y-g.position.y+_.position.y-20);else if(n.current){const v=n.current.getBoundingClientRect(),N={x:v.width/2,y:v.height/2},R=e.current.project(N);E.x=_.position.x+R.x-m.x/2,E.y=_.position.y+R.y-m.y/2}return{..._,position:E,id:f[_.id]}}),b=(l.edges||[]).map(_=>({id:crypto.randomUUID(),type:_.type,sourceId:f[_.sourceId],targetId:f[_.targetId],sourceHandle:_.sourceHandle??void 0,targetHandle:_.targetHandle??void 0}));if(o.addNodes(x),o.addEdges(b),zt.success("Pasted from clipboard!"),d)try{await Au(JSON.stringify({nodes:x}))}catch{}}catch{zt.error("Failed to paste from clipboard")}},[e,n]);return A.useMemo(()=>({copyNodes:s,pasteNodes:c}),[s,c])},bm=V.memo(({inputDisabled:e,disabled:n})=>{const r=lt(d=>d.components||[]),o=lt(d=>d.customNodes||[]),[s,c]=A.useState(""),u=A.useCallback((d,g,m)=>{const x=d.target;if(!x)return;const{offsetX:b,offsetY:_}=d.nativeEvent,{height:E,width:v}=x.getBoundingClientRect(),N={x:b/v,y:_/E};d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("nodeType",g),d.dataTransfer.setData("relativePosition",JSON.stringify(N)),m&&d.dataTransfer.setData("customNodeComponent",m)},[]),l=A.useMemo(()=>{const d={core:Object.values(wo)};return r?.length>0&&(d.extended=r),(o||[]).forEach(g=>{const m=g.group?.trim?.()||"";m.length>0&&(d?.[m]?d[m].push({...g,type:"customNode"}):d[m]=[{...g,type:"customNode"}])}),(o||[]).forEach(g=>{g?.group||(d?.custom?d.custom.push({...g,type:"customNode"}):d.custom=[{...g,type:"customNode"}])}),d},[r,o]),f=A.useMemo(()=>Object.keys(l).reduce((d,g)=>({...d,[g]:(l[g]||[]).filter(m=>!(s?.trim?.().length>0)||(m.type||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.displayName||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.shortDescription||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.group||"").toLowerCase().indexOf(s.toLowerCase())>-1)}),{}),[l,s]),p=r.length+o.length;return S.jsxs("div",{children:[p>5&&S.jsx(uw,{placeholder:"Search components...",value:s,onChange:d=>c(d.target.value||""),allowClear:!0,className:"grl-dg__aside__menu__components__search"}),S.jsx("div",{className:"grl-dg__aside__menu__components",children:Object.keys(f).map(d=>ke(d).with("core",()=>f.core?.length>0&&S.jsx(V.Fragment,{children:(f.core||[]).map(g=>S.jsx(V.Fragment,{children:S.jsx(t0,{disabled:ke(g.type).with(He.Input,()=>n||e).otherwise(()=>n),specification:g,onDragStart:m=>wo[g.type]!==void 0?u(m,g.type):u(m,"customNode","kind"in g?g.kind:"")})},"kind"in g?g.kind:g.type))},d)).otherwise(g=>f[g]?.length>0&&S.jsx(V.Fragment,{children:(f?.[g]||[]).map(m=>S.jsx(t0,{disabled:n,specification:m,onDragStart:x=>g==="extended"?u(x,m.type):u(x,"customNode","kind"in m?m.kind:"")},"kind"in m?m.kind:m.type))},g)))})]})}),t0=({specification:e,disabled:n=!1,...r})=>S.jsx("div",{className:Ye("draggable-component"),draggable:!n,...r,children:S.jsx("div",{style:{pointerEvents:"none"},children:S.jsx(Sf,{listMode:!0,compactMode:!0,color:e.color,icon:e.icon,name:e.displayName,type:e.shortDescription})})});bm.__docgenInfo={description:"",methods:[],displayName:"GraphComponents",props:{inputDisabled:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const vF=Object.entries(wo).reduce((e,[n,r])=>({...e,[n]:V.memo(o=>r.renderNode({specification:r,...o}),(o,s)=>o.id===s.id&&o.selected===s.selected&&bl(o.data,s.data))}),{}),DF={edge:V.memo(gF(null))},Cm=A.forwardRef(function({reactFlowProOptions:n,className:r},o){const s=A.useRef(null),c=A.useRef(null),u=f6([]),l=d6([]),[f,p]=A.useState(!0),d=Co(),g=$t(),m=P4($=>$),{onReactFlowInit:x}=Dm(({onReactFlowInit:$})=>({onReactFlowInit:$})),{disabled:b,hasInputNode:_,components:E,customNodes:v}=lt(({disabled:$,components:Y,customNodes:te,decisionGraph:Q})=>({disabled:$,components:Y,customNodes:te,hasInputNode:(Q?.nodes||[]).some(Z=>Z.type===He.Input)}));m.nodesState.current=u,m.edgesState.current=l,m.graphClipboard.current=yF(c,s),m.reactFlowInstance.current=c.current;const N=A.useMemo(()=>V.memo($=>{const Y=v.find(te=>te.kind===$?.data?.kind);return Y?Y.renderNode({specification:Y,...$}):(console.warn("node not found",$,v),S.jsx(zi,{id:$.id,specification:{displayName:`${$.data?.kind}`,color:"var(--grl-color-error)",icon:S.jsx(Sb,{})},name:$?.data?.name,isSelected:$.selected,displayError:!0,noBodyPadding:!0,handleLeft:!0,handleRight:!0}))},($,Y)=>$.id===Y.id&&$.selected===Y.selected&&bl($.data,Y.data)),[v]),R=A.useMemo(()=>E.reduce(($,Y)=>({...$,[Y.type]:V.memo(te=>Y.renderNode({specification:Y,...te}),(te,Q)=>te.id===Q.id&&te.selected===Q.selected&&bl(te.data,Q.data))}),{...vF,customNode:N}),[E,N]),T=async($,Y,te)=>{if(!s.current||!c.current)return;if(!Y){const q=s.current.getBoundingClientRect(),j={x:q.width/2,y:q.height/2};Y=c.current.project(j)}const Q=ke($).with("customNode",()=>v.find(q=>q.kind===te)).otherwise(()=>[...Object.values(wo),...E].find(j=>j.type===$));if(!Q){zt.error(`Unknown node type ${$} - ${te}.`);return}let Z=ke(Q).with({kind:qe.string},q=>{const j=(c.current?.getNodes()||[]).filter(ie=>ie.data?.kind===q.kind).length+1,X=q.generateNode({index:j});return{id:crypto.randomUUID(),type:"customNode",name:X.name,position:Y,content:{kind:q.kind,config:X?.config}}}).with({type:qe.string},q=>{const j=(c.current?.getNodes()||[]).filter(ie=>ie.type===q.type).length+1,X=q.generateNode({index:j});return{id:crypto.randomUUID(),type:q.type,position:Y,...X}}).otherwise(()=>null);if(!Z){zt.error(`Unknown node type ${$} - ${te}.`);return}if(Q.onNodeAdd)try{Z=await Q.onNodeAdd(Z)}catch{return}const B=Su.safeParse(Z);if(B.success)return g.addNodes([Su.parse(Z)]);zt.error(B.error?.message)},P=$=>{if($.source===$.target||b)return!1;const[Y]=u,[te]=l,Q=te.some(q=>q.source===$.source&&q.target===$.target&&(q.sourceHandle??null)===($.sourceHandle??null)&&(q.targetHandle??null)===($.targetHandle??null)),Z=Y.find(q=>q.id===$.target);if(!Z||Z.id===$.source)return!1;const B=(q,j=new Set)=>{if(j.has(q.id))return!1;j.add(q.id);for(const X of ju(q,Y,te))if(X.id===$.source||B(X,j))return!0};return!Q&&!B(Z)},H=$=>{if($.preventDefault(),$.stopPropagation(),!s.current||!c.current)return;const Y=s.current.getBoundingClientRect();let te;try{te=JSON.parse($.dataTransfer.getData("relativePosition"))}catch{return}const Q=c.current.project({x:$.clientX-Y.left,y:$.clientY-Y.top});Q.x-=Math.round(te.x*226/10)*10,Q.y-=Math.round(te.y*60/10)*10;const Z=$.dataTransfer.getData("nodeData");if(Z){try{const j=JSON.parse(Z);g.addNodes([Su.parse({...j,position:Q})])}catch(j){rf.error({message:"Failed to create a node"}),console.error(j)}return}const B=$.dataTransfer.getData("nodeType"),q=ke($.dataTransfer.getData("customNodeComponent")).with(qe.string,j=>j).otherwise(()=>{});T(B,Q,q)},G=$=>{$.preventDefault(),$.dataTransfer.dropEffect="move"},J=$=>{const Y={...$,type:"edge",id:crypto.randomUUID()};b||g.addEdges([z4(Y)])};return A.useImperativeHandle(o,()=>({...g,stateStore:d.stateStore})),S.jsx("div",{className:Ye(["tab-content",r]),tabIndex:0,onKeyDown:$=>{$.key==="v"&&$.metaKey&&!b&&g.pasteNodes()},children:S.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex"},children:[!b&&!f&&S.jsx("div",{className:"grl-dg__components__floating",style:{position:"absolute",top:8,right:8,zIndex:1},children:S.jsx(gr,{placement:"right",title:"Components",children:S.jsx(ot,{icon:S.jsx(Iw,{style:{fontSize:12}}),onClick:()=>p(!0)})})}),S.jsx("div",{tabIndex:0,className:"content-wrapper",onKeyDown:$=>{const[Y]=u,[te]=l;if($.key==="c"&&$.metaKey){const Q=u[0].filter(Z=>Z.selected).map(({id:Z})=>Z);if(Q.length===0)return;g.copyNodes(Q),$.preventDefault()}else if($.key==="d"&&$.metaKey){if(!b){const Q=Y.filter(Z=>Z.selected).map(({id:Z})=>Z);if(Q.length===0)return;g.duplicateNodes(Q)}$.preventDefault()}else if($.key==="Backspace"){if(!b){const Q=Y.filter(B=>B.selected),Z=te.filter(B=>B.selected);if(Q.length>0){const B=Q.length,q=B>1?"nodes":"node";Wu.confirm({icon:null,title:`Delete ${q}`,content:S.jsxs(Pt.Text,{children:["Are you sure you want to delete ",B>1?`${B} ${q}`:q,"?"]}),okButtonProps:{danger:!0},onOk:()=>{Z.length>0&&g.removeEdges(Z.map(j=>j.id)),g.removeNodes(Q.map(j=>j.id))}})}else Z.length>0&&g.removeEdges(Z.map(B=>B.id))}$.stopPropagation(),$.preventDefault()}},children:S.jsx("div",{className:Ye(["react-flow"]),ref:s,children:S.jsxs(Wg,{deleteKeyCode:null,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,zoomOnDoubleClick:!1,connectionRadius:35,nodes:u[0],edges:l[0],onInit:$=>{c.current=$,x?.($)},snapToGrid:!0,snapGrid:[5,5],minZoom:.25,selectionMode:ds.Partial,nodeTypes:R,edgeTypes:DF,onDrop:H,onDragOver:G,onConnect:J,isValidConnection:P,proOptions:n,nodesConnectable:!b,nodesDraggable:!b,edgesUpdatable:!b,onNodesChange:g.handleNodesChange,onEdgesChange:g.handleEdgesChange,onNodesDelete:$=>{$.forEach(Y=>{g.closeTab(Y?.id)})},onEdgeMouseEnter:($,Y)=>g.setHoveredEdgeId(Y.id),onEdgeMouseLeave:()=>g.setHoveredEdgeId(null),children:[S.jsx(D6,{showInteractive:!1,children:S.jsx(ns,{onClick:()=>g.toggleCompactMode(),children:S.jsx(J2,{})})}),S.jsx(E6,{color:"var(--grl-color-border)",gap:20})]})})}),!b&&f&&S.jsx("div",{className:"grl-dg__aside__menu",children:S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"grl-dg__aside__menu__heading",children:[S.jsxs("div",{className:"grl-dg__aside__menu__heading__text",children:[S.jsx(Pt.Text,{strong:!0,style:{marginBottom:0},children:"Components"})," ",S.jsx(Pt.Text,{type:"secondary",style:{fontSize:10,marginLeft:5},children:"(Drag-and-drop)"})]}),S.jsx(ot,{type:"text",size:"small",icon:S.jsx(vo,{style:{fontSize:12}}),onClick:()=>p(!1)})]}),S.jsx("div",{className:"grl-dg__aside__menu__content",children:S.jsx(bm,{inputDisabled:_,disabled:b})})]})})]})})});Cm.__docgenInfo={description:"",methods:[],displayName:"Graph"};const n0="application/vnd.gorules.decision",Em=()=>{const e=Co(),n=A.useRef(null),r=A.useRef(null),{setDecisionGraph:o,setActivePanel:s}=$t(),{disabled:c,panels:u,activePanel:l}=lt(({disabled:b,panels:_,activePanel:E})=>({disabled:b,panels:_,activePanel:E})),f=async b=>{const _=b?.target?.files,E=new FileReader;E.onload=function(v){try{const N=JSON.parse(v?.target?.result);if(N?.contentType!==n0)throw new Error("Invalid content type");const R=Array.isArray(N?.nodes)?N.nodes:[],T=R.map(G=>G.id),P=N.edges.filter(G=>T.includes(G?.targetId)&&T.includes(G?.sourceId)),H=e0.safeParse({nodes:R,edges:P,settings:N?.settings});if(!H.success){console.log(H.error?.message),zt.error(H.error?.message);return}o(H.data)}catch(N){zt.error(N.message)}},E.readAsText(Array.from(_)?.[0],"UTF-8")},p=b=>{const _=b?.target?.files[0],E=new FileReader;try{E.readAsArrayBuffer(_),E.onload=async()=>{const v=E.result;if(!v)return;const{decisionGraph:N}=e.stateStore.getState(),R=await Bw(v,N),T=N.nodes.map(G=>{let J=G;return R.forEach($=>{$.id===G.id&&(J={...G,content:$.content})}),J}),P=R.filter(G=>!T.some(J=>J.id===G.id)).map((G,J)=>({...G,position:{x:J*250,y:0}})),H=e0.safeParse({nodes:[...T,...P],edges:N.edges,settings:N.settings});if(!H.success){console.log(H.error?.message),zt.error(H.error?.message);return}o(H.data),zt.success("Excel file has been uploaded successfully!")}}catch{zt.error("Failed to upload Excel!")}},d=async()=>{try{const{name:b}=e.stateStore.getState(),{decisionGraph:_}=e.stateStore.getState(),E=`${b.replaceAll(".json","")}.json`,v=JSON.stringify({contentType:n0,nodes:_.nodes,edges:_.edges,settings:_.settings},null,2),N=new Blob([v],{type:"application/json"}),R=URL.createObjectURL(N),T=window.document.createElement("a");T.href=R,T.download=E,window.document.body.appendChild(T),T.click(),window.document.body.removeChild(T),URL.revokeObjectURL(R)}catch(b){zt.error(b.message)}},g=async(b="decision tables")=>{try{const{decisionGraph:_}=e.stateStore.getState(),E=_.nodes.filter(v=>v.type===He.DecisionTable).map(v=>({...v.content,id:v.id,name:v.name}));await Rw(b,E),zt.success("Excel file has been downloaded successfully!")}catch{zt.error("Failed to download Excel file!")}},m=[{key:"upload-json",label:"Upload JSON",onClick:()=>n?.current?.click?.()},{key:"upload-excel",label:"Upload Excel",onClick:()=>r?.current?.click?.()}],x=[{key:"download-json",label:"Download JSON",onClick:()=>d()},{key:"download-excel",label:"Download Excel",onClick:()=>g()}];return S.jsxs("div",{className:"grl-dg__aside",children:[S.jsx("input",{hidden:!0,accept:"application/json",type:"file",ref:n,onChange:f,onClick:b=>{b.target.value=null}}),S.jsx("input",{hidden:!0,accept:".xlsx",type:"file",ref:r,onChange:p,onClick:b=>{b.target.value=null}}),S.jsxs("div",{className:"grl-dg__aside__side-bar",children:[S.jsxs("div",{className:"grl-dg__aside__side-bar__top",children:[!c&&S.jsx(Js,{menu:{items:m},placement:"bottomRight",trigger:["click"],arrow:!0,children:S.jsx(ot,{type:"text",disabled:c,icon:S.jsx(Y2,{})})}),S.jsx(Js,{menu:{items:x},placement:"bottomRight",trigger:["click"],arrow:!0,children:S.jsx(ot,{type:"text",icon:S.jsx(U2,{})})})]}),S.jsx("div",{className:"grl-dg__aside__side-bar__bottom",children:(u||[]).map(b=>{const _=l===b.id;return S.jsx(gr,{title:`${_?"Close":"Open"} ${b.title.toLowerCase()} panel`,placement:"right",children:S.jsx(ot,{type:"text",icon:b.icon,style:{background:_?"rgba(0, 0, 0, 0.1)":void 0},onClick:()=>{if(b?.onClick)return b.onClick();b?.renderPanel&&s(_?void 0:b.id)}},b.id)},b.id)})})]})]})};Em.__docgenInfo={description:"",methods:[],displayName:"GraphSideToolbar"};const Sm=({disabled:e,tabBarExtraContent:n})=>{const r=$t(),{openNodes:o,activeNodeId:s}=lt(({decisionGraph:c,activeTab:u,openTabs:l})=>({activeNodeId:(c?.nodes??[]).find(f=>f.id===u)?.id,openNodes:(l||[]).map(f=>{const p=(c?.nodes??[]).find(d=>d.id===f);if(p)return{id:p?.id,name:p.name,type:p.type,diff:p?._diff}}).filter(f=>!!f)}));return S.jsx("div",{children:S.jsx(Ql,{type:"line",size:"small",className:Ye("grl-graph-tabs"),activeKey:s||"graph",onChange:c=>r.openTab(c),tabBarExtraContent:n,items:[{closable:!1,key:"graph",label:S.jsx(r0,{total:o?.length,icon:S.jsx(tb,{}),name:"Graph",active:!s||s==="graph",onContextClick:c=>{r.closeTab("graph",c)}})},...o.map((c,u)=>{const l=wo[c.type];return{disabled:e,key:c.id,label:S.jsx(r0,{onContextClick:f=>{r.closeTab(c.id,f)},icon:l?.icon,name:c?.name??c?.type,diffStatus:c?.diff?.status,color:l?.color,index:u,active:c.id===s,total:o?.length,onClose:()=>r.closeTab(c.id)}),closable:!0}})]})})},r0=({total:e=0,index:n=-1,icon:r,name:o,active:s,diffStatus:c,color:u=bo.Blue,onClose:l,onContextClick:f})=>{const p=[e>0&&n!==-1&&{key:"close",label:"Close",onClick:()=>f?.("close")},e>0&&n!==-1&&{key:"close-all",label:"Close all Tabs",onClick:()=>f?.("close-all")},e>0&&n!==-1&&{key:"close-other",label:"Close other Tabs",onClick:()=>f?.("close-other")},e>0&&n+1<e&&{key:"close-right",label:"Close Tabs to the right",onClick:()=>f?.("close-right")},e>0&&n>0&&n>0&&{key:"close-left",label:"Close Tabs to the left",onClick:()=>f?.("close-left")}].filter(d=>!!d);return S.jsx(Js,{menu:{items:p},trigger:["contextMenu"],children:S.jsxs("div",{className:"grl-graph-tabs__tab","data-active":s,children:[S.jsx(b0,{size:"small",shape:"square",style:{background:u,fontSize:11,width:18,height:18,lineHeight:"18px",borderRadius:3},icon:r}),o,S.jsx(o0,{status:c,style:{fontSize:16}}),l&&S.jsx(ot,{className:"grl-graph-tabs__closeIcon",type:"text",size:"small",style:{height:20,width:20,color:"black",borderRadius:"50%",lineHeight:0},icon:S.jsx(vo,{style:{fontSize:10}}),onClick:d=>{d.stopPropagation(),l?.()}})]})})};Sm.__docgenInfo={description:"",methods:[],displayName:"GraphTabs",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"TabsProps['tabBarExtraContent']"},description:""}}};const Am=V.memo(A.forwardRef(function({reactFlowProOptions:n,tabBarExtraContent:r},o){const[s,c]=A.useState(!1),u=lt(({decisionGraph:l,activeTab:f})=>(l?.nodes??[]).some(p=>p.id===f));return S.jsxs(S.Fragment,{children:[S.jsx(Em,{}),S.jsxs("div",{className:"grl-dg__graph",children:[S.jsx(Sm,{disabled:s,tabBarExtraContent:r}),S.jsx(Cm,{ref:o,className:Ye([!u&&"active"]),reactFlowProOptions:n,onDisableTabs:c}),S.jsx(_F,{})]}),S.jsx(_m,{})]})})),_F=V.memo(()=>{const{openNodes:e,activeNodeId:n,components:r}=lt(({decisionGraph:c,openTabs:u,activeTab:l,components:f})=>{const p=(c?.nodes??[]).find(g=>g.id===l)?.id;return{openNodes:(c?.nodes??[]).filter(g=>u.includes(g.id)).map(({id:g,type:m})=>({id:g,type:m})),activeNodeId:p,components:f}}),o=A.useRef(null),s=A.useMemo(()=>cw(lw,void 0,{rootElement:o.current}),[o.current]);return S.jsx("div",{style:{display:"contents"},ref:o,children:e.map(c=>S.jsx("div",{className:Ye(["tab-content",n===c?.id&&"active"]),children:ke(c?.type).with(He.DecisionTable,()=>jf?.renderTab?.({id:c?.id,manager:s})).with(He.Function,()=>Nf?.renderTab?.({id:c?.id,manager:s})).with(He.Expression,()=>Ff?.renderTab?.({id:c?.id,manager:s})).with(He.Input,()=>Pf?.renderTab?.({id:c?.id,manager:s})).with(He.Output,()=>$f?.renderTab?.({id:c?.id,manager:s})).otherwise(()=>{const u=r.find(l=>l.type===c.type);return u?u?.renderTab?.({id:c.id,manager:s}):null})},c?.id))})});Am.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphWrapper"};const xF=A.forwardRef(({manager:e,reactFlowProOptions:n,tabBarExtraContent:r,...o},s)=>S.jsx("div",{className:"grl-dg",children:S.jsx(Ef,{children:S.jsxs(vm,{children:[S.jsx(Am,{ref:s,reactFlowProOptions:n,tabBarExtraContent:r}),S.jsx(G4,{}),S.jsx(j4,{...o})]})})}));xF.__docgenInfo={description:"",methods:[],displayName:"DecisionGraph"};export{xF as D,zi as G,gb as R,lt as a,I6 as b,R4 as c,Ii as l,$t as u};
