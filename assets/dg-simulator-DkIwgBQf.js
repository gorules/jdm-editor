const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CYxM8YEF.js","./index-CQHSiloJ.js","./index-DQDNmYQF.js","./index-DYVtDik4.js","./monaco-CIW0So3u.js","./wasm-Di9DWol9.js","./AntdIcon-CfR_PgyU.js","./iframe-aFuwvX5z.js","./index.module-D8lJz3Ej.js","./index-Ps6eo1yX.css"])))=>i.map(i=>d[i]);
import{r as tg,j as A}from"./index-CQHSiloJ.js";import{r as T,R as W,c as Dn,g as ng}from"./index-DQDNmYQF.js";import{j as Yb,k as Zb,b as Uc,p as Tt,d as Kn,a as oa,D as rg,h as Bu,g as ig,I as Kb,e as dl,c as Jb,H as Qb}from"./confirm-action-CdvarwV8.js";import{N as ew,a as tw,b as nw,c as rw,d as iw,u as ow,e as sw,A as aw,f as uw,D as Ys,S as og,s as Yt,o as Rh,T as td}from"./index.module-D8lJz3Ej.js";import{K as js,h as sg,m as ag,Q as is,r as ug,a4 as cw,S as lw,U as dw,C as sa,u as Ou,c as Sr,a5 as fw,a6 as hw,y as pw,f as gw,x as mw,Y as yw,a9 as vw,ag as Dw,g as _w,aC as bw,a as ww,z as Ue,i as Qo,V as Zn,N as Ve,aK as xw,T as rn,ah as xr,t as nd}from"./wasm-Di9DWol9.js";import{a as Cw,r as Ew,P as Sw,b as Aw,L as Fw,N as Dt,D as Nw,R as os,T as Tw,M as Mu,c as ks,F as oi,d as fl,e as cg,f as rd,g as Iw,h as Pu,i as lg,z as fe,j as Rw,k as Bw}from"./dt-1V_WZtg4.js";import{c as it}from"./ce-B6dXa3LS.js";import{r as Ow,I as bn,B as ht}from"./AntdIcon-CfR_PgyU.js";import{E as Mw}from"./expression-Ciyl44UH.js";import{S as ss,d as Pw,a as id,c as Du,P as dg,R as zw,w as jw,p as kw,b as Wc,e as Bh}from"./monaco-CIW0So3u.js";import{_ as $w}from"./iframe-aFuwvX5z.js";const qw=e=>{const{componentCls:n,notificationMarginEdge:r,animationMaxHeight:o}=e,s=`${n}-notice`,u=new js("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),l=new js("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),c=new js("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),d=new js("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[s]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:l}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:c}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:u}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:r,_skip_check_:!0},[s]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:d}}}}},Lw=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Hw={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Gw=(e,n)=>{const{componentCls:r}=e;return{[`${r}-${n}`]:{[`&${r}-stack > ${r}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Hw[n]]:{value:0,_skip_check_:!0}}}}},Vw=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},Uw=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},Ww=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},Vw(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},Uw(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Lw.map(r=>Gw(e,r)).reduce((r,o)=>Object.assign(Object.assign({},r),o),{}))},fg=e=>{const{iconCls:n,componentCls:r,boxShadow:o,fontSizeLG:s,notificationMarginBottom:u,borderRadiusLG:l,colorSuccess:c,colorInfo:d,colorWarning:f,colorError:p,colorTextHeading:g,notificationBg:y,notificationPadding:b,notificationMarginEdge:x,notificationProgressBg:D,notificationProgressHeight:w,fontSize:m,lineHeight:C,width:I,notificationIconSize:F,colorText:j}=e,q=`${r}-notice`;return{position:"relative",marginBottom:u,marginInlineStart:"auto",background:y,borderRadius:l,boxShadow:o,[q]:{padding:b,width:I,maxWidth:`calc(100vw - ${is(e.calc(x).mul(2).equal())})`,overflow:"hidden",lineHeight:C,wordWrap:"break-word"},[`${q}-message`]:{marginBottom:e.marginXS,color:g,fontSize:s,lineHeight:e.lineHeightLG},[`${q}-description`]:{fontSize:m,color:j},[`${q}-closable ${q}-message`]:{paddingInlineEnd:e.paddingLG},[`${q}-with-icon ${q}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:s},[`${q}-with-icon ${q}-description`]:{marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:m},[`${q}-icon`]:{position:"absolute",fontSize:F,lineHeight:1,[`&-success${n}`]:{color:c},[`&-info${n}`]:{color:d},[`&-warning${n}`]:{color:f},[`&-error${n}`]:{color:p}},[`${q}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},lw(e)),[`${q}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${is(l)} * 2)`,left:{_skip_check_:!0,value:l},right:{_skip_check_:!0,value:l},bottom:0,blockSize:w,border:0,"&, &::-webkit-progress-bar":{borderRadius:l,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:D},"&::-webkit-progress-value":{borderRadius:l,background:D}},[`${q}-btn`]:{float:"right",marginTop:e.marginSM}}},Xw=e=>{const{componentCls:n,notificationMarginBottom:r,notificationMarginEdge:o,motionDurationMid:s,motionEaseInOut:u}=e,l=`${n}-notice`,c=new js("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:r},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},ug(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:u,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:u,animationFillMode:"both",animationDuration:s,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:c,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${l}-btn`]:{float:"left"}}})},{[n]:{[`${l}-wrapper`]:Object.assign({},fg(e))}}]},hg=e=>({zIndexPopup:e.zIndexPopupBase+cw+50,width:384}),pg=e=>{const n=e.paddingMD,r=e.paddingLG;return ag(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:r,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${is(e.paddingMD)} ${is(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},gg=sg("Notification",e=>{const n=pg(e);return[Xw(n),qw(n),Ww(n)]},hg),Yw=dw(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,r=pg(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},fg(r)),{width:r.width,maxWidth:`calc(100vw - ${is(e.calc(r.notificationMarginEdge).mul(2).equal())})`,margin:0})}},hg);var Zw=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};function od(e,n){return n===null||n===!1?null:n||T.createElement(tw,{className:`${e}-close-icon`})}const Kw={success:iw,info:rw,error:fw,warning:nw},mg=e=>{const{prefixCls:n,icon:r,type:o,message:s,description:u,btn:l,role:c="alert"}=e;let d=null;return r?d=T.createElement("span",{className:`${n}-icon`},r):o&&(d=T.createElement(Kw[o]||null,{className:Sr(`${n}-icon`,`${n}-icon-${o}`)})),T.createElement("div",{className:Sr({[`${n}-with-icon`]:d}),role:c},d,T.createElement("div",{className:`${n}-message`},s),T.createElement("div",{className:`${n}-description`},u),l&&T.createElement("div",{className:`${n}-btn`},l))},Jw=e=>{const{prefixCls:n,className:r,icon:o,type:s,message:u,description:l,btn:c,closable:d=!0,closeIcon:f,className:p}=e,g=Zw(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:y}=T.useContext(sa),b=n||y("notification"),x=`${b}-notice`,D=Ou(b),[w,m,C]=gg(b,D);return w(T.createElement("div",{className:Sr(`${x}-pure-panel`,m,r,C,D)},T.createElement(Yw,{prefixCls:b}),T.createElement(ew,Object.assign({},g,{prefixCls:b,eventKey:"pure",duration:null,closable:d,className:Sr({notificationClassName:p}),closeIcon:od(b,f),content:T.createElement(mg,{prefixCls:x,icon:o,type:s,message:u,description:l,btn:c})}))))};function Qw(e,n,r){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":o={left:0,top:n,bottom:"auto"};break;case"topRight":o={right:0,top:n,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":o={left:0,top:"auto",bottom:r};break;default:o={right:0,top:"auto",bottom:r};break}return o}function ex(e){return{motionName:`${e}-fade`}}var tx=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const Oh=24,nx=4.5,rx="topRight",ix=e=>{let{children:n,prefixCls:r}=e;const o=Ou(r),[s,u,l]=gg(r,o);return s(W.createElement(sw,{classNames:{list:Sr(u,l,o)}},n))},ox=(e,n)=>{let{prefixCls:r,key:o}=n;return W.createElement(ix,{prefixCls:r,key:o},e)},sx=W.forwardRef((e,n)=>{const{top:r,bottom:o,prefixCls:s,getContainer:u,maxCount:l,rtl:c,onAllRemoved:d,stack:f,duration:p,pauseOnHover:g=!0,showProgress:y}=e,{getPrefixCls:b,getPopupContainer:x,notification:D,direction:w}=T.useContext(sa),[,m]=pw(),C=s||b("notification"),I=ne=>Qw(ne,r??Oh,o??Oh),F=()=>Sr({[`${C}-rtl`]:c??w==="rtl"}),j=()=>ex(C),[q,Y]=ow({prefixCls:C,style:I,className:F,motion:j,closable:!0,closeIcon:od(C),duration:p??nx,getContainer:()=>u?.()||x?.()||document.body,maxCount:l,pauseOnHover:g,showProgress:y,onAllRemoved:d,renderNotifications:ox,stack:f===!1?!1:{threshold:typeof f=="object"?f?.threshold:void 0,offset:8,gap:m.margin}});return W.useImperativeHandle(n,()=>Object.assign(Object.assign({},q),{prefixCls:C,notification:D})),Y});function yg(e){const n=W.useRef(null);return hw(),[W.useMemo(()=>{const o=c=>{var d;if(!n.current)return;const{open:f,prefixCls:p,notification:g}=n.current,y=`${p}-notice`,{message:b,description:x,icon:D,type:w,btn:m,className:C,style:I,role:F="alert",closeIcon:j,closable:q}=c,Y=tx(c,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),ne=od(y,typeof j<"u"?j:g?.closeIcon);return f(Object.assign(Object.assign({placement:(d=e?.placement)!==null&&d!==void 0?d:rx},Y),{content:W.createElement(mg,{prefixCls:y,icon:D,type:w,message:b,description:x,btn:m,role:F}),className:Sr(w&&`${y}-${w}`,C,g?.className),style:Object.assign(Object.assign({},g?.style),I),closeIcon:ne,closable:q??!!ne}))},u={open:o,destroy:c=>{var d,f;c!==void 0?(d=n.current)===null||d===void 0||d.close(c):(f=n.current)===null||f===void 0||f.destroy()}};return["success","info","warning","error"].forEach(c=>{u[c]=d=>o(Object.assign(Object.assign({},d),{type:c}))}),u},[]),W.createElement(sx,Object.assign({key:"notification-holder"},e,{ref:n}))]}function ax(e){return yg(e)}function ux(){const[,e]=T.useReducer(n=>n+1,0);return e}function cx(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=T.useRef({}),r=ux(),o=Cw();return gw(()=>{const s=o.subscribe(u=>{n.current=u,e&&r()});return()=>o.unsubscribe(s)},[]),n.current}const hl=T.createContext({}),lx=e=>{const{antCls:n,componentCls:r,iconCls:o,avatarBg:s,avatarColor:u,containerSize:l,containerSizeLG:c,containerSizeSM:d,textFontSize:f,textFontSizeLG:p,textFontSizeSM:g,borderRadius:y,borderRadiusLG:b,borderRadiusSM:x,lineWidth:D,lineType:w}=e,m=(C,I,F)=>({width:C,height:C,borderRadius:"50%",[`&${r}-square`]:{borderRadius:F},[`&${r}-icon`]:{fontSize:I,[`> ${o}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},ug(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:u,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${is(D)} ${w} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),m(l,f,y)),{"&-lg":Object.assign({},m(c,p,b)),"&-sm":Object.assign({},m(d,g,x)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},dx=e=>{const{componentCls:n,groupBorderColor:r,groupOverlapping:o,groupSpace:s}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:o}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:s}}}},fx=e=>{const{controlHeight:n,controlHeightLG:r,controlHeightSM:o,fontSize:s,fontSizeLG:u,fontSizeXL:l,fontSizeHeading3:c,marginXS:d,marginXXS:f,colorBorderBg:p}=e;return{containerSize:n,containerSizeLG:r,containerSizeSM:o,textFontSize:Math.round((u+l)/2),textFontSizeLG:c,textFontSizeSM:s,groupSpace:f,groupOverlapping:-d,groupBorderColor:p}},vg=sg("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:r}=e,o=ag(e,{avatarBg:r,avatarColor:n});return[lx(o),dx(o)]},fx);var hx=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const px=(e,n)=>{const[r,o]=T.useState(1),[s,u]=T.useState(!1),[l,c]=T.useState(!0),d=T.useRef(null),f=T.useRef(null),p=mw(n,d),{getPrefixCls:g,avatar:y}=T.useContext(sa),b=T.useContext(hl),x=()=>{if(!f.current||!d.current)return;const De=f.current.offsetWidth,Se=d.current.offsetWidth;if(De!==0&&Se!==0){const{gap:Be=4}=e;Be*2<Se&&o(Se-Be*2<De?(Se-Be*2)/De:1)}};T.useEffect(()=>{u(!0)},[]),T.useEffect(()=>{c(!0),o(1)},[e.src]),T.useEffect(x,[e.gap]);const D=()=>{const{onError:De}=e;De?.()!==!1&&c(!1)},{prefixCls:w,shape:m,size:C,src:I,srcSet:F,icon:j,className:q,rootClassName:Y,alt:ne,draggable:O,children:V,crossOrigin:J}=e,ee=hx(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),Z=yw(De=>{var Se,Be;return(Be=(Se=C??b?.size)!==null&&Se!==void 0?Se:De)!==null&&Be!==void 0?Be:"default"}),R=Object.keys(typeof Z=="object"?Z||{}:{}).some(De=>["xs","sm","md","lg","xl","xxl"].includes(De)),G=cx(R),k=T.useMemo(()=>{if(typeof Z!="object")return{};const De=Ew.find(Be=>G[Be]),Se=Z[De];return Se?{width:Se,height:Se,fontSize:Se&&(j||V)?Se/2:18}:{}},[G,Z]),K=g("avatar",w),se=Ou(K),[U,re,ue]=vg(K,se),de=Sr({[`${K}-lg`]:Z==="large",[`${K}-sm`]:Z==="small"}),le=T.isValidElement(I),ve=m||b?.shape||"circle",ge=Sr(K,de,y?.className,`${K}-${ve}`,{[`${K}-image`]:le||I&&l,[`${K}-icon`]:!!j},ue,se,q,Y,re),Ee=typeof Z=="number"?{width:Z,height:Z,fontSize:j?Z/2:18}:{};let Oe;if(typeof I=="string"&&l)Oe=T.createElement("img",{src:I,draggable:O,srcSet:F,onError:D,alt:ne,crossOrigin:J});else if(le)Oe=I;else if(j)Oe=j;else if(s||r!==1){const De=`scale(${r})`,Se={msTransform:De,WebkitTransform:De,transform:De};Oe=T.createElement(vw,{onResize:x},T.createElement("span",{className:`${K}-string`,ref:f,style:Object.assign({},Se)},V))}else Oe=T.createElement("span",{className:`${K}-string`,style:{opacity:0},ref:f},V);return delete ee.onError,delete ee.gap,U(T.createElement("span",Object.assign({},ee,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ee),k),y?.style),ee.style),className:ge,ref:p}),Oe))},Dg=T.forwardRef(px),Mh=e=>{const{size:n,shape:r}=T.useContext(hl),o=T.useMemo(()=>({size:e.size||n,shape:e.shape||r}),[e.size,e.shape,n,r]);return T.createElement(hl.Provider,{value:o},e.children)},gx=e=>{var n,r,o;const{getPrefixCls:s,direction:u}=T.useContext(sa),{prefixCls:l,className:c,rootClassName:d,style:f,maxCount:p,maxStyle:g,size:y,shape:b,maxPopoverPlacement:x,maxPopoverTrigger:D,children:w,max:m}=e,C=s("avatar",l),I=`${C}-group`,F=Ou(C),[j,q,Y]=vg(C,F),ne=Sr(I,{[`${I}-rtl`]:u==="rtl"},Y,F,c,d,q),O=Dw(w).map((ee,Z)=>_w(ee,{key:`avatar-key-${Z}`})),V=m?.count||p,J=O.length;if(V&&V<J){const ee=O.slice(0,V),Z=O.slice(V,J),R=m?.style||g,G=((n=m?.popover)===null||n===void 0?void 0:n.trigger)||D||"hover",k=((r=m?.popover)===null||r===void 0?void 0:r.placement)||x||"top",K=Object.assign(Object.assign({content:Z},m?.popover),{overlayClassName:Sr(`${I}-popover`,(o=m?.popover)===null||o===void 0?void 0:o.overlayClassName),placement:k,trigger:G});return ee.push(T.createElement(Sw,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},K),T.createElement(Dg,{style:R},`+${J-V}`))),j(T.createElement(Mh,{shape:b,size:y},T.createElement("div",{className:ne,style:f},ee)))}return j(T.createElement(Mh,{shape:b,size:y},T.createElement("div",{className:ne,style:f},O)))},_g=Dg;_g.Group=gx;let _r=null,du=e=>e(),_u=[],Zs={};function Ph(){const{getContainer:e,rtl:n,maxCount:r,top:o,bottom:s,showProgress:u,pauseOnHover:l}=Zs,c=e?.()||document.body;return{getContainer:()=>c,rtl:n,maxCount:r,top:o,bottom:s,showProgress:u,pauseOnHover:l}}const mx=W.forwardRef((e,n)=>{const{notificationConfig:r,sync:o}=e,{getPrefixCls:s}=T.useContext(sa),u=Zs.prefixCls||s("notification"),l=T.useContext(aw),[c,d]=yg(Object.assign(Object.assign(Object.assign({},r),{prefixCls:u}),l.notification));return W.useEffect(o,[]),W.useImperativeHandle(n,()=>{const f=Object.assign({},c);return Object.keys(f).forEach(p=>{f[p]=function(){return o(),c[p].apply(c,arguments)}}),{instance:f,sync:o}}),d}),yx=W.forwardRef((e,n)=>{const[r,o]=W.useState(Ph),s=()=>{o(Ph)};W.useEffect(s,[]);const u=bw(),l=u.getRootPrefixCls(),c=u.getIconPrefixCls(),d=u.getTheme(),f=W.createElement(mx,{ref:n,sync:s,notificationConfig:r});return W.createElement(ww,{prefixCls:l,iconPrefixCls:c,theme:d},u.holderRender?u.holderRender(f):f)});function sd(){if(!_r){const e=document.createDocumentFragment(),n={fragment:e};_r=n,du(()=>{Ow(W.createElement(yx,{ref:r=>{const{instance:o,sync:s}=r||{};Promise.resolve().then(()=>{!n.instance&&o&&(n.instance=o,n.sync=s,sd())})}}),e)});return}_r.instance&&(_u.forEach(e=>{switch(e.type){case"open":{du(()=>{_r.instance.open(Object.assign(Object.assign({},Zs),e.config))});break}case"destroy":du(()=>{_r?.instance.destroy(e.key)});break}}),_u=[])}function vx(e){Zs=Object.assign(Object.assign({},Zs),e),du(()=>{var n;(n=_r?.sync)===null||n===void 0||n.call(_r)})}function bg(e){_u.push({type:"open",config:e}),sd()}const Dx=e=>{_u.push({type:"destroy",key:e}),sd()},_x=["success","info","warning","error"],bx={open:bg,destroy:Dx,config:vx,useNotification:ax,_InternalPanelDoNotUseOrYouWillBeFired:Jw},ad=bx;_x.forEach(e=>{ad[e]=n=>bg(Object.assign(Object.assign({},n),{type:e}))});var wx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},xx={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:r}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:n}}]}},name:"check-circle",theme:"twotone"},Cx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},Ex={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:r}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:n}}]}},name:"close-circle",theme:"twotone"},Sx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},Ax={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},Fx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},Nx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},Tx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Ix={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Rx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Bx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},Ox={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},Mx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};function pl(){return pl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},pl.apply(this,arguments)}const Px=(e,n)=>T.createElement(bn,pl({},e,{ref:n,icon:wx})),wg=T.forwardRef(Px);function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gl.apply(this,arguments)}const zx=(e,n)=>T.createElement(bn,gl({},e,{ref:n,icon:xx})),jx=T.forwardRef(zx);function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ml.apply(this,arguments)}const kx=(e,n)=>T.createElement(bn,ml({},e,{ref:n,icon:Cx})),$x=T.forwardRef(kx);function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},yl.apply(this,arguments)}const qx=(e,n)=>T.createElement(bn,yl({},e,{ref:n,icon:Ex})),Lx=T.forwardRef(qx);function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},vl.apply(this,arguments)}const Hx=(e,n)=>T.createElement(bn,vl({},e,{ref:n,icon:Sx})),Gx=T.forwardRef(Hx);function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Dl.apply(this,arguments)}const Vx=(e,n)=>T.createElement(bn,Dl({},e,{ref:n,icon:Ax})),Ux=T.forwardRef(Vx);function _l(){return _l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_l.apply(this,arguments)}const Wx=(e,n)=>T.createElement(bn,_l({},e,{ref:n,icon:Fx})),Xx=T.forwardRef(Wx);function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},bl.apply(this,arguments)}const Yx=(e,n)=>T.createElement(bn,bl({},e,{ref:n,icon:Nx})),Zx=T.forwardRef(Yx);function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wl.apply(this,arguments)}const Kx=(e,n)=>T.createElement(bn,wl({},e,{ref:n,icon:Aw})),Jx=T.forwardRef(Kx);function xl(){return xl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},xl.apply(this,arguments)}const Qx=(e,n)=>T.createElement(bn,xl({},e,{ref:n,icon:Tx})),xg=T.forwardRef(Qx);function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Cl.apply(this,arguments)}const eC=(e,n)=>T.createElement(bn,Cl({},e,{ref:n,icon:Fw})),tC=T.forwardRef(eC);function El(){return El=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},El.apply(this,arguments)}const nC=(e,n)=>T.createElement(bn,El({},e,{ref:n,icon:Ix})),rC=T.forwardRef(nC);function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sl.apply(this,arguments)}const iC=(e,n)=>T.createElement(bn,Sl({},e,{ref:n,icon:Rx})),oC=T.forwardRef(iC);function Al(){return Al=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Al.apply(this,arguments)}const sC=(e,n)=>T.createElement(bn,Al({},e,{ref:n,icon:Bx})),Cg=T.forwardRef(sC);function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fl.apply(this,arguments)}const aC=(e,n)=>T.createElement(bn,Fl({},e,{ref:n,icon:Ox})),uC=T.forwardRef(aC);function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nl.apply(this,arguments)}const cC=(e,n)=>T.createElement(bn,Nl({},e,{ref:n,icon:Mx})),lC=T.forwardRef(cC);var dC=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,fC=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,hC=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Xc={Space_Separator:dC,ID_Start:fC,ID_Continue:hC},Gt={isSpaceSeparator(e){return typeof e=="string"&&Xc.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||Xc.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e===""||e===""||Xc.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let Tl,Tn,si,bu,Oi,Cr,dn,ud,Ws;var pC=function(n,r){Tl=String(n),Tn="start",si=[],bu=0,Oi=1,Cr=0,dn=void 0,ud=void 0,Ws=void 0;do dn=gC(),vC[Tn]();while(dn.type!=="eof");return typeof r=="function"?Il({"":Ws},"",r):Ws};function Il(e,n,r){const o=e[n];if(o!=null&&typeof o=="object")if(Array.isArray(o))for(let s=0;s<o.length;s++){const u=String(s),l=Il(o,u,r);l===void 0?delete o[u]:Object.defineProperty(o,u,{value:l,writable:!0,enumerable:!0,configurable:!0})}else for(const s in o){const u=Il(o,s,r);u===void 0?delete o[s]:Object.defineProperty(o,s,{value:u,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,n,o)}let Le,je,$s,ii,Ye;function gC(){for(Le="default",je="",$s=!1,ii=1;;){Ye=ui();const e=Eg[Le]();if(e)return e}}function ui(){if(Tl[bu])return String.fromCodePoint(Tl.codePointAt(bu))}function ae(){const e=ui();return e===`
`?(Oi++,Cr=0):e?Cr+=e.length:Cr++,e&&(bu+=e.length),e}const Eg={default(){switch(Ye){case"	":case"\v":case"\f":case" ":case"":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":ae();return;case"/":ae(),Le="comment";return;case void 0:return ae(),xt("eof")}if(Gt.isSpaceSeparator(Ye)){ae();return}return Eg[Tn]()},comment(){switch(Ye){case"*":ae(),Le="multiLineComment";return;case"/":ae(),Le="singleLineComment";return}throw Ct(ae())},multiLineComment(){switch(Ye){case"*":ae(),Le="multiLineCommentAsterisk";return;case void 0:throw Ct(ae())}ae()},multiLineCommentAsterisk(){switch(Ye){case"*":ae();return;case"/":ae(),Le="default";return;case void 0:throw Ct(ae())}ae(),Le="multiLineComment"},singleLineComment(){switch(Ye){case`
`:case"\r":case"\u2028":case"\u2029":ae(),Le="default";return;case void 0:return ae(),xt("eof")}ae()},value(){switch(Ye){case"{":case"[":return xt("punctuator",ae());case"n":return ae(),co("ull"),xt("null",null);case"t":return ae(),co("rue"),xt("boolean",!0);case"f":return ae(),co("alse"),xt("boolean",!1);case"-":case"+":ae()==="-"&&(ii=-1),Le="sign";return;case".":je=ae(),Le="decimalPointLeading";return;case"0":je=ae(),Le="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":je=ae(),Le="decimalInteger";return;case"I":return ae(),co("nfinity"),xt("numeric",1/0);case"N":return ae(),co("aN"),xt("numeric",NaN);case'"':case"'":$s=ae()==='"',je="",Le="string";return}throw Ct(ae())},identifierNameStartEscape(){if(Ye!=="u")throw Ct(ae());ae();const e=Rl();switch(e){case"$":case"_":break;default:if(!Gt.isIdStartChar(e))throw zh();break}je+=e,Le="identifierName"},identifierName(){switch(Ye){case"$":case"_":case"":case"":je+=ae();return;case"\\":ae(),Le="identifierNameEscape";return}if(Gt.isIdContinueChar(Ye)){je+=ae();return}return xt("identifier",je)},identifierNameEscape(){if(Ye!=="u")throw Ct(ae());ae();const e=Rl();switch(e){case"$":case"_":case"":case"":break;default:if(!Gt.isIdContinueChar(e))throw zh();break}je+=e,Le="identifierName"},sign(){switch(Ye){case".":je=ae(),Le="decimalPointLeading";return;case"0":je=ae(),Le="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":je=ae(),Le="decimalInteger";return;case"I":return ae(),co("nfinity"),xt("numeric",ii*(1/0));case"N":return ae(),co("aN"),xt("numeric",NaN)}throw Ct(ae())},zero(){switch(Ye){case".":je+=ae(),Le="decimalPoint";return;case"e":case"E":je+=ae(),Le="decimalExponent";return;case"x":case"X":je+=ae(),Le="hexadecimal";return}return xt("numeric",ii*0)},decimalInteger(){switch(Ye){case".":je+=ae(),Le="decimalPoint";return;case"e":case"E":je+=ae(),Le="decimalExponent";return}if(Gt.isDigit(Ye)){je+=ae();return}return xt("numeric",ii*Number(je))},decimalPointLeading(){if(Gt.isDigit(Ye)){je+=ae(),Le="decimalFraction";return}throw Ct(ae())},decimalPoint(){switch(Ye){case"e":case"E":je+=ae(),Le="decimalExponent";return}if(Gt.isDigit(Ye)){je+=ae(),Le="decimalFraction";return}return xt("numeric",ii*Number(je))},decimalFraction(){switch(Ye){case"e":case"E":je+=ae(),Le="decimalExponent";return}if(Gt.isDigit(Ye)){je+=ae();return}return xt("numeric",ii*Number(je))},decimalExponent(){switch(Ye){case"+":case"-":je+=ae(),Le="decimalExponentSign";return}if(Gt.isDigit(Ye)){je+=ae(),Le="decimalExponentInteger";return}throw Ct(ae())},decimalExponentSign(){if(Gt.isDigit(Ye)){je+=ae(),Le="decimalExponentInteger";return}throw Ct(ae())},decimalExponentInteger(){if(Gt.isDigit(Ye)){je+=ae();return}return xt("numeric",ii*Number(je))},hexadecimal(){if(Gt.isHexDigit(Ye)){je+=ae(),Le="hexadecimalInteger";return}throw Ct(ae())},hexadecimalInteger(){if(Gt.isHexDigit(Ye)){je+=ae();return}return xt("numeric",ii*Number(je))},string(){switch(Ye){case"\\":ae(),je+=mC();return;case'"':if($s)return ae(),xt("string",je);je+=ae();return;case"'":if(!$s)return ae(),xt("string",je);je+=ae();return;case`
`:case"\r":throw Ct(ae());case"\u2028":case"\u2029":DC(Ye);break;case void 0:throw Ct(ae())}je+=ae()},start(){switch(Ye){case"{":case"[":return xt("punctuator",ae())}Le="value"},beforePropertyName(){switch(Ye){case"$":case"_":je=ae(),Le="identifierName";return;case"\\":ae(),Le="identifierNameStartEscape";return;case"}":return xt("punctuator",ae());case'"':case"'":$s=ae()==='"',Le="string";return}if(Gt.isIdStartChar(Ye)){je+=ae(),Le="identifierName";return}throw Ct(ae())},afterPropertyName(){if(Ye===":")return xt("punctuator",ae());throw Ct(ae())},beforePropertyValue(){Le="value"},afterPropertyValue(){switch(Ye){case",":case"}":return xt("punctuator",ae())}throw Ct(ae())},beforeArrayValue(){if(Ye==="]")return xt("punctuator",ae());Le="value"},afterArrayValue(){switch(Ye){case",":case"]":return xt("punctuator",ae())}throw Ct(ae())},end(){throw Ct(ae())}};function xt(e,n){return{type:e,value:n,line:Oi,column:Cr}}function co(e){for(const n of e){if(ui()!==n)throw Ct(ae());ae()}}function mC(){switch(ui()){case"b":return ae(),"\b";case"f":return ae(),"\f";case"n":return ae(),`
`;case"r":return ae(),"\r";case"t":return ae(),"	";case"v":return ae(),"\v";case"0":if(ae(),Gt.isDigit(ui()))throw Ct(ae());return"\0";case"x":return ae(),yC();case"u":return ae(),Rl();case`
`:case"\u2028":case"\u2029":return ae(),"";case"\r":return ae(),ui()===`
`&&ae(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Ct(ae());case void 0:throw Ct(ae())}return ae()}function yC(){let e="",n=ui();if(!Gt.isHexDigit(n)||(e+=ae(),n=ui(),!Gt.isHexDigit(n)))throw Ct(ae());return e+=ae(),String.fromCodePoint(parseInt(e,16))}function Rl(){let e="",n=4;for(;n-- >0;){const r=ui();if(!Gt.isHexDigit(r))throw Ct(ae());e+=ae()}return String.fromCodePoint(parseInt(e,16))}const vC={start(){if(dn.type==="eof")throw lo();Yc()},beforePropertyName(){switch(dn.type){case"identifier":case"string":ud=dn.value,Tn="afterPropertyName";return;case"punctuator":Ya();return;case"eof":throw lo()}},afterPropertyName(){if(dn.type==="eof")throw lo();Tn="beforePropertyValue"},beforePropertyValue(){if(dn.type==="eof")throw lo();Yc()},beforeArrayValue(){if(dn.type==="eof")throw lo();if(dn.type==="punctuator"&&dn.value==="]"){Ya();return}Yc()},afterPropertyValue(){if(dn.type==="eof")throw lo();switch(dn.value){case",":Tn="beforePropertyName";return;case"}":Ya()}},afterArrayValue(){if(dn.type==="eof")throw lo();switch(dn.value){case",":Tn="beforeArrayValue";return;case"]":Ya()}},end(){}};function Yc(){let e;switch(dn.type){case"punctuator":switch(dn.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=dn.value;break}if(Ws===void 0)Ws=e;else{const n=si[si.length-1];Array.isArray(n)?n.push(e):Object.defineProperty(n,ud,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")si.push(e),Array.isArray(e)?Tn="beforeArrayValue":Tn="beforePropertyName";else{const n=si[si.length-1];n==null?Tn="end":Array.isArray(n)?Tn="afterArrayValue":Tn="afterPropertyValue"}}function Ya(){si.pop();const e=si[si.length-1];e==null?Tn="end":Array.isArray(e)?Tn="afterArrayValue":Tn="afterPropertyValue"}function Ct(e){return wu(e===void 0?`JSON5: invalid end of input at ${Oi}:${Cr}`:`JSON5: invalid character '${Sg(e)}' at ${Oi}:${Cr}`)}function lo(){return wu(`JSON5: invalid end of input at ${Oi}:${Cr}`)}function zh(){return Cr-=5,wu(`JSON5: invalid identifier character at ${Oi}:${Cr}`)}function DC(e){console.warn(`JSON5: '${Sg(e)}' in strings is not valid ECMAScript; consider escaping`)}function Sg(e){const n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(n[e])return n[e];if(e<" "){const r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function wu(e){const n=new SyntaxError(e);return n.lineNumber=Oi,n.columnNumber=Cr,n}var _C=function(n,r,o){const s=[];let u="",l,c,d="",f;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(o=r.space,f=r.quote,r=r.replacer),typeof r=="function")c=r;else if(Array.isArray(r)){l=[];for(const D of r){let w;typeof D=="string"?w=D:(typeof D=="number"||D instanceof String||D instanceof Number)&&(w=String(D)),w!==void 0&&l.indexOf(w)<0&&l.push(w)}}return o instanceof Number?o=Number(o):o instanceof String&&(o=String(o)),typeof o=="number"?o>0&&(o=Math.min(10,Math.floor(o)),d="          ".substr(0,o)):typeof o=="string"&&(d=o.substr(0,10)),p("",{"":n});function p(D,w){let m=w[D];switch(m!=null&&(typeof m.toJSON5=="function"?m=m.toJSON5(D):typeof m.toJSON=="function"&&(m=m.toJSON(D))),c&&(m=c.call(w,D,m)),m instanceof Number?m=Number(m):m instanceof String?m=String(m):m instanceof Boolean&&(m=m.valueOf()),m){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof m=="string")return g(m);if(typeof m=="number")return String(m);if(typeof m=="object")return Array.isArray(m)?x(m):y(m)}function g(D){const w={"'":.1,'"':.2},m={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let C="";for(let F=0;F<D.length;F++){const j=D[F];switch(j){case"'":case'"':w[j]++,C+=j;continue;case"\0":if(Gt.isDigit(D[F+1])){C+="\\x00";continue}}if(m[j]){C+=m[j];continue}if(j<" "){let q=j.charCodeAt(0).toString(16);C+="\\x"+("00"+q).substring(q.length);continue}C+=j}const I=f||Object.keys(w).reduce((F,j)=>w[F]<w[j]?F:j);return C=C.replace(new RegExp(I,"g"),m[I]),I+C+I}function y(D){if(s.indexOf(D)>=0)throw TypeError("Converting circular structure to JSON5");s.push(D);let w=u;u=u+d;let m=l||Object.keys(D),C=[];for(const F of m){const j=p(F,D);if(j!==void 0){let q=b(F)+":";d!==""&&(q+=" "),q+=j,C.push(q)}}let I;if(C.length===0)I="{}";else{let F;if(d==="")F=C.join(","),I="{"+F+"}";else{let j=`,
`+u;F=C.join(j),I=`{
`+u+F+`,
`+w+"}"}}return s.pop(),u=w,I}function b(D){if(D.length===0)return g(D);const w=String.fromCodePoint(D.codePointAt(0));if(!Gt.isIdStartChar(w))return g(D);for(let m=w.length;m<D.length;m++)if(!Gt.isIdContinueChar(String.fromCodePoint(D.codePointAt(m))))return g(D);return D}function x(D){if(s.indexOf(D)>=0)throw TypeError("Converting circular structure to JSON5");s.push(D);let w=u;u=u+d;let m=[];for(let I=0;I<D.length;I++){const F=p(String(I),D);m.push(F!==void 0?F:"null")}let C;if(m.length===0)C="[]";else if(d==="")C="["+m.join(",")+"]";else{let I=`,
`+u,F=m.join(I);C=`[
`+u+F+`,
`+w+"]"}return s.pop(),u=w,C}};const bC={parse:pC,stringify:_C};var Ii=bC;function In(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=In(e[r]))!==""&&(n+=(n&&" ")+o);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}const{useDebugValue:wC}=W,{useSyncExternalStoreWithSelector:xC}=Zb,CC=e=>e;function Ag(e,n=CC,r){const o=xC(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return wC(o),o}const jh=(e,n)=>{const r=Yb(e),o=(s,u=n)=>Ag(r,s,u);return Object.assign(o,r),o},EC=(e,n)=>e?jh(e,n):jh;function _n(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[o,s]of e)if(!Object.is(s,n.get(o)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const o of e)if(!n.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(n,o)||!Object.is(e[o],n[o]))return!1;return!0}var SC={value:()=>{}};function zu(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new fu(r)}function fu(e){this._=e}function AC(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}fu.prototype=zu.prototype={constructor:fu,on:function(e,n){var r=this._,o=AC(e+"",r),s,u=-1,l=o.length;if(arguments.length<2){for(;++u<l;)if((s=(e=o[u]).type)&&(s=FC(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<l;)if(s=(e=o[u]).type)r[s]=kh(r[s],e.name,n);else if(n==null)for(s in r)r[s]=kh(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new fu(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,u;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],o=0,s=u.length;o<s;++o)u[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,u=o.length;s<u;++s)o[s].value.apply(n,r)}};function FC(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function kh(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=SC,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var Bl="http://www.w3.org/1999/xhtml";const $h={svg:"http://www.w3.org/2000/svg",xhtml:Bl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ju(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),$h.hasOwnProperty(n)?{space:$h[n],local:e}:e}function NC(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Bl&&n.documentElement.namespaceURI===Bl?n.createElement(e):n.createElementNS(r,e)}}function TC(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Fg(e){var n=ju(e);return(n.local?TC:NC)(n)}function IC(){}function cd(e){return e==null?IC:function(){return this.querySelector(e)}}function RC(e){typeof e!="function"&&(e=cd(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=new Array(l),d,f,p=0;p<l;++p)(d=u[p])&&(f=e.call(d,d.__data__,p,u))&&("__data__"in d&&(f.__data__=d.__data__),c[p]=f);return new Jn(o,this._parents)}function BC(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function OC(){return[]}function Ng(e){return e==null?OC:function(){return this.querySelectorAll(e)}}function MC(e){return function(){return BC(e.apply(this,arguments))}}function PC(e){typeof e=="function"?e=MC(e):e=Ng(e);for(var n=this._groups,r=n.length,o=[],s=[],u=0;u<r;++u)for(var l=n[u],c=l.length,d,f=0;f<c;++f)(d=l[f])&&(o.push(e.call(d,d.__data__,f,l)),s.push(d));return new Jn(o,s)}function Tg(e){return function(){return this.matches(e)}}function Ig(e){return function(n){return n.matches(e)}}var zC=Array.prototype.find;function jC(e){return function(){return zC.call(this.children,e)}}function kC(){return this.firstElementChild}function $C(e){return this.select(e==null?kC:jC(typeof e=="function"?e:Ig(e)))}var qC=Array.prototype.filter;function LC(){return Array.from(this.children)}function HC(e){return function(){return qC.call(this.children,e)}}function GC(e){return this.selectAll(e==null?LC:HC(typeof e=="function"?e:Ig(e)))}function VC(e){typeof e!="function"&&(e=Tg(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=[],d,f=0;f<l;++f)(d=u[f])&&e.call(d,d.__data__,f,u)&&c.push(d);return new Jn(o,this._parents)}function Rg(e){return new Array(e.length)}function UC(){return new Jn(this._enter||this._groups.map(Rg),this._parents)}function xu(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}xu.prototype={constructor:xu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function WC(e){return function(){return e}}function XC(e,n,r,o,s,u){for(var l=0,c,d=n.length,f=u.length;l<f;++l)(c=n[l])?(c.__data__=u[l],o[l]=c):r[l]=new xu(e,u[l]);for(;l<d;++l)(c=n[l])&&(s[l]=c)}function YC(e,n,r,o,s,u,l){var c,d,f=new Map,p=n.length,g=u.length,y=new Array(p),b;for(c=0;c<p;++c)(d=n[c])&&(y[c]=b=l.call(d,d.__data__,c,n)+"",f.has(b)?s[c]=d:f.set(b,d));for(c=0;c<g;++c)b=l.call(e,u[c],c,u)+"",(d=f.get(b))?(o[c]=d,d.__data__=u[c],f.delete(b)):r[c]=new xu(e,u[c]);for(c=0;c<p;++c)(d=n[c])&&f.get(y[c])===d&&(s[c]=d)}function ZC(e){return e.__data__}function KC(e,n){if(!arguments.length)return Array.from(this,ZC);var r=n?YC:XC,o=this._parents,s=this._groups;typeof e!="function"&&(e=WC(e));for(var u=s.length,l=new Array(u),c=new Array(u),d=new Array(u),f=0;f<u;++f){var p=o[f],g=s[f],y=g.length,b=JC(e.call(p,p&&p.__data__,f,o)),x=b.length,D=c[f]=new Array(x),w=l[f]=new Array(x),m=d[f]=new Array(y);r(p,g,D,w,m,b,n);for(var C=0,I=0,F,j;C<x;++C)if(F=D[C]){for(C>=I&&(I=C+1);!(j=w[I])&&++I<x;);F._next=j||null}}return l=new Jn(l,o),l._enter=c,l._exit=d,l}function JC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QC(){return new Jn(this._exit||this._groups.map(Rg),this._parents)}function e2(e,n,r){var o=this.enter(),s=this,u=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?u.remove():r(u),o&&s?o.merge(s).order():s}function t2(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,u=o.length,l=Math.min(s,u),c=new Array(s),d=0;d<l;++d)for(var f=r[d],p=o[d],g=f.length,y=c[d]=new Array(g),b,x=0;x<g;++x)(b=f[x]||p[x])&&(y[x]=b);for(;d<s;++d)c[d]=r[d];return new Jn(c,this._parents)}function n2(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,u=o[s],l;--s>=0;)(l=o[s])&&(u&&l.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(l,u),u=l);return this}function r2(e){e||(e=i2);function n(g,y){return g&&y?e(g.__data__,y.__data__):!g-!y}for(var r=this._groups,o=r.length,s=new Array(o),u=0;u<o;++u){for(var l=r[u],c=l.length,d=s[u]=new Array(c),f,p=0;p<c;++p)(f=l[p])&&(d[p]=f);d.sort(n)}return new Jn(s,this._parents).order()}function i2(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function o2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function s2(){return Array.from(this)}function a2(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length;s<u;++s){var l=o[s];if(l)return l}return null}function u2(){let e=0;for(const n of this)++e;return e}function c2(){return!this.node()}function l2(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],u=0,l=s.length,c;u<l;++u)(c=s[u])&&e.call(c,c.__data__,u,s);return this}function d2(e){return function(){this.removeAttribute(e)}}function f2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h2(e,n){return function(){this.setAttribute(e,n)}}function p2(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function g2(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function m2(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function y2(e,n){var r=ju(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?f2:d2:typeof n=="function"?r.local?m2:g2:r.local?p2:h2)(r,n))}function Bg(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function v2(e){return function(){this.style.removeProperty(e)}}function D2(e,n,r){return function(){this.style.setProperty(e,n,r)}}function _2(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function b2(e,n,r){return arguments.length>1?this.each((n==null?v2:typeof n=="function"?_2:D2)(e,n,r??"")):as(this.node(),e)}function as(e,n){return e.style.getPropertyValue(n)||Bg(e).getComputedStyle(e,null).getPropertyValue(n)}function w2(e){return function(){delete this[e]}}function x2(e,n){return function(){this[e]=n}}function C2(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function E2(e,n){return arguments.length>1?this.each((n==null?w2:typeof n=="function"?C2:x2)(e,n)):this.node()[e]}function Og(e){return e.trim().split(/^|\s+/)}function ld(e){return e.classList||new Mg(e)}function Mg(e){this._node=e,this._names=Og(e.getAttribute("class")||"")}Mg.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Pg(e,n){for(var r=ld(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function zg(e,n){for(var r=ld(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function S2(e){return function(){Pg(this,e)}}function A2(e){return function(){zg(this,e)}}function F2(e,n){return function(){(n.apply(this,arguments)?Pg:zg)(this,e)}}function N2(e,n){var r=Og(e+"");if(arguments.length<2){for(var o=ld(this.node()),s=-1,u=r.length;++s<u;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?F2:n?S2:A2)(r,n))}function T2(){this.textContent=""}function I2(e){return function(){this.textContent=e}}function R2(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function B2(e){return arguments.length?this.each(e==null?T2:(typeof e=="function"?R2:I2)(e)):this.node().textContent}function O2(){this.innerHTML=""}function M2(e){return function(){this.innerHTML=e}}function P2(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function z2(e){return arguments.length?this.each(e==null?O2:(typeof e=="function"?P2:M2)(e)):this.node().innerHTML}function j2(){this.nextSibling&&this.parentNode.appendChild(this)}function k2(){return this.each(j2)}function $2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function q2(){return this.each($2)}function L2(e){var n=typeof e=="function"?e:Fg(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function H2(){return null}function G2(e,n){var r=typeof e=="function"?e:Fg(e),o=n==null?H2:typeof n=="function"?n:cd(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function V2(){var e=this.parentNode;e&&e.removeChild(this)}function U2(){return this.each(V2)}function W2(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function X2(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Y2(e){return this.select(e?X2:W2)}function Z2(e){return arguments.length?this.property("__data__",e):this.node().__data__}function K2(e){return function(n){e.call(this,n,this.__data__)}}function J2(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function Q2(e){return function(){var n=this.__on;if(n){for(var r=0,o=-1,s=n.length,u;r<s;++r)u=n[r],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):n[++o]=u;++o?n.length=o:delete this.__on}}}function eE(e,n,r){return function(){var o=this.__on,s,u=K2(n);if(o){for(var l=0,c=o.length;l<c;++l)if((s=o[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=u,s.options=r),s.value=n;return}}this.addEventListener(e.type,u,r),s={type:e.type,name:e.name,value:n,listener:u,options:r},o?o.push(s):this.__on=[s]}}function tE(e,n,r){var o=J2(e+""),s,u=o.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,p;d<f;++d)for(s=0,p=c[d];s<u;++s)if((l=o[s]).type===p.type&&l.name===p.name)return p.value}return}for(c=n?eE:Q2,s=0;s<u;++s)this.each(c(o[s],n,r));return this}function jg(e,n,r){var o=Bg(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function nE(e,n){return function(){return jg(this,e,n)}}function rE(e,n){return function(){return jg(this,e,n.apply(this,arguments))}}function iE(e,n){return this.each((typeof n=="function"?rE:nE)(e,n))}function*oE(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length,l;s<u;++s)(l=o[s])&&(yield l)}var kg=[null];function Jn(e,n){this._groups=e,this._parents=n}function aa(){return new Jn([[document.documentElement]],kg)}function sE(){return this}Jn.prototype=aa.prototype={constructor:Jn,select:RC,selectAll:PC,selectChild:$C,selectChildren:GC,filter:VC,data:KC,enter:UC,exit:QC,join:e2,merge:t2,selection:sE,order:n2,sort:r2,call:o2,nodes:s2,node:a2,size:u2,empty:c2,each:l2,attr:y2,style:b2,property:E2,classed:N2,text:B2,html:z2,raise:k2,lower:q2,append:L2,insert:G2,remove:U2,clone:Y2,datum:Z2,on:tE,dispatch:iE,[Symbol.iterator]:oE};function br(e){return typeof e=="string"?new Jn([[document.querySelector(e)]],[document.documentElement]):new Jn([[e]],kg)}function aE(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Mr(e,n){if(e=aE(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const uE={passive:!1},Ks={capture:!0,passive:!1};function Zc(e){e.stopImmediatePropagation()}function es(e){e.preventDefault(),e.stopImmediatePropagation()}function $g(e){var n=e.document.documentElement,r=br(e).on("dragstart.drag",es,Ks);"onselectstart"in n?r.on("selectstart.drag",es,Ks):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function qg(e,n){var r=e.document.documentElement,o=br(e).on("dragstart.drag",null);n&&(o.on("click.drag",es,Ks),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Za=e=>()=>e;function Ol(e,{sourceEvent:n,subject:r,target:o,identifier:s,active:u,x:l,y:c,dx:d,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}Ol.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function cE(e){return!e.ctrlKey&&!e.button}function lE(){return this.parentNode}function dE(e,n){return n??{x:e.x,y:e.y}}function fE(){return navigator.maxTouchPoints||"ontouchstart"in this}function hE(){var e=cE,n=lE,r=dE,o=fE,s={},u=zu("start","drag","end"),l=0,c,d,f,p,g=0;function y(F){F.on("mousedown.drag",b).filter(o).on("touchstart.drag",w).on("touchmove.drag",m,uE).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(F,j){if(!(p||!e.call(this,F,j))){var q=I(this,n.call(this,F,j),F,j,"mouse");q&&(br(F.view).on("mousemove.drag",x,Ks).on("mouseup.drag",D,Ks),$g(F.view),Zc(F),f=!1,c=F.clientX,d=F.clientY,q("start",F))}}function x(F){if(es(F),!f){var j=F.clientX-c,q=F.clientY-d;f=j*j+q*q>g}s.mouse("drag",F)}function D(F){br(F.view).on("mousemove.drag mouseup.drag",null),qg(F.view,f),es(F),s.mouse("end",F)}function w(F,j){if(e.call(this,F,j)){var q=F.changedTouches,Y=n.call(this,F,j),ne=q.length,O,V;for(O=0;O<ne;++O)(V=I(this,Y,F,j,q[O].identifier,q[O]))&&(Zc(F),V("start",F,q[O]))}}function m(F){var j=F.changedTouches,q=j.length,Y,ne;for(Y=0;Y<q;++Y)(ne=s[j[Y].identifier])&&(es(F),ne("drag",F,j[Y]))}function C(F){var j=F.changedTouches,q=j.length,Y,ne;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),Y=0;Y<q;++Y)(ne=s[j[Y].identifier])&&(Zc(F),ne("end",F,j[Y]))}function I(F,j,q,Y,ne,O){var V=u.copy(),J=Mr(O||q,j),ee,Z,R;if((R=r.call(F,new Ol("beforestart",{sourceEvent:q,target:y,identifier:ne,active:l,x:J[0],y:J[1],dx:0,dy:0,dispatch:V}),Y))!=null)return ee=R.x-J[0]||0,Z=R.y-J[1]||0,function G(k,K,se){var U=J,re;switch(k){case"start":s[ne]=G,re=l++;break;case"end":delete s[ne],--l;case"drag":J=Mr(se||K,j),re=l;break}V.call(k,F,new Ol(k,{sourceEvent:K,subject:R,target:y,identifier:ne,active:re,x:J[0]+ee,y:J[1]+Z,dx:J[0]-U[0],dy:J[1]-U[1],dispatch:V}),Y)}}return y.filter=function(F){return arguments.length?(e=typeof F=="function"?F:Za(!!F),y):e},y.container=function(F){return arguments.length?(n=typeof F=="function"?F:Za(F),y):n},y.subject=function(F){return arguments.length?(r=typeof F=="function"?F:Za(F),y):r},y.touchable=function(F){return arguments.length?(o=typeof F=="function"?F:Za(!!F),y):o},y.on=function(){var F=u.on.apply(u,arguments);return F===u?y:F},y.clickDistance=function(F){return arguments.length?(g=(F=+F)*F,y):Math.sqrt(g)},y}function dd(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function Lg(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function ua(){}var Js=.7,Cu=1/Js,ts="\\s*([+-]?\\d+)\\s*",Qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pE=/^#([0-9a-f]{3,8})$/,gE=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),mE=new RegExp(`^rgb\\(${Pr},${Pr},${Pr}\\)$`),yE=new RegExp(`^rgba\\(${ts},${ts},${ts},${Qs}\\)$`),vE=new RegExp(`^rgba\\(${Pr},${Pr},${Pr},${Qs}\\)$`),DE=new RegExp(`^hsl\\(${Qs},${Pr},${Pr}\\)$`),_E=new RegExp(`^hsla\\(${Qs},${Pr},${Pr},${Qs}\\)$`),qh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dd(ua,ea,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lh,formatHex:Lh,formatHex8:bE,formatHsl:wE,formatRgb:Hh,toString:Hh});function Lh(){return this.rgb().formatHex()}function bE(){return this.rgb().formatHex8()}function wE(){return Hg(this).formatHsl()}function Hh(){return this.rgb().formatRgb()}function ea(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=pE.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Gh(n):r===3?new Ln(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Ka(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Ka(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=gE.exec(e))?new Ln(n[1],n[2],n[3],1):(n=mE.exec(e))?new Ln(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=yE.exec(e))?Ka(n[1],n[2],n[3],n[4]):(n=vE.exec(e))?Ka(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=DE.exec(e))?Wh(n[1],n[2]/100,n[3]/100,1):(n=_E.exec(e))?Wh(n[1],n[2]/100,n[3]/100,n[4]):qh.hasOwnProperty(e)?Gh(qh[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function Gh(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function Ka(e,n,r,o){return o<=0&&(e=n=r=NaN),new Ln(e,n,r,o)}function xE(e){return e instanceof ua||(e=ea(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function Ml(e,n,r,o){return arguments.length===1?xE(e):new Ln(e,n,r,o??1)}function Ln(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}dd(Ln,Ml,Lg(ua,{brighter(e){return e=e==null?Cu:Math.pow(Cu,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Js:Math.pow(Js,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ln(go(this.r),go(this.g),go(this.b),Eu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vh,formatHex:Vh,formatHex8:CE,formatRgb:Uh,toString:Uh}));function Vh(){return`#${ho(this.r)}${ho(this.g)}${ho(this.b)}`}function CE(){return`#${ho(this.r)}${ho(this.g)}${ho(this.b)}${ho((isNaN(this.opacity)?1:this.opacity)*255)}`}function Uh(){const e=Eu(this.opacity);return`${e===1?"rgb(":"rgba("}${go(this.r)}, ${go(this.g)}, ${go(this.b)}${e===1?")":`, ${e})`}`}function Eu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function go(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ho(e){return e=go(e),(e<16?"0":"")+e.toString(16)}function Wh(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new wr(e,n,r,o)}function Hg(e){if(e instanceof wr)return new wr(e.h,e.s,e.l,e.opacity);if(e instanceof ua||(e=ea(e)),!e)return new wr;if(e instanceof wr)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),u=Math.max(n,r,o),l=NaN,c=u-s,d=(u+s)/2;return c?(n===u?l=(r-o)/c+(r<o)*6:r===u?l=(o-n)/c+2:l=(n-r)/c+4,c/=d<.5?u+s:2-u-s,l*=60):c=d>0&&d<1?0:l,new wr(l,c,d,e.opacity)}function EE(e,n,r,o){return arguments.length===1?Hg(e):new wr(e,n,r,o??1)}function wr(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}dd(wr,EE,Lg(ua,{brighter(e){return e=e==null?Cu:Math.pow(Cu,e),new wr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Js:Math.pow(Js,e),new wr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new Ln(Kc(e>=240?e-240:e+120,s,o),Kc(e,s,o),Kc(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new wr(Xh(this.h),Ja(this.s),Ja(this.l),Eu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Eu(this.opacity);return`${e===1?"hsl(":"hsla("}${Xh(this.h)}, ${Ja(this.s)*100}%, ${Ja(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xh(e){return e=(e||0)%360,e<0?e+360:e}function Ja(e){return Math.max(0,Math.min(1,e||0))}function Kc(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const Gg=e=>()=>e;function SE(e,n){return function(r){return e+r*n}}function AE(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function FE(e){return(e=+e)==1?Vg:function(n,r){return r-n?AE(n,r,e):Gg(isNaN(n)?r:n)}}function Vg(e,n){var r=n-e;return r?SE(e,r):Gg(isNaN(e)?n:e)}const Yh=function e(n){var r=FE(n);function o(s,u){var l=r((s=Ml(s)).r,(u=Ml(u)).r),c=r(s.g,u.g),d=r(s.b,u.b),f=Vg(s.opacity,u.opacity);return function(p){return s.r=l(p),s.g=c(p),s.b=d(p),s.opacity=f(p),s+""}}return o.gamma=e,o}(1);function Fi(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var Pl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jc=new RegExp(Pl.source,"g");function NE(e){return function(){return e}}function TE(e){return function(n){return e(n)+""}}function IE(e,n){var r=Pl.lastIndex=Jc.lastIndex=0,o,s,u,l=-1,c=[],d=[];for(e=e+"",n=n+"";(o=Pl.exec(e))&&(s=Jc.exec(n));)(u=s.index)>r&&(u=n.slice(r,u),c[l]?c[l]+=u:c[++l]=u),(o=o[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,d.push({i:l,x:Fi(o,s)})),r=Jc.lastIndex;return r<n.length&&(u=n.slice(r),c[l]?c[l]+=u:c[++l]=u),c.length<2?d[0]?TE(d[0].x):NE(n):(n=d.length,function(f){for(var p=0,g;p<n;++p)c[(g=d[p]).i]=g.x(f);return c.join("")})}var Zh=180/Math.PI,zl={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ug(e,n,r,o,s,u){var l,c,d;return(l=Math.sqrt(e*e+n*n))&&(e/=l,n/=l),(d=e*r+n*o)&&(r-=e*d,o-=n*d),(c=Math.sqrt(r*r+o*o))&&(r/=c,o/=c,d/=c),e*o<n*r&&(e=-e,n=-n,d=-d,l=-l),{translateX:s,translateY:u,rotate:Math.atan2(n,e)*Zh,skewX:Math.atan(d)*Zh,scaleX:l,scaleY:c}}var Qa;function RE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?zl:Ug(n.a,n.b,n.c,n.d,n.e,n.f)}function BE(e){return e==null||(Qa||(Qa=document.createElementNS("http://www.w3.org/2000/svg","g")),Qa.setAttribute("transform",e),!(e=Qa.transform.baseVal.consolidate()))?zl:(e=e.matrix,Ug(e.a,e.b,e.c,e.d,e.e,e.f))}function Wg(e,n,r,o){function s(f){return f.length?f.pop()+" ":""}function u(f,p,g,y,b,x){if(f!==g||p!==y){var D=b.push("translate(",null,n,null,r);x.push({i:D-4,x:Fi(f,g)},{i:D-2,x:Fi(p,y)})}else(g||y)&&b.push("translate("+g+n+y+r)}function l(f,p,g,y){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),y.push({i:g.push(s(g)+"rotate(",null,o)-2,x:Fi(f,p)})):p&&g.push(s(g)+"rotate("+p+o)}function c(f,p,g,y){f!==p?y.push({i:g.push(s(g)+"skewX(",null,o)-2,x:Fi(f,p)}):p&&g.push(s(g)+"skewX("+p+o)}function d(f,p,g,y,b,x){if(f!==g||p!==y){var D=b.push(s(b)+"scale(",null,",",null,")");x.push({i:D-4,x:Fi(f,g)},{i:D-2,x:Fi(p,y)})}else(g!==1||y!==1)&&b.push(s(b)+"scale("+g+","+y+")")}return function(f,p){var g=[],y=[];return f=e(f),p=e(p),u(f.translateX,f.translateY,p.translateX,p.translateY,g,y),l(f.rotate,p.rotate,g,y),c(f.skewX,p.skewX,g,y),d(f.scaleX,f.scaleY,p.scaleX,p.scaleY,g,y),f=p=null,function(b){for(var x=-1,D=y.length,w;++x<D;)g[(w=y[x]).i]=w.x(b);return g.join("")}}}var OE=Wg(RE,"px, ","px)","deg)"),ME=Wg(BE,", ",")",")"),PE=1e-12;function Kh(e){return((e=Math.exp(e))+1/e)/2}function zE(e){return((e=Math.exp(e))-1/e)/2}function jE(e){return((e=Math.exp(2*e))-1)/(e+1)}const kE=function e(n,r,o){function s(u,l){var c=u[0],d=u[1],f=u[2],p=l[0],g=l[1],y=l[2],b=p-c,x=g-d,D=b*b+x*x,w,m;if(D<PE)m=Math.log(y/f)/n,w=function(Y){return[c+Y*b,d+Y*x,f*Math.exp(n*Y*m)]};else{var C=Math.sqrt(D),I=(y*y-f*f+o*D)/(2*f*r*C),F=(y*y-f*f-o*D)/(2*y*r*C),j=Math.log(Math.sqrt(I*I+1)-I),q=Math.log(Math.sqrt(F*F+1)-F);m=(q-j)/n,w=function(Y){var ne=Y*m,O=Kh(j),V=f/(r*C)*(O*jE(n*ne+j)-zE(j));return[c+V*b,d+V*x,f*O/Kh(n*ne+j)]}}return w.duration=m*1e3*n/Math.SQRT2,w}return s.rho=function(u){var l=Math.max(.001,+u),c=l*l,d=c*c;return e(l,c,d)},s}(Math.SQRT2,2,4);var us=0,qs=0,Bs=0,Xg=1e3,Su,Ls,Au=0,mo=0,ku=0,ta=typeof performance=="object"&&performance.now?performance:Date,Yg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fd(){return mo||(Yg($E),mo=ta.now()+ku)}function $E(){mo=0}function Fu(){this._call=this._time=this._next=null}Fu.prototype=Zg.prototype={constructor:Fu,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?fd():+r)+(n==null?0:+n),!this._next&&Ls!==this&&(Ls?Ls._next=this:Su=this,Ls=this),this._call=e,this._time=r,jl()},stop:function(){this._call&&(this._call=null,this._time=1/0,jl())}};function Zg(e,n,r){var o=new Fu;return o.restart(e,n,r),o}function qE(){fd(),++us;for(var e=Su,n;e;)(n=mo-e._time)>=0&&e._call.call(void 0,n),e=e._next;--us}function Jh(){mo=(Au=ta.now())+ku,us=qs=0;try{qE()}finally{us=0,HE(),mo=0}}function LE(){var e=ta.now(),n=e-Au;n>Xg&&(ku-=n,Au=e)}function HE(){for(var e,n=Su,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Su=r);Ls=e,jl(o)}function jl(e){if(!us){qs&&(qs=clearTimeout(qs));var n=e-mo;n>24?(e<1/0&&(qs=setTimeout(Jh,e-ta.now()-ku)),Bs&&(Bs=clearInterval(Bs))):(Bs||(Au=ta.now(),Bs=setInterval(LE,Xg)),us=1,Yg(Jh))}}function Qh(e,n,r){var o=new Fu;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var GE=zu("start","end","cancel","interrupt"),VE=[],Kg=0,ep=1,kl=2,hu=3,tp=4,$l=5,pu=6;function $u(e,n,r,o,s,u){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;UE(e,r,{name:n,index:o,group:s,on:GE,tween:VE,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Kg})}function hd(e,n){var r=Ar(e,n);if(r.state>Kg)throw new Error("too late; already scheduled");return r}function zr(e,n){var r=Ar(e,n);if(r.state>hu)throw new Error("too late; already running");return r}function Ar(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function UE(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=Zg(u,0,r.time);function u(f){r.state=ep,r.timer.restart(l,r.delay,r.time),r.delay<=f&&l(f-r.delay)}function l(f){var p,g,y,b;if(r.state!==ep)return d();for(p in o)if(b=o[p],b.name===r.name){if(b.state===hu)return Qh(l);b.state===tp?(b.state=pu,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete o[p]):+p<n&&(b.state=pu,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete o[p])}if(Qh(function(){r.state===hu&&(r.state=tp,r.timer.restart(c,r.delay,r.time),c(f))}),r.state=kl,r.on.call("start",e,e.__data__,r.index,r.group),r.state===kl){for(r.state=hu,s=new Array(y=r.tween.length),p=0,g=-1;p<y;++p)(b=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(s[++g]=b);s.length=g+1}}function c(f){for(var p=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(d),r.state=$l,1),g=-1,y=s.length;++g<y;)s[g].call(e,p);r.state===$l&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=pu,r.timer.stop(),delete o[n];for(var f in o)return;delete e.__transition}}function gu(e,n){var r=e.__transition,o,s,u=!0,l;if(r){n=n==null?null:n+"";for(l in r){if((o=r[l]).name!==n){u=!1;continue}s=o.state>kl&&o.state<$l,o.state=pu,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[l]}u&&delete e.__transition}}function WE(e){return this.each(function(){gu(this,e)})}function XE(e,n){var r,o;return function(){var s=zr(this,e),u=s.tween;if(u!==r){o=r=u;for(var l=0,c=o.length;l<c;++l)if(o[l].name===n){o=o.slice(),o.splice(l,1);break}}s.tween=o}}function YE(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var u=zr(this,e),l=u.tween;if(l!==o){s=(o=l).slice();for(var c={name:n,value:r},d=0,f=s.length;d<f;++d)if(s[d].name===n){s[d]=c;break}d===f&&s.push(c)}u.tween=s}}function ZE(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=Ar(this.node(),r).tween,s=0,u=o.length,l;s<u;++s)if((l=o[s]).name===e)return l.value;return null}return this.each((n==null?XE:YE)(r,e,n))}function pd(e,n,r){var o=e._id;return e.each(function(){var s=zr(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Ar(s,o).value[n]}}function Jg(e,n){var r;return(typeof n=="number"?Fi:n instanceof ea?Yh:(r=ea(n))?(n=r,Yh):IE)(e,n)}function KE(e){return function(){this.removeAttribute(e)}}function JE(e){return function(){this.removeAttributeNS(e.space,e.local)}}function QE(e,n,r){var o,s=r+"",u;return function(){var l=this.getAttribute(e);return l===s?null:l===o?u:u=n(o=l,r)}}function eS(e,n,r){var o,s=r+"",u;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===o?u:u=n(o=l,r)}}function tS(e,n,r){var o,s,u;return function(){var l,c=r(this),d;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=c+"",l===d?null:l===o&&d===s?u:(s=d,u=n(o=l,c)))}}function nS(e,n,r){var o,s,u;return function(){var l,c=r(this),d;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=c+"",l===d?null:l===o&&d===s?u:(s=d,u=n(o=l,c)))}}function rS(e,n){var r=ju(e),o=r==="transform"?ME:Jg;return this.attrTween(e,typeof n=="function"?(r.local?nS:tS)(r,o,pd(this,"attr."+e,n)):n==null?(r.local?JE:KE)(r):(r.local?eS:QE)(r,o,n))}function iS(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function oS(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function sS(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&oS(e,u)),r}return s._value=n,s}function aS(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&iS(e,u)),r}return s._value=n,s}function uS(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=ju(e);return this.tween(r,(o.local?sS:aS)(o,n))}function cS(e,n){return function(){hd(this,e).delay=+n.apply(this,arguments)}}function lS(e,n){return n=+n,function(){hd(this,e).delay=n}}function dS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?cS:lS)(n,e)):Ar(this.node(),n).delay}function fS(e,n){return function(){zr(this,e).duration=+n.apply(this,arguments)}}function hS(e,n){return n=+n,function(){zr(this,e).duration=n}}function pS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?fS:hS)(n,e)):Ar(this.node(),n).duration}function gS(e,n){if(typeof n!="function")throw new Error;return function(){zr(this,e).ease=n}}function mS(e){var n=this._id;return arguments.length?this.each(gS(n,e)):Ar(this.node(),n).ease}function yS(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;zr(this,e).ease=r}}function vS(e){if(typeof e!="function")throw new Error;return this.each(yS(this._id,e))}function DS(e){typeof e!="function"&&(e=Tg(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=[],d,f=0;f<l;++f)(d=u[f])&&e.call(d,d.__data__,f,u)&&c.push(d);return new ci(o,this._parents,this._name,this._id)}function _S(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,u=Math.min(o,s),l=new Array(o),c=0;c<u;++c)for(var d=n[c],f=r[c],p=d.length,g=l[c]=new Array(p),y,b=0;b<p;++b)(y=d[b]||f[b])&&(g[b]=y);for(;c<o;++c)l[c]=n[c];return new ci(l,this._parents,this._name,this._id)}function bS(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function wS(e,n,r){var o,s,u=bS(n)?hd:zr;return function(){var l=u(this,e),c=l.on;c!==o&&(s=(o=c).copy()).on(n,r),l.on=s}}function xS(e,n){var r=this._id;return arguments.length<2?Ar(this.node(),r).on.on(e):this.each(wS(r,e,n))}function CS(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function ES(){return this.on("end.remove",CS(this._id))}function SS(e){var n=this._name,r=this._id;typeof e!="function"&&(e=cd(e));for(var o=this._groups,s=o.length,u=new Array(s),l=0;l<s;++l)for(var c=o[l],d=c.length,f=u[l]=new Array(d),p,g,y=0;y<d;++y)(p=c[y])&&(g=e.call(p,p.__data__,y,c))&&("__data__"in p&&(g.__data__=p.__data__),f[y]=g,$u(f[y],n,r,y,f,Ar(p,r)));return new ci(u,this._parents,n,r)}function AS(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Ng(e));for(var o=this._groups,s=o.length,u=[],l=[],c=0;c<s;++c)for(var d=o[c],f=d.length,p,g=0;g<f;++g)if(p=d[g]){for(var y=e.call(p,p.__data__,g,d),b,x=Ar(p,r),D=0,w=y.length;D<w;++D)(b=y[D])&&$u(b,n,r,D,y,x);u.push(y),l.push(p)}return new ci(u,l,n,r)}var FS=aa.prototype.constructor;function NS(){return new FS(this._groups,this._parents)}function TS(e,n){var r,o,s;return function(){var u=as(this,e),l=(this.style.removeProperty(e),as(this,e));return u===l?null:u===r&&l===o?s:s=n(r=u,o=l)}}function Qg(e){return function(){this.style.removeProperty(e)}}function IS(e,n,r){var o,s=r+"",u;return function(){var l=as(this,e);return l===s?null:l===o?u:u=n(o=l,r)}}function RS(e,n,r){var o,s,u;return function(){var l=as(this,e),c=r(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(e),as(this,e))),l===d?null:l===o&&d===s?u:(s=d,u=n(o=l,c))}}function BS(e,n){var r,o,s,u="style."+n,l="end."+u,c;return function(){var d=zr(this,e),f=d.on,p=d.value[u]==null?c||(c=Qg(n)):void 0;(f!==r||s!==p)&&(o=(r=f).copy()).on(l,s=p),d.on=o}}function OS(e,n,r){var o=(e+="")=="transform"?OE:Jg;return n==null?this.styleTween(e,TS(e,o)).on("end.style."+e,Qg(e)):typeof n=="function"?this.styleTween(e,RS(e,o,pd(this,"style."+e,n))).each(BS(this._id,e)):this.styleTween(e,IS(e,o,n),r).on("end.style."+e,null)}function MS(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function PS(e,n,r){var o,s;function u(){var l=n.apply(this,arguments);return l!==s&&(o=(s=l)&&MS(e,l,r)),o}return u._value=n,u}function zS(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,PS(e,n,r??""))}function jS(e){return function(){this.textContent=e}}function kS(e){return function(){var n=e(this);this.textContent=n??""}}function $S(e){return this.tween("text",typeof e=="function"?kS(pd(this,"text",e)):jS(e==null?"":e+""))}function qS(e){return function(n){this.textContent=e.call(this,n)}}function LS(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&qS(s)),n}return o._value=e,o}function HS(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,LS(e))}function GS(){for(var e=this._name,n=this._id,r=e0(),o=this._groups,s=o.length,u=0;u<s;++u)for(var l=o[u],c=l.length,d,f=0;f<c;++f)if(d=l[f]){var p=Ar(d,n);$u(d,e,r,f,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ci(o,this._parents,e,r)}function VS(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(u,l){var c={value:l},d={value:function(){--s===0&&u()}};r.each(function(){var f=zr(this,o),p=f.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(d)),f.on=n}),s===0&&u()})}var US=0;function ci(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function e0(){return++US}var ri=aa.prototype;ci.prototype={constructor:ci,select:SS,selectAll:AS,selectChild:ri.selectChild,selectChildren:ri.selectChildren,filter:DS,merge:_S,selection:NS,transition:GS,call:ri.call,nodes:ri.nodes,node:ri.node,size:ri.size,empty:ri.empty,each:ri.each,on:xS,attr:rS,attrTween:uS,style:OS,styleTween:zS,text:$S,textTween:HS,remove:ES,tween:ZE,delay:dS,duration:pS,ease:mS,easeVarying:vS,end:VS,[Symbol.iterator]:ri[Symbol.iterator]};function WS(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var XS={time:null,delay:0,duration:250,ease:WS};function YS(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function ZS(e){var n,r;e instanceof ci?(n=e._id,e=e._name):(n=e0(),(r=XS).time=fd(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,u=0;u<s;++u)for(var l=o[u],c=l.length,d,f=0;f<c;++f)(d=l[f])&&$u(d,e,n,f,l,r||YS(d,n));return new ci(o,this._parents,e,n)}aa.prototype.interrupt=WE;aa.prototype.transition=ZS;const eu=e=>()=>e;function KS(e,{sourceEvent:n,target:r,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function ai(e,n,r){this.k=e,this.x=n,this.y=r}ai.prototype={constructor:ai,scale:function(e){return e===1?this:new ai(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new ai(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ri=new ai(1,0,0);ai.prototype;function Qc(e){e.stopImmediatePropagation()}function Os(e){e.preventDefault(),e.stopImmediatePropagation()}function JS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function QS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function np(){return this.__zoom||Ri}function eA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function tA(){return navigator.maxTouchPoints||"ontouchstart"in this}function nA(e,n,r){var o=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],u=e.invertY(n[0][1])-r[0][1],l=e.invertY(n[1][1])-r[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),l>u?(u+l)/2:Math.min(0,u)||Math.max(0,l))}function rA(){var e=JS,n=QS,r=nA,o=eA,s=tA,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=kE,f=zu("start","zoom","end"),p,g,y,b=500,x=150,D=0,w=10;function m(R){R.property("__zoom",np).on("wheel.zoom",ne,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",J).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(R,G,k,K){var se=R.selection?R.selection():R;se.property("__zoom",np),R!==se?j(R,G,k,K):se.interrupt().each(function(){q(this,arguments).event(K).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},m.scaleBy=function(R,G,k,K){m.scaleTo(R,function(){var se=this.__zoom.k,U=typeof G=="function"?G.apply(this,arguments):G;return se*U},k,K)},m.scaleTo=function(R,G,k,K){m.transform(R,function(){var se=n.apply(this,arguments),U=this.__zoom,re=k==null?F(se):typeof k=="function"?k.apply(this,arguments):k,ue=U.invert(re),de=typeof G=="function"?G.apply(this,arguments):G;return r(I(C(U,de),re,ue),se,l)},k,K)},m.translateBy=function(R,G,k,K){m.transform(R,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof k=="function"?k.apply(this,arguments):k),n.apply(this,arguments),l)},null,K)},m.translateTo=function(R,G,k,K,se){m.transform(R,function(){var U=n.apply(this,arguments),re=this.__zoom,ue=K==null?F(U):typeof K=="function"?K.apply(this,arguments):K;return r(Ri.translate(ue[0],ue[1]).scale(re.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof k=="function"?-k.apply(this,arguments):-k),U,l)},K,se)};function C(R,G){return G=Math.max(u[0],Math.min(u[1],G)),G===R.k?R:new ai(G,R.x,R.y)}function I(R,G,k){var K=G[0]-k[0]*R.k,se=G[1]-k[1]*R.k;return K===R.x&&se===R.y?R:new ai(R.k,K,se)}function F(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function j(R,G,k,K){R.on("start.zoom",function(){q(this,arguments).event(K).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(K).end()}).tween("zoom",function(){var se=this,U=arguments,re=q(se,U).event(K),ue=n.apply(se,U),de=k==null?F(ue):typeof k=="function"?k.apply(se,U):k,le=Math.max(ue[1][0]-ue[0][0],ue[1][1]-ue[0][1]),ve=se.__zoom,ge=typeof G=="function"?G.apply(se,U):G,Ee=d(ve.invert(de).concat(le/ve.k),ge.invert(de).concat(le/ge.k));return function(Oe){if(Oe===1)Oe=ge;else{var De=Ee(Oe),Se=le/De[2];Oe=new ai(Se,de[0]-De[0]*Se,de[1]-De[1]*Se)}re.zoom(null,Oe)}})}function q(R,G,k){return!k&&R.__zooming||new Y(R,G)}function Y(R,G){this.that=R,this.args=G,this.active=0,this.sourceEvent=null,this.extent=n.apply(R,G),this.taps=0}Y.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,G){return this.mouse&&R!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var G=br(this.that).datum();f.call(R,this.that,new KS(R,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:f}),G)}};function ne(R,...G){if(!e.apply(this,arguments))return;var k=q(this,G).event(R),K=this.__zoom,se=Math.max(u[0],Math.min(u[1],K.k*Math.pow(2,o.apply(this,arguments)))),U=Mr(R);if(k.wheel)(k.mouse[0][0]!==U[0]||k.mouse[0][1]!==U[1])&&(k.mouse[1]=K.invert(k.mouse[0]=U)),clearTimeout(k.wheel);else{if(K.k===se)return;k.mouse=[U,K.invert(U)],gu(this),k.start()}Os(R),k.wheel=setTimeout(re,x),k.zoom("mouse",r(I(C(K,se),k.mouse[0],k.mouse[1]),k.extent,l));function re(){k.wheel=null,k.end()}}function O(R,...G){if(y||!e.apply(this,arguments))return;var k=R.currentTarget,K=q(this,G,!0).event(R),se=br(R.view).on("mousemove.zoom",de,!0).on("mouseup.zoom",le,!0),U=Mr(R,k),re=R.clientX,ue=R.clientY;$g(R.view),Qc(R),K.mouse=[U,this.__zoom.invert(U)],gu(this),K.start();function de(ve){if(Os(ve),!K.moved){var ge=ve.clientX-re,Ee=ve.clientY-ue;K.moved=ge*ge+Ee*Ee>D}K.event(ve).zoom("mouse",r(I(K.that.__zoom,K.mouse[0]=Mr(ve,k),K.mouse[1]),K.extent,l))}function le(ve){se.on("mousemove.zoom mouseup.zoom",null),qg(ve.view,K.moved),Os(ve),K.event(ve).end()}}function V(R,...G){if(e.apply(this,arguments)){var k=this.__zoom,K=Mr(R.changedTouches?R.changedTouches[0]:R,this),se=k.invert(K),U=k.k*(R.shiftKey?.5:2),re=r(I(C(k,U),K,se),n.apply(this,G),l);Os(R),c>0?br(this).transition().duration(c).call(j,re,K,R):br(this).call(m.transform,re,K,R)}}function J(R,...G){if(e.apply(this,arguments)){var k=R.touches,K=k.length,se=q(this,G,R.changedTouches.length===K).event(R),U,re,ue,de;for(Qc(R),re=0;re<K;++re)ue=k[re],de=Mr(ue,this),de=[de,this.__zoom.invert(de),ue.identifier],se.touch0?!se.touch1&&se.touch0[2]!==de[2]&&(se.touch1=de,se.taps=0):(se.touch0=de,U=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),U&&(se.taps<2&&(g=de[0],p=setTimeout(function(){p=null},b)),gu(this),se.start())}}function ee(R,...G){if(this.__zooming){var k=q(this,G).event(R),K=R.changedTouches,se=K.length,U,re,ue,de;for(Os(R),U=0;U<se;++U)re=K[U],ue=Mr(re,this),k.touch0&&k.touch0[2]===re.identifier?k.touch0[0]=ue:k.touch1&&k.touch1[2]===re.identifier&&(k.touch1[0]=ue);if(re=k.that.__zoom,k.touch1){var le=k.touch0[0],ve=k.touch0[1],ge=k.touch1[0],Ee=k.touch1[1],Oe=(Oe=ge[0]-le[0])*Oe+(Oe=ge[1]-le[1])*Oe,De=(De=Ee[0]-ve[0])*De+(De=Ee[1]-ve[1])*De;re=C(re,Math.sqrt(Oe/De)),ue=[(le[0]+ge[0])/2,(le[1]+ge[1])/2],de=[(ve[0]+Ee[0])/2,(ve[1]+Ee[1])/2]}else if(k.touch0)ue=k.touch0[0],de=k.touch0[1];else return;k.zoom("touch",r(I(re,ue,de),k.extent,l))}}function Z(R,...G){if(this.__zooming){var k=q(this,G).event(R),K=R.changedTouches,se=K.length,U,re;for(Qc(R),y&&clearTimeout(y),y=setTimeout(function(){y=null},b),U=0;U<se;++U)re=K[U],k.touch0&&k.touch0[2]===re.identifier?delete k.touch0:k.touch1&&k.touch1[2]===re.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(re=Mr(re,this),Math.hypot(g[0]-re[0],g[1]-re[1])<w)){var ue=br(this).on("dblclick.zoom");ue&&ue.apply(this,arguments)}}}return m.wheelDelta=function(R){return arguments.length?(o=typeof R=="function"?R:eu(+R),m):o},m.filter=function(R){return arguments.length?(e=typeof R=="function"?R:eu(!!R),m):e},m.touchable=function(R){return arguments.length?(s=typeof R=="function"?R:eu(!!R),m):s},m.extent=function(R){return arguments.length?(n=typeof R=="function"?R:eu([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),m):n},m.scaleExtent=function(R){return arguments.length?(u[0]=+R[0],u[1]=+R[1],m):[u[0],u[1]]},m.translateExtent=function(R){return arguments.length?(l[0][0]=+R[0][0],l[1][0]=+R[1][0],l[0][1]=+R[0][1],l[1][1]=+R[1][1],m):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},m.constrain=function(R){return arguments.length?(r=R,m):r},m.duration=function(R){return arguments.length?(c=+R,m):c},m.interpolate=function(R){return arguments.length?(d=R,m):d},m.on=function(){var R=f.on.apply(f,arguments);return R===f?m:R},m.clickDistance=function(R){return arguments.length?(D=(R=+R)*R,m):Math.sqrt(D)},m.tapDistance=function(R){return arguments.length?(w=+R,m):w},m}const qu=T.createContext(null),iA=qu.Provider,li={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,n)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?n.targetHandle:n.sourceHandle}", edge id: ${n.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},t0=li.error001();function It(e,n){const r=T.useContext(qu);if(r===null)throw new Error(t0);return Ag(r,e,n)}const fn=()=>{const e=T.useContext(qu);if(e===null)throw new Error(t0);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},oA=e=>e.userSelectionActive?"none":"all";function n0({position:e,children:n,className:r,style:o,...s}){const u=It(oA),l=`${e}`.split("-");return W.createElement("div",{className:In(["react-flow__panel",r,...l]),style:{...o,pointerEvents:u},...s},n)}function sA({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:W.createElement(n0,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},W.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const aA=({x:e,y:n,label:r,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:u={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:d,className:f,...p})=>{const g=T.useRef(null),[y,b]=T.useState({x:0,y:0,width:0,height:0}),x=In(["react-flow__edge-textwrapper",f]);return T.useEffect(()=>{if(g.current){const D=g.current.getBBox();b({x:D.x,y:D.y,width:D.width,height:D.height})}},[r]),typeof r>"u"||!r?null:W.createElement("g",{transform:`translate(${e-y.width/2} ${n-y.height/2})`,className:x,visibility:y.width?"visible":"hidden",...p},s&&W.createElement("rect",{width:y.width+2*l[0],x:-l[0],y:-l[1],height:y.height+2*l[1],className:"react-flow__edge-textbg",style:u,rx:c,ry:c}),W.createElement("text",{className:"react-flow__edge-text",y:y.height/2,dy:"0.3em",ref:g,style:o},r),d)};var uA=T.memo(aA);const gd=e=>({width:e.offsetWidth,height:e.offsetHeight}),cs=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),md=(e={x:0,y:0},n)=>({x:cs(e.x,n[0][0],n[1][0]),y:cs(e.y,n[0][1],n[1][1])}),rp=(e,n,r)=>e<n?cs(Math.abs(e-n),1,50)/50:e>r?-cs(Math.abs(e-r),1,50)/50:0,r0=(e,n)=>{const r=rp(e.x,35,n.width-35)*20,o=rp(e.y,35,n.height-35)*20;return[r,o]},i0=e=>e.getRootNode?.()||window?.document,cA=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),yd=({x:e,y:n,width:r,height:o})=>({x:e,y:n,x2:e+r,y2:n+o}),lA=({x:e,y:n,x2:r,y2:o})=>({x:e,y:n,width:r-e,height:o-n}),ip=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),ql=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*o)},dA=e=>dr(e.width)&&dr(e.height)&&dr(e.x)&&dr(e.y),dr=e=>!isNaN(e)&&isFinite(e),jt=Symbol.for("internals"),o0=["Enter"," ","Escape"],fA=(e,n)=>{},hA=e=>"nativeEvent"in e;function Ll(e){const r=(hA(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r?.nodeName)||r?.hasAttribute("contenteditable")||!!r?.closest(".nokey")}const s0=e=>"clientX"in e,Bi=(e,n)=>{const r=s0(e),o=r?e.clientX:e.touches?.[0].clientX,s=r?e.clientY:e.touches?.[0].clientY;return{x:o-(n?.left??0),y:s-(n?.top??0)}},Nu=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,ds=({id:e,path:n,labelX:r,labelY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:y,interactionWidth:b=20})=>W.createElement(W.Fragment,null,W.createElement("path",{id:e,style:p,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:y}),b&&W.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),s&&dr(r)&&dr(o)?W.createElement(uA,{x:r,y:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f}):null);ds.displayName="BaseEdge";function Ms(e,n,r){return r===void 0?r:o=>{const s=n().edges.find(u=>u.id===e);s&&r(o,{...s})}}function a0({sourceX:e,sourceY:n,targetX:r,targetY:o}){const s=Math.abs(r-e)/2,u=r<e?r+s:r-s,l=Math.abs(o-n)/2,c=o<n?o+l:o-l;return[u,c,s,l]}function u0({sourceX:e,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c}){const d=e*.125+s*.375+l*.375+r*.125,f=n*.125+u*.375+c*.375+o*.125,p=Math.abs(d-e),g=Math.abs(f-n);return[d,f,p,g]}var yo;(function(e){e.Strict="strict",e.Loose="loose"})(yo||(yo={}));var po;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(po||(po={}));var ls;(function(e){e.Partial="partial",e.Full="full"})(ls||(ls={}));var Ti;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ti||(Ti={}));var na;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(na||(na={}));var Ce;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ce||(Ce={}));function op({pos:e,x1:n,y1:r,x2:o,y2:s}){return e===Ce.Left||e===Ce.Right?[.5*(n+o),r]:[n,.5*(r+s)]}function c0({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top}){const[l,c]=op({pos:r,x1:e,y1:n,x2:o,y2:s}),[d,f]=op({pos:u,x1:o,y1:s,x2:e,y2:n}),[p,g,y,b]=u0({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:f});return[`M${e},${n} C${l},${c} ${d},${f} ${o},${s}`,p,g,y,b]}const vd=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=Ce.Bottom,targetPosition:u=Ce.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:b,markerStart:x,interactionWidth:D})=>{const[w,m,C]=c0({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:u});return W.createElement(ds,{path:w,labelX:m,labelY:C,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:b,markerStart:x,interactionWidth:D})});vd.displayName="SimpleBezierEdge";const sp={[Ce.Left]:{x:-1,y:0},[Ce.Right]:{x:1,y:0},[Ce.Top]:{x:0,y:-1},[Ce.Bottom]:{x:0,y:1}},pA=({source:e,sourcePosition:n=Ce.Bottom,target:r})=>n===Ce.Left||n===Ce.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},ap=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function gA({source:e,sourcePosition:n=Ce.Bottom,target:r,targetPosition:o=Ce.Top,center:s,offset:u}){const l=sp[n],c=sp[o],d={x:e.x+l.x*u,y:e.y+l.y*u},f={x:r.x+c.x*u,y:r.y+c.y*u},p=pA({source:d,sourcePosition:n,target:f}),g=p.x!==0?"x":"y",y=p[g];let b=[],x,D;const w={x:0,y:0},m={x:0,y:0},[C,I,F,j]=a0({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(l[g]*c[g]===-1){x=s.x??C,D=s.y??I;const Y=[{x,y:d.y},{x,y:f.y}],ne=[{x:d.x,y:D},{x:f.x,y:D}];l[g]===y?b=g==="x"?Y:ne:b=g==="x"?ne:Y}else{const Y=[{x:d.x,y:f.y}],ne=[{x:f.x,y:d.y}];if(g==="x"?b=l.x===y?ne:Y:b=l.y===y?Y:ne,n===o){const Z=Math.abs(e[g]-r[g]);if(Z<=u){const R=Math.min(u-1,u-Z);l[g]===y?w[g]=(d[g]>e[g]?-1:1)*R:m[g]=(f[g]>r[g]?-1:1)*R}}if(n!==o){const Z=g==="x"?"y":"x",R=l[g]===c[Z],G=d[Z]>f[Z],k=d[Z]<f[Z];(l[g]===1&&(!R&&G||R&&k)||l[g]!==1&&(!R&&k||R&&G))&&(b=g==="x"?Y:ne)}const O={x:d.x+w.x,y:d.y+w.y},V={x:f.x+m.x,y:f.y+m.y},J=Math.max(Math.abs(O.x-b[0].x),Math.abs(V.x-b[0].x)),ee=Math.max(Math.abs(O.y-b[0].y),Math.abs(V.y-b[0].y));J>=ee?(x=(O.x+V.x)/2,D=b[0].y):(x=b[0].x,D=(O.y+V.y)/2)}return[[e,{x:d.x+w.x,y:d.y+w.y},...b,{x:f.x+m.x,y:f.y+m.y},r],x,D,F,j]}function mA(e,n,r,o){const s=Math.min(ap(e,n)/2,ap(n,r)/2,o),{x:u,y:l}=n;if(e.x===u&&u===r.x||e.y===l&&l===r.y)return`L${u} ${l}`;if(e.y===l){const f=e.x<r.x?-1:1,p=e.y<r.y?1:-1;return`L ${u+s*f},${l}Q ${u},${l} ${u},${l+s*p}`}const c=e.x<r.x?1:-1,d=e.y<r.y?-1:1;return`L ${u},${l+s*d}Q ${u},${l} ${u+s*c},${l}`}function Hl({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top,borderRadius:l=5,centerX:c,centerY:d,offset:f=20}){const[p,g,y,b,x]=gA({source:{x:e,y:n},sourcePosition:r,target:{x:o,y:s},targetPosition:u,center:{x:c,y:d},offset:f});return[p.reduce((w,m,C)=>{let I="";return C>0&&C<p.length-1?I=mA(p[C-1],m,p[C+1],l):I=`${C===0?"M":"L"}${m.x} ${m.y}`,w+=I,w},""),g,y,b,x]}const Lu=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,sourcePosition:g=Ce.Bottom,targetPosition:y=Ce.Top,markerEnd:b,markerStart:x,pathOptions:D,interactionWidth:w})=>{const[m,C,I]=Hl({sourceX:e,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:y,borderRadius:D?.borderRadius,offset:D?.offset});return W.createElement(ds,{path:m,labelX:C,labelY:I,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:b,markerStart:x,interactionWidth:w})});Lu.displayName="SmoothStepEdge";const Dd=T.memo(e=>W.createElement(Lu,{...e,pathOptions:T.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Dd.displayName="StepEdge";function yA({sourceX:e,sourceY:n,targetX:r,targetY:o}){const[s,u,l,c]=a0({sourceX:e,sourceY:n,targetX:r,targetY:o});return[`M ${e},${n}L ${r},${o}`,s,u,l,c]}const _d=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:y,interactionWidth:b})=>{const[x,D,w]=yA({sourceX:e,sourceY:n,targetX:r,targetY:o});return W.createElement(ds,{path:x,labelX:D,labelY:w,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:y,interactionWidth:b})});_d.displayName="StraightEdge";function tu(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function up({pos:e,x1:n,y1:r,x2:o,y2:s,c:u}){switch(e){case Ce.Left:return[n-tu(n-o,u),r];case Ce.Right:return[n+tu(o-n,u),r];case Ce.Top:return[n,r-tu(r-s,u)];case Ce.Bottom:return[n,r+tu(s-r,u)]}}function bd({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top,curvature:l=.25}){const[c,d]=up({pos:r,x1:e,y1:n,x2:o,y2:s,c:l}),[f,p]=up({pos:u,x1:o,y1:s,x2:e,y2:n,c:l}),[g,y,b,x]=u0({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${e},${n} C${c},${d} ${f},${p} ${o},${s}`,g,y,b,x]}const Tu=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=Ce.Bottom,targetPosition:u=Ce.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:b,markerStart:x,pathOptions:D,interactionWidth:w})=>{const[m,C,I]=bd({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:u,curvature:D?.curvature});return W.createElement(ds,{path:m,labelX:C,labelY:I,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:y,markerEnd:b,markerStart:x,interactionWidth:w})});Tu.displayName="BezierEdge";const wd=T.createContext(null),vA=wd.Provider;wd.Consumer;const DA=()=>T.useContext(wd),_A=e=>"id"in e&&"source"in e&&"target"in e,l0=e=>"id"in e&&!("source"in e)&&!("target"in e),Iu=(e,n,r)=>{if(!l0(e))return[];const o=r.filter(s=>s.source===e.id).map(s=>s.target);return n.filter(s=>o.includes(s.id))},bA=(e,n,r)=>{if(!l0(e))return[];const o=r.filter(s=>s.target===e.id).map(s=>s.source);return n.filter(s=>o.includes(s.id))},wA=({source:e,sourceHandle:n,target:r,targetHandle:o})=>`reactflow__edge-${e}${n||""}-${r}${o||""}`,Gl=(e,n)=>typeof e>"u"?"":typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,xA=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),CA=(e,n)=>{if(!e.source||!e.target)return n;let r;return _A(e)?r={...e}:r={...e,id:wA(e)},xA(r,n)?n:n.concat(r)},Vl=({x:e,y:n},[r,o,s],u,[l,c])=>{const d={x:(e-r)/s,y:(n-o)/s};return u?{x:l*Math.round(d.x/l),y:c*Math.round(d.y/c)}:d},d0=({x:e,y:n},[r,o,s])=>({x:e*s+r,y:n*s+o}),ns=(e,n=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*n[0],o=(e.height??0)*n[1],s={x:e.position.x-r,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-o}:s}},xd=(e,n=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,s)=>{const{x:u,y:l}=ns(s,n).positionAbsolute;return cA(o,yd({x:u,y:l,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return lA(r)},f0=(e,n,[r,o,s]=[0,0,1],u=!1,l=!1,c=[0,0])=>{const d={x:(n.x-r)/s,y:(n.y-o)/s,width:n.width/s,height:n.height/s},f=[];return e.forEach(p=>{const{width:g,height:y,selectable:b=!0,hidden:x=!1}=p;if(l&&!b||x)return!1;const{positionAbsolute:D}=ns(p,c),w={x:D.x,y:D.y,width:g||0,height:y||0},m=ql(d,w),C=typeof g>"u"||typeof y>"u"||g===null||y===null,I=u&&m>0,F=(g||0)*(y||0);(C||I||m>=F||p.dragging)&&f.push(p)}),f},h0=(e,n)=>{const r=e.map(o=>o.id);return n.filter(o=>r.includes(o.source)||r.includes(o.target))},p0=(e,n,r,o,s,u=.1)=>{const l=n/(e.width*(1+u)),c=r/(e.height*(1+u)),d=Math.min(l,c),f=cs(d,o,s),p=e.x+e.width/2,g=e.y+e.height/2,y=n/2-p*f,b=r/2-g*f;return{x:y,y:b,zoom:f}},fo=(e,n=0)=>e.transition().duration(n);function cp(e,n,r,o){return(n[r]||[]).reduce((s,u)=>(`${e.id}-${u.id}-${r}`!==o&&s.push({id:u.id||null,type:r,nodeId:e.id,x:(e.positionAbsolute?.x??0)+u.x+u.width/2,y:(e.positionAbsolute?.y??0)+u.y+u.height/2}),s),[])}function EA(e,n,r,o,s,u){const{x:l,y:c}=Bi(e),f=n.elementsFromPoint(l,c).find(x=>x.classList.contains("react-flow__handle"));if(f){const x=f.getAttribute("data-nodeid");if(x){const D=Cd(void 0,f),w=f.getAttribute("data-handleid"),m=u({nodeId:x,id:w,type:D});if(m){const C=s.find(I=>I.nodeId===x&&I.type===D&&I.id===w);return{handle:{id:w,type:D,nodeId:x,x:C?.x||r.x,y:C?.y||r.y},validHandleResult:m}}}}let p=[],g=1/0;if(s.forEach(x=>{const D=Math.sqrt((x.x-r.x)**2+(x.y-r.y)**2);if(D<=o){const w=u(x);D<=g&&(D<g?p=[{handle:x,validHandleResult:w}]:D===g&&p.push({handle:x,validHandleResult:w}),g=D)}}),!p.length)return{handle:null,validHandleResult:g0()};if(p.length===1)return p[0];const y=p.some(({validHandleResult:x})=>x.isValid),b=p.some(({handle:x})=>x.type==="target");return p.find(({handle:x,validHandleResult:D})=>b?x.type==="target":y?D.isValid:!0)||p[0]}const SA={source:null,target:null,sourceHandle:null,targetHandle:null},g0=()=>({handleDomNode:null,isValid:!1,connection:SA,endHandle:null});function m0(e,n,r,o,s,u,l){const c=s==="target",d=l.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),f={...g0(),handleDomNode:d};if(d){const p=Cd(void 0,d),g=d.getAttribute("data-nodeid"),y=d.getAttribute("data-handleid"),b=d.classList.contains("connectable"),x=d.classList.contains("connectableend"),D={source:c?g:r,sourceHandle:c?y:o,target:c?r:g,targetHandle:c?o:y};f.connection=D,b&&x&&(n===yo.Strict?c&&p==="source"||!c&&p==="target":g!==r||y!==o)&&(f.endHandle={nodeId:g,handleId:y,type:p},f.isValid=u(D))}return f}function AA({nodes:e,nodeId:n,handleId:r,handleType:o}){return e.reduce((s,u)=>{if(u[jt]){const{handleBounds:l}=u[jt];let c=[],d=[];l&&(c=cp(u,l,"source",`${n}-${r}-${o}`),d=cp(u,l,"target",`${n}-${r}-${o}`)),s.push(...c,...d)}return s},[])}function Cd(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function el(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function FA(e,n){let r=null;return n?r="valid":e&&!n&&(r="invalid"),r}function y0({event:e,handleId:n,nodeId:r,onConnect:o,isTarget:s,getState:u,setState:l,isValidConnection:c,edgeUpdaterType:d,onReconnectEnd:f}){const p=i0(e.target),{connectionMode:g,domNode:y,autoPanOnConnect:b,connectionRadius:x,onConnectStart:D,panBy:w,getNodes:m,cancelConnection:C}=u();let I=0,F;const{x:j,y:q}=Bi(e),Y=p?.elementFromPoint(j,q),ne=Cd(d,Y),O=y?.getBoundingClientRect();if(!O||!ne)return;let V,J=Bi(e,O),ee=!1,Z=null,R=!1,G=null;const k=AA({nodes:m(),nodeId:r,handleId:n,handleType:ne}),K=()=>{if(!b)return;const[re,ue]=r0(J,O);w({x:re,y:ue}),I=requestAnimationFrame(K)};l({connectionPosition:J,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:ne,connectionStartHandle:{nodeId:r,handleId:n,type:ne},connectionEndHandle:null}),D?.(e,{nodeId:r,handleId:n,handleType:ne});function se(re){const{transform:ue}=u();J=Bi(re,O);const{handle:de,validHandleResult:le}=EA(re,p,Vl(J,ue,!1,[1,1]),x,k,ve=>m0(ve,g,r,n,s?"target":"source",c,p));if(F=de,ee||(K(),ee=!0),G=le.handleDomNode,Z=le.connection,R=le.isValid,l({connectionPosition:F&&R?d0({x:F.x,y:F.y},ue):J,connectionStatus:FA(!!F,R),connectionEndHandle:le.endHandle}),!F&&!R&&!G)return el(V);Z.source!==Z.target&&G&&(el(V),V=G,G.classList.add("connecting","react-flow__handle-connecting"),G.classList.toggle("valid",R),G.classList.toggle("react-flow__handle-valid",R))}function U(re){(F||G)&&Z&&R&&o?.(Z),u().onConnectEnd?.(re),d&&f?.(re),el(V),C(),cancelAnimationFrame(I),ee=!1,R=!1,Z=null,G=null,p.removeEventListener("mousemove",se),p.removeEventListener("mouseup",U),p.removeEventListener("touchmove",se),p.removeEventListener("touchend",U)}p.addEventListener("mousemove",se),p.addEventListener("mouseup",U),p.addEventListener("touchmove",se),p.addEventListener("touchend",U)}const lp=()=>!0,NA=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),TA=(e,n,r)=>o=>{const{connectionStartHandle:s,connectionEndHandle:u,connectionClickStartHandle:l}=o;return{connecting:s?.nodeId===e&&s?.handleId===n&&s?.type===r||u?.nodeId===e&&u?.handleId===n&&u?.type===r,clickConnecting:l?.nodeId===e&&l?.handleId===n&&l?.type===r}},v0=T.forwardRef(({type:e="source",position:n=Ce.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:u=!0,id:l,onConnect:c,children:d,className:f,onMouseDown:p,onTouchStart:g,...y},b)=>{const x=l||null,D=e==="target",w=fn(),m=DA(),{connectOnClick:C,noPanClassName:I}=It(NA,_n),{connecting:F,clickConnecting:j}=It(TA(m,x,e),_n);m||w.getState().onError?.("010",li.error010());const q=O=>{const{defaultEdgeOptions:V,onConnect:J,hasDefaultEdges:ee}=w.getState(),Z={...V,...O};if(ee){const{edges:R,setEdges:G}=w.getState();G(CA(Z,R))}J?.(Z),c?.(Z)},Y=O=>{if(!m)return;const V=s0(O);s&&(V&&O.button===0||!V)&&y0({event:O,handleId:x,nodeId:m,onConnect:q,isTarget:D,getState:w.getState,setState:w.setState,isValidConnection:r||w.getState().isValidConnection||lp}),V?p?.(O):g?.(O)},ne=O=>{const{onClickConnectStart:V,onClickConnectEnd:J,connectionClickStartHandle:ee,connectionMode:Z,isValidConnection:R}=w.getState();if(!m||!ee&&!s)return;if(!ee){V?.(O,{nodeId:m,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:x}});return}const G=i0(O.target),k=r||R||lp,{connection:K,isValid:se}=m0({nodeId:m,id:x,type:e},Z,ee.nodeId,ee.handleId||null,ee.type,k,G);se&&q(K),J?.(O),w.setState({connectionClickStartHandle:null})};return W.createElement("div",{"data-handleid":x,"data-nodeid":m,"data-handlepos":n,"data-id":`${m}-${x}-${e}`,className:In(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",I,f,{source:!D,target:D,connectable:o,connectablestart:s,connectableend:u,connecting:j,connectionindicator:o&&(s&&!F||u&&F)}]),onMouseDown:Y,onTouchStart:Y,onClick:C?ne:void 0,ref:b,...y},d)});v0.displayName="Handle";var Mi=T.memo(v0);const D0=({data:e,isConnectable:n,targetPosition:r=Ce.Top,sourcePosition:o=Ce.Bottom})=>W.createElement(W.Fragment,null,W.createElement(Mi,{type:"target",position:r,isConnectable:n}),e?.label,W.createElement(Mi,{type:"source",position:o,isConnectable:n}));D0.displayName="DefaultNode";var Ul=T.memo(D0);const _0=({data:e,isConnectable:n,sourcePosition:r=Ce.Bottom})=>W.createElement(W.Fragment,null,e?.label,W.createElement(Mi,{type:"source",position:r,isConnectable:n}));_0.displayName="InputNode";var b0=T.memo(_0);const w0=({data:e,isConnectable:n,targetPosition:r=Ce.Top})=>W.createElement(W.Fragment,null,W.createElement(Mi,{type:"target",position:r,isConnectable:n}),e?.label);w0.displayName="OutputNode";var x0=T.memo(w0);const Ed=()=>null;Ed.displayName="GroupNode";const IA=e=>({selectedNodes:e.getNodes().filter(n=>n.selected),selectedEdges:e.edges.filter(n=>n.selected).map(n=>({...n}))}),nu=e=>e.id;function RA(e,n){return _n(e.selectedNodes.map(nu),n.selectedNodes.map(nu))&&_n(e.selectedEdges.map(nu),n.selectedEdges.map(nu))}const C0=T.memo(({onSelectionChange:e})=>{const n=fn(),{selectedNodes:r,selectedEdges:o}=It(IA,RA);return T.useEffect(()=>{const s={nodes:r,edges:o};e?.(s),n.getState().onSelectionChange.forEach(u=>u(s))},[r,o,e]),null});C0.displayName="SelectionListener";const BA=e=>!!e.onSelectionChange;function OA({onSelectionChange:e}){const n=It(BA);return e||n?W.createElement(C0,{onSelectionChange:e}):null}const MA=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Uo(e,n){T.useEffect(()=>{typeof e<"u"&&n(e)},[e])}function Ge(e,n,r){T.useEffect(()=>{typeof n<"u"&&r({[e]:n})},[n])}const PA=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:s,onConnectStart:u,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:p,nodesFocusable:g,edgesFocusable:y,edgesUpdatable:b,elevateNodesOnSelect:x,minZoom:D,maxZoom:w,nodeExtent:m,onNodesChange:C,onEdgesChange:I,elementsSelectable:F,connectionMode:j,snapGrid:q,snapToGrid:Y,translateExtent:ne,connectOnClick:O,defaultEdgeOptions:V,fitView:J,fitViewOptions:ee,onNodesDelete:Z,onEdgesDelete:R,onNodeDrag:G,onNodeDragStart:k,onNodeDragStop:K,onSelectionDrag:se,onSelectionDragStart:U,onSelectionDragStop:re,noPanClassName:ue,nodeOrigin:de,rfId:le,autoPanOnConnect:ve,autoPanOnNodeDrag:ge,onError:Ee,connectionRadius:Oe,isValidConnection:De,nodeDragThreshold:Se})=>{const{setNodes:Be,setEdges:Et,setDefaultNodesAndEdges:Qe,setMinZoom:kt,setMaxZoom:et,setTranslateExtent:tt,setNodeExtent:on,reset:ke}=It(MA,_n),we=fn();return T.useEffect(()=>{const $t=o?.map(Bt=>({...Bt,...V}));return Qe(r,$t),()=>{ke()}},[]),Ge("defaultEdgeOptions",V,we.setState),Ge("connectionMode",j,we.setState),Ge("onConnect",s,we.setState),Ge("onConnectStart",u,we.setState),Ge("onConnectEnd",l,we.setState),Ge("onClickConnectStart",c,we.setState),Ge("onClickConnectEnd",d,we.setState),Ge("nodesDraggable",f,we.setState),Ge("nodesConnectable",p,we.setState),Ge("nodesFocusable",g,we.setState),Ge("edgesFocusable",y,we.setState),Ge("edgesUpdatable",b,we.setState),Ge("elementsSelectable",F,we.setState),Ge("elevateNodesOnSelect",x,we.setState),Ge("snapToGrid",Y,we.setState),Ge("snapGrid",q,we.setState),Ge("onNodesChange",C,we.setState),Ge("onEdgesChange",I,we.setState),Ge("connectOnClick",O,we.setState),Ge("fitViewOnInit",J,we.setState),Ge("fitViewOnInitOptions",ee,we.setState),Ge("onNodesDelete",Z,we.setState),Ge("onEdgesDelete",R,we.setState),Ge("onNodeDrag",G,we.setState),Ge("onNodeDragStart",k,we.setState),Ge("onNodeDragStop",K,we.setState),Ge("onSelectionDrag",se,we.setState),Ge("onSelectionDragStart",U,we.setState),Ge("onSelectionDragStop",re,we.setState),Ge("noPanClassName",ue,we.setState),Ge("nodeOrigin",de,we.setState),Ge("rfId",le,we.setState),Ge("autoPanOnConnect",ve,we.setState),Ge("autoPanOnNodeDrag",ge,we.setState),Ge("onError",Ee,we.setState),Ge("connectionRadius",Oe,we.setState),Ge("isValidConnection",De,we.setState),Ge("nodeDragThreshold",Se,we.setState),Uo(e,Be),Uo(n,Et),Uo(D,kt),Uo(w,et),Uo(ne,tt),Uo(m,on),null},dp={display:"none"},zA={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},E0="react-flow__node-desc",S0="react-flow__edge-desc",jA="react-flow__aria-live",kA=e=>e.ariaLiveMessage;function $A({rfId:e}){const n=It(kA);return W.createElement("div",{id:`${jA}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:zA},n)}function qA({rfId:e,disableKeyboardA11y:n}){return W.createElement(W.Fragment,null,W.createElement("div",{id:`${E0}-${e}`,style:dp},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),W.createElement("div",{id:`${S0}-${e}`,style:dp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&W.createElement($A,{rfId:e}))}var ra=(e=null,n={actInsideInputWithModifier:!0})=>{const[r,o]=T.useState(!1),s=T.useRef(!1),u=T.useRef(new Set([])),[l,c]=T.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),p=f.reduce((g,y)=>g.concat(...y),[]);return[f,p]}return[[],[]]},[e]);return T.useEffect(()=>{const d=typeof document<"u"?document:null,f=n?.target||d;if(e!==null){const p=b=>{if(s.current=b.ctrlKey||b.metaKey||b.shiftKey,(!s.current||s.current&&!n.actInsideInputWithModifier)&&Ll(b))return!1;const D=hp(b.code,c);u.current.add(b[D]),fp(l,u.current,!1)&&(b.preventDefault(),o(!0))},g=b=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&Ll(b))return!1;const D=hp(b.code,c);fp(l,u.current,!0)?(o(!1),u.current.clear()):u.current.delete(b[D]),b.key==="Meta"&&u.current.clear(),s.current=!1},y=()=>{u.current.clear(),o(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",g),window.addEventListener("blur",y),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",g),window.removeEventListener("blur",y)}}},[e,o]),r};function fp(e,n,r){return e.filter(o=>r||o.length===n.size).some(o=>o.every(s=>n.has(s)))}function hp(e,n){return n.includes(e)?"code":"key"}function A0(e,n,r,o){const s=e.parentNode||e.parentId;if(!s)return r;const u=n.get(s),l=ns(u,o);return A0(u,n,{x:(r.x??0)+l.x,y:(r.y??0)+l.y,z:(u[jt]?.z??0)>(r.z??0)?u[jt]?.z??0:r.z??0},o)}function F0(e,n,r){e.forEach(o=>{const s=o.parentNode||o.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||r?.[o.id]){const{x:u,y:l,z:c}=A0(o,e,{...o.position,z:o[jt]?.z??0},n);o.positionAbsolute={x:u,y:l},o[jt].z=c,r?.[o.id]&&(o[jt].isParent=!0)}})}function tl(e,n,r,o){const s=new Map,u={},l=o?1e3:0;return e.forEach(c=>{const d=(dr(c.zIndex)?c.zIndex:0)+(c.selected?l:0),f=n.get(c.id),p={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},g=c.parentNode||c.parentId;g&&(u[g]=!0);const y=f?.type&&f?.type!==c.type;Object.defineProperty(p,jt,{enumerable:!1,value:{handleBounds:y?void 0:f?.[jt]?.handleBounds,z:d}}),s.set(c.id,p)}),F0(s,r,u),s}function N0(e,n={}){const{getNodes:r,width:o,height:s,minZoom:u,maxZoom:l,d3Zoom:c,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:p,nodeOrigin:g}=e(),y=n.initial&&!f&&p;if(c&&d&&(y||!n.initial)){const x=r().filter(w=>{const m=n.includeHiddenNodes?w.width&&w.height:!w.hidden;return n.nodes?.length?m&&n.nodes.some(C=>C.id===w.id):m}),D=x.every(w=>w.width&&w.height);if(x.length>0&&D){const w=xd(x,g),{x:m,y:C,zoom:I}=p0(w,o,s,n.minZoom??u,n.maxZoom??l,n.padding??.1),F=Ri.translate(m,C).scale(I);return typeof n.duration=="number"&&n.duration>0?c.transform(fo(d,n.duration),F):c.transform(d,F),!0}}return!1}function LA(e,n){return e.forEach(r=>{const o=n.get(r.id);o&&n.set(o.id,{...o,[jt]:o[jt],selected:r.selected})}),new Map(n)}function HA(e,n){return n.map(r=>{const o=e.find(s=>s.id===r.id);return o&&(r.selected=o.selected),r})}function ru({changedNodes:e,changedEdges:n,get:r,set:o}){const{nodeInternals:s,edges:u,onNodesChange:l,onEdgesChange:c,hasDefaultNodes:d,hasDefaultEdges:f}=r();e?.length&&(d&&o({nodeInternals:LA(e,s)}),l?.(e)),n?.length&&(f&&o({edges:HA(n,u)}),c?.(n))}const Wo=()=>{},GA={zoomIn:Wo,zoomOut:Wo,zoomTo:Wo,getZoom:()=>1,setViewport:Wo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Wo,fitBounds:Wo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},VA=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),UA=()=>{const e=fn(),{d3Zoom:n,d3Selection:r}=It(VA,_n);return T.useMemo(()=>r&&n?{zoomIn:s=>n.scaleBy(fo(r,s?.duration),1.2),zoomOut:s=>n.scaleBy(fo(r,s?.duration),1/1.2),zoomTo:(s,u)=>n.scaleTo(fo(r,u?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,u)=>{const[l,c,d]=e.getState().transform,f=Ri.translate(s.x??l,s.y??c).scale(s.zoom??d);n.transform(fo(r,u?.duration),f)},getViewport:()=>{const[s,u,l]=e.getState().transform;return{x:s,y:u,zoom:l}},fitView:s=>N0(e.getState,s),setCenter:(s,u,l)=>{const{width:c,height:d,maxZoom:f}=e.getState(),p=typeof l?.zoom<"u"?l.zoom:f,g=c/2-s*p,y=d/2-u*p,b=Ri.translate(g,y).scale(p);n.transform(fo(r,l?.duration),b)},fitBounds:(s,u)=>{const{width:l,height:c,minZoom:d,maxZoom:f}=e.getState(),{x:p,y:g,zoom:y}=p0(s,l,c,d,f,u?.padding??.1),b=Ri.translate(p,g).scale(y);n.transform(fo(r,u?.duration),b)},project:s=>{const{transform:u,snapToGrid:l,snapGrid:c}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Vl(s,u,l,c)},screenToFlowPosition:s=>{const{transform:u,snapToGrid:l,snapGrid:c,domNode:d}=e.getState();if(!d)return s;const{x:f,y:p}=d.getBoundingClientRect(),g={x:s.x-f,y:s.y-p};return Vl(g,u,l,c)},flowToScreenPosition:s=>{const{transform:u,domNode:l}=e.getState();if(!l)return s;const{x:c,y:d}=l.getBoundingClientRect(),f=d0(s,u);return{x:f.x+c,y:f.y+d}},viewportInitialized:!0}:GA,[n,r])};function Sd(){const e=UA(),n=fn(),r=T.useCallback(()=>n.getState().getNodes().map(D=>({...D})),[]),o=T.useCallback(D=>n.getState().nodeInternals.get(D),[]),s=T.useCallback(()=>{const{edges:D=[]}=n.getState();return D.map(w=>({...w}))},[]),u=T.useCallback(D=>{const{edges:w=[]}=n.getState();return w.find(m=>m.id===D)},[]),l=T.useCallback(D=>{const{getNodes:w,setNodes:m,hasDefaultNodes:C,onNodesChange:I}=n.getState(),F=w(),j=typeof D=="function"?D(F):D;if(C)m(j);else if(I){const q=j.length===0?F.map(Y=>({type:"remove",id:Y.id})):j.map(Y=>({item:Y,type:"reset"}));I(q)}},[]),c=T.useCallback(D=>{const{edges:w=[],setEdges:m,hasDefaultEdges:C,onEdgesChange:I}=n.getState(),F=typeof D=="function"?D(w):D;if(C)m(F);else if(I){const j=F.length===0?w.map(q=>({type:"remove",id:q.id})):F.map(q=>({item:q,type:"reset"}));I(j)}},[]),d=T.useCallback(D=>{const w=Array.isArray(D)?D:[D],{getNodes:m,setNodes:C,hasDefaultNodes:I,onNodesChange:F}=n.getState();if(I){const q=[...m(),...w];C(q)}else if(F){const j=w.map(q=>({item:q,type:"add"}));F(j)}},[]),f=T.useCallback(D=>{const w=Array.isArray(D)?D:[D],{edges:m=[],setEdges:C,hasDefaultEdges:I,onEdgesChange:F}=n.getState();if(I)C([...m,...w]);else if(F){const j=w.map(q=>({item:q,type:"add"}));F(j)}},[]),p=T.useCallback(()=>{const{getNodes:D,edges:w=[],transform:m}=n.getState(),[C,I,F]=m;return{nodes:D().map(j=>({...j})),edges:w.map(j=>({...j})),viewport:{x:C,y:I,zoom:F}}},[]),g=T.useCallback(({nodes:D,edges:w})=>{const{nodeInternals:m,getNodes:C,edges:I,hasDefaultNodes:F,hasDefaultEdges:j,onNodesDelete:q,onEdgesDelete:Y,onNodesChange:ne,onEdgesChange:O}=n.getState(),V=(D||[]).map(G=>G.id),J=(w||[]).map(G=>G.id),ee=C().reduce((G,k)=>{const K=k.parentNode||k.parentId,se=!V.includes(k.id)&&K&&G.find(re=>re.id===K);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(V.includes(k.id)||se)&&G.push(k),G},[]),Z=I.filter(G=>typeof G.deletable=="boolean"?G.deletable:!0),R=Z.filter(G=>J.includes(G.id));if(ee||R){const G=h0(ee,Z),k=[...R,...G],K=k.reduce((se,U)=>(se.includes(U.id)||se.push(U.id),se),[]);if((j||F)&&(j&&n.setState({edges:I.filter(se=>!K.includes(se.id))}),F&&(ee.forEach(se=>{m.delete(se.id)}),n.setState({nodeInternals:new Map(m)}))),K.length>0&&(Y?.(k),O&&O(K.map(se=>({id:se,type:"remove"})))),ee.length>0&&(q?.(ee),ne)){const se=ee.map(U=>({id:U.id,type:"remove"}));ne(se)}}},[]),y=T.useCallback(D=>{const w=dA(D),m=w?null:n.getState().nodeInternals.get(D.id);return!w&&!m?[null,null,w]:[w?D:ip(m),m,w]},[]),b=T.useCallback((D,w=!0,m)=>{const[C,I,F]=y(D);return C?(m||n.getState().getNodes()).filter(j=>{if(!F&&(j.id===I.id||!j.positionAbsolute))return!1;const q=ip(j),Y=ql(q,C);return w&&Y>0||Y>=C.width*C.height}):[]},[]),x=T.useCallback((D,w,m=!0)=>{const[C]=y(D);if(!C)return!1;const I=ql(C,w);return m&&I>0||I>=C.width*C.height},[]);return T.useMemo(()=>({...e,getNodes:r,getNode:o,getEdges:s,getEdge:u,setNodes:l,setEdges:c,addNodes:d,addEdges:f,toObject:p,deleteElements:g,getIntersectingNodes:b,isNodeIntersecting:x}),[e,r,o,s,u,l,c,d,f,p,g,b,x])}const WA={actInsideInputWithModifier:!1};var XA=({deleteKeyCode:e,multiSelectionKeyCode:n})=>{const r=fn(),{deleteElements:o}=Sd(),s=ra(e,WA),u=ra(n);T.useEffect(()=>{if(s){const{edges:l,getNodes:c}=r.getState(),d=c().filter(p=>p.selected),f=l.filter(p=>p.selected);o({nodes:d,edges:f}),r.setState({nodesSelectionActive:!1})}},[s]),T.useEffect(()=>{r.setState({multiSelectionActive:u})},[u])};function YA(e){const n=fn();T.useEffect(()=>{let r;const o=()=>{if(!e.current)return;const s=gd(e.current);(s.height===0||s.width===0)&&n.getState().onError?.("004",li.error004()),n.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(r=new ResizeObserver(()=>o()),r.observe(e.current)),()=>{window.removeEventListener("resize",o),r&&e.current&&r.unobserve(e.current)}},[])}const Ad={position:"absolute",width:"100%",height:"100%",top:0,left:0},ZA=(e,n)=>e.x!==n.x||e.y!==n.y||e.zoom!==n.k,iu=e=>({x:e.x,y:e.y,zoom:e.k}),Xo=(e,n)=>e.target.closest(`.${n}`),pp=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),gp=e=>{const n=e.ctrlKey&&Nu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n},KA=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),JA=({onMove:e,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:u=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=po.Free,zoomOnDoubleClick:f=!0,elementsSelectable:p,panOnDrag:g=!0,defaultViewport:y,translateExtent:b,minZoom:x,maxZoom:D,zoomActivationKeyCode:w,preventScrolling:m=!0,children:C,noWheelClassName:I,noPanClassName:F})=>{const j=T.useRef(),q=fn(),Y=T.useRef(!1),ne=T.useRef(!1),O=T.useRef(null),V=T.useRef({x:0,y:0,zoom:0}),{d3Zoom:J,d3Selection:ee,d3ZoomHandler:Z,userSelectionActive:R}=It(KA,_n),G=ra(w),k=T.useRef(0),K=T.useRef(!1),se=T.useRef();return YA(O),T.useEffect(()=>{if(O.current){const U=O.current.getBoundingClientRect(),re=rA().scaleExtent([x,D]).translateExtent(b),ue=br(O.current).call(re),de=Ri.translate(y.x,y.y).scale(cs(y.zoom,x,D)),le=[[0,0],[U.width,U.height]],ve=re.constrain()(de,le,b);re.transform(ue,ve),re.wheelDelta(gp),q.setState({d3Zoom:re,d3Selection:ue,d3ZoomHandler:ue.on("wheel.zoom"),transform:[ve.x,ve.y,ve.k],domNode:O.current.closest(".react-flow")})}},[]),T.useEffect(()=>{ee&&J&&(l&&!G&&!R?ee.on("wheel.zoom",U=>{if(Xo(U,I))return!1;U.preventDefault(),U.stopImmediatePropagation();const re=ee.property("__zoom").k||1;if(U.ctrlKey&&u){const De=Mr(U),Se=gp(U),Be=re*Math.pow(2,Se);J.scaleTo(ee,Be,De,U);return}const ue=U.deltaMode===1?20:1;let de=d===po.Vertical?0:U.deltaX*ue,le=d===po.Horizontal?0:U.deltaY*ue;!Nu()&&U.shiftKey&&d!==po.Vertical&&(de=U.deltaY*ue,le=0),J.translateBy(ee,-(de/re)*c,-(le/re)*c,{internal:!0});const ve=iu(ee.property("__zoom")),{onViewportChangeStart:ge,onViewportChange:Ee,onViewportChangeEnd:Oe}=q.getState();clearTimeout(se.current),K.current||(K.current=!0,n?.(U,ve),ge?.(ve)),K.current&&(e?.(U,ve),Ee?.(ve),se.current=setTimeout(()=>{r?.(U,ve),Oe?.(ve),K.current=!1},150))},{passive:!1}):typeof Z<"u"&&ee.on("wheel.zoom",function(U,re){if(!m&&U.type==="wheel"&&!U.ctrlKey||Xo(U,I))return null;U.preventDefault(),Z.call(this,U,re)},{passive:!1}))},[R,l,d,ee,J,Z,G,u,m,I,n,e,r]),T.useEffect(()=>{J&&J.on("start",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;k.current=U.sourceEvent?.button;const{onViewportChangeStart:re}=q.getState(),ue=iu(U.transform);Y.current=!0,V.current=ue,U.sourceEvent?.type==="mousedown"&&q.setState({paneDragging:!0}),re?.(ue),n?.(U.sourceEvent,ue)})},[J,n]),T.useEffect(()=>{J&&(R&&!Y.current?J.on("zoom",null):R||J.on("zoom",U=>{const{onViewportChange:re}=q.getState();if(q.setState({transform:[U.transform.x,U.transform.y,U.transform.k]}),ne.current=!!(o&&pp(g,k.current??0)),(e||re)&&!U.sourceEvent?.internal){const ue=iu(U.transform);re?.(ue),e?.(U.sourceEvent,ue)}}))},[R,J,e,g,o]),T.useEffect(()=>{J&&J.on("end",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;const{onViewportChangeEnd:re}=q.getState();if(Y.current=!1,q.setState({paneDragging:!1}),o&&pp(g,k.current??0)&&!ne.current&&o(U.sourceEvent),ne.current=!1,(r||re)&&ZA(V.current,U.transform)){const ue=iu(U.transform);V.current=ue,clearTimeout(j.current),j.current=setTimeout(()=>{re?.(ue),r?.(U.sourceEvent,ue)},l?150:0)}})},[J,l,g,r,o]),T.useEffect(()=>{J&&J.filter(U=>{const re=G||s,ue=u&&U.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&U.button===1&&U.type==="mousedown"&&(Xo(U,"react-flow__node")||Xo(U,"react-flow__edge")))return!0;if(!g&&!re&&!l&&!f&&!u||R||!f&&U.type==="dblclick"||Xo(U,I)&&U.type==="wheel"||Xo(U,F)&&(U.type!=="wheel"||l&&U.type==="wheel"&&!G)||!u&&U.ctrlKey&&U.type==="wheel"||!re&&!l&&!ue&&U.type==="wheel"||!g&&(U.type==="mousedown"||U.type==="touchstart")||Array.isArray(g)&&!g.includes(U.button)&&U.type==="mousedown")return!1;const de=Array.isArray(g)&&g.includes(U.button)||!U.button||U.button<=1;return(!U.ctrlKey||U.type==="wheel")&&de})},[R,J,s,u,l,f,g,p,G]),W.createElement("div",{className:"react-flow__renderer",ref:O,style:Ad},C)},QA=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function e3(){const{userSelectionActive:e,userSelectionRect:n}=It(QA,_n);return e&&n?W.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}function mp(e,n){const r=n.parentNode||n.parentId,o=e.find(s=>s.id===r);if(o){const s=n.position.x+n.width-o.width,u=n.position.y+n.height-o.height;if(s>0||u>0||n.position.x<0||n.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,s>0&&(o.style.width+=s),u>0&&(o.style.height+=u),n.position.x<0){const l=Math.abs(n.position.x);o.position.x=o.position.x-l,o.style.width+=l,n.position.x=0}if(n.position.y<0){const l=Math.abs(n.position.y);o.position.y=o.position.y-l,o.style.height+=l,n.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function T0(e,n){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const r=e.filter(o=>o.type==="add").map(o=>o.item);return n.reduce((o,s)=>{const u=e.filter(c=>c.id===s.id);if(u.length===0)return o.push(s),o;const l={...s};for(const c of u)if(c)switch(c.type){case"select":{l.selected=c.selected;break}case"position":{typeof c.position<"u"&&(l.position=c.position),typeof c.positionAbsolute<"u"&&(l.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(l.dragging=c.dragging),l.expandParent&&mp(o,l);break}case"dimensions":{typeof c.dimensions<"u"&&(l.width=c.dimensions.width,l.height=c.dimensions.height),typeof c.updateStyle<"u"&&(l.style={...l.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(l.resizing=c.resizing),l.expandParent&&mp(o,l);break}case"remove":return o}return o.push(l),o},r)}function I0(e,n){return T0(e,n)}function t3(e,n){return T0(e,n)}const Ni=(e,n)=>({id:e,type:"select",selected:n});function Ko(e,n){return e.reduce((r,o)=>{const s=n.includes(o.id);return!o.selected&&s?(o.selected=!0,r.push(Ni(o.id,!0))):o.selected&&!s&&(o.selected=!1,r.push(Ni(o.id,!1))),r},[])}const nl=(e,n)=>r=>{r.target===n.current&&e?.(r)},n3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),R0=T.memo(({isSelecting:e,selectionMode:n=ls.Full,panOnDrag:r,onSelectionStart:o,onSelectionEnd:s,onPaneClick:u,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:p,children:g})=>{const y=T.useRef(null),b=fn(),x=T.useRef(0),D=T.useRef(0),w=T.useRef(),{userSelectionActive:m,elementsSelectable:C,dragging:I}=It(n3,_n),F=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,D.current=0},j=Z=>{u?.(Z),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},q=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}l?.(Z)},Y=c?Z=>c(Z):void 0,ne=Z=>{const{resetSelectedElements:R,domNode:G}=b.getState();if(w.current=G?.getBoundingClientRect(),!C||!e||Z.button!==0||Z.target!==y.current||!w.current)return;const{x:k,y:K}=Bi(Z,w.current);R(),b.setState({userSelectionRect:{width:0,height:0,startX:k,startY:K,x:k,y:K}}),o?.(Z)},O=Z=>{const{userSelectionRect:R,nodeInternals:G,edges:k,transform:K,onNodesChange:se,onEdgesChange:U,nodeOrigin:re,getNodes:ue}=b.getState();if(!e||!w.current||!R)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const de=Bi(Z,w.current),le=R.startX??0,ve=R.startY??0,ge={...R,x:de.x<le?de.x:le,y:de.y<ve?de.y:ve,width:Math.abs(de.x-le),height:Math.abs(de.y-ve)},Ee=ue(),Oe=f0(G,ge,K,n===ls.Partial,!0,re),De=h0(Oe,k).map(Be=>Be.id),Se=Oe.map(Be=>Be.id);if(x.current!==Se.length){x.current=Se.length;const Be=Ko(Ee,Se);Be.length&&se?.(Be)}if(D.current!==De.length){D.current=De.length;const Be=Ko(k,De);Be.length&&U?.(Be)}b.setState({userSelectionRect:ge})},V=Z=>{if(Z.button!==0)return;const{userSelectionRect:R}=b.getState();!m&&R&&Z.target===y.current&&j?.(Z),b.setState({nodesSelectionActive:x.current>0}),F(),s?.(Z)},J=Z=>{m&&(b.setState({nodesSelectionActive:x.current>0}),s?.(Z)),F()},ee=C&&(e||m);return W.createElement("div",{className:In(["react-flow__pane",{dragging:I,selection:e}]),onClick:ee?void 0:nl(j,y),onContextMenu:nl(q,y),onWheel:nl(Y,y),onMouseEnter:ee?void 0:d,onMouseDown:ee?ne:void 0,onMouseMove:ee?O:f,onMouseUp:ee?V:void 0,onMouseLeave:ee?J:p,ref:y,style:Ad},g,W.createElement(e3,null))});R0.displayName="Pane";function B0(e,n){const r=e.parentNode||e.parentId;if(!r)return!1;const o=n.get(r);return o?o.selected?!0:B0(o,n):!1}function yp(e,n,r){let o=e;do{if(o?.matches(n))return!0;if(o===r.current)return!1;o=o.parentElement}while(o);return!1}function r3(e,n,r,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||s.parentId||!B0(s,e))&&(s.draggable||n&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(s.positionAbsolute?.x??0),y:r.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function i3(e,n){return!n||n==="parent"?n:[n[0],[n[1][0]-(e.width||0),n[1][1]-(e.height||0)]]}function O0(e,n,r,o,s=[0,0],u){const l=i3(e,e.extent||o);let c=l;const d=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(d&&e.width&&e.height){const g=r.get(d),{x:y,y:b}=ns(g,s).positionAbsolute;c=g&&dr(y)&&dr(b)&&dr(g.width)&&dr(g.height)?[[y+e.width*s[0],b+e.height*s[1]],[y+g.width-e.width+e.width*s[0],b+g.height-e.height+e.height*s[1]]]:c}else u?.("005",li.error005()),c=l;else if(e.extent&&d&&e.extent!=="parent"){const g=r.get(d),{x:y,y:b}=ns(g,s).positionAbsolute;c=[[e.extent[0][0]+y,e.extent[0][1]+b],[e.extent[1][0]+y,e.extent[1][1]+b]]}let f={x:0,y:0};if(d){const g=r.get(d);f=ns(g,s).positionAbsolute}const p=c&&c!=="parent"?md(n,c):n;return{position:{x:p.x-f.x,y:p.y-f.y},positionAbsolute:p}}function rl({nodeId:e,dragItems:n,nodeInternals:r}){const o=n.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const vp=(e,n,r,o)=>{const s=n.querySelectorAll(e);if(!s||!s.length)return null;const u=Array.from(s),l=n.getBoundingClientRect(),c={x:l.width*o[0],y:l.height*o[1]};return u.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-l.left-c.x)/r,y:(f.top-l.top-c.y)/r,...gd(d)}})};function Ps(e,n,r){return r===void 0?r:o=>{const s=n().nodeInternals.get(e);s&&r(o,{...s})}}function Wl({id:e,store:n,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:u,multiSelectionActive:l,nodeInternals:c,onError:d}=n.getState(),f=c.get(e);if(!f){d?.("012",li.error012(e));return}n.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&l)&&(u({nodes:[f],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([e])}function o3(){const e=fn();return T.useCallback(({sourceEvent:r})=>{const{transform:o,snapGrid:s,snapToGrid:u}=e.getState(),l=r.touches?r.touches[0].clientX:r.clientX,c=r.touches?r.touches[0].clientY:r.clientY,d={x:(l-o[0])/o[2],y:(c-o[1])/o[2]};return{xSnapped:u?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:u?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function il(e){return(n,r,o)=>e?.(n,o)}function M0({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:o,nodeId:s,isSelectable:u,selectNodesOnDrag:l}){const c=fn(),[d,f]=T.useState(!1),p=T.useRef([]),g=T.useRef({x:null,y:null}),y=T.useRef(0),b=T.useRef(null),x=T.useRef({x:0,y:0}),D=T.useRef(null),w=T.useRef(!1),m=T.useRef(!1),C=T.useRef(!1),I=o3();return T.useEffect(()=>{if(e?.current){const F=br(e.current),j=({x:ne,y:O})=>{const{nodeInternals:V,onNodeDrag:J,onSelectionDrag:ee,updateNodePositions:Z,nodeExtent:R,snapGrid:G,snapToGrid:k,nodeOrigin:K,onError:se}=c.getState();g.current={x:ne,y:O};let U=!1,re={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&R){const de=xd(p.current,K);re=yd(de)}if(p.current=p.current.map(de=>{const le={x:ne-de.distance.x,y:O-de.distance.y};k&&(le.x=G[0]*Math.round(le.x/G[0]),le.y=G[1]*Math.round(le.y/G[1]));const ve=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];p.current.length>1&&R&&!de.extent&&(ve[0][0]=de.positionAbsolute.x-re.x+R[0][0],ve[1][0]=de.positionAbsolute.x+(de.width??0)-re.x2+R[1][0],ve[0][1]=de.positionAbsolute.y-re.y+R[0][1],ve[1][1]=de.positionAbsolute.y+(de.height??0)-re.y2+R[1][1]);const ge=O0(de,le,V,ve,K,se);return U=U||de.position.x!==ge.position.x||de.position.y!==ge.position.y,de.position=ge.position,de.positionAbsolute=ge.positionAbsolute,de}),!U)return;Z(p.current,!0,!0),f(!0);const ue=s?J:il(ee);if(ue&&D.current){const[de,le]=rl({nodeId:s,dragItems:p.current,nodeInternals:V});ue(D.current,de,le)}},q=()=>{if(!b.current)return;const[ne,O]=r0(x.current,b.current);if(ne!==0||O!==0){const{transform:V,panBy:J}=c.getState();g.current.x=(g.current.x??0)-ne/V[2],g.current.y=(g.current.y??0)-O/V[2],J({x:ne,y:O})&&j(g.current)}y.current=requestAnimationFrame(q)},Y=ne=>{const{nodeInternals:O,multiSelectionActive:V,nodesDraggable:J,unselectNodesAndEdges:ee,onNodeDragStart:Z,onSelectionDragStart:R}=c.getState();m.current=!0;const G=s?Z:il(R);(!l||!u)&&!V&&s&&(O.get(s)?.selected||ee()),s&&u&&l&&Wl({id:s,store:c,nodeRef:e});const k=I(ne);if(g.current=k,p.current=r3(O,J,k,s),G&&p.current){const[K,se]=rl({nodeId:s,dragItems:p.current,nodeInternals:O});G(ne.sourceEvent,K,se)}};if(n)F.on(".drag",null);else{const ne=hE().on("start",O=>{const{domNode:V,nodeDragThreshold:J}=c.getState();J===0&&Y(O),C.current=!1;const ee=I(O);g.current=ee,b.current=V?.getBoundingClientRect()||null,x.current=Bi(O.sourceEvent,b.current)}).on("drag",O=>{const V=I(O),{autoPanOnNodeDrag:J,nodeDragThreshold:ee}=c.getState();if(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1&&(C.current=!0),!C.current){if(!w.current&&m.current&&J&&(w.current=!0,q()),!m.current){const Z=V.xSnapped-(g?.current?.x??0),R=V.ySnapped-(g?.current?.y??0);Math.sqrt(Z*Z+R*R)>ee&&Y(O)}(g.current.x!==V.xSnapped||g.current.y!==V.ySnapped)&&p.current&&m.current&&(D.current=O.sourceEvent,x.current=Bi(O.sourceEvent,b.current),j(V))}}).on("end",O=>{if(!(!m.current||C.current)&&(f(!1),w.current=!1,m.current=!1,cancelAnimationFrame(y.current),p.current)){const{updateNodePositions:V,nodeInternals:J,onNodeDragStop:ee,onSelectionDragStop:Z}=c.getState(),R=s?ee:il(Z);if(V(p.current,!1,!1),R){const[G,k]=rl({nodeId:s,dragItems:p.current,nodeInternals:J});R(O.sourceEvent,G,k)}}}).filter(O=>{const V=O.target;return!O.button&&(!r||!yp(V,`.${r}`,e))&&(!o||yp(V,o,e))});return F.call(ne),()=>{F.on(".drag",null)}}}},[e,n,r,o,u,c,s,l,I]),d}function P0(){const e=fn();return T.useCallback(r=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:u,getNodes:l,snapToGrid:c,snapGrid:d,onError:f,nodesDraggable:p}=e.getState(),g=l().filter(C=>C.selected&&(C.draggable||p&&typeof C.draggable>"u")),y=c?d[0]:5,b=c?d[1]:5,x=r.isShiftPressed?4:1,D=r.x*y*x,w=r.y*b*x,m=g.map(C=>{if(C.positionAbsolute){const I={x:C.positionAbsolute.x+D,y:C.positionAbsolute.y+w};c&&(I.x=d[0]*Math.round(I.x/d[0]),I.y=d[1]*Math.round(I.y/d[1]));const{positionAbsolute:F,position:j}=O0(C,I,o,s,void 0,f);C.position=j,C.positionAbsolute=F}return C});u(m,!0,!1)},[])}const rs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var zs=e=>{const n=({id:r,type:o,data:s,xPos:u,yPos:l,xPosOrigin:c,yPosOrigin:d,selected:f,onClick:p,onMouseEnter:g,onMouseMove:y,onMouseLeave:b,onContextMenu:x,onDoubleClick:D,style:w,className:m,isDraggable:C,isSelectable:I,isConnectable:F,isFocusable:j,selectNodesOnDrag:q,sourcePosition:Y,targetPosition:ne,hidden:O,resizeObserver:V,dragHandle:J,zIndex:ee,isParent:Z,noDragClassName:R,noPanClassName:G,initialized:k,disableKeyboardA11y:K,ariaLabel:se,rfId:U,hasHandleBounds:re})=>{const ue=fn(),de=T.useRef(null),le=T.useRef(null),ve=T.useRef(Y),ge=T.useRef(ne),Ee=T.useRef(o),Oe=I||C||p||g||y||b,De=P0(),Se=Ps(r,ue.getState,g),Be=Ps(r,ue.getState,y),Et=Ps(r,ue.getState,b),Qe=Ps(r,ue.getState,x),kt=Ps(r,ue.getState,D),et=ke=>{const{nodeDragThreshold:we}=ue.getState();if(I&&(!q||!C||we>0)&&Wl({id:r,store:ue,nodeRef:de}),p){const $t=ue.getState().nodeInternals.get(r);$t&&p(ke,{...$t})}},tt=ke=>{if(!Ll(ke)&&!K)if(o0.includes(ke.key)&&I){const we=ke.key==="Escape";Wl({id:r,store:ue,unselect:we,nodeRef:de})}else C&&f&&Object.prototype.hasOwnProperty.call(rs,ke.key)&&(ue.setState({ariaLiveMessage:`Moved selected node ${ke.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~l}`}),De({x:rs[ke.key].x,y:rs[ke.key].y,isShiftPressed:ke.shiftKey}))};T.useEffect(()=>()=>{le.current&&(V?.unobserve(le.current),le.current=null)},[]),T.useEffect(()=>{if(de.current&&!O){const ke=de.current;(!k||!re||le.current!==ke)&&(le.current&&V?.unobserve(le.current),V?.observe(ke),le.current=ke)}},[O,k,re]),T.useEffect(()=>{const ke=Ee.current!==o,we=ve.current!==Y,$t=ge.current!==ne;de.current&&(ke||we||$t)&&(ke&&(Ee.current=o),we&&(ve.current=Y),$t&&(ge.current=ne),ue.getState().updateNodeDimensions([{id:r,nodeElement:de.current,forceUpdate:!0}]))},[r,o,Y,ne]);const on=M0({nodeRef:de,disabled:O||!C,noDragClassName:R,handleSelector:J,nodeId:r,isSelectable:I,selectNodesOnDrag:q});return O?null:W.createElement("div",{className:In(["react-flow__node",`react-flow__node-${o}`,{[G]:C},m,{selected:f,selectable:I,parent:Z,dragging:on}]),ref:de,style:{zIndex:ee,transform:`translate(${c}px,${d}px)`,pointerEvents:Oe?"all":"none",visibility:k?"visible":"hidden",...w},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:Se,onMouseMove:Be,onMouseLeave:Et,onContextMenu:Qe,onClick:et,onDoubleClick:kt,onKeyDown:j?tt:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":K?void 0:`${E0}-${U}`,"aria-label":se},W.createElement(vA,{value:r},W.createElement(e,{id:r,data:s,type:o,xPos:u,yPos:l,selected:f,isConnectable:F,sourcePosition:Y,targetPosition:ne,dragging:on,dragHandle:J,zIndex:ee})))};return n.displayName="NodeWrapper",T.memo(n)};const s3=e=>{const n=e.getNodes().filter(r=>r.selected);return{...xd(n,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function a3({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const o=fn(),{width:s,height:u,x:l,y:c,transformString:d,userSelectionActive:f}=It(s3,_n),p=P0(),g=T.useRef(null);if(T.useEffect(()=>{r||g.current?.focus({preventScroll:!0})},[r]),M0({nodeRef:g}),f||!s||!u)return null;const y=e?x=>{const D=o.getState().getNodes().filter(w=>w.selected);e(x,D)}:void 0,b=x=>{Object.prototype.hasOwnProperty.call(rs,x.key)&&p({x:rs[x.key].x,y:rs[x.key].y,isShiftPressed:x.shiftKey})};return W.createElement("div",{className:In(["react-flow__nodesselection","react-flow__container",n]),style:{transform:d}},W.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:y,tabIndex:r?void 0:-1,onKeyDown:r?void 0:b,style:{width:s,height:u,top:c,left:l}}))}var u3=T.memo(a3);const c3=e=>e.nodesSelectionActive,z0=({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:l,deleteKeyCode:c,onMove:d,onMoveStart:f,onMoveEnd:p,selectionKeyCode:g,selectionOnDrag:y,selectionMode:b,onSelectionStart:x,onSelectionEnd:D,multiSelectionKeyCode:w,panActivationKeyCode:m,zoomActivationKeyCode:C,elementsSelectable:I,zoomOnScroll:F,zoomOnPinch:j,panOnScroll:q,panOnScrollSpeed:Y,panOnScrollMode:ne,zoomOnDoubleClick:O,panOnDrag:V,defaultViewport:J,translateExtent:ee,minZoom:Z,maxZoom:R,preventScrolling:G,onSelectionContextMenu:k,noWheelClassName:K,noPanClassName:se,disableKeyboardA11y:U})=>{const re=It(c3),ue=ra(g),de=ra(m),le=de||V,ve=de||q,ge=ue||y&&le!==!0;return XA({deleteKeyCode:c,multiSelectionKeyCode:w}),W.createElement(JA,{onMove:d,onMoveStart:f,onMoveEnd:p,onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:F,zoomOnPinch:j,panOnScroll:ve,panOnScrollSpeed:Y,panOnScrollMode:ne,zoomOnDoubleClick:O,panOnDrag:!ue&&le,defaultViewport:J,translateExtent:ee,minZoom:Z,maxZoom:R,zoomActivationKeyCode:C,preventScrolling:G,noWheelClassName:K,noPanClassName:se},W.createElement(R0,{onSelectionStart:x,onSelectionEnd:D,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:l,panOnDrag:le,isSelecting:!!ge,selectionMode:b},e,re&&W.createElement(u3,{onSelectionContextMenu:k,noPanClassName:se,disableKeyboardA11y:U})))};z0.displayName="FlowRenderer";var l3=T.memo(z0);function d3(e){return It(T.useCallback(r=>e?f0(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function f3(e){const n={input:zs(e.input||b0),default:zs(e.default||Ul),output:zs(e.output||x0),group:zs(e.group||Ed)},r={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,u)=>(s[u]=zs(e[u]||Ul),s),r);return{...n,...o}}const h3=({x:e,y:n,width:r,height:o,origin:s})=>!r||!o?{x:e,y:n}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:n}:{x:e-r*s[0],y:n-o*s[1]},p3=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),j0=e=>{const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:u,onError:l}=It(p3,_n),c=d3(e.onlyRenderVisibleElements),d=T.useRef(),f=T.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(g=>{const y=g.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));u(y)});return d.current=p,p},[]);return T.useEffect(()=>()=>{d?.current?.disconnect()},[]),W.createElement("div",{className:"react-flow__nodes",style:Ad},c.map(p=>{let g=p.type||"default";e.nodeTypes[g]||(l?.("003",li.error003(g)),g="default");const y=e.nodeTypes[g]||e.nodeTypes.default,b=!!(p.draggable||n&&typeof p.draggable>"u"),x=!!(p.selectable||s&&typeof p.selectable>"u"),D=!!(p.connectable||r&&typeof p.connectable>"u"),w=!!(p.focusable||o&&typeof p.focusable>"u"),m=e.nodeExtent?md(p.positionAbsolute,e.nodeExtent):p.positionAbsolute,C=m?.x??0,I=m?.y??0,F=h3({x:C,y:I,width:p.width??0,height:p.height??0,origin:e.nodeOrigin});return W.createElement(y,{key:p.id,id:p.id,className:p.className,style:p.style,type:g,data:p.data,sourcePosition:p.sourcePosition||Ce.Bottom,targetPosition:p.targetPosition||Ce.Top,hidden:p.hidden,xPos:C,yPos:I,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!p.selected,isDraggable:b,isSelectable:x,isConnectable:D,isFocusable:w,resizeObserver:f,dragHandle:p.dragHandle,zIndex:p[jt]?.z??0,isParent:!!p[jt]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!p.width&&!!p.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[jt]?.handleBounds})}))};j0.displayName="NodeRenderer";var g3=T.memo(j0);const m3=(e,n,r)=>r===Ce.Left?e-n:r===Ce.Right?e+n:e,y3=(e,n,r)=>r===Ce.Top?e-n:r===Ce.Bottom?e+n:e,Dp="react-flow__edgeupdater",_p=({position:e,centerX:n,centerY:r,radius:o=10,onMouseDown:s,onMouseEnter:u,onMouseOut:l,type:c})=>W.createElement("circle",{onMouseDown:s,onMouseEnter:u,onMouseOut:l,className:In([Dp,`${Dp}-${c}`]),cx:m3(n,o,e),cy:y3(r,o,e),r:o,stroke:"transparent",fill:"transparent"}),v3=()=>!0;var Yo=e=>{const n=({id:r,className:o,type:s,data:u,onClick:l,onEdgeDoubleClick:c,selected:d,animated:f,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:b,labelBgPadding:x,labelBgBorderRadius:D,style:w,source:m,target:C,sourceX:I,sourceY:F,targetX:j,targetY:q,sourcePosition:Y,targetPosition:ne,elementsSelectable:O,hidden:V,sourceHandleId:J,targetHandleId:ee,onContextMenu:Z,onMouseEnter:R,onMouseMove:G,onMouseLeave:k,reconnectRadius:K,onReconnect:se,onReconnectStart:U,onReconnectEnd:re,markerEnd:ue,markerStart:de,rfId:le,ariaLabel:ve,isFocusable:ge,isReconnectable:Ee,pathOptions:Oe,interactionWidth:De,disableKeyboardA11y:Se})=>{const Be=T.useRef(null),[Et,Qe]=T.useState(!1),[kt,et]=T.useState(!1),tt=fn(),on=T.useMemo(()=>`url('#${Gl(de,le)}')`,[de,le]),ke=T.useMemo(()=>`url('#${Gl(ue,le)}')`,[ue,le]);if(V)return null;const we=lt=>{const{edges:Pt,addSelectedEdges:hn,unselectNodesAndEdges:an,multiSelectionActive:bt}=tt.getState(),At=Pt.find(Jt=>Jt.id===r);At&&(O&&(tt.setState({nodesSelectionActive:!1}),At.selected&&bt?(an({nodes:[],edges:[At]}),Be.current?.blur()):hn([r])),l&&l(lt,At))},$t=Ms(r,tt.getState,c),Bt=Ms(r,tt.getState,Z),ct=Ms(r,tt.getState,R),Ot=Ms(r,tt.getState,G),St=Ms(r,tt.getState,k),sn=(lt,Pt)=>{if(lt.button!==0)return;const{edges:hn,isValidConnection:an}=tt.getState(),bt=Pt?C:m,At=(Pt?ee:J)||null,Jt=Pt?"target":"source",Qn=an||v3,un=Pt,xn=hn.find(Q=>Q.id===r);et(!0),U?.(lt,xn,Jt);const gn=Q=>{et(!1),re?.(Q,xn,Jt)};y0({event:lt,handleId:At,nodeId:bt,onConnect:Q=>se?.(xn,Q),isTarget:un,getState:tt.getState,setState:tt.setState,isValidConnection:Qn,edgeUpdaterType:Jt,onReconnectEnd:gn})},Kt=lt=>sn(lt,!0),wn=lt=>sn(lt,!1),Mt=()=>Qe(!0),pt=()=>Qe(!1),Vt=!O&&!l,_t=lt=>{if(!Se&&o0.includes(lt.key)&&O){const{unselectNodesAndEdges:Pt,addSelectedEdges:hn,edges:an}=tt.getState();lt.key==="Escape"?(Be.current?.blur(),Pt({edges:[an.find(At=>At.id===r)]})):hn([r])}};return W.createElement("g",{className:In(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:d,animated:f,inactive:Vt,updating:Et}]),onClick:we,onDoubleClick:$t,onContextMenu:Bt,onMouseEnter:ct,onMouseMove:Ot,onMouseLeave:St,onKeyDown:ge?_t:void 0,tabIndex:ge?0:void 0,role:ge?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":ve===null?void 0:ve||`Edge from ${m} to ${C}`,"aria-describedby":ge?`${S0}-${le}`:void 0,ref:Be},!kt&&W.createElement(e,{id:r,source:m,target:C,selected:d,animated:f,label:p,labelStyle:g,labelShowBg:y,labelBgStyle:b,labelBgPadding:x,labelBgBorderRadius:D,data:u,style:w,sourceX:I,sourceY:F,targetX:j,targetY:q,sourcePosition:Y,targetPosition:ne,sourceHandleId:J,targetHandleId:ee,markerStart:on,markerEnd:ke,pathOptions:Oe,interactionWidth:De}),Ee&&W.createElement(W.Fragment,null,(Ee==="source"||Ee===!0)&&W.createElement(_p,{position:Y,centerX:I,centerY:F,radius:K,onMouseDown:Kt,onMouseEnter:Mt,onMouseOut:pt,type:"source"}),(Ee==="target"||Ee===!0)&&W.createElement(_p,{position:ne,centerX:j,centerY:q,radius:K,onMouseDown:wn,onMouseEnter:Mt,onMouseOut:pt,type:"target"})))};return n.displayName="EdgeWrapper",T.memo(n)};function D3(e){const n={default:Yo(e.default||Tu),straight:Yo(e.bezier||_d),step:Yo(e.step||Dd),smoothstep:Yo(e.step||Lu),simplebezier:Yo(e.simplebezier||vd)},r={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,u)=>(s[u]=Yo(e[u]||Tu),s),r);return{...n,...o}}function bp(e,n,r=null){const o=(r?.x||0)+n.x,s=(r?.y||0)+n.y,u=r?.width||n.width,l=r?.height||n.height;switch(e){case Ce.Top:return{x:o+u/2,y:s};case Ce.Right:return{x:o+u,y:s+l/2};case Ce.Bottom:return{x:o+u/2,y:s+l};case Ce.Left:return{x:o,y:s+l/2}}}function wp(e,n){return e?e.length===1||!n?e[0]:n&&e.find(r=>r.id===n)||null:null}const _3=(e,n,r,o,s,u)=>{const l=bp(r,e,n),c=bp(u,o,s);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y}};function b3({sourcePos:e,targetPos:n,sourceWidth:r,sourceHeight:o,targetWidth:s,targetHeight:u,width:l,height:c,transform:d}){const f={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x+r,n.x+s),y2:Math.max(e.y+o,n.y+u)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const p=yd({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:l/d[2],height:c/d[2]}),g=Math.max(0,Math.min(p.x2,f.x2)-Math.max(p.x,f.x)),y=Math.max(0,Math.min(p.y2,f.y2)-Math.max(p.y,f.y));return Math.ceil(g*y)>0}function xp(e){const n=e?.[jt]?.handleBounds||null,r=n&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},n,!!r]}const w3=[{level:0,isMaxLevel:!0,edges:[]}];function x3(e,n,r=!1){let o=-1;const s=e.reduce((l,c)=>{const d=dr(c.zIndex);let f=d?c.zIndex:0;if(r){const p=n.get(c.target),g=n.get(c.source),y=c.selected||p?.selected||g?.selected,b=Math.max(g?.[jt]?.z||0,p?.[jt]?.z||0,1e3);f=(d?c.zIndex:0)+(y?b:0)}return l[f]?l[f].push(c):l[f]=[c],o=f>o?f:o,l},{}),u=Object.entries(s).map(([l,c])=>{const d=+l;return{edges:c,level:d,isMaxLevel:d===o}});return u.length===0?w3:u}function C3(e,n,r){const o=It(T.useCallback(s=>e?s.edges.filter(u=>{const l=n.get(u.source),c=n.get(u.target);return l?.width&&l?.height&&c?.width&&c?.height&&b3({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,n]));return x3(o,n,r)}const E3=({color:e="none",strokeWidth:n=1})=>W.createElement("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),S3=({color:e="none",strokeWidth:n=1})=>W.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Cp={[na.Arrow]:E3,[na.ArrowClosed]:S3};function A3(e){const n=fn();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(Cp,e)?Cp[e]:(n.getState().onError?.("009",li.error009(e)),null),[e])}const F3=({id:e,type:n,color:r,width:o=12.5,height:s=12.5,markerUnits:u="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const d=A3(n);return d?W.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:c,refX:"0",refY:"0"},W.createElement(d,{color:r,strokeWidth:l})):null},N3=({defaultColor:e,rfId:n})=>r=>{const o=[];return r.edges.reduce((s,u)=>([u.markerStart,u.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const c=Gl(l,n);o.includes(c)||(s.push({id:c,color:l.color||e,...l}),o.push(c))}}),s),[]).sort((s,u)=>s.id.localeCompare(u.id))},k0=({defaultColor:e,rfId:n})=>{const r=It(T.useCallback(N3({defaultColor:e,rfId:n}),[e,n]),(o,s)=>!(o.length!==s.length||o.some((u,l)=>u.id!==s[l].id)));return W.createElement("defs",null,r.map(o=>W.createElement(F3,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};k0.displayName="MarkerDefinitions";var T3=T.memo(k0);const I3=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),$0=({defaultMarkerColor:e,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:o,edgeTypes:s,noPanClassName:u,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:p,onEdgeDoubleClick:g,onReconnect:y,onReconnectStart:b,onReconnectEnd:x,reconnectRadius:D,children:w,disableKeyboardA11y:m})=>{const{edgesFocusable:C,edgesUpdatable:I,elementsSelectable:F,width:j,height:q,connectionMode:Y,nodeInternals:ne,onError:O}=It(I3,_n),V=C3(n,ne,r);return j?W.createElement(W.Fragment,null,V.map(({level:J,edges:ee,isMaxLevel:Z})=>W.createElement("svg",{key:J,style:{zIndex:J},width:j,height:q,className:"react-flow__edges react-flow__container"},Z&&W.createElement(T3,{defaultColor:e,rfId:o}),W.createElement("g",null,ee.map(R=>{const[G,k,K]=xp(ne.get(R.source)),[se,U,re]=xp(ne.get(R.target));if(!K||!re)return null;let ue=R.type||"default";s[ue]||(O?.("011",li.error011(ue)),ue="default");const de=s[ue]||s.default,le=Y===yo.Strict?U.target:(U.target??[]).concat(U.source??[]),ve=wp(k.source,R.sourceHandle),ge=wp(le,R.targetHandle),Ee=ve?.position||Ce.Bottom,Oe=ge?.position||Ce.Top,De=!!(R.focusable||C&&typeof R.focusable>"u"),Se=R.reconnectable||R.updatable,Be=typeof y<"u"&&(Se||I&&typeof Se>"u");if(!ve||!ge)return O?.("008",li.error008(ve,R)),null;const{sourceX:Et,sourceY:Qe,targetX:kt,targetY:et}=_3(G,ve,Ee,se,ge,Oe);return W.createElement(de,{key:R.id,id:R.id,className:In([R.className,u]),type:ue,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:Et,sourceY:Qe,targetX:kt,targetY:et,sourcePosition:Ee,targetPosition:Oe,elementsSelectable:F,onContextMenu:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,onClick:p,onEdgeDoubleClick:g,onReconnect:y,onReconnectStart:b,onReconnectEnd:x,reconnectRadius:D,rfId:o,ariaLabel:R.ariaLabel,isFocusable:De,isReconnectable:Be,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:m})})))),w):null};$0.displayName="EdgeRenderer";var R3=T.memo($0);const B3=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function O3({children:e}){const n=It(B3);return W.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},e)}function M3(e){const n=Sd(),r=T.useRef(!1);T.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const P3={[Ce.Left]:Ce.Right,[Ce.Right]:Ce.Left,[Ce.Top]:Ce.Bottom,[Ce.Bottom]:Ce.Top},q0=({nodeId:e,handleType:n,style:r,type:o=Ti.Bezier,CustomComponent:s,connectionStatus:u})=>{const{fromNode:l,handleId:c,toX:d,toY:f,connectionMode:p}=It(T.useCallback(q=>({fromNode:q.nodeInternals.get(e),handleId:q.connectionHandleId,toX:(q.connectionPosition.x-q.transform[0])/q.transform[2],toY:(q.connectionPosition.y-q.transform[1])/q.transform[2],connectionMode:q.connectionMode}),[e]),_n),g=l?.[jt]?.handleBounds;let y=g?.[n];if(p===yo.Loose&&(y=y||g?.[n==="source"?"target":"source"]),!l||!y)return null;const b=c?y.find(q=>q.id===c):y[0],x=b?b.x+b.width/2:(l.width??0)/2,D=b?b.y+b.height/2:l.height??0,w=(l.positionAbsolute?.x??0)+x,m=(l.positionAbsolute?.y??0)+D,C=b?.position,I=C?P3[C]:null;if(!C||!I)return null;if(s)return W.createElement(s,{connectionLineType:o,connectionLineStyle:r,fromNode:l,fromHandle:b,fromX:w,fromY:m,toX:d,toY:f,fromPosition:C,toPosition:I,connectionStatus:u});let F="";const j={sourceX:w,sourceY:m,sourcePosition:C,targetX:d,targetY:f,targetPosition:I};return o===Ti.Bezier?[F]=bd(j):o===Ti.Step?[F]=Hl({...j,borderRadius:0}):o===Ti.SmoothStep?[F]=Hl(j):o===Ti.SimpleBezier?[F]=c0(j):F=`M${w},${m} ${d},${f}`,W.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:r})};q0.displayName="ConnectionLine";const z3=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function j3({containerStyle:e,style:n,type:r,component:o}){const{nodeId:s,handleType:u,nodesConnectable:l,width:c,height:d,connectionStatus:f}=It(z3,_n);return!(s&&u&&c&&l)?null:W.createElement("svg",{style:e,width:c,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},W.createElement("g",{className:In(["react-flow__connection",f])},W.createElement(q0,{nodeId:s,handleType:u,style:n,type:r,CustomComponent:o,connectionStatus:f})))}function Ep(e,n){return T.useRef(null),fn(),T.useMemo(()=>n(e),[e])}const L0=({nodeTypes:e,edgeTypes:n,onMove:r,onMoveStart:o,onMoveEnd:s,onInit:u,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:y,onNodeContextMenu:b,onSelectionContextMenu:x,onSelectionStart:D,onSelectionEnd:w,connectionLineType:m,connectionLineStyle:C,connectionLineComponent:I,connectionLineContainerStyle:F,selectionKeyCode:j,selectionOnDrag:q,selectionMode:Y,multiSelectionKeyCode:ne,panActivationKeyCode:O,zoomActivationKeyCode:V,deleteKeyCode:J,onlyRenderVisibleElements:ee,elementsSelectable:Z,selectNodesOnDrag:R,defaultViewport:G,translateExtent:k,minZoom:K,maxZoom:se,preventScrolling:U,defaultMarkerColor:re,zoomOnScroll:ue,zoomOnPinch:de,panOnScroll:le,panOnScrollSpeed:ve,panOnScrollMode:ge,zoomOnDoubleClick:Ee,panOnDrag:Oe,onPaneClick:De,onPaneMouseEnter:Se,onPaneMouseMove:Be,onPaneMouseLeave:Et,onPaneScroll:Qe,onPaneContextMenu:kt,onEdgeContextMenu:et,onEdgeMouseEnter:tt,onEdgeMouseMove:on,onEdgeMouseLeave:ke,onReconnect:we,onReconnectStart:$t,onReconnectEnd:Bt,reconnectRadius:ct,noDragClassName:Ot,noWheelClassName:St,noPanClassName:sn,elevateEdgesOnSelect:Kt,disableKeyboardA11y:wn,nodeOrigin:Mt,nodeExtent:pt,rfId:Vt})=>{const _t=Ep(e,f3),lt=Ep(n,D3);return M3(u),W.createElement(l3,{onPaneClick:De,onPaneMouseEnter:Se,onPaneMouseMove:Be,onPaneMouseLeave:Et,onPaneContextMenu:kt,onPaneScroll:Qe,deleteKeyCode:J,selectionKeyCode:j,selectionOnDrag:q,selectionMode:Y,onSelectionStart:D,onSelectionEnd:w,multiSelectionKeyCode:ne,panActivationKeyCode:O,zoomActivationKeyCode:V,elementsSelectable:Z,onMove:r,onMoveStart:o,onMoveEnd:s,zoomOnScroll:ue,zoomOnPinch:de,zoomOnDoubleClick:Ee,panOnScroll:le,panOnScrollSpeed:ve,panOnScrollMode:ge,panOnDrag:Oe,defaultViewport:G,translateExtent:k,minZoom:K,maxZoom:se,onSelectionContextMenu:x,preventScrolling:U,noDragClassName:Ot,noWheelClassName:St,noPanClassName:sn,disableKeyboardA11y:wn},W.createElement(O3,null,W.createElement(R3,{edgeTypes:lt,onEdgeClick:c,onEdgeDoubleClick:f,onlyRenderVisibleElements:ee,onEdgeContextMenu:et,onEdgeMouseEnter:tt,onEdgeMouseMove:on,onEdgeMouseLeave:ke,onReconnect:we,onReconnectStart:$t,onReconnectEnd:Bt,reconnectRadius:ct,defaultMarkerColor:re,noPanClassName:sn,elevateEdgesOnSelect:!!Kt,disableKeyboardA11y:wn,rfId:Vt},W.createElement(j3,{style:C,type:m,component:I,containerStyle:F})),W.createElement("div",{className:"react-flow__edgelabel-renderer"}),W.createElement(g3,{nodeTypes:_t,onNodeClick:l,onNodeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:y,onNodeContextMenu:b,selectNodesOnDrag:R,onlyRenderVisibleElements:ee,noPanClassName:sn,noDragClassName:Ot,disableKeyboardA11y:wn,nodeOrigin:Mt,nodeExtent:pt,rfId:Vt})))};L0.displayName="GraphView";var k3=T.memo(L0);const Xl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ai={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Xl,nodeExtent:Xl,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:yo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:fA,isValidConnection:void 0},$3=()=>EC((e,n)=>({...Ai,setNodes:r=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:u}=n();e({nodeInternals:tl(r,o,s,u)})},getNodes:()=>Array.from(n().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:o={}}=n();e({edges:r.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(r,o)=>{const s=typeof r<"u",u=typeof o<"u",l=s?tl(r,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;e({nodeInternals:l,edges:u?o:[],hasDefaultNodes:s,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:u,fitViewOnInitDone:l,fitViewOnInitOptions:c,domNode:d,nodeOrigin:f}=n(),p=d?.querySelector(".react-flow__viewport");if(!p)return;const g=window.getComputedStyle(p),{m22:y}=new window.DOMMatrixReadOnly(g.transform),b=r.reduce((D,w)=>{const m=s.get(w.id);if(m?.hidden)s.set(m.id,{...m,[jt]:{...m[jt],handleBounds:void 0}});else if(m){const C=gd(w.nodeElement);!!(C.width&&C.height&&(m.width!==C.width||m.height!==C.height||w.forceUpdate))&&(s.set(m.id,{...m,[jt]:{...m[jt],handleBounds:{source:vp(".source",w.nodeElement,y,f),target:vp(".target",w.nodeElement,y,f)}},...C}),D.push({id:m.id,type:"dimensions",dimensions:C}))}return D},[]);F0(s,f);const x=l||u&&!l&&N0(n,{initial:!0,...c});e({nodeInternals:new Map(s),fitViewOnInitDone:x}),b?.length>0&&o?.(b)},updateNodePositions:(r,o=!0,s=!1)=>{const{triggerNodeChanges:u}=n(),l=r.map(c=>{const d={id:c.id,type:"position",dragging:s};return o&&(d.positionAbsolute=c.positionAbsolute,d.position=c.position),d});u(l)},triggerNodeChanges:r=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:u,nodeOrigin:l,getNodes:c,elevateNodesOnSelect:d}=n();if(r?.length){if(u){const f=I0(r,c()),p=tl(f,s,l,d);e({nodeInternals:p})}o?.(r)}},addSelectedNodes:r=>{const{multiSelectionActive:o,edges:s,getNodes:u}=n();let l,c=null;o?l=r.map(d=>Ni(d,!0)):(l=Ko(u(),r),c=Ko(s,[])),ru({changedNodes:l,changedEdges:c,get:n,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:o,edges:s,getNodes:u}=n();let l,c=null;o?l=r.map(d=>Ni(d,!0)):(l=Ko(s,r),c=Ko(u(),[])),ru({changedNodes:c,changedEdges:l,get:n,set:e})},unselectNodesAndEdges:({nodes:r,edges:o}={})=>{const{edges:s,getNodes:u}=n(),l=r||u(),c=o||s,d=l.map(p=>(p.selected=!1,Ni(p.id,!1))),f=c.map(p=>Ni(p.id,!1));ru({changedNodes:d,changedEdges:f,get:n,set:e})},setMinZoom:r=>{const{d3Zoom:o,maxZoom:s}=n();o?.scaleExtent([r,s]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:o,minZoom:s}=n();o?.scaleExtent([s,r]),e({maxZoom:r})},setTranslateExtent:r=>{n().d3Zoom?.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:o}=n(),u=o().filter(c=>c.selected).map(c=>Ni(c.id,!1)),l=r.filter(c=>c.selected).map(c=>Ni(c.id,!1));ru({changedNodes:u,changedEdges:l,get:n,set:e})},setNodeExtent:r=>{const{nodeInternals:o}=n();o.forEach(s=>{s.positionAbsolute=md(s.position,r)}),e({nodeExtent:r,nodeInternals:new Map(o)})},panBy:r=>{const{transform:o,width:s,height:u,d3Zoom:l,d3Selection:c,translateExtent:d}=n();if(!l||!c||!r.x&&!r.y)return!1;const f=Ri.translate(o[0]+r.x,o[1]+r.y).scale(o[2]),p=[[0,0],[s,u]],g=l?.constrain()(f,p,d);return l.transform(c,g),o[0]!==g.x||o[1]!==g.y||o[2]!==g.k},cancelConnection:()=>e({connectionNodeId:Ai.connectionNodeId,connectionHandleId:Ai.connectionHandleId,connectionHandleType:Ai.connectionHandleType,connectionStatus:Ai.connectionStatus,connectionStartHandle:Ai.connectionStartHandle,connectionEndHandle:Ai.connectionEndHandle}),reset:()=>e({...Ai})}),Object.is),Fd=({children:e})=>{const n=T.useRef(null);return n.current||(n.current=$3()),W.createElement(iA,{value:n.current},e)};Fd.displayName="ReactFlowProvider";const H0=({children:e})=>T.useContext(qu)?W.createElement(W.Fragment,null,e):W.createElement(Fd,null,e);H0.displayName="ReactFlowWrapper";const q3={input:b0,default:Ul,output:x0,group:Ed},L3={default:Tu,straight:_d,step:Dd,smoothstep:Lu,simplebezier:vd},H3=[0,0],G3=[15,15],V3={x:0,y:0,zoom:1},U3={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},G0=T.forwardRef(({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,className:s,nodeTypes:u=q3,edgeTypes:l=L3,onNodeClick:c,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:g,onMoveEnd:y,onConnect:b,onConnectStart:x,onConnectEnd:D,onClickConnectStart:w,onClickConnectEnd:m,onNodeMouseEnter:C,onNodeMouseMove:I,onNodeMouseLeave:F,onNodeContextMenu:j,onNodeDoubleClick:q,onNodeDragStart:Y,onNodeDrag:ne,onNodeDragStop:O,onNodesDelete:V,onEdgesDelete:J,onSelectionChange:ee,onSelectionDragStart:Z,onSelectionDrag:R,onSelectionDragStop:G,onSelectionContextMenu:k,onSelectionStart:K,onSelectionEnd:se,connectionMode:U=yo.Strict,connectionLineType:re=Ti.Bezier,connectionLineStyle:ue,connectionLineComponent:de,connectionLineContainerStyle:le,deleteKeyCode:ve="Backspace",selectionKeyCode:ge="Shift",selectionOnDrag:Ee=!1,selectionMode:Oe=ls.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Se=Nu()?"Meta":"Control",zoomActivationKeyCode:Be=Nu()?"Meta":"Control",snapToGrid:Et=!1,snapGrid:Qe=G3,onlyRenderVisibleElements:kt=!1,selectNodesOnDrag:et=!0,nodesDraggable:tt,nodesConnectable:on,nodesFocusable:ke,nodeOrigin:we=H3,edgesFocusable:$t,edgesUpdatable:Bt,elementsSelectable:ct,defaultViewport:Ot=V3,minZoom:St=.5,maxZoom:sn=2,translateExtent:Kt=Xl,preventScrolling:wn=!0,nodeExtent:Mt,defaultMarkerColor:pt="#b1b1b7",zoomOnScroll:Vt=!0,zoomOnPinch:_t=!0,panOnScroll:lt=!1,panOnScrollSpeed:Pt=.5,panOnScrollMode:hn=po.Free,zoomOnDoubleClick:an=!0,panOnDrag:bt=!0,onPaneClick:At,onPaneMouseEnter:Jt,onPaneMouseMove:Qn,onPaneMouseLeave:un,onPaneScroll:xn,onPaneContextMenu:gn,children:H,onEdgeContextMenu:Q,onEdgeDoubleClick:pe,onEdgeMouseEnter:Fe,onEdgeMouseMove:dt,onEdgeMouseLeave:Ke,onEdgeUpdate:Ft,onEdgeUpdateStart:wt,onEdgeUpdateEnd:Ut,onReconnect:Rn,onReconnectStart:qt,onReconnectEnd:Wt,reconnectRadius:Bn=10,edgeUpdaterRadius:On=10,onNodesChange:Hn,onEdgesChange:zi,noDragClassName:ji="nodrag",noWheelClassName:ki="nowheel",noPanClassName:fi="nopan",fitView:er=!1,fitViewOptions:mn,connectOnClick:$i=!0,attributionPosition:qi,proOptions:Li,defaultEdgeOptions:Hi,elevateNodesOnSelect:Gi=!0,elevateEdgesOnSelect:Cn=!1,disableKeyboardA11y:fr=!1,autoPanOnConnect:Fr=!0,autoPanOnNodeDrag:tr=!0,connectionRadius:Vi=20,isValidConnection:Nr,onError:hr,style:hi,id:jr,nodeDragThreshold:En,...pi},Ui)=>{const kr=jr||"1";return W.createElement("div",{...pi,style:{...hi,...U3},ref:Ui,className:In(["react-flow",s]),"data-testid":"rf__wrapper",id:jr},W.createElement(H0,null,W.createElement(k3,{onInit:f,onMove:p,onMoveStart:g,onMoveEnd:y,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:C,onNodeMouseMove:I,onNodeMouseLeave:F,onNodeContextMenu:j,onNodeDoubleClick:q,nodeTypes:u,edgeTypes:l,connectionLineType:re,connectionLineStyle:ue,connectionLineComponent:de,connectionLineContainerStyle:le,selectionKeyCode:ge,selectionOnDrag:Ee,selectionMode:Oe,deleteKeyCode:ve,multiSelectionKeyCode:Se,panActivationKeyCode:De,zoomActivationKeyCode:Be,onlyRenderVisibleElements:kt,selectNodesOnDrag:et,defaultViewport:Ot,translateExtent:Kt,minZoom:St,maxZoom:sn,preventScrolling:wn,zoomOnScroll:Vt,zoomOnPinch:_t,zoomOnDoubleClick:an,panOnScroll:lt,panOnScrollSpeed:Pt,panOnScrollMode:hn,panOnDrag:bt,onPaneClick:At,onPaneMouseEnter:Jt,onPaneMouseMove:Qn,onPaneMouseLeave:un,onPaneScroll:xn,onPaneContextMenu:gn,onSelectionContextMenu:k,onSelectionStart:K,onSelectionEnd:se,onEdgeContextMenu:Q,onEdgeDoubleClick:pe,onEdgeMouseEnter:Fe,onEdgeMouseMove:dt,onEdgeMouseLeave:Ke,onReconnect:Rn??Ft,onReconnectStart:qt??wt,onReconnectEnd:Wt??Ut,reconnectRadius:Bn??On,defaultMarkerColor:pt,noDragClassName:ji,noWheelClassName:ki,noPanClassName:fi,elevateEdgesOnSelect:Cn,rfId:kr,disableKeyboardA11y:fr,nodeOrigin:we,nodeExtent:Mt}),W.createElement(PA,{nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:b,onConnectStart:x,onConnectEnd:D,onClickConnectStart:w,onClickConnectEnd:m,nodesDraggable:tt,nodesConnectable:on,nodesFocusable:ke,edgesFocusable:$t,edgesUpdatable:Bt,elementsSelectable:ct,elevateNodesOnSelect:Gi,minZoom:St,maxZoom:sn,nodeExtent:Mt,onNodesChange:Hn,onEdgesChange:zi,snapToGrid:Et,snapGrid:Qe,connectionMode:U,translateExtent:Kt,connectOnClick:$i,defaultEdgeOptions:Hi,fitView:er,fitViewOptions:mn,onNodesDelete:V,onEdgesDelete:J,onNodeDragStart:Y,onNodeDrag:ne,onNodeDragStop:O,onSelectionDrag:R,onSelectionDragStart:Z,onSelectionDragStop:G,noPanClassName:fi,nodeOrigin:we,rfId:kr,autoPanOnConnect:Fr,autoPanOnNodeDrag:tr,onError:hr,connectionRadius:Vi,isValidConnection:Nr,nodeDragThreshold:En}),W.createElement(OA,{onSelectionChange:ee}),H,W.createElement(sA,{proOptions:Li,position:qi}),W.createElement(qA,{rfId:kr,disableKeyboardA11y:fr})))});G0.displayName="ReactFlow";const W3=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function X3({children:e}){const n=It(W3);return n?tg.createPortal(e,n):null}function V0(e){return n=>{const[r,o]=T.useState(n),s=T.useCallback(u=>o(l=>e(u,l)),[]);return[r,o,s]}}const Y3=V0(I0),Z3=V0(t3);function K3(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},W.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function J3(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},W.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Q3(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},W.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function e6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function t6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Jo=({children:e,className:n,...r})=>W.createElement("button",{type:"button",className:In(["react-flow__controls-button",n]),...r},e);Jo.displayName="ControlButton";const n6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),U0=({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:u,onZoomOut:l,onFitView:c,onInteractiveChange:d,className:f,children:p,position:g="bottom-left"})=>{const y=fn(),[b,x]=T.useState(!1),{isInteractive:D,minZoomReached:w,maxZoomReached:m}=It(n6,_n),{zoomIn:C,zoomOut:I,fitView:F}=Sd();if(T.useEffect(()=>{x(!0)},[]),!b)return null;const j=()=>{C(),u?.()},q=()=>{I(),l?.()},Y=()=>{F(s),c?.()},ne=()=>{y.setState({nodesDraggable:!D,nodesConnectable:!D,elementsSelectable:!D}),d?.(!D)};return W.createElement(n0,{className:In(["react-flow__controls",f]),position:g,style:e,"data-testid":"rf__controls"},n&&W.createElement(W.Fragment,null,W.createElement(Jo,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},W.createElement(K3,null)),W.createElement(Jo,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},W.createElement(J3,null))),r&&W.createElement(Jo,{className:"react-flow__controls-fitview",onClick:Y,title:"fit view","aria-label":"fit view"},W.createElement(Q3,null)),o&&W.createElement(Jo,{className:"react-flow__controls-interactive",onClick:ne,title:"toggle interactivity","aria-label":"toggle interactivity"},D?W.createElement(t6,null):W.createElement(e6,null)),p)};U0.displayName="Controls";var r6=T.memo(U0),Er;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Er||(Er={}));function i6({color:e,dimensions:n,lineWidth:r}){return W.createElement("path",{stroke:e,strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function o6({color:e,radius:n}){return W.createElement("circle",{cx:n,cy:n,r:n,fill:e})}const s6={[Er.Dots]:"#91919a",[Er.Lines]:"#eee",[Er.Cross]:"#e2e2e2"},a6={[Er.Dots]:1,[Er.Lines]:1,[Er.Cross]:6},u6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function W0({id:e,variant:n=Er.Dots,gap:r=20,size:o,lineWidth:s=1,offset:u=2,color:l,style:c,className:d}){const f=T.useRef(null),{transform:p,patternId:g}=It(u6,_n),y=l||s6[n],b=o||a6[n],x=n===Er.Dots,D=n===Er.Cross,w=Array.isArray(r)?r:[r,r],m=[w[0]*p[2]||1,w[1]*p[2]||1],C=b*p[2],I=D?[C,C]:m,F=x?[C/u,C/u]:[I[0]/u,I[1]/u];return W.createElement("svg",{className:In(["react-flow__background",d]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},W.createElement("pattern",{id:g+e,x:p[0]%m[0],y:p[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},x?W.createElement(o6,{color:y,radius:C/u}):W.createElement(i6,{dimensions:I,color:y,lineWidth:s})),W.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}W0.displayName="Background";var c6=T.memo(W0);const qn=Symbol("private"),l6=e=>({id:e?.id,sourceId:e?.source,type:e?.type,targetId:e?.target,name:e?.label,sourceHandle:e.sourceHandle??void 0,targetHandle:e.targetHandle??void 0}),Yl=e=>({id:e.id,type:e.type,position:e.position,height:e[qn]?.dimensions?.height,width:e[qn]?.dimensions?.width,selected:e[qn]?.selected,data:{name:e.name,kind:e?.content?.kind}}),Hs=e=>e.map(Yl),Zl=e=>({id:e.id,source:e.sourceId,type:e?.type||"edge",target:e.targetId,label:e.name,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,markerEnd:{type:na.ArrowClosed,width:20,height:20}}),Kl=e=>e.filter(n=>n.sourceId&&n.targetId).map(Zl);var vt=(e=>(e[e.Input=0]="Input",e[e.Output=1]="Output",e[e.InferredInput=2]="InferredInput",e[e.InferredOutput=3]="InferredOutput",e))(vt||{});const fs=W.createContext({}),X0=e=>{const{children:n}=e,r=T.useMemo(()=>Uc()(()=>({id:void 0,simulate:void 0,decisionGraph:{nodes:[],edges:[]},hoveredEdgeId:null,openTabs:[],activeTab:"graph",name:"graph.json",disabled:!1,configurable:!0,components:[],customNodes:[],activePanel:void 0,panels:[],compactMode:localStorage.getItem("jdm-compact-mode")==="true",nodeTypes:{},globalType:{}})),[]),o=T.useMemo(()=>Uc(()=>({onChange:void 0,onPanelsChange:void 0})),[]),s=T.useMemo(()=>Uc(()=>({nodesState:T.createRef(),edgesState:T.createRef(),graphClipboard:T.createRef(),reactFlowInstance:T.createRef()})),[]),u=T.useMemo(()=>({handleNodesChange:(c=[])=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState(),[,,p]=d.current;let g=!1;p?.(c);const y=Tt(f,b=>{c.forEach(x=>Ue(x).with({type:"position"},D=>{const w=b.nodes.find(m=>m.id===D.id);w&&D.position&&!Kn(w.position,D.position)&&(g=!0,w.position=D.position)}).with({type:"dimensions"},D=>{const w=b.nodes.find(m=>m.id===D.id);w&&!Kn(w[qn]?.dimensions,D.dimensions)&&(g=!0,w[qn]??={},w[qn].dimensions={height:D.dimensions?.height,width:D.dimensions?.width})}).with({type:"select"},D=>{const w=b.nodes.find(m=>m.id===D.id);w&&w[qn]?.selected!==D.selected&&(g=!0,w[qn]??={},w[qn].selected=D.selected)}).otherwise(()=>{}))});g&&(r.setState({decisionGraph:y}),o.getState().onChange?.(y))},handleEdgesChange:(c=[])=>{const{decisionGraph:d}=r.getState(),{edgesState:f}=s.getState();if(f?.current?.[2](c),c.find(p=>p.type==="remove")){const p=Tt(d,g=>{const y=(g.edges||[]).map(b=>c.find(D=>"id"in D&&D.id===b.id)?.type==="remove"?null:b).filter(b=>!!b);g.edges=y});r.setState({decisionGraph:p}),o.getState().onChange?.(p)}},setNodes:(c=[])=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1](Hs(c));const p=Tt(f,g=>{g.nodes=c});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},addNodes:c=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState();d.current[0]?.some(y=>y.type===Dt.Input)&&(c=c.filter(y=>y.type!==Dt.Input)),d.current[1]?.(y=>y.concat(Hs(c)));const g=Tt(f,y=>{y.nodes=(y.nodes||[]).concat(c)});r.setState({decisionGraph:g}),o.getState().onChange?.(g)},duplicateNodes:c=>{const{nodesState:d,edgesState:f}=s.getState(),{decisionGraph:p}=r.getState();let g=(p?.nodes||[]).filter(C=>c.includes(C.id));if(d.current[0]?.some(C=>C.type===Dt.Input)&&(g=g.filter(C=>C.type!==Dt.Input)),g.length===0)return;const b=g.reduce((C,I)=>({...C,[I.id]:crypto.randomUUID()}),{}),x=g.map(C=>({...C,id:b[C.id],position:{x:C.position?.x||0,y:(C.position?.y||0)+140}})),D=Object.keys(b),w=[];x.length>0&&(f.current?.[0]||[]).forEach(C=>{D.includes(C.source)&&D.includes(C.target)&&w.push({id:crypto.randomUUID(),type:C.type,sourceId:b[C.source],targetId:b[C.target],sourceHandle:C.sourceHandle??void 0,targetHandle:C.targetHandle??void 0})}),d.current[1]?.(C=>C.concat(x.map(Yl))),f.current[1]?.(C=>C.concat(w.map(Zl)));const m=Tt(p,C=>{C.nodes.push(...x),C.edges.push(...w)});r.setState({decisionGraph:m}),o.getState().onChange?.(m)},copyNodes:c=>{const{graphClipboard:d,nodesState:f}=s.getState();if(!d.current||!f.current)return;const[p]=f.current,g=p.filter(y=>c.includes(y.id));d.current.copyNodes(g)},pasteNodes:()=>{const{graphClipboard:c}=s.getState();c.current?.pasteNodes?.()},removeNodes:(c=[])=>{const{nodesState:d,edgesState:f}=s.getState(),{decisionGraph:p,nodeTypes:g}=r.getState();d.current[1]?.(x=>x.filter(D=>c.every(w=>D.id!==w))),f.current[1]?.(x=>x.filter(D=>c.every(w=>D.source!==w&&D.target!==w&&D.sourceHandle!==w&&D.targetHandle!==w)));const y=Tt(p,x=>{const D=x.nodes||[],w=x.edges||[];x.nodes=D.filter(m=>c.every(C=>m.id!==C)),x.edges=w.filter(m=>c.every(C=>m.sourceId!==C&&m.targetId!==C&&m.sourceHandle!==C&&m.targetHandle!==C))}),b=Tt(g,x=>{c.forEach(D=>{D in x&&delete x[D]})});r.setState({decisionGraph:y,nodeTypes:b}),o.getState().onChange?.(y)},addEdges:c=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d.current?.[1]?.(g=>g.concat(c.map(Zl)));const p=Tt(f,g=>{g.edges=(g.edges||[]).concat(c)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},setEdges:(c=[])=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(Kl(c));const p=Tt(f,g=>{g.edges=c});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdges:c=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(g=>g.filter(y=>!c.find(b=>y.id===b)));const p=Tt(f,g=>{g.edges=g.edges.filter(y=>!c.find(b=>y.id===b))});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdgeByHandleId:c=>{if(!c)return;const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(g=>g.filter(y=>y.sourceHandle!==c));const p=Tt(f,g=>{g.edges=g.edges.filter(y=>y.sourceHandle!==c)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},updateNode:(c,d)=>{const{decisionGraph:f}=r.getState(),{nodesState:p}=s.getState(),[g,y]=p.current,b=Tt(f,m=>{const C=(m.nodes??[]).find(I=>I?.id===c);C&&d(C)}),x=b.nodes.find(m=>m.id===c);if(!x)return;const D=Yl(x),w=g.find(m=>m.id===c);Kn(D,w)||y(m=>m.map(C=>C.id===c?D:C)),r.setState({decisionGraph:b}),o.getState().onChange?.(b)},setDecisionGraph:(c,d={})=>{const{decisionGraph:f}=r.getState(),{edgesState:p,nodesState:g}=s.getState(),{skipOnChangeEvent:y=!1}=d,b=Tt(f,x=>{Object.assign(x,c)});p?.current?.[1](Kl(b?.edges??[])),g?.current?.[1](Hs(b?.nodes??[])),r.setState({decisionGraph:b}),y||o.getState().onChange?.(b)},setHoveredEdgeId:c=>r.setState({hoveredEdgeId:c}),goToNode:c=>{if(r.getState().activeTab!=="graph")return;const{reactFlowInstance:d}=s.getState();if(!d.current)return;const f=d.current.getNode(c);f&&d.current.fitView({nodes:[f],duration:1e3,maxZoom:1.25})},openTab:c=>{const{openTabs:d}=r.getState(),f=d.find(p=>p===c);if(c==="graph")return r.setState({activeTab:c});f?r.setState({activeTab:f}):r.setState({openTabs:[...d,c],activeTab:c})},closeTab:(c,d)=>{const{openTabs:f,activeTab:p}=r.getState(),g=f?.findIndex(w=>w===c),y=f?.[g],b=Ue(d).with(void 0,()=>f.filter(w=>w!==y)).with("close",()=>f.filter(w=>w!==y)).with("close-all",()=>[]).with("close-other",()=>f.filter(w=>w===y)).with("close-right",()=>f.slice(0,g+1)).with("close-left",()=>f.slice(g)).otherwise(()=>f),x={openTabs:b};b?.find(w=>w===p)||(x.activeTab=b?.[g-1]??"graph"),r.setState(x)},setActivePanel:c=>{const{panels:d}=r.getState(),f={activePanel:c===void 0?void 0:(d||[]).find(p=>p.id===c)?.id};o.getState()?.onPanelsChange?.(c),r.setState(f)},setCompactMode:c=>{const d={compactMode:c};localStorage.setItem("jdm-compact-mode",`${c}`),r.setState(d)},toggleCompactMode:()=>{const{compactMode:c}=r.getState(),d=!c,f={compactMode:d};localStorage.setItem("jdm-compact-mode",`${d}`),r.setState(f)},setNodeType:(c,d,f)=>{const{nodeTypes:p}=r.getState(),g=Tt(p,y=>{y[c]??={},y[c][d]=f});r.setState({nodeTypes:g})},removeNodeType:(c,d)=>{const{nodeTypes:f}=r.getState(),p=Tt(f,g=>{c in g&&(d?d in g[c]&&delete g[c][d]:delete g[c])});r.setState({nodeTypes:p})},triggerNodeSelect:(c,d)=>{const{decisionGraph:f}=r.getState(),{nodesState:p,edgesState:g}=s.getState(),[,y]=p.current,[,b]=g.current,x=Tt(f,D=>{const w=D.nodes.find(m=>m.id===c);w&&(d==="only"&&D.nodes.forEach(m=>{m[qn]&&(m[qn].selected=!1)}),w[qn]??={},w[qn].selected=Ue(d).with("only",()=>!0).otherwise(()=>!w[qn]?.selected))});y(Hs(x.nodes)),d=="only"&&b(D=>D.map(w=>({...w,selected:!1}))),r.setState({decisionGraph:x}),o.getState().onChange?.(x)}}),[]),l=T.useMemo(()=>({stateStore:r,referenceStore:s,listenerStore:o,actions:u}),[r,s,o,u]);return A.jsx(fs.Provider,{value:l,children:n})};function mt(e,n=Kn){return W.useContext(fs).stateStore(e,n)}function Y0(e,n=Kn){return W.useContext(fs).listenerStore(e,n)}function d6(e,n=Kn){return W.useContext(fs).referenceStore(e,n)}function Zt(){return W.useContext(fs).actions}function Do(){return W.useContext(fs)}const ca=e=>{const{diff:n,contentDiff:r}=mt(o=>{const s=(o?.decisionGraph?.nodes??[]).find(u=>u.id===e);return{diff:s?._diff,contentDiff:s?.content?._diff}});return{diff:n,contentDiff:r}},f6=e=>{const{diff:n}=mt(r=>({diff:(r?.decisionGraph?.edges??[]).find(s=>s.id===e)?._diff}));return{diff:n}};X0.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphProvider"};const h6=({id:e,defaultValue:n,value:r,name:o,disabled:s=!1,configurable:u=!0,onChange:l,components:c,customNodes:d,defaultActivePanel:f,panels:p,simulate:g,onPanelsChange:y,onReactFlowInit:b,onCodeExtension:x,onFunctionReady:D})=>{const w=T.useRef(!1),m=Zt(),{stateStore:C,listenerStore:I}=Do(),{decisionGraph:F}=mt(({decisionGraph:q})=>({decisionGraph:q})),j=uw(q=>{l?.(q)},100);return T.useEffect(()=>{C.setState({id:e,disabled:s,configurable:u,components:Array.isArray(c)?c:[],customNodes:Array.isArray(d)?d:[],panels:p})},[e,s,u,c,d,p]),T.useEffect(()=>{C.setState({name:o??"graph.json"})},[o]),T.useEffect(()=>{C.setState({simulate:g})},[g]),T.useEffect(()=>{I.setState({onReactFlowInit:b,onPanelsChange:y,onCodeExtension:x,onFunctionReady:D})},[b,y,x,D]),T.useEffect(()=>{I.setState({onChange:j})},[j]),T.useEffect(()=>{w.current&&r!==void 0&&!Kn(r,F)&&m.setDecisionGraph(r)},[r]),T.useEffect(()=>{r!==void 0?m.setDecisionGraph(r):n!==void 0&&m.setDecisionGraph(n),C.setState({activePanel:f}),w.current=!0},[]),null},p6=()=>{let e=null;return{walk:function*(n){const r=g6(n);if(e&&Kn(r,e.digest)){yield*y6(n,e.iterator);return}const o=[];for(const s of m6(n))o.push({id:s.node.id,incomers:s.incomers.map(u=>u.id)}),yield s;e={digest:r,iterator:o}}}},g6=e=>{const n=e.nodes.map(o=>o.id),r=e.edges;return{nodes:n,edges:r}};function*m6(e){const n=Hs(e.nodes),r=Kl(e.edges),o=e.nodes.find(c=>c.type==="inputNode"),s=n.find(c=>c.id===o?.id);if(!o||!s||v6(s,n,r))return;yield{node:o,incomers:[]};const u=new Set;u.add(o.id);const l=Iu(s,n,r);for(;l.length>0;){const c=l.pop();if(u.has(c.id))continue;const d=bA(c,n,r),f=d.filter(y=>!u.has(y.id));if(f.length>0){l.push(c,...f);continue}u.add(c.id);const p=e.nodes.find(y=>y.id===c.id);if(p){const y=e.nodes.filter(b=>d.some(x=>x.id===b.id));yield{node:p,incomers:y}}const g=Iu(c,n,r);l.push(...g)}}function*y6(e,n){for(const r of n){const o=e.nodes.find(u=>u.id===r.id);if(!o)continue;const s=e.nodes.filter(u=>r.incomers.includes(u.id));yield{node:o,incomers:s}}}const v6=(e,n,r)=>{const o=new Set,s=new Set,u=l=>{o.add(l.id),s.add(l.id);const c=Iu(l,n,r);for(const d of c)if(o.has(d.id)){if(s.has(d.id))return!0}else if(u(d))return!0;return s.delete(l.id),!1};return u(e)};var Gs={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var D6=Gs.exports,Sp;function _6(){return Sp||(Sp=1,function(e,n){(function(){var r,o="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",g=1,y=2,b=4,x=1,D=2,w=1,m=2,C=4,I=8,F=16,j=32,q=64,Y=128,ne=256,O=512,V=30,J="...",ee=800,Z=16,R=1,G=2,k=3,K=1/0,se=9007199254740991,U=17976931348623157e292,re=NaN,ue=4294967295,de=ue-1,le=ue>>>1,ve=[["ary",Y],["bind",w],["bindKey",m],["curry",I],["curryRight",F],["flip",O],["partial",j],["partialRight",q],["rearg",ne]],ge="[object Arguments]",Ee="[object Array]",Oe="[object AsyncFunction]",De="[object Boolean]",Se="[object Date]",Be="[object DOMException]",Et="[object Error]",Qe="[object Function]",kt="[object GeneratorFunction]",et="[object Map]",tt="[object Number]",on="[object Null]",ke="[object Object]",we="[object Promise]",$t="[object Proxy]",Bt="[object RegExp]",ct="[object Set]",Ot="[object String]",St="[object Symbol]",sn="[object Undefined]",Kt="[object WeakMap]",wn="[object WeakSet]",Mt="[object ArrayBuffer]",pt="[object DataView]",Vt="[object Float32Array]",_t="[object Float64Array]",lt="[object Int8Array]",Pt="[object Int16Array]",hn="[object Int32Array]",an="[object Uint8Array]",bt="[object Uint8ClampedArray]",At="[object Uint16Array]",Jt="[object Uint32Array]",Qn=/\b__p \+= '';/g,un=/\b(__p \+=) '' \+/g,xn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gn=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,Q=RegExp(gn.source),pe=RegExp(H.source),Fe=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,Ke=/<%=([\s\S]+?)%>/g,Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wt=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rn=/[\\^$.*+?()[\]{}|]/g,qt=RegExp(Rn.source),Wt=/^\s+/,Bn=/\s/,On=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hn=/\{\n\/\* \[wrapped with (.+)\] \*/,zi=/,? & /,ji=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ki=/[()=,{}\[\]\/\s]/,fi=/\\(\\)?/g,er=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mn=/\w*$/,$i=/^[-+]0x[0-9a-f]+$/i,qi=/^0b[01]+$/i,Li=/^\[object .+?Constructor\]$/,Hi=/^0o[0-7]+$/i,Gi=/^(?:0|[1-9]\d*)$/,Cn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fr=/($^)/,Fr=/['\n\r\u2028\u2029\\]/g,tr="\\ud800-\\udfff",Vi="\\u0300-\\u036f",Nr="\\ufe20-\\ufe2f",hr="\\u20d0-\\u20ff",hi=Vi+Nr+hr,jr="\\u2700-\\u27bf",En="a-z\\xdf-\\xf6\\xf8-\\xff",pi="\\xac\\xb1\\xd7\\xf7",Ui="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kr="\\u2000-\\u206f",ps=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",bo="A-Z\\xc0-\\xd6\\xd8-\\xde",wo="\\ufe0e\\ufe0f",$r=pi+Ui+kr+ps,Wi="[']",qr="["+tr+"]",Xi="["+$r+"]",Lr="["+hi+"]",Hr="\\d+",Yi="["+jr+"]",xo="["+En+"]",Co="[^"+tr+$r+Hr+jr+En+bo+"]",Gr="\\ud83c[\\udffb-\\udfff]",gs="(?:"+Lr+"|"+Gr+")",Eo="[^"+tr+"]",gi="(?:\\ud83c[\\udde6-\\uddff]){2}",pr="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+bo+"]",So="\\u200d",Ao="(?:"+xo+"|"+Co+")",Mn="(?:"+Sn+"|"+Co+")",Fo="(?:"+Wi+"(?:d|ll|m|re|s|t|ve))?",No="(?:"+Wi+"(?:D|LL|M|RE|S|T|VE))?",To=gs+"?",Vr="["+wo+"]?",Zi="(?:"+So+"(?:"+[Eo,gi,pr].join("|")+")"+Vr+To+")*",Gn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Io=Vr+To+Zi,Ur="(?:"+[Yi,gi,pr].join("|")+")"+Io,Ki="(?:"+[Eo+Lr+"?",Lr,gi,pr,qr].join("|")+")",yi=RegExp(Wi,"g"),gr=RegExp(Lr,"g"),nr=RegExp(Gr+"(?="+Gr+")|"+Ki+Io,"g"),Ro=RegExp([Sn+"?"+xo+"+"+Fo+"(?="+[Xi,Sn,"$"].join("|")+")",Mn+"+"+No+"(?="+[Xi,Sn+Ao,"$"].join("|")+")",Sn+"?"+Ao+"+"+Fo,Sn+"+"+No,mi,Gn,Hr,Ur].join("|"),"g"),Ji=RegExp("["+So+tr+hi+wo+"]"),Wr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ms=-1,st={};st[Vt]=st[_t]=st[lt]=st[Pt]=st[hn]=st[an]=st[bt]=st[At]=st[Jt]=!0,st[ge]=st[Ee]=st[Mt]=st[De]=st[pt]=st[Se]=st[Et]=st[Qe]=st[et]=st[tt]=st[ke]=st[Bt]=st[ct]=st[Ot]=st[Kt]=!1;var nt={};nt[ge]=nt[Ee]=nt[Mt]=nt[pt]=nt[De]=nt[Se]=nt[Vt]=nt[_t]=nt[lt]=nt[Pt]=nt[hn]=nt[et]=nt[tt]=nt[ke]=nt[Bt]=nt[ct]=nt[Ot]=nt[St]=nt[an]=nt[bt]=nt[At]=nt[Jt]=!0,nt[Et]=nt[Qe]=nt[Kt]=!1;var B={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},N={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,me=parseInt,Ae=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,Me=typeof self=="object"&&self&&self.Object===Object&&self,_e=Ae||Me||Function("return this")(),Ne=n&&!n.nodeType&&n,Je=Ne&&!0&&e&&!e.nodeType&&e,ft=Je&&Je.exports===Ne,yt=ft&&Ae.process,at=function(){try{var $=Je&&Je.require&&Je.require("util").types;return $||yt&&yt.binding&&yt.binding("util")}catch{}}(),Qt=at&&at.isArrayBuffer,Pn=at&&at.isDate,rr=at&&at.isMap,Tr=at&&at.isRegExp,ys=at&&at.isSet,eo=at&&at.isTypedArray;function cn($,te,X){switch(X.length){case 0:return $.call(te);case 1:return $.call(te,X[0]);case 2:return $.call(te,X[0],X[1]);case 3:return $.call(te,X[0],X[1],X[2])}return $.apply(te,X)}function vm($,te,X,be){for(var Pe=-1,rt=$==null?0:$.length;++Pe<rt;){var en=$[Pe];te(be,en,X(en),$)}return be}function ir($,te){for(var X=-1,be=$==null?0:$.length;++X<be&&te($[X],X,$)!==!1;);return $}function Dm($,te){for(var X=$==null?0:$.length;X--&&te($[X],X,$)!==!1;);return $}function Rd($,te){for(var X=-1,be=$==null?0:$.length;++X<be;)if(!te($[X],X,$))return!1;return!0}function vi($,te){for(var X=-1,be=$==null?0:$.length,Pe=0,rt=[];++X<be;){var en=$[X];te(en,X,$)&&(rt[Pe++]=en)}return rt}function la($,te){var X=$==null?0:$.length;return!!X&&Bo($,te,0)>-1}function Hu($,te,X){for(var be=-1,Pe=$==null?0:$.length;++be<Pe;)if(X(te,$[be]))return!0;return!1}function Nt($,te){for(var X=-1,be=$==null?0:$.length,Pe=Array(be);++X<be;)Pe[X]=te($[X],X,$);return Pe}function Di($,te){for(var X=-1,be=te.length,Pe=$.length;++X<be;)$[Pe+X]=te[X];return $}function Gu($,te,X,be){var Pe=-1,rt=$==null?0:$.length;for(be&&rt&&(X=$[++Pe]);++Pe<rt;)X=te(X,$[Pe],Pe,$);return X}function _m($,te,X,be){var Pe=$==null?0:$.length;for(be&&Pe&&(X=$[--Pe]);Pe--;)X=te(X,$[Pe],Pe,$);return X}function Vu($,te){for(var X=-1,be=$==null?0:$.length;++X<be;)if(te($[X],X,$))return!0;return!1}var bm=Uu("length");function wm($){return $.split("")}function xm($){return $.match(ji)||[]}function Bd($,te,X){var be;return X($,function(Pe,rt,en){if(te(Pe,rt,en))return be=rt,!1}),be}function da($,te,X,be){for(var Pe=$.length,rt=X+(be?1:-1);be?rt--:++rt<Pe;)if(te($[rt],rt,$))return rt;return-1}function Bo($,te,X){return te===te?Mm($,te,X):da($,Od,X)}function Cm($,te,X,be){for(var Pe=X-1,rt=$.length;++Pe<rt;)if(be($[Pe],te))return Pe;return-1}function Od($){return $!==$}function Md($,te){var X=$==null?0:$.length;return X?Xu($,te)/X:re}function Uu($){return function(te){return te==null?r:te[$]}}function Wu($){return function(te){return $==null?r:$[te]}}function Pd($,te,X,be,Pe){return Pe($,function(rt,en,gt){X=be?(be=!1,rt):te(X,rt,en,gt)}),X}function Em($,te){var X=$.length;for($.sort(te);X--;)$[X]=$[X].value;return $}function Xu($,te){for(var X,be=-1,Pe=$.length;++be<Pe;){var rt=te($[be]);rt!==r&&(X=X===r?rt:X+rt)}return X}function Yu($,te){for(var X=-1,be=Array($);++X<$;)be[X]=te(X);return be}function Sm($,te){return Nt(te,function(X){return[X,$[X]]})}function zd($){return $&&$.slice(0,qd($)+1).replace(Wt,"")}function Vn($){return function(te){return $(te)}}function Zu($,te){return Nt(te,function(X){return $[X]})}function vs($,te){return $.has(te)}function jd($,te){for(var X=-1,be=$.length;++X<be&&Bo(te,$[X],0)>-1;);return X}function kd($,te){for(var X=$.length;X--&&Bo(te,$[X],0)>-1;);return X}function Am($,te){for(var X=$.length,be=0;X--;)$[X]===te&&++be;return be}var Fm=Wu(B),Nm=Wu(v);function Tm($){return"\\"+z[$]}function Im($,te){return $==null?r:$[te]}function Oo($){return Ji.test($)}function Rm($){return Wr.test($)}function Bm($){for(var te,X=[];!(te=$.next()).done;)X.push(te.value);return X}function Ku($){var te=-1,X=Array($.size);return $.forEach(function(be,Pe){X[++te]=[Pe,be]}),X}function $d($,te){return function(X){return $(te(X))}}function _i($,te){for(var X=-1,be=$.length,Pe=0,rt=[];++X<be;){var en=$[X];(en===te||en===p)&&($[X]=p,rt[Pe++]=X)}return rt}function fa($){var te=-1,X=Array($.size);return $.forEach(function(be){X[++te]=be}),X}function Om($){var te=-1,X=Array($.size);return $.forEach(function(be){X[++te]=[be,be]}),X}function Mm($,te,X){for(var be=X-1,Pe=$.length;++be<Pe;)if($[be]===te)return be;return-1}function Pm($,te,X){for(var be=X+1;be--;)if($[be]===te)return be;return be}function Mo($){return Oo($)?jm($):bm($)}function mr($){return Oo($)?km($):wm($)}function qd($){for(var te=$.length;te--&&Bn.test($.charAt(te)););return te}var zm=Wu(N);function jm($){for(var te=nr.lastIndex=0;nr.test($);)++te;return te}function km($){return $.match(nr)||[]}function $m($){return $.match(Ro)||[]}var qm=function $(te){te=te==null?_e:Po.defaults(_e.Object(),te,Po.pick(_e,Qi));var X=te.Array,be=te.Date,Pe=te.Error,rt=te.Function,en=te.Math,gt=te.Object,Ju=te.RegExp,Lm=te.String,or=te.TypeError,ha=X.prototype,Hm=rt.prototype,zo=gt.prototype,pa=te["__core-js_shared__"],ga=Hm.toString,ut=zo.hasOwnProperty,Gm=0,Ld=function(){var t=/[^.]+$/.exec(pa&&pa.keys&&pa.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ma=zo.toString,Vm=ga.call(gt),Um=_e._,Wm=Ju("^"+ga.call(ut).replace(Rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ya=ft?te.Buffer:r,bi=te.Symbol,va=te.Uint8Array,Hd=ya?ya.allocUnsafe:r,Da=$d(gt.getPrototypeOf,gt),Gd=gt.create,Vd=zo.propertyIsEnumerable,_a=ha.splice,Ud=bi?bi.isConcatSpreadable:r,Ds=bi?bi.iterator:r,to=bi?bi.toStringTag:r,ba=function(){try{var t=so(gt,"defineProperty");return t({},"",{}),t}catch{}}(),Xm=te.clearTimeout!==_e.clearTimeout&&te.clearTimeout,Ym=be&&be.now!==_e.Date.now&&be.now,Zm=te.setTimeout!==_e.setTimeout&&te.setTimeout,wa=en.ceil,xa=en.floor,Qu=gt.getOwnPropertySymbols,Km=ya?ya.isBuffer:r,Wd=te.isFinite,Jm=ha.join,Qm=$d(gt.keys,gt),tn=en.max,yn=en.min,ey=be.now,ty=te.parseInt,Xd=en.random,ny=ha.reverse,ec=so(te,"DataView"),_s=so(te,"Map"),tc=so(te,"Promise"),jo=so(te,"Set"),bs=so(te,"WeakMap"),ws=so(gt,"create"),Ca=bs&&new bs,ko={},ry=ao(ec),iy=ao(_s),oy=ao(tc),sy=ao(jo),ay=ao(bs),Ea=bi?bi.prototype:r,xs=Ea?Ea.valueOf:r,Yd=Ea?Ea.toString:r;function E(t){if(zt(t)&&!ze(t)&&!(t instanceof Xe)){if(t instanceof sr)return t;if(ut.call(t,"__wrapped__"))return Kf(t)}return new sr(t)}var $o=function(){function t(){}return function(i){if(!Rt(i))return{};if(Gd)return Gd(i);t.prototype=i;var a=new t;return t.prototype=r,a}}();function Sa(){}function sr(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}E.templateSettings={escape:Fe,evaluate:dt,interpolate:Ke,variable:"",imports:{_:E}},E.prototype=Sa.prototype,E.prototype.constructor=E,sr.prototype=$o(Sa.prototype),sr.prototype.constructor=sr;function Xe(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ue,this.__views__=[]}function uy(){var t=new Xe(this.__wrapped__);return t.__actions__=zn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=zn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=zn(this.__views__),t}function cy(){if(this.__filtered__){var t=new Xe(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function ly(){var t=this.__wrapped__.value(),i=this.__dir__,a=ze(t),h=i<0,_=a?t.length:0,S=w1(0,_,this.__views__),M=S.start,P=S.end,L=P-M,ie=h?P:M-1,oe=this.__iteratees__,ce=oe.length,ye=0,xe=yn(L,this.__takeCount__);if(!a||!h&&_==L&&xe==L)return _f(t,this.__actions__);var Ie=[];e:for(;L--&&ye<xe;){ie+=i;for(var qe=-1,Re=t[ie];++qe<ce;){var We=oe[qe],Ze=We.iteratee,Xn=We.type,Nn=Ze(Re);if(Xn==G)Re=Nn;else if(!Nn){if(Xn==R)continue e;break e}}Ie[ye++]=Re}return Ie}Xe.prototype=$o(Sa.prototype),Xe.prototype.constructor=Xe;function no(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function dy(){this.__data__=ws?ws(null):{},this.size=0}function fy(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function hy(t){var i=this.__data__;if(ws){var a=i[t];return a===d?r:a}return ut.call(i,t)?i[t]:r}function py(t){var i=this.__data__;return ws?i[t]!==r:ut.call(i,t)}function gy(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=ws&&i===r?d:i,this}no.prototype.clear=dy,no.prototype.delete=fy,no.prototype.get=hy,no.prototype.has=py,no.prototype.set=gy;function Xr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function my(){this.__data__=[],this.size=0}function yy(t){var i=this.__data__,a=Aa(i,t);if(a<0)return!1;var h=i.length-1;return a==h?i.pop():_a.call(i,a,1),--this.size,!0}function vy(t){var i=this.__data__,a=Aa(i,t);return a<0?r:i[a][1]}function Dy(t){return Aa(this.__data__,t)>-1}function _y(t,i){var a=this.__data__,h=Aa(a,t);return h<0?(++this.size,a.push([t,i])):a[h][1]=i,this}Xr.prototype.clear=my,Xr.prototype.delete=yy,Xr.prototype.get=vy,Xr.prototype.has=Dy,Xr.prototype.set=_y;function Yr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function by(){this.size=0,this.__data__={hash:new no,map:new(_s||Xr),string:new no}}function wy(t){var i=ka(this,t).delete(t);return this.size-=i?1:0,i}function xy(t){return ka(this,t).get(t)}function Cy(t){return ka(this,t).has(t)}function Ey(t,i){var a=ka(this,t),h=a.size;return a.set(t,i),this.size+=a.size==h?0:1,this}Yr.prototype.clear=by,Yr.prototype.delete=wy,Yr.prototype.get=xy,Yr.prototype.has=Cy,Yr.prototype.set=Ey;function ro(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new Yr;++i<a;)this.add(t[i])}function Sy(t){return this.__data__.set(t,d),this}function Ay(t){return this.__data__.has(t)}ro.prototype.add=ro.prototype.push=Sy,ro.prototype.has=Ay;function yr(t){var i=this.__data__=new Xr(t);this.size=i.size}function Fy(){this.__data__=new Xr,this.size=0}function Ny(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}function Ty(t){return this.__data__.get(t)}function Iy(t){return this.__data__.has(t)}function Ry(t,i){var a=this.__data__;if(a instanceof Xr){var h=a.__data__;if(!_s||h.length<s-1)return h.push([t,i]),this.size=++a.size,this;a=this.__data__=new Yr(h)}return a.set(t,i),this.size=a.size,this}yr.prototype.clear=Fy,yr.prototype.delete=Ny,yr.prototype.get=Ty,yr.prototype.has=Iy,yr.prototype.set=Ry;function Zd(t,i){var a=ze(t),h=!a&&uo(t),_=!a&&!h&&Si(t),S=!a&&!h&&!_&&Go(t),M=a||h||_||S,P=M?Yu(t.length,Lm):[],L=P.length;for(var ie in t)(i||ut.call(t,ie))&&!(M&&(ie=="length"||_&&(ie=="offset"||ie=="parent")||S&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||Qr(ie,L)))&&P.push(ie);return P}function Kd(t){var i=t.length;return i?t[fc(0,i-1)]:r}function By(t,i){return $a(zn(t),io(i,0,t.length))}function Oy(t){return $a(zn(t))}function nc(t,i,a){(a!==r&&!vr(t[i],a)||a===r&&!(i in t))&&Zr(t,i,a)}function Cs(t,i,a){var h=t[i];(!(ut.call(t,i)&&vr(h,a))||a===r&&!(i in t))&&Zr(t,i,a)}function Aa(t,i){for(var a=t.length;a--;)if(vr(t[a][0],i))return a;return-1}function My(t,i,a,h){return wi(t,function(_,S,M){i(h,_,a(_),M)}),h}function Jd(t,i){return t&&Rr(i,ln(i),t)}function Py(t,i){return t&&Rr(i,kn(i),t)}function Zr(t,i,a){i=="__proto__"&&ba?ba(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function rc(t,i){for(var a=-1,h=i.length,_=X(h),S=t==null;++a<h;)_[a]=S?r:zc(t,i[a]);return _}function io(t,i,a){return t===t&&(a!==r&&(t=t<=a?t:a),i!==r&&(t=t>=i?t:i)),t}function ar(t,i,a,h,_,S){var M,P=i&g,L=i&y,ie=i&b;if(a&&(M=_?a(t,h,_,S):a(t)),M!==r)return M;if(!Rt(t))return t;var oe=ze(t);if(oe){if(M=C1(t),!P)return zn(t,M)}else{var ce=vn(t),ye=ce==Qe||ce==kt;if(Si(t))return xf(t,P);if(ce==ke||ce==ge||ye&&!_){if(M=L||ye?{}:Lf(t),!P)return L?h1(t,Py(M,t)):f1(t,Jd(M,t))}else{if(!nt[ce])return _?t:{};M=E1(t,ce,P)}}S||(S=new yr);var xe=S.get(t);if(xe)return xe;S.set(t,M),yh(t)?t.forEach(function(Re){M.add(ar(Re,i,a,Re,t,S))}):gh(t)&&t.forEach(function(Re,We){M.set(We,ar(Re,i,a,We,t,S))});var Ie=ie?L?xc:wc:L?kn:ln,qe=oe?r:Ie(t);return ir(qe||t,function(Re,We){qe&&(We=Re,Re=t[We]),Cs(M,We,ar(Re,i,a,We,t,S))}),M}function zy(t){var i=ln(t);return function(a){return Qd(a,t,i)}}function Qd(t,i,a){var h=a.length;if(t==null)return!h;for(t=gt(t);h--;){var _=a[h],S=i[_],M=t[_];if(M===r&&!(_ in t)||!S(M))return!1}return!0}function ef(t,i,a){if(typeof t!="function")throw new or(l);return Is(function(){t.apply(r,a)},i)}function Es(t,i,a,h){var _=-1,S=la,M=!0,P=t.length,L=[],ie=i.length;if(!P)return L;a&&(i=Nt(i,Vn(a))),h?(S=Hu,M=!1):i.length>=s&&(S=vs,M=!1,i=new ro(i));e:for(;++_<P;){var oe=t[_],ce=a==null?oe:a(oe);if(oe=h||oe!==0?oe:0,M&&ce===ce){for(var ye=ie;ye--;)if(i[ye]===ce)continue e;L.push(oe)}else S(i,ce,h)||L.push(oe)}return L}var wi=Ff(Ir),tf=Ff(oc,!0);function jy(t,i){var a=!0;return wi(t,function(h,_,S){return a=!!i(h,_,S),a}),a}function Fa(t,i,a){for(var h=-1,_=t.length;++h<_;){var S=t[h],M=i(S);if(M!=null&&(P===r?M===M&&!Wn(M):a(M,P)))var P=M,L=S}return L}function ky(t,i,a,h){var _=t.length;for(a=$e(a),a<0&&(a=-a>_?0:_+a),h=h===r||h>_?_:$e(h),h<0&&(h+=_),h=a>h?0:Dh(h);a<h;)t[a++]=i;return t}function nf(t,i){var a=[];return wi(t,function(h,_,S){i(h,_,S)&&a.push(h)}),a}function pn(t,i,a,h,_){var S=-1,M=t.length;for(a||(a=A1),_||(_=[]);++S<M;){var P=t[S];i>0&&a(P)?i>1?pn(P,i-1,a,h,_):Di(_,P):h||(_[_.length]=P)}return _}var ic=Nf(),rf=Nf(!0);function Ir(t,i){return t&&ic(t,i,ln)}function oc(t,i){return t&&rf(t,i,ln)}function Na(t,i){return vi(i,function(a){return ei(t[a])})}function oo(t,i){i=Ci(i,t);for(var a=0,h=i.length;t!=null&&a<h;)t=t[Br(i[a++])];return a&&a==h?t:r}function of(t,i,a){var h=i(t);return ze(t)?h:Di(h,a(t))}function An(t){return t==null?t===r?sn:on:to&&to in gt(t)?b1(t):O1(t)}function sc(t,i){return t>i}function $y(t,i){return t!=null&&ut.call(t,i)}function qy(t,i){return t!=null&&i in gt(t)}function Ly(t,i,a){return t>=yn(i,a)&&t<tn(i,a)}function ac(t,i,a){for(var h=a?Hu:la,_=t[0].length,S=t.length,M=S,P=X(S),L=1/0,ie=[];M--;){var oe=t[M];M&&i&&(oe=Nt(oe,Vn(i))),L=yn(oe.length,L),P[M]=!a&&(i||_>=120&&oe.length>=120)?new ro(M&&oe):r}oe=t[0];var ce=-1,ye=P[0];e:for(;++ce<_&&ie.length<L;){var xe=oe[ce],Ie=i?i(xe):xe;if(xe=a||xe!==0?xe:0,!(ye?vs(ye,Ie):h(ie,Ie,a))){for(M=S;--M;){var qe=P[M];if(!(qe?vs(qe,Ie):h(t[M],Ie,a)))continue e}ye&&ye.push(Ie),ie.push(xe)}}return ie}function Hy(t,i,a,h){return Ir(t,function(_,S,M){i(h,a(_),S,M)}),h}function Ss(t,i,a){i=Ci(i,t),t=Uf(t,i);var h=t==null?t:t[Br(cr(i))];return h==null?r:cn(h,t,a)}function sf(t){return zt(t)&&An(t)==ge}function Gy(t){return zt(t)&&An(t)==Mt}function Vy(t){return zt(t)&&An(t)==Se}function As(t,i,a,h,_){return t===i?!0:t==null||i==null||!zt(t)&&!zt(i)?t!==t&&i!==i:Uy(t,i,a,h,As,_)}function Uy(t,i,a,h,_,S){var M=ze(t),P=ze(i),L=M?Ee:vn(t),ie=P?Ee:vn(i);L=L==ge?ke:L,ie=ie==ge?ke:ie;var oe=L==ke,ce=ie==ke,ye=L==ie;if(ye&&Si(t)){if(!Si(i))return!1;M=!0,oe=!1}if(ye&&!oe)return S||(S=new yr),M||Go(t)?kf(t,i,a,h,_,S):D1(t,i,L,a,h,_,S);if(!(a&x)){var xe=oe&&ut.call(t,"__wrapped__"),Ie=ce&&ut.call(i,"__wrapped__");if(xe||Ie){var qe=xe?t.value():t,Re=Ie?i.value():i;return S||(S=new yr),_(qe,Re,a,h,S)}}return ye?(S||(S=new yr),_1(t,i,a,h,_,S)):!1}function Wy(t){return zt(t)&&vn(t)==et}function uc(t,i,a,h){var _=a.length,S=_,M=!h;if(t==null)return!S;for(t=gt(t);_--;){var P=a[_];if(M&&P[2]?P[1]!==t[P[0]]:!(P[0]in t))return!1}for(;++_<S;){P=a[_];var L=P[0],ie=t[L],oe=P[1];if(M&&P[2]){if(ie===r&&!(L in t))return!1}else{var ce=new yr;if(h)var ye=h(ie,oe,L,t,i,ce);if(!(ye===r?As(oe,ie,x|D,h,ce):ye))return!1}}return!0}function af(t){if(!Rt(t)||N1(t))return!1;var i=ei(t)?Wm:Li;return i.test(ao(t))}function Xy(t){return zt(t)&&An(t)==Bt}function Yy(t){return zt(t)&&vn(t)==ct}function Zy(t){return zt(t)&&Ua(t.length)&&!!st[An(t)]}function uf(t){return typeof t=="function"?t:t==null?$n:typeof t=="object"?ze(t)?df(t[0],t[1]):lf(t):Th(t)}function cc(t){if(!Ts(t))return Qm(t);var i=[];for(var a in gt(t))ut.call(t,a)&&a!="constructor"&&i.push(a);return i}function Ky(t){if(!Rt(t))return B1(t);var i=Ts(t),a=[];for(var h in t)h=="constructor"&&(i||!ut.call(t,h))||a.push(h);return a}function lc(t,i){return t<i}function cf(t,i){var a=-1,h=jn(t)?X(t.length):[];return wi(t,function(_,S,M){h[++a]=i(_,S,M)}),h}function lf(t){var i=Ec(t);return i.length==1&&i[0][2]?Gf(i[0][0],i[0][1]):function(a){return a===t||uc(a,t,i)}}function df(t,i){return Ac(t)&&Hf(i)?Gf(Br(t),i):function(a){var h=zc(a,t);return h===r&&h===i?jc(a,t):As(i,h,x|D)}}function Ta(t,i,a,h,_){t!==i&&ic(i,function(S,M){if(_||(_=new yr),Rt(S))Jy(t,i,M,a,Ta,h,_);else{var P=h?h(Nc(t,M),S,M+"",t,i,_):r;P===r&&(P=S),nc(t,M,P)}},kn)}function Jy(t,i,a,h,_,S,M){var P=Nc(t,a),L=Nc(i,a),ie=M.get(L);if(ie){nc(t,a,ie);return}var oe=S?S(P,L,a+"",t,i,M):r,ce=oe===r;if(ce){var ye=ze(L),xe=!ye&&Si(L),Ie=!ye&&!xe&&Go(L);oe=L,ye||xe||Ie?ze(P)?oe=P:Lt(P)?oe=zn(P):xe?(ce=!1,oe=xf(L,!0)):Ie?(ce=!1,oe=Cf(L,!0)):oe=[]:Rs(L)||uo(L)?(oe=P,uo(P)?oe=_h(P):(!Rt(P)||ei(P))&&(oe=Lf(L))):ce=!1}ce&&(M.set(L,oe),_(oe,L,h,S,M),M.delete(L)),nc(t,a,oe)}function ff(t,i){var a=t.length;if(a)return i+=i<0?a:0,Qr(i,a)?t[i]:r}function hf(t,i,a){i.length?i=Nt(i,function(S){return ze(S)?function(M){return oo(M,S.length===1?S[0]:S)}:S}):i=[$n];var h=-1;i=Nt(i,Vn(Te()));var _=cf(t,function(S,M,P){var L=Nt(i,function(ie){return ie(S)});return{criteria:L,index:++h,value:S}});return Em(_,function(S,M){return d1(S,M,a)})}function Qy(t,i){return pf(t,i,function(a,h){return jc(t,h)})}function pf(t,i,a){for(var h=-1,_=i.length,S={};++h<_;){var M=i[h],P=oo(t,M);a(P,M)&&Fs(S,Ci(M,t),P)}return S}function e1(t){return function(i){return oo(i,t)}}function dc(t,i,a,h){var _=h?Cm:Bo,S=-1,M=i.length,P=t;for(t===i&&(i=zn(i)),a&&(P=Nt(t,Vn(a)));++S<M;)for(var L=0,ie=i[S],oe=a?a(ie):ie;(L=_(P,oe,L,h))>-1;)P!==t&&_a.call(P,L,1),_a.call(t,L,1);return t}function gf(t,i){for(var a=t?i.length:0,h=a-1;a--;){var _=i[a];if(a==h||_!==S){var S=_;Qr(_)?_a.call(t,_,1):gc(t,_)}}return t}function fc(t,i){return t+xa(Xd()*(i-t+1))}function t1(t,i,a,h){for(var _=-1,S=tn(wa((i-t)/(a||1)),0),M=X(S);S--;)M[h?S:++_]=t,t+=a;return M}function hc(t,i){var a="";if(!t||i<1||i>se)return a;do i%2&&(a+=t),i=xa(i/2),i&&(t+=t);while(i);return a}function He(t,i){return Tc(Vf(t,i,$n),t+"")}function n1(t){return Kd(Vo(t))}function r1(t,i){var a=Vo(t);return $a(a,io(i,0,a.length))}function Fs(t,i,a,h){if(!Rt(t))return t;i=Ci(i,t);for(var _=-1,S=i.length,M=S-1,P=t;P!=null&&++_<S;){var L=Br(i[_]),ie=a;if(L==="__proto__"||L==="constructor"||L==="prototype")return t;if(_!=M){var oe=P[L];ie=h?h(oe,L,P):r,ie===r&&(ie=Rt(oe)?oe:Qr(i[_+1])?[]:{})}Cs(P,L,ie),P=P[L]}return t}var mf=Ca?function(t,i){return Ca.set(t,i),t}:$n,i1=ba?function(t,i){return ba(t,"toString",{configurable:!0,enumerable:!1,value:$c(i),writable:!0})}:$n;function o1(t){return $a(Vo(t))}function ur(t,i,a){var h=-1,_=t.length;i<0&&(i=-i>_?0:_+i),a=a>_?_:a,a<0&&(a+=_),_=i>a?0:a-i>>>0,i>>>=0;for(var S=X(_);++h<_;)S[h]=t[h+i];return S}function s1(t,i){var a;return wi(t,function(h,_,S){return a=i(h,_,S),!a}),!!a}function Ia(t,i,a){var h=0,_=t==null?h:t.length;if(typeof i=="number"&&i===i&&_<=le){for(;h<_;){var S=h+_>>>1,M=t[S];M!==null&&!Wn(M)&&(a?M<=i:M<i)?h=S+1:_=S}return _}return pc(t,i,$n,a)}function pc(t,i,a,h){var _=0,S=t==null?0:t.length;if(S===0)return 0;i=a(i);for(var M=i!==i,P=i===null,L=Wn(i),ie=i===r;_<S;){var oe=xa((_+S)/2),ce=a(t[oe]),ye=ce!==r,xe=ce===null,Ie=ce===ce,qe=Wn(ce);if(M)var Re=h||Ie;else ie?Re=Ie&&(h||ye):P?Re=Ie&&ye&&(h||!xe):L?Re=Ie&&ye&&!xe&&(h||!qe):xe||qe?Re=!1:Re=h?ce<=i:ce<i;Re?_=oe+1:S=oe}return yn(S,de)}function yf(t,i){for(var a=-1,h=t.length,_=0,S=[];++a<h;){var M=t[a],P=i?i(M):M;if(!a||!vr(P,L)){var L=P;S[_++]=M===0?0:M}}return S}function vf(t){return typeof t=="number"?t:Wn(t)?re:+t}function Un(t){if(typeof t=="string")return t;if(ze(t))return Nt(t,Un)+"";if(Wn(t))return Yd?Yd.call(t):"";var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}function xi(t,i,a){var h=-1,_=la,S=t.length,M=!0,P=[],L=P;if(a)M=!1,_=Hu;else if(S>=s){var ie=i?null:y1(t);if(ie)return fa(ie);M=!1,_=vs,L=new ro}else L=i?[]:P;e:for(;++h<S;){var oe=t[h],ce=i?i(oe):oe;if(oe=a||oe!==0?oe:0,M&&ce===ce){for(var ye=L.length;ye--;)if(L[ye]===ce)continue e;i&&L.push(ce),P.push(oe)}else _(L,ce,a)||(L!==P&&L.push(ce),P.push(oe))}return P}function gc(t,i){return i=Ci(i,t),t=Uf(t,i),t==null||delete t[Br(cr(i))]}function Df(t,i,a,h){return Fs(t,i,a(oo(t,i)),h)}function Ra(t,i,a,h){for(var _=t.length,S=h?_:-1;(h?S--:++S<_)&&i(t[S],S,t););return a?ur(t,h?0:S,h?S+1:_):ur(t,h?S+1:0,h?_:S)}function _f(t,i){var a=t;return a instanceof Xe&&(a=a.value()),Gu(i,function(h,_){return _.func.apply(_.thisArg,Di([h],_.args))},a)}function mc(t,i,a){var h=t.length;if(h<2)return h?xi(t[0]):[];for(var _=-1,S=X(h);++_<h;)for(var M=t[_],P=-1;++P<h;)P!=_&&(S[_]=Es(S[_]||M,t[P],i,a));return xi(pn(S,1),i,a)}function bf(t,i,a){for(var h=-1,_=t.length,S=i.length,M={};++h<_;){var P=h<S?i[h]:r;a(M,t[h],P)}return M}function yc(t){return Lt(t)?t:[]}function vc(t){return typeof t=="function"?t:$n}function Ci(t,i){return ze(t)?t:Ac(t,i)?[t]:Zf(ot(t))}var a1=He;function Ei(t,i,a){var h=t.length;return a=a===r?h:a,!i&&a>=h?t:ur(t,i,a)}var wf=Xm||function(t){return _e.clearTimeout(t)};function xf(t,i){if(i)return t.slice();var a=t.length,h=Hd?Hd(a):new t.constructor(a);return t.copy(h),h}function Dc(t){var i=new t.constructor(t.byteLength);return new va(i).set(new va(t)),i}function u1(t,i){var a=i?Dc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function c1(t){var i=new t.constructor(t.source,mn.exec(t));return i.lastIndex=t.lastIndex,i}function l1(t){return xs?gt(xs.call(t)):{}}function Cf(t,i){var a=i?Dc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Ef(t,i){if(t!==i){var a=t!==r,h=t===null,_=t===t,S=Wn(t),M=i!==r,P=i===null,L=i===i,ie=Wn(i);if(!P&&!ie&&!S&&t>i||S&&M&&L&&!P&&!ie||h&&M&&L||!a&&L||!_)return 1;if(!h&&!S&&!ie&&t<i||ie&&a&&_&&!h&&!S||P&&a&&_||!M&&_||!L)return-1}return 0}function d1(t,i,a){for(var h=-1,_=t.criteria,S=i.criteria,M=_.length,P=a.length;++h<M;){var L=Ef(_[h],S[h]);if(L){if(h>=P)return L;var ie=a[h];return L*(ie=="desc"?-1:1)}}return t.index-i.index}function Sf(t,i,a,h){for(var _=-1,S=t.length,M=a.length,P=-1,L=i.length,ie=tn(S-M,0),oe=X(L+ie),ce=!h;++P<L;)oe[P]=i[P];for(;++_<M;)(ce||_<S)&&(oe[a[_]]=t[_]);for(;ie--;)oe[P++]=t[_++];return oe}function Af(t,i,a,h){for(var _=-1,S=t.length,M=-1,P=a.length,L=-1,ie=i.length,oe=tn(S-P,0),ce=X(oe+ie),ye=!h;++_<oe;)ce[_]=t[_];for(var xe=_;++L<ie;)ce[xe+L]=i[L];for(;++M<P;)(ye||_<S)&&(ce[xe+a[M]]=t[_++]);return ce}function zn(t,i){var a=-1,h=t.length;for(i||(i=X(h));++a<h;)i[a]=t[a];return i}function Rr(t,i,a,h){var _=!a;a||(a={});for(var S=-1,M=i.length;++S<M;){var P=i[S],L=h?h(a[P],t[P],P,a,t):r;L===r&&(L=t[P]),_?Zr(a,P,L):Cs(a,P,L)}return a}function f1(t,i){return Rr(t,Sc(t),i)}function h1(t,i){return Rr(t,$f(t),i)}function Ba(t,i){return function(a,h){var _=ze(a)?vm:My,S=i?i():{};return _(a,t,Te(h,2),S)}}function qo(t){return He(function(i,a){var h=-1,_=a.length,S=_>1?a[_-1]:r,M=_>2?a[2]:r;for(S=t.length>3&&typeof S=="function"?(_--,S):r,M&&Fn(a[0],a[1],M)&&(S=_<3?r:S,_=1),i=gt(i);++h<_;){var P=a[h];P&&t(i,P,h,S)}return i})}function Ff(t,i){return function(a,h){if(a==null)return a;if(!jn(a))return t(a,h);for(var _=a.length,S=i?_:-1,M=gt(a);(i?S--:++S<_)&&h(M[S],S,M)!==!1;);return a}}function Nf(t){return function(i,a,h){for(var _=-1,S=gt(i),M=h(i),P=M.length;P--;){var L=M[t?P:++_];if(a(S[L],L,S)===!1)break}return i}}function p1(t,i,a){var h=i&w,_=Ns(t);function S(){var M=this&&this!==_e&&this instanceof S?_:t;return M.apply(h?a:this,arguments)}return S}function Tf(t){return function(i){i=ot(i);var a=Oo(i)?mr(i):r,h=a?a[0]:i.charAt(0),_=a?Ei(a,1).join(""):i.slice(1);return h[t]()+_}}function Lo(t){return function(i){return Gu(Fh(Ah(i).replace(yi,"")),t,"")}}function Ns(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=$o(t.prototype),h=t.apply(a,i);return Rt(h)?h:a}}function g1(t,i,a){var h=Ns(t);function _(){for(var S=arguments.length,M=X(S),P=S,L=Ho(_);P--;)M[P]=arguments[P];var ie=S<3&&M[0]!==L&&M[S-1]!==L?[]:_i(M,L);if(S-=ie.length,S<a)return Mf(t,i,Oa,_.placeholder,r,M,ie,r,r,a-S);var oe=this&&this!==_e&&this instanceof _?h:t;return cn(oe,this,M)}return _}function If(t){return function(i,a,h){var _=gt(i);if(!jn(i)){var S=Te(a,3);i=ln(i),a=function(P){return S(_[P],P,_)}}var M=t(i,a,h);return M>-1?_[S?i[M]:M]:r}}function Rf(t){return Jr(function(i){var a=i.length,h=a,_=sr.prototype.thru;for(t&&i.reverse();h--;){var S=i[h];if(typeof S!="function")throw new or(l);if(_&&!M&&ja(S)=="wrapper")var M=new sr([],!0)}for(h=M?h:a;++h<a;){S=i[h];var P=ja(S),L=P=="wrapper"?Cc(S):r;L&&Fc(L[0])&&L[1]==(Y|I|j|ne)&&!L[4].length&&L[9]==1?M=M[ja(L[0])].apply(M,L[3]):M=S.length==1&&Fc(S)?M[P]():M.thru(S)}return function(){var ie=arguments,oe=ie[0];if(M&&ie.length==1&&ze(oe))return M.plant(oe).value();for(var ce=0,ye=a?i[ce].apply(this,ie):oe;++ce<a;)ye=i[ce].call(this,ye);return ye}})}function Oa(t,i,a,h,_,S,M,P,L,ie){var oe=i&Y,ce=i&w,ye=i&m,xe=i&(I|F),Ie=i&O,qe=ye?r:Ns(t);function Re(){for(var We=arguments.length,Ze=X(We),Xn=We;Xn--;)Ze[Xn]=arguments[Xn];if(xe)var Nn=Ho(Re),Yn=Am(Ze,Nn);if(h&&(Ze=Sf(Ze,h,_,xe)),S&&(Ze=Af(Ze,S,M,xe)),We-=Yn,xe&&We<ie){var Ht=_i(Ze,Nn);return Mf(t,i,Oa,Re.placeholder,a,Ze,Ht,P,L,ie-We)}var Dr=ce?a:this,ni=ye?Dr[t]:t;return We=Ze.length,P?Ze=M1(Ze,P):Ie&&We>1&&Ze.reverse(),oe&&L<We&&(Ze.length=L),this&&this!==_e&&this instanceof Re&&(ni=qe||Ns(ni)),ni.apply(Dr,Ze)}return Re}function Bf(t,i){return function(a,h){return Hy(a,t,i(h),{})}}function Ma(t,i){return function(a,h){var _;if(a===r&&h===r)return i;if(a!==r&&(_=a),h!==r){if(_===r)return h;typeof a=="string"||typeof h=="string"?(a=Un(a),h=Un(h)):(a=vf(a),h=vf(h)),_=t(a,h)}return _}}function _c(t){return Jr(function(i){return i=Nt(i,Vn(Te())),He(function(a){var h=this;return t(i,function(_){return cn(_,h,a)})})})}function Pa(t,i){i=i===r?" ":Un(i);var a=i.length;if(a<2)return a?hc(i,t):i;var h=hc(i,wa(t/Mo(i)));return Oo(i)?Ei(mr(h),0,t).join(""):h.slice(0,t)}function m1(t,i,a,h){var _=i&w,S=Ns(t);function M(){for(var P=-1,L=arguments.length,ie=-1,oe=h.length,ce=X(oe+L),ye=this&&this!==_e&&this instanceof M?S:t;++ie<oe;)ce[ie]=h[ie];for(;L--;)ce[ie++]=arguments[++P];return cn(ye,_?a:this,ce)}return M}function Of(t){return function(i,a,h){return h&&typeof h!="number"&&Fn(i,a,h)&&(a=h=r),i=ti(i),a===r?(a=i,i=0):a=ti(a),h=h===r?i<a?1:-1:ti(h),t1(i,a,h,t)}}function za(t){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=lr(i),a=lr(a)),t(i,a)}}function Mf(t,i,a,h,_,S,M,P,L,ie){var oe=i&I,ce=oe?M:r,ye=oe?r:M,xe=oe?S:r,Ie=oe?r:S;i|=oe?j:q,i&=~(oe?q:j),i&C||(i&=-4);var qe=[t,i,_,xe,ce,Ie,ye,P,L,ie],Re=a.apply(r,qe);return Fc(t)&&Wf(Re,qe),Re.placeholder=h,Xf(Re,t,i)}function bc(t){var i=en[t];return function(a,h){if(a=lr(a),h=h==null?0:yn($e(h),292),h&&Wd(a)){var _=(ot(a)+"e").split("e"),S=i(_[0]+"e"+(+_[1]+h));return _=(ot(S)+"e").split("e"),+(_[0]+"e"+(+_[1]-h))}return i(a)}}var y1=jo&&1/fa(new jo([,-0]))[1]==K?function(t){return new jo(t)}:Hc;function Pf(t){return function(i){var a=vn(i);return a==et?Ku(i):a==ct?Om(i):Sm(i,t(i))}}function Kr(t,i,a,h,_,S,M,P){var L=i&m;if(!L&&typeof t!="function")throw new or(l);var ie=h?h.length:0;if(ie||(i&=-97,h=_=r),M=M===r?M:tn($e(M),0),P=P===r?P:$e(P),ie-=_?_.length:0,i&q){var oe=h,ce=_;h=_=r}var ye=L?r:Cc(t),xe=[t,i,a,h,_,oe,ce,S,M,P];if(ye&&R1(xe,ye),t=xe[0],i=xe[1],a=xe[2],h=xe[3],_=xe[4],P=xe[9]=xe[9]===r?L?0:t.length:tn(xe[9]-ie,0),!P&&i&(I|F)&&(i&=-25),!i||i==w)var Ie=p1(t,i,a);else i==I||i==F?Ie=g1(t,i,P):(i==j||i==(w|j))&&!_.length?Ie=m1(t,i,a,h):Ie=Oa.apply(r,xe);var qe=ye?mf:Wf;return Xf(qe(Ie,xe),t,i)}function zf(t,i,a,h){return t===r||vr(t,zo[a])&&!ut.call(h,a)?i:t}function jf(t,i,a,h,_,S){return Rt(t)&&Rt(i)&&(S.set(i,t),Ta(t,i,r,jf,S),S.delete(i)),t}function v1(t){return Rs(t)?r:t}function kf(t,i,a,h,_,S){var M=a&x,P=t.length,L=i.length;if(P!=L&&!(M&&L>P))return!1;var ie=S.get(t),oe=S.get(i);if(ie&&oe)return ie==i&&oe==t;var ce=-1,ye=!0,xe=a&D?new ro:r;for(S.set(t,i),S.set(i,t);++ce<P;){var Ie=t[ce],qe=i[ce];if(h)var Re=M?h(qe,Ie,ce,i,t,S):h(Ie,qe,ce,t,i,S);if(Re!==r){if(Re)continue;ye=!1;break}if(xe){if(!Vu(i,function(We,Ze){if(!vs(xe,Ze)&&(Ie===We||_(Ie,We,a,h,S)))return xe.push(Ze)})){ye=!1;break}}else if(!(Ie===qe||_(Ie,qe,a,h,S))){ye=!1;break}}return S.delete(t),S.delete(i),ye}function D1(t,i,a,h,_,S,M){switch(a){case pt:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Mt:return!(t.byteLength!=i.byteLength||!S(new va(t),new va(i)));case De:case Se:case tt:return vr(+t,+i);case Et:return t.name==i.name&&t.message==i.message;case Bt:case Ot:return t==i+"";case et:var P=Ku;case ct:var L=h&x;if(P||(P=fa),t.size!=i.size&&!L)return!1;var ie=M.get(t);if(ie)return ie==i;h|=D,M.set(t,i);var oe=kf(P(t),P(i),h,_,S,M);return M.delete(t),oe;case St:if(xs)return xs.call(t)==xs.call(i)}return!1}function _1(t,i,a,h,_,S){var M=a&x,P=wc(t),L=P.length,ie=wc(i),oe=ie.length;if(L!=oe&&!M)return!1;for(var ce=L;ce--;){var ye=P[ce];if(!(M?ye in i:ut.call(i,ye)))return!1}var xe=S.get(t),Ie=S.get(i);if(xe&&Ie)return xe==i&&Ie==t;var qe=!0;S.set(t,i),S.set(i,t);for(var Re=M;++ce<L;){ye=P[ce];var We=t[ye],Ze=i[ye];if(h)var Xn=M?h(Ze,We,ye,i,t,S):h(We,Ze,ye,t,i,S);if(!(Xn===r?We===Ze||_(We,Ze,a,h,S):Xn)){qe=!1;break}Re||(Re=ye=="constructor")}if(qe&&!Re){var Nn=t.constructor,Yn=i.constructor;Nn!=Yn&&"constructor"in t&&"constructor"in i&&!(typeof Nn=="function"&&Nn instanceof Nn&&typeof Yn=="function"&&Yn instanceof Yn)&&(qe=!1)}return S.delete(t),S.delete(i),qe}function Jr(t){return Tc(Vf(t,r,eh),t+"")}function wc(t){return of(t,ln,Sc)}function xc(t){return of(t,kn,$f)}var Cc=Ca?function(t){return Ca.get(t)}:Hc;function ja(t){for(var i=t.name+"",a=ko[i],h=ut.call(ko,i)?a.length:0;h--;){var _=a[h],S=_.func;if(S==null||S==t)return _.name}return i}function Ho(t){var i=ut.call(E,"placeholder")?E:t;return i.placeholder}function Te(){var t=E.iteratee||qc;return t=t===qc?uf:t,arguments.length?t(arguments[0],arguments[1]):t}function ka(t,i){var a=t.__data__;return F1(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Ec(t){for(var i=ln(t),a=i.length;a--;){var h=i[a],_=t[h];i[a]=[h,_,Hf(_)]}return i}function so(t,i){var a=Im(t,i);return af(a)?a:r}function b1(t){var i=ut.call(t,to),a=t[to];try{t[to]=r;var h=!0}catch{}var _=ma.call(t);return h&&(i?t[to]=a:delete t[to]),_}var Sc=Qu?function(t){return t==null?[]:(t=gt(t),vi(Qu(t),function(i){return Vd.call(t,i)}))}:Gc,$f=Qu?function(t){for(var i=[];t;)Di(i,Sc(t)),t=Da(t);return i}:Gc,vn=An;(ec&&vn(new ec(new ArrayBuffer(1)))!=pt||_s&&vn(new _s)!=et||tc&&vn(tc.resolve())!=we||jo&&vn(new jo)!=ct||bs&&vn(new bs)!=Kt)&&(vn=function(t){var i=An(t),a=i==ke?t.constructor:r,h=a?ao(a):"";if(h)switch(h){case ry:return pt;case iy:return et;case oy:return we;case sy:return ct;case ay:return Kt}return i});function w1(t,i,a){for(var h=-1,_=a.length;++h<_;){var S=a[h],M=S.size;switch(S.type){case"drop":t+=M;break;case"dropRight":i-=M;break;case"take":i=yn(i,t+M);break;case"takeRight":t=tn(t,i-M);break}}return{start:t,end:i}}function x1(t){var i=t.match(Hn);return i?i[1].split(zi):[]}function qf(t,i,a){i=Ci(i,t);for(var h=-1,_=i.length,S=!1;++h<_;){var M=Br(i[h]);if(!(S=t!=null&&a(t,M)))break;t=t[M]}return S||++h!=_?S:(_=t==null?0:t.length,!!_&&Ua(_)&&Qr(M,_)&&(ze(t)||uo(t)))}function C1(t){var i=t.length,a=new t.constructor(i);return i&&typeof t[0]=="string"&&ut.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Lf(t){return typeof t.constructor=="function"&&!Ts(t)?$o(Da(t)):{}}function E1(t,i,a){var h=t.constructor;switch(i){case Mt:return Dc(t);case De:case Se:return new h(+t);case pt:return u1(t,a);case Vt:case _t:case lt:case Pt:case hn:case an:case bt:case At:case Jt:return Cf(t,a);case et:return new h;case tt:case Ot:return new h(t);case Bt:return c1(t);case ct:return new h;case St:return l1(t)}}function S1(t,i){var a=i.length;if(!a)return t;var h=a-1;return i[h]=(a>1?"& ":"")+i[h],i=i.join(a>2?", ":" "),t.replace(On,`{
/* [wrapped with `+i+`] */
`)}function A1(t){return ze(t)||uo(t)||!!(Ud&&t&&t[Ud])}function Qr(t,i){var a=typeof t;return i=i??se,!!i&&(a=="number"||a!="symbol"&&Gi.test(t))&&t>-1&&t%1==0&&t<i}function Fn(t,i,a){if(!Rt(a))return!1;var h=typeof i;return(h=="number"?jn(a)&&Qr(i,a.length):h=="string"&&i in a)?vr(a[i],t):!1}function Ac(t,i){if(ze(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Wn(t)?!0:wt.test(t)||!Ft.test(t)||i!=null&&t in gt(i)}function F1(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function Fc(t){var i=ja(t),a=E[i];if(typeof a!="function"||!(i in Xe.prototype))return!1;if(t===a)return!0;var h=Cc(a);return!!h&&t===h[0]}function N1(t){return!!Ld&&Ld in t}var T1=pa?ei:Vc;function Ts(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||zo;return t===a}function Hf(t){return t===t&&!Rt(t)}function Gf(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==r||t in gt(a))}}function I1(t){var i=Ga(t,function(h){return a.size===f&&a.clear(),h}),a=i.cache;return i}function R1(t,i){var a=t[1],h=i[1],_=a|h,S=_<(w|m|Y),M=h==Y&&a==I||h==Y&&a==ne&&t[7].length<=i[8]||h==(Y|ne)&&i[7].length<=i[8]&&a==I;if(!(S||M))return t;h&w&&(t[2]=i[2],_|=a&w?0:C);var P=i[3];if(P){var L=t[3];t[3]=L?Sf(L,P,i[4]):P,t[4]=L?_i(t[3],p):i[4]}return P=i[5],P&&(L=t[5],t[5]=L?Af(L,P,i[6]):P,t[6]=L?_i(t[5],p):i[6]),P=i[7],P&&(t[7]=P),h&Y&&(t[8]=t[8]==null?i[8]:yn(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=_,t}function B1(t){var i=[];if(t!=null)for(var a in gt(t))i.push(a);return i}function O1(t){return ma.call(t)}function Vf(t,i,a){return i=tn(i===r?t.length-1:i,0),function(){for(var h=arguments,_=-1,S=tn(h.length-i,0),M=X(S);++_<S;)M[_]=h[i+_];_=-1;for(var P=X(i+1);++_<i;)P[_]=h[_];return P[i]=a(M),cn(t,this,P)}}function Uf(t,i){return i.length<2?t:oo(t,ur(i,0,-1))}function M1(t,i){for(var a=t.length,h=yn(i.length,a),_=zn(t);h--;){var S=i[h];t[h]=Qr(S,a)?_[S]:r}return t}function Nc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var Wf=Yf(mf),Is=Zm||function(t,i){return _e.setTimeout(t,i)},Tc=Yf(i1);function Xf(t,i,a){var h=i+"";return Tc(t,S1(h,P1(x1(h),a)))}function Yf(t){var i=0,a=0;return function(){var h=ey(),_=Z-(h-a);if(a=h,_>0){if(++i>=ee)return arguments[0]}else i=0;return t.apply(r,arguments)}}function $a(t,i){var a=-1,h=t.length,_=h-1;for(i=i===r?h:i;++a<i;){var S=fc(a,_),M=t[S];t[S]=t[a],t[a]=M}return t.length=i,t}var Zf=I1(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Ut,function(a,h,_,S){i.push(_?S.replace(fi,"$1"):h||a)}),i});function Br(t){if(typeof t=="string"||Wn(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}function ao(t){if(t!=null){try{return ga.call(t)}catch{}try{return t+""}catch{}}return""}function P1(t,i){return ir(ve,function(a){var h="_."+a[0];i&a[1]&&!la(t,h)&&t.push(h)}),t.sort()}function Kf(t){if(t instanceof Xe)return t.clone();var i=new sr(t.__wrapped__,t.__chain__);return i.__actions__=zn(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function z1(t,i,a){(a?Fn(t,i,a):i===r)?i=1:i=tn($e(i),0);var h=t==null?0:t.length;if(!h||i<1)return[];for(var _=0,S=0,M=X(wa(h/i));_<h;)M[S++]=ur(t,_,_+=i);return M}function j1(t){for(var i=-1,a=t==null?0:t.length,h=0,_=[];++i<a;){var S=t[i];S&&(_[h++]=S)}return _}function k1(){var t=arguments.length;if(!t)return[];for(var i=X(t-1),a=arguments[0],h=t;h--;)i[h-1]=arguments[h];return Di(ze(a)?zn(a):[a],pn(i,1))}var $1=He(function(t,i){return Lt(t)?Es(t,pn(i,1,Lt,!0)):[]}),q1=He(function(t,i){var a=cr(i);return Lt(a)&&(a=r),Lt(t)?Es(t,pn(i,1,Lt,!0),Te(a,2)):[]}),L1=He(function(t,i){var a=cr(i);return Lt(a)&&(a=r),Lt(t)?Es(t,pn(i,1,Lt,!0),r,a):[]});function H1(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:$e(i),ur(t,i<0?0:i,h)):[]}function G1(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:$e(i),i=h-i,ur(t,0,i<0?0:i)):[]}function V1(t,i){return t&&t.length?Ra(t,Te(i,3),!0,!0):[]}function U1(t,i){return t&&t.length?Ra(t,Te(i,3),!0):[]}function W1(t,i,a,h){var _=t==null?0:t.length;return _?(a&&typeof a!="number"&&Fn(t,i,a)&&(a=0,h=_),ky(t,i,a,h)):[]}function Jf(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var _=a==null?0:$e(a);return _<0&&(_=tn(h+_,0)),da(t,Te(i,3),_)}function Qf(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var _=h-1;return a!==r&&(_=$e(a),_=a<0?tn(h+_,0):yn(_,h-1)),da(t,Te(i,3),_,!0)}function eh(t){var i=t==null?0:t.length;return i?pn(t,1):[]}function X1(t){var i=t==null?0:t.length;return i?pn(t,K):[]}function Y1(t,i){var a=t==null?0:t.length;return a?(i=i===r?1:$e(i),pn(t,i)):[]}function Z1(t){for(var i=-1,a=t==null?0:t.length,h={};++i<a;){var _=t[i];h[_[0]]=_[1]}return h}function th(t){return t&&t.length?t[0]:r}function K1(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var _=a==null?0:$e(a);return _<0&&(_=tn(h+_,0)),Bo(t,i,_)}function J1(t){var i=t==null?0:t.length;return i?ur(t,0,-1):[]}var Q1=He(function(t){var i=Nt(t,yc);return i.length&&i[0]===t[0]?ac(i):[]}),ev=He(function(t){var i=cr(t),a=Nt(t,yc);return i===cr(a)?i=r:a.pop(),a.length&&a[0]===t[0]?ac(a,Te(i,2)):[]}),tv=He(function(t){var i=cr(t),a=Nt(t,yc);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===t[0]?ac(a,r,i):[]});function nv(t,i){return t==null?"":Jm.call(t,i)}function cr(t){var i=t==null?0:t.length;return i?t[i-1]:r}function rv(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var _=h;return a!==r&&(_=$e(a),_=_<0?tn(h+_,0):yn(_,h-1)),i===i?Pm(t,i,_):da(t,Od,_,!0)}function iv(t,i){return t&&t.length?ff(t,$e(i)):r}var ov=He(nh);function nh(t,i){return t&&t.length&&i&&i.length?dc(t,i):t}function sv(t,i,a){return t&&t.length&&i&&i.length?dc(t,i,Te(a,2)):t}function av(t,i,a){return t&&t.length&&i&&i.length?dc(t,i,r,a):t}var uv=Jr(function(t,i){var a=t==null?0:t.length,h=rc(t,i);return gf(t,Nt(i,function(_){return Qr(_,a)?+_:_}).sort(Ef)),h});function cv(t,i){var a=[];if(!(t&&t.length))return a;var h=-1,_=[],S=t.length;for(i=Te(i,3);++h<S;){var M=t[h];i(M,h,t)&&(a.push(M),_.push(h))}return gf(t,_),a}function Ic(t){return t==null?t:ny.call(t)}function lv(t,i,a){var h=t==null?0:t.length;return h?(a&&typeof a!="number"&&Fn(t,i,a)?(i=0,a=h):(i=i==null?0:$e(i),a=a===r?h:$e(a)),ur(t,i,a)):[]}function dv(t,i){return Ia(t,i)}function fv(t,i,a){return pc(t,i,Te(a,2))}function hv(t,i){var a=t==null?0:t.length;if(a){var h=Ia(t,i);if(h<a&&vr(t[h],i))return h}return-1}function pv(t,i){return Ia(t,i,!0)}function gv(t,i,a){return pc(t,i,Te(a,2),!0)}function mv(t,i){var a=t==null?0:t.length;if(a){var h=Ia(t,i,!0)-1;if(vr(t[h],i))return h}return-1}function yv(t){return t&&t.length?yf(t):[]}function vv(t,i){return t&&t.length?yf(t,Te(i,2)):[]}function Dv(t){var i=t==null?0:t.length;return i?ur(t,1,i):[]}function _v(t,i,a){return t&&t.length?(i=a||i===r?1:$e(i),ur(t,0,i<0?0:i)):[]}function bv(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:$e(i),i=h-i,ur(t,i<0?0:i,h)):[]}function wv(t,i){return t&&t.length?Ra(t,Te(i,3),!1,!0):[]}function xv(t,i){return t&&t.length?Ra(t,Te(i,3)):[]}var Cv=He(function(t){return xi(pn(t,1,Lt,!0))}),Ev=He(function(t){var i=cr(t);return Lt(i)&&(i=r),xi(pn(t,1,Lt,!0),Te(i,2))}),Sv=He(function(t){var i=cr(t);return i=typeof i=="function"?i:r,xi(pn(t,1,Lt,!0),r,i)});function Av(t){return t&&t.length?xi(t):[]}function Fv(t,i){return t&&t.length?xi(t,Te(i,2)):[]}function Nv(t,i){return i=typeof i=="function"?i:r,t&&t.length?xi(t,r,i):[]}function Rc(t){if(!(t&&t.length))return[];var i=0;return t=vi(t,function(a){if(Lt(a))return i=tn(a.length,i),!0}),Yu(i,function(a){return Nt(t,Uu(a))})}function rh(t,i){if(!(t&&t.length))return[];var a=Rc(t);return i==null?a:Nt(a,function(h){return cn(i,r,h)})}var Tv=He(function(t,i){return Lt(t)?Es(t,i):[]}),Iv=He(function(t){return mc(vi(t,Lt))}),Rv=He(function(t){var i=cr(t);return Lt(i)&&(i=r),mc(vi(t,Lt),Te(i,2))}),Bv=He(function(t){var i=cr(t);return i=typeof i=="function"?i:r,mc(vi(t,Lt),r,i)}),Ov=He(Rc);function Mv(t,i){return bf(t||[],i||[],Cs)}function Pv(t,i){return bf(t||[],i||[],Fs)}var zv=He(function(t){var i=t.length,a=i>1?t[i-1]:r;return a=typeof a=="function"?(t.pop(),a):r,rh(t,a)});function ih(t){var i=E(t);return i.__chain__=!0,i}function jv(t,i){return i(t),t}function qa(t,i){return i(t)}var kv=Jr(function(t){var i=t.length,a=i?t[0]:0,h=this.__wrapped__,_=function(S){return rc(S,t)};return i>1||this.__actions__.length||!(h instanceof Xe)||!Qr(a)?this.thru(_):(h=h.slice(a,+a+(i?1:0)),h.__actions__.push({func:qa,args:[_],thisArg:r}),new sr(h,this.__chain__).thru(function(S){return i&&!S.length&&S.push(r),S}))});function $v(){return ih(this)}function qv(){return new sr(this.value(),this.__chain__)}function Lv(){this.__values__===r&&(this.__values__=vh(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function Hv(){return this}function Gv(t){for(var i,a=this;a instanceof Sa;){var h=Kf(a);h.__index__=0,h.__values__=r,i?_.__wrapped__=h:i=h;var _=h;a=a.__wrapped__}return _.__wrapped__=t,i}function Vv(){var t=this.__wrapped__;if(t instanceof Xe){var i=t;return this.__actions__.length&&(i=new Xe(this)),i=i.reverse(),i.__actions__.push({func:qa,args:[Ic],thisArg:r}),new sr(i,this.__chain__)}return this.thru(Ic)}function Uv(){return _f(this.__wrapped__,this.__actions__)}var Wv=Ba(function(t,i,a){ut.call(t,a)?++t[a]:Zr(t,a,1)});function Xv(t,i,a){var h=ze(t)?Rd:jy;return a&&Fn(t,i,a)&&(i=r),h(t,Te(i,3))}function Yv(t,i){var a=ze(t)?vi:nf;return a(t,Te(i,3))}var Zv=If(Jf),Kv=If(Qf);function Jv(t,i){return pn(La(t,i),1)}function Qv(t,i){return pn(La(t,i),K)}function eD(t,i,a){return a=a===r?1:$e(a),pn(La(t,i),a)}function oh(t,i){var a=ze(t)?ir:wi;return a(t,Te(i,3))}function sh(t,i){var a=ze(t)?Dm:tf;return a(t,Te(i,3))}var tD=Ba(function(t,i,a){ut.call(t,a)?t[a].push(i):Zr(t,a,[i])});function nD(t,i,a,h){t=jn(t)?t:Vo(t),a=a&&!h?$e(a):0;var _=t.length;return a<0&&(a=tn(_+a,0)),Wa(t)?a<=_&&t.indexOf(i,a)>-1:!!_&&Bo(t,i,a)>-1}var rD=He(function(t,i,a){var h=-1,_=typeof i=="function",S=jn(t)?X(t.length):[];return wi(t,function(M){S[++h]=_?cn(i,M,a):Ss(M,i,a)}),S}),iD=Ba(function(t,i,a){Zr(t,a,i)});function La(t,i){var a=ze(t)?Nt:cf;return a(t,Te(i,3))}function oD(t,i,a,h){return t==null?[]:(ze(i)||(i=i==null?[]:[i]),a=h?r:a,ze(a)||(a=a==null?[]:[a]),hf(t,i,a))}var sD=Ba(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]});function aD(t,i,a){var h=ze(t)?Gu:Pd,_=arguments.length<3;return h(t,Te(i,4),a,_,wi)}function uD(t,i,a){var h=ze(t)?_m:Pd,_=arguments.length<3;return h(t,Te(i,4),a,_,tf)}function cD(t,i){var a=ze(t)?vi:nf;return a(t,Va(Te(i,3)))}function lD(t){var i=ze(t)?Kd:n1;return i(t)}function dD(t,i,a){(a?Fn(t,i,a):i===r)?i=1:i=$e(i);var h=ze(t)?By:r1;return h(t,i)}function fD(t){var i=ze(t)?Oy:o1;return i(t)}function hD(t){if(t==null)return 0;if(jn(t))return Wa(t)?Mo(t):t.length;var i=vn(t);return i==et||i==ct?t.size:cc(t).length}function pD(t,i,a){var h=ze(t)?Vu:s1;return a&&Fn(t,i,a)&&(i=r),h(t,Te(i,3))}var gD=He(function(t,i){if(t==null)return[];var a=i.length;return a>1&&Fn(t,i[0],i[1])?i=[]:a>2&&Fn(i[0],i[1],i[2])&&(i=[i[0]]),hf(t,pn(i,1),[])}),Ha=Ym||function(){return _e.Date.now()};function mD(t,i){if(typeof i!="function")throw new or(l);return t=$e(t),function(){if(--t<1)return i.apply(this,arguments)}}function ah(t,i,a){return i=a?r:i,i=t&&i==null?t.length:i,Kr(t,Y,r,r,r,r,i)}function uh(t,i){var a;if(typeof i!="function")throw new or(l);return t=$e(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=r),a}}var Bc=He(function(t,i,a){var h=w;if(a.length){var _=_i(a,Ho(Bc));h|=j}return Kr(t,h,i,a,_)}),ch=He(function(t,i,a){var h=w|m;if(a.length){var _=_i(a,Ho(ch));h|=j}return Kr(i,h,t,a,_)});function lh(t,i,a){i=a?r:i;var h=Kr(t,I,r,r,r,r,r,i);return h.placeholder=lh.placeholder,h}function dh(t,i,a){i=a?r:i;var h=Kr(t,F,r,r,r,r,r,i);return h.placeholder=dh.placeholder,h}function fh(t,i,a){var h,_,S,M,P,L,ie=0,oe=!1,ce=!1,ye=!0;if(typeof t!="function")throw new or(l);i=lr(i)||0,Rt(a)&&(oe=!!a.leading,ce="maxWait"in a,S=ce?tn(lr(a.maxWait)||0,i):S,ye="trailing"in a?!!a.trailing:ye);function xe(Ht){var Dr=h,ni=_;return h=_=r,ie=Ht,M=t.apply(ni,Dr),M}function Ie(Ht){return ie=Ht,P=Is(We,i),oe?xe(Ht):M}function qe(Ht){var Dr=Ht-L,ni=Ht-ie,Ih=i-Dr;return ce?yn(Ih,S-ni):Ih}function Re(Ht){var Dr=Ht-L,ni=Ht-ie;return L===r||Dr>=i||Dr<0||ce&&ni>=S}function We(){var Ht=Ha();if(Re(Ht))return Ze(Ht);P=Is(We,qe(Ht))}function Ze(Ht){return P=r,ye&&h?xe(Ht):(h=_=r,M)}function Xn(){P!==r&&wf(P),ie=0,h=L=_=P=r}function Nn(){return P===r?M:Ze(Ha())}function Yn(){var Ht=Ha(),Dr=Re(Ht);if(h=arguments,_=this,L=Ht,Dr){if(P===r)return Ie(L);if(ce)return wf(P),P=Is(We,i),xe(L)}return P===r&&(P=Is(We,i)),M}return Yn.cancel=Xn,Yn.flush=Nn,Yn}var yD=He(function(t,i){return ef(t,1,i)}),vD=He(function(t,i,a){return ef(t,lr(i)||0,a)});function DD(t){return Kr(t,O)}function Ga(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new or(l);var a=function(){var h=arguments,_=i?i.apply(this,h):h[0],S=a.cache;if(S.has(_))return S.get(_);var M=t.apply(this,h);return a.cache=S.set(_,M)||S,M};return a.cache=new(Ga.Cache||Yr),a}Ga.Cache=Yr;function Va(t){if(typeof t!="function")throw new or(l);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function _D(t){return uh(2,t)}var bD=a1(function(t,i){i=i.length==1&&ze(i[0])?Nt(i[0],Vn(Te())):Nt(pn(i,1),Vn(Te()));var a=i.length;return He(function(h){for(var _=-1,S=yn(h.length,a);++_<S;)h[_]=i[_].call(this,h[_]);return cn(t,this,h)})}),Oc=He(function(t,i){var a=_i(i,Ho(Oc));return Kr(t,j,r,i,a)}),hh=He(function(t,i){var a=_i(i,Ho(hh));return Kr(t,q,r,i,a)}),wD=Jr(function(t,i){return Kr(t,ne,r,r,r,i)});function xD(t,i){if(typeof t!="function")throw new or(l);return i=i===r?i:$e(i),He(t,i)}function CD(t,i){if(typeof t!="function")throw new or(l);return i=i==null?0:tn($e(i),0),He(function(a){var h=a[i],_=Ei(a,0,i);return h&&Di(_,h),cn(t,this,_)})}function ED(t,i,a){var h=!0,_=!0;if(typeof t!="function")throw new or(l);return Rt(a)&&(h="leading"in a?!!a.leading:h,_="trailing"in a?!!a.trailing:_),fh(t,i,{leading:h,maxWait:i,trailing:_})}function SD(t){return ah(t,1)}function AD(t,i){return Oc(vc(i),t)}function FD(){if(!arguments.length)return[];var t=arguments[0];return ze(t)?t:[t]}function ND(t){return ar(t,b)}function TD(t,i){return i=typeof i=="function"?i:r,ar(t,b,i)}function ID(t){return ar(t,g|b)}function RD(t,i){return i=typeof i=="function"?i:r,ar(t,g|b,i)}function BD(t,i){return i==null||Qd(t,i,ln(i))}function vr(t,i){return t===i||t!==t&&i!==i}var OD=za(sc),MD=za(function(t,i){return t>=i}),uo=sf(function(){return arguments}())?sf:function(t){return zt(t)&&ut.call(t,"callee")&&!Vd.call(t,"callee")},ze=X.isArray,PD=Qt?Vn(Qt):Gy;function jn(t){return t!=null&&Ua(t.length)&&!ei(t)}function Lt(t){return zt(t)&&jn(t)}function zD(t){return t===!0||t===!1||zt(t)&&An(t)==De}var Si=Km||Vc,jD=Pn?Vn(Pn):Vy;function kD(t){return zt(t)&&t.nodeType===1&&!Rs(t)}function $D(t){if(t==null)return!0;if(jn(t)&&(ze(t)||typeof t=="string"||typeof t.splice=="function"||Si(t)||Go(t)||uo(t)))return!t.length;var i=vn(t);if(i==et||i==ct)return!t.size;if(Ts(t))return!cc(t).length;for(var a in t)if(ut.call(t,a))return!1;return!0}function qD(t,i){return As(t,i)}function LD(t,i,a){a=typeof a=="function"?a:r;var h=a?a(t,i):r;return h===r?As(t,i,r,a):!!h}function Mc(t){if(!zt(t))return!1;var i=An(t);return i==Et||i==Be||typeof t.message=="string"&&typeof t.name=="string"&&!Rs(t)}function HD(t){return typeof t=="number"&&Wd(t)}function ei(t){if(!Rt(t))return!1;var i=An(t);return i==Qe||i==kt||i==Oe||i==$t}function ph(t){return typeof t=="number"&&t==$e(t)}function Ua(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=se}function Rt(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function zt(t){return t!=null&&typeof t=="object"}var gh=rr?Vn(rr):Wy;function GD(t,i){return t===i||uc(t,i,Ec(i))}function VD(t,i,a){return a=typeof a=="function"?a:r,uc(t,i,Ec(i),a)}function UD(t){return mh(t)&&t!=+t}function WD(t){if(T1(t))throw new Pe(u);return af(t)}function XD(t){return t===null}function YD(t){return t==null}function mh(t){return typeof t=="number"||zt(t)&&An(t)==tt}function Rs(t){if(!zt(t)||An(t)!=ke)return!1;var i=Da(t);if(i===null)return!0;var a=ut.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&ga.call(a)==Vm}var Pc=Tr?Vn(Tr):Xy;function ZD(t){return ph(t)&&t>=-9007199254740991&&t<=se}var yh=ys?Vn(ys):Yy;function Wa(t){return typeof t=="string"||!ze(t)&&zt(t)&&An(t)==Ot}function Wn(t){return typeof t=="symbol"||zt(t)&&An(t)==St}var Go=eo?Vn(eo):Zy;function KD(t){return t===r}function JD(t){return zt(t)&&vn(t)==Kt}function QD(t){return zt(t)&&An(t)==wn}var e_=za(lc),t_=za(function(t,i){return t<=i});function vh(t){if(!t)return[];if(jn(t))return Wa(t)?mr(t):zn(t);if(Ds&&t[Ds])return Bm(t[Ds]());var i=vn(t),a=i==et?Ku:i==ct?fa:Vo;return a(t)}function ti(t){if(!t)return t===0?t:0;if(t=lr(t),t===K||t===-1/0){var i=t<0?-1:1;return i*U}return t===t?t:0}function $e(t){var i=ti(t),a=i%1;return i===i?a?i-a:i:0}function Dh(t){return t?io($e(t),0,ue):0}function lr(t){if(typeof t=="number")return t;if(Wn(t))return re;if(Rt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Rt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=zd(t);var a=qi.test(t);return a||Hi.test(t)?me(t.slice(2),a?2:8):$i.test(t)?re:+t}function _h(t){return Rr(t,kn(t))}function n_(t){return t?io($e(t),-9007199254740991,se):t===0?t:0}function ot(t){return t==null?"":Un(t)}var r_=qo(function(t,i){if(Ts(i)||jn(i)){Rr(i,ln(i),t);return}for(var a in i)ut.call(i,a)&&Cs(t,a,i[a])}),bh=qo(function(t,i){Rr(i,kn(i),t)}),Xa=qo(function(t,i,a,h){Rr(i,kn(i),t,h)}),i_=qo(function(t,i,a,h){Rr(i,ln(i),t,h)}),o_=Jr(rc);function s_(t,i){var a=$o(t);return i==null?a:Jd(a,i)}var a_=He(function(t,i){t=gt(t);var a=-1,h=i.length,_=h>2?i[2]:r;for(_&&Fn(i[0],i[1],_)&&(h=1);++a<h;)for(var S=i[a],M=kn(S),P=-1,L=M.length;++P<L;){var ie=M[P],oe=t[ie];(oe===r||vr(oe,zo[ie])&&!ut.call(t,ie))&&(t[ie]=S[ie])}return t}),u_=He(function(t){return t.push(r,jf),cn(wh,r,t)});function c_(t,i){return Bd(t,Te(i,3),Ir)}function l_(t,i){return Bd(t,Te(i,3),oc)}function d_(t,i){return t==null?t:ic(t,Te(i,3),kn)}function f_(t,i){return t==null?t:rf(t,Te(i,3),kn)}function h_(t,i){return t&&Ir(t,Te(i,3))}function p_(t,i){return t&&oc(t,Te(i,3))}function g_(t){return t==null?[]:Na(t,ln(t))}function m_(t){return t==null?[]:Na(t,kn(t))}function zc(t,i,a){var h=t==null?r:oo(t,i);return h===r?a:h}function y_(t,i){return t!=null&&qf(t,i,$y)}function jc(t,i){return t!=null&&qf(t,i,qy)}var v_=Bf(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=ma.call(i)),t[i]=a},$c($n)),D_=Bf(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=ma.call(i)),ut.call(t,i)?t[i].push(a):t[i]=[a]},Te),__=He(Ss);function ln(t){return jn(t)?Zd(t):cc(t)}function kn(t){return jn(t)?Zd(t,!0):Ky(t)}function b_(t,i){var a={};return i=Te(i,3),Ir(t,function(h,_,S){Zr(a,i(h,_,S),h)}),a}function w_(t,i){var a={};return i=Te(i,3),Ir(t,function(h,_,S){Zr(a,_,i(h,_,S))}),a}var x_=qo(function(t,i,a){Ta(t,i,a)}),wh=qo(function(t,i,a,h){Ta(t,i,a,h)}),C_=Jr(function(t,i){var a={};if(t==null)return a;var h=!1;i=Nt(i,function(S){return S=Ci(S,t),h||(h=S.length>1),S}),Rr(t,xc(t),a),h&&(a=ar(a,g|y|b,v1));for(var _=i.length;_--;)gc(a,i[_]);return a});function E_(t,i){return xh(t,Va(Te(i)))}var S_=Jr(function(t,i){return t==null?{}:Qy(t,i)});function xh(t,i){if(t==null)return{};var a=Nt(xc(t),function(h){return[h]});return i=Te(i),pf(t,a,function(h,_){return i(h,_[0])})}function A_(t,i,a){i=Ci(i,t);var h=-1,_=i.length;for(_||(_=1,t=r);++h<_;){var S=t==null?r:t[Br(i[h])];S===r&&(h=_,S=a),t=ei(S)?S.call(t):S}return t}function F_(t,i,a){return t==null?t:Fs(t,i,a)}function N_(t,i,a,h){return h=typeof h=="function"?h:r,t==null?t:Fs(t,i,a,h)}var Ch=Pf(ln),Eh=Pf(kn);function T_(t,i,a){var h=ze(t),_=h||Si(t)||Go(t);if(i=Te(i,4),a==null){var S=t&&t.constructor;_?a=h?new S:[]:Rt(t)?a=ei(S)?$o(Da(t)):{}:a={}}return(_?ir:Ir)(t,function(M,P,L){return i(a,M,P,L)}),a}function I_(t,i){return t==null?!0:gc(t,i)}function R_(t,i,a){return t==null?t:Df(t,i,vc(a))}function B_(t,i,a,h){return h=typeof h=="function"?h:r,t==null?t:Df(t,i,vc(a),h)}function Vo(t){return t==null?[]:Zu(t,ln(t))}function O_(t){return t==null?[]:Zu(t,kn(t))}function M_(t,i,a){return a===r&&(a=i,i=r),a!==r&&(a=lr(a),a=a===a?a:0),i!==r&&(i=lr(i),i=i===i?i:0),io(lr(t),i,a)}function P_(t,i,a){return i=ti(i),a===r?(a=i,i=0):a=ti(a),t=lr(t),Ly(t,i,a)}function z_(t,i,a){if(a&&typeof a!="boolean"&&Fn(t,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&i===r?(t=0,i=1):(t=ti(t),i===r?(i=t,t=0):i=ti(i)),t>i){var h=t;t=i,i=h}if(a||t%1||i%1){var _=Xd();return yn(t+_*(i-t+he("1e-"+((_+"").length-1))),i)}return fc(t,i)}var j_=Lo(function(t,i,a){return i=i.toLowerCase(),t+(a?Sh(i):i)});function Sh(t){return kc(ot(t).toLowerCase())}function Ah(t){return t=ot(t),t&&t.replace(Cn,Fm).replace(gr,"")}function k_(t,i,a){t=ot(t),i=Un(i);var h=t.length;a=a===r?h:io($e(a),0,h);var _=a;return a-=i.length,a>=0&&t.slice(a,_)==i}function $_(t){return t=ot(t),t&&pe.test(t)?t.replace(H,Nm):t}function q_(t){return t=ot(t),t&&qt.test(t)?t.replace(Rn,"\\$&"):t}var L_=Lo(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),H_=Lo(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),G_=Tf("toLowerCase");function V_(t,i,a){t=ot(t),i=$e(i);var h=i?Mo(t):0;if(!i||h>=i)return t;var _=(i-h)/2;return Pa(xa(_),a)+t+Pa(wa(_),a)}function U_(t,i,a){t=ot(t),i=$e(i);var h=i?Mo(t):0;return i&&h<i?t+Pa(i-h,a):t}function W_(t,i,a){t=ot(t),i=$e(i);var h=i?Mo(t):0;return i&&h<i?Pa(i-h,a)+t:t}function X_(t,i,a){return a||i==null?i=0:i&&(i=+i),ty(ot(t).replace(Wt,""),i||0)}function Y_(t,i,a){return(a?Fn(t,i,a):i===r)?i=1:i=$e(i),hc(ot(t),i)}function Z_(){var t=arguments,i=ot(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var K_=Lo(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()});function J_(t,i,a){return a&&typeof a!="number"&&Fn(t,i,a)&&(i=a=r),a=a===r?ue:a>>>0,a?(t=ot(t),t&&(typeof i=="string"||i!=null&&!Pc(i))&&(i=Un(i),!i&&Oo(t))?Ei(mr(t),0,a):t.split(i,a)):[]}var Q_=Lo(function(t,i,a){return t+(a?" ":"")+kc(i)});function eb(t,i,a){return t=ot(t),a=a==null?0:io($e(a),0,t.length),i=Un(i),t.slice(a,a+i.length)==i}function tb(t,i,a){var h=E.templateSettings;a&&Fn(t,i,a)&&(i=r),t=ot(t),i=Xa({},i,h,zf);var _=Xa({},i.imports,h.imports,zf),S=ln(_),M=Zu(_,S),P,L,ie=0,oe=i.interpolate||fr,ce="__p += '",ye=Ju((i.escape||fr).source+"|"+oe.source+"|"+(oe===Ke?er:fr).source+"|"+(i.evaluate||fr).source+"|$","g"),xe="//# sourceURL="+(ut.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ms+"]")+`
`;t.replace(ye,function(Re,We,Ze,Xn,Nn,Yn){return Ze||(Ze=Xn),ce+=t.slice(ie,Yn).replace(Fr,Tm),We&&(P=!0,ce+=`' +
__e(`+We+`) +
'`),Nn&&(L=!0,ce+=`';
`+Nn+`;
__p += '`),Ze&&(ce+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),ie=Yn+Re.length,Re}),ce+=`';
`;var Ie=ut.call(i,"variable")&&i.variable;if(!Ie)ce=`with (obj) {
`+ce+`
}
`;else if(ki.test(Ie))throw new Pe(c);ce=(L?ce.replace(Qn,""):ce).replace(un,"$1").replace(xn,"$1;"),ce="function("+(Ie||"obj")+`) {
`+(Ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var qe=Nh(function(){return rt(S,xe+"return "+ce).apply(r,M)});if(qe.source=ce,Mc(qe))throw qe;return qe}function nb(t){return ot(t).toLowerCase()}function rb(t){return ot(t).toUpperCase()}function ib(t,i,a){if(t=ot(t),t&&(a||i===r))return zd(t);if(!t||!(i=Un(i)))return t;var h=mr(t),_=mr(i),S=jd(h,_),M=kd(h,_)+1;return Ei(h,S,M).join("")}function ob(t,i,a){if(t=ot(t),t&&(a||i===r))return t.slice(0,qd(t)+1);if(!t||!(i=Un(i)))return t;var h=mr(t),_=kd(h,mr(i))+1;return Ei(h,0,_).join("")}function sb(t,i,a){if(t=ot(t),t&&(a||i===r))return t.replace(Wt,"");if(!t||!(i=Un(i)))return t;var h=mr(t),_=jd(h,mr(i));return Ei(h,_).join("")}function ab(t,i){var a=V,h=J;if(Rt(i)){var _="separator"in i?i.separator:_;a="length"in i?$e(i.length):a,h="omission"in i?Un(i.omission):h}t=ot(t);var S=t.length;if(Oo(t)){var M=mr(t);S=M.length}if(a>=S)return t;var P=a-Mo(h);if(P<1)return h;var L=M?Ei(M,0,P).join(""):t.slice(0,P);if(_===r)return L+h;if(M&&(P+=L.length-P),Pc(_)){if(t.slice(P).search(_)){var ie,oe=L;for(_.global||(_=Ju(_.source,ot(mn.exec(_))+"g")),_.lastIndex=0;ie=_.exec(oe);)var ce=ie.index;L=L.slice(0,ce===r?P:ce)}}else if(t.indexOf(Un(_),P)!=P){var ye=L.lastIndexOf(_);ye>-1&&(L=L.slice(0,ye))}return L+h}function ub(t){return t=ot(t),t&&Q.test(t)?t.replace(gn,zm):t}var cb=Lo(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),kc=Tf("toUpperCase");function Fh(t,i,a){return t=ot(t),i=a?r:i,i===r?Rm(t)?$m(t):xm(t):t.match(i)||[]}var Nh=He(function(t,i){try{return cn(t,r,i)}catch(a){return Mc(a)?a:new Pe(a)}}),lb=Jr(function(t,i){return ir(i,function(a){a=Br(a),Zr(t,a,Bc(t[a],t))}),t});function db(t){var i=t==null?0:t.length,a=Te();return t=i?Nt(t,function(h){if(typeof h[1]!="function")throw new or(l);return[a(h[0]),h[1]]}):[],He(function(h){for(var _=-1;++_<i;){var S=t[_];if(cn(S[0],this,h))return cn(S[1],this,h)}})}function fb(t){return zy(ar(t,g))}function $c(t){return function(){return t}}function hb(t,i){return t==null||t!==t?i:t}var pb=Rf(),gb=Rf(!0);function $n(t){return t}function qc(t){return uf(typeof t=="function"?t:ar(t,g))}function mb(t){return lf(ar(t,g))}function yb(t,i){return df(t,ar(i,g))}var vb=He(function(t,i){return function(a){return Ss(a,t,i)}}),Db=He(function(t,i){return function(a){return Ss(t,a,i)}});function Lc(t,i,a){var h=ln(i),_=Na(i,h);a==null&&!(Rt(i)&&(_.length||!h.length))&&(a=i,i=t,t=this,_=Na(i,ln(i)));var S=!(Rt(a)&&"chain"in a)||!!a.chain,M=ei(t);return ir(_,function(P){var L=i[P];t[P]=L,M&&(t.prototype[P]=function(){var ie=this.__chain__;if(S||ie){var oe=t(this.__wrapped__),ce=oe.__actions__=zn(this.__actions__);return ce.push({func:L,args:arguments,thisArg:t}),oe.__chain__=ie,oe}return L.apply(t,Di([this.value()],arguments))})}),t}function _b(){return _e._===this&&(_e._=Um),this}function Hc(){}function bb(t){return t=$e(t),He(function(i){return ff(i,t)})}var wb=_c(Nt),xb=_c(Rd),Cb=_c(Vu);function Th(t){return Ac(t)?Uu(Br(t)):e1(t)}function Eb(t){return function(i){return t==null?r:oo(t,i)}}var Sb=Of(),Ab=Of(!0);function Gc(){return[]}function Vc(){return!1}function Fb(){return{}}function Nb(){return""}function Tb(){return!0}function Ib(t,i){if(t=$e(t),t<1||t>se)return[];var a=ue,h=yn(t,ue);i=Te(i),t-=ue;for(var _=Yu(h,i);++a<t;)i(a);return _}function Rb(t){return ze(t)?Nt(t,Br):Wn(t)?[t]:zn(Zf(ot(t)))}function Bb(t){var i=++Gm;return ot(t)+i}var Ob=Ma(function(t,i){return t+i},0),Mb=bc("ceil"),Pb=Ma(function(t,i){return t/i},1),zb=bc("floor");function jb(t){return t&&t.length?Fa(t,$n,sc):r}function kb(t,i){return t&&t.length?Fa(t,Te(i,2),sc):r}function $b(t){return Md(t,$n)}function qb(t,i){return Md(t,Te(i,2))}function Lb(t){return t&&t.length?Fa(t,$n,lc):r}function Hb(t,i){return t&&t.length?Fa(t,Te(i,2),lc):r}var Gb=Ma(function(t,i){return t*i},1),Vb=bc("round"),Ub=Ma(function(t,i){return t-i},0);function Wb(t){return t&&t.length?Xu(t,$n):0}function Xb(t,i){return t&&t.length?Xu(t,Te(i,2)):0}return E.after=mD,E.ary=ah,E.assign=r_,E.assignIn=bh,E.assignInWith=Xa,E.assignWith=i_,E.at=o_,E.before=uh,E.bind=Bc,E.bindAll=lb,E.bindKey=ch,E.castArray=FD,E.chain=ih,E.chunk=z1,E.compact=j1,E.concat=k1,E.cond=db,E.conforms=fb,E.constant=$c,E.countBy=Wv,E.create=s_,E.curry=lh,E.curryRight=dh,E.debounce=fh,E.defaults=a_,E.defaultsDeep=u_,E.defer=yD,E.delay=vD,E.difference=$1,E.differenceBy=q1,E.differenceWith=L1,E.drop=H1,E.dropRight=G1,E.dropRightWhile=V1,E.dropWhile=U1,E.fill=W1,E.filter=Yv,E.flatMap=Jv,E.flatMapDeep=Qv,E.flatMapDepth=eD,E.flatten=eh,E.flattenDeep=X1,E.flattenDepth=Y1,E.flip=DD,E.flow=pb,E.flowRight=gb,E.fromPairs=Z1,E.functions=g_,E.functionsIn=m_,E.groupBy=tD,E.initial=J1,E.intersection=Q1,E.intersectionBy=ev,E.intersectionWith=tv,E.invert=v_,E.invertBy=D_,E.invokeMap=rD,E.iteratee=qc,E.keyBy=iD,E.keys=ln,E.keysIn=kn,E.map=La,E.mapKeys=b_,E.mapValues=w_,E.matches=mb,E.matchesProperty=yb,E.memoize=Ga,E.merge=x_,E.mergeWith=wh,E.method=vb,E.methodOf=Db,E.mixin=Lc,E.negate=Va,E.nthArg=bb,E.omit=C_,E.omitBy=E_,E.once=_D,E.orderBy=oD,E.over=wb,E.overArgs=bD,E.overEvery=xb,E.overSome=Cb,E.partial=Oc,E.partialRight=hh,E.partition=sD,E.pick=S_,E.pickBy=xh,E.property=Th,E.propertyOf=Eb,E.pull=ov,E.pullAll=nh,E.pullAllBy=sv,E.pullAllWith=av,E.pullAt=uv,E.range=Sb,E.rangeRight=Ab,E.rearg=wD,E.reject=cD,E.remove=cv,E.rest=xD,E.reverse=Ic,E.sampleSize=dD,E.set=F_,E.setWith=N_,E.shuffle=fD,E.slice=lv,E.sortBy=gD,E.sortedUniq=yv,E.sortedUniqBy=vv,E.split=J_,E.spread=CD,E.tail=Dv,E.take=_v,E.takeRight=bv,E.takeRightWhile=wv,E.takeWhile=xv,E.tap=jv,E.throttle=ED,E.thru=qa,E.toArray=vh,E.toPairs=Ch,E.toPairsIn=Eh,E.toPath=Rb,E.toPlainObject=_h,E.transform=T_,E.unary=SD,E.union=Cv,E.unionBy=Ev,E.unionWith=Sv,E.uniq=Av,E.uniqBy=Fv,E.uniqWith=Nv,E.unset=I_,E.unzip=Rc,E.unzipWith=rh,E.update=R_,E.updateWith=B_,E.values=Vo,E.valuesIn=O_,E.without=Tv,E.words=Fh,E.wrap=AD,E.xor=Iv,E.xorBy=Rv,E.xorWith=Bv,E.zip=Ov,E.zipObject=Mv,E.zipObjectDeep=Pv,E.zipWith=zv,E.entries=Ch,E.entriesIn=Eh,E.extend=bh,E.extendWith=Xa,Lc(E,E),E.add=Ob,E.attempt=Nh,E.camelCase=j_,E.capitalize=Sh,E.ceil=Mb,E.clamp=M_,E.clone=ND,E.cloneDeep=ID,E.cloneDeepWith=RD,E.cloneWith=TD,E.conformsTo=BD,E.deburr=Ah,E.defaultTo=hb,E.divide=Pb,E.endsWith=k_,E.eq=vr,E.escape=$_,E.escapeRegExp=q_,E.every=Xv,E.find=Zv,E.findIndex=Jf,E.findKey=c_,E.findLast=Kv,E.findLastIndex=Qf,E.findLastKey=l_,E.floor=zb,E.forEach=oh,E.forEachRight=sh,E.forIn=d_,E.forInRight=f_,E.forOwn=h_,E.forOwnRight=p_,E.get=zc,E.gt=OD,E.gte=MD,E.has=y_,E.hasIn=jc,E.head=th,E.identity=$n,E.includes=nD,E.indexOf=K1,E.inRange=P_,E.invoke=__,E.isArguments=uo,E.isArray=ze,E.isArrayBuffer=PD,E.isArrayLike=jn,E.isArrayLikeObject=Lt,E.isBoolean=zD,E.isBuffer=Si,E.isDate=jD,E.isElement=kD,E.isEmpty=$D,E.isEqual=qD,E.isEqualWith=LD,E.isError=Mc,E.isFinite=HD,E.isFunction=ei,E.isInteger=ph,E.isLength=Ua,E.isMap=gh,E.isMatch=GD,E.isMatchWith=VD,E.isNaN=UD,E.isNative=WD,E.isNil=YD,E.isNull=XD,E.isNumber=mh,E.isObject=Rt,E.isObjectLike=zt,E.isPlainObject=Rs,E.isRegExp=Pc,E.isSafeInteger=ZD,E.isSet=yh,E.isString=Wa,E.isSymbol=Wn,E.isTypedArray=Go,E.isUndefined=KD,E.isWeakMap=JD,E.isWeakSet=QD,E.join=nv,E.kebabCase=L_,E.last=cr,E.lastIndexOf=rv,E.lowerCase=H_,E.lowerFirst=G_,E.lt=e_,E.lte=t_,E.max=jb,E.maxBy=kb,E.mean=$b,E.meanBy=qb,E.min=Lb,E.minBy=Hb,E.stubArray=Gc,E.stubFalse=Vc,E.stubObject=Fb,E.stubString=Nb,E.stubTrue=Tb,E.multiply=Gb,E.nth=iv,E.noConflict=_b,E.noop=Hc,E.now=Ha,E.pad=V_,E.padEnd=U_,E.padStart=W_,E.parseInt=X_,E.random=z_,E.reduce=aD,E.reduceRight=uD,E.repeat=Y_,E.replace=Z_,E.result=A_,E.round=Vb,E.runInContext=$,E.sample=lD,E.size=hD,E.snakeCase=K_,E.some=pD,E.sortedIndex=dv,E.sortedIndexBy=fv,E.sortedIndexOf=hv,E.sortedLastIndex=pv,E.sortedLastIndexBy=gv,E.sortedLastIndexOf=mv,E.startCase=Q_,E.startsWith=eb,E.subtract=Ub,E.sum=Wb,E.sumBy=Xb,E.template=tb,E.times=Ib,E.toFinite=ti,E.toInteger=$e,E.toLength=Dh,E.toLower=nb,E.toNumber=lr,E.toSafeInteger=n_,E.toString=ot,E.toUpper=rb,E.trim=ib,E.trimEnd=ob,E.trimStart=sb,E.truncate=ab,E.unescape=ub,E.uniqueId=Bb,E.upperCase=cb,E.upperFirst=kc,E.each=oh,E.eachRight=sh,E.first=th,Lc(E,function(){var t={};return Ir(E,function(i,a){ut.call(E.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),E.VERSION=o,ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){E[t].placeholder=E}),ir(["drop","take"],function(t,i){Xe.prototype[t]=function(a){a=a===r?1:tn($e(a),0);var h=this.__filtered__&&!i?new Xe(this):this.clone();return h.__filtered__?h.__takeCount__=yn(a,h.__takeCount__):h.__views__.push({size:yn(a,ue),type:t+(h.__dir__<0?"Right":"")}),h},Xe.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),ir(["filter","map","takeWhile"],function(t,i){var a=i+1,h=a==R||a==k;Xe.prototype[t]=function(_){var S=this.clone();return S.__iteratees__.push({iteratee:Te(_,3),type:a}),S.__filtered__=S.__filtered__||h,S}}),ir(["head","last"],function(t,i){var a="take"+(i?"Right":"");Xe.prototype[t]=function(){return this[a](1).value()[0]}}),ir(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");Xe.prototype[t]=function(){return this.__filtered__?new Xe(this):this[a](1)}}),Xe.prototype.compact=function(){return this.filter($n)},Xe.prototype.find=function(t){return this.filter(t).head()},Xe.prototype.findLast=function(t){return this.reverse().find(t)},Xe.prototype.invokeMap=He(function(t,i){return typeof t=="function"?new Xe(this):this.map(function(a){return Ss(a,t,i)})}),Xe.prototype.reject=function(t){return this.filter(Va(Te(t)))},Xe.prototype.slice=function(t,i){t=$e(t);var a=this;return a.__filtered__&&(t>0||i<0)?new Xe(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==r&&(i=$e(i),a=i<0?a.dropRight(-i):a.take(i-t)),a)},Xe.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Xe.prototype.toArray=function(){return this.take(ue)},Ir(Xe.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),_=E[h?"take"+(i=="last"?"Right":""):i],S=h||/^find/.test(i);_&&(E.prototype[i]=function(){var M=this.__wrapped__,P=h?[1]:arguments,L=M instanceof Xe,ie=P[0],oe=L||ze(M),ce=function(We){var Ze=_.apply(E,Di([We],P));return h&&ye?Ze[0]:Ze};oe&&a&&typeof ie=="function"&&ie.length!=1&&(L=oe=!1);var ye=this.__chain__,xe=!!this.__actions__.length,Ie=S&&!ye,qe=L&&!xe;if(!S&&oe){M=qe?M:new Xe(this);var Re=t.apply(M,P);return Re.__actions__.push({func:qa,args:[ce],thisArg:r}),new sr(Re,ye)}return Ie&&qe?t.apply(this,P):(Re=this.thru(ce),Ie?h?Re.value()[0]:Re.value():Re)})}),ir(["pop","push","shift","sort","splice","unshift"],function(t){var i=ha[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",h=/^(?:pop|shift)$/.test(t);E.prototype[t]=function(){var _=arguments;if(h&&!this.__chain__){var S=this.value();return i.apply(ze(S)?S:[],_)}return this[a](function(M){return i.apply(ze(M)?M:[],_)})}}),Ir(Xe.prototype,function(t,i){var a=E[i];if(a){var h=a.name+"";ut.call(ko,h)||(ko[h]=[]),ko[h].push({name:i,func:a})}}),ko[Oa(r,m).name]=[{name:"wrapper",func:r}],Xe.prototype.clone=uy,Xe.prototype.reverse=cy,Xe.prototype.value=ly,E.prototype.at=kv,E.prototype.chain=$v,E.prototype.commit=qv,E.prototype.next=Lv,E.prototype.plant=Gv,E.prototype.reverse=Vv,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=Uv,E.prototype.first=E.prototype.head,Ds&&(E.prototype[Ds]=Hv),E},Po=qm();Je?((Je.exports=Po)._=Po,Ne._=Po):_e._=Po}).call(D6)}(Gs,Gs.exports)),Gs.exports}var b6=_6();const nn=ng(b6);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]],x6=oa("arrow-right-from-line",w6);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]],E6=oa("arrow-right-to-line",C6);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],A6=oa("grid-3x3",S6);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],N6=oa("hash",F6);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],I6=oa("split",T6),R6=(e,n)=>e[n]?.[vt.Input]??e[n]?.[vt.InferredInput]??Zn.fromJson({Object:{}}),hs=(e,{attachGlobals:n=!0,disabled:r=!1}={})=>{const o=mt(({nodeTypes:s,globalType:u})=>{if(!(!Qo()||r))return{nodeTypes:s,globalType:u}});return T.useMemo(()=>{if(!o?.nodeTypes)return;const s=R6(o.nodeTypes,e);return n&&Object.entries(o?.globalType??{}).forEach(([u,l])=>s.set(u,l)),s},[o?.globalType,o?.nodeTypes,n])},ou=(e,n)=>{const r=(e??"").trim(),o=(n??"").trim();return r===o},Xs=(e,n,r={})=>{const{idField:o="id",compareFields:s}=r,u=y=>y[o]||y._id,l=new Map(n.map((y,b)=>[u(y),{...y,index:b}])),c=new Map(e.map((y,b)=>[u(y),{...y,index:b}])),d=[],f=new Set,p=new Set;e.forEach((y,b)=>{l.has(u(y))||f.add(b)}),n.forEach((y,b)=>{c.has(u(y))||p.add(b)});const g=(y,b)=>{const x=Array.from(f).filter(C=>C<b).length,D=Array.from(p).filter(C=>C<y).length,w=b-x;return y-D!==w};return e.forEach((y,b)=>{const x=l.get(u(y));if(!x)d.push({...y,originalIndex:b,_diff:{status:"added",newIndex:b}});else{const D=g(x.index,b),w=s?s(y,x):{hasChanges:!1};w.hasChanges||D?d.push({...y,originalIndex:b,_diff:{status:"modified",positionChanged:D,previousIndex:x.index,newIndex:b,...w.fields?{fields:w.fields}:{}}}):d.push({...y,originalIndex:b,_diff:{status:"unchanged"}})}}),n.forEach((y,b)=>{if(!c.has(u(y))){let x=b;for(;x<d.length&&l.get(u(d[x]))?.index<b;)x++;d.splice(x,0,{...y,originalIndex:b,isRemoved:!0,_diff:{status:"removed",previousIndex:b}})}}),d.map(({originalIndex:y,isRemoved:b,...x})=>x)},B6=(e,{trace:n,decisionGraph:r})=>{const o=Object.values(n).find(u=>u.id===e)?.input;if(typeof o!="object"||Array.isArray(o))return o;const s=Object.fromEntries(Object.values(n).map(u=>{const l=r.nodes.find(c=>c.id===u.id);return!l||l.type==="outputNode"?null:[u.name,u.output]}).filter(u=>!!u));return{...o,$nodes:s}},Z0=({id:e,manager:n})=>{const r=Zt(),o=hs(e,{attachGlobals:!1}),{nodeTrace:s,inputData:u}=mt(({simulate:y,decisionGraph:b})=>({nodeTrace:Ue(y).with({result:Ve.nonNullable},({result:x})=>x.trace[e]).otherwise(()=>null),inputData:Ue(y).with({result:Ve.nonNullable},({result:x})=>B6(e,{trace:x.trace,decisionGraph:b})).otherwise(()=>null)})),{disabled:l,configurable:c,content:d,globalType:f}=mt(({disabled:y,configurable:b,decisionGraph:x,globalType:D})=>({disabled:y,configurable:b,content:(x?.nodes??[]).find(w=>w.id===e)?.content,globalType:D})),p=T.useMemo(()=>{if(!o)return;const y=Ue(d?.inputField).with(Ve.string,x=>o.get(x)).otherwise(()=>o),b=d?.executionMode==="loop"?y.arrayItem():y;return Object.entries(f).forEach(([x,D])=>b.set(x,D)),b},[o,f,d?.inputField,d?.executionMode]),g=T.useMemo(()=>{if(!(!s||!u))return Qo()?{trace:s,inputData:new xw(u)}:{trace:s}},[s,u]);return A.jsx(Nw,{id:e,tableHeight:"100%",value:d,manager:n,disabled:l,configurable:c,inputData:p,debug:g,onChange:y=>{r.updateNode(e,b=>(Object.assign(b.content,y),b))}})};Z0.__docgenInfo={description:"",methods:[],displayName:"TabDecisionTable",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const O6=navigator.platform.includes("Mac"),Ap={Ctrl:"",Backspace:"",Alt:""},mu={shortcut:e=>O6?Object.keys(Ap).reduce((n,r)=>n.replaceAll(r,Ap[r]),e):e},Fp={},Ru=(e,n)=>{const[r,o]=T.useState(()=>Fp?.[e]??n);return T.useEffect(()=>{Fp[e]=r},[r]),[r,o]};function Np(e,n=0){const r=performance.now(),o={};function s(){o.id=requestAnimationFrame(u=>{u-r>n?e():s()})}return s(),o}function Tp(e){e.id&&cancelAnimationFrame(e.id)}function M6(e,n){const[r,o]=T.useState(e?"enter":"from"),s=T.useRef({}),[u,l]=T.useState(e);return T.useEffect(function(){return Tp(s.current),e?(o("from"),l(!0),Np(()=>{o("enter")})):(o("leave"),s.current=Np(()=>{l(!1)},n)),()=>{Tp(s.current)}},[e,n]),{stage:r,shouldMount:u}}function P6({state:e,timeout:n,children:r}){const{stage:o,shouldMount:s}=M6(e,n);return r(o,s)}const Jl=({className:e,...n})=>A.jsx("div",{className:it("grl-dn__graphCard",e),...n});Jl.__docgenInfo={description:"",methods:[],displayName:"GraphCard"};var _o=(e=>(e.Blue="var(--node-color-blue)",e.Purple="var(--node-color-purple)",e.Orange="var(--node-color-orange)",e.Green="var(--node-color-green)",e))(_o||{});const Nd=({icon:e,name:n,children:r,actions:o=[],disabled:s=!1,isSelected:u=!1,noBodyPadding:l=!1,color:c="primary",onNameChange:d,menuItems:f=[],status:p,diffStatus:g,compactMode:y,listMode:b,helper:x,details:D,detailsOpen:w=!1,detailsTitle:m="Details",onDetailsClose:C})=>{const I=Ue(c).with("primary",()=>_o.Blue).otherwise(F=>F);return A.jsxs("div",{className:it("grl-dn",y&&"grl-dn--compact",b&&"grl-dn--list",!g&&u&&"grl-dn--selected",p&&`grl-dn--${p}`,g&&`grl-dn--diff-${g}`),style:{"--node-color":I},onKeyDown:F=>F.stopPropagation(),children:[A.jsxs(Jl,{children:[A.jsxs("div",{className:"grl-dn__status-bar",children:[Array.isArray(x)&&x.filter(F=>!!F).map((F,j)=>A.jsx("div",{className:it("grl-dn__status-icon"),children:F},j)),p==="error"&&A.jsx("div",{className:it("grl-dn__status-icon",`grl-dn__status-icon--${p}`),children:A.jsx(os,{})}),A.jsx(rg,{status:g,style:{fontSize:16}})]}),A.jsxs("div",{className:it("grl-dn__header",y&&"compact"),children:[A.jsx("div",{className:it("grl-dn__header__icon",y&&"compact"),children:e}),A.jsx(Tw,{onChange:d,disabled:s,value:n}),f.length>0&&A.jsx("div",{className:it("grl-dn__header__actions","nodrag"),children:A.jsx(Ys,{trigger:["click"],overlayStyle:{minWidth:250},menu:{items:f},children:A.jsx(ht,{type:"text",size:"small",icon:A.jsx(rC,{})})})})]}),r&&A.jsx("div",{className:it("grl-dn__body",o.length===0&&"grl-dn__body--no-footer",l&&"grl-dn__body--no-padding"),children:r}),o.length>0&&A.jsx("div",{className:it("grl-dn__footer","nodrag"),children:A.jsx("div",{className:"grl-dn__footer__actions",children:o})})]}),A.jsx(P6,{state:w,timeout:100,children:(F,j)=>j&&A.jsx(Jl,{className:"nodrag",style:{transition:"0.1s ease-in-out",transform:F==="enter"?"translateY(0)":"translateY(-10px)",opacity:F==="enter"?1:0},children:A.jsxs("div",{className:"grl-dn__details",children:[A.jsxs("div",{className:"grl-dn__details__header",children:[A.jsx(rn.Text,{className:"grl-dn__details__header__text",children:m}),A.jsx(ht,{type:"text",size:"small",className:"grl-dn__details__header__close",icon:A.jsx(os,{style:{fontSize:8}}),onClick:C})]}),A.jsx("div",{className:"grl-dn__details__body",children:D})]})})})]})};Nd.__docgenInfo={description:"",methods:[],displayName:"DecisionNode",props:{name:{required:!1,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},type:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},helper:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(React.ReactNode | false)[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:"",defaultValue:{value:"[]",computed:!1}},status:{required:!1,tsType:{name:"union",raw:"'error' | 'success' | 'warning'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'success'"},{name:"literal",value:"'warning'"}]},description:""},diffStatus:{required:!1,tsType:{name:"union",raw:"'removed' | 'added' | 'modified' | 'moved'",elements:[{name:"literal",value:"'removed'"},{name:"literal",value:"'added'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'moved'"}]},description:""},noBodyPadding:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | string",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"string"}]},description:"",defaultValue:{value:"'primary'",computed:!1}},menuItems:{required:!1,tsType:{name:"MenuProps['items']",raw:"MenuProps['items']"},description:"",defaultValue:{value:"[]",computed:!1}},onNameChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},compactMode:{required:!1,tsType:{name:"boolean"},description:""},listMode:{required:!1,tsType:{name:"boolean"},description:""},details:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},detailsOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},detailsTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Details'",computed:!1}},onDetailsClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Pi=W.forwardRef(({id:e,handleLeft:n=!0,handleRight:r=!0,className:o,specification:s,name:u,displayError:l,helper:c,actions:d,...f},p)=>{const[g,y]=Ru(`node:details:${e}`,0),[b,x]=Ru(`node:detailsOpen:${e}`,!1),D=Zt(),{nodeError:w,nodeTrace:m,disabled:C,compactMode:I}=mt(({simulate:Y,disabled:ne,compactMode:O})=>({disabled:ne,nodeTrace:Ue(Y).with({result:Ve._},({result:V})=>V?.trace?.[e]).otherwise(()=>null),nodeError:Ue(Y).with({error:{data:{nodeId:e}}},({error:V})=>V).otherwise(()=>null),compactMode:O})),{diff:F}=ca(e),j=s.renderSettings,q=[s.documentationUrl?{key:"documentation",label:A.jsx(ks,{left:"Documentation",right:A.jsx(wg,{})}),onClick:()=>window.open(s.documentationUrl,"_href")}:null,s.documentationUrl?{key:"divider-1",type:"divider"}:null,!l&&{key:"copy-clipboard",label:A.jsx(ks,{left:"Copy to clipboard",right:mu.shortcut("Ctrl + C")}),onClick:()=>{}},!l&&{key:"duplicate",disabled:C,label:A.jsx(ks,{left:"Duplicate",right:mu.shortcut("Ctrl + D")}),onClick:()=>D.duplicateNodes([e])},!l&&{key:"divider-2",type:"divider"},{key:"delete",danger:!0,label:A.jsx(ks,{left:"Delete",right:mu.shortcut("Backspace")}),disabled:C,onClick:()=>Mu.confirm({icon:null,title:"Delete node",content:A.jsxs(rn.Text,{children:["Are you sure you want to delete ",A.jsx(rn.Text,{strong:!0,children:u})," node."]}),okButtonProps:{danger:!0},onOk:()=>D.removeNodes([e])})}].filter(Y=>Y!==!1);return A.jsxs("div",{className:it("grl-graph-node",o),style:{minWidth:220,maxWidth:220},ref:p,onClick:Y=>{const ne=Ue(navigator.platform.includes("Mac")).with(!0,()=>Y.metaKey).otherwise(()=>Y.ctrlKey);D.triggerNodeSelect(e,ne?"toggle":"only")},children:[n&&A.jsx(Mi,{className:it("grl-graph-node__handle-left",I&&"compact"),type:"target",position:Ce.Left,...typeof n!="boolean"?n:{}}),A.jsx(Nd,{menuItems:q,...f,disabled:C,icon:s.icon,color:s.color,type:s.displayName,helper:c,name:u,details:j?A.jsx(j,{id:e}):void 0,detailsOpen:b,detailsTitle:Ue(g).with(0,()=>"Settings").otherwise(()=>{}),onDetailsClose:()=>x(!1),actions:j?[...d??[],A.jsx(ht,{type:"text",style:{marginLeft:"auto"},onClick:()=>{x(g===0?!b:!0),y(0)},children:"Settings"},"settings")]:d,status:Ue([m,w,l]).with([Ve._,Ve._,!0],()=>"error").with([Ve._,Ve.not(Ve.nullish),Ve._],()=>"error").with([Ve.not(Ve.nullish),Ve._,Ve._],()=>"success").otherwise(()=>{}),diffStatus:Ue([F]).with([{status:"added"}],()=>"added").with([{status:"modified"}],()=>"modified").with([{status:"removed"}],()=>"removed").with([{status:"moved"}],()=>"moved").otherwise(()=>{}),onNameChange:Y=>{D.updateNode(e,ne=>(ne.name=Y,ne))},compactMode:I}),r&&A.jsx(Mi,{className:it("grl-graph-node__handle-right",I&&"compact"),type:"source",position:Ce.Right,...typeof r!="boolean"?r:{}})]})});Pi.__docgenInfo={description:"",methods:[],displayName:"GraphNode",props:{id:{required:!0,tsType:{name:"string"},description:""},handleLeft:{required:!1,tsType:{name:"union",raw:"boolean | Partial<HandleProps>",elements:[{name:"boolean"},{name:"Partial",elements:[{name:"HandleProps"}],raw:"Partial<HandleProps>"}]},description:"",defaultValue:{value:"true",computed:!1}},handleRight:{required:!1,tsType:{name:"union",raw:"boolean | Partial<HandleProps>",elements:[{name:"boolean"},{name:"Partial",elements:[{name:"HandleProps"}],raw:"Partial<HandleProps>"}]},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},specification:{required:!0,tsType:{name:"Pick",elements:[{name:"signature",type:"object",raw:`{
  icon?: React.ReactNode;
  type: string;
  color?: DecisionNodeProps['color'];
  group?: string;
  displayName: string | React.ReactNode;
  documentationUrl?: string;
  shortDescription?: string;
  helper?: string | React.ReactNode;
  renderTab?: (props: { id: string; manager?: DragDropManager }) => React.ReactNode;
  getDiffContent?: (current: T, previous: T) => T;
  generateNode: (params: GenerateNodeParams) => Omit<DecisionNode<T>, 'position' | 'id' | 'type'>;
  renderNode: React.FC<MinimalNodeProps & { specification: MinimalNodeSpecification }>;
  renderSettings?: React.FC<{ id: string }>;
  inferTypes?: {
    needsUpdate: (content: T, prevContent: T) => boolean;
    determineOutputType: (state: InferTypeData<T>) => VariableType;
  };

  onNodeAdd?: (node: DecisionNode<T>) => Promise<DecisionNode<T>>;
}`,signature:{properties:[{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"type",value:{name:"string",required:!0}},{key:"color",value:{name:"union",raw:"DecisionNodeProps['color']",required:!1}},{key:"group",value:{name:"string",required:!1}},{key:"displayName",value:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}],required:!0}},{key:"documentationUrl",value:{name:"string",required:!1}},{key:"shortDescription",value:{name:"string",required:!1}},{key:"helper",value:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}],required:!1}},{key:"renderTab",value:{name:"signature",type:"function",raw:"(props: { id: string; manager?: DragDropManager }) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ id: string; manager?: DragDropManager }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"manager",value:{name:"DragDropManager",required:!1}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}},required:!1}},{key:"getDiffContent",value:{name:"signature",type:"function",raw:"(current: T, previous: T) => T",signature:{arguments:[{type:{name:"T"},name:"current"},{type:{name:"T"},name:"previous"}],return:{name:"T"}},required:!1}},{key:"generateNode",value:{name:"signature",type:"function",raw:"(params: GenerateNodeParams) => Omit<DecisionNode<T>, 'position' | 'id' | 'type'>",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  index: number;
}`,signature:{properties:[{key:"index",value:{name:"number",required:!0}}]}},name:"params"}],return:{name:"Omit",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}},{name:"union",raw:"'position' | 'id' | 'type'",elements:[{name:"literal",value:"'position'"},{name:"literal",value:"'id'"},{name:"literal",value:"'type'"}]}],raw:"Omit<DecisionNode<T>, 'position' | 'id' | 'type'>"}},required:!0}},{key:"renderNode",value:{name:"ReactFC",raw:"React.FC<MinimalNodeProps & { specification: MinimalNodeSpecification }>",elements:[{name:"intersection",raw:"MinimalNodeProps & { specification: MinimalNodeSpecification }",elements:[{name:"Pick",elements:[{name:"NodeProps"},{name:"union",raw:"'id' | 'data' | 'selected'",elements:[{name:"literal",value:"'id'"},{name:"literal",value:"'data'"},{name:"literal",value:"'selected'"}]}],raw:"Pick<NodeProps, 'id' | 'data' | 'selected'>"},{name:"signature",type:"object",raw:"{ specification: MinimalNodeSpecification }",signature:{properties:[{key:"specification",value:{name:"MinimalNodeSpecification",required:!0}}]}}]}],required:!0}},{key:"renderSettings",value:{name:"ReactFC",raw:"React.FC<{ id: string }>",elements:[{name:"signature",type:"object",raw:"{ id: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}}]}}],required:!1}},{key:"inferTypes",value:{name:"signature",type:"object",raw:`{
  needsUpdate: (content: T, prevContent: T) => boolean;
  determineOutputType: (state: InferTypeData<T>) => VariableType;
}`,signature:{properties:[{key:"needsUpdate",value:{name:"signature",type:"function",raw:"(content: T, prevContent: T) => boolean",signature:{arguments:[{type:{name:"T"},name:"content"},{type:{name:"T"},name:"prevContent"}],return:{name:"boolean"}},required:!0}},{key:"determineOutputType",value:{name:"signature",type:"function",raw:"(state: InferTypeData<T>) => VariableType",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  input: VariableType;
  content: T;
}`,signature:{properties:[{key:"input",value:{name:"VariableType",required:!0}},{key:"content",value:{name:"T",required:!0}}]}},name:"state"}],return:{name:"VariableType"}},required:!0}}]},required:!1}},{key:"onNodeAdd",value:{name:"signature",type:"function",raw:"(node: DecisionNode<T>) => Promise<DecisionNode<T>>",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}},name:"node"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"Promise<DecisionNode<T>>"}},required:!1}}]}},{name:"union",raw:"'color' | 'icon' | 'displayName' | 'documentationUrl' | 'helper' | 'renderSettings'",elements:[{name:"literal",value:"'color'"},{name:"literal",value:"'icon'"},{name:"literal",value:"'displayName'"},{name:"literal",value:"'documentationUrl'"},{name:"literal",value:"'helper'"},{name:"literal",value:"'renderSettings'"}]}],raw:`Pick<
  NodeSpecification,
  'color' | 'icon' | 'displayName' | 'documentationUrl' | 'helper' | 'renderSettings'
>`},description:""},displayError:{required:!1,tsType:{name:"boolean"},description:""}}};const K0={type:Dt.DecisionTable,icon:A.jsx(A6,{size:"1em"}),displayName:"Decision table",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/decision-tables",shortDescription:"Rules spreadsheet",renderTab:({id:e,manager:n})=>A.jsx(Z0,{id:e,manager:n}),getDiffContent:(e,n)=>Tt(e,r=>{const o={};(e.executionMode??"single")!==(n.executionMode??"single")&&nn.set(o,"executionMode",{status:"modified",previousValue:n.executionMode}),(e.hitPolicy??"first")!==(n.hitPolicy??"first")&&nn.set(o,"hitPolicy",{status:"modified",previousValue:n.hitPolicy}),(e.inputField??"")!==(n.inputField??"")&&nn.set(o,"inputField",{status:"modified",previousValue:n.inputField}),(e.outputPath??"")!==(n.outputPath??"")&&nn.set(o,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough??!1)!==(n.passThrough??!1)&&nn.set(o,"passThrough",{status:"modified",previousValue:n.passThrough});const s=Xs(e?.inputs||[],n?.inputs||[],{compareFields:(c,d)=>{const f=(c.name??"")!==(d.name??""),p=(c.field??"")!==(d.field??""),g=(c.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:f||p||g,fields:{...f&&{name:{status:"modified",previousValue:d.name}},...p&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),u=Xs(e?.outputs||[],n?.outputs||[],{compareFields:(c,d)=>{const f=(c.name??"")!==(d.name??""),p=(c.field??"")!==(d.field??""),g=(c.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:f||p||g,fields:{...f&&{name:{status:"modified",previousValue:d.name}},...p&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),l=Xs(e?.rules||[],n?.rules||[],{idField:"_id",compareFields:(c,d)=>{const f=(c._description??"")!==(d._description??""),p={};s.forEach(y=>{y._diff?.status==="added"?p[y.id]={status:"added"}:y._diff?.status==="removed"?p[y.id]={status:"removed"}:(c?.[y.id]??"")!==(d?.[y.id]??"")&&(p[y.id]={status:"modified",previousValue:d?.[y.id]})});const g={};return u.forEach(y=>{y?._diff?.status==="added"?g[y.id]={status:"added"}:y?._diff?.status==="removed"?g[y.id]={status:"removed"}:(c?.[y.id]??"")!==(d?.[y.id]??"")&&(g[y.id]={status:"modified",previousValue:d?.[y.id]})}),{hasChanges:f||Object.keys(p).length>0||Object.keys(g).length>0,fields:{...f&&{_description:{status:"modified",previousValue:d._description}},...p,...g}}}});return r.inputs=s,r.outputs=u,r.rules=l,s.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&nn.set(o,"inputs",{status:"modified"}),u.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&nn.set(o,"outputs",{status:"modified"}),l.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&nn.set(o,"rules",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:(e,n)=>!Kn(e,n),determineOutputType:({content:e,input:n})=>{let r=n.clone(),o=Zn.fromJson({Object:{}});if(e.inputField&&(r=n.calculateType(e.inputField)),e.executionMode==="loop"&&(r=r.arrayItem()),(e?.outputs||[]).filter(u=>!!u.field).forEach(u=>{for(const l of e.rules){if(!l[u.id])continue;const c=r.calculateType(l[u.id]),d=c.toJson();if(d!=="Any"&&d!=="Null"){o.set(u.field,c);return}}o.setJson(u.field,"Any")}),e.hitPolicy==="collect"&&(o=o.toArray()),e.executionMode==="loop"&&(o=o.toArray()),e.outputPath){const u=Zn.fromJson({Object:{}});u.set(e.outputPath,o),o=u}return e.passThrough&&(o=n.merge(o)),o}},generateNode:({index:e})=>({name:`decisionTable${e}`,content:{hitPolicy:"first",inputs:[{id:crypto.randomUUID(),name:"Input"}],outputs:[{id:crypto.randomUUID(),field:"output",name:"Output"}],rules:[],inputField:null,outputPath:null,passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),{passThrough:u,executionMode:l}=mt(({decisionGraph:c})=>{const d=(c?.nodes??[]).find(f=>f.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return A.jsx(Pi,{id:e,specification:o,name:n.name,isSelected:r,helper:[l==="loop"&&A.jsx(Cg,{}),u&&A.jsx(rd,{})],actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Edit Table"},"edit-table")]})},renderSettings:({id:e})=>{const n=Zt(),r=hs(e),{contentDiff:o}=ca(e),{fields:s,disabled:u}=mt(({decisionGraph:c,disabled:d})=>{const f=(c?.nodes??[]).find(p=>p.id===e)?.content;return{disabled:d,fields:{passThrough:f?.passThrough||!1,inputField:f?.inputField,outputPath:f?.outputPath,executionMode:f?.executionMode||"single",hitPolicy:f?.hitPolicy||"first"}}}),l=c=>{n.updateNode(e,d=>(Object.assign(d.content,c),d))};return A.jsxs("div",{className:"settings-form",children:[A.jsx(oi.Item,{label:"Hit Policy",children:A.jsx(og,{direction:"vertical",size:2,children:A.jsx(fl,{size:"small",previousValue:o?.fields?.hitPolicy?.previousValue,displayDiff:o?.fields?.hitPolicy?.status==="modified",disabled:u,value:s?.hitPolicy,onChange:c=>l({hitPolicy:c?.target?.value}),options:[{value:"first",label:"First"},{value:"collect",label:"Collect"}]})})}),A.jsx(oi.Item,{label:"Passthrough",children:A.jsx(cg,{disabled:u,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:c=>l({passThrough:c})})}),A.jsx(oi.Item,{label:"Input field",children:A.jsx(Bu,{variableType:r,disabled:u,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:c=>l({inputField:c?.trim()||null})})}),A.jsx(oi.Item,{label:"Output path",children:A.jsx(ig,{size:"small",readOnly:u,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:c=>l({outputPath:c?.target?.value?.trim()||null})})}),A.jsx(oi.Item,{label:"Execution mode",children:A.jsx(fl,{size:"small",disabled:u,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:c=>l({executionMode:c?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},J0=({id:e,manager:n})=>{const r=Zt(),o=hs(e,{attachGlobals:!1}),{disabled:s,configurable:u,content:l,trace:c,globalType:d}=mt(({disabled:p,configurable:g,decisionGraph:y,simulate:b,globalType:x})=>({disabled:p,configurable:g,content:(y?.nodes??[]).find(D=>D.id===e)?.content,trace:b&&"result"in b?b.result?.trace[e]:void 0,globalType:x})),f=T.useMemo(()=>{if(!o)return;const p=Ue(l?.inputField).with(Ve.string,y=>o.get(y)).otherwise(()=>o),g=l?.executionMode==="loop"?p.arrayItem():p;return Object.entries(d).forEach(([y,b])=>g.set(y,b)),g},[o,d,l?.inputField,l?.executionMode]);return A.jsx("div",{style:{height:"100%",overflowY:"auto",boxSizing:"border-box"},children:A.jsx(Mw,{traceData:c?.traceData,value:l?.expressions,disabled:s,configurable:u,manager:n,inputData:f,onChange:p=>{r.updateNode(e,g=>(g.content.expressions=p,g))}})})};J0.__docgenInfo={description:"",methods:[],displayName:"TabExpression",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const Q0={type:Dt.Expression,icon:A.jsx(N6,{size:"1em"}),displayName:"Expression",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/expression",shortDescription:"Mapping utility",renderTab:({id:e,manager:n})=>A.jsx(J0,{id:e,manager:n}),getDiffContent:(e,n)=>Tt(e,o=>{const s={};(e.executionMode||!1)!==(n.executionMode||!1)&&nn.set(s,"executionMode",{status:"modified",previousValue:n.executionMode}),ou(e.inputField,n.inputField)||nn.set(s,"inputField",{status:"modified",previousValue:n.inputField}),ou(e.outputPath,n.outputPath)||nn.set(s,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough||!1)!==(n.passThrough||!1)&&nn.set(s,"passThrough",{status:"modified",previousValue:n.passThrough});const u=Xs(e?.expressions||[],n?.expressions||[],{compareFields:(l,c)=>{const d=!ou(l.key,c.key),f=!ou(l.value,c.value);return{hasChanges:d||f,fields:{...d&&{key:{status:"modified",previousValue:c.key}},...f&&{value:{status:"modified",previousValue:c.value}}}}}});return o.expressions=u,u.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&nn.set(s,"expressions",{status:"modified"}),Object.keys(s).length>0&&(o._diff={status:"modified",fields:s}),o}),inferTypes:{needsUpdate:(e,n)=>!Kn(e,n),determineOutputType:({input:e,content:n})=>{let r=e.clone(),o=Zn.fromJson({Object:{}});if(n.inputField&&(r=e.calculateType(n.inputField)),n.executionMode==="loop"&&(r=r.arrayItem()),(n.expressions||[]).forEach(s=>{if(!s.key||!s.value)return;const u=r.calculateType(s.value);r.set(`$.${s.key}`,u),o.set(s.key,u)}),n.executionMode==="loop"&&(o=o.toArray()),n.outputPath){const s=Zn.fromJson({Object:{}});s.set(n.outputPath,o),o=s}return n.passThrough&&(o=e.merge(o)),o}},generateNode:({index:e})=>({name:`expression${e}`,content:{inputField:null,outputPath:null,expressions:[],passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),{passThrough:u,executionMode:l}=mt(({decisionGraph:c})=>{const d=(c?.nodes??[]).find(f=>f.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return A.jsx(Pi,{id:e,specification:o,name:n.name,isSelected:r,actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Edit Expression"},"edit-table")],helper:[l==="loop"&&A.jsx(Cg,{}),u&&A.jsx(rd,{})]})},renderSettings:({id:e})=>{const n=Zt(),r=hs(e),{contentDiff:o}=ca(e),{fields:s,disabled:u}=mt(({decisionGraph:c,disabled:d})=>{const f=(c?.nodes??[]).find(p=>p.id===e)?.content;return{disabled:d,fields:{passThrough:f?.passThrough||!1,inputField:f?.inputField,outputPath:f?.outputPath,executionMode:f?.executionMode||"single"}}}),l=c=>{n.updateNode(e,d=>(Object.assign(d.content,c),d))};return A.jsxs("div",{className:"settings-form",children:[A.jsx(oi.Item,{label:"Passthrough",children:A.jsx(cg,{disabled:u,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:c=>l({passThrough:c})})}),A.jsx(oi.Item,{label:"Input field",children:A.jsx(Bu,{variableType:r,disabled:u,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:c=>{l({inputField:c?.trim()||null})}})}),A.jsx(oi.Item,{label:"Output path",children:A.jsx(ig,{size:"small",readOnly:u,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:c=>l({outputPath:c?.target?.value?.trim()||null})})}),A.jsx(oi.Item,{label:"Execution mode",children:A.jsx(fl,{size:"small",disabled:u,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:c=>l({executionMode:c?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},z6=W.lazy(async()=>({default:(await $w(()=>import("./index-CYxM8YEF.js").then(n=>n.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)).Function})),em=({id:e})=>{const n=nm(e),r=Zt(),o=Y0(x=>x.onFunctionReady),[s,u]=T.useState(),l=hs(e),{nodeTrace:c,disabled:d,content:f,nodeError:p}=mt(({simulate:x,disabled:D,configurable:w,decisionGraph:m})=>({nodeTrace:Ue(x).with({result:Ve._},({result:C})=>C?.trace?.[e]).otherwise(()=>null),nodeError:Ue(x).with({error:{data:{nodeId:e}}},({error:C})=>C).otherwise(()=>null),disabled:D,configurable:w,content:(m?.nodes??[]).find(C=>C.id===e)?.content})),{diff:g,contentDiff:y}=ca(e),b=T.useMemo(()=>n===yu.Stable?y?.fields?.source?.previousValue:g?.fields?.content?.previousValue,[g,y]);return T.useEffect(()=>{if(!s)return;const x=s.languages.typescript.javascriptDefaults.getExtraLibs(),D=Object.entries(x).map(([w,m])=>({filePath:w,content:m.content}));s.languages.typescript.javascriptDefaults.setExtraLibs(D),o?.(s)},[s,o]),A.jsx(T.Suspense,{fallback:A.jsx(ss,{}),children:A.jsx(z6,{onMonacoReady:x=>u(x),value:n===yu.Stable?f.source:f,previousValue:typeof b=="string"?b:void 0,error:p??void 0,inputData:l,onChange:x=>{r.updateNode(e,D=>(n===yu.Stable?D.content={source:x}:D.content=x,D))},disabled:d,trace:c})})};em.__docgenInfo={description:"",methods:[],displayName:"TabFunction",props:{id:{required:!0,tsType:{name:"string"},description:""}}};const tm={type:Dt.Function,icon:A.jsx(rn.Text,{style:{color:"white",fontSize:"inherit"},children:"JS"}),displayName:"Function",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/functions",shortDescription:"Javascript lambda",color:_o.Orange,renderTab:({id:e})=>A.jsx(em,{id:e}),getDiffContent:(e,n)=>{const r={},o=Ue(e).with(Ve.string,()=>0).otherwise(()=>1);Ue([e,n]).with([Ve.string,Ve.string],([u,l])=>{u!==l&&nn.set(r,"source",{previousValue:l,status:"modified"})}).with([{source:Ve.string},{source:Ve.string}],([u,l])=>{u?.source!==l?.source&&nn.set(r,"source",{previousValue:l.source,status:"modified"})}).otherwise(()=>{});const s=Object.keys(r).length>0;return{...o===0?{source:e}:e,...s&&{_diff:{status:"modified",fields:r}}}},generateNode:({index:e})=>({name:`function${e}`,content:{source:Pw}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),u=nm(e);return A.jsx(Pi,{id:e,specification:{...o,displayName:u===1?"Function":A.jsxs("span",{children:["Function v1 ",A.jsx(Ip,{})]})},name:n.name,isSelected:r,helper:[u===0&&A.jsx(Ip,{size:16})],actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Edit Function"},"edit-function")]})}};var yu=(e=>(e[e.Deprecated=0]="Deprecated",e[e.Stable=1]="Stable",e))(yu||{});const nm=e=>{const{kind:n}=mt(r=>({kind:Ue(r.decisionGraph.nodes.find(o=>o.id===e)?.content).with(Ve.string,()=>0).otherwise(()=>1)}));return n},Ip=({size:e})=>A.jsx(xr,{placement:"top",title:'Function v1 will be deprecated in one of the upcoming releases. To use a new Function, drag and drop a new Function Node and copy your logic. For more information click "Documentation". ',children:A.jsx(uC,{style:{color:"var(--grl-color-warning-text)",fontSize:e}})});var Vs={exports:{}};Vs.exports;var Rp;function j6(){return Rp||(Rp=1,function(e,n){var r=200,o="__lodash_hash_undefined__",s=800,u=16,l=9007199254740991,c="[object Arguments]",d="[object Array]",f="[object AsyncFunction]",p="[object Boolean]",g="[object Date]",y="[object Error]",b="[object Function]",x="[object GeneratorFunction]",D="[object Map]",w="[object Number]",m="[object Null]",C="[object Object]",I="[object Proxy]",F="[object RegExp]",j="[object Set]",q="[object String]",Y="[object Undefined]",ne="[object WeakMap]",O="[object ArrayBuffer]",V="[object DataView]",J="[object Float32Array]",ee="[object Float64Array]",Z="[object Int8Array]",R="[object Int16Array]",G="[object Int32Array]",k="[object Uint8Array]",K="[object Uint8ClampedArray]",se="[object Uint16Array]",U="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,ue=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,le={};le[J]=le[ee]=le[Z]=le[R]=le[G]=le[k]=le[K]=le[se]=le[U]=!0,le[c]=le[d]=le[O]=le[p]=le[V]=le[g]=le[y]=le[b]=le[D]=le[w]=le[C]=le[F]=le[j]=le[q]=le[ne]=!1;var ve=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,ge=typeof self=="object"&&self&&self.Object===Object&&self,Ee=ve||ge||Function("return this")(),Oe=n&&!n.nodeType&&n,De=Oe&&!0&&e&&!e.nodeType&&e,Se=De&&De.exports===Oe,Be=Se&&ve.process,Et=function(){try{var v=De&&De.require&&De.require("util").types;return v||Be&&Be.binding&&Be.binding("util")}catch{}}(),Qe=Et&&Et.isTypedArray;function kt(v,N,z){switch(z.length){case 0:return v.call(N);case 1:return v.call(N,z[0]);case 2:return v.call(N,z[0],z[1]);case 3:return v.call(N,z[0],z[1],z[2])}return v.apply(N,z)}function et(v,N){for(var z=-1,he=Array(v);++z<v;)he[z]=N(z);return he}function tt(v){return function(N){return v(N)}}function on(v,N){return v?.[N]}function ke(v,N){return function(z){return v(N(z))}}var we=Array.prototype,$t=Function.prototype,Bt=Object.prototype,ct=Ee["__core-js_shared__"],Ot=$t.toString,St=Bt.hasOwnProperty,sn=function(){var v=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),Kt=Bt.toString,wn=Ot.call(Object),Mt=RegExp("^"+Ot.call(St).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pt=Se?Ee.Buffer:void 0,Vt=Ee.Symbol,_t=Ee.Uint8Array;pt&&pt.allocUnsafe;var lt=ke(Object.getPrototypeOf,Object),Pt=Object.create,hn=Bt.propertyIsEnumerable,an=we.splice,bt=Vt?Vt.toStringTag:void 0,At=function(){try{var v=Yi(Object,"defineProperty");return v({},"",{}),v}catch{}}(),Jt=pt?pt.isBuffer:void 0,Qn=Math.max,un=Date.now,xn=Yi(Ee,"Map"),gn=Yi(Object,"create"),H=function(){function v(){}return function(N){if(!gr(N))return{};if(Pt)return Pt(N);v.prototype=N;var z=new v;return v.prototype=void 0,z}}();function Q(v){var N=-1,z=v==null?0:v.length;for(this.clear();++N<z;){var he=v[N];this.set(he[0],he[1])}}function pe(){this.__data__=gn?gn(null):{},this.size=0}function Fe(v){var N=this.has(v)&&delete this.__data__[v];return this.size-=N?1:0,N}function dt(v){var N=this.__data__;if(gn){var z=N[v];return z===o?void 0:z}return St.call(N,v)?N[v]:void 0}function Ke(v){var N=this.__data__;return gn?N[v]!==void 0:St.call(N,v)}function Ft(v,N){var z=this.__data__;return this.size+=this.has(v)?0:1,z[v]=gn&&N===void 0?o:N,this}Q.prototype.clear=pe,Q.prototype.delete=Fe,Q.prototype.get=dt,Q.prototype.has=Ke,Q.prototype.set=Ft;function wt(v){var N=-1,z=v==null?0:v.length;for(this.clear();++N<z;){var he=v[N];this.set(he[0],he[1])}}function Ut(){this.__data__=[],this.size=0}function Rn(v){var N=this.__data__,z=Fr(N,v);if(z<0)return!1;var he=N.length-1;return z==he?N.pop():an.call(N,z,1),--this.size,!0}function qt(v){var N=this.__data__,z=Fr(N,v);return z<0?void 0:N[z][1]}function Wt(v){return Fr(this.__data__,v)>-1}function Bn(v,N){var z=this.__data__,he=Fr(z,v);return he<0?(++this.size,z.push([v,N])):z[he][1]=N,this}wt.prototype.clear=Ut,wt.prototype.delete=Rn,wt.prototype.get=qt,wt.prototype.has=Wt,wt.prototype.set=Bn;function On(v){var N=-1,z=v==null?0:v.length;for(this.clear();++N<z;){var he=v[N];this.set(he[0],he[1])}}function Hn(){this.size=0,this.__data__={hash:new Q,map:new(xn||wt),string:new Q}}function zi(v){var N=Hr(this,v).delete(v);return this.size-=N?1:0,N}function ji(v){return Hr(this,v).get(v)}function ki(v){return Hr(this,v).has(v)}function fi(v,N){var z=Hr(this,v),he=z.size;return z.set(v,N),this.size+=z.size==he?0:1,this}On.prototype.clear=Hn,On.prototype.delete=zi,On.prototype.get=ji,On.prototype.has=ki,On.prototype.set=fi;function er(v){var N=this.__data__=new wt(v);this.size=N.size}function mn(){this.__data__=new wt,this.size=0}function $i(v){var N=this.__data__,z=N.delete(v);return this.size=N.size,z}function qi(v){return this.__data__.get(v)}function Li(v){return this.__data__.has(v)}function Hi(v,N){var z=this.__data__;if(z instanceof wt){var he=z.__data__;if(!xn||he.length<r-1)return he.push([v,N]),this.size=++z.size,this;z=this.__data__=new On(he)}return z.set(v,N),this.size=z.size,this}er.prototype.clear=mn,er.prototype.delete=$i,er.prototype.get=qi,er.prototype.has=Li,er.prototype.set=Hi;function Gi(v,N){var z=Gn(v),he=!z&&Zi(v),me=!z&&!he&&Ur(v),Ae=!z&&!he&&!me&&Ji(v),Me=z||he||me||Ae,_e=Me?et(v.length,String):[],Ne=_e.length;for(var Je in v)Me&&(Je=="length"||me&&(Je=="offset"||Je=="parent")||Ae&&(Je=="buffer"||Je=="byteLength"||Je=="byteOffset")||Gr(Je,Ne))||_e.push(Je);return _e}function Cn(v,N,z){(z!==void 0&&!Vr(v[N],z)||z===void 0&&!(N in v))&&tr(v,N,z)}function fr(v,N,z){var he=v[N];(!(St.call(v,N)&&Vr(he,z))||z===void 0&&!(N in v))&&tr(v,N,z)}function Fr(v,N){for(var z=v.length;z--;)if(Vr(v[z][0],N))return z;return-1}function tr(v,N,z){N=="__proto__"&&At?At(v,N,{configurable:!0,enumerable:!0,value:z,writable:!0}):v[N]=z}var Vi=Lr();function Nr(v){return v==null?v===void 0?Y:m:bt&&bt in Object(v)?xo(v):So(v)}function hr(v){return nr(v)&&Nr(v)==c}function hi(v){if(!gr(v)||gi(v))return!1;var N=Ki(v)?Mt:ue;return N.test(To(v))}function jr(v){return nr(v)&&yi(v.length)&&!!le[Nr(v)]}function En(v){if(!gr(v))return Sn(v);var N=pr(v),z=[];for(var he in v)he=="constructor"&&(N||!St.call(v,he))||z.push(he);return z}function pi(v,N,z,he,me){v!==N&&Vi(N,function(Ae,Me){if(me||(me=new er),gr(Ae))Ui(v,N,Me,z,pi,he,me);else{var _e=he?he(Mn(v,Me),Ae,Me+"",v,N,me):void 0;_e===void 0&&(_e=Ae),Cn(v,Me,_e)}},Qi)}function Ui(v,N,z,he,me,Ae,Me){var _e=Mn(v,z),Ne=Mn(N,z),Je=Me.get(Ne);if(Je){Cn(v,z,Je);return}var ft=Ae?Ae(_e,Ne,z+"",v,N,Me):void 0,yt=ft===void 0;if(yt){var at=Gn(Ne),Qt=!at&&Ur(Ne),Pn=!at&&!Qt&&Ji(Ne);ft=Ne,at||Qt||Pn?Gn(_e)?ft=_e:Io(_e)?ft=Wi(_e):Qt?(yt=!1,ft=bo(Ne)):Pn?(yt=!1,ft=$r(Ne)):ft=[]:Ro(Ne)||Zi(Ne)?(ft=_e,Zi(_e)?ft=Wr(_e):(!gr(_e)||Ki(_e))&&(ft=Co(Ne))):yt=!1}yt&&(Me.set(Ne,ft),me(ft,Ne,he,Ae,Me),Me.delete(Ne)),Cn(v,z,ft)}function kr(v,N){return Fo(Ao(v,N,nt),v+"")}var ps=At?function(v,N){return At(v,"toString",{configurable:!0,enumerable:!1,value:st(N),writable:!0})}:nt;function bo(v,N){return v.slice()}function wo(v){var N=new v.constructor(v.byteLength);return new _t(N).set(new _t(v)),N}function $r(v,N){var z=wo(v.buffer);return new v.constructor(z,v.byteOffset,v.length)}function Wi(v,N){var z=-1,he=v.length;for(N||(N=Array(he));++z<he;)N[z]=v[z];return N}function qr(v,N,z,he){var me=!z;z||(z={});for(var Ae=-1,Me=N.length;++Ae<Me;){var _e=N[Ae],Ne=void 0;Ne===void 0&&(Ne=v[_e]),me?tr(z,_e,Ne):fr(z,_e,Ne)}return z}function Xi(v){return kr(function(N,z){var he=-1,me=z.length,Ae=me>1?z[me-1]:void 0,Me=me>2?z[2]:void 0;for(Ae=v.length>3&&typeof Ae=="function"?(me--,Ae):void 0,Me&&gs(z[0],z[1],Me)&&(Ae=me<3?void 0:Ae,me=1),N=Object(N);++he<me;){var _e=z[he];_e&&v(N,_e,he,Ae)}return N})}function Lr(v){return function(N,z,he){for(var me=-1,Ae=Object(N),Me=he(N),_e=Me.length;_e--;){var Ne=Me[++me];if(z(Ae[Ne],Ne,Ae)===!1)break}return N}}function Hr(v,N){var z=v.__data__;return Eo(N)?z[typeof N=="string"?"string":"hash"]:z.map}function Yi(v,N){var z=on(v,N);return hi(z)?z:void 0}function xo(v){var N=St.call(v,bt),z=v[bt];try{v[bt]=void 0;var he=!0}catch{}var me=Kt.call(v);return he&&(N?v[bt]=z:delete v[bt]),me}function Co(v){return typeof v.constructor=="function"&&!pr(v)?H(lt(v)):{}}function Gr(v,N){var z=typeof v;return N=N??l,!!N&&(z=="number"||z!="symbol"&&de.test(v))&&v>-1&&v%1==0&&v<N}function gs(v,N,z){if(!gr(z))return!1;var he=typeof N;return(he=="number"?mi(z)&&Gr(N,z.length):he=="string"&&N in z)?Vr(z[N],v):!1}function Eo(v){var N=typeof v;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?v!=="__proto__":v===null}function gi(v){return!!sn&&sn in v}function pr(v){var N=v&&v.constructor,z=typeof N=="function"&&N.prototype||Bt;return v===z}function Sn(v){var N=[];if(v!=null)for(var z in Object(v))N.push(z);return N}function So(v){return Kt.call(v)}function Ao(v,N,z){return N=Qn(N===void 0?v.length-1:N,0),function(){for(var he=arguments,me=-1,Ae=Qn(he.length-N,0),Me=Array(Ae);++me<Ae;)Me[me]=he[N+me];me=-1;for(var _e=Array(N+1);++me<N;)_e[me]=he[me];return _e[N]=z(Me),kt(v,this,_e)}}function Mn(v,N){if(!(N==="constructor"&&typeof v[N]=="function")&&N!="__proto__")return v[N]}var Fo=No(ps);function No(v){var N=0,z=0;return function(){var he=un(),me=u-(he-z);if(z=he,me>0){if(++N>=s)return arguments[0]}else N=0;return v.apply(void 0,arguments)}}function To(v){if(v!=null){try{return Ot.call(v)}catch{}try{return v+""}catch{}}return""}function Vr(v,N){return v===N||v!==v&&N!==N}var Zi=hr(function(){return arguments}())?hr:function(v){return nr(v)&&St.call(v,"callee")&&!hn.call(v,"callee")},Gn=Array.isArray;function mi(v){return v!=null&&yi(v.length)&&!Ki(v)}function Io(v){return nr(v)&&mi(v)}var Ur=Jt||B;function Ki(v){if(!gr(v))return!1;var N=Nr(v);return N==b||N==x||N==f||N==I}function yi(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=l}function gr(v){var N=typeof v;return v!=null&&(N=="object"||N=="function")}function nr(v){return v!=null&&typeof v=="object"}function Ro(v){if(!nr(v)||Nr(v)!=C)return!1;var N=lt(v);if(N===null)return!0;var z=St.call(N,"constructor")&&N.constructor;return typeof z=="function"&&z instanceof z&&Ot.call(z)==wn}var Ji=Qe?tt(Qe):jr;function Wr(v){return qr(v,Qi(v))}function Qi(v){return mi(v)?Gi(v):En(v)}var ms=Xi(function(v,N,z){pi(v,N,z)});function st(v){return function(){return v}}function nt(v){return v}function B(){return!1}e.exports=ms}(Vs,Vs.exports)),Vs.exports}var Us={exports:{}};Us.exports;var Bp;function rm(){return Bp||(Bp=1,function(e,n){var r=200,o="__lodash_hash_undefined__",s=1,u=2,l=9007199254740991,c="[object Arguments]",d="[object Array]",f="[object AsyncFunction]",p="[object Boolean]",g="[object Date]",y="[object Error]",b="[object Function]",x="[object GeneratorFunction]",D="[object Map]",w="[object Number]",m="[object Null]",C="[object Object]",I="[object Promise]",F="[object Proxy]",j="[object RegExp]",q="[object Set]",Y="[object String]",ne="[object Symbol]",O="[object Undefined]",V="[object WeakMap]",J="[object ArrayBuffer]",ee="[object DataView]",Z="[object Float32Array]",R="[object Float64Array]",G="[object Int8Array]",k="[object Int16Array]",K="[object Int32Array]",se="[object Uint8Array]",U="[object Uint8ClampedArray]",re="[object Uint16Array]",ue="[object Uint32Array]",de=/[\\^$.*+?()[\]{}|]/g,le=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,ge={};ge[Z]=ge[R]=ge[G]=ge[k]=ge[K]=ge[se]=ge[U]=ge[re]=ge[ue]=!0,ge[c]=ge[d]=ge[J]=ge[p]=ge[ee]=ge[g]=ge[y]=ge[b]=ge[D]=ge[w]=ge[C]=ge[j]=ge[q]=ge[Y]=ge[V]=!1;var Ee=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,Oe=typeof self=="object"&&self&&self.Object===Object&&self,De=Ee||Oe||Function("return this")(),Se=n&&!n.nodeType&&n,Be=Se&&!0&&e&&!e.nodeType&&e,Et=Be&&Be.exports===Se,Qe=Et&&Ee.process,kt=function(){try{return Qe&&Qe.binding&&Qe.binding("util")}catch{}}(),et=kt&&kt.isTypedArray;function tt(B,v){for(var N=-1,z=B==null?0:B.length,he=0,me=[];++N<z;){var Ae=B[N];v(Ae,N,B)&&(me[he++]=Ae)}return me}function on(B,v){for(var N=-1,z=v.length,he=B.length;++N<z;)B[he+N]=v[N];return B}function ke(B,v){for(var N=-1,z=B==null?0:B.length;++N<z;)if(v(B[N],N,B))return!0;return!1}function we(B,v){for(var N=-1,z=Array(B);++N<B;)z[N]=v(N);return z}function $t(B){return function(v){return B(v)}}function Bt(B,v){return B.has(v)}function ct(B,v){return B?.[v]}function Ot(B){var v=-1,N=Array(B.size);return B.forEach(function(z,he){N[++v]=[he,z]}),N}function St(B,v){return function(N){return B(v(N))}}function sn(B){var v=-1,N=Array(B.size);return B.forEach(function(z){N[++v]=z}),N}var Kt=Array.prototype,wn=Function.prototype,Mt=Object.prototype,pt=De["__core-js_shared__"],Vt=wn.toString,_t=Mt.hasOwnProperty,lt=function(){var B=/[^.]+$/.exec(pt&&pt.keys&&pt.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""}(),Pt=Mt.toString,hn=RegExp("^"+Vt.call(_t).replace(de,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=Et?De.Buffer:void 0,bt=De.Symbol,At=De.Uint8Array,Jt=Mt.propertyIsEnumerable,Qn=Kt.splice,un=bt?bt.toStringTag:void 0,xn=Object.getOwnPropertySymbols,gn=an?an.isBuffer:void 0,H=St(Object.keys,Object),Q=Sn(De,"DataView"),pe=Sn(De,"Map"),Fe=Sn(De,"Promise"),dt=Sn(De,"Set"),Ke=Sn(De,"WeakMap"),Ft=Sn(Object,"create"),wt=Gn(Q),Ut=Gn(pe),Rn=Gn(Fe),qt=Gn(dt),Wt=Gn(Ke),Bn=bt?bt.prototype:void 0,On=Bn?Bn.valueOf:void 0;function Hn(B){var v=-1,N=B==null?0:B.length;for(this.clear();++v<N;){var z=B[v];this.set(z[0],z[1])}}function zi(){this.__data__=Ft?Ft(null):{},this.size=0}function ji(B){var v=this.has(B)&&delete this.__data__[B];return this.size-=v?1:0,v}function ki(B){var v=this.__data__;if(Ft){var N=v[B];return N===o?void 0:N}return _t.call(v,B)?v[B]:void 0}function fi(B){var v=this.__data__;return Ft?v[B]!==void 0:_t.call(v,B)}function er(B,v){var N=this.__data__;return this.size+=this.has(B)?0:1,N[B]=Ft&&v===void 0?o:v,this}Hn.prototype.clear=zi,Hn.prototype.delete=ji,Hn.prototype.get=ki,Hn.prototype.has=fi,Hn.prototype.set=er;function mn(B){var v=-1,N=B==null?0:B.length;for(this.clear();++v<N;){var z=B[v];this.set(z[0],z[1])}}function $i(){this.__data__=[],this.size=0}function qi(B){var v=this.__data__,N=$r(v,B);if(N<0)return!1;var z=v.length-1;return N==z?v.pop():Qn.call(v,N,1),--this.size,!0}function Li(B){var v=this.__data__,N=$r(v,B);return N<0?void 0:v[N][1]}function Hi(B){return $r(this.__data__,B)>-1}function Gi(B,v){var N=this.__data__,z=$r(N,B);return z<0?(++this.size,N.push([B,v])):N[z][1]=v,this}mn.prototype.clear=$i,mn.prototype.delete=qi,mn.prototype.get=Li,mn.prototype.has=Hi,mn.prototype.set=Gi;function Cn(B){var v=-1,N=B==null?0:B.length;for(this.clear();++v<N;){var z=B[v];this.set(z[0],z[1])}}function fr(){this.size=0,this.__data__={hash:new Hn,map:new(pe||mn),string:new Hn}}function Fr(B){var v=pr(this,B).delete(B);return this.size-=v?1:0,v}function tr(B){return pr(this,B).get(B)}function Vi(B){return pr(this,B).has(B)}function Nr(B,v){var N=pr(this,B),z=N.size;return N.set(B,v),this.size+=N.size==z?0:1,this}Cn.prototype.clear=fr,Cn.prototype.delete=Fr,Cn.prototype.get=tr,Cn.prototype.has=Vi,Cn.prototype.set=Nr;function hr(B){var v=-1,N=B==null?0:B.length;for(this.__data__=new Cn;++v<N;)this.add(B[v])}function hi(B){return this.__data__.set(B,o),this}function jr(B){return this.__data__.has(B)}hr.prototype.add=hr.prototype.push=hi,hr.prototype.has=jr;function En(B){var v=this.__data__=new mn(B);this.size=v.size}function pi(){this.__data__=new mn,this.size=0}function Ui(B){var v=this.__data__,N=v.delete(B);return this.size=v.size,N}function kr(B){return this.__data__.get(B)}function ps(B){return this.__data__.has(B)}function bo(B,v){var N=this.__data__;if(N instanceof mn){var z=N.__data__;if(!pe||z.length<r-1)return z.push([B,v]),this.size=++N.size,this;N=this.__data__=new Cn(z)}return N.set(B,v),this.size=N.size,this}En.prototype.clear=pi,En.prototype.delete=Ui,En.prototype.get=kr,En.prototype.has=ps,En.prototype.set=bo;function wo(B,v){var N=Ur(B),z=!N&&Io(B),he=!N&&!z&&yi(B),me=!N&&!z&&!he&&Qi(B),Ae=N||z||he||me,Me=Ae?we(B.length,String):[],_e=Me.length;for(var Ne in B)_t.call(B,Ne)&&!(Ae&&(Ne=="length"||he&&(Ne=="offset"||Ne=="parent")||me&&(Ne=="buffer"||Ne=="byteLength"||Ne=="byteOffset")||Fo(Ne,_e)))&&Me.push(Ne);return Me}function $r(B,v){for(var N=B.length;N--;)if(mi(B[N][0],v))return N;return-1}function Wi(B,v,N){var z=v(B);return Ur(B)?z:on(z,N(B))}function qr(B){return B==null?B===void 0?O:m:un&&un in Object(B)?So(B):Zi(B)}function Xi(B){return Wr(B)&&qr(B)==c}function Lr(B,v,N,z,he){return B===v?!0:B==null||v==null||!Wr(B)&&!Wr(v)?B!==B&&v!==v:Hr(B,v,N,z,Lr,he)}function Hr(B,v,N,z,he,me){var Ae=Ur(B),Me=Ur(v),_e=Ae?d:Mn(B),Ne=Me?d:Mn(v);_e=_e==c?C:_e,Ne=Ne==c?C:Ne;var Je=_e==C,ft=Ne==C,yt=_e==Ne;if(yt&&yi(B)){if(!yi(v))return!1;Ae=!0,Je=!1}if(yt&&!Je)return me||(me=new En),Ae||Qi(B)?Gr(B,v,N,z,he,me):gs(B,v,_e,N,z,he,me);if(!(N&s)){var at=Je&&_t.call(B,"__wrapped__"),Qt=ft&&_t.call(v,"__wrapped__");if(at||Qt){var Pn=at?B.value():B,rr=Qt?v.value():v;return me||(me=new En),he(Pn,rr,N,z,me)}}return yt?(me||(me=new En),Eo(B,v,N,z,he,me)):!1}function Yi(B){if(!Ji(B)||To(B))return!1;var v=nr(B)?hn:le;return v.test(Gn(B))}function xo(B){return Wr(B)&&Ro(B.length)&&!!ge[qr(B)]}function Co(B){if(!Vr(B))return H(B);var v=[];for(var N in Object(B))_t.call(B,N)&&N!="constructor"&&v.push(N);return v}function Gr(B,v,N,z,he,me){var Ae=N&s,Me=B.length,_e=v.length;if(Me!=_e&&!(Ae&&_e>Me))return!1;var Ne=me.get(B);if(Ne&&me.get(v))return Ne==v;var Je=-1,ft=!0,yt=N&u?new hr:void 0;for(me.set(B,v),me.set(v,B);++Je<Me;){var at=B[Je],Qt=v[Je];if(z)var Pn=Ae?z(Qt,at,Je,v,B,me):z(at,Qt,Je,B,v,me);if(Pn!==void 0){if(Pn)continue;ft=!1;break}if(yt){if(!ke(v,function(rr,Tr){if(!Bt(yt,Tr)&&(at===rr||he(at,rr,N,z,me)))return yt.push(Tr)})){ft=!1;break}}else if(!(at===Qt||he(at,Qt,N,z,me))){ft=!1;break}}return me.delete(B),me.delete(v),ft}function gs(B,v,N,z,he,me,Ae){switch(N){case ee:if(B.byteLength!=v.byteLength||B.byteOffset!=v.byteOffset)return!1;B=B.buffer,v=v.buffer;case J:return!(B.byteLength!=v.byteLength||!me(new At(B),new At(v)));case p:case g:case w:return mi(+B,+v);case y:return B.name==v.name&&B.message==v.message;case j:case Y:return B==v+"";case D:var Me=Ot;case q:var _e=z&s;if(Me||(Me=sn),B.size!=v.size&&!_e)return!1;var Ne=Ae.get(B);if(Ne)return Ne==v;z|=u,Ae.set(B,v);var Je=Gr(Me(B),Me(v),z,he,me,Ae);return Ae.delete(B),Je;case ne:if(On)return On.call(B)==On.call(v)}return!1}function Eo(B,v,N,z,he,me){var Ae=N&s,Me=gi(B),_e=Me.length,Ne=gi(v),Je=Ne.length;if(_e!=Je&&!Ae)return!1;for(var ft=_e;ft--;){var yt=Me[ft];if(!(Ae?yt in v:_t.call(v,yt)))return!1}var at=me.get(B);if(at&&me.get(v))return at==v;var Qt=!0;me.set(B,v),me.set(v,B);for(var Pn=Ae;++ft<_e;){yt=Me[ft];var rr=B[yt],Tr=v[yt];if(z)var ys=Ae?z(Tr,rr,yt,v,B,me):z(rr,Tr,yt,B,v,me);if(!(ys===void 0?rr===Tr||he(rr,Tr,N,z,me):ys)){Qt=!1;break}Pn||(Pn=yt=="constructor")}if(Qt&&!Pn){var eo=B.constructor,cn=v.constructor;eo!=cn&&"constructor"in B&&"constructor"in v&&!(typeof eo=="function"&&eo instanceof eo&&typeof cn=="function"&&cn instanceof cn)&&(Qt=!1)}return me.delete(B),me.delete(v),Qt}function gi(B){return Wi(B,ms,Ao)}function pr(B,v){var N=B.__data__;return No(v)?N[typeof v=="string"?"string":"hash"]:N.map}function Sn(B,v){var N=ct(B,v);return Yi(N)?N:void 0}function So(B){var v=_t.call(B,un),N=B[un];try{B[un]=void 0;var z=!0}catch{}var he=Pt.call(B);return z&&(v?B[un]=N:delete B[un]),he}var Ao=xn?function(B){return B==null?[]:(B=Object(B),tt(xn(B),function(v){return Jt.call(B,v)}))}:st,Mn=qr;(Q&&Mn(new Q(new ArrayBuffer(1)))!=ee||pe&&Mn(new pe)!=D||Fe&&Mn(Fe.resolve())!=I||dt&&Mn(new dt)!=q||Ke&&Mn(new Ke)!=V)&&(Mn=function(B){var v=qr(B),N=v==C?B.constructor:void 0,z=N?Gn(N):"";if(z)switch(z){case wt:return ee;case Ut:return D;case Rn:return I;case qt:return q;case Wt:return V}return v});function Fo(B,v){return v=v??l,!!v&&(typeof B=="number"||ve.test(B))&&B>-1&&B%1==0&&B<v}function No(B){var v=typeof B;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?B!=="__proto__":B===null}function To(B){return!!lt&&lt in B}function Vr(B){var v=B&&B.constructor,N=typeof v=="function"&&v.prototype||Mt;return B===N}function Zi(B){return Pt.call(B)}function Gn(B){if(B!=null){try{return Vt.call(B)}catch{}try{return B+""}catch{}}return""}function mi(B,v){return B===v||B!==B&&v!==v}var Io=Xi(function(){return arguments}())?Xi:function(B){return Wr(B)&&_t.call(B,"callee")&&!Jt.call(B,"callee")},Ur=Array.isArray;function Ki(B){return B!=null&&Ro(B.length)&&!nr(B)}var yi=gn||nt;function gr(B,v){return Lr(B,v)}function nr(B){if(!Ji(B))return!1;var v=qr(B);return v==b||v==x||v==f||v==F}function Ro(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=l}function Ji(B){var v=typeof B;return B!=null&&(v=="object"||v=="function")}function Wr(B){return B!=null&&typeof B=="object"}var Qi=et?$t(et):xo;function ms(B){return Ki(B)?wo(B):Co(B)}function st(){return[]}function nt(){return!1}e.exports=gr}(Us,Us.exports)),Us.exports}var ol,Op;function k6(){if(Op)return ol;Op=1;var e=200,n="__lodash_hash_undefined__",r=1/0,o=9007199254740991,s="[object Function]",u="[object GeneratorFunction]",l=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,d=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,f=typeof self=="object"&&self&&self.Object===Object&&self,p=d||f||Function("return this")();function g(H,Q,pe){switch(pe.length){case 0:return H.call(Q);case 1:return H.call(Q,pe[0]);case 2:return H.call(Q,pe[0],pe[1]);case 3:return H.call(Q,pe[0],pe[1],pe[2])}return H.apply(Q,pe)}function y(H,Q){for(var pe=-1,Fe=H?H.length:0,dt=0,Ke=[];++pe<Fe;){var Ft=H[pe];Q(Ft,pe,H)&&(Ke[dt++]=Ft)}return Ke}function b(H,Q){var pe=H?H.length:0;return!!pe&&w(H,Q,0)>-1}function x(H,Q){for(var pe=-1,Fe=Q.length,dt=H.length;++pe<Fe;)H[dt+pe]=Q[pe];return H}function D(H,Q,pe,Fe){for(var dt=H.length,Ke=pe+-1;++Ke<dt;)if(Q(H[Ke],Ke,H))return Ke;return-1}function w(H,Q,pe){if(Q!==Q)return D(H,m,pe);for(var Fe=pe-1,dt=H.length;++Fe<dt;)if(H[Fe]===Q)return Fe;return-1}function m(H){return H!==H}function C(H,Q){return H.has(Q)}function I(H,Q){return H?.[Q]}function F(H){var Q=!1;if(H!=null&&typeof H.toString!="function")try{Q=!!(H+"")}catch{}return Q}function j(H){var Q=-1,pe=Array(H.size);return H.forEach(function(Fe){pe[++Q]=Fe}),pe}var q=Array.prototype,Y=Function.prototype,ne=Object.prototype,O=p["__core-js_shared__"],V=function(){var H=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),J=Y.toString,ee=ne.hasOwnProperty,Z=ne.toString,R=RegExp("^"+J.call(ee).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=q.splice,k=Math.max,K=Vt(p,"Map"),se=Vt(p,"Set"),U=Vt(Object,"create");function re(H){var Q=-1,pe=H?H.length:0;for(this.clear();++Q<pe;){var Fe=H[Q];this.set(Fe[0],Fe[1])}}function ue(){this.__data__=U?U(null):{}}function de(H){return this.has(H)&&delete this.__data__[H]}function le(H){var Q=this.__data__;if(U){var pe=Q[H];return pe===n?void 0:pe}return ee.call(Q,H)?Q[H]:void 0}function ve(H){var Q=this.__data__;return U?Q[H]!==void 0:ee.call(Q,H)}function ge(H,Q){var pe=this.__data__;return pe[H]=U&&Q===void 0?n:Q,this}re.prototype.clear=ue,re.prototype.delete=de,re.prototype.get=le,re.prototype.has=ve,re.prototype.set=ge;function Ee(H){var Q=-1,pe=H?H.length:0;for(this.clear();++Q<pe;){var Fe=H[Q];this.set(Fe[0],Fe[1])}}function Oe(){this.__data__=[]}function De(H){var Q=this.__data__,pe=ct(Q,H);if(pe<0)return!1;var Fe=Q.length-1;return pe==Fe?Q.pop():G.call(Q,pe,1),!0}function Se(H){var Q=this.__data__,pe=ct(Q,H);return pe<0?void 0:Q[pe][1]}function Be(H){return ct(this.__data__,H)>-1}function Et(H,Q){var pe=this.__data__,Fe=ct(pe,H);return Fe<0?pe.push([H,Q]):pe[Fe][1]=Q,this}Ee.prototype.clear=Oe,Ee.prototype.delete=De,Ee.prototype.get=Se,Ee.prototype.has=Be,Ee.prototype.set=Et;function Qe(H){var Q=-1,pe=H?H.length:0;for(this.clear();++Q<pe;){var Fe=H[Q];this.set(Fe[0],Fe[1])}}function kt(){this.__data__={hash:new re,map:new(K||Ee),string:new re}}function et(H){return pt(this,H).delete(H)}function tt(H){return pt(this,H).get(H)}function on(H){return pt(this,H).has(H)}function ke(H,Q){return pt(this,H).set(H,Q),this}Qe.prototype.clear=kt,Qe.prototype.delete=et,Qe.prototype.get=tt,Qe.prototype.has=on,Qe.prototype.set=ke;function we(H){var Q=-1,pe=H?H.length:0;for(this.__data__=new Qe;++Q<pe;)this.add(H[Q])}function $t(H){return this.__data__.set(H,n),this}function Bt(H){return this.__data__.has(H)}we.prototype.add=we.prototype.push=$t,we.prototype.has=Bt;function ct(H,Q){for(var pe=H.length;pe--;)if(an(H[pe][0],Q))return pe;return-1}function Ot(H,Q,pe,Fe){var dt=-1,Ke=b,Ft=!0,wt=H.length,Ut=[],Rn=Q.length;if(!wt)return Ut;Q.length>=e&&(Ke=C,Ft=!1,Q=new we(Q));e:for(;++dt<wt;){var qt=H[dt],Wt=qt;if(qt=qt!==0?qt:0,Ft&&Wt===Wt){for(var Bn=Rn;Bn--;)if(Q[Bn]===Wt)continue e;Ut.push(qt)}else Ke(Q,Wt,Fe)||Ut.push(qt)}return Ut}function St(H){if(!un(H)||lt(H))return!1;var Q=Jt(H)||F(H)?R:c;return Q.test(Pt(H))}function sn(H,Q){return Q=k(Q===void 0?H.length-1:Q,0),function(){for(var pe=arguments,Fe=-1,dt=k(pe.length-Q,0),Ke=Array(dt);++Fe<dt;)Ke[Fe]=pe[Q+Fe];Fe=-1;for(var Ft=Array(Q+1);++Fe<Q;)Ft[Fe]=pe[Fe];return Ft[Q]=Ke,g(H,this,Ft)}}function Kt(H,Q,pe){var Fe=-1,dt=b,Ke=H.length,Ft=!0,wt=[],Ut=wt;if(Ke>=e){var Rn=Mt(H);if(Rn)return j(Rn);Ft=!1,dt=C,Ut=new we}else Ut=wt;e:for(;++Fe<Ke;){var qt=H[Fe],Wt=qt;if(qt=qt!==0?qt:0,Ft&&Wt===Wt){for(var Bn=Ut.length;Bn--;)if(Ut[Bn]===Wt)continue e;wt.push(qt)}else dt(Ut,Wt,pe)||(Ut!==wt&&Ut.push(Wt),wt.push(qt))}return wt}function wn(H,Q,pe){for(var Fe=-1,dt=H.length;++Fe<dt;)var Ke=Ke?x(Ot(Ke,H[Fe],Q,pe),Ot(H[Fe],Ke,Q,pe)):H[Fe];return Ke&&Ke.length?Kt(Ke,Q,pe):[]}var Mt=se&&1/j(new se([,-0]))[1]==r?function(H){return new se(H)}:gn;function pt(H,Q){var pe=H.__data__;return _t(Q)?pe[typeof Q=="string"?"string":"hash"]:pe.map}function Vt(H,Q){var pe=I(H,Q);return St(pe)?pe:void 0}function _t(H){var Q=typeof H;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?H!=="__proto__":H===null}function lt(H){return!!V&&V in H}function Pt(H){if(H!=null){try{return J.call(H)}catch{}try{return H+""}catch{}}return""}var hn=sn(function(H){return wn(y(H,At))});function an(H,Q){return H===Q||H!==H&&Q!==Q}function bt(H){return H!=null&&Qn(H.length)&&!Jt(H)}function At(H){return xn(H)&&bt(H)}function Jt(H){var Q=un(H)?Z.call(H):"";return Q==s||Q==u}function Qn(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=o}function un(H){var Q=typeof H;return!!H&&(Q=="object"||Q=="function")}function xn(H){return!!H&&typeof H=="object"}function gn(){}return ol=hn,ol}var sl,Mp;function $6(){if(Mp)return sl;Mp=1;var e=9007199254740991,n="[object Arguments]",r="[object Function]",o="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/;function u(O,V){for(var J=-1,ee=Array(O);++J<O;)ee[J]=V(J);return ee}function l(O,V){return function(J){return O(V(J))}}var c=Object.prototype,d=c.hasOwnProperty,f=c.toString,p=c.propertyIsEnumerable,g=l(Object.keys,Object);function y(O,V){var J=m(O)||w(O)?u(O.length,String):[],ee=J.length,Z=!!ee;for(var R in O)d.call(O,R)&&!(Z&&(R=="length"||x(R,ee)))&&J.push(R);return J}function b(O){if(!D(O))return g(O);var V=[];for(var J in Object(O))d.call(O,J)&&J!="constructor"&&V.push(J);return V}function x(O,V){return V=V??e,!!V&&(typeof O=="number"||s.test(O))&&O>-1&&O%1==0&&O<V}function D(O){var V=O&&O.constructor,J=typeof V=="function"&&V.prototype||c;return O===J}function w(O){return I(O)&&d.call(O,"callee")&&(!p.call(O,"callee")||f.call(O)==n)}var m=Array.isArray;function C(O){return O!=null&&j(O.length)&&!F(O)}function I(O){return Y(O)&&C(O)}function F(O){var V=q(O)?f.call(O):"";return V==r||V==o}function j(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=e}function q(O){var V=typeof O;return!!O&&(V=="object"||V=="function")}function Y(O){return!!O&&typeof O=="object"}function ne(O){return C(O)?y(O):b(O)}return sl=ne,sl}var al,Pp;function q6(){if(Pp)return al;Pp=1;function e(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(l){return typeof l}:e=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(s)}var n={string:function(u){return typeof u=="string"},number:function(u){return typeof u=="number"&&isFinite(u)},integer:function(u){return typeof u=="number"&&u%1===0},boolean:function(u){return typeof u=="boolean"},array:function(u){return u instanceof Array},null:function(u){return u===null},date:function(u){return u instanceof Date},any:function(u){return!0},object:function(u){return u&&e(u)==="object"&&!(u instanceof Array)&&!(u instanceof Date)}},r={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w!#$%&'*+-/=?^`{|}~]+\.)*[\w!#$%&'*+-/=?^`{|}~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(u){return typeof u=="string"&&parseFloat(u)===parseInt(u,10)&&!isNaN(u)},regex:function(u){var l=!0;try{new RegExp(u)}catch{l=!1}return l},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};r.regexp=r.regex,r.pattern=r.regex,r.ipv4=r["ip-address"];var o=function(u,l){if(typeof u=="string"&&r[l]!==void 0){if(r[l]instanceof RegExp)return r[l].test(u);if(typeof r[l]=="function")return r[l](u)}return!0};return al={types:n,isFormat:o,FORMAT_REGEXPS:r},al}var ul,zp;function L6(){if(zp)return ul;zp=1;var e=rm(),n=k6(),r=$6(),o=q6(),s=o.types,u=o.FORMAT_REGEXPS,l=o.isFormat,c={stringFormats:r(u),isFormat:l,typeNames:["integer","number","string","array","object","boolean","null","date"],getType:function(f){return c.typeNames.find(function(p){return s[p](f)})},mergeSchemaObjs:function(f,p){var g=r(f),y=r(p);if(!e(g,y)){if(f.type==="array"&&p.type==="array"&&e(n(g,y),["items"])){var b=g.length>y.length?p:f,x=g.length>y.length?f:p,D=r(b).reduce(function(j,q){return e(b[q],x[q])&&j},!0);if(D)return b}if(f.type!=="object"||p.type!=="object")return null}for(var w={},m=0,C=g.length;m<C;m++){var I=g[m];if(c.getType(f[I])==="object"){var F=c.mergeSchemaObjs(f[I],p[I]);if(F)w[I]=F;else{if(f.type==="object"||p.type==="object")return{type:"object"};if(I!=="items"||f.type!=="array"||p.type!=="array")return null}}else if(I==="type")if(f[I]!==p[I])if(f[I]==="integer"&&p[I]==="number"||f[I]==="number"&&p[I]==="integer")w[I]="number";else return null;else w[I]=f[I];else{if(!e(f[I],p[I]))return null;w[I]=f[I]}}return w}};return ul=c,ul}var cl,jp;function H6(){if(jp)return cl;jp=1;function e(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}function n(b,x){for(var D=0;D<x.length;D++){var w=x[D];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}function r(b,x,D){return x&&n(b.prototype,x),b}var o=j6(),s=rm(),u=L6(),l={required:!1,postProcessFnc:null,strings:{detectFormat:!0,preProcessFnc:null},arrays:{mode:"all"},objects:{preProcessFnc:null,postProcessFnc:null,additionalProperties:!0}},c=["hostname","host-name","alpha","alphanumeric","regex","regexp","pattern"],d=u.stringFormats.filter(function(b){return c.indexOf(b)<0});function f(b){for(var x,D=0,w=b.length;D<w;D++){var m=b[D];if(D>0&&(m==="integer"&&x==="number"?m="number":m==="number"&&x==="integer"&&(x="number"),x!==m))return null;x=m}return x}function p(b){return f(b.map(function(x){return u.getType(x)}))}var g=function(){function b(x){e(this,b),this.options=o({},l,x),this.getObjectSchemaDefault=this.getObjectSchemaDefault.bind(this),this.getStringSchemaDefault=this.getStringSchemaDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this),this.commmonPostProcessDefault=this.commmonPostProcessDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this)}return r(b,[{key:"getCommonArrayItemSchema",value:function(D){var w=this,m=D.map(function(C){return w.getSchema(C)});return m.reduce(function(C,I){return u.mergeSchemaObjs(C,I)},m.pop())}},{key:"getObjectSchemaDefault",value:function(D){var w=this,m={type:"object"},C=Object.keys(D);return C.length>0&&(m.properties=C.reduce(function(I,F){return I[F]=w.getSchema(D[F]),I},{})),m}},{key:"getObjectSchema",value:function(D){return this.options.objects.preProcessFnc?this.options.objects.preProcessFnc(D,this.getObjectSchemaDefault):this.getObjectSchemaDefault(D)}},{key:"getArraySchemaMerging",value:function(D){var w={type:"array"},m=p(D);if(m)if(w.items={type:m},m!=="integer"&&m!=="number"){var C=this.getCommonArrayItemSchema(D);C&&(w.items=C)}else this.options.required&&(w.items.required=!0);return w}},{key:"getArraySchemaNoMerging",value:function(D){var w={type:"array"};return D.length>0&&(w.items=this.getSchema(D[0])),w}},{key:"getArraySchemaTuple",value:function(D){var w=this,m={type:"array"};return D.length>0&&(m.items=D.map(function(C){return w.getSchema(C)})),m}},{key:"getArraySchemaUniform",value:function(D){var w=this.getArraySchemaNoMerging(D);if(D.length>1){for(var m=1;m<D.length;m++)if(!s(w.items,this.getSchema(D[m])))throw new Error("Invalid schema, incompatible array items")}return w}},{key:"getArraySchema",value:function(D){if(D.length===0)return{type:"array"};switch(this.options.arrays.mode){case"all":return this.getArraySchemaMerging(D);case"first":return this.getArraySchemaNoMerging(D);case"uniform":return this.getArraySchemaUniform(D);case"tuple":return this.getArraySchemaTuple(D);default:throw new Error("Unknown array mode option '".concat(this.options.arrays.mode,"'"))}}},{key:"getStringSchemaDefault",value:function(D){var w={type:"string"};if(!this.options.strings.detectFormat)return w;var m=d.findIndex(function(C){return u.isFormat(D,C)});return m>=0&&(w.format=d[m]),w}},{key:"getStringSchema",value:function(D){return this.options.strings.preProcessFnc?this.options.strings.preProcessFnc(D,this.getStringSchemaDefault):this.getStringSchemaDefault(D)}},{key:"commmonPostProcessDefault",value:function(D,w,m){return this.options.required?o({},w,{required:!0}):w}},{key:"objectPostProcessDefault",value:function(D,w){return this.options.objects.additionalProperties===!1&&Object.getOwnPropertyNames(w).length>0?o({},D,{additionalProperties:!1}):D}},{key:"getSchema",value:function(D){var w=u.getType(D);if(!w)throw new Error("Type of value couldn't be determined");var m;switch(w){case"object":m=this.getObjectSchema(D);break;case"array":m=this.getArraySchema(D);break;case"string":m=this.getStringSchema(D);break;default:m={type:w}}return this.options.postProcessFnc?m=this.options.postProcessFnc(w,m,D,this.commmonPostProcessDefault):m=this.commmonPostProcessDefault(w,m,D),w==="object"&&(this.options.objects.postProcessFnc?m=this.options.objects.postProcessFnc(m,D,this.objectPostProcessDefault):m=this.objectPostProcessDefault(m,D)),m}}]),b}();function y(b,x){var D=new g(x);return D.getSchema(b)}return cl=y,cl}var G6=H6();const V6=ng(G6),im=e=>{const{isOpen:n,onDismiss:r,onSuccess:o,model:s}=e,{token:u}=nd.useToken(),[l,c]=T.useState("");return T.useEffect(()=>{n&&s&&c(s)},[n]),A.jsxs(Mu,{title:"Convert to JSON Schema",open:n,destroyOnClose:!0,onCancel:r,width:540,okText:"Convert",onOk:()=>{try{o?.({schema:JSON.stringify(V6(Ii.parse(l)),null,2),model:l})}catch(d){Yt.error(d?.message)}},children:[A.jsx(rn.Text,{children:"Type or paste JSON or JSON5 model here and covert it to JSON Schema"}),A.jsx(id,{loading:A.jsx(ss,{size:"large"}),language:"javascript",theme:u.mode==="dark"?"vs-dark":"light",height:"400px",onChange:d=>c(d||""),value:l||"",onMount:(d,f)=>{f.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),f.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),d.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async p=>{try{await Du(JSON.stringify(Ii.parse(p.getValue()))),Yt.success("Copied to clipboard!")}catch{Yt.error("Failed to copy to clipboard.")}}}),d.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:p=>{const g=JSON.stringify(Ii.parse(p.getValue()),null,2);p.setValue(g)}})},options:{automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})]})};im.__docgenInfo={description:"",methods:[],displayName:"JsonToJsonSchemaDialog",props:{id:{required:!1,tsType:{name:"string"},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { schema: string; model: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ schema: string; model: string }",signature:{properties:[{key:"schema",value:{name:"string",required:!0}},{key:"model",value:{name:"string",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""},onDismiss:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""},model:{required:!1,tsType:{name:"string"},description:""}}};const U6="Provide JSON Schema format. If no JSON Schema is provided, validation will be skipped.",kp={automaticLayout:!0,contextmenu:!1,fontSize:13,fontFamily:"var(--mono-font-family)",tabSize:2,minimap:{enabled:!1},overviewRulerBorder:!1,scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4}};var om=(e=>(e.Schema="Schema",e))(om||{});const Td=({id:e,type:n="input"})=>{const r=Zt(),o="json",{token:s}=nd.useToken(),[u,l]=T.useState(!1),[c,d]=T.useState("Schema"),[f,p]=T.useState(),[g,y]=T.useState(),b=Rh(()=>f?.layout(),100,{trailing:!0}),x=Rh(()=>g?.layout(),100,{trailing:!0}),{disabled:D,content:w}=mt(({simulate:I,disabled:F,configurable:j,decisionGraph:q})=>({nodeError:Ue(I).with({error:{data:{nodeId:e}}},({error:Y})=>Y).otherwise(()=>null),disabled:F,configurable:j,content:(q?.nodes??[]).find(Y=>Y.id===e)?.content})),{contentDiff:m}=ca(e),C=T.useMemo(()=>m?.fields?.schema?.previousValue,[m]);return T.useEffect(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[b,f]),T.useEffect(()=>(window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[x,g]),A.jsx("div",{className:"grl-node-content","data-theme":s.mode,style:{height:"100%","--color-text":s.colorTextBase,"--color-background-elevated":s.colorBgElevated,"--color-border":s.colorBorder,"--line-height":s.lineHeight},children:A.jsx(dg,{className:"grl-node-content-main",direction:"horizontal",autoSaveId:`jdm-editor:${n}:schema:layout`,children:A.jsx("div",{className:"grl-node-content-side",children:A.jsxs("div",{className:"grl-node-content-side__panel",children:[A.jsx("div",{className:"grl-node-content-side__header",children:A.jsx(td,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},items:Object.values(om).map(I=>({key:I,label:A.jsxs("span",{children:[I," ",A.jsx(xr,{title:U6,children:A.jsx(xg,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})})]})})),activeKey:c,onChange:I=>d(I),tabBarExtraContent:A.jsxs(og,{style:{marginRight:8},size:"small",children:[A.jsx(xr,{title:"Format code",placement:"bottomRight",children:A.jsx(ht,{size:"small",type:"text",disabled:D,icon:A.jsx(zw,{}),onClick:()=>f?.getAction?.("editor.action.formatDocument")?.run?.()})}),A.jsx(xr,{title:"Import from JSON",placement:"bottomRight",children:A.jsx(ht,{type:"text",size:"small",disabled:D,icon:A.jsx(Iw,{}),onClick:()=>{l(!0)}})})]})})}),A.jsx("div",{className:"grl-node-content-side__body",children:Ue(c).with("Schema",()=>C!==void 0?A.jsx(jw,{loading:A.jsx(ss,{size:"large"}),language:o,original:C,modified:w?.schema,onMount:I=>y(I),theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...kp,readOnly:!0}}):A.jsx(id,{loading:A.jsx(ss,{size:"large"}),language:o,value:w?.schema||"",onMount:I=>p(I),onChange:I=>{r.updateNode(e,F=>(F.content={schema:I},F))},theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...kp,readOnly:D}})).exhaustive()}),A.jsx(im,{isOpen:u,onDismiss:()=>l(!1),onSuccess:({schema:I,model:F})=>{localStorage.setItem(`${e}-model`,F),r.updateNode(e,j=>(j.content={schema:I},j)),l(!1)},model:localStorage.getItem(`${e}-model`)||void 0})]})})})})};Td.__docgenInfo={description:"",methods:[],displayName:"TabJsonSchema",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""},type:{required:!1,tsType:{name:"union",raw:"'input' | 'output'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'output'"}]},description:"",defaultValue:{value:"'input'",computed:!1}}}};const sm={type:Dt.Input,icon:A.jsx(E6,{size:"1em"}),displayName:"Request",color:_o.Green,documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Provides input context",generateNode:()=>({name:"request",content:{schema:""}}),renderTab:({id:e,manager:n})=>A.jsx(Td,{id:e,manager:n,type:"input"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),{disabled:u}=mt(({disabled:l})=>({disabled:l}));return A.jsx(Pi,{id:e,specification:o,name:n.name,isSelected:r,handleLeft:!1,actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")],menuItems:[{key:"documentation",icon:A.jsx(wg,{}),label:"Documentation",onClick:()=>window.open(o.documentationUrl,"_href")},{key:"delete",icon:A.jsx(Pu,{}),danger:!0,label:A.jsx(ks,{left:"Delete",right:mu.shortcut("Backspace")}),disabled:u,onClick:()=>Mu.confirm({icon:null,title:"Delete node",content:A.jsxs(rn.Text,{children:["Are you sure you want to delete ",A.jsx(rn.Text,{strong:!0,children:n.name})," node."]}),okButtonProps:{danger:!0},onOk:()=>s.removeNodes([e])})}]})},getDiffContent:(e,n)=>{const r={};return Tt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&nn.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}},am={type:Dt.Output,icon:A.jsx(x6,{size:"1em"}),color:_o.Green,displayName:"Response",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Outputs the context",generateNode:()=>({name:"response",content:{schema:""}}),renderTab:({id:e,manager:n})=>A.jsx(Td,{id:e,manager:n,type:"output"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt();return A.jsx(Pi,{id:e,specification:o,name:n.name,isSelected:r,handleRight:!1,actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")]})},getDiffContent:(e,n)=>{const r={};return Tt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&nn.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}};var Ql=new Map,su=new WeakMap,$p=0,W6=void 0;function X6(e){return e?(su.has(e)||($p+=1,su.set(e,$p.toString())),su.get(e)):"0"}function Y6(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?X6(e.root):e[n]}`).toString()}function Z6(e){const n=Y6(e);let r=Ql.get(n);if(!r){const o=new Map;let s;const u=new IntersectionObserver(l=>{l.forEach(c=>{var d;const f=c.isIntersecting&&s.some(p=>c.intersectionRatio>=p);e.trackVisibility&&typeof c.isVisible>"u"&&(c.isVisible=f),(d=o.get(c.target))==null||d.forEach(p=>{p(f,c)})})},e);s=u.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:n,observer:u,elements:o},Ql.set(n,r)}return r}function K6(e,n,r={},o=W6){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const d=e.getBoundingClientRect();return n(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:s,observer:u,elements:l}=Z6(r),c=l.get(e)||[];return l.has(e)||l.set(e,c),c.push(n),u.observe(e),function(){c.splice(c.indexOf(n),1),c.length===0&&(l.delete(e),u.unobserve(e)),l.size===0&&(u.disconnect(),Ql.delete(s))}}function J6({threshold:e,delay:n,trackVisibility:r,rootMargin:o,root:s,triggerOnce:u,skip:l,initialInView:c,fallbackInView:d,onChange:f}={}){var p;const[g,y]=T.useState(null),b=T.useRef(f),[x,D]=T.useState({inView:!!c,entry:void 0});b.current=f,T.useEffect(()=>{if(l||!g)return;let I;return I=K6(g,(F,j)=>{D({inView:F,entry:j}),b.current&&b.current(F,j),j.isIntersecting&&u&&I&&(I(),I=void 0)},{root:s,rootMargin:o,threshold:e,trackVisibility:r,delay:n},d),()=>{I&&I()}},[Array.isArray(e)?e.toString():e,g,s,o,u,l,r,d,n]);const w=(p=x.entry)==null?void 0:p.target,m=T.useRef(void 0);!g&&w&&!u&&!l&&m.current!==w&&(m.current=w,D({inView:!!c,entry:void 0}));const C=[y,x.inView,x.entry];return C.ref=C[0],C.inView=C[1],C.entry=C[2],C}const Q6={type:Dt.Switch,icon:A.jsx(I6,{size:"1em"}),displayName:"Switch",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/switch",shortDescription:"Conditional branching",color:_o.Purple,getDiffContent:(e,n)=>Tt(e,r=>{const o={};(e.hitPolicy??"")!==(n.hitPolicy??"")&&nn.set(o,"hitPolicy",{status:"modified",previousValue:e.hitPolicy});const s=Xs(e?.statements||[],n?.statements||[],{compareFields:(u,l)=>{const c=(u.condition??"")!==l.condition;return{hasChanges:c,fields:{...c&&{condition:{status:"modified",previousValue:l.condition}}}}}});return r.statements=s,s.find(u=>u?._diff?.status==="modified"||u?._diff?.status==="added"||u?._diff?.status==="removed")&&nn.set(o,"statements",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:()=>!1,determineOutputType:e=>e.input},generateNode:({index:e})=>({name:`switch${e}`,content:{hitPolicy:"first",statements:[{id:crypto.randomUUID(),condition:"",isDefault:!1}]}}),renderNode:({specification:e,...n})=>A.jsx(e8,{specification:e,...n})},e8=({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),{ref:u,inView:l}=J6({delay:1e3}),{content:c,disabled:d,nodeTrace:f,compactMode:p,isGraphActive:g}=mt(({decisionGraph:m,disabled:C,simulate:I,compactMode:F,activeTab:j})=>({nodeTrace:Ue(I).with({result:Ve._},({result:q})=>q?.trace?.[e]).otherwise(()=>null),content:(m?.nodes||[]).find(q=>q?.id===e)?.content,disabled:C,compactMode:F,isGraphActive:j==="graph"})),y=hs(e,{disabled:!g||!l}),b=c?.statements||[],x=c?.hitPolicy||"first",D=m=>{s.updateNode(e,C=>(C.content.hitPolicy=m,C))},w=T.useMemo(()=>p?n8:t8,[p]);return A.jsx(Pi,{id:e,ref:u,className:it(["switch"]),specification:o,name:n.name,handleRight:!1,helper:[A.jsx(rd,{},"arrow-right")],noBodyPadding:!0,isSelected:r,actions:[A.jsx(ht,{type:"text",disabled:d,onClick:()=>{x==="first"&&b?.length>0?s.updateNode(e,m=>(m.content.statements=(m.content.statements||[]).map(C=>(C.isDefault&&(C.isDefault=!1),C)),m.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!0}),m)):s.updateNode(e,m=>(m.content.statements=(m.content.statements||[]).map(C=>(C.isDefault&&(C.isDefault=!1),C)),m.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!1}),m))},children:"Add Condition"},"add condition"),A.jsx(Ys,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>D("first"),disabled:d},{key:"collect",label:"Collect",disabled:d,onClick:()=>{s.updateNode(e,m=>(m.content.statements=(m.content.statements||[]).map(C=>(C.isDefault&&(C.isDefault=!1),C)),m)),D("collect")}}]},children:A.jsxs(ht,{type:"text",style:{textTransform:"capitalize",marginLeft:"auto"},children:[x," ",A.jsx(Jx,{})]})},"hitPolicy")],children:A.jsx("div",{className:"switchNode",children:A.jsxs("div",{className:"switchNode__body edit nodrag",children:[!(b?.length>0)&&A.jsx(rn.Text,{type:"secondary",className:"no-conditions",children:"No conditions"}),b.map((m,C)=>A.jsx(w,{index:C,value:m.condition,diff:m?._diff,id:m.id,isDefault:m.isDefault,totalStatements:b.length,disabled:d,hitPolicy:x,variableType:y,onSetIsDefault:I=>{s.updateNode(e,F=>{const j=F.content.statements.find(q=>q.id===m.id);return I&&(j.condition=""),j.isDefault=I,F})},isActive:Ue(f?.traceData).with({statements:Ve.array(Ve._)},({statements:I})=>I.some(F=>typeof F=="object"&&F&&"id"in F&&F.id===m?.id)).otherwise(()=>!1),onDelete:()=>{s.updateNode(e,I=>(I.content.statements=I.content.statements.filter(F=>F?.id!==m?.id),(I.content.statements||[]).length===1&&(I.content.statements=(I.content.statements||[]).map(F=>(F.isDefault&&(F.isDefault=!1),F))),I)),s.removeEdgeByHandleId(m?.id)},onChange:I=>{s.updateNode(e,F=>{const j=F.content.statements.find(q=>q.id===m.id);return j.condition=I,F})}},m.id))]})})})},t8=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:u=!0,onDelete:l,isActive:c,index:d=0,isDefault:f=!1,onSetIsDefault:p,totalStatements:g,hitPolicy:y,variableType:b})=>{const[x,D]=T.useState(n);T.useLayoutEffect(()=>{x!==n&&D(n)},[n]);const w=I=>{D(I),o?.(I)},m=d===g-1,C=f&&y==="first"&&m&&d>0&&(n||"")?.trim?.()?.length===0;return A.jsxs("div",{className:it("switchNode__statement",c&&"active",r?.status&&`diff-${r?.status}`),children:[A.jsxs("div",{className:it("switchNode__statement__heading",C&&"switchNode__statement__heading--without-input"),children:[(d===0||y==="collect")&&A.jsx(ht,{disabled:s,className:it("switchNode__statement__heading__action"),size:"small",type:"text",children:"If"}),y!=="collect"&&d>0&&A.jsx(ht,{className:it("switchNode__statement__heading__action",C&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{m&&y==="first"&&p?.(!1)},children:"Else If"}),y!=="collect"&&d>0&&m&&A.jsx(ht,{className:it("switchNode__statement__heading__action",!C&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{m&&y==="first"&&p?.(!0)},children:"Else"}),A.jsx("div",{style:{flexGrow:1}}),!s&&u&&A.jsx(lg,{title:"Remove condition?",okText:"Remove",onConfirm:()=>l?.(),children:A.jsx(ht,{className:"switchNode__statement__delete",size:"small",type:"text",icon:A.jsx(Pu,{})})}),A.jsx(Mi,{id:e,type:"source",position:Ce.Right,className:it(c&&"switchNode__activeHandle")})]}),!C&&A.jsx("div",{className:"switchNode__statement__inputArea",children:A.jsx(Bu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:x,maxRows:4,disabled:s,onChange:w,variableType:b})})]})},n8=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:u=!0,onDelete:l,isActive:c,variableType:d})=>{const[f,p]=T.useState(n);T.useLayoutEffect(()=>{f!==n&&p(n)},[n]);const g=y=>{p(y),o?.(y)};return A.jsxs("div",{className:it("switchNode__statement","compact",c&&"active",r?.status&&`diff-${r?.status}`),children:[A.jsx("div",{className:it("switchNode__statement__inputArea"),children:A.jsx(Bu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:f,maxRows:4,disabled:s,onChange:g,variableType:d})}),!s&&u&&A.jsx("div",{className:"switchNode__statement__button",children:A.jsx(lg,{title:"Remove condition?",okText:"Remove",onConfirm:()=>l?.(),children:A.jsx(ht,{className:"switchNode__statement__delete",size:"small",type:"text",icon:A.jsx(Pu,{})})})}),A.jsx(Mi,{id:e,type:"source",position:Ce.Right,className:it(c&&"switchNode__activeHandle")})]})};const vo={[Dt.Input]:sm,[Dt.Output]:am,[Dt.DecisionTable]:K0,[Dt.Expression]:Q0,[Dt.Function]:tm,[Dt.Switch]:Q6},r8=()=>{const{stateStore:e}=Do();return T.useEffect(()=>{if(Qo())return e.subscribe(({simulate:n,nodeTypes:r,decisionGraph:o},s)=>{try{if(Kn(n,s?.simulate))return;const u=Ue(n).with({result:Ve.nonNullable},({result:d})=>d.trace).otherwise(()=>null);if(u===null){const d=Tt(r,f=>{Object.values(f).forEach(p=>{delete p[vt.Input],delete p[vt.Output]})});e.setState({nodeTypes:d});return}const l=Object.values(u);if(l.length===0)return;const c=Tt(r,d=>{l.forEach(f=>{o.nodes.find(g=>g.id===f.id)?.type!=="inputNode"&&(d[f.id]??={},d[f.id][vt.Output]=new Zn(f.output??{}),d[f.id][vt.Input]=new Zn(f.input??{}))})});e.setState({nodeTypes:c})}catch(u){console.error("error occurred while setting up variable types from trace",u)}})},[]),T.useEffect(()=>{if(!Qo())return;const n=p6();return e.subscribe((r,o)=>{try{const s=qp(r),u=qp(o),l=o8(r,o);if(Kn(s,u)&&!l)return;const c=i8(r,o,n);c.isModified&&e.setState({nodeTypes:c.nodeTypes})}catch(s){console.error("error occurred during node type inference",s)}})},[]),T.useEffect(()=>{if(Qo())return e.subscribe((n,r)=>{try{const o=Lp(n),s=Lp(r);if(Kn(o,s))return;const u=Zn.fromJson({Object:{}});n.decisionGraph.nodes.forEach(l=>{const c=n.nodeTypes[l.id],d=c?.[vt.Output]??c?.[vt.InferredOutput]??Zn.fromJson({Object:{}});u.set(l.name,d)}),e.setState({globalType:{$nodes:u}})}catch(o){console.error("error occurred while global node types",o)}})},[]),null},i8=({decisionGraph:e,nodeTypes:n,customNodes:r},o,s)=>{let u=!1;const l=Tt(n,c=>{s.walk(e).forEach(({node:d,incomers:f})=>{if(d.type==="inputNode")return;const p=f.map(F=>{const j=c[F.id]??{};return j[vt.Output]??j[vt.InferredOutput]}).filter(F=>!!F).map(F=>F.clone()),g=Ue(p.length).with(1,()=>p[0]).otherwise(()=>Zn.fromIncoming(p));c?.[d.id]?.[vt.InferredInput]?.equal(g)||(u=!0,c[d.id]??={},c[d.id][vt.InferredInput]=g);const b=vo[d.type]?.inferTypes??r.find(F=>F.kind===d.type)?.inferTypes;if(!b)return;const x=c?.[d.id]?.[vt.Input]??c?.[d.id]?.[vt.InferredInput]??Zn.fromJson("Any"),D=o.nodeTypes?.[d.id]?.[vt.Input]??o.nodeTypes?.[d.id]?.[vt.InferredInput]??Zn.fromJson("Any"),w=o.decisionGraph.nodes.find(F=>F.id===d.id)?.content;if(!(b.needsUpdate(d.content,w)||!x.equal(D))&&c?.[d.id]?.[vt.InferredOutput])return;const C=b.determineOutputType({input:x,content:d.content});c?.[d.id]?.[vt.InferredOutput]?.equal(C)||(u=!0,c[d.id]??={},c[d.id][vt.InferredOutput]=C)})});return{isModified:u,nodeTypes:l}},qp=({decisionGraph:e,nodeTypes:n,customNodes:r})=>{const o=e.edges,s=e.nodes.map(({id:f,type:p})=>({id:f,type:p})),u=r.map(f=>f.kind),l=Object.entries(n).map(([f,p])=>({id:f,input:ed(p[vt.Input]),output:ed(p[vt.Output])})),c=e.nodes.find(f=>f.type==="inputNode")?.id,d=Ue(n?.[c??""]?.[vt.InferredOutput]).with(Ve.nonNullable,f=>f.hash()).otherwise(()=>null);return{edgesData:o,nodesData:s,typesData:l,customNodesData:u,inputNodeType:d}},o8=({decisionGraph:e,customNodes:n},r)=>e.nodes.map(s=>{const u=vo[s.type]?.inferTypes??n.find(c=>c.kind===s.type)?.inferTypes;if(!u)return!1;const l=r.decisionGraph.nodes.find(c=>c.id===s.id);return l?u.needsUpdate(s.content,l.content):!0}).some(s=>s),ed=e=>{if(e)return e.__hash||(e.__hash=e.hash()),e.__hash},Lp=e=>({nodeInfo:e.decisionGraph.nodes.map(r=>{const o=e.nodeTypes[r.id],s=o?.[vt.Output]??o?.[vt.InferredOutput];return{id:r.id,type:ed(s),name:r.name}})});var Xt=function(){return Xt=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xt.apply(this,arguments)},Hp={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Gp={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},au={width:"20px",height:"20px",position:"absolute",zIndex:1},s8={top:Xt(Xt({},Hp),{top:"-5px"}),right:Xt(Xt({},Gp),{left:void 0,right:"-5px"}),bottom:Xt(Xt({},Hp),{top:void 0,bottom:"-5px"}),left:Xt(Xt({},Gp),{left:"-5px"}),topRight:Xt(Xt({},au),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Xt(Xt({},au),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Xt(Xt({},au),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Xt(Xt({},au),{left:"-10px",top:"-10px",cursor:"nw-resize"})},a8=T.memo(function(e){var n=e.onResizeStart,r=e.direction,o=e.children,s=e.replaceStyles,u=e.className,l=T.useCallback(function(f){n(f,r)},[n,r]),c=T.useCallback(function(f){n(f,r)},[n,r]),d=T.useMemo(function(){return Xt(Xt({position:"absolute",userSelect:"none"},s8[r]),s??{})},[s,r]);return A.jsx("div",{className:u||void 0,style:d,onMouseDown:l,onTouchStart:c,children:o})}),u8=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])},e(n,r)};return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Or=function(){return Or=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Or.apply(this,arguments)},c8={width:"auto",height:"auto"},uu=function(e,n,r){return Math.max(Math.min(e,r),n)},Vp=function(e,n,r){var o=Math.round(e/n);return o*n+r*(o-1)},Zo=function(e,n){return new RegExp(e,"i").test(n)},cu=function(e){return!!(e.touches&&e.touches.length)},l8=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},Up=function(e,n,r){r===void 0&&(r=0);var o=n.reduce(function(u,l,c){return Math.abs(l-e)<Math.abs(n[u]-e)?c:u},0),s=Math.abs(n[o]-e);return r===0||s<r?n[o]:e},ll=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},lu=function(e,n,r,o){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var s=Number(e.replace("%",""))/100;return n*s}if(e.endsWith("vw")){var s=Number(e.replace("vw",""))/100;return r*s}if(e.endsWith("vh")){var s=Number(e.replace("vh",""))/100;return o*s}}return e},d8=function(e,n,r,o,s,u,l){return o=lu(o,e.width,n,r),s=lu(s,e.height,n,r),u=lu(u,e.width,n,r),l=lu(l,e.height,n,r),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof u>"u"?void 0:Number(u),minHeight:typeof l>"u"?void 0:Number(l)}},f8=function(e){return Array.isArray(e)?e:[e,e]},h8=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Wp="__resizable_base__",p8=function(e){u8(n,e);function n(r){var o,s,u,l,c=e.call(this,r)||this;return c.ratio=1,c.resizable=null,c.parentLeft=0,c.parentTop=0,c.resizableLeft=0,c.resizableRight=0,c.resizableTop=0,c.resizableBottom=0,c.targetLeft=0,c.targetTop=0,c.delta={width:0,height:0},c.appendBase=function(){if(!c.resizable||!c.window)return null;var d=c.parentNode;if(!d)return null;var f=c.window.document.createElement("div");return f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.transform="scale(0, 0)",f.style.left="0",f.style.flex="0 0 100%",f.classList?f.classList.add(Wp):f.className+=Wp,d.appendChild(f),f},c.removeBase=function(d){var f=c.parentNode;f&&f.removeChild(d)},c.state={isResizing:!1,width:(s=(o=c.propsSize)===null||o===void 0?void 0:o.width)!==null&&s!==void 0?s:"auto",height:(l=(u=c.propsSize)===null||u===void 0?void 0:u.height)!==null&&l!==void 0?l:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},c.onResizeStart=c.onResizeStart.bind(c),c.onMouseMove=c.onMouseMove.bind(c),c.onMouseUp=c.onMouseUp.bind(c),c}return Object.defineProperty(n.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||c8},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){var r=0,o=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,u=this.resizable.offsetHeight,l=this.resizable.style.position;l!=="relative"&&(this.resizable.style.position="relative"),r=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:u,this.resizable.style.position=l}return{width:r,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sizeStyle",{get:function(){var r=this,o=this.props.size,s=function(c){var d;if(typeof r.state[c]>"u"||r.state[c]==="auto")return"auto";if(r.propsSize&&r.propsSize[c]&&(!((d=r.propsSize[c])===null||d===void 0)&&d.toString().endsWith("%"))){if(r.state[c].toString().endsWith("%"))return r.state[c].toString();var f=r.getParentSize(),p=Number(r.state[c].toString().replace("px","")),g=p/f[c]*100;return"".concat(g,"%")}return ll(r.state[c])},u=o&&typeof o.width<"u"&&!this.state.isResizing?ll(o.width):s("width"),l=o&&typeof o.height<"u"&&!this.state.isResizing?ll(o.height):s("height");return{width:u,height:l}},enumerable:!1,configurable:!0}),n.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var r=this.appendBase();if(!r)return{width:0,height:0};var o=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),r.style.position="relative",r.style.minWidth="100%",r.style.minHeight="100%";var u={width:r.offsetWidth,height:r.offsetHeight};return o&&(this.parentNode.style.flexWrap=s),this.removeBase(r),u},n.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},n.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},n.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var r=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:r.flexBasis!=="auto"?r.flexBasis:void 0})}},n.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},n.prototype.createSizeForCssProperty=function(r,o){var s=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===r&&(typeof s>"u"||s==="auto")?"auto":r},n.prototype.calculateNewMaxFromBoundary=function(r,o){var s=this.props.boundsByDirection,u=this.state.direction,l=s&&Zo("left",u),c=s&&Zo("top",u),d,f;if(this.props.bounds==="parent"){var p=this.parentNode;p&&(d=l?this.resizableRight-this.parentLeft:p.offsetWidth+(this.parentLeft-this.resizableLeft),f=c?this.resizableBottom-this.parentTop:p.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(d=l?this.resizableRight:this.window.innerWidth-this.resizableLeft,f=c?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(d=l?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),f=c?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return d&&Number.isFinite(d)&&(r=r&&r<d?r:d),f&&Number.isFinite(f)&&(o=o&&o<f?o:f),{maxWidth:r,maxHeight:o}},n.prototype.calculateNewSizeFromDirection=function(r,o){var s=this.props.scale||1,u=f8(this.props.resizeRatio||1),l=u[0],c=u[1],d=this.state,f=d.direction,p=d.original,g=this.props,y=g.lockAspectRatio,b=g.lockAspectRatioExtraHeight,x=g.lockAspectRatioExtraWidth,D=p.width,w=p.height,m=b||0,C=x||0;return Zo("right",f)&&(D=p.width+(r-p.x)*l/s,y&&(w=(D-C)/this.ratio+m)),Zo("left",f)&&(D=p.width-(r-p.x)*l/s,y&&(w=(D-C)/this.ratio+m)),Zo("bottom",f)&&(w=p.height+(o-p.y)*c/s,y&&(D=(w-m)*this.ratio+C)),Zo("top",f)&&(w=p.height-(o-p.y)*c/s,y&&(D=(w-m)*this.ratio+C)),{newWidth:D,newHeight:w}},n.prototype.calculateNewSizeFromAspectRatio=function(r,o,s,u){var l=this.props,c=l.lockAspectRatio,d=l.lockAspectRatioExtraHeight,f=l.lockAspectRatioExtraWidth,p=typeof u.width>"u"?10:u.width,g=typeof s.width>"u"||s.width<0?r:s.width,y=typeof u.height>"u"?10:u.height,b=typeof s.height>"u"||s.height<0?o:s.height,x=d||0,D=f||0;if(c){var w=(y-x)*this.ratio+D,m=(b-x)*this.ratio+D,C=(p-D)/this.ratio+x,I=(g-D)/this.ratio+x,F=Math.max(p,w),j=Math.min(g,m),q=Math.max(y,C),Y=Math.min(b,I);r=uu(r,F,j),o=uu(o,q,Y)}else r=uu(r,p,g),o=uu(o,y,b);return{newWidth:r,newHeight:o}},n.prototype.setBoundingClientRect=function(){var r=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var s=o.getBoundingClientRect();this.parentLeft=s.left*r,this.parentTop=s.top*r}}if(this.props.bounds&&typeof this.props.bounds!="string"){var u=this.props.bounds.getBoundingClientRect();this.targetLeft=u.left*r,this.targetTop=u.top*r}if(this.resizable){var l=this.resizable.getBoundingClientRect(),c=l.left,d=l.top,f=l.right,p=l.bottom;this.resizableLeft=c*r,this.resizableRight=f*r,this.resizableTop=d*r,this.resizableBottom=p*r}},n.prototype.onResizeStart=function(r,o){if(!(!this.resizable||!this.window)){var s=0,u=0;if(r.nativeEvent&&l8(r.nativeEvent)?(s=r.nativeEvent.clientX,u=r.nativeEvent.clientY):r.nativeEvent&&cu(r.nativeEvent)&&(s=r.nativeEvent.touches[0].clientX,u=r.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var l=this.props.onResizeStart(r,o,this.resizable);if(l===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var c,d=this.window.getComputedStyle(this.resizable);if(d.flexBasis!=="auto"){var f=this.parentNode;if(f){var p=this.window.getComputedStyle(f).flexDirection;this.flexDir=p.startsWith("row")?"row":"column",c=d.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var g={original:{x:s,y:u,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Or(Or({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(r.target).cursor||"auto"}),direction:o,flexBasis:c};this.setState(g)}},n.prototype.onMouseMove=function(r){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&cu(r))try{r.preventDefault(),r.stopPropagation()}catch{}var s=this.props,u=s.maxWidth,l=s.maxHeight,c=s.minWidth,d=s.minHeight,f=cu(r)?r.touches[0].clientX:r.clientX,p=cu(r)?r.touches[0].clientY:r.clientY,g=this.state,y=g.direction,b=g.original,x=g.width,D=g.height,w=this.getParentSize(),m=d8(w,this.window.innerWidth,this.window.innerHeight,u,l,c,d);u=m.maxWidth,l=m.maxHeight,c=m.minWidth,d=m.minHeight;var C=this.calculateNewSizeFromDirection(f,p),I=C.newHeight,F=C.newWidth,j=this.calculateNewMaxFromBoundary(u,l);this.props.snap&&this.props.snap.x&&(F=Up(F,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(I=Up(I,this.props.snap.y,this.props.snapGap));var q=this.calculateNewSizeFromAspectRatio(F,I,{width:j.maxWidth,height:j.maxHeight},{width:c,height:d});if(F=q.newWidth,I=q.newHeight,this.props.grid){var Y=Vp(F,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),ne=Vp(I,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),O=this.props.snapGap||0,V=O===0||Math.abs(Y-F)<=O?Y:F,J=O===0||Math.abs(ne-I)<=O?ne:I;F=V,I=J}var ee={width:F-b.width,height:I-b.height};if(this.delta=ee,x&&typeof x=="string"){if(x.endsWith("%")){var Z=F/w.width*100;F="".concat(Z,"%")}else if(x.endsWith("vw")){var R=F/this.window.innerWidth*100;F="".concat(R,"vw")}else if(x.endsWith("vh")){var G=F/this.window.innerHeight*100;F="".concat(G,"vh")}}if(D&&typeof D=="string"){if(D.endsWith("%")){var Z=I/w.height*100;I="".concat(Z,"%")}else if(D.endsWith("vw")){var R=I/this.window.innerWidth*100;I="".concat(R,"vw")}else if(D.endsWith("vh")){var G=I/this.window.innerHeight*100;I="".concat(G,"vh")}}var k={width:this.createSizeForCssProperty(F,"width"),height:this.createSizeForCssProperty(I,"height")};this.flexDir==="row"?k.flexBasis=k.width:this.flexDir==="column"&&(k.flexBasis=k.height);var K=this.state.width!==k.width,se=this.state.height!==k.height,U=this.state.flexBasis!==k.flexBasis,re=K||se||U;re&&tg.flushSync(function(){o.setState(k)}),this.props.onResize&&re&&this.props.onResize(r,y,this.resizable,ee)}},n.prototype.onMouseUp=function(r){var o,s,u=this.state,l=u.isResizing,c=u.direction;u.original,!(!l||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(r,c,this.resizable,this.delta),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Or(Or({},this.state.backgroundStyle),{cursor:"auto"})}))},n.prototype.updateSize=function(r){var o,s;this.setState({width:(o=r.width)!==null&&o!==void 0?o:"auto",height:(s=r.height)!==null&&s!==void 0?s:"auto"})},n.prototype.renderResizer=function(){var r=this,o=this.props,s=o.enable,u=o.handleStyles,l=o.handleClasses,c=o.handleWrapperStyle,d=o.handleWrapperClass,f=o.handleComponent;if(!s)return null;var p=Object.keys(s).map(function(g){return s[g]!==!1?A.jsx(a8,{direction:g,onResizeStart:r.onResizeStart,replaceStyles:u&&u[g],className:l&&l[g],children:f&&f[g]?f[g]:null},g):null});return A.jsx("div",{className:d,style:c,children:p})},n.prototype.render=function(){var r=this,o=Object.keys(this.props).reduce(function(l,c){return h8.indexOf(c)!==-1||(l[c]=r.props[c]),l},{}),s=Or(Or(Or({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var u=this.props.as||"div";return A.jsxs(u,Or({style:s,className:this.props.className},o,{ref:function(l){l&&(r.resizable=l)},children:[this.state.isResizing&&A.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},n.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},n}(T.PureComponent);const Xp="jdmEditor:graphPanel:height",um=()=>{const e=Zt(),{panels:n,activePanel:r}=mt(({panels:u,activePanel:l})=>({panels:u,activePanel:l})),o=T.useMemo(()=>r===void 0?void 0:(n||[]).find(u=>u.id===r),[r,n]),s=T.useMemo(()=>Number.parseFloat(localStorage.getItem(Xp)??"")??300,[o]);return o?A.jsxs(p8,{className:"grl-dg__panel",defaultSize:{height:s},handleStyles:{bottom:{display:"none"},left:{display:"none"},topLeft:{display:"none"},topRight:{display:"none"},right:{display:"none"},bottomLeft:{display:"none"},bottomRight:{display:"none"}},maxHeight:500,minHeight:150,onResize:(u,l,c)=>{localStorage.setItem(Xp,c.clientHeight.toString())},children:[!o.hideHeader&&A.jsxs("div",{className:"grl-dg__panel__toolbar",children:[A.jsx("div",{className:"grl-dg__panel__toolbar__content",children:A.jsx(rn.Text,{style:{fontSize:13},children:o.title})}),A.jsx("div",{className:"grl-dg__panel__toolbar__actions",children:A.jsx(xr,{placement:"topLeft",title:"Close panel",children:A.jsx(ht,{size:"small",type:"text",icon:A.jsx(os,{style:{fontSize:12}}),onClick:()=>e.setActivePanel(void 0)})})})]}),A.jsx("div",{className:"grl-dg__panel__content",children:o?.renderPanel?.({})})]}):null};um.__docgenInfo={description:"",methods:[],displayName:"GraphPanel"};const ia=fe.string().default(()=>crypto.randomUUID());var cm=(e=>(e.Input="inputNode",e.Output="outputNode",e.DecisionTable="decisionTableNode",e.Function="functionNode",e.Expression="expressionNode",e.Switch="switchNode",e.Decision="decisionNode",e))(cm||{});const g8="customNode",di=fe.object({id:ia,name:fe.string(),position:fe.object({x:fe.number(),y:fe.number()}).default({x:0,y:0})}),m8=fe.object({type:fe.literal("inputNode"),content:fe.object({schema:fe.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(di),y8=fe.object({type:fe.literal("outputNode"),content:fe.object({schema:fe.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(di),v8=fe.object({type:fe.literal("decisionTableNode"),content:fe.object({hitPolicy:fe.enum(["first","collect"]).nullish().transform(e=>e??"first"),rules:fe.array(fe.record(fe.string(),fe.string().nullish().transform(e=>e??""))).default([]),inputs:fe.array(fe.object({id:ia,name:fe.string().nullish(),field:fe.string().nullish(),defaultValue:fe.string().nullish()})),outputs:fe.array(fe.object({id:ia,name:fe.string(),field:fe.string(),defaultValue:fe.string().nullish()})),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(di),D8=fe.object({type:fe.literal("functionNode"),content:fe.string().or(fe.object({source:fe.string().default("")})).nullish()}).merge(di),_8=fe.object({type:fe.literal("expressionNode"),content:fe.object({expressions:fe.array(fe.object({id:ia,key:fe.string().default(""),value:fe.string().default("")})),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(di),b8=fe.object({type:fe.literal("decisionNode"),content:fe.object({key:fe.string(),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(di),w8=fe.object({type:fe.literal("switchNode"),content:fe.object({hitPolicy:fe.enum(["first","collect"]).nullish().transform(e=>e??"first"),statements:fe.array(fe.object({id:ia,condition:fe.string().nullish().transform(e=>e??""),isDefault:fe.boolean().nullish().transform(e=>e??!1)}))})}).merge(di),x8=fe.object({type:fe.literal(g8),content:fe.object({kind:fe.string(),config:fe.any()})}).merge(di),C8=fe.object({type:fe.string().refine(e=>!Object.values(cm).includes(e),{message:"Invalid type"}),content:fe.any().nullish()}).merge(di),vu=fe.discriminatedUnion("type",[b8,_8,D8,v8,w8,x8,m8,y8]).or(C8),E8=fe.object({id:fe.string(),sourceId:fe.string(),targetId:fe.string(),sourceHandle:fe.string().nullish(),type:fe.enum(["edge"])});fe.object({inputSchema:fe.any().nullish().default(null),outputSchema:fe.any().nullish().default(null)});const Yp=fe.object({nodes:fe.array(vu).default([]),edges:fe.array(E8).default([])}),lm=e=>{const n=Zt(),{id:r,sourceX:o,sourceY:s,targetX:u,targetY:l,sourcePosition:c,targetPosition:d,style:f={},markerEnd:p}=e,{isHovered:g,disabled:y}=mt(({hoveredEdgeId:m,disabled:C})=>({isHovered:m===r,disabled:C})),{diff:b}=f6(r),[x,D,w]=bd({sourceX:o,sourceY:s,sourcePosition:c,targetX:u,targetY:l,targetPosition:d});return A.jsxs(A.Fragment,{children:[A.jsx(ds,{path:x,markerEnd:p,style:{...f||{},stroke:Ue(b).with({status:"added"},()=>"var(--grl-color-success)").with({status:"removed"},()=>"var(--grl-color-error)").otherwise(()=>{})}}),A.jsx(X3,{children:A.jsx("div",{className:"nodrag nopan edge-renderer",style:{transform:`translate(-50%, -50%) translate(${D}px,${w}px)`},children:!y&&A.jsx(ht,{type:"primary",shape:"round",icon:A.jsx(Pu,{}),danger:!0,className:it("grl-edge-delete-button"),"data-visible":g,onClick:()=>n.removeEdges([r])})})})]})},S8=e=>n=>A.jsx(lm,{...n,...e});lm.__docgenInfo={description:"",methods:[],displayName:"CustomEdge"};const A8=e=>typeof e!="object"?!1:Array.isArray(e?.nodes),F8=(e,n)=>{const r=Do(),o=Zt(),s=T.useCallback(async l=>{try{if(!e.current)return;const c=(r.stateStore.getState()?.decisionGraph?.nodes||[]).filter(g=>l.some(y=>y.id===g.id)),d=c.map(g=>g.id),f=[];c.length>0&&e.current.getEdges().forEach(y=>{d.includes(y.source)&&d.includes(y.target)&&f.push({id:y.id,type:y.type,sourceId:y.source,targetId:y.target,sourceHandle:y.sourceHandle??void 0,targetHandle:y.targetHandle??void 0})}),await Du(JSON.stringify({nodes:c,edges:f})),Yt.success("Copied to clipboard!")}catch(c){Yt.error(c.message)}},[r]),u=T.useCallback(async()=>{try{if(!e?.current)return;const l=await kw();if(!l)return;const c=JSON.parse(l);if(!A8(c))throw new Error("invalid clipboard");const d=c.nodes.reduce((D,w)=>({...D,[w.id]:crypto.randomUUID()}),{}),f=Object.keys(d),p=e.current.getNodes().find(D=>f.includes(D.id)),g=c.nodes.find(D=>D.id===p?.id),y={x:c.nodes.reduce((D,w)=>D+w.position.x,0)/c.nodes.length,y:c.nodes.reduce((D,w)=>D+w.position.y,0)/c.nodes.length},b=c.nodes.map(D=>{const w={x:D?.position?.x||0,y:D?.position?.y||0};if(p&&g)D.id===p.id?(w.x=p.position.x,w.y=p.position.y-20):(w.x=p.position.x-g.position.x+D.position.x,w.y=p.position.y-g.position.y+D.position.y-20);else if(n.current){const m=n.current.getBoundingClientRect(),C={x:m.width/2,y:m.height/2},I=e.current.project(C);w.x=D.position.x+I.x-y.x/2,w.y=D.position.y+I.y-y.y/2}return{...D,position:w,id:d[D.id]}}),x=(c.edges||[]).map(D=>({id:crypto.randomUUID(),type:D.type,sourceId:d[D.sourceId],targetId:d[D.targetId],sourceHandle:D.sourceHandle??void 0,targetHandle:D.targetHandle??void 0}));if(o.addNodes(b),o.addEdges(x),Yt.success("Pasted from clipboard!"),p)try{await Du(JSON.stringify({nodes:b}))}catch{}}catch{Yt.error("Failed to paste from clipboard")}},[e,n]);return T.useMemo(()=>({copyNodes:s,pasteNodes:u}),[s,u])},dm=W.memo(({inputDisabled:e,disabled:n})=>{const r=mt(p=>p.components||[]),o=mt(p=>p.customNodes||[]),[s,u]=T.useState(""),l=T.useCallback((p,g,y)=>{const b=p.target;if(!b)return;const{offsetX:x,offsetY:D}=p.nativeEvent,{height:w,width:m}=b.getBoundingClientRect(),C={x:x/m,y:D/w};p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("nodeType",g),p.dataTransfer.setData("relativePosition",JSON.stringify(C)),y&&p.dataTransfer.setData("customNodeComponent",y)},[]),c=T.useMemo(()=>{const p={core:Object.values(vo)};return r?.length>0&&(p.extended=r),(o||[]).forEach(g=>{const y=g.group?.trim?.()||"";y.length>0&&(p?.[y]?p[y].push({...g,type:"customNode"}):p[y]=[{...g,type:"customNode"}])}),(o||[]).forEach(g=>{g?.group||(p?.custom?p.custom.push({...g,type:"customNode"}):p.custom=[{...g,type:"customNode"}])}),p},[r,o]),d=T.useMemo(()=>Object.keys(c).reduce((p,g)=>({...p,[g]:(c[g]||[]).filter(y=>!(s?.trim?.().length>0)||(y.type||"").toLowerCase().indexOf(s.toLowerCase())>-1||(y.displayName||"").toLowerCase().indexOf(s.toLowerCase())>-1||(y.shortDescription||"").toLowerCase().indexOf(s.toLowerCase())>-1||(y.group||"").toLowerCase().indexOf(s.toLowerCase())>-1)}),{}),[c,s]),f=r.length+o.length;return A.jsxs("div",{children:[f>5&&A.jsx(Kb,{placeholder:"Search components...",value:s,onChange:p=>u(p.target.value||""),allowClear:!0,className:"grl-dg__aside__menu__components__search"}),A.jsx("div",{className:"grl-dg__aside__menu__components",children:Object.keys(d).map(p=>Ue(p).with("core",()=>d.core?.length>0&&A.jsx(W.Fragment,{children:(d.core||[]).map(g=>A.jsx(W.Fragment,{children:A.jsx(Zp,{disabled:Ue(g.type).with(Dt.Input,()=>n||e).otherwise(()=>n),specification:g,onDragStart:y=>vo[g.type]!==void 0?l(y,g.type):l(y,"customNode","kind"in g?g.kind:"")})},"kind"in g?g.kind:g.type))},p)).otherwise(g=>d[g]?.length>0&&A.jsx(W.Fragment,{children:(d?.[g]||[]).map(y=>A.jsx(Zp,{disabled:n,specification:y,onDragStart:b=>g==="extended"?l(b,y.type):l(b,"customNode","kind"in y?y.kind:"")},"kind"in y?y.kind:y.type))},g)))})]})}),Zp=({specification:e,disabled:n=!1,...r})=>A.jsx("div",{className:it("draggable-component"),draggable:!n,...r,children:A.jsx("div",{style:{pointerEvents:"none"},children:A.jsx(Nd,{listMode:!0,compactMode:!0,color:e.color,icon:e.icon,name:e.displayName,type:e.shortDescription})})});dm.__docgenInfo={description:"",methods:[],displayName:"GraphComponents",props:{inputDisabled:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const N8=Object.entries(vo).reduce((e,[n,r])=>({...e,[n]:W.memo(o=>r.renderNode({specification:r,...o}),(o,s)=>o.id===s.id&&o.selected===s.selected&&dl(o.data,s.data))}),{}),T8={edge:W.memo(S8(null))},fm=T.forwardRef(function({reactFlowProOptions:n,className:r},o){const s=T.useRef(null),u=T.useRef(null),l=Y3([]),c=Z3([]),[d,f]=T.useState(!0),p=Do(),g=Zt(),y=d6(O=>O),{onReactFlowInit:b}=Y0(({onReactFlowInit:O})=>({onReactFlowInit:O})),{disabled:x,hasInputNode:D,components:w,customNodes:m}=mt(({disabled:O,components:V,customNodes:J,decisionGraph:ee})=>({disabled:O,components:V,customNodes:J,hasInputNode:(ee?.nodes||[]).some(Z=>Z.type===Dt.Input)}));y.nodesState.current=l,y.edgesState.current=c,y.graphClipboard.current=F8(u,s),y.reactFlowInstance.current=u.current;const C=T.useMemo(()=>W.memo(O=>{const V=m.find(J=>J.kind===O?.data?.kind);return V?V.renderNode({specification:V,...O}):(console.warn("node not found",O,m),A.jsx(Pi,{id:O.id,specification:{displayName:`${O.data?.kind}`,color:"var(--grl-color-error)",icon:A.jsx(lC,{})},name:O?.data?.name,isSelected:O.selected,displayError:!0,noBodyPadding:!0,handleLeft:!0,handleRight:!0}))},(O,V)=>O.id===V.id&&O.selected===V.selected&&dl(O.data,V.data)),[m]),I=T.useMemo(()=>w.reduce((O,V)=>({...O,[V.type]:W.memo(J=>V.renderNode({specification:V,...J}),(J,ee)=>J.id===ee.id&&J.selected===ee.selected&&dl(J.data,ee.data))}),{...N8,customNode:C}),[w,C]),F=async(O,V,J)=>{if(!s.current||!u.current)return;if(!V){const G=s.current.getBoundingClientRect(),k={x:G.width/2,y:G.height/2};V=u.current.project(k)}const ee=Ue(O).with("customNode",()=>m.find(G=>G.kind===J)).otherwise(()=>[...Object.values(vo),...w].find(k=>k.type===O));if(!ee){Yt.error(`Unknown node type ${O} - ${J}.`);return}let Z=Ue(ee).with({kind:Ve.string},G=>{const k=(u.current?.getNodes()||[]).filter(se=>se.data?.kind===G.kind).length+1,K=G.generateNode({index:k});return{id:crypto.randomUUID(),type:"customNode",name:K.name,position:V,content:{kind:G.kind,config:K?.config}}}).with({type:Ve.string},G=>{const k=(u.current?.getNodes()||[]).filter(se=>se.type===G.type).length+1,K=G.generateNode({index:k});return{id:crypto.randomUUID(),type:G.type,position:V,...K}}).otherwise(()=>null);if(!Z){Yt.error(`Unknown node type ${O} - ${J}.`);return}if(ee.onNodeAdd)try{Z=await ee.onNodeAdd(Z)}catch{return}const R=vu.safeParse(Z);if(R.success)return g.addNodes([vu.parse(Z)]);Yt.error(R.error?.message)},j=O=>{if(O.source===O.target||x)return!1;const[V]=l,[J]=c,ee=J.some(G=>G.source===O.source&&G.target===O.target&&(G.sourceHandle??null)===(O.sourceHandle??null)&&(G.targetHandle??null)===(O.targetHandle??null)),Z=V.find(G=>G.id===O.target);if(!Z||Z.id===O.source)return!1;const R=(G,k=new Set)=>{if(k.has(G.id))return!1;k.add(G.id);for(const K of Iu(G,V,J))if(K.id===O.source||R(K,k))return!0};return!ee&&!R(Z)},q=O=>{if(O.preventDefault(),O.stopPropagation(),!s.current||!u.current)return;const V=s.current.getBoundingClientRect();let J;try{J=JSON.parse(O.dataTransfer.getData("relativePosition"))}catch{return}const ee=u.current.project({x:O.clientX-V.left,y:O.clientY-V.top});ee.x-=Math.round(J.x*226/10)*10,ee.y-=Math.round(J.y*60/10)*10;const Z=O.dataTransfer.getData("nodeData");if(Z){try{const k=JSON.parse(Z);g.addNodes([vu.parse({...k,position:ee})])}catch(k){ad.error({message:"Failed to create a node"}),console.error(k)}return}const R=O.dataTransfer.getData("nodeType"),G=Ue(O.dataTransfer.getData("customNodeComponent")).with(Ve.string,k=>k).otherwise(()=>{});F(R,ee,G)},Y=O=>{O.preventDefault(),O.dataTransfer.dropEffect="move"},ne=O=>{const V={...O,type:"edge",id:crypto.randomUUID()};x||g.addEdges([l6(V)])};return T.useImperativeHandle(o,()=>({...g,stateStore:p.stateStore})),A.jsx("div",{className:it(["tab-content",r]),tabIndex:0,onKeyDown:O=>{O.key==="v"&&O.metaKey&&!x&&g.pasteNodes()},children:A.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex"},children:[!x&&!d&&A.jsx("div",{className:"grl-dg__components__floating",style:{position:"absolute",top:8,right:8,zIndex:1},children:A.jsx(xr,{placement:"right",title:"Components",children:A.jsx(ht,{icon:A.jsx(tC,{style:{fontSize:12}}),onClick:()=>f(!0)})})}),A.jsx("div",{tabIndex:0,className:"content-wrapper",onKeyDown:O=>{const[V]=l,[J]=c;if(O.key==="c"&&O.metaKey){const ee=l[0].filter(Z=>Z.selected).map(({id:Z})=>Z);if(ee.length===0)return;g.copyNodes(ee),O.preventDefault()}else if(O.key==="d"&&O.metaKey){if(!x){const ee=V.filter(Z=>Z.selected).map(({id:Z})=>Z);if(ee.length===0)return;g.duplicateNodes(ee)}O.preventDefault()}else if(O.key==="Backspace"){if(!x){const ee=V.filter(R=>R.selected),Z=J.filter(R=>R.selected);if(ee.length>0){const R=ee.length,G=R>1?"nodes":"node";Mu.confirm({icon:null,title:`Delete ${G}`,content:A.jsxs(rn.Text,{children:["Are you sure you want to delete ",R>1?`${R} ${G}`:G,"?"]}),okButtonProps:{danger:!0},onOk:()=>{Z.length>0&&g.removeEdges(Z.map(k=>k.id)),g.removeNodes(ee.map(k=>k.id))}})}else Z.length>0&&g.removeEdges(Z.map(R=>R.id))}O.stopPropagation(),O.preventDefault()}},children:A.jsx("div",{className:it(["react-flow"]),ref:s,children:A.jsxs(G0,{deleteKeyCode:null,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,zoomOnDoubleClick:!1,connectionRadius:35,nodes:l[0],edges:c[0],onInit:O=>{u.current=O,b?.(O)},snapToGrid:!0,snapGrid:[5,5],minZoom:.25,selectionMode:ls.Partial,nodeTypes:I,edgeTypes:T8,onDrop:q,onDragOver:Y,onConnect:ne,isValidConnection:j,proOptions:n,nodesConnectable:!x,nodesDraggable:!x,edgesUpdatable:!x,onNodesChange:g.handleNodesChange,onEdgesChange:g.handleEdgesChange,onNodesDelete:O=>{O.forEach(V=>{g.closeTab(V?.id)})},onEdgeMouseEnter:(O,V)=>g.setHoveredEdgeId(V.id),onEdgeMouseLeave:()=>g.setHoveredEdgeId(null),children:[A.jsx(r6,{showInteractive:!1,children:A.jsx(Jo,{onClick:()=>g.toggleCompactMode(),children:A.jsx(Xx,{})})}),A.jsx(c6,{color:"var(--grl-color-border)",gap:20})]})})}),!x&&d&&A.jsxs("div",{className:"grl-dg__aside__menu",children:[A.jsxs("div",{className:"grl-dg__aside__menu__heading",children:[A.jsxs("div",{className:"grl-dg__aside__menu__heading__text",children:[A.jsx(rn.Text,{strong:!0,style:{marginBottom:0},children:"Components"})," ",A.jsx(rn.Text,{type:"secondary",style:{fontSize:10,marginLeft:5},children:"(Drag-and-drop)"})]}),A.jsx(ht,{type:"text",size:"small",icon:A.jsx(os,{style:{fontSize:12}}),onClick:()=>f(!1)})]}),A.jsx("div",{className:"grl-dg__aside__menu__content",children:A.jsx(dm,{inputDisabled:D,disabled:x})})]})]})})});fm.__docgenInfo={description:"",methods:[],displayName:"Graph",props:{className:{required:!1,tsType:{name:"string"},description:""},onDisableTabs:{required:!1,tsType:{name:"signature",type:"function",raw:"(val: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"val"}],return:{name:"void"}}},description:""},reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""}}};const Kp="application/vnd.gorules.decision",hm=()=>{const e=Do(),n=T.useRef(null),r=T.useRef(null),{setDecisionGraph:o,setActivePanel:s}=Zt(),{disabled:u,panels:l,activePanel:c}=mt(({disabled:x,panels:D,activePanel:w})=>({disabled:x,panels:D,activePanel:w})),d=async x=>{const D=x?.target?.files,w=new FileReader;w.onload=function(m){try{const C=JSON.parse(m?.target?.result);if(C?.contentType!==Kp)throw new Error("Invalid content type");const I=Array.isArray(C?.nodes)?C.nodes:[],F=I.map(Y=>Y.id),j=C.edges.filter(Y=>F.includes(Y?.targetId)&&F.includes(Y?.sourceId)),q=Yp.safeParse({nodes:I,edges:j,settings:C?.settings});if(!q.success){console.log(q.error?.message),Yt.error(q.error?.message);return}o(q.data)}catch(C){Yt.error(C.message)}},w.readAsText(Array.from(D)?.[0],"UTF-8")},f=x=>{const D=x?.target?.files[0],w=new FileReader;try{w.readAsArrayBuffer(D),w.onload=async()=>{const m=w.result;if(!m)return;const{decisionGraph:C}=e.stateStore.getState(),I=await Rw(m,C),F=C.nodes.map(Y=>{let ne=Y;return I.forEach(O=>{O.id===Y.id&&(ne={...Y,content:O.content})}),ne}),j=I.filter(Y=>!F.some(ne=>ne.id===Y.id)).map((Y,ne)=>({...Y,position:{x:ne*250,y:0}})),q=Yp.safeParse({nodes:[...F,...j],edges:C.edges});if(!q.success){console.log(q.error?.message),Yt.error(q.error?.message);return}o(q.data),Yt.success("Excel file has been uploaded successfully!")}}catch{Yt.error("Failed to upload Excel!")}},p=async()=>{try{const{name:x}=e.stateStore.getState(),{decisionGraph:D}=e.stateStore.getState(),w=`${x.replaceAll(".json","")}.json`,m=JSON.stringify({contentType:Kp,nodes:D.nodes,edges:D.edges},null,2),C=new Blob([m],{type:"application/json"}),I=URL.createObjectURL(C),F=window.document.createElement("a");F.href=I,F.download=w,window.document.body.appendChild(F),F.click(),window.document.body.removeChild(F),URL.revokeObjectURL(I)}catch(x){Yt.error(x.message)}},g=async(x="decision tables")=>{try{const{decisionGraph:D}=e.stateStore.getState(),w=D.nodes.filter(m=>m.type===Dt.DecisionTable).map(m=>({...m.content,id:m.id,name:m.name}));await Bw(x,w),Yt.success("Excel file has been downloaded successfully!")}catch{Yt.error("Failed to download Excel file!")}},y=[{key:"upload-json",label:"Upload JSON",onClick:()=>n?.current?.click?.()},{key:"upload-excel",label:"Upload Excel",onClick:()=>r?.current?.click?.()}],b=[{key:"download-json",label:"Download JSON",onClick:()=>p()},{key:"download-excel",label:"Download Excel",onClick:()=>g()}];return A.jsxs("div",{className:"grl-dg__aside",children:[A.jsx("input",{hidden:!0,accept:"application/json",type:"file",ref:n,onChange:d,onClick:x=>{x.target.value=null}}),A.jsx("input",{hidden:!0,accept:".xlsx",type:"file",ref:r,onChange:f,onClick:x=>{x.target.value=null}}),A.jsxs("div",{className:"grl-dg__aside__side-bar",children:[A.jsxs("div",{className:"grl-dg__aside__side-bar__top",children:[!u&&A.jsx(Ys,{menu:{items:y},placement:"bottomRight",trigger:["click"],arrow:!0,children:A.jsx(ht,{type:"text",disabled:u,icon:A.jsx(Ux,{})})}),A.jsx(Ys,{menu:{items:b},placement:"bottomRight",trigger:["click"],arrow:!0,children:A.jsx(ht,{type:"text",icon:A.jsx(Gx,{})})})]}),A.jsx("div",{className:"grl-dg__aside__side-bar__bottom",children:(l||[]).map(x=>{const D=c===x.id;return A.jsx(xr,{title:`${D?"Close":"Open"} ${x.title.toLowerCase()} panel`,placement:"right",children:A.jsx(ht,{type:"text",icon:x.icon,style:{background:D?"rgba(0, 0, 0, 0.1)":void 0},onClick:()=>{if(x?.onClick)return x.onClick();x?.renderPanel&&s(D?void 0:x.id)}},x.id)},x.id)})})]})]})};hm.__docgenInfo={description:"",methods:[],displayName:"GraphSideToolbar"};const pm=({disabled:e,tabBarExtraContent:n})=>{const r=Zt(),{openNodes:o,activeNodeId:s}=mt(({decisionGraph:u,activeTab:l,openTabs:c})=>({activeNodeId:(u?.nodes??[]).find(d=>d.id===l)?.id,openNodes:(c||[]).map(d=>{const f=(u?.nodes??[]).find(p=>p.id===d);if(f)return{id:f?.id,name:f.name,type:f.type,diff:f?._diff}}).filter(d=>!!d)}));return A.jsx("div",{children:A.jsx(td,{type:"line",size:"small",className:it("grl-graph-tabs"),activeKey:s||"graph",onChange:u=>r.openTab(u),tabBarExtraContent:n,items:[{closable:!1,key:"graph",label:A.jsx(Jp,{total:o?.length,icon:A.jsx(Zx,{}),name:"Graph",active:!s||s==="graph",onContextClick:u=>{r.closeTab("graph",u)}})},...o.map((u,l)=>{const c=vo[u.type];return{disabled:e,key:u.id,label:A.jsx(Jp,{onContextClick:d=>{r.closeTab(u.id,d)},icon:c?.icon,name:u?.name??u?.type,diffStatus:u?.diff?.status,color:c?.color,index:l,active:u.id===s,total:o?.length,onClose:()=>r.closeTab(u.id)}),closable:!0}})]})})},Jp=({total:e=0,index:n=-1,icon:r,name:o,active:s,diffStatus:u,color:l=_o.Blue,onClose:c,onContextClick:d})=>{const f=[e>0&&n!==-1&&{key:"close",label:"Close",onClick:()=>d?.("close")},e>0&&n!==-1&&{key:"close-all",label:"Close all Tabs",onClick:()=>d?.("close-all")},e>0&&n!==-1&&{key:"close-other",label:"Close other Tabs",onClick:()=>d?.("close-other")},e>0&&n+1<e&&{key:"close-right",label:"Close Tabs to the right",onClick:()=>d?.("close-right")},e>0&&n>0&&n>0&&{key:"close-left",label:"Close Tabs to the left",onClick:()=>d?.("close-left")}].filter(p=>!!p);return A.jsx(Ys,{menu:{items:f},trigger:["contextMenu"],children:A.jsxs("div",{className:"grl-graph-tabs__tab","data-active":s,children:[A.jsx(_g,{size:"small",shape:"square",style:{background:l,fontSize:11,width:18,height:18,lineHeight:"18px",borderRadius:3},icon:r}),o,A.jsx(rg,{status:u,style:{fontSize:16}}),c&&A.jsx(ht,{className:"grl-graph-tabs__closeIcon",type:"text",size:"small",style:{height:20,width:20,color:"black",borderRadius:"50%",lineHeight:0},icon:A.jsx(os,{style:{fontSize:10}}),onClick:p=>{p.stopPropagation(),c?.()}})]})})};pm.__docgenInfo={description:"",methods:[],displayName:"GraphTabs",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"TabsProps['tabBarExtraContent']"},description:""}}};const gm=W.memo(T.forwardRef(function({reactFlowProOptions:n,tabBarExtraContent:r},o){const[s,u]=T.useState(!1),l=mt(({decisionGraph:c,activeTab:d})=>(c?.nodes??[]).some(f=>f.id===d));return A.jsxs(A.Fragment,{children:[A.jsx(hm,{}),A.jsxs("div",{className:"grl-dg__graph",children:[A.jsx(pm,{disabled:s,tabBarExtraContent:r}),A.jsx(fm,{ref:o,className:it([!l&&"active"]),reactFlowProOptions:n,onDisableTabs:u}),A.jsx(I8,{})]}),A.jsx(um,{})]})})),I8=W.memo(()=>{const{openNodes:e,activeNodeId:n,components:r}=mt(({decisionGraph:u,openTabs:l,activeTab:c,components:d})=>{const f=(u?.nodes??[]).find(g=>g.id===c)?.id;return{openNodes:(u?.nodes??[]).filter(g=>l.includes(g.id)).map(({id:g,type:y})=>({id:g,type:y})),activeNodeId:f,components:d}}),o=T.useRef(null),s=T.useMemo(()=>Jb(Qb,void 0,{rootElement:o.current}),[o.current]);return A.jsx("div",{style:{display:"contents"},ref:o,children:e.map(u=>A.jsx("div",{className:it(["tab-content",n===u?.id&&"active"]),children:Ue(u?.type).with(Dt.DecisionTable,()=>K0?.renderTab?.({id:u?.id,manager:s})).with(Dt.Function,()=>tm?.renderTab?.({id:u?.id,manager:s})).with(Dt.Expression,()=>Q0?.renderTab?.({id:u?.id,manager:s})).with(Dt.Input,()=>sm?.renderTab?.({id:u?.id,manager:s})).with(Dt.Output,()=>am?.renderTab?.({id:u?.id,manager:s})).otherwise(()=>{const l=r.find(c=>c.type===u.type);return l?l?.renderTab?.({id:u.id,manager:s}):null})},u?.id))})});gm.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphWrapper",props:{reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"GraphTabsProps['tabBarExtraContent']"},description:""}}};const R8=T.forwardRef(({manager:e,reactFlowProOptions:n,tabBarExtraContent:r,...o},s)=>A.jsx("div",{className:"grl-dg",children:A.jsx(Fd,{children:A.jsxs(X0,{children:[A.jsx(gm,{ref:s,reactFlowProOptions:n,tabBarExtraContent:r}),A.jsx(r8,{}),A.jsx(h6,{...o})]})})}));R8.__docgenInfo={description:"",methods:[],displayName:"DecisionGraph",props:{manager:{required:!1,tsType:{name:"DragDropManager"},description:""},reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"GraphTabsProps['tabBarExtraContent']"},description:""},id:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]}},description:""},value:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},configurable:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"signature['components']",raw:"DecisionGraphStoreType['state']['components']"},description:""},customNodes:{required:!1,tsType:{name:"signature['customNodes']",raw:"DecisionGraphStoreType['state']['customNodes']"},description:""},name:{required:!1,tsType:{name:"signature['name']",raw:"DecisionGraphStoreType['state']['name']"},description:""},defaultActivePanel:{required:!1,tsType:{name:"string"},description:""},panels:{required:!1,tsType:{name:"signature['panels']",raw:"DecisionGraphStoreType['state']['panels']"},description:""},onPanelsChange:{required:!1,tsType:{name:"signature['onPanelsChange']",raw:"DecisionGraphStoreType['listeners']['onPanelsChange']"},description:""},simulate:{required:!1,tsType:{name:"signature['simulate']",raw:"DecisionGraphStoreType['state']['simulate']"},description:""},onChange:{required:!1,tsType:{name:"signature['onChange']",raw:"DecisionGraphStoreType['listeners']['onChange']"},description:""},onReactFlowInit:{required:!1,tsType:{name:"signature['onReactFlowInit']",raw:"DecisionGraphStoreType['listeners']['onReactFlowInit']"},description:""},onCodeExtension:{required:!1,tsType:{name:"signature['onCodeExtension']",raw:"DecisionGraphStoreType['listeners']['onCodeExtension']"},description:""},onFunctionReady:{required:!1,tsType:{name:"signature['onFunctionReady']",raw:"DecisionGraphStoreType['listeners']['onFunctionReady']"},description:""}}};const Id=({value:e,onChange:n,readOnly:r})=>{const{token:o}=nd.useToken();return A.jsx(id,{loading:A.jsx(ss,{size:"large"}),language:"javascript",value:e,onChange:n,theme:o.mode==="dark"?"vs-dark":"light",height:"100%",onMount:(s,u)=>{u.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),u.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),s.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async l=>{try{await Du(JSON.stringify(Ii.parse(l.getValue()))),Yt.success("Copied to clipboard!")}catch{Yt.error("Failed to copy to clipboard.")}}}),s.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:l=>{const c=JSON.stringify(Ii.parse(l.getValue()),null,2);l.setValue(c)}})},options:{readOnly:r,automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})};Id.__docgenInfo={description:"",methods:[],displayName:"SimulatorEditor",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};const B8="Your business context that enters through the Request node, starting the decision process. Supply JSON or JSON5 format.",mm=({onChange:e,hasInputNode:n,loading:r,onRun:o,defaultRequest:s})=>{const[u,l]=T.useState(s),{stateStore:c,actions:d}=Do();return T.useEffect(()=>{if(!Qo())return;const{decisionGraph:f}=c.getState(),p=f.nodes.find(g=>g.type==="inputNode");if(p)try{const g=u?Ii.parse(u):"Any";d.setNodeType(p.id,vt.InferredOutput,new Zn(g))}catch{}},[u]),A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request",children:[A.jsx(xr,{title:B8,children:A.jsxs(rn.Text,{style:{fontSize:13,cursor:"help"},children:["Request",A.jsx(xg,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})]})}),A.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&A.jsx(xr,{title:n?void 0:"Request node is required to run the graph. Drag-and-drop it from the Components panel.",children:A.jsx(ht,{size:"small",type:"primary",loading:r,icon:A.jsx(oC,{}),disabled:!n,onClick:()=>{try{const f=(u||"").trim().length===0?null:Ii.parse(u||"");o?.({graph:c.getState().decisionGraph,context:f})}catch{ad.error({message:"Invalid format",description:"Unable to format request, invalid JSON format",placement:"top"})}},children:"Run"})})})]}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(Id,{value:u,onChange:f=>{l(f),e?.(f??"")}})})]})};mm.__docgenInfo={description:"",methods:[],displayName:"SimulatorRequestPanel",props:{defaultRequest:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}}},description:""},hasInputNode:{required:!1,tsType:{name:"boolean"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onRun:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""}}};var ym=(e=>(e.Output="Output",e.Input="Input",e.Trace="Trace",e))(ym||{});const O8=({defaultRequest:e,onChange:n,onRun:r,onClear:o,loading:s=!1,leftPanel:u=mm})=>{const[l,c]=Ru("simulation.search",""),[d,f]=Ru("simulation.segment","Output"),{actions:p}=Do(),{nodeTypes:g,simulate:y,hasInputNode:b}=mt(({decisionGraph:m,simulate:C})=>({simulate:C,hasInputNode:m.nodes.some(I=>I.type===Dt.Input),nodeTypes:(m.nodes??[]).reduce((I,F)=>({...I,[F.id]:F.type}),{})})),[x,D]=T.useState("graph"),w=T.useMemo(()=>y?"result"in y?Object.entries(y.result?.trace??{}).map(([m,C])=>({...C,nodeId:m})).filter(m=>![Dt.Input].includes(g?.[m.nodeId])).filter(m=>m.name.toLowerCase().includes(l?.toLowerCase()??"")).sort((m,C)=>(m.order??0)-(C.order??0)):[]:[],[y,l]);return A.jsxs(dg,{className:"grl-dg__simulator",direction:"horizontal",autoSaveId:"jdm-editor:simulator:layout",children:[A.jsx(Wc,{minSize:20,defaultSize:30,className:"grl-dg__simulator__section grl-dg__simulator__request",children:A.jsx(u,{defaultRequest:e,loading:s,hasInputNode:b,onRun:r,onChange:n})}),A.jsx(Bh,{}),A.jsxs(Wc,{minSize:20,maxSize:20,className:"grl-dg__simulator__section grl-dg__simulator__nodes",children:[A.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--nodes",children:[A.jsx("input",{className:"grl-dg__simulator__search",type:"text",placeholder:"Search nodes...",value:l,onChange:m=>c(m.target.value)}),A.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&A.jsx(xr,{title:"Clear",children:A.jsx(ht,{size:"small",type:"text",icon:A.jsx($x,{}),onClick:()=>{o?.(),D("graph"),c("")}})})})]}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(ss,{spinning:s,children:A.jsxs("div",{className:"grl-dg__simulator__nodes-list",children:[!y&&A.jsxs(rn.Text,{type:"secondary",style:{textAlign:"center",marginTop:60,fontSize:13},children:["Ready to simulate!",A.jsx("br",{}),"Run a request to see the node trace in action.",A.jsx("br",{}),A.jsx(rn.Link,{href:"https://docs.gorules.io/docs/simulator",target:"_blank",style:{fontSize:13,marginTop:4,display:"inline-block"},children:"Learn more"})]}),"graph".includes(l?.toLowerCase()??"")&&y&&A.jsxs("div",{className:it("grl-dg__simulator__nodes-list__node",x==="graph"&&"active"),onClick:()=>D("graph"),children:[A.jsxs(rn.Text,{"data-role":"name",ellipsis:!0,children:[A.jsx(eg,{status:Ue(y).with({error:Ve.nonNullable},()=>"error").with({result:Ve.nonNullable},()=>"success").otherwise(()=>"not-run")}),"Graph"]}),A.jsx(rn.Text,{type:"secondary","data-role":"performance",children:Ue(y).with({result:Ve._},({result:m})=>m?.performance).otherwise(()=>{})})]}),w.map(m=>A.jsxs("div",{className:it("grl-dg__simulator__nodes-list__node",m.nodeId===x&&"active"),onClick:()=>D(m.nodeId),onDoubleClick:()=>p.goToNode(m.nodeId),children:[A.jsxs(rn.Text,{"data-role":"name",ellipsis:{tooltip:m.name},children:[A.jsx(eg,{status:m.nodeId===y?.error?.data?.nodeId?"error":"success"}),m.name]}),A.jsx(rn.Text,{type:"secondary","data-role":"performance",children:m.performance})]},m.nodeId))]})})})]}),A.jsx(Bh,{}),A.jsxs(Wc,{minSize:30,defaultSize:50,className:"grl-dg__simulator__section grl-dg__simulator__response",children:[A.jsx("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--response",children:A.jsx(td,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},onChange:m=>f(m),items:Object.values(ym).map(m=>({key:m,label:m})),tabBarExtraContent:A.jsx(xr,{title:"Close panel",children:A.jsx(ht,{type:"text",icon:A.jsx(os,{style:{fontSize:12}}),onClick:()=>p.setActivePanel(void 0)})})})}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(Id,{readOnly:!0,value:Ue(y).with({result:Ve._},({result:m})=>Ue(x).with("graph",()=>Qp({traceData:m?.trace,output:m?.result},d??"Output")).otherwise(()=>Qp(m?.trace[x],d??"Output"))).otherwise(()=>"")})})]})]})},Qp=(e,n)=>{const r=Ue([n,e]).with(["Output",{output:Ve._}],([,{output:o}])=>o).with(["Input",{input:Ve._}],([,{input:o}])=>o).with(["Trace",{trace:Ve._}],([,{trace:o}])=>o).with(["Trace",{traceData:Ve._}],([,{traceData:o}])=>o).otherwise(()=>({}));return Ii.stringify(r,void 0,2)},eg=({status:e})=>e==="not-run"?null:e==="success"?A.jsx(jx,{twoToneColor:["var(--grl-color-success)","var(--grl-color-success-bg)"],style:{marginRight:6,fontSize:12,opacity:.5}}):A.jsx(Lx,{twoToneColor:["var(--grl-color-error)","var(--grl-color-error-bg)"],style:{marginRight:5,fontSize:12}});O8.__docgenInfo={description:"",methods:[],displayName:"GraphSimulator",props:{onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultRequest:{required:!1,tsType:{name:"string",raw:"SimulatorRequestPanelProps['defaultRequest']"},description:""},onChange:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onChange']"},description:""},onRun:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onRun']"},description:""},leftPanel:{required:!1,tsType:{name:"ReactFC",raw:"React.FC<SimulatorRequestPanelProps>",elements:[{name:"signature",type:"object",raw:`{
  defaultRequest?: string;
  onChange?: (contextJson: string) => void;
  hasInputNode?: boolean;
  loading?: boolean;
  onRun?: (payload: { graph: DecisionGraphType; context: unknown }) => void;
}`,signature:{properties:[{key:"defaultRequest",value:{name:"string",required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}},required:!1}},{key:"hasInputNode",value:{name:"boolean",required:!1}},{key:"loading",value:{name:"boolean",required:!1}},{key:"onRun",value:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}},required:!1}}]}}]},description:"",defaultValue:{value:`({
  onChange,
  hasInputNode,
  loading,
  onRun,
  defaultRequest,
}) => {
  const [requestValue, setRequestValue] = useState(defaultRequest);
  const { stateStore, actions } = useDecisionGraphRaw();

  useEffect(() => {
    if (!isWasmAvailable()) {
      return;
    }

    const { decisionGraph } = stateStore.getState();
    const requestNode = decisionGraph.nodes.find((n) => n.type === 'inputNode');
    if (!requestNode) {
      return;
    }

    try {
      const value = requestValue ? json5.parse(requestValue) : 'Any';
      actions.setNodeType(requestNode.id, NodeTypeKind.InferredOutput, new VariableType(value));
    } catch {
      // Skip
    }
  }, [requestValue]);

  return (
    <>
      <div className={'grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request'}>
        <Tooltip title={requestTooltip}>
          <Typography.Text style={{ fontSize: 13, cursor: 'help' }}>
            Request
            <InfoCircleOutlined style={{ fontSize: 10, marginLeft: 4, opacity: 0.5, verticalAlign: 'text-top' }} />
          </Typography.Text>
        </Tooltip>
        <div className={'grl-dg__simulator__section__bar__actions'}>
          {onRun && (
            <Tooltip
              title={
                !hasInputNode
                  ? 'Request node is required to run the graph. Drag-and-drop it from the Components panel.'
                  : undefined
              }
            >
              <Button
                size={'small'}
                type={'primary'}
                loading={loading}
                icon={<PlayCircleOutlined />}
                disabled={!hasInputNode}
                onClick={() => {
                  try {
                    const parsed = (requestValue || '').trim().length === 0 ? null : json5.parse(requestValue || '');
                    onRun?.({ graph: stateStore.getState().decisionGraph, context: parsed });
                  } catch {
                    notification.error({
                      message: 'Invalid format',
                      description: 'Unable to format request, invalid JSON format',
                      placement: 'top',
                    });
                  }
                }}
              >
                Run
              </Button>
            </Tooltip>
          )}
        </div>
      </div>
      <div className={'grl-dg__simulator__section__content'}>
        <SimulatorEditor
          value={requestValue}
          onChange={(text) => {
            setRequestValue(text);
            onChange?.(text ?? '');
          }}
        />
      </div>
    </>
  );
}`,computed:!1}}}};export{R8 as D,Pi as G,Jx as R,nn as _,mt as a,O8 as b,oC as c,K0 as d,Q0 as e,tm as f,tC as g,sm as i,Ii as l,am as o,Q6 as s,Zt as u};
