{"version":3,"mappings":"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","names":["ApartmentOutlined","ApartmentOutlinedSvg","props","ref","React.createElement","AntdIcon","_extends","ApartmentOutlined$1","React.forwardRef","ArrowRightOutlined","ArrowRightOutlinedSvg","ArrowRightOutlined$1","CodeOutlined","CodeOutlinedSvg","CodeOutlined$1","FunctionOutlined","FunctionOutlinedSvg","FunctionOutlined$1","NodeIndexOutlined","NodeIndexOutlinedSvg","NodeIndexOutlined$1","TableOutlined","TableOutlinedSvg","TableOutlined$1","Notify","prefixCls","style","className","_props$duration","duration","eventKey","content","closable","_props$closeIcon","closeIcon","divProps","onClick","onNoticeClose","times","_React$useState","React.useState","_React$useState2","_slicedToArray","hovering","setHovering","onInternalClose","onCloseKeyDown","e","KeyCode","React.useEffect","timeout","noticePrefixCls","classNames","_defineProperty","Notifications","_props$prefixCls","container","motion","maxCount","onAllRemoved","configList","setConfigList","key","_config$onClose","config","item","list","React.useImperativeHandle","clone","_toConsumableArray","index","innerConfig","_objectSpread","_list$index","_React$useState3","_React$useState4","placements","setPlacements","nextPlacements","_config$placement","placement","onAllNoticeRemoved","originPlacements","emptyRef","React.useRef","placementList","createPortal","React.Fragment","placementConfigList","keys","placementMotion","CSSMotionList","_ref","nodeRef","motionClassName","motionStyle","configClassName","configStyle","Notice","_excluded","defaultGetContainer","uniqueKey","mergeConfig","_len","objList","_key","obj","val","useNotification","rootConfig","_rootConfig$getContai","getContainer","shareConfig","_objectWithoutProperties","setContainer","notificationsRef","contextHolder","taskQueue","setTaskQueue","api","React.useMemo","mergedConfig","queue","task","genMessageStyle","token","componentCls","iconCls","boxShadow","colorText","colorSuccess","colorError","colorWarning","colorInfo","fontSizeLG","motionEaseInOutCirc","motionDurationSlow","marginXS","paddingXS","borderRadiusLG","zIndexPopup","contentPadding","contentBg","noticeCls","messageMoveIn","Keyframes","messageMoveOut","noticeStyle","resetComponent","useStyle","genComponentStyleHook","combinedToken","mergeToken","__rest","this","s","t","p","TypeIcon","InfoCircleFilled","CheckCircleFilled","CloseCircleFilled","ExclamationCircleFilled","LoadingOutlined","PureContent","type","icon","children","PurePanel","staticPrefixCls","restProps","getPrefixCls","React.useContext","ConfigContext","hashId","PurePanel$1","getMotion","transitionName","wrapPromiseFn","openFn","closeFn","closePromise","resolve","result","filled","rejected","DEFAULT_OFFSET","DEFAULT_DURATION","Holder","top","staticGetContainer","rtl","getPopupContainer","message","getStyle","getClassName","getNotificationMotion","mergedCloseIcon","CloseOutlined","holder","useRcNotification","keyIndex","useInternalMessage","messageConfig","holderRef","close","_a","open","fakeResult","originOpen","onClose","restConfig","mergedKey","typeOpen","jointContent","mergedDuration","mergedOnClose","useMessage","act","callback","defaultGlobalConfig","getGlobalContext","globalPrefixCls","globalGetContainer","mergedPrefixCls","globalConfig","mergedContainer","GlobalHolder","_","initializeMessageConfig","setMessageConfig","global","rootPrefixCls","rootIconPrefixCls","theme","sync","instance","method","ConfigProvider","flushNotice","holderFragment","newMessage","render","node","skipped","_message$instance","setMessageGlobalConfig","fn","args","destroy","methods","baseStaticMethods","staticMethods","message$1","DecisionGraphStoreContext","React","DecisionGraphProvider","store","useMemo","create","set","getState","graph","id","decisionGraph","produce","draft","nodes","_b","openTabs","nodeId","i","activeTab","tab","id2","jsx","useDecisionGraphStore","selector","equals","useDecisionGraphRaw","DecisionGraphEmpty","defaultValue","value","disabled","configurable","onChange","onAddNode","onOpenNode","onTabChange","onEditGraph","components","simulate","mountedRef","useRef","setDecisionGraph","setDecisionGraph2","decisionGraph2","equal","innerChange","useDebouncedCallback","useEffect","R","ReflectApply","target","receiver","ReflectOwnKeys","ProcessEmitWarning","warning","NumberIsNaN","EventEmitter","eventsModule","once","defaultMaxListeners","checkListener","listener","arg","n","_getMaxListeners","that","doError","events","er","err","handler","len","listeners","arrayClone","_addListener","prepend","m","existing","w","onceWrapper","_onceWrap","state","wrapped","position","originalListener","spliceOne","_listeners","unwrap","evlistener","unwrapListeners","emitter","listenerCount","arr","copy","ret","name","reject","errorListener","resolver","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","flags","wrapListener","Iterator","next","l","iterator","sequence","support","require$$0","require$$1","ARRAY_BUFFER_SUPPORT","SYMBOL_SUPPORT","iterOrNull","iter","take","iterable","array","step","chain","iterables","current","assignPolyfill","k","assign","getMatchingEdge","source","sourceData","edge","isPlainObject","isEmpty","o","privateProperty","readOnlyProperty","descriptor","validateHints","hints","incrementalIdStartingFromRandomByte","GraphError","InvalidArgumentsGraphError","NotFoundGraphError","UsageGraphError","MixedNodeData","attributes","DirectedNodeData","UndirectedNodeData","EdgeData","undirected","outKey","inKey","adj","head","NODE","SOURCE","TARGET","OPPOSITE","findRelevantNodeData","mode","nodeOrEdge","nameOrEdge","add1","add2","nodeData","edgeData","arg1","arg2","attachNodeAttributeGetter","Class","data","attachNodeAttributesGetter","attachNodeAttributeChecker","attachNodeAttributeSetter","attachNodeAttributeUpdater","updater","attachNodeAttributeRemover","attachNodeAttributesReplacer","attachNodeAttributesMerger","attachNodeAttributesUpdater","NODE_ATTRIBUTES_METHODS","element","attachNodeAttributesMethods","Graph","attacher","attachEdgeAttributeGetter","attachEdgeAttributesGetter","attachEdgeAttributeChecker","attachEdgeAttributeSetter","attachEdgeAttributeUpdater","attachEdgeAttributeRemover","attachEdgeAttributesReplacer","attachEdgeAttributesMerger","attachEdgeAttributesUpdater","EDGE_ATTRIBUTES_METHODS","attachEdgeAttributesMethods","EDGES_ITERATION","forEachSimple","breakable","object","avoid","shouldBreak","forEachMulti","createIterator","forEachForKeySimple","targetData","forEachForKeyMulti","createIteratorForKey","createEdgeArray","size","mask","forEachEdge","shouldFilter","createEdgeIterator","forEachEdgeForNode","multi","direction","found","createEdgeArrayForNode","edges","createEdgeIteratorForNode","forEachEdgeForPath","createEdgeArrayForPath","createEdgeIteratorForPath","attachEdgeArrayCreator","description","attachForEachEdge","forEachName","mapName","length","ea","sa","ta","u","filterName","reduceName","initialValue","accumulator","attachFindEdge","findEdgeName","someName","everyName","attachEdgeIteratorCreator","originalName","attachEdgeIterationMethods","NEIGHBORS_ITERATION","CompositeSetWrapper","forEachInObjectOnce","visited","neighborData","forEachNeighbor","createNeighborArrayForNode","neighbors","createDedupedObjectIterator","createNeighborIterator","attachNeighborArrayCreator","attachForEachNeighbor","a","attachFindNeighbor","capitalizedSingular","findName","attachNeighborIteratorCreator","iteratorName","attachNeighborIterationMethods","forEachAdjacency","assymetric","disconnectedNodes","neighbor","hasEdges","serializeNode","serialized","serializeEdge","validateSerializedNode","validateSerializedEdge","INSTANCE_ID","TYPES","EMITTER_PROPS","EDGE_ADD_METHODS","verb","DEFAULTS","addNode","unsafeAddNode","addEdge","mustGenerateKey","eventData","isSelfLoop","mergeEdge","asUpdater","alreadyExistingEdgeData","info","oldAttributes","sourceWasAdded","targetWasAdded","dropEdgeFromData","options","NodeDataClass","instancePrefix","edgeId","edgeKeyGenerator","availableEdgeKey","prop","degree","loops","merge","_sa","_ta","undirectedByDefault","multiIndex","label","tmp","desc","dummy","DirectedGraph","finalOptions","UndirectedGraph","MultiGraph","MultiDirectedGraph","MultiUndirectedGraph","attachStaticFromMethod","isGraph","WHITE","GREY","BLACK","hasCycle","labels","stack","neighborCallback","neighborLabel","currentLabel","foreach","MAX_8BIT_INTEGER","MAX_16BIT_INTEGER","MAX_32BIT_INTEGER","MAX_SIGNED_8BIT_INTEGER","MAX_SIGNED_16BIT_INTEGER","MAX_SIGNED_32BIT_INTEGER","exports","maxIndex","TYPE_PRIORITY","getter","maxType","maxPriority","v","PointerArray","forEach","typed","isArrayLike","guessLength","toArray","toArrayWithIndices","IndexArray","indices","FixedDeque","ArrayClass","capacity","scope","c","j","offset","items","deque","cc","names","out","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","useStoreWithEqualityFn","equalityFn","slice","useDebugValue","createWithEqualityFnImpl","createState","defaultEqualityFn","createStore","useBoundStoreWithEqualityFn","createWithEqualityFn","noop","dispatch","Dispatch","parseTypenames","typenames","types","typename","T","get","xhtml","namespaces","namespace","prefix","creatorInherit","document","uri","creatorFixed","fullname","creator","none","selector$h","selection_select","select","groups","subgroups","group","subgroup","subnode","Selection","x","empty","selectorAll","arrayAll","selection_selectAll","parents","matcher","childMatcher","find","childFind","match","childFirst","selection_selectChild","filter","childrenFilter","selection_selectChildren","selection_filter","sparse","update","selection_enter","EnterNode","parent","datum","child","constant$3","bindIndex","enter","exit","groupLength","dataLength","bindKey","nodeByKeyValue","keyValues","keyValue","selection_data","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","previous","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","context","selection","groups0","groups1","m0","m1","merges","group0","group1","selection_order","selection_sort","compare","ascending","compareNode","b","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","priority","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","string","classList","ClassList","classedAdd","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","constantNull","selection_insert","before","remove","selection_remove","selection_cloneShallow","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","event","onRemove","on","onAdd","selection_on","dispatchEvent","params","window","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","root","selection_selection","sourceEvent","pointer","svg","point","rect","nonpassive","nonpassivecapture","nopropagation","noevent$1","dragDisable","view","noevent","yesdrag","noclick","constant$2","DragEvent","subject","identifier","active","y","dx","dy","defaultFilter","defaultContainer","defaultSubject","d","defaultTouchable","drag","touchable","gestures","mousedownx","mousedowny","mousemoving","touchending","clickDistance2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","nodrag","touches","touch","p0","define","constructor","factory","prototype","extend","definition","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","color","channels","color_formatHex","color_formatHex8","color_formatHsl","color_formatRgb","hslConvert","format","rgbn","Rgb","rgba","hsla","r","g","rgbConvert","rgb","opacity","clampi","clampa","rgb_formatHex","rgb_formatHex8","rgb_formatRgb","hex","h","Hsl","min","max","hsl","m2","hsl2rgb","clamph","clampt","constant$1","linear","exponential","gamma","nogamma","interpolateRgb","rgbGamma","start","end","colorRgb","interpolateNumber","reA","reB","zero","one","interpolateString","bi","am","bm","bs","q","number","degrees","identity","decompose","f","scaleX","scaleY","skewX","svgNode","parseCss","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","translate","xa","ya","xb","yb","rotate","scale","interpolateTransformCss","interpolateTransformSvg","epsilon2","cosh","sinh","tanh","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p1","ux0","uy0","w0","ux1","uy1","w1","d2","S","d1","b0","b1","r0","r1","coshr0","_1","_2","_4","frame","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","now","clearNow","Timer","timer","delay","time","sleep","timerFlush","wake","nap","poke","t0","t1","t2","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","timing","schedules","init","self","tween","stop","tick","interrupt","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","value1","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","cancel","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","ZoomEvent","transform","Transform","location","defaultExtent","defaultTransform","defaultWheelDelta","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","constrain","wheelDelta","scaleExtent","touchstarting","touchfirst","touchDelay","wheelDelay","tapDistance","wheeled","dblclicked","collection","k0","k1","centroid","clean","Gesture","wheelidled","currentTarget","x0","y0","dragEnable","started","l0","l1","dp","dl","StoreContext","createContext","Provider$1","errorMessages","nodeType","sourceHandle","edgeType","zustandErrorMessage","useStore","useContext","useStoreApi","selector$g","Panel","rest","pointerEvents","positionClasses","Attribution","proOptions","EdgeText","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","edgeRef","edgeTextBbox","setEdgeTextBbox","useState","edgeTextClasses","textBbox","jsxs","EdgeText$1","memo","getDimensions","clamp","clampPosition","calcAutoPanVelocity","calcAutoPan","pos","bounds","xMovement","yMovement","getHostForElement","getBoundsOfBoxes","box1","box2","rectToBox","width","height","boxToRect","x2","y2","nodeToRect","getOverlappingArea","rectA","rectB","xOverlap","yOverlap","isRectObject","isNumeric","internalsSymbol","elementSelectionKeys","devWarn","isReactKeyboardEvent","isInputDOMNode","kbEvent","isMouseEvent","getEventPosition","isMouseTriggered","evtX","evtY","isMacOs","BaseEdge","path","labelX","labelY","markerEnd","markerStart","interactionWidth","Fragment","getMouseHandler$1","getEdgeCenter","sourceX","sourceY","targetX","targetY","xOffset","centerX","yOffset","centerY","getBezierEdgeCenter","sourceControlX","sourceControlY","targetControlX","targetControlY","offsetX","offsetY","ConnectionMode","PanOnScrollMode","SelectionMode","ConnectionLineType","MarkerType","Position","getControl","x1","y1","getSimpleBezierPath","sourcePosition","targetPosition","SimpleBezierEdge","handleDirections","getDirection","distance","getPoints","center","sourceDir","targetDir","sourceGapped","targetGapped","dir","dirAccessor","currDir","points","sourceGapOffset","targetGapOffset","defaultCenterX","defaultCenterY","defaultOffsetX","defaultOffsetY","verticalSplit","horizontalSplit","sourceTarget","targetSource","diff","gapOffset","dirAccessorOpposite","isSameDir","sourceGtTargetOppo","sourceLtTargetOppo","sourceGapPoint","targetGapPoint","maxXDistance","maxYDistance","getBend","bendSize","xDir","yDir","getSmoothStepPath","borderRadius","res","segment","SmoothStepEdge","pathOptions","StepEdge","getStraightPath","StraightEdge","calculateControlOffset","curvature","getControlWithCurvature","getBezierPath","BezierEdge","NodeIdContext","Provider","useNodeId","isEdge","getEdgeId","targetHandle","getMarkerId","marker","rfId","connectionExists","el","edgeParams","pointToRendererPoint","tx","ty","tScale","snapToGrid","snapX","snapY","rendererPointToPoint","getNodePositionWithOrigin","nodeOrigin","getRectOfNodes","box","currBox","getNodesInside","nodeInternals","partially","excludeNonSelectableNodes","paneRect","visibleNodes","selectable","hidden","positionAbsolute","nodeRect","overlappingArea","notInitialized","partiallyVisible","area","getConnectedEdges","nodeIds","getTransformForBounds","minZoom","maxZoom","padding","xZoom","yZoom","clampedZoom","boundsCenterX","boundsCenterY","getD3Transition","getHandles","handleBounds","currentHandle","getClosestHandle","doc","connectionRadius","handles","validator","handleBelow","handleNodeId","handleType","getHandleType","handleId","validHandleResult","closestHandles","minDistance","handle","defaultResult","hasValidHandle","hasTargetHandle","nullConnection","isValidHandle","connectionMode","fromNodeId","fromHandleId","fromType","isValidConnection","isTarget","handleToCheck","connectable","connectableEnd","connection","getHandleLookup","sourceHandles","targetHandles","edgeUpdaterType","handleDomNode","resetRecentHandle","getConnectionStatus","isInsideConnectionRadius","isHandleValid","connectionStatus","handlePointerDown","onConnect","setState","onEdgeUpdateEnd","domNode","autoPanOnConnect","onConnectStart","panBy","getNodes","cancelConnection","autoPanId","closestHandle","clickedHandle","containerBounds","prevActiveHandle","connectionPosition","autoPanStarted","isValid","handleLookup","autoPan","onPointerMove","onPointerUp","alwaysValid","selector$f","connectingSelector","startHandle","endHandle","clickHandle","Handle","forwardRef","isConnectable","isConnectableStart","isConnectableEnd","onMouseDown","onTouchStart","connectOnClick","noPanClassName","shallow","connecting","clickConnecting","onConnectExtended","defaultEdgeOptions","onConnectAction","hasDefaultEdges","setEdges","onPointerDown","onClickConnectStart","onClickConnectEnd","connectionClickStartHandle","isValidConnectionStore","isValidConnectionHandler","Handle$1","DefaultNode","DefaultNode$1","InputNode","InputNode$1","OutputNode","OutputNode$1","GroupNode","selector$e","selectId","areEqual","SelectionListener","onSelectionChange","selectedNodes","selectedEdges","changeSelector","Wrapper$1","storeHasSelectionChange","selector$d","useStoreUpdater","setStoreState","useDirectStoreUpdater","StoreUpdater","defaultNodes","defaultEdges","onConnectEnd","nodesDraggable","nodesConnectable","nodesFocusable","edgesFocusable","edgesUpdatable","elevateNodesOnSelect","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","snapGrid","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","autoPanOnNodeDrag","onError","setNodes","setDefaultNodesAndEdges","setMinZoom","setMaxZoom","setTranslateExtent","setNodeExtent","reset","edgesWithDefaults","ariaLiveStyle","ARIA_NODE_DESC_KEY","ARIA_EDGE_DESC_KEY","ARIA_LIVE_MESSAGE","selector$c","AriaLiveMessage","ariaLiveMessage","A11yDescriptions","disableKeyboardA11y","useKeyPress","keyCode","keyPressed","setKeyPressed","modifierPressed","pressedKeys","keyCodes","keysToWatch","kc","keysFlat","downHandler","keyOrCode","useKeyOrCode","isMatchingKey","upHandler","resetHandler","isUp","eventCode","calculateXYZPosition","parentNode","parentNodePosition","updateAbsoluteNodePositions","parentNodes","z","createNodeInternals","nextNodeInternals","selectedNodeZ","currInternals","internals","d3Zoom","d3Selection","fitViewOnInitDone","fitViewOnInit","isInitialFitView","isVisible","optionNode","nodesInitialized","nextTransform","zoomIdentity","handleControlledNodeSelectionChange","nodeChanges","change","handleControlledEdgeSelectionChange","edgeChanges","updateNodesAndEdgesSelections","changedNodes","changedEdges","hasDefaultNodes","initialViewportHelper","selector$b","useViewportHelper","zoomLevel","nextZoom","useReactFlow","viewportHelper","useCallback","getNode","getEdges","getEdge","payload","nextNodes","changes","nextEdges","addNodes","addEdges","toObject","deleteElements","nodesDeleted","edgesDeleted","edgeIds","nodesToRemove","parentHit","deletableEdges","initialHitEdges","connectedEdges","edgesToRemove","edgeIdsToRemove","getNodeRect","nodeOrRect","isRect","getIntersectingNodes","currNodeRect","isNodeIntersecting","useGlobalKeyHandler","deleteKeyCode","multiSelectionKeyCode","deleteKeyPressed","multiSelectionKeyPressed","useResizeHandler","rendererNode","resizeObserver","updateDimensions","containerStyle","viewChanged","prevViewport","eventTransform","eventToFlowTransform","isWrappedWithClass","isRightClickPan","panOnDrag","usedButton","factor","selector$a","ZoomPane","onMove","onMoveStart","onMoveEnd","onPaneContextMenu","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","defaultViewport","zoomActivationKeyCode","preventScrolling","noWheelClassName","timerId","isZoomingOrPanning","zoomedWithRightMouseButton","zoomPane","prevTransform","d3ZoomHandler","userSelectionActive","zoomActivationKeyPressed","mouseButton","isPanScrolling","panScrollTimeout","bbox","d3ZoomInstance","updatedTransform","constrainedTransform","currentZoom","_isMacOs","pinchDelta","deltaNormalize","deltaX","deltaY","nextViewport","onViewportChangeStart","onViewportChange","onViewportChangeEnd","flowTransform","zoomScroll","pinchZoom","buttonAllowed","selector$9","UserSelection","userSelectionRect","handleParentExpand","updateItem","extendWidth","extendHeight","xDiff","yDiff","applyChanges","elements","initElements","currentChanges","currentChange","applyNodeChanges","applyEdgeChanges","createSelectionChange","selected","getSelectionChanges","selectedIds","willBeSelected","wrapHandler","containerRef","selector$8","Pane","isSelecting","selectionMode","onSelectionStart","onSelectionEnd","onPaneClick","onPaneScroll","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","prevSelectedNodesCount","prevSelectedEdgesCount","dragging","resetUserSelection","onContextMenu","onWheel","resetSelectedElements","onMouseMove","mousePos","startX","startY","nextUserSelectRect","selectedEdgeIds","selectedNodeIds","onMouseUp","onMouseLeave","hasActiveSelection","isParentSelected","hasSelector","getDragItems","clampNodeExtent","calcNextPosition","nextPosition","clampedNodeExtent","currentExtent","parentX","parentY","parentPosition","getEventHandlerParams","dragItems","extentedDragItems","getHandleBounds","nodeElement","handlesArray","nodeBounds","nodeOffset","getMouseHandler","handleNodeClick","unselect","addSelectedNodes","unselectNodesAndEdges","multiSelectionActive","useGetPointerPosition","pointerPos","wrapSelectionDragFunc","selectionFunc","useDrag","noDragClassName","handleSelector","isSelectable","selectNodesOnDrag","setDragging","lastPos","mousePosition","dragEvent","getPointerPosition","updateNodes","updateNodePositions","hasChange","nodesBox","adjustedNodeExtent","updatedPos","onDrag","currentNode","dragHandler","onStart","onStop","useUpdateNodePositions","xVelo","yVelo","positionDiffX","positionDiffY","nodeUpdates","arrowKeyDiffs","wrapNode","NodeComponent","NodeWrapper","xPos","yPos","xPosOrigin","yPosOrigin","onMouseEnter","onDoubleClick","isDraggable","isFocusable","dragHandle","zIndex","isParent","initialized","ariaLabel","prevSourcePosition","prevTargetPosition","prevType","hasPointerEvents","updatePositions","onMouseEnterHandler","onMouseMoveHandler","onMouseLeaveHandler","onContextMenuHandler","onDoubleClickHandler","onSelectNodeHandler","onKeyDown","currNode","typeChanged","sourcePosChanged","targetPosChanged","selector$7","NodesSelection","onSelectionContextMenu","left","transformString","NodesSelection$1","selector$6","FlowRenderer","selectionKeyCode","selectionOnDrag","panActivationKeyCode","_panOnDrag","nodesSelectionActive","selectionKeyPressed","FlowRenderer$1","useVisibleNodes","onlyRenderVisible","createNodeTypes","nodeTypes","standardTypes","wrappedTypes","specialTypes","getPositionWithOrigin","origin","selector$5","NodeRenderer","updateNodeDimensions","resizeObserverRef","observer","entries","updates","entry","clampedPosition","posX","posY","posOrigin","NodeRenderer$1","shiftX","shift","shiftY","EdgeUpdaterClassName","EdgeAnchor","radius","onMouseOut","alwaysValidConnection","wrapEdge","EdgeComponent","EdgeWrapper","onEdgeDoubleClick","animated","sourceHandleId","targetHandleId","edgeUpdaterRadius","onEdgeUpdate","onEdgeUpdateStart","isUpdatable","updateHover","setUpdateHover","updating","setUpdating","markerStartUrl","markerEndUrl","onEdgeClick","addSelectedEdges","onEdgeDoubleClickHandler","onEdgeContextMenu","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","handleEdgeUpdater","isSourceHandle","_onEdgeUpdateEnd","evt","onEdgeUpdaterSourceMouseDown","onEdgeUpdaterTargetMouseDown","onEdgeUpdaterMouseEnter","onEdgeUpdaterMouseOut","inactive","createEdgeTypes","edgeTypes","getHandlePosition","getHandle","getEdgePositions","sourceNodeRect","targetNodeRect","sourceHandlePos","targetHandlePos","isEdgeVisible","sourcePos","targetPos","sourceWidth","sourceHeight","targetWidth","targetHeight","edgeBox","viewBox","getNodeData","_c","_d","_e","defaultEdgeTree","groupEdgesByZLevel","elevateEdgesOnSelect","maxLevel","levelLookup","tree","hasZIndex","targetNode","sourceNode","edgeOrConnectedNodeSelected","selectedZIndex","edgeTree","level","useVisibleEdges","ArrowSymbol","strokeWidth","ArrowClosedSymbol","MarkerSymbols","useMarkerSymbol","Marker","markerUnits","orient","Symbol","markerSelector","defaultColor","ids","markers","markerId","MarkerDefinitions","MarkerDefinitions$1","selector$4","EdgeRenderer","defaultMarkerColor","onlyRenderVisibleElements","isMaxLevel","sourceHandleBounds","sourceIsValid","targetHandleBounds","targetIsValid","targetNodeHandles","EdgeRenderer$1","selector$3","Viewport","useOnInitHandler","onInit","rfInstance","isInitialized","oppositePosition","ConnectionLine","CustomComponent","fromNode","toX","toY","fromHandleBounds","fromHandle","fromHandleX","fromHandleY","fromX","fromY","fromPosition","toPosition","dAttr","pathParams","selector$2","ConnectionLineWrapper","component","useNodeOrEdgeTypes","nodeOrEdgeTypes","createTypes","GraphView","onNodeClick","onNodeDoubleClick","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","nodeTypesWrapped","edgeTypesWrapped","GraphView$1","infiniteExtent","initialState","createRFStore","fitViewOnInitOptions","viewportNode","dimensions","nextFitViewOnInitDone","nodeDragItems","positionChanged","triggerNodeChanges","storeEdges","nodesToUnselect","edgesToUnselect","delta","ReactFlowProvider","storeRef","Wrapper","defaultNodeTypes","defaultEdgeTypes","initNodeOrigin","initSnapGrid","initDefaultViewport","wrapperStyle","ReactFlow","attributionPosition","createUseItemsState","initialItems","setItems","onItemsChange","useNodesState","useEdgesState","PlusIcon","MinusIcon","FitViewIcon","LockIcon","UnlockIcon","ControlButton","Controls","showZoom","showFitView","showInteractive","onZoomIn","onZoomOut","onFitView","onInteractiveChange","setIsVisible","isInteractive","minZoomReached","maxZoomReached","zoomIn","zoomOut","onZoomInHandler","onZoomOutHandler","onFitViewHandler","onToggleInteractivity","Controls$1","BackgroundVariant","LinePattern","lineWidth","DotPattern","defaultSize","Background","variant","gap","patternId","patternColor","patternSize","isDots","isCross","gapXY","scaledGap","scaledSize","patternDimensions","patternOffset","Background$1","CustomEdge","edgePath","clsx","edgeFunction","outer","mapToDecisionNode","mapToDecisionNodes","mapToDecisionEdges","mapToGraphNode","mapToGraphNodes","mapToGraphEdges","unsecuredCopyToClipboard","text","textArea","copyToClipboard","pasteFromClipboard","isClipboardData","useGraphClipboard","reactFlow","wrapper","copyNodes","copyNodeIds","copyEdges","pasteNodes","clipboardText","clipboardData","acc","curr","v4","anchor","copyAnchor","gravityCenter","rectCenter","projection","register","GraphComponents","inputDisabled","outputDisabled","onPaste","customComponents","onDragStart","positionData","Typography","Button","MultiNodeForm","removeEdges","removeNodes","onCopy","Stack","NodeForm","removeNode","form","Form","component2","handleChangeContent","Space","Input","useNodeError","GraphNode","doubleClickTimer","openTab","simulate2","openTab2","trace","error","innerOpen","GraphNodeEdit","DecisionContentType","reactFlowProOptions","onDisableTabs","hideExportImport","reactFlowWrapper","reactFlowInstance","setReactFlowInstance","fileInput","editGraph","setEditGraph","editNodes","setEditNodes","onEditNodesChange","editEdges","setEditEdges","onEditEdgesChange","inputNodes","outputNodes","closeTab","disabled2","closeTab2","onChange2","onAddNode2","onEditGraph2","graphClipboard","count","inputField","outputField","defaultFunctionValue","newNode","nodes2","updateNode","onDrop","reactFlowBounds","elementPosition","onDragOver","els","editNodeTypes","confirmEdit","edges2","handleUploadInput","fileList","reader","parsed","e2","downloadJDM","fileName","json","blob","href","link","useImperativeHandle","Tooltip","ExportOutlined","ImportOutlined","CheckOutlined","nodes3","edges3","GraphTabs","activeNode","openNodes","Tabs","targetKey","action","TabDecisionTable","manager","nodeTrace","updateNode2","configurable2","node2","activeRules","DecisionTable","TabExpression","Expression","Function","__vitePreload","TabFunction","Suspense","Spin","DecisionGraphWrapper","onTabChange2","disableTabs","setDisableTabs","dndManager","createDragDropManager","HTML5Backend","DecisionGraph"],"sources":["../../node_modules/.pnpm/@ant-design+icons-svg@4.3.1/node_modules/@ant-design/icons-svg/es/asn/ApartmentOutlined.js","../../node_modules/.pnpm/@ant-design+icons@5.2.5_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/ApartmentOutlined.js","../../node_modules/.pnpm/@ant-design+icons-svg@4.3.1/node_modules/@ant-design/icons-svg/es/asn/ArrowRightOutlined.js","../../node_modules/.pnpm/@ant-design+icons@5.2.5_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/ArrowRightOutlined.js","../../node_modules/.pnpm/@ant-design+icons-svg@4.3.1/node_modules/@ant-design/icons-svg/es/asn/CodeOutlined.js","../../node_modules/.pnpm/@ant-design+icons@5.2.5_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/CodeOutlined.js","../../node_modules/.pnpm/@ant-design+icons-svg@4.3.1/node_modules/@ant-design/icons-svg/es/asn/FunctionOutlined.js","../../node_modules/.pnpm/@ant-design+icons@5.2.5_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/FunctionOutlined.js","../../node_modules/.pnpm/@ant-design+icons-svg@4.3.1/node_modules/@ant-design/icons-svg/es/asn/NodeIndexOutlined.js","../../node_modules/.pnpm/@ant-design+icons@5.2.5_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/NodeIndexOutlined.js","../../node_modules/.pnpm/@ant-design+icons-svg@4.3.1/node_modules/@ant-design/icons-svg/es/asn/TableOutlined.js","../../node_modules/.pnpm/@ant-design+icons@5.2.5_react-dom@18.2.0_react@18.2.0/node_modules/@ant-design/icons/es/icons/TableOutlined.js","../../node_modules/.pnpm/rc-notification@5.0.4_react-dom@18.2.0_react@18.2.0/node_modules/rc-notification/es/Notice.js","../../node_modules/.pnpm/rc-notification@5.0.4_react-dom@18.2.0_react@18.2.0/node_modules/rc-notification/es/Notifications.js","../../node_modules/.pnpm/rc-notification@5.0.4_react-dom@18.2.0_react@18.2.0/node_modules/rc-notification/es/useNotification.js","../../node_modules/.pnpm/antd@5.8.4_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/message/style/index.js","../../node_modules/.pnpm/antd@5.8.4_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/message/PurePanel.js","../../node_modules/.pnpm/antd@5.8.4_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/message/util.js","../../node_modules/.pnpm/antd@5.8.4_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/message/useMessage.js","../../node_modules/.pnpm/antd@5.8.4_react-dom@18.2.0_react@18.2.0/node_modules/antd/es/message/index.js","../../src/components/decision-graph/context/dg-store.context.tsx","../../src/components/decision-graph/dg-empty.tsx","../../node_modules/.pnpm/events@3.3.0/node_modules/events/events.js","../../node_modules/.pnpm/obliterator@2.0.4/node_modules/obliterator/iterator.js","../../node_modules/.pnpm/obliterator@2.0.4/node_modules/obliterator/support.js","../../node_modules/.pnpm/obliterator@2.0.4/node_modules/obliterator/iter.js","../../node_modules/.pnpm/obliterator@2.0.4/node_modules/obliterator/take.js","../../node_modules/.pnpm/obliterator@2.0.4/node_modules/obliterator/chain.js","../../node_modules/.pnpm/graphology@0.25.4_graphology-types@0.24.7/node_modules/graphology/dist/graphology.esm.js","../../node_modules/.pnpm/graphology-utils@2.5.2_graphology-types@0.24.7/node_modules/graphology-utils/is-graph.js","../../node_modules/.pnpm/graphology-dag@0.3.0_graphology-types@0.24.7/node_modules/graphology-dag/has-cycle.js","../../node_modules/.pnpm/obliterator@2.0.4/node_modules/obliterator/foreach.js","../../node_modules/.pnpm/mnemonist@0.39.5/node_modules/mnemonist/utils/typed-arrays.js","../../node_modules/.pnpm/mnemonist@0.39.5/node_modules/mnemonist/utils/iterables.js","../../node_modules/.pnpm/mnemonist@0.39.5/node_modules/mnemonist/fixed-deque.js","../../node_modules/.pnpm/graphology-dag@0.3.0_graphology-types@0.24.7/node_modules/graphology-dag/index.js","../../node_modules/.pnpm/classcat@5.0.4/node_modules/classcat/index.js","../../node_modules/.pnpm/zustand@4.4.1_@types+react@18.2.21_immer@10.0.2_react@18.2.0/node_modules/zustand/esm/traditional.mjs","../../node_modules/.pnpm/d3-dispatch@3.0.1/node_modules/d3-dispatch/src/dispatch.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespaces.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespace.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/creator.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selector.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/select.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/array.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selectorAll.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/matcher.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/filter.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sparse.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/enter.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/constant.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/data.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/exit.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/join.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/merge.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/order.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sort.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/call.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/nodes.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/node.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/size.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/empty.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/each.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/attr.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/window.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/style.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/property.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/classed.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/text.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/html.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/raise.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/lower.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/append.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/insert.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/remove.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/clone.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/datum.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/on.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/iterator.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/index.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/select.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/sourceEvent.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/pointer.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/noevent.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/nodrag.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/constant.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/event.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/drag.js","../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/define.js","../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/color.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/constant.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/color.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/rgb.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/number.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/string.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/index.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/zoom.js","../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timer.js","../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timeout.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/schedule.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/interrupt.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/tween.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attr.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/delay.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/duration.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/ease.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/filter.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/merge.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/on.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/remove.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/select.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selection.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/style.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/text.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/textTween.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/transition.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/end.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/index.js","../../node_modules/.pnpm/d3-ease@3.0.1/node_modules/d3-ease/src/cubic.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/transition.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/index.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/constant.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/event.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/transform.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/noevent.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/zoom.js","../../node_modules/.pnpm/@reactflow+core@11.8.3_@types+react@18.2.21_immer@10.0.2_react-dom@18.2.0_react@18.2.0/node_modules/@reactflow/core/dist/esm/index.js","../../node_modules/.pnpm/@reactflow+controls@11.1.19_@types+react@18.2.21_immer@10.0.2_react-dom@18.2.0_react@18.2.0/node_modules/@reactflow/controls/dist/esm/index.js","../../node_modules/.pnpm/@reactflow+background@11.2.8_@types+react@18.2.21_immer@10.0.2_react-dom@18.2.0_react@18.2.0/node_modules/@reactflow/background/dist/esm/index.js","../../src/components/decision-graph/custom-edge.tsx","../../src/components/decision-graph/dg-util.ts","../../src/helpers/utility.ts","../../src/components/decision-graph/hooks/use-graph-clipboard.ts","../../src/components/decision-graph/graph/graph-components.tsx","../../src/components/decision-graph/graph/multi-node-form.tsx","../../src/components/decision-graph/graph/node-form.tsx","../../src/components/decision-graph/graph/nodes.tsx","../../src/components/decision-graph/graph/graph.tsx","../../src/components/decision-graph/graph/graph-tabs.tsx","../../src/components/decision-graph/graph/tab-decision-table.tsx","../../src/components/decision-graph/graph/tab-expression.tsx","../../src/components/decision-graph/graph/tab-function.tsx","../../src/components/decision-graph/dg-wrapper.tsx","../../src/components/decision-graph/dg.tsx"],"sourcesContent":["// This icon file is generated automatically.\nvar ApartmentOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M908 640H804V488c0-4.4-3.6-8-8-8H548v-96h108c8.8 0 16-7.2 16-16V80c0-8.8-7.2-16-16-16H368c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h108v96H228c-4.4 0-8 3.6-8 8v152H116c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16H292v-88h440v88H620c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h288c8.8 0 16-7.2 16-16V656c0-8.8-7.2-16-16-16zm-564 76v168H176V716h168zm84-408V140h168v168H428zm420 576H680V716h168v168z\" } }] }, \"name\": \"apartment\", \"theme\": \"outlined\" };\nexport default ApartmentOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport ApartmentOutlinedSvg from \"@ant-design/icons-svg/es/asn/ApartmentOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar ApartmentOutlined = function ApartmentOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: ApartmentOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  ApartmentOutlined.displayName = 'ApartmentOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(ApartmentOutlined);","// This icon file is generated automatically.\nvar ArrowRightOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z\" } }] }, \"name\": \"arrow-right\", \"theme\": \"outlined\" };\nexport default ArrowRightOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport ArrowRightOutlinedSvg from \"@ant-design/icons-svg/es/asn/ArrowRightOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar ArrowRightOutlined = function ArrowRightOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: ArrowRightOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  ArrowRightOutlined.displayName = 'ArrowRightOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(ArrowRightOutlined);","// This icon file is generated automatically.\nvar CodeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M516 673c0 4.4 3.4 8 7.5 8h185c4.1 0 7.5-3.6 7.5-8v-48c0-4.4-3.4-8-7.5-8h-185c-4.1 0-7.5 3.6-7.5 8v48zm-194.9 6.1l192-161c3.8-3.2 3.8-9.1 0-12.3l-192-160.9A7.95 7.95 0 00308 351v62.7c0 2.4 1 4.6 2.9 6.1L420.7 512l-109.8 92.2a8.1 8.1 0 00-2.9 6.1V673c0 6.8 7.9 10.5 13.1 6.1zM880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z\" } }] }, \"name\": \"code\", \"theme\": \"outlined\" };\nexport default CodeOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport CodeOutlinedSvg from \"@ant-design/icons-svg/es/asn/CodeOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar CodeOutlined = function CodeOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: CodeOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  CodeOutlined.displayName = 'CodeOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(CodeOutlined);","// This icon file is generated automatically.\nvar FunctionOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M841 370c3-3.3 2.7-8.3-.6-11.3a8.24 8.24 0 00-5.3-2.1h-72.6c-2.4 0-4.6 1-6.1 2.8L633.5 504.6a7.96 7.96 0 01-13.4-1.9l-63.5-141.3a7.9 7.9 0 00-7.3-4.7H380.7l.9-4.7 8-42.3c10.5-55.4 38-81.4 85.8-81.4 18.6 0 35.5 1.7 48.8 4.7l14.1-66.8c-22.6-4.7-35.2-6.1-54.9-6.1-103.3 0-156.4 44.3-175.9 147.3l-9.4 49.4h-97.6c-3.8 0-7.1 2.7-7.8 6.4L181.9 415a8.07 8.07 0 007.8 9.7H284l-89 429.9a8.07 8.07 0 007.8 9.7H269c3.8 0 7.1-2.7 7.8-6.4l89.7-433.1h135.8l68.2 139.1c1.4 2.9 1 6.4-1.2 8.8l-180.6 203c-2.9 3.3-2.6 8.4.7 11.3 1.5 1.3 3.4 2 5.3 2h72.7c2.4 0 4.6-1 6.1-2.8l123.7-146.7c2.8-3.4 7.9-3.8 11.3-1 .9.8 1.6 1.7 2.1 2.8L676.4 784c1.3 2.8 4.1 4.7 7.3 4.7h64.6a8.02 8.02 0 007.2-11.5l-95.2-198.9c-1.4-2.9-.9-6.4 1.3-8.8L841 370z\" } }] }, \"name\": \"function\", \"theme\": \"outlined\" };\nexport default FunctionOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport FunctionOutlinedSvg from \"@ant-design/icons-svg/es/asn/FunctionOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar FunctionOutlined = function FunctionOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: FunctionOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  FunctionOutlined.displayName = 'FunctionOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(FunctionOutlined);","// This icon file is generated automatically.\nvar NodeIndexOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"defs\", \"attrs\": {}, \"children\": [{ \"tag\": \"style\", \"attrs\": {} }] }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M843.5 737.4c-12.4-75.2-79.2-129.1-155.3-125.4S550.9 676 546 752c-153.5-4.8-208-40.7-199.1-113.7 3.3-27.3 19.8-41.9 50.1-49 18.4-4.3 38.8-4.9 57.3-3.2 1.7.2 3.5.3 5.2.5 11.3 2.7 22.8 5 34.3 6.8 34.1 5.6 68.8 8.4 101.8 6.6 92.8-5 156-45.9 159.2-132.7 3.1-84.1-54.7-143.7-147.9-183.6-29.9-12.8-61.6-22.7-93.3-30.2-14.3-3.4-26.3-5.7-35.2-7.2-7.9-75.9-71.5-133.8-147.8-134.4-76.3-.6-140.9 56.1-150.1 131.9s40 146.3 114.2 163.9c74.2 17.6 149.9-23.3 175.7-95.1 9.4 1.7 18.7 3.6 28 5.8 28.2 6.6 56.4 15.4 82.4 26.6 70.7 30.2 109.3 70.1 107.5 119.9-1.6 44.6-33.6 65.2-96.2 68.6-27.5 1.5-57.6-.9-87.3-5.8-8.3-1.4-15.9-2.8-22.6-4.3-3.9-.8-6.6-1.5-7.8-1.8l-3.1-.6c-2.2-.3-5.9-.8-10.7-1.3-25-2.3-52.1-1.5-78.5 4.6-55.2 12.9-93.9 47.2-101.1 105.8-15.7 126.2 78.6 184.7 276 188.9 29.1 70.4 106.4 107.9 179.6 87 73.3-20.9 119.3-93.4 106.9-168.6zM329.1 345.2a83.3 83.3 0 11.01-166.61 83.3 83.3 0 01-.01 166.61zM695.6 845a83.3 83.3 0 11.01-166.61A83.3 83.3 0 01695.6 845z\" } }] }, \"name\": \"node-index\", \"theme\": \"outlined\" };\nexport default NodeIndexOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport NodeIndexOutlinedSvg from \"@ant-design/icons-svg/es/asn/NodeIndexOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar NodeIndexOutlined = function NodeIndexOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: NodeIndexOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  NodeIndexOutlined.displayName = 'NodeIndexOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(NodeIndexOutlined);","// This icon file is generated automatically.\nvar TableOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z\" } }] }, \"name\": \"table\", \"theme\": \"outlined\" };\nexport default TableOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport TableOutlinedSvg from \"@ant-design/icons-svg/es/asn/TableOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar TableOutlined = function TableOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: TableOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  TableOutlined.displayName = 'TableOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(TableOutlined);","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport classNames from 'classnames';\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport * as React from 'react';\nvar Notify = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var prefixCls = props.prefixCls,\n    style = props.style,\n    className = props.className,\n    _props$duration = props.duration,\n    duration = _props$duration === void 0 ? 4.5 : _props$duration,\n    eventKey = props.eventKey,\n    content = props.content,\n    closable = props.closable,\n    _props$closeIcon = props.closeIcon,\n    closeIcon = _props$closeIcon === void 0 ? 'x' : _props$closeIcon,\n    divProps = props.props,\n    onClick = props.onClick,\n    onNoticeClose = props.onNoticeClose,\n    times = props.times;\n  var _React$useState = React.useState(false),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    hovering = _React$useState2[0],\n    setHovering = _React$useState2[1];\n  // ======================== Close =========================\n  var onInternalClose = function onInternalClose() {\n    onNoticeClose(eventKey);\n  };\n  var onCloseKeyDown = function onCloseKeyDown(e) {\n    if (e.key === 'Enter' || e.code === 'Enter' || e.keyCode === KeyCode.ENTER) {\n      onInternalClose();\n    }\n  };\n  // ======================== Effect ========================\n  React.useEffect(function () {\n    if (!hovering && duration > 0) {\n      var timeout = setTimeout(function () {\n        onInternalClose();\n      }, duration * 1000);\n      return function () {\n        clearTimeout(timeout);\n      };\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [duration, hovering, times]);\n  // ======================== Render ========================\n  var noticePrefixCls = \"\".concat(prefixCls, \"-notice\");\n  return /*#__PURE__*/React.createElement(\"div\", _extends({}, divProps, {\n    ref: ref,\n    className: classNames(noticePrefixCls, className, _defineProperty({}, \"\".concat(noticePrefixCls, \"-closable\"), closable)),\n    style: style,\n    onMouseEnter: function onMouseEnter() {\n      setHovering(true);\n    },\n    onMouseLeave: function onMouseLeave() {\n      setHovering(false);\n    },\n    onClick: onClick\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"\".concat(noticePrefixCls, \"-content\")\n  }, content), closable && /*#__PURE__*/React.createElement(\"a\", {\n    tabIndex: 0,\n    className: \"\".concat(noticePrefixCls, \"-close\"),\n    onKeyDown: onCloseKeyDown,\n    onClick: function onClick(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      onInternalClose();\n    }\n  }, closeIcon));\n});\nexport default Notify;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\nimport { CSSMotionList } from 'rc-motion';\nimport classNames from 'classnames';\nimport Notice from './Notice';\n// ant-notification ant-notification-topRight\nvar Notifications = /*#__PURE__*/React.forwardRef(function (props, ref) {\n  var _props$prefixCls = props.prefixCls,\n    prefixCls = _props$prefixCls === void 0 ? 'rc-notification' : _props$prefixCls,\n    container = props.container,\n    motion = props.motion,\n    maxCount = props.maxCount,\n    className = props.className,\n    style = props.style,\n    onAllRemoved = props.onAllRemoved;\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    configList = _React$useState2[0],\n    setConfigList = _React$useState2[1];\n  // ======================== Close =========================\n  var onNoticeClose = function onNoticeClose(key) {\n    var _config$onClose;\n    // Trigger close event\n    var config = configList.find(function (item) {\n      return item.key === key;\n    });\n    config === null || config === void 0 ? void 0 : (_config$onClose = config.onClose) === null || _config$onClose === void 0 ? void 0 : _config$onClose.call(config);\n    setConfigList(function (list) {\n      return list.filter(function (item) {\n        return item.key !== key;\n      });\n    });\n  };\n  // ========================= Refs =========================\n  React.useImperativeHandle(ref, function () {\n    return {\n      open: function open(config) {\n        setConfigList(function (list) {\n          var clone = _toConsumableArray(list);\n          // Replace if exist\n          var index = clone.findIndex(function (item) {\n            return item.key === config.key;\n          });\n          var innerConfig = _objectSpread({}, config);\n          if (index >= 0) {\n            var _list$index;\n            innerConfig.times = (((_list$index = list[index]) === null || _list$index === void 0 ? void 0 : _list$index.times) || 0) + 1;\n            clone[index] = innerConfig;\n          } else {\n            innerConfig.times = 0;\n            clone.push(innerConfig);\n          }\n          if (maxCount > 0 && clone.length > maxCount) {\n            clone = clone.slice(-maxCount);\n          }\n          return clone;\n        });\n      },\n      close: function close(key) {\n        onNoticeClose(key);\n      },\n      destroy: function destroy() {\n        setConfigList([]);\n      }\n    };\n  });\n  // ====================== Placements ======================\n  var _React$useState3 = React.useState({}),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    placements = _React$useState4[0],\n    setPlacements = _React$useState4[1];\n  React.useEffect(function () {\n    var nextPlacements = {};\n    configList.forEach(function (config) {\n      var _config$placement = config.placement,\n        placement = _config$placement === void 0 ? 'topRight' : _config$placement;\n      if (placement) {\n        nextPlacements[placement] = nextPlacements[placement] || [];\n        nextPlacements[placement].push(config);\n      }\n    });\n    // Fill exist placements to avoid empty list causing remove without motion\n    Object.keys(placements).forEach(function (placement) {\n      nextPlacements[placement] = nextPlacements[placement] || [];\n    });\n    setPlacements(nextPlacements);\n  }, [configList]);\n  // Clean up container if all notices fade out\n  var onAllNoticeRemoved = function onAllNoticeRemoved(placement) {\n    setPlacements(function (originPlacements) {\n      var clone = _objectSpread({}, originPlacements);\n      var list = clone[placement] || [];\n      if (!list.length) {\n        delete clone[placement];\n      }\n      return clone;\n    });\n  };\n  // Effect tell that placements is empty now\n  var emptyRef = React.useRef(false);\n  React.useEffect(function () {\n    if (Object.keys(placements).length > 0) {\n      emptyRef.current = true;\n    } else if (emptyRef.current) {\n      // Trigger only when from exist to empty\n      onAllRemoved === null || onAllRemoved === void 0 ? void 0 : onAllRemoved();\n      emptyRef.current = false;\n    }\n  }, [placements]);\n  // ======================== Render ========================\n  if (!container) {\n    return null;\n  }\n  var placementList = Object.keys(placements);\n  return /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(React.Fragment, null, placementList.map(function (placement) {\n    var placementConfigList = placements[placement];\n    var keys = placementConfigList.map(function (config) {\n      return {\n        config: config,\n        key: config.key\n      };\n    });\n    var placementMotion = typeof motion === 'function' ? motion(placement) : motion;\n    return /*#__PURE__*/React.createElement(CSSMotionList, _extends({\n      key: placement,\n      className: classNames(prefixCls, \"\".concat(prefixCls, \"-\").concat(placement), className === null || className === void 0 ? void 0 : className(placement)),\n      style: style === null || style === void 0 ? void 0 : style(placement),\n      keys: keys,\n      motionAppear: true\n    }, placementMotion, {\n      onAllRemoved: function onAllRemoved() {\n        onAllNoticeRemoved(placement);\n      }\n    }), function (_ref, nodeRef) {\n      var config = _ref.config,\n        motionClassName = _ref.className,\n        motionStyle = _ref.style;\n      var key = config.key,\n        times = config.times;\n      var configClassName = config.className,\n        configStyle = config.style;\n      return /*#__PURE__*/React.createElement(Notice, _extends({}, config, {\n        ref: nodeRef,\n        prefixCls: prefixCls,\n        className: classNames(motionClassName, configClassName),\n        style: _objectSpread(_objectSpread({}, motionStyle), configStyle),\n        times: times,\n        key: key,\n        eventKey: key,\n        onNoticeClose: onNoticeClose\n      }));\n    });\n  })), container);\n});\nif (process.env.NODE_ENV !== 'production') {\n  Notifications.displayName = 'Notifications';\n}\nexport default Notifications;","import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"getContainer\", \"motion\", \"prefixCls\", \"maxCount\", \"className\", \"style\", \"onAllRemoved\"];\nimport * as React from 'react';\nimport Notifications from './Notifications';\nvar defaultGetContainer = function defaultGetContainer() {\n  return document.body;\n};\nvar uniqueKey = 0;\nfunction mergeConfig() {\n  var clone = {};\n  for (var _len = arguments.length, objList = new Array(_len), _key = 0; _key < _len; _key++) {\n    objList[_key] = arguments[_key];\n  }\n  objList.forEach(function (obj) {\n    if (obj) {\n      Object.keys(obj).forEach(function (key) {\n        var val = obj[key];\n        if (val !== undefined) {\n          clone[key] = val;\n        }\n      });\n    }\n  });\n  return clone;\n}\nexport default function useNotification() {\n  var rootConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _rootConfig$getContai = rootConfig.getContainer,\n    getContainer = _rootConfig$getContai === void 0 ? defaultGetContainer : _rootConfig$getContai,\n    motion = rootConfig.motion,\n    prefixCls = rootConfig.prefixCls,\n    maxCount = rootConfig.maxCount,\n    className = rootConfig.className,\n    style = rootConfig.style,\n    onAllRemoved = rootConfig.onAllRemoved,\n    shareConfig = _objectWithoutProperties(rootConfig, _excluded);\n  var _React$useState = React.useState(),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    container = _React$useState2[0],\n    setContainer = _React$useState2[1];\n  var notificationsRef = React.useRef();\n  var contextHolder = /*#__PURE__*/React.createElement(Notifications, {\n    container: container,\n    ref: notificationsRef,\n    prefixCls: prefixCls,\n    motion: motion,\n    maxCount: maxCount,\n    className: className,\n    style: style,\n    onAllRemoved: onAllRemoved\n  });\n  var _React$useState3 = React.useState([]),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    taskQueue = _React$useState4[0],\n    setTaskQueue = _React$useState4[1];\n  // ========================= Refs =========================\n  var api = React.useMemo(function () {\n    return {\n      open: function open(config) {\n        var mergedConfig = mergeConfig(shareConfig, config);\n        if (mergedConfig.key === null || mergedConfig.key === undefined) {\n          mergedConfig.key = \"rc-notification-\".concat(uniqueKey);\n          uniqueKey += 1;\n        }\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'open',\n            config: mergedConfig\n          }]);\n        });\n      },\n      close: function close(key) {\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'close',\n            key: key\n          }]);\n        });\n      },\n      destroy: function destroy() {\n        setTaskQueue(function (queue) {\n          return [].concat(_toConsumableArray(queue), [{\n            type: 'destroy'\n          }]);\n        });\n      }\n    };\n  }, []);\n  // ======================= Container ======================\n  // React 18 should all in effect that we will check container in each render\n  // Which means getContainer should be stable.\n  React.useEffect(function () {\n    setContainer(getContainer());\n  });\n  // ======================== Effect ========================\n  React.useEffect(function () {\n    // Flush task when node ready\n    if (notificationsRef.current && taskQueue.length) {\n      taskQueue.forEach(function (task) {\n        switch (task.type) {\n          case 'open':\n            notificationsRef.current.open(task.config);\n            break;\n          case 'close':\n            notificationsRef.current.close(task.key);\n            break;\n          case 'destroy':\n            notificationsRef.current.destroy();\n            break;\n        }\n      });\n      setTaskQueue([]);\n    }\n  }, [taskQueue]);\n  // ======================== Return ========================\n  return [api, contextHolder];\n}","import { Keyframes } from '@ant-design/cssinjs';\nimport { resetComponent } from '../../style';\nimport { genComponentStyleHook, mergeToken } from '../../theme/internal';\nconst genMessageStyle = token => {\n  const {\n    componentCls,\n    iconCls,\n    boxShadow,\n    colorText,\n    colorSuccess,\n    colorError,\n    colorWarning,\n    colorInfo,\n    fontSizeLG,\n    motionEaseInOutCirc,\n    motionDurationSlow,\n    marginXS,\n    paddingXS,\n    borderRadiusLG,\n    zIndexPopup,\n    // Custom token\n    contentPadding,\n    contentBg\n  } = token;\n  const noticeCls = `${componentCls}-notice`;\n  const messageMoveIn = new Keyframes('MessageMoveIn', {\n    '0%': {\n      padding: 0,\n      transform: 'translateY(-100%)',\n      opacity: 0\n    },\n    '100%': {\n      padding: paddingXS,\n      transform: 'translateY(0)',\n      opacity: 1\n    }\n  });\n  const messageMoveOut = new Keyframes('MessageMoveOut', {\n    '0%': {\n      maxHeight: token.height,\n      padding: paddingXS,\n      opacity: 1\n    },\n    '100%': {\n      maxHeight: 0,\n      padding: 0,\n      opacity: 0\n    }\n  });\n  const noticeStyle = {\n    padding: paddingXS,\n    textAlign: 'center',\n    [`${componentCls}-custom-content > ${iconCls}`]: {\n      verticalAlign: 'text-bottom',\n      marginInlineEnd: marginXS,\n      fontSize: fontSizeLG\n    },\n    [`${noticeCls}-content`]: {\n      display: 'inline-block',\n      padding: contentPadding,\n      background: contentBg,\n      borderRadius: borderRadiusLG,\n      boxShadow,\n      pointerEvents: 'all'\n    },\n    [`${componentCls}-success > ${iconCls}`]: {\n      color: colorSuccess\n    },\n    [`${componentCls}-error > ${iconCls}`]: {\n      color: colorError\n    },\n    [`${componentCls}-warning > ${iconCls}`]: {\n      color: colorWarning\n    },\n    [`${componentCls}-info > ${iconCls},\n      ${componentCls}-loading > ${iconCls}`]: {\n      color: colorInfo\n    }\n  };\n  return [\n  // ============================ Holder ============================\n  {\n    [componentCls]: Object.assign(Object.assign({}, resetComponent(token)), {\n      color: colorText,\n      position: 'fixed',\n      top: marginXS,\n      width: '100%',\n      pointerEvents: 'none',\n      zIndex: zIndexPopup,\n      [`${componentCls}-move-up`]: {\n        animationFillMode: 'forwards'\n      },\n      [`\n        ${componentCls}-move-up-appear,\n        ${componentCls}-move-up-enter\n      `]: {\n        animationName: messageMoveIn,\n        animationDuration: motionDurationSlow,\n        animationPlayState: 'paused',\n        animationTimingFunction: motionEaseInOutCirc\n      },\n      [`\n        ${componentCls}-move-up-appear${componentCls}-move-up-appear-active,\n        ${componentCls}-move-up-enter${componentCls}-move-up-enter-active\n      `]: {\n        animationPlayState: 'running'\n      },\n      [`${componentCls}-move-up-leave`]: {\n        animationName: messageMoveOut,\n        animationDuration: motionDurationSlow,\n        animationPlayState: 'paused',\n        animationTimingFunction: motionEaseInOutCirc\n      },\n      [`${componentCls}-move-up-leave${componentCls}-move-up-leave-active`]: {\n        animationPlayState: 'running'\n      },\n      '&-rtl': {\n        direction: 'rtl',\n        span: {\n          direction: 'rtl'\n        }\n      }\n    })\n  },\n  // ============================ Notice ============================\n  {\n    [componentCls]: {\n      [noticeCls]: Object.assign({}, noticeStyle)\n    }\n  },\n  // ============================= Pure =============================\n  {\n    [`${componentCls}-notice-pure-panel`]: Object.assign(Object.assign({}, noticeStyle), {\n      padding: 0,\n      textAlign: 'start'\n    })\n  }];\n};\n// ============================== Export ==============================\nexport default genComponentStyleHook('Message', token => {\n  // Gen-style functions here\n  const combinedToken = mergeToken(token, {\n    height: 150\n  });\n  return [genMessageStyle(combinedToken)];\n}, token => ({\n  zIndexPopup: token.zIndexPopupBase + 10,\n  contentBg: token.colorBgElevated,\n  contentPadding: `${(token.controlHeightLG - token.fontSize * token.lineHeight) / 2}px ${token.paddingSM}px`\n}), {\n  clientOnly: true\n});","var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport CheckCircleFilled from \"@ant-design/icons/es/icons/CheckCircleFilled\";\nimport CloseCircleFilled from \"@ant-design/icons/es/icons/CloseCircleFilled\";\nimport ExclamationCircleFilled from \"@ant-design/icons/es/icons/ExclamationCircleFilled\";\nimport InfoCircleFilled from \"@ant-design/icons/es/icons/InfoCircleFilled\";\nimport LoadingOutlined from \"@ant-design/icons/es/icons/LoadingOutlined\";\nimport classNames from 'classnames';\nimport { Notice } from 'rc-notification';\nimport * as React from 'react';\nimport { ConfigContext } from '../config-provider';\nimport useStyle from './style';\nexport const TypeIcon = {\n  info: /*#__PURE__*/React.createElement(InfoCircleFilled, null),\n  success: /*#__PURE__*/React.createElement(CheckCircleFilled, null),\n  error: /*#__PURE__*/React.createElement(CloseCircleFilled, null),\n  warning: /*#__PURE__*/React.createElement(ExclamationCircleFilled, null),\n  loading: /*#__PURE__*/React.createElement(LoadingOutlined, null)\n};\nexport const PureContent = _ref => {\n  let {\n    prefixCls,\n    type,\n    icon,\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames(`${prefixCls}-custom-content`, `${prefixCls}-${type}`)\n  }, icon || TypeIcon[type], /*#__PURE__*/React.createElement(\"span\", null, children));\n};\n/** @private Internal Component. Do not use in your production. */\nconst PurePanel = props => {\n  const {\n      prefixCls: staticPrefixCls,\n      className,\n      type,\n      icon,\n      content\n    } = props,\n    restProps = __rest(props, [\"prefixCls\", \"className\", \"type\", \"icon\", \"content\"]);\n  const {\n    getPrefixCls\n  } = React.useContext(ConfigContext);\n  const prefixCls = staticPrefixCls || getPrefixCls('message');\n  const [, hashId] = useStyle(prefixCls);\n  return /*#__PURE__*/React.createElement(Notice, Object.assign({}, restProps, {\n    prefixCls: prefixCls,\n    className: classNames(className, hashId, `${prefixCls}-notice-pure-panel`),\n    eventKey: \"pure\",\n    duration: null,\n    content: /*#__PURE__*/React.createElement(PureContent, {\n      prefixCls: prefixCls,\n      type: type,\n      icon: icon\n    }, content)\n  }));\n};\nexport default PurePanel;","export function getMotion(prefixCls, transitionName) {\n  return {\n    motionName: transitionName !== null && transitionName !== void 0 ? transitionName : `${prefixCls}-move-up`\n  };\n}\n/** Wrap message open with promise like function */\nexport function wrapPromiseFn(openFn) {\n  let closeFn;\n  const closePromise = new Promise(resolve => {\n    closeFn = openFn(() => {\n      resolve(true);\n    });\n  });\n  const result = () => {\n    closeFn === null || closeFn === void 0 ? void 0 : closeFn();\n  };\n  result.then = (filled, rejected) => closePromise.then(filled, rejected);\n  result.promise = closePromise;\n  return result;\n}","var __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport CloseOutlined from \"@ant-design/icons/es/icons/CloseOutlined\";\nimport classNames from 'classnames';\nimport { useNotification as useRcNotification } from 'rc-notification';\nimport * as React from 'react';\nimport warning from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport { PureContent } from './PurePanel';\nimport useStyle from './style';\nimport { getMotion, wrapPromiseFn } from './util';\nconst DEFAULT_OFFSET = 8;\nconst DEFAULT_DURATION = 3;\nconst Holder = /*#__PURE__*/React.forwardRef((props, ref) => {\n  const {\n    top,\n    prefixCls: staticPrefixCls,\n    getContainer: staticGetContainer,\n    maxCount,\n    duration = DEFAULT_DURATION,\n    rtl,\n    transitionName,\n    onAllRemoved\n  } = props;\n  const {\n    getPrefixCls,\n    getPopupContainer,\n    message\n  } = React.useContext(ConfigContext);\n  const prefixCls = staticPrefixCls || getPrefixCls('message');\n  const [, hashId] = useStyle(prefixCls);\n  // =============================== Style ===============================\n  const getStyle = () => ({\n    left: '50%',\n    transform: 'translateX(-50%)',\n    top: top !== null && top !== void 0 ? top : DEFAULT_OFFSET\n  });\n  const getClassName = () => classNames(hashId, {\n    [`${prefixCls}-rtl`]: rtl\n  });\n  // ============================== Motion ===============================\n  const getNotificationMotion = () => getMotion(prefixCls, transitionName);\n  // ============================ Close Icon =============================\n  const mergedCloseIcon = /*#__PURE__*/React.createElement(\"span\", {\n    className: `${prefixCls}-close-x`\n  }, /*#__PURE__*/React.createElement(CloseOutlined, {\n    className: `${prefixCls}-close-icon`\n  }));\n  // ============================== Origin ===============================\n  const [api, holder] = useRcNotification({\n    prefixCls,\n    style: getStyle,\n    className: getClassName,\n    motion: getNotificationMotion,\n    closable: false,\n    closeIcon: mergedCloseIcon,\n    duration,\n    getContainer: () => (staticGetContainer === null || staticGetContainer === void 0 ? void 0 : staticGetContainer()) || (getPopupContainer === null || getPopupContainer === void 0 ? void 0 : getPopupContainer()) || document.body,\n    maxCount,\n    onAllRemoved\n  });\n  // ================================ Ref ================================\n  React.useImperativeHandle(ref, () => Object.assign(Object.assign({}, api), {\n    prefixCls,\n    hashId,\n    message\n  }));\n  return holder;\n});\n// ==============================================================================\n// ==                                   Hook                                   ==\n// ==============================================================================\nlet keyIndex = 0;\nexport function useInternalMessage(messageConfig) {\n  const holderRef = React.useRef(null);\n  // ================================ API ================================\n  const wrapAPI = React.useMemo(() => {\n    // Wrap with notification content\n    // >>> close\n    const close = key => {\n      var _a;\n      (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.close(key);\n    };\n    // >>> Open\n    const open = config => {\n      if (!holderRef.current) {\n        process.env.NODE_ENV !== \"production\" ? warning(false, 'Message', 'You are calling notice in render which will break in React 18 concurrent mode. Please trigger in effect instead.') : void 0;\n        const fakeResult = () => {};\n        fakeResult.then = () => {};\n        return fakeResult;\n      }\n      const {\n        open: originOpen,\n        prefixCls,\n        hashId,\n        message\n      } = holderRef.current;\n      const noticePrefixCls = `${prefixCls}-notice`;\n      const {\n          content,\n          icon,\n          type,\n          key,\n          className,\n          style,\n          onClose\n        } = config,\n        restConfig = __rest(config, [\"content\", \"icon\", \"type\", \"key\", \"className\", \"style\", \"onClose\"]);\n      let mergedKey = key;\n      if (mergedKey === undefined || mergedKey === null) {\n        keyIndex += 1;\n        mergedKey = `antd-message-${keyIndex}`;\n      }\n      return wrapPromiseFn(resolve => {\n        originOpen(Object.assign(Object.assign({}, restConfig), {\n          key: mergedKey,\n          content: /*#__PURE__*/React.createElement(PureContent, {\n            prefixCls: prefixCls,\n            type: type,\n            icon: icon\n          }, content),\n          placement: 'top',\n          className: classNames(type && `${noticePrefixCls}-${type}`, hashId, className, message === null || message === void 0 ? void 0 : message.className),\n          style: Object.assign(Object.assign({}, message === null || message === void 0 ? void 0 : message.style), style),\n          onClose: () => {\n            onClose === null || onClose === void 0 ? void 0 : onClose();\n            resolve();\n          }\n        }));\n        // Return close function\n        return () => {\n          close(mergedKey);\n        };\n      });\n    };\n    // >>> destroy\n    const destroy = key => {\n      var _a;\n      if (key !== undefined) {\n        close(key);\n      } else {\n        (_a = holderRef.current) === null || _a === void 0 ? void 0 : _a.destroy();\n      }\n    };\n    const clone = {\n      open,\n      destroy\n    };\n    const keys = ['info', 'success', 'warning', 'error', 'loading'];\n    keys.forEach(type => {\n      const typeOpen = (jointContent, duration, onClose) => {\n        let config;\n        if (jointContent && typeof jointContent === 'object' && 'content' in jointContent) {\n          config = jointContent;\n        } else {\n          config = {\n            content: jointContent\n          };\n        }\n        // Params\n        let mergedDuration;\n        let mergedOnClose;\n        if (typeof duration === 'function') {\n          mergedOnClose = duration;\n        } else {\n          mergedDuration = duration;\n          mergedOnClose = onClose;\n        }\n        const mergedConfig = Object.assign(Object.assign({\n          onClose: mergedOnClose,\n          duration: mergedDuration\n        }, config), {\n          type\n        });\n        return open(mergedConfig);\n      };\n      clone[type] = typeOpen;\n    });\n    return clone;\n  }, []);\n  // ============================== Return ===============================\n  return [wrapAPI, /*#__PURE__*/React.createElement(Holder, Object.assign({\n    key: \"message-holder\"\n  }, messageConfig, {\n    ref: holderRef\n  }))];\n}\nexport default function useMessage(messageConfig) {\n  return useInternalMessage(messageConfig);\n}","'use client';\n\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { render } from \"rc-util/es/React/render\";\nimport * as React from 'react';\nimport ConfigProvider, { globalConfig, warnContext } from '../config-provider';\nimport PurePanel from './PurePanel';\nimport useMessage, { useInternalMessage } from './useMessage';\nimport { wrapPromiseFn } from './util';\nlet message = null;\nlet act = callback => callback();\nlet taskQueue = [];\nlet defaultGlobalConfig = {};\nfunction getGlobalContext() {\n  const {\n    prefixCls: globalPrefixCls,\n    getContainer: globalGetContainer,\n    duration,\n    rtl,\n    maxCount,\n    top\n  } = defaultGlobalConfig;\n  const mergedPrefixCls = globalPrefixCls !== null && globalPrefixCls !== void 0 ? globalPrefixCls : globalConfig().getPrefixCls('message');\n  const mergedContainer = (globalGetContainer === null || globalGetContainer === void 0 ? void 0 : globalGetContainer()) || document.body;\n  return {\n    prefixCls: mergedPrefixCls,\n    container: mergedContainer,\n    duration,\n    rtl,\n    maxCount,\n    top\n  };\n}\nconst GlobalHolder = /*#__PURE__*/React.forwardRef((_, ref) => {\n  const initializeMessageConfig = () => {\n    const {\n      prefixCls,\n      container,\n      maxCount,\n      duration,\n      rtl,\n      top\n    } = getGlobalContext();\n    return {\n      prefixCls,\n      getContainer: () => container,\n      maxCount,\n      duration,\n      rtl,\n      top\n    };\n  };\n  const [messageConfig, setMessageConfig] = React.useState(initializeMessageConfig);\n  const [api, holder] = useInternalMessage(messageConfig);\n  const global = globalConfig();\n  const rootPrefixCls = global.getRootPrefixCls();\n  const rootIconPrefixCls = global.getIconPrefixCls();\n  const theme = global.getTheme();\n  const sync = () => {\n    setMessageConfig(initializeMessageConfig);\n  };\n  React.useEffect(sync, []);\n  React.useImperativeHandle(ref, () => {\n    const instance = Object.assign({}, api);\n    Object.keys(instance).forEach(method => {\n      instance[method] = function () {\n        sync();\n        return api[method].apply(api, arguments);\n      };\n    });\n    return {\n      instance,\n      sync\n    };\n  });\n  return /*#__PURE__*/React.createElement(ConfigProvider, {\n    prefixCls: rootPrefixCls,\n    iconPrefixCls: rootIconPrefixCls,\n    theme: theme\n  }, holder);\n});\nfunction flushNotice() {\n  if (!message) {\n    const holderFragment = document.createDocumentFragment();\n    const newMessage = {\n      fragment: holderFragment\n    };\n    message = newMessage;\n    // Delay render to avoid sync issue\n    act(() => {\n      render( /*#__PURE__*/React.createElement(GlobalHolder, {\n        ref: node => {\n          const {\n            instance,\n            sync\n          } = node || {};\n          // React 18 test env will throw if call immediately in ref\n          Promise.resolve().then(() => {\n            if (!newMessage.instance && instance) {\n              newMessage.instance = instance;\n              newMessage.sync = sync;\n              flushNotice();\n            }\n          });\n        }\n      }), holderFragment);\n    });\n    return;\n  }\n  // Notification not ready\n  if (!message.instance) {\n    return;\n  }\n  // >>> Execute task\n  taskQueue.forEach(task => {\n    const {\n      type,\n      skipped\n    } = task;\n    // Only `skipped` when user call notice but cancel it immediately\n    // and instance not ready\n    if (!skipped) {\n      switch (type) {\n        case 'open':\n          {\n            act(() => {\n              const closeFn = message.instance.open(Object.assign(Object.assign({}, defaultGlobalConfig), task.config));\n              closeFn === null || closeFn === void 0 ? void 0 : closeFn.then(task.resolve);\n              task.setCloseFn(closeFn);\n            });\n            break;\n          }\n        case 'destroy':\n          act(() => {\n            message === null || message === void 0 ? void 0 : message.instance.destroy(task.key);\n          });\n          break;\n        // Other type open\n        default:\n          {\n            act(() => {\n              var _message$instance;\n              const closeFn = (_message$instance = message.instance)[type].apply(_message$instance, _toConsumableArray(task.args));\n              closeFn === null || closeFn === void 0 ? void 0 : closeFn.then(task.resolve);\n              task.setCloseFn(closeFn);\n            });\n          }\n      }\n    }\n  });\n  // Clean up\n  taskQueue = [];\n}\n// ==============================================================================\n// ==                                  Export                                  ==\n// ==============================================================================\nfunction setMessageGlobalConfig(config) {\n  defaultGlobalConfig = Object.assign(Object.assign({}, defaultGlobalConfig), config);\n  // Trigger sync for it\n  act(() => {\n    var _a;\n    (_a = message === null || message === void 0 ? void 0 : message.sync) === null || _a === void 0 ? void 0 : _a.call(message);\n  });\n}\nfunction open(config) {\n  const result = wrapPromiseFn(resolve => {\n    let closeFn;\n    const task = {\n      type: 'open',\n      config,\n      resolve,\n      setCloseFn: fn => {\n        closeFn = fn;\n      }\n    };\n    taskQueue.push(task);\n    return () => {\n      if (closeFn) {\n        act(() => {\n          closeFn();\n        });\n      } else {\n        task.skipped = true;\n      }\n    };\n  });\n  flushNotice();\n  return result;\n}\nfunction typeOpen(type, args) {\n  // Warning if exist theme\n  if (process.env.NODE_ENV !== 'production') {\n    warnContext('message');\n  }\n  const result = wrapPromiseFn(resolve => {\n    let closeFn;\n    const task = {\n      type,\n      args,\n      resolve,\n      setCloseFn: fn => {\n        closeFn = fn;\n      }\n    };\n    taskQueue.push(task);\n    return () => {\n      if (closeFn) {\n        act(() => {\n          closeFn();\n        });\n      } else {\n        task.skipped = true;\n      }\n    };\n  });\n  flushNotice();\n  return result;\n}\nfunction destroy(key) {\n  taskQueue.push({\n    type: 'destroy',\n    key\n  });\n  flushNotice();\n}\nconst methods = ['success', 'info', 'warning', 'error', 'loading'];\nconst baseStaticMethods = {\n  open,\n  destroy,\n  config: setMessageGlobalConfig,\n  useMessage,\n  _InternalPanelDoNotUseOrYouWillBeFired: PurePanel\n};\nconst staticMethods = baseStaticMethods;\nmethods.forEach(type => {\n  staticMethods[type] = function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    return typeOpen(type, args);\n  };\n});\n// ==============================================================================\n// ==                                   Test                                   ==\n// ==============================================================================\nconst noop = () => {};\n/** @internal Only Work in test env */\n// eslint-disable-next-line import/no-mutable-exports\nexport let actWrapper = noop;\nif (process.env.NODE_ENV === 'test') {\n  actWrapper = wrapper => {\n    act = wrapper;\n  };\n}\n/** @internal Only Work in test env */\n// eslint-disable-next-line import/no-mutable-exports\nexport let actDestroy = noop;\nif (process.env.NODE_ENV === 'test') {\n  actDestroy = () => {\n    message = null;\n  };\n}\nexport default staticMethods;","import { produce } from 'immer';\nimport React, { useMemo } from 'react';\nimport type { XYPosition } from 'reactflow';\nimport type { StoreApi, UseBoundStore } from 'zustand';\nimport { create } from 'zustand';\n\nexport type Position = {\n  x: number;\n  y: number;\n};\n\nexport type DecisionNode = {\n  id: string;\n\n  name: string;\n  description?: string;\n  type?: string;\n\n  content?: any;\n\n  position: Position;\n};\n\nexport type DecisionEdge = {\n  id: string;\n  name?: string;\n\n  sourceId: string;\n  targetId: string;\n\n  type?: string;\n};\n\nexport type DecisionGraphType = {\n  nodes: DecisionNode[];\n  edges: DecisionEdge[];\n};\n\nexport type CustomNodeRenderFormType = {\n  value: any;\n  onChange: (val: any) => void;\n};\n\nexport type CustomNodeType = {\n  type: string;\n  name: string;\n  onOpen?: (node: DecisionNode) => void;\n  renderForm?: (props: CustomNodeRenderFormType) => React.ReactNode;\n  renderIcon?: () => React.ReactNode;\n};\n\nexport type DecisionGraphStoreType = {\n  id?: string;\n\n  components?: CustomNodeType[];\n\n  decisionGraph: DecisionGraphType;\n  setDecisionGraph: (val: DecisionGraphType) => void;\n\n  disabled?: boolean;\n  configurable?: boolean;\n\n  simulate?: any;\n\n  updateNode: (id: string, content: any) => void;\n\n  openTabs: string[];\n  activeTab: string;\n  closeTab: (id: string) => void;\n  openTab: (id: string) => void;\n\n  onChange?: (val: DecisionGraphType) => void;\n  onOpenNode?: (node: DecisionNode) => void;\n  onEditGraph?: (edit: boolean) => void;\n  onAddNode?: (type: string, position?: XYPosition) => void;\n  onTabChange?: (tab?: string) => void;\n};\n\nexport const DecisionGraphStoreContext = React.createContext<\n  UseBoundStore<StoreApi<DecisionGraphStoreType>> & {\n    setState: (partial: Partial<DecisionGraphStoreType>) => void;\n  }\n>({} as any);\n\nexport type DecisionGraphContextProps = {\n  //\n};\n\nexport const DecisionGraphProvider: React.FC<React.PropsWithChildren<DecisionGraphContextProps>> = (props) => {\n  const { children } = props;\n  const store = useMemo(\n    () =>\n      create<DecisionGraphStoreType>((set, getState) => ({\n        decisionGraph: {\n          nodes: [],\n          edges: [],\n        },\n        setDecisionGraph: (graph) => {\n          set({\n            decisionGraph: graph,\n          });\n        },\n        updateNode: (id, content) => {\n          const decisionGraph = produce(getState().decisionGraph, (draft) => {\n            const nodes = (draft.nodes || []).map((node) => {\n              if (id === node?.id) {\n                node.content = content;\n              }\n              return node;\n            });\n            draft.nodes = nodes;\n          });\n          set({\n            decisionGraph,\n          });\n          getState()?.onChange?.(decisionGraph);\n        },\n        openTabs: [],\n        activeTab: 'graph',\n        openTab: (id: string) => {\n          const openTabs = getState().openTabs;\n          const nodeId = openTabs.find((i) => i === id);\n          if (nodeId) {\n            set({\n              activeTab: nodeId,\n            });\n          } else {\n            set({\n              openTabs: [...openTabs, id],\n              activeTab: id,\n            });\n          }\n        },\n        closeTab: (id: string) => {\n          const openTabs = getState().openTabs;\n          const activeTab = getState().activeTab;\n          const index = openTabs?.findIndex((i) => i === id);\n          const tab = openTabs?.[index];\n          set({\n            openTabs: openTabs.filter((id) => id !== tab),\n          });\n          if (activeTab === id) {\n            set({\n              activeTab: index > 0 ? openTabs?.[index - 1] : 'graph',\n            });\n          }\n        },\n        disabled: false,\n        configurable: true,\n        components: [],\n      })),\n    [],\n  );\n  return <DecisionGraphStoreContext.Provider value={store}>{children}</DecisionGraphStoreContext.Provider>;\n};\n\nexport function useDecisionGraphStore<T>(\n  selector: (state: DecisionGraphStoreType) => T,\n  equals?: (a: any, b: any) => boolean,\n): T {\n  return React.useContext(DecisionGraphStoreContext)(selector, equals);\n}\n\nexport const useDecisionGraphRaw = () => React.useContext(DecisionGraphStoreContext);\nexport default DecisionGraphProvider;\n","import equal from 'fast-deep-equal/es6/react';\nimport type React from 'react';\nimport { useEffect, useRef } from 'react';\nimport type { XYPosition } from 'reactflow';\nimport { useDebouncedCallback } from 'use-debounce';\n\nimport type { CustomNodeType, DecisionGraphType, DecisionNode } from './context/dg-store.context';\nimport { useDecisionGraphRaw, useDecisionGraphStore } from './context/dg-store.context';\n\nexport type DecisionGraphEmptyType = {\n  id?: string;\n  defaultValue?: DecisionGraphType;\n  value?: DecisionGraphType;\n\n  disabled?: boolean;\n  configurable?: boolean;\n\n  simulate?: any;\n\n  components?: CustomNodeType[];\n\n  onChange?: (val: DecisionGraphType) => void;\n  onAddNode?: (type: string, position?: XYPosition) => void;\n  onOpenNode?: (node: DecisionNode) => void;\n  onTabChange?: (tab?: string) => void;\n  onEditGraph?: (edit: boolean) => void;\n};\nexport const DecisionGraphEmpty: React.FC<DecisionGraphEmptyType> = ({\n  id,\n  defaultValue,\n  value,\n  disabled = false,\n  configurable = true,\n  onChange,\n  onAddNode,\n  onOpenNode,\n  onTabChange,\n  onEditGraph,\n  components,\n  simulate,\n}) => {\n  const mountedRef = useRef(false);\n  const store = useDecisionGraphRaw();\n  const { setDecisionGraph, decisionGraph } = useDecisionGraphStore(\n    ({ setDecisionGraph, decisionGraph }) => ({\n      setDecisionGraph,\n      decisionGraph,\n    }),\n    equal,\n  );\n\n  const innerChange = useDebouncedCallback((graph: DecisionGraphType) => {\n    onChange?.(graph);\n  }, 100);\n\n  useEffect(() => {\n    store.setState({\n      id,\n      disabled,\n      configurable,\n      components,\n      simulate,\n      onChange: innerChange,\n      onAddNode,\n      onOpenNode,\n      onTabChange,\n      onEditGraph,\n    });\n  }, [id, disabled, configurable, components, simulate, onAddNode, onOpenNode, onTabChange, onEditGraph]);\n\n  useEffect(() => {\n    if (mountedRef.current && value !== undefined && !equal(value, decisionGraph)) {\n      setDecisionGraph(value);\n    }\n  }, [value]);\n\n  useEffect(() => {\n    if (value !== undefined) {\n      setDecisionGraph(value);\n    } else if (defaultValue !== undefined) {\n      setDecisionGraph(defaultValue);\n    }\n\n    mountedRef.current = true;\n  }, []);\n  return null;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Obliterator Iterator Class\n * ===========================\n *\n * Simple class representing the library's iterators.\n */\n\n/**\n * Iterator class.\n *\n * @constructor\n * @param {function} next - Next function.\n */\nfunction Iterator(next) {\n  if (typeof next !== 'function')\n    throw new Error('obliterator/iterator: expecting a function!');\n\n  this.next = next;\n}\n\n/**\n * If symbols are supported, we add `next` to `Symbol.iterator`.\n */\nif (typeof Symbol !== 'undefined')\n  Iterator.prototype[Symbol.iterator] = function () {\n    return this;\n  };\n\n/**\n * Returning an iterator of the given values.\n *\n * @param  {any...} values - Values.\n * @return {Iterator}\n */\nIterator.of = function () {\n  var args = arguments,\n    l = args.length,\n    i = 0;\n\n  return new Iterator(function () {\n    if (i >= l) return {done: true};\n\n    return {done: false, value: args[i++]};\n  });\n};\n\n/**\n * Returning an empty iterator.\n *\n * @return {Iterator}\n */\nIterator.empty = function () {\n  var iterator = new Iterator(function () {\n    return {done: true};\n  });\n\n  return iterator;\n};\n\n/**\n * Returning an iterator over the given indexed sequence.\n *\n * @param  {string|Array} sequence - Target sequence.\n * @return {Iterator}\n */\nIterator.fromSequence = function (sequence) {\n  var i = 0,\n    l = sequence.length;\n\n  return new Iterator(function () {\n    if (i >= l) return {done: true};\n\n    return {done: false, value: sequence[i++]};\n  });\n};\n\n/**\n * Returning whether the given value is an iterator.\n *\n * @param  {any} value - Value.\n * @return {boolean}\n */\nIterator.is = function (value) {\n  if (value instanceof Iterator) return true;\n\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    typeof value.next === 'function'\n  );\n};\n\n/**\n * Exporting.\n */\nmodule.exports = Iterator;\n","exports.ARRAY_BUFFER_SUPPORT = typeof ArrayBuffer !== 'undefined';\nexports.SYMBOL_SUPPORT = typeof Symbol !== 'undefined';\n","/**\n * Obliterator Iter Function\n * ==========================\n *\n * Function coercing values to an iterator. It can be quite useful when needing\n * to handle iterables and iterators the same way.\n */\nvar Iterator = require('./iterator.js');\nvar support = require('./support.js');\n\nvar ARRAY_BUFFER_SUPPORT = support.ARRAY_BUFFER_SUPPORT;\nvar SYMBOL_SUPPORT = support.SYMBOL_SUPPORT;\n\nfunction iterOrNull(target) {\n  // Indexed sequence\n  if (\n    typeof target === 'string' ||\n    Array.isArray(target) ||\n    (ARRAY_BUFFER_SUPPORT && ArrayBuffer.isView(target))\n  )\n    return Iterator.fromSequence(target);\n\n  // Invalid value\n  if (typeof target !== 'object' || target === null) return null;\n\n  // Iterable\n  if (SYMBOL_SUPPORT && typeof target[Symbol.iterator] === 'function')\n    return target[Symbol.iterator]();\n\n  // Iterator duck-typing\n  if (typeof target.next === 'function') return target;\n\n  // Invalid object\n  return null;\n}\n\nmodule.exports = function iter(target) {\n  var iterator = iterOrNull(target);\n\n  if (!iterator)\n    throw new Error(\n      'obliterator: target is not iterable nor a valid iterator.'\n    );\n\n  return iterator;\n};\n","/* eslint no-constant-condition: 0 */\n/**\n * Obliterator Take Function\n * ==========================\n *\n * Function taking n or every value of the given iterator and returns them\n * into an array.\n */\nvar iter = require('./iter.js');\n\n/**\n * Take.\n *\n * @param  {Iterable} iterable - Target iterable.\n * @param  {number}   [n]      - Optional number of items to take.\n * @return {array}\n */\nmodule.exports = function take(iterable, n) {\n  var l = arguments.length > 1 ? n : Infinity,\n    array = l !== Infinity ? new Array(l) : [],\n    step,\n    i = 0;\n\n  var iterator = iter(iterable);\n\n  while (true) {\n    if (i === l) return array;\n\n    step = iterator.next();\n\n    if (step.done) {\n      if (i !== n) array.length = i;\n\n      return array;\n    }\n\n    array[i++] = step.value;\n  }\n};\n","/**\n * Obliterator Chain Function\n * ===========================\n *\n * Variadic function combining the given iterables.\n */\nvar Iterator = require('./iterator.js');\nvar iter = require('./iter.js');\n\n/**\n * Chain.\n *\n * @param  {...Iterator} iterables - Target iterables.\n * @return {Iterator}\n */\nmodule.exports = function chain() {\n  var iterables = arguments;\n  var current = null;\n  var i = -1;\n\n  /* eslint-disable no-constant-condition */\n  return new Iterator(function next() {\n    var step = null;\n\n    do {\n      if (current === null) {\n        i++;\n\n        if (i >= iterables.length) return {done: true};\n\n        current = iter(iterables[i]);\n      }\n\n      step = current.next();\n\n      if (step.done === true) {\n        current = null;\n        continue;\n      }\n\n      break;\n    } while (true);\n\n    return step;\n  });\n};\n","import { EventEmitter } from 'events';\nimport Iterator from 'obliterator/iterator';\nimport take from 'obliterator/take';\nimport chain from 'obliterator/chain';\n\n/**\n * Graphology Utilities\n * =====================\n *\n * Collection of helpful functions used by the implementation.\n */\n\n/**\n * Object.assign-like polyfill.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignPolyfill() {\n  const target = arguments[0];\n\n  for (let i = 1, l = arguments.length; i < l; i++) {\n    if (!arguments[i]) continue;\n\n    for (const k in arguments[i]) target[k] = arguments[i][k];\n  }\n\n  return target;\n}\n\nlet assign = assignPolyfill;\n\nif (typeof Object.assign === 'function') assign = Object.assign;\n\n/**\n * Function returning the first matching edge for given path.\n * Note: this function does not check the existence of source & target. This\n * must be performed by the caller.\n *\n * @param  {Graph}  graph  - Target graph.\n * @param  {any}    source - Source node.\n * @param  {any}    target - Target node.\n * @param  {string} type   - Type of the edge (mixed, directed or undirected).\n * @return {string|null}\n */\nfunction getMatchingEdge(graph, source, target, type) {\n  const sourceData = graph._nodes.get(source);\n\n  let edge = null;\n\n  if (!sourceData) return edge;\n\n  if (type === 'mixed') {\n    edge =\n      (sourceData.out && sourceData.out[target]) ||\n      (sourceData.undirected && sourceData.undirected[target]);\n  } else if (type === 'directed') {\n    edge = sourceData.out && sourceData.out[target];\n  } else {\n    edge = sourceData.undirected && sourceData.undirected[target];\n  }\n\n  return edge;\n}\n\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\nfunction isPlainObject(value) {\n  // NOTE: as per https://github.com/graphology/graphology/issues/149\n  // this function has been loosened not to reject object instances\n  // coming from other JavaScript contexts. It has also been chosen\n  // not to improve it to avoid obvious false positives and avoid\n  // taking a performance hit. People should really use TypeScript\n  // if they want to avoid feeding subtly irrelvant attribute objects.\n  return typeof value === 'object' && value !== null;\n}\n\n/**\n * Checks whether the given object is empty.\n *\n * @param  {object}  o - Target Object.\n * @return {boolean}\n */\nfunction isEmpty(o) {\n  let k;\n\n  for (k in o) return false;\n\n  return true;\n}\n\n/**\n * Creates a \"private\" property for the given member name by concealing it\n * using the `enumerable` option.\n *\n * @param {object} target - Target object.\n * @param {string} name   - Member name.\n */\nfunction privateProperty(target, name, value) {\n  Object.defineProperty(target, name, {\n    enumerable: false,\n    configurable: false,\n    writable: true,\n    value\n  });\n}\n\n/**\n * Creates a read-only property for the given member name & the given getter.\n *\n * @param {object}   target - Target object.\n * @param {string}   name   - Member name.\n * @param {mixed}    value  - The attached getter or fixed value.\n */\nfunction readOnlyProperty(target, name, value) {\n  const descriptor = {\n    enumerable: true,\n    configurable: true\n  };\n\n  if (typeof value === 'function') {\n    descriptor.get = value;\n  } else {\n    descriptor.value = value;\n    descriptor.writable = false;\n  }\n\n  Object.defineProperty(target, name, descriptor);\n}\n\n/**\n * Returns whether the given object constitute valid hints.\n *\n * @param {object} hints - Target object.\n */\nfunction validateHints(hints) {\n  if (!isPlainObject(hints)) return false;\n\n  if (hints.attributes && !Array.isArray(hints.attributes)) return false;\n\n  return true;\n}\n\n/**\n * Creates a function generating incremental ids for edges.\n *\n * @return {function}\n */\nfunction incrementalIdStartingFromRandomByte() {\n  let i = Math.floor(Math.random() * 256) & 0xff;\n\n  return () => {\n    return i++;\n  };\n}\n\n/**\n * Graphology Custom Errors\n * =========================\n *\n * Defining custom errors for ease of use & easy unit tests across\n * implementations (normalized typology rather than relying on error\n * messages to check whether the correct error was found).\n */\nclass GraphError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'GraphError';\n    this.message = message;\n  }\n}\n\nclass InvalidArgumentsGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'InvalidArgumentsGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(\n        this,\n        InvalidArgumentsGraphError.prototype.constructor\n      );\n  }\n}\n\nclass NotFoundGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'NotFoundGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(this, NotFoundGraphError.prototype.constructor);\n  }\n}\n\nclass UsageGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'UsageGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(this, UsageGraphError.prototype.constructor);\n  }\n}\n\n/**\n * Graphology Internal Data Classes\n * =================================\n *\n * Internal classes hopefully reduced to structs by engines & storing\n * necessary information for nodes & edges.\n *\n * Note that those classes don't rely on the `class` keyword to avoid some\n * cruft introduced by most of ES2015 transpilers.\n */\n\n/**\n * MixedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nfunction MixedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nMixedNodeData.prototype.clear = function () {\n  // Degrees\n  this.inDegree = 0;\n  this.outDegree = 0;\n  this.undirectedDegree = 0;\n  this.undirectedLoops = 0;\n  this.directedLoops = 0;\n\n  // Indices\n  this.in = {};\n  this.out = {};\n  this.undirected = {};\n};\n\n/**\n * DirectedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nfunction DirectedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nDirectedNodeData.prototype.clear = function () {\n  // Degrees\n  this.inDegree = 0;\n  this.outDegree = 0;\n  this.directedLoops = 0;\n\n  // Indices\n  this.in = {};\n  this.out = {};\n};\n\n/**\n * UndirectedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nfunction UndirectedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nUndirectedNodeData.prototype.clear = function () {\n  // Degrees\n  this.undirectedDegree = 0;\n  this.undirectedLoops = 0;\n\n  // Indices\n  this.undirected = {};\n};\n\n/**\n * EdgeData class.\n *\n * @constructor\n * @param {boolean} undirected   - Whether the edge is undirected.\n * @param {string}  string       - The edge's key.\n * @param {string}  source       - Source of the edge.\n * @param {string}  target       - Target of the edge.\n * @param {object}  attributes   - Edge's attributes.\n */\nfunction EdgeData(undirected, key, source, target, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n  this.undirected = undirected;\n\n  // Extremities\n  this.source = source;\n  this.target = target;\n}\n\nEdgeData.prototype.attach = function () {\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  const source = this.source.key;\n  const target = this.target.key;\n\n  // Handling source\n  this.source[outKey][target] = this;\n\n  if (this.undirected && source === target) return;\n\n  // Handling target\n  this.target[inKey][source] = this;\n};\n\nEdgeData.prototype.attachMulti = function () {\n  let outKey = 'out';\n  let inKey = 'in';\n\n  const source = this.source.key;\n  const target = this.target.key;\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  // Handling source\n  const adj = this.source[outKey];\n  const head = adj[target];\n\n  if (typeof head === 'undefined') {\n    adj[target] = this;\n\n    // Self-loop optimization\n    if (!(this.undirected && source === target)) {\n      // Handling target\n      this.target[inKey][source] = this;\n    }\n\n    return;\n  }\n\n  // Prepending to doubly-linked list\n  head.previous = this;\n  this.next = head;\n\n  // Pointing to new head\n  // NOTE: use mutating swap later to avoid lookup?\n  adj[target] = this;\n  this.target[inKey][source] = this;\n};\n\nEdgeData.prototype.detach = function () {\n  const source = this.source.key;\n  const target = this.target.key;\n\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  delete this.source[outKey][target];\n\n  // No-op delete in case of undirected self-loop\n  delete this.target[inKey][source];\n};\n\nEdgeData.prototype.detachMulti = function () {\n  const source = this.source.key;\n  const target = this.target.key;\n\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  // Deleting from doubly-linked list\n  if (this.previous === undefined) {\n    // We are dealing with the head\n\n    // Should we delete the adjacency entry because it is now empty?\n    if (this.next === undefined) {\n      delete this.source[outKey][target];\n\n      // No-op delete in case of undirected self-loop\n      delete this.target[inKey][source];\n    } else {\n      // Detaching\n      this.next.previous = undefined;\n\n      // NOTE: could avoid the lookups by creating a #.become mutating method\n      this.source[outKey][target] = this.next;\n\n      // No-op delete in case of undirected self-loop\n      this.target[inKey][source] = this.next;\n    }\n  } else {\n    // We are dealing with another list node\n    this.previous.next = this.next;\n\n    // If not last\n    if (this.next !== undefined) {\n      this.next.previous = this.previous;\n    }\n  }\n};\n\n/**\n * Graphology Node Attributes methods\n * ===================================\n */\n\nconst NODE = 0;\nconst SOURCE = 1;\nconst TARGET = 2;\nconst OPPOSITE = 3;\n\nfunction findRelevantNodeData(\n  graph,\n  method,\n  mode,\n  nodeOrEdge,\n  nameOrEdge,\n  add1,\n  add2\n) {\n  let nodeData, edgeData, arg1, arg2;\n\n  nodeOrEdge = '' + nodeOrEdge;\n\n  if (mode === NODE) {\n    nodeData = graph._nodes.get(nodeOrEdge);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nodeOrEdge}\" node in the graph.`\n      );\n\n    arg1 = nameOrEdge;\n    arg2 = add1;\n  } else if (mode === OPPOSITE) {\n    nameOrEdge = '' + nameOrEdge;\n\n    edgeData = graph._edges.get(nameOrEdge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nameOrEdge}\" edge in the graph.`\n      );\n\n    const source = edgeData.source.key;\n    const target = edgeData.target.key;\n\n    if (nodeOrEdge === source) {\n      nodeData = edgeData.target;\n    } else if (nodeOrEdge === target) {\n      nodeData = edgeData.source;\n    } else {\n      throw new NotFoundGraphError(\n        `Graph.${method}: the \"${nodeOrEdge}\" node is not attached to the \"${nameOrEdge}\" edge (${source}, ${target}).`\n      );\n    }\n\n    arg1 = add1;\n    arg2 = add2;\n  } else {\n    edgeData = graph._edges.get(nodeOrEdge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nodeOrEdge}\" edge in the graph.`\n      );\n\n    if (mode === SOURCE) {\n      nodeData = edgeData.source;\n    } else {\n      nodeData = edgeData.target;\n    }\n\n    arg1 = nameOrEdge;\n    arg2 = add1;\n  }\n\n  return [nodeData, arg1, arg2];\n}\n\nfunction attachNodeAttributeGetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    return data.attributes[name];\n  };\n}\n\nfunction attachNodeAttributesGetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge) {\n    const [data] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge\n    );\n\n    return data.attributes;\n  };\n}\n\nfunction attachNodeAttributeChecker(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    return data.attributes.hasOwnProperty(name);\n  };\n}\n\nfunction attachNodeAttributeSetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1, add2) {\n    const [data, name, value] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1,\n      add2\n    );\n\n    data.attributes[name] = value;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributeUpdater(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1, add2) {\n    const [data, name, updater] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1,\n      add2\n    );\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: updater should be a function.`\n      );\n\n    const attributes = data.attributes;\n    const value = updater(attributes[name]);\n\n    attributes[name] = value;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributeRemover(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    delete data.attributes[name];\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'remove',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesReplacer(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, attributes] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    data.attributes = attributes;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'replace',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesMerger(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, attributes] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    assign(data.attributes, attributes);\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'merge',\n      attributes: data.attributes,\n      data: attributes\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesUpdater(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, updater] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided updater is not a function.`\n      );\n\n    data.attributes = updater(data.attributes);\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'update',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * List of methods to attach.\n */\nconst NODE_ATTRIBUTES_METHODS = [\n  {\n    name: element => `get${element}Attribute`,\n    attacher: attachNodeAttributeGetter\n  },\n  {\n    name: element => `get${element}Attributes`,\n    attacher: attachNodeAttributesGetter\n  },\n  {\n    name: element => `has${element}Attribute`,\n    attacher: attachNodeAttributeChecker\n  },\n  {\n    name: element => `set${element}Attribute`,\n    attacher: attachNodeAttributeSetter\n  },\n  {\n    name: element => `update${element}Attribute`,\n    attacher: attachNodeAttributeUpdater\n  },\n  {\n    name: element => `remove${element}Attribute`,\n    attacher: attachNodeAttributeRemover\n  },\n  {\n    name: element => `replace${element}Attributes`,\n    attacher: attachNodeAttributesReplacer\n  },\n  {\n    name: element => `merge${element}Attributes`,\n    attacher: attachNodeAttributesMerger\n  },\n  {\n    name: element => `update${element}Attributes`,\n    attacher: attachNodeAttributesUpdater\n  }\n];\n\n/**\n * Attach every attributes-related methods to a Graph class.\n *\n * @param {function} Graph - Target class.\n */\nfunction attachNodeAttributesMethods(Graph) {\n  NODE_ATTRIBUTES_METHODS.forEach(function ({name, attacher}) {\n    // For nodes\n    attacher(Graph, name('Node'), NODE);\n\n    // For sources\n    attacher(Graph, name('Source'), SOURCE);\n\n    // For targets\n    attacher(Graph, name('Target'), TARGET);\n\n    // For opposites\n    attacher(Graph, name('Opposite'), OPPOSITE);\n  });\n}\n\n/**\n * Graphology Edge Attributes methods\n * ===================================\n */\n\n/**\n * Attach an attribute getter method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeGetter(Class, method, type) {\n  /**\n   * Get the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {mixed}          - The attribute's value.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes[name];\n  };\n}\n\n/**\n * Attach an attributes getter method onto the provided class.\n *\n * @param {function} Class       - Target class.\n * @param {string}   method      - Method name.\n * @param {string}   type        - Type of the edge to find.\n */\nfunction attachEdgeAttributesGetter(Class, method, type) {\n  /**\n   * Retrieves all the target element's attributes.\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   *\n   * @return {object}          - The element's attributes.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 1) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + arguments[1];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes;\n  };\n}\n\n/**\n * Attach an attribute checker method onto the provided class.\n *\n * @param {function} Class       - Target class.\n * @param {string}   method      - Method name.\n * @param {string}   type        - Type of the edge to find.\n */\nfunction attachEdgeAttributeChecker(Class, method, type) {\n  /**\n   * Checks whether the desired attribute is set for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes.hasOwnProperty(name);\n  };\n}\n\n/**\n * Attach an attribute setter method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeSetter(Class, method, type) {\n  /**\n   * Set the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   * @param  {mixed}  value   - New attribute value.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   * @param  {mixed}  value   - New attribute value.\n   *\n   * @return {Graph}          - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name, value) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 3) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n      value = arguments[3];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    data.attributes[name] = value;\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute updater method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeUpdater(Class, method, type) {\n  /**\n   * Update the desired attribute for the given element (node or edge) using\n   * the provided function.\n   *\n   * Arity 2:\n   * @param  {any}      element - Target element.\n   * @param  {string}   name    - Attribute's name.\n   * @param  {function} updater - Updater function.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}      source  - Source element.\n   * @param  {any}      target  - Target element.\n   * @param  {string}   name    - Attribute's name.\n   * @param  {function} updater - Updater function.\n   *\n   * @return {Graph}            - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name, updater) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 3) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n      updater = arguments[3];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: updater should be a function.`\n      );\n\n    data.attributes[name] = updater(data.attributes[name]);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute remover method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeRemover(Class, method, type) {\n  /**\n   * Remove the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {Graph}          - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    delete data.attributes[name];\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'remove',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute replacer method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesReplacer(Class, method, type) {\n  /**\n   * Replace the attributes for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element    - Target element.\n   * @param  {object} attributes - New attributes.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source     - Source element.\n   * @param  {any}     target     - Target element.\n   * @param  {object}  attributes - New attributes.\n   *\n   * @return {Graph}              - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, attributes) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + attributes;\n\n      attributes = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    data.attributes = attributes;\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'replace',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute merger method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesMerger(Class, method, type) {\n  /**\n   * Merge the attributes for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element    - Target element.\n   * @param  {object} attributes - Attributes to merge.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source     - Source element.\n   * @param  {any}     target     - Target element.\n   * @param  {object}  attributes - Attributes to merge.\n   *\n   * @return {Graph}              - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, attributes) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + attributes;\n\n      attributes = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    assign(data.attributes, attributes);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'merge',\n      attributes: data.attributes,\n      data: attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute updater method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesUpdater(Class, method, type) {\n  /**\n   * Update the attributes of the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}      element - Target element.\n   * @param  {function} updater - Updater function.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}      source  - Source element.\n   * @param  {any}      target  - Target element.\n   * @param  {function} updater - Updater function.\n   *\n   * @return {Graph}            - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, updater) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + updater;\n\n      updater = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided updater is not a function.`\n      );\n\n    data.attributes = updater(data.attributes);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'update',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * List of methods to attach.\n */\nconst EDGE_ATTRIBUTES_METHODS = [\n  {\n    name: element => `get${element}Attribute`,\n    attacher: attachEdgeAttributeGetter\n  },\n  {\n    name: element => `get${element}Attributes`,\n    attacher: attachEdgeAttributesGetter\n  },\n  {\n    name: element => `has${element}Attribute`,\n    attacher: attachEdgeAttributeChecker\n  },\n  {\n    name: element => `set${element}Attribute`,\n    attacher: attachEdgeAttributeSetter\n  },\n  {\n    name: element => `update${element}Attribute`,\n    attacher: attachEdgeAttributeUpdater\n  },\n  {\n    name: element => `remove${element}Attribute`,\n    attacher: attachEdgeAttributeRemover\n  },\n  {\n    name: element => `replace${element}Attributes`,\n    attacher: attachEdgeAttributesReplacer\n  },\n  {\n    name: element => `merge${element}Attributes`,\n    attacher: attachEdgeAttributesMerger\n  },\n  {\n    name: element => `update${element}Attributes`,\n    attacher: attachEdgeAttributesUpdater\n  }\n];\n\n/**\n * Attach every attributes-related methods to a Graph class.\n *\n * @param {function} Graph - Target class.\n */\nfunction attachEdgeAttributesMethods(Graph) {\n  EDGE_ATTRIBUTES_METHODS.forEach(function ({name, attacher}) {\n    // For edges\n    attacher(Graph, name('Edge'), 'mixed');\n\n    // For directed edges\n    attacher(Graph, name('DirectedEdge'), 'directed');\n\n    // For undirected edges\n    attacher(Graph, name('UndirectedEdge'), 'undirected');\n  });\n}\n\n/**\n * Graphology Edge Iteration\n * ==========================\n *\n * Attaching some methods to the Graph class to be able to iterate over a\n * graph's edges.\n */\n\n/**\n * Definitions.\n */\nconst EDGES_ITERATION = [\n  {\n    name: 'edges',\n    type: 'mixed'\n  },\n  {\n    name: 'inEdges',\n    type: 'directed',\n    direction: 'in'\n  },\n  {\n    name: 'outEdges',\n    type: 'directed',\n    direction: 'out'\n  },\n  {\n    name: 'inboundEdges',\n    type: 'mixed',\n    direction: 'in'\n  },\n  {\n    name: 'outboundEdges',\n    type: 'mixed',\n    direction: 'out'\n  },\n  {\n    name: 'directedEdges',\n    type: 'directed'\n  },\n  {\n    name: 'undirectedEdges',\n    type: 'undirected'\n  }\n];\n\n/**\n * Function iterating over edges from the given object to match one of them.\n *\n * @param {object}   object   - Target object.\n * @param {function} callback - Function to call.\n */\nfunction forEachSimple(breakable, object, callback, avoid) {\n  let shouldBreak = false;\n\n  for (const k in object) {\n    if (k === avoid) continue;\n\n    const edgeData = object[k];\n\n    shouldBreak = callback(\n      edgeData.key,\n      edgeData.attributes,\n      edgeData.source.key,\n      edgeData.target.key,\n      edgeData.source.attributes,\n      edgeData.target.attributes,\n      edgeData.undirected\n    );\n\n    if (breakable && shouldBreak) return edgeData.key;\n  }\n\n  return;\n}\n\nfunction forEachMulti(breakable, object, callback, avoid) {\n  let edgeData, source, target;\n\n  let shouldBreak = false;\n\n  for (const k in object) {\n    if (k === avoid) continue;\n\n    edgeData = object[k];\n\n    do {\n      source = edgeData.source;\n      target = edgeData.target;\n\n      shouldBreak = callback(\n        edgeData.key,\n        edgeData.attributes,\n        source.key,\n        target.key,\n        source.attributes,\n        target.attributes,\n        edgeData.undirected\n      );\n\n      if (breakable && shouldBreak) return edgeData.key;\n\n      edgeData = edgeData.next;\n    } while (edgeData !== undefined);\n  }\n\n  return;\n}\n\n/**\n * Function returning an iterator over edges from the given object.\n *\n * @param  {object}   object - Target object.\n * @return {Iterator}\n */\nfunction createIterator(object, avoid) {\n  const keys = Object.keys(object);\n  const l = keys.length;\n\n  let edgeData;\n  let i = 0;\n\n  return new Iterator(function next() {\n    do {\n      if (!edgeData) {\n        if (i >= l) return {done: true};\n\n        const k = keys[i++];\n\n        if (k === avoid) {\n          edgeData = undefined;\n          continue;\n        }\n\n        edgeData = object[k];\n      } else {\n        edgeData = edgeData.next;\n      }\n    } while (!edgeData);\n\n    return {\n      done: false,\n      value: {\n        edge: edgeData.key,\n        attributes: edgeData.attributes,\n        source: edgeData.source.key,\n        target: edgeData.target.key,\n        sourceAttributes: edgeData.source.attributes,\n        targetAttributes: edgeData.target.attributes,\n        undirected: edgeData.undirected\n      }\n    };\n  });\n}\n\n/**\n * Function iterating over the egdes from the object at given key to match\n * one of them.\n *\n * @param {object}   object   - Target object.\n * @param {mixed}    k        - Neighbor key.\n * @param {function} callback - Callback to use.\n */\nfunction forEachForKeySimple(breakable, object, k, callback) {\n  const edgeData = object[k];\n\n  if (!edgeData) return;\n\n  const sourceData = edgeData.source;\n  const targetData = edgeData.target;\n\n  if (\n    callback(\n      edgeData.key,\n      edgeData.attributes,\n      sourceData.key,\n      targetData.key,\n      sourceData.attributes,\n      targetData.attributes,\n      edgeData.undirected\n    ) &&\n    breakable\n  )\n    return edgeData.key;\n}\n\nfunction forEachForKeyMulti(breakable, object, k, callback) {\n  let edgeData = object[k];\n\n  if (!edgeData) return;\n\n  let shouldBreak = false;\n\n  do {\n    shouldBreak = callback(\n      edgeData.key,\n      edgeData.attributes,\n      edgeData.source.key,\n      edgeData.target.key,\n      edgeData.source.attributes,\n      edgeData.target.attributes,\n      edgeData.undirected\n    );\n\n    if (breakable && shouldBreak) return edgeData.key;\n\n    edgeData = edgeData.next;\n  } while (edgeData !== undefined);\n\n  return;\n}\n\n/**\n * Function returning an iterator over the egdes from the object at given key.\n *\n * @param  {object}   object   - Target object.\n * @param  {mixed}    k        - Neighbor key.\n * @return {Iterator}\n */\nfunction createIteratorForKey(object, k) {\n  let edgeData = object[k];\n\n  if (edgeData.next !== undefined) {\n    return new Iterator(function () {\n      if (!edgeData) return {done: true};\n\n      const value = {\n        edge: edgeData.key,\n        attributes: edgeData.attributes,\n        source: edgeData.source.key,\n        target: edgeData.target.key,\n        sourceAttributes: edgeData.source.attributes,\n        targetAttributes: edgeData.target.attributes,\n        undirected: edgeData.undirected\n      };\n\n      edgeData = edgeData.next;\n\n      return {\n        done: false,\n        value\n      };\n    });\n  }\n\n  return Iterator.of({\n    edge: edgeData.key,\n    attributes: edgeData.attributes,\n    source: edgeData.source.key,\n    target: edgeData.target.key,\n    sourceAttributes: edgeData.source.attributes,\n    targetAttributes: edgeData.target.attributes,\n    undirected: edgeData.undirected\n  });\n}\n\n/**\n * Function creating an array of edges for the given type.\n *\n * @param  {Graph}   graph - Target Graph instance.\n * @param  {string}  type  - Type of edges to retrieve.\n * @return {array}         - Array of edges.\n */\nfunction createEdgeArray(graph, type) {\n  if (graph.size === 0) return [];\n\n  if (type === 'mixed' || type === graph.type) {\n    if (typeof Array.from === 'function')\n      return Array.from(graph._edges.keys());\n\n    return take(graph._edges.keys(), graph._edges.size);\n  }\n\n  const size =\n    type === 'undirected' ? graph.undirectedSize : graph.directedSize;\n\n  const list = new Array(size),\n    mask = type === 'undirected';\n\n  const iterator = graph._edges.values();\n\n  let i = 0;\n  let step, data;\n\n  while (((step = iterator.next()), step.done !== true)) {\n    data = step.value;\n\n    if (data.undirected === mask) list[i++] = data.key;\n  }\n\n  return list;\n}\n\n/**\n * Function iterating over a graph's edges using a callback to match one of\n * them.\n *\n * @param  {Graph}    graph    - Target Graph instance.\n * @param  {string}   type     - Type of edges to retrieve.\n * @param  {function} callback - Function to call.\n */\nfunction forEachEdge(breakable, graph, type, callback) {\n  if (graph.size === 0) return;\n\n  const shouldFilter = type !== 'mixed' && type !== graph.type;\n  const mask = type === 'undirected';\n\n  let step, data;\n  let shouldBreak = false;\n  const iterator = graph._edges.values();\n\n  while (((step = iterator.next()), step.done !== true)) {\n    data = step.value;\n\n    if (shouldFilter && data.undirected !== mask) continue;\n\n    const {key, attributes, source, target} = data;\n\n    shouldBreak = callback(\n      key,\n      attributes,\n      source.key,\n      target.key,\n      source.attributes,\n      target.attributes,\n      data.undirected\n    );\n\n    if (breakable && shouldBreak) return key;\n  }\n\n  return;\n}\n\n/**\n * Function creating an iterator of edges for the given type.\n *\n * @param  {Graph}    graph - Target Graph instance.\n * @param  {string}   type  - Type of edges to retrieve.\n * @return {Iterator}\n */\nfunction createEdgeIterator(graph, type) {\n  if (graph.size === 0) return Iterator.empty();\n\n  const shouldFilter = type !== 'mixed' && type !== graph.type;\n  const mask = type === 'undirected';\n\n  const iterator = graph._edges.values();\n\n  return new Iterator(function next() {\n    let step, data;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      step = iterator.next();\n\n      if (step.done) return step;\n\n      data = step.value;\n\n      if (shouldFilter && data.undirected !== mask) continue;\n\n      break;\n    }\n\n    const value = {\n      edge: data.key,\n      attributes: data.attributes,\n      source: data.source.key,\n      target: data.target.key,\n      sourceAttributes: data.source.attributes,\n      targetAttributes: data.target.attributes,\n      undirected: data.undirected\n    };\n\n    return {value, done: false};\n  });\n}\n\n/**\n * Function iterating over a node's edges using a callback to match one of them.\n *\n * @param  {boolean}  multi     - Whether the graph is multi or not.\n * @param  {string}   type      - Type of edges to retrieve.\n * @param  {string}   direction - In or out?\n * @param  {any}      nodeData  - Target node's data.\n * @param  {function} callback  - Function to call.\n */\nfunction forEachEdgeForNode(\n  breakable,\n  multi,\n  type,\n  direction,\n  nodeData,\n  callback\n) {\n  const fn = multi ? forEachMulti : forEachSimple;\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      found = fn(breakable, nodeData.in, callback);\n\n      if (breakable && found) return found;\n    }\n    if (direction !== 'in') {\n      found = fn(\n        breakable,\n        nodeData.out,\n        callback,\n        !direction ? nodeData.key : undefined\n      );\n\n      if (breakable && found) return found;\n    }\n  }\n\n  if (type !== 'directed') {\n    found = fn(breakable, nodeData.undirected, callback);\n\n    if (breakable && found) return found;\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of edges for the given type & the given node.\n *\n * @param  {boolean} multi     - Whether the graph is multi or not.\n * @param  {string}  type      - Type of edges to retrieve.\n * @param  {string}  direction - In or out?\n * @param  {any}     nodeData  - Target node's data.\n * @return {array}             - Array of edges.\n */\nfunction createEdgeArrayForNode(multi, type, direction, nodeData) {\n  const edges = []; // TODO: possibility to know size beforehand or factorize with map\n\n  forEachEdgeForNode(false, multi, type, direction, nodeData, function (key) {\n    edges.push(key);\n  });\n\n  return edges;\n}\n\n/**\n * Function iterating over a node's edges using a callback.\n *\n * @param  {string}   type      - Type of edges to retrieve.\n * @param  {string}   direction - In or out?\n * @param  {any}      nodeData  - Target node's data.\n * @return {Iterator}\n */\nfunction createEdgeIteratorForNode(type, direction, nodeData) {\n  let iterator = Iterator.empty();\n\n  if (type !== 'undirected') {\n    if (direction !== 'out' && typeof nodeData.in !== 'undefined')\n      iterator = chain(iterator, createIterator(nodeData.in));\n    if (direction !== 'in' && typeof nodeData.out !== 'undefined')\n      iterator = chain(\n        iterator,\n        createIterator(nodeData.out, !direction ? nodeData.key : undefined)\n      );\n  }\n\n  if (type !== 'directed' && typeof nodeData.undirected !== 'undefined') {\n    iterator = chain(iterator, createIterator(nodeData.undirected));\n  }\n\n  return iterator;\n}\n\n/**\n * Function iterating over edges for the given path using a callback to match\n * one of them.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {boolean}  multi      - Whether the graph is multi.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {string}   target     - Target node.\n * @param  {function} callback   - Function to call.\n */\nfunction forEachEdgeForPath(\n  breakable,\n  type,\n  multi,\n  direction,\n  sourceData,\n  target,\n  callback\n) {\n  const fn = multi ? forEachForKeyMulti : forEachForKeySimple;\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (typeof sourceData.in !== 'undefined' && direction !== 'out') {\n      found = fn(breakable, sourceData.in, target, callback);\n\n      if (breakable && found) return found;\n    }\n\n    if (\n      typeof sourceData.out !== 'undefined' &&\n      direction !== 'in' &&\n      (direction || sourceData.key !== target)\n    ) {\n      found = fn(breakable, sourceData.out, target, callback);\n\n      if (breakable && found) return found;\n    }\n  }\n\n  if (type !== 'directed') {\n    if (typeof sourceData.undirected !== 'undefined') {\n      found = fn(breakable, sourceData.undirected, target, callback);\n\n      if (breakable && found) return found;\n    }\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of edges for the given path.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {boolean}  multi      - Whether the graph is multi.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {any}      target     - Target node.\n * @return {array}               - Array of edges.\n */\nfunction createEdgeArrayForPath(type, multi, direction, sourceData, target) {\n  const edges = []; // TODO: possibility to know size beforehand or factorize with map\n\n  forEachEdgeForPath(\n    false,\n    type,\n    multi,\n    direction,\n    sourceData,\n    target,\n    function (key) {\n      edges.push(key);\n    }\n  );\n\n  return edges;\n}\n\n/**\n * Function returning an iterator over edges for the given path.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {string}   target     - Target node.\n * @param  {function} callback   - Function to call.\n */\nfunction createEdgeIteratorForPath(type, direction, sourceData, target) {\n  let iterator = Iterator.empty();\n\n  if (type !== 'undirected') {\n    if (\n      typeof sourceData.in !== 'undefined' &&\n      direction !== 'out' &&\n      target in sourceData.in\n    )\n      iterator = chain(iterator, createIteratorForKey(sourceData.in, target));\n\n    if (\n      typeof sourceData.out !== 'undefined' &&\n      direction !== 'in' &&\n      target in sourceData.out &&\n      (direction || sourceData.key !== target)\n    )\n      iterator = chain(iterator, createIteratorForKey(sourceData.out, target));\n  }\n\n  if (type !== 'directed') {\n    if (\n      typeof sourceData.undirected !== 'undefined' &&\n      target in sourceData.undirected\n    )\n      iterator = chain(\n        iterator,\n        createIteratorForKey(sourceData.undirected, target)\n      );\n  }\n\n  return iterator;\n}\n\n/**\n * Function attaching an edge array creator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachEdgeArrayCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  /**\n   * Function returning an array of certain edges.\n   *\n   * Arity 0: Return all the relevant edges.\n   *\n   * Arity 1: Return all of a node's relevant edges.\n   * @param  {any}   node   - Target node.\n   *\n   * Arity 2: Return the relevant edges across the given path.\n   * @param  {any}   source - Source node.\n   * @param  {any}   target - Target node.\n   *\n   * @return {array|number} - The edges or the number of edges.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[name] = function (source, target) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return [];\n\n    if (!arguments.length) return createEdgeArray(this, type);\n\n    if (arguments.length === 1) {\n      source = '' + source;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${name}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      return createEdgeArrayForNode(\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData\n      );\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return createEdgeArrayForPath(\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`\n    );\n  };\n}\n\n/**\n * Function attaching a edge callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachForEachEdge(Class, description) {\n  const {name, type, direction} = description;\n\n  const forEachName = 'forEach' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over the graph's relevant edges by applying the given\n   * callback.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[forEachName] = function (source, target, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    if (arguments.length === 1) {\n      callback = source;\n      return forEachEdge(false, this, type, callback);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      callback = target;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      // TODO: maybe attach the sub method to the instance dynamically?\n      return forEachEdgeForNode(\n        false,\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData,\n        callback\n      );\n    }\n\n    if (arguments.length === 3) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return forEachEdgeForPath(\n        false,\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target,\n        callback\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${forEachName}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`\n    );\n  };\n\n  /**\n   * Function mapping the graph's relevant edges by applying the given\n   * callback.\n   *\n   * Arity 1: Map all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Map all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Map the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const mapName = 'map' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[mapName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    let result;\n\n    // We know the result length beforehand\n    if (args.length === 0) {\n      let length = 0;\n\n      if (type !== 'directed') length += this.undirectedSize;\n      if (type !== 'undirected') length += this.directedSize;\n\n      result = new Array(length);\n\n      let i = 0;\n\n      args.push((e, ea, s, t, sa, ta, u) => {\n        result[i++] = callback(e, ea, s, t, sa, ta, u);\n      });\n    }\n\n    // We don't know the result length beforehand\n    // TODO: we can in some instances of simple graphs, knowing degree\n    else {\n      result = [];\n\n      args.push((e, ea, s, t, sa, ta, u) => {\n        result.push(callback(e, ea, s, t, sa, ta, u));\n      });\n    }\n\n    this[forEachName].apply(this, args);\n\n    return result;\n  };\n\n  /**\n   * Function filtering the graph's relevant edges using the provided predicate\n   * function.\n   *\n   * Arity 1: Filter all the relevant edges.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * Arity 2: Filter all of a node's relevant edges.\n   * @param  {any}      node      - Target node.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * Arity 3: Filter the relevant edges across the given path.\n   * @param  {any}      source    - Source node.\n   * @param  {any}      target    - Target node.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const filterName = 'filter' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[filterName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    const result = [];\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      if (callback(e, ea, s, t, sa, ta, u)) result.push(e);\n    });\n\n    this[forEachName].apply(this, args);\n\n    return result;\n  };\n\n  /**\n   * Function reducing the graph's relevant edges using the provided accumulator\n   * function.\n   *\n   * Arity 1: Reduce all the relevant edges.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * Arity 2: Reduce all of a node's relevant edges.\n   * @param  {any}      node         - Target node.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * Arity 3: Reduce the relevant edges across the given path.\n   * @param  {any}      source       - Source node.\n   * @param  {any}      target       - Target node.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const reduceName = 'reduce' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[reduceName] = function () {\n    let args = Array.prototype.slice.call(arguments);\n\n    if (args.length < 2 || args.length > 4) {\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: invalid number of arguments (expecting 2, 3 or 4 and got ${args.length}).`\n      );\n    }\n\n    if (\n      typeof args[args.length - 1] === 'function' &&\n      typeof args[args.length - 2] !== 'function'\n    ) {\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`\n      );\n    }\n\n    let callback;\n    let initialValue;\n\n    if (args.length === 2) {\n      callback = args[0];\n      initialValue = args[1];\n      args = [];\n    } else if (args.length === 3) {\n      callback = args[1];\n      initialValue = args[2];\n      args = [args[0]];\n    } else if (args.length === 4) {\n      callback = args[2];\n      initialValue = args[3];\n      args = [args[0], args[1]];\n    }\n\n    let accumulator = initialValue;\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      accumulator = callback(accumulator, e, ea, s, t, sa, ta, u);\n    });\n\n    this[forEachName].apply(this, args);\n\n    return accumulator;\n  };\n}\n\n/**\n * Function attaching a breakable edge callback iterator method to the Graph\n * prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachFindEdge(Class, description) {\n  const {name, type, direction} = description;\n\n  const findEdgeName = 'find' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over the graph's relevant edges in order to match\n   * one of them using the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[findEdgeName] = function (source, target, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return false;\n\n    if (arguments.length === 1) {\n      callback = source;\n      return forEachEdge(true, this, type, callback);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      callback = target;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      // TODO: maybe attach the sub method to the instance dynamically?\n      return forEachEdgeForNode(\n        true,\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData,\n        callback\n      );\n    }\n\n    if (arguments.length === 3) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return forEachEdgeForPath(\n        true,\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target,\n        callback\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${findEdgeName}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`\n    );\n  };\n\n  /**\n   * Function iterating over the graph's relevant edges in order to assert\n   * whether any one of them matches the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const someName = 'some' + name[0].toUpperCase() + name.slice(1, -1);\n\n  Class.prototype[someName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      return callback(e, ea, s, t, sa, ta, u);\n    });\n\n    const found = this[findEdgeName].apply(this, args);\n\n    if (found) return true;\n\n    return false;\n  };\n\n  /**\n   * Function iterating over the graph's relevant edges in order to assert\n   * whether all of them matche the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const everyName = 'every' + name[0].toUpperCase() + name.slice(1, -1);\n\n  Class.prototype[everyName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      return !callback(e, ea, s, t, sa, ta, u);\n    });\n\n    const found = this[findEdgeName].apply(this, args);\n\n    if (found) return false;\n\n    return true;\n  };\n}\n\n/**\n * Function attaching an edge iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachEdgeIteratorCreator(Class, description) {\n  const {name: originalName, type, direction} = description;\n\n  const name = originalName.slice(0, -1) + 'Entries';\n\n  /**\n   * Function returning an iterator over the graph's edges.\n   *\n   * Arity 0: Iterate over all the relevant edges.\n   *\n   * Arity 1: Iterate over all of a node's relevant edges.\n   * @param  {any}   node   - Target node.\n   *\n   * Arity 2: Iterate over the relevant edges across the given path.\n   * @param  {any}   source - Source node.\n   * @param  {any}   target - Target node.\n   *\n   * @return {array|number} - The edges or the number of edges.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[name] = function (source, target) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return Iterator.empty();\n\n    if (!arguments.length) return createEdgeIterator(this, type);\n\n    if (arguments.length === 1) {\n      source = '' + source;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      return createEdgeIteratorForNode(type, direction, sourceData);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return createEdgeIteratorForPath(type, direction, sourceData, target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`\n    );\n  };\n}\n\n/**\n * Function attaching every edge iteration method to the Graph class.\n *\n * @param {function} Graph - Graph class.\n */\nfunction attachEdgeIterationMethods(Graph) {\n  EDGES_ITERATION.forEach(description => {\n    attachEdgeArrayCreator(Graph, description);\n    attachForEachEdge(Graph, description);\n    attachFindEdge(Graph, description);\n    attachEdgeIteratorCreator(Graph, description);\n  });\n}\n\n/**\n * Graphology Neighbor Iteration\n * ==============================\n *\n * Attaching some methods to the Graph class to be able to iterate over\n * neighbors.\n */\n\n/**\n * Definitions.\n */\nconst NEIGHBORS_ITERATION = [\n  {\n    name: 'neighbors',\n    type: 'mixed'\n  },\n  {\n    name: 'inNeighbors',\n    type: 'directed',\n    direction: 'in'\n  },\n  {\n    name: 'outNeighbors',\n    type: 'directed',\n    direction: 'out'\n  },\n  {\n    name: 'inboundNeighbors',\n    type: 'mixed',\n    direction: 'in'\n  },\n  {\n    name: 'outboundNeighbors',\n    type: 'mixed',\n    direction: 'out'\n  },\n  {\n    name: 'directedNeighbors',\n    type: 'directed'\n  },\n  {\n    name: 'undirectedNeighbors',\n    type: 'undirected'\n  }\n];\n\n/**\n * Helpers.\n */\nfunction CompositeSetWrapper() {\n  this.A = null;\n  this.B = null;\n}\n\nCompositeSetWrapper.prototype.wrap = function (set) {\n  if (this.A === null) this.A = set;\n  else if (this.B === null) this.B = set;\n};\n\nCompositeSetWrapper.prototype.has = function (key) {\n  if (this.A !== null && key in this.A) return true;\n  if (this.B !== null && key in this.B) return true;\n  return false;\n};\n\n/**\n * Function iterating over the given node's relevant neighbors to match\n * one of them using a predicated function.\n *\n * @param  {string}   type      - Type of neighbors.\n * @param  {string}   direction - Direction.\n * @param  {any}      nodeData  - Target node's data.\n * @param  {function} callback  - Callback to use.\n */\nfunction forEachInObjectOnce(breakable, visited, nodeData, object, callback) {\n  for (const k in object) {\n    const edgeData = object[k];\n\n    const sourceData = edgeData.source;\n    const targetData = edgeData.target;\n\n    const neighborData = sourceData === nodeData ? targetData : sourceData;\n\n    if (visited && visited.has(neighborData.key)) continue;\n\n    const shouldBreak = callback(neighborData.key, neighborData.attributes);\n\n    if (breakable && shouldBreak) return neighborData.key;\n  }\n\n  return;\n}\n\nfunction forEachNeighbor(breakable, type, direction, nodeData, callback) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected')\n      return forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData.undirected,\n        callback\n      );\n\n    if (typeof direction === 'string')\n      return forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData[direction],\n        callback\n      );\n  }\n\n  // Else we need to keep a set of neighbors not to return duplicates\n  // We cheat by querying the other adjacencies\n  const visited = new CompositeSetWrapper();\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      found = forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData.in,\n        callback\n      );\n\n      if (breakable && found) return found;\n\n      visited.wrap(nodeData.in);\n    }\n    if (direction !== 'in') {\n      found = forEachInObjectOnce(\n        breakable,\n        visited,\n        nodeData,\n        nodeData.out,\n        callback\n      );\n\n      if (breakable && found) return found;\n\n      visited.wrap(nodeData.out);\n    }\n  }\n\n  if (type !== 'directed') {\n    found = forEachInObjectOnce(\n      breakable,\n      visited,\n      nodeData,\n      nodeData.undirected,\n      callback\n    );\n\n    if (breakable && found) return found;\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of relevant neighbors for the given node.\n *\n * @param  {string}       type      - Type of neighbors.\n * @param  {string}       direction - Direction.\n * @param  {any}          nodeData  - Target node's data.\n * @return {Array}                  - The list of neighbors.\n */\nfunction createNeighborArrayForNode(type, direction, nodeData) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected') return Object.keys(nodeData.undirected);\n\n    if (typeof direction === 'string') return Object.keys(nodeData[direction]);\n  }\n\n  const neighbors = [];\n\n  forEachNeighbor(false, type, direction, nodeData, function (key) {\n    neighbors.push(key);\n  });\n\n  return neighbors;\n}\n\n/**\n * Function returning an iterator over the given node's relevant neighbors.\n *\n * @param  {string}   type      - Type of neighbors.\n * @param  {string}   direction - Direction.\n * @param  {any}      nodeData  - Target node's data.\n * @return {Iterator}\n */\nfunction createDedupedObjectIterator(visited, nodeData, object) {\n  const keys = Object.keys(object);\n  const l = keys.length;\n\n  let i = 0;\n\n  return new Iterator(function next() {\n    let neighborData = null;\n\n    do {\n      if (i >= l) {\n        if (visited) visited.wrap(object);\n        return {done: true};\n      }\n\n      const edgeData = object[keys[i++]];\n\n      const sourceData = edgeData.source;\n      const targetData = edgeData.target;\n\n      neighborData = sourceData === nodeData ? targetData : sourceData;\n\n      if (visited && visited.has(neighborData.key)) {\n        neighborData = null;\n        continue;\n      }\n    } while (neighborData === null);\n\n    return {\n      done: false,\n      value: {neighbor: neighborData.key, attributes: neighborData.attributes}\n    };\n  });\n}\n\nfunction createNeighborIterator(type, direction, nodeData) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected')\n      return createDedupedObjectIterator(null, nodeData, nodeData.undirected);\n\n    if (typeof direction === 'string')\n      return createDedupedObjectIterator(null, nodeData, nodeData[direction]);\n  }\n\n  let iterator = Iterator.empty();\n\n  // Else we need to keep a set of neighbors not to return duplicates\n  // We cheat by querying the other adjacencies\n  const visited = new CompositeSetWrapper();\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      iterator = chain(\n        iterator,\n        createDedupedObjectIterator(visited, nodeData, nodeData.in)\n      );\n    }\n    if (direction !== 'in') {\n      iterator = chain(\n        iterator,\n        createDedupedObjectIterator(visited, nodeData, nodeData.out)\n      );\n    }\n  }\n\n  if (type !== 'directed') {\n    iterator = chain(\n      iterator,\n      createDedupedObjectIterator(visited, nodeData, nodeData.undirected)\n    );\n  }\n\n  return iterator;\n}\n\n/**\n * Function attaching a neighbors array creator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachNeighborArrayCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  /**\n   * Function returning an array of certain neighbors.\n   *\n   * @param  {any}   node   - Target node.\n   * @return {array} - The neighbors of neighbors.\n   *\n   * @throws {Error} - Will throw if node is not found in the graph.\n   */\n  Class.prototype[name] = function (node) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return [];\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${name}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return createNeighborArrayForNode(\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData\n    );\n  };\n}\n\n/**\n * Function attaching a neighbors callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachForEachNeighbor(Class, description) {\n  const {name, type, direction} = description;\n\n  const forEachName = 'forEach' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over all the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[forEachName] = function (node, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${forEachName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    forEachNeighbor(\n      false,\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData,\n      callback\n    );\n  };\n\n  /**\n   * Function mapping the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const mapName = 'map' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[mapName] = function (node, callback) {\n    // TODO: optimize when size is known beforehand\n    const result = [];\n\n    this[forEachName](node, (n, a) => {\n      result.push(callback(n, a));\n    });\n\n    return result;\n  };\n\n  /**\n   * Function filtering the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const filterName = 'filter' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[filterName] = function (node, callback) {\n    const result = [];\n\n    this[forEachName](node, (n, a) => {\n      if (callback(n, a)) result.push(n);\n    });\n\n    return result;\n  };\n\n  /**\n   * Function reducing the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const reduceName = 'reduce' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[reduceName] = function (node, callback, initialValue) {\n    if (arguments.length < 3)\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`\n      );\n\n    let accumulator = initialValue;\n\n    this[forEachName](node, (n, a) => {\n      accumulator = callback(accumulator, n, a);\n    });\n\n    return accumulator;\n  };\n}\n\n/**\n * Function attaching a breakable neighbors callback iterator method to the\n * Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachFindNeighbor(Class, description) {\n  const {name, type, direction} = description;\n\n  const capitalizedSingular = name[0].toUpperCase() + name.slice(1, -1);\n\n  const findName = 'find' + capitalizedSingular;\n\n  /**\n   * Function iterating over all the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[findName] = function (node, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${findName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return forEachNeighbor(\n      true,\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData,\n      callback\n    );\n  };\n\n  /**\n   * Function iterating over all the relevant neighbors to find if any of them\n   * matches the given predicate.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const someName = 'some' + capitalizedSingular;\n\n  Class.prototype[someName] = function (node, callback) {\n    const found = this[findName](node, callback);\n\n    if (found) return true;\n\n    return false;\n  };\n\n  /**\n   * Function iterating over all the relevant neighbors to find if all of them\n   * matche the given predicate.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const everyName = 'every' + capitalizedSingular;\n\n  Class.prototype[everyName] = function (node, callback) {\n    const found = this[findName](node, (n, a) => {\n      return !callback(n, a);\n    });\n\n    if (found) return false;\n\n    return true;\n  };\n}\n\n/**\n * Function attaching a neighbors callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachNeighborIteratorCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  const iteratorName = name.slice(0, -1) + 'Entries';\n\n  /**\n   * Function returning an iterator over all the relevant neighbors.\n   *\n   * @param  {any}      node     - Target node.\n   * @return {Iterator}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[iteratorName] = function (node) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return Iterator.empty();\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${iteratorName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return createNeighborIterator(\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData\n    );\n  };\n}\n\n/**\n * Function attaching every neighbor iteration method to the Graph class.\n *\n * @param {function} Graph - Graph class.\n */\nfunction attachNeighborIterationMethods(Graph) {\n  NEIGHBORS_ITERATION.forEach(description => {\n    attachNeighborArrayCreator(Graph, description);\n    attachForEachNeighbor(Graph, description);\n    attachFindNeighbor(Graph, description);\n    attachNeighborIteratorCreator(Graph, description);\n  });\n}\n\n/**\n * Graphology Adjacency Iteration\n * ===============================\n *\n * Attaching some methods to the Graph class to be able to iterate over a\n * graph's adjacency.\n */\n\n/**\n * Function iterating over a simple graph's adjacency using a callback.\n *\n * @param {boolean}  breakable         - Can we break?\n * @param {boolean}  assymetric        - Whether to emit undirected edges only once.\n * @param {boolean}  disconnectedNodes - Whether to emit disconnected nodes.\n * @param {Graph}    graph             - Target Graph instance.\n * @param {callback} function          - Iteration callback.\n */\nfunction forEachAdjacency(\n  breakable,\n  assymetric,\n  disconnectedNodes,\n  graph,\n  callback\n) {\n  const iterator = graph._nodes.values();\n\n  const type = graph.type;\n\n  let step, sourceData, neighbor, adj, edgeData, targetData, shouldBreak;\n\n  while (((step = iterator.next()), step.done !== true)) {\n    let hasEdges = false;\n\n    sourceData = step.value;\n\n    if (type !== 'undirected') {\n      adj = sourceData.out;\n\n      for (neighbor in adj) {\n        edgeData = adj[neighbor];\n\n        do {\n          targetData = edgeData.target;\n\n          hasEdges = true;\n          shouldBreak = callback(\n            sourceData.key,\n            targetData.key,\n            sourceData.attributes,\n            targetData.attributes,\n            edgeData.key,\n            edgeData.attributes,\n            edgeData.undirected\n          );\n\n          if (breakable && shouldBreak) return edgeData;\n\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (type !== 'directed') {\n      adj = sourceData.undirected;\n\n      for (neighbor in adj) {\n        if (assymetric && sourceData.key > neighbor) continue;\n\n        edgeData = adj[neighbor];\n\n        do {\n          targetData = edgeData.target;\n\n          if (targetData.key !== neighbor) targetData = edgeData.source;\n\n          hasEdges = true;\n          shouldBreak = callback(\n            sourceData.key,\n            targetData.key,\n            sourceData.attributes,\n            targetData.attributes,\n            edgeData.key,\n            edgeData.attributes,\n            edgeData.undirected\n          );\n\n          if (breakable && shouldBreak) return edgeData;\n\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (disconnectedNodes && !hasEdges) {\n      shouldBreak = callback(\n        sourceData.key,\n        null,\n        sourceData.attributes,\n        null,\n        null,\n        null,\n        null\n      );\n\n      if (breakable && shouldBreak) return null;\n    }\n  }\n\n  return;\n}\n\n/**\n * Graphology Serialization Utilities\n * ===================================\n *\n * Collection of functions used by the graph serialization schemes.\n */\n\n/**\n * Formats internal node data into a serialized node.\n *\n * @param  {any}    key  - The node's key.\n * @param  {object} data - Internal node's data.\n * @return {array}       - The serialized node.\n */\nfunction serializeNode(key, data) {\n  const serialized = {key};\n\n  if (!isEmpty(data.attributes))\n    serialized.attributes = assign({}, data.attributes);\n\n  return serialized;\n}\n\n/**\n * Formats internal edge data into a serialized edge.\n *\n * @param  {string} type - The graph's type.\n * @param  {any}    key  - The edge's key.\n * @param  {object} data - Internal edge's data.\n * @return {array}       - The serialized edge.\n */\nfunction serializeEdge(type, key, data) {\n  const serialized = {\n    key,\n    source: data.source.key,\n    target: data.target.key\n  };\n\n  if (!isEmpty(data.attributes))\n    serialized.attributes = assign({}, data.attributes);\n\n  if (type === 'mixed' && data.undirected) serialized.undirected = true;\n\n  return serialized;\n}\n\n/**\n * Checks whether the given value is a serialized node.\n *\n * @param  {mixed} value - Target value.\n * @return {string|null}\n */\nfunction validateSerializedNode(value) {\n  if (!isPlainObject(value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid serialized node. A serialized node should be a plain object with at least a \"key\" property.'\n    );\n\n  if (!('key' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized node is missing its key.'\n    );\n\n  if (\n    'attributes' in value &&\n    (!isPlainObject(value.attributes) || value.attributes === null)\n  )\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.'\n    );\n}\n\n/**\n * Checks whether the given value is a serialized edge.\n *\n * @param  {mixed} value - Target value.\n * @return {string|null}\n */\nfunction validateSerializedEdge(value) {\n  if (!isPlainObject(value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a \"source\" & \"target\" property.'\n    );\n\n  if (!('source' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized edge is missing its source.'\n    );\n\n  if (!('target' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized edge is missing its target.'\n    );\n\n  if (\n    'attributes' in value &&\n    (!isPlainObject(value.attributes) || value.attributes === null)\n  )\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.'\n    );\n\n  if ('undirected' in value && typeof value.undirected !== 'boolean')\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.'\n    );\n}\n\n/* eslint no-nested-ternary: 0 */\n\n/**\n * Constants.\n */\nconst INSTANCE_ID = incrementalIdStartingFromRandomByte();\n\n/**\n * Enums.\n */\nconst TYPES = new Set(['directed', 'undirected', 'mixed']);\n\nconst EMITTER_PROPS = new Set([\n  'domain',\n  '_events',\n  '_eventsCount',\n  '_maxListeners'\n]);\n\nconst EDGE_ADD_METHODS = [\n  {\n    name: verb => `${verb}Edge`,\n    generateKey: true\n  },\n  {\n    name: verb => `${verb}DirectedEdge`,\n    generateKey: true,\n    type: 'directed'\n  },\n  {\n    name: verb => `${verb}UndirectedEdge`,\n    generateKey: true,\n    type: 'undirected'\n  },\n  {\n    name: verb => `${verb}EdgeWithKey`\n  },\n  {\n    name: verb => `${verb}DirectedEdgeWithKey`,\n    type: 'directed'\n  },\n  {\n    name: verb => `${verb}UndirectedEdgeWithKey`,\n    type: 'undirected'\n  }\n];\n\n/**\n * Default options.\n */\nconst DEFAULTS = {\n  allowSelfLoops: true,\n  multi: false,\n  type: 'mixed'\n};\n\n/**\n * Abstract functions used by the Graph class for various methods.\n */\n\n/**\n * Internal method used to add a node to the given graph\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {any}     node            - The node's key.\n * @param  {object}  [attributes]    - Optional attributes.\n * @return {NodeData}                - Created node data.\n */\nfunction addNode(graph, node, attributes) {\n  if (attributes && !isPlainObject(attributes))\n    throw new InvalidArgumentsGraphError(\n      `Graph.addNode: invalid attributes. Expecting an object but got \"${attributes}\"`\n    );\n\n  // String coercion\n  node = '' + node;\n  attributes = attributes || {};\n\n  if (graph._nodes.has(node))\n    throw new UsageGraphError(\n      `Graph.addNode: the \"${node}\" node already exist in the graph.`\n    );\n\n  const data = new graph.NodeDataClass(node, attributes);\n\n  // Adding the node to internal register\n  graph._nodes.set(node, data);\n\n  // Emitting\n  graph.emit('nodeAdded', {\n    key: node,\n    attributes\n  });\n\n  return data;\n}\n\n/**\n * Same as the above but without sanity checks because we call this in contexts\n * where necessary checks were already done.\n */\nfunction unsafeAddNode(graph, node, attributes) {\n  const data = new graph.NodeDataClass(node, attributes);\n\n  graph._nodes.set(node, data);\n\n  graph.emit('nodeAdded', {\n    key: node,\n    attributes\n  });\n\n  return data;\n}\n\n/**\n * Internal method used to add an arbitrary edge to the given graph.\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {string}  name            - Name of the child method for errors.\n * @param  {boolean} mustGenerateKey - Should the graph generate an id?\n * @param  {boolean} undirected      - Whether the edge is undirected.\n * @param  {any}     edge            - The edge's key.\n * @param  {any}     source          - The source node.\n * @param  {any}     target          - The target node.\n * @param  {object}  [attributes]    - Optional attributes.\n * @return {any}                     - The edge.\n *\n * @throws {Error} - Will throw if the graph is of the wrong type.\n * @throws {Error} - Will throw if the given attributes are not an object.\n * @throws {Error} - Will throw if source or target doesn't exist.\n * @throws {Error} - Will throw if the edge already exist.\n */\nfunction addEdge(\n  graph,\n  name,\n  mustGenerateKey,\n  undirected,\n  edge,\n  source,\n  target,\n  attributes\n) {\n  // Checking validity of operation\n  if (!undirected && graph.type === 'undirected')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`\n    );\n\n  if (undirected && graph.type === 'directed')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`\n    );\n\n  if (attributes && !isPlainObject(attributes))\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: invalid attributes. Expecting an object but got \"${attributes}\"`\n    );\n\n  // Coercion of source & target:\n  source = '' + source;\n  target = '' + target;\n  attributes = attributes || {};\n\n  if (!graph.allowSelfLoops && source === target)\n    throw new UsageGraphError(\n      `Graph.${name}: source & target are the same (\"${source}\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`\n    );\n\n  const sourceData = graph._nodes.get(source),\n    targetData = graph._nodes.get(target);\n\n  if (!sourceData)\n    throw new NotFoundGraphError(\n      `Graph.${name}: source node \"${source}\" not found.`\n    );\n\n  if (!targetData)\n    throw new NotFoundGraphError(\n      `Graph.${name}: target node \"${target}\" not found.`\n    );\n\n  // Must the graph generate an id for this edge?\n  const eventData = {\n    key: null,\n    undirected,\n    source,\n    target,\n    attributes\n  };\n\n  if (mustGenerateKey) {\n    // NOTE: in this case we can guarantee that the key does not already\n    // exist and is already correctly casted as a string\n    edge = graph._edgeKeyGenerator();\n  } else {\n    // Coercion of edge key\n    edge = '' + edge;\n\n    // Here, we have a key collision\n    if (graph._edges.has(edge))\n      throw new UsageGraphError(\n        `Graph.${name}: the \"${edge}\" edge already exists in the graph.`\n      );\n  }\n\n  // Here, we might have a source / target collision\n  if (\n    !graph.multi &&\n    (undirected\n      ? typeof sourceData.undirected[target] !== 'undefined'\n      : typeof sourceData.out[target] !== 'undefined')\n  ) {\n    throw new UsageGraphError(\n      `Graph.${name}: an edge linking \"${source}\" to \"${target}\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`\n    );\n  }\n\n  // Storing some data\n  const edgeData = new EdgeData(\n    undirected,\n    edge,\n    sourceData,\n    targetData,\n    attributes\n  );\n\n  // Adding the edge to the internal register\n  graph._edges.set(edge, edgeData);\n\n  // Incrementing node degree counters\n  const isSelfLoop = source === target;\n\n  if (undirected) {\n    sourceData.undirectedDegree++;\n    targetData.undirectedDegree++;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops++;\n      graph._undirectedSelfLoopCount++;\n    }\n  } else {\n    sourceData.outDegree++;\n    targetData.inDegree++;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops++;\n      graph._directedSelfLoopCount++;\n    }\n  }\n\n  // Updating relevant index\n  if (graph.multi) edgeData.attachMulti();\n  else edgeData.attach();\n\n  if (undirected) graph._undirectedSize++;\n  else graph._directedSize++;\n\n  // Emitting\n  eventData.key = edge;\n\n  graph.emit('edgeAdded', eventData);\n\n  return edge;\n}\n\n/**\n * Internal method used to add an arbitrary edge to the given graph.\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {string}  name            - Name of the child method for errors.\n * @param  {boolean} mustGenerateKey - Should the graph generate an id?\n * @param  {boolean} undirected      - Whether the edge is undirected.\n * @param  {any}     edge            - The edge's key.\n * @param  {any}     source          - The source node.\n * @param  {any}     target          - The target node.\n * @param  {object}  [attributes]    - Optional attributes.\n * @param  {boolean} [asUpdater]       - Are we updating or merging?\n * @return {any}                     - The edge.\n *\n * @throws {Error} - Will throw if the graph is of the wrong type.\n * @throws {Error} - Will throw if the given attributes are not an object.\n * @throws {Error} - Will throw if source or target doesn't exist.\n * @throws {Error} - Will throw if the edge already exist.\n */\nfunction mergeEdge(\n  graph,\n  name,\n  mustGenerateKey,\n  undirected,\n  edge,\n  source,\n  target,\n  attributes,\n  asUpdater\n) {\n  // Checking validity of operation\n  if (!undirected && graph.type === 'undirected')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`\n    );\n\n  if (undirected && graph.type === 'directed')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`\n    );\n\n  if (attributes) {\n    if (asUpdater) {\n      if (typeof attributes !== 'function')\n        throw new InvalidArgumentsGraphError(\n          `Graph.${name}: invalid updater function. Expecting a function but got \"${attributes}\"`\n        );\n    } else {\n      if (!isPlainObject(attributes))\n        throw new InvalidArgumentsGraphError(\n          `Graph.${name}: invalid attributes. Expecting an object but got \"${attributes}\"`\n        );\n    }\n  }\n\n  // Coercion of source & target:\n  source = '' + source;\n  target = '' + target;\n\n  let updater;\n\n  if (asUpdater) {\n    updater = attributes;\n    attributes = undefined;\n  }\n\n  if (!graph.allowSelfLoops && source === target)\n    throw new UsageGraphError(\n      `Graph.${name}: source & target are the same (\"${source}\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`\n    );\n\n  let sourceData = graph._nodes.get(source);\n  let targetData = graph._nodes.get(target);\n  let edgeData;\n\n  // Do we need to handle duplicate?\n  let alreadyExistingEdgeData;\n\n  if (!mustGenerateKey) {\n    edgeData = graph._edges.get(edge);\n\n    if (edgeData) {\n      // Here, we need to ensure, if the user gave a key, that source & target\n      // are consistent\n      if (edgeData.source.key !== source || edgeData.target.key !== target) {\n        // If source or target inconsistent\n        if (\n          !undirected ||\n          edgeData.source.key !== target ||\n          edgeData.target.key !== source\n        ) {\n          // If directed, or source/target aren't flipped\n          throw new UsageGraphError(\n            `Graph.${name}: inconsistency detected when attempting to merge the \"${edge}\" edge with \"${source}\" source & \"${target}\" target vs. (\"${edgeData.source.key}\", \"${edgeData.target.key}\").`\n          );\n        }\n      }\n\n      alreadyExistingEdgeData = edgeData;\n    }\n  }\n\n  // Here, we might have a source / target collision\n  if (!alreadyExistingEdgeData && !graph.multi && sourceData) {\n    alreadyExistingEdgeData = undirected\n      ? sourceData.undirected[target]\n      : sourceData.out[target];\n  }\n\n  // Handling duplicates\n  if (alreadyExistingEdgeData) {\n    const info = [alreadyExistingEdgeData.key, false, false, false];\n\n    // We can skip the attribute merging part if the user did not provide them\n    if (asUpdater ? !updater : !attributes) return info;\n\n    // Updating the attributes\n    if (asUpdater) {\n      const oldAttributes = alreadyExistingEdgeData.attributes;\n      alreadyExistingEdgeData.attributes = updater(oldAttributes);\n\n      graph.emit('edgeAttributesUpdated', {\n        type: 'replace',\n        key: alreadyExistingEdgeData.key,\n        attributes: alreadyExistingEdgeData.attributes\n      });\n    }\n\n    // Merging the attributes\n    else {\n      assign(alreadyExistingEdgeData.attributes, attributes);\n\n      graph.emit('edgeAttributesUpdated', {\n        type: 'merge',\n        key: alreadyExistingEdgeData.key,\n        attributes: alreadyExistingEdgeData.attributes,\n        data: attributes\n      });\n    }\n\n    return info;\n  }\n\n  attributes = attributes || {};\n\n  if (asUpdater && updater) attributes = updater(attributes);\n\n  // Must the graph generate an id for this edge?\n  const eventData = {\n    key: null,\n    undirected,\n    source,\n    target,\n    attributes\n  };\n\n  if (mustGenerateKey) {\n    // NOTE: in this case we can guarantee that the key does not already\n    // exist and is already correctly casted as a string\n    edge = graph._edgeKeyGenerator();\n  } else {\n    // Coercion of edge key\n    edge = '' + edge;\n\n    // Here, we have a key collision\n    if (graph._edges.has(edge))\n      throw new UsageGraphError(\n        `Graph.${name}: the \"${edge}\" edge already exists in the graph.`\n      );\n  }\n\n  let sourceWasAdded = false;\n  let targetWasAdded = false;\n\n  if (!sourceData) {\n    sourceData = unsafeAddNode(graph, source, {});\n    sourceWasAdded = true;\n\n    if (source === target) {\n      targetData = sourceData;\n      targetWasAdded = true;\n    }\n  }\n  if (!targetData) {\n    targetData = unsafeAddNode(graph, target, {});\n    targetWasAdded = true;\n  }\n\n  // Storing some data\n  edgeData = new EdgeData(undirected, edge, sourceData, targetData, attributes);\n\n  // Adding the edge to the internal register\n  graph._edges.set(edge, edgeData);\n\n  // Incrementing node degree counters\n  const isSelfLoop = source === target;\n\n  if (undirected) {\n    sourceData.undirectedDegree++;\n    targetData.undirectedDegree++;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops++;\n      graph._undirectedSelfLoopCount++;\n    }\n  } else {\n    sourceData.outDegree++;\n    targetData.inDegree++;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops++;\n      graph._directedSelfLoopCount++;\n    }\n  }\n\n  // Updating relevant index\n  if (graph.multi) edgeData.attachMulti();\n  else edgeData.attach();\n\n  if (undirected) graph._undirectedSize++;\n  else graph._directedSize++;\n\n  // Emitting\n  eventData.key = edge;\n\n  graph.emit('edgeAdded', eventData);\n\n  return [edge, true, sourceWasAdded, targetWasAdded];\n}\n\n/**\n * Internal method used to drop an edge.\n *\n * @param  {Graph}    graph    - Target graph.\n * @param  {EdgeData} edgeData - Data of the edge to drop.\n */\nfunction dropEdgeFromData(graph, edgeData) {\n  // Dropping the edge from the register\n  graph._edges.delete(edgeData.key);\n\n  // Updating related degrees\n  const {source: sourceData, target: targetData, attributes} = edgeData;\n\n  const undirected = edgeData.undirected;\n\n  const isSelfLoop = sourceData === targetData;\n\n  if (undirected) {\n    sourceData.undirectedDegree--;\n    targetData.undirectedDegree--;\n\n    if (isSelfLoop) {\n      sourceData.undirectedLoops--;\n      graph._undirectedSelfLoopCount--;\n    }\n  } else {\n    sourceData.outDegree--;\n    targetData.inDegree--;\n\n    if (isSelfLoop) {\n      sourceData.directedLoops--;\n      graph._directedSelfLoopCount--;\n    }\n  }\n\n  // Clearing index\n  if (graph.multi) edgeData.detachMulti();\n  else edgeData.detach();\n\n  if (undirected) graph._undirectedSize--;\n  else graph._directedSize--;\n\n  // Emitting\n  graph.emit('edgeDropped', {\n    key: edgeData.key,\n    attributes,\n    source: sourceData.key,\n    target: targetData.key,\n    undirected\n  });\n}\n\n/**\n * Graph class\n *\n * @constructor\n * @param  {object}  [options] - Options:\n * @param  {boolean}   [allowSelfLoops] - Allow self loops?\n * @param  {string}    [type]           - Type of the graph.\n * @param  {boolean}   [map]            - Allow references as keys?\n * @param  {boolean}   [multi]          - Allow parallel edges?\n *\n * @throws {Error} - Will throw if the arguments are not valid.\n */\nclass Graph extends EventEmitter {\n  constructor(options) {\n    super();\n\n    //-- Solving options\n    options = assign({}, DEFAULTS, options);\n\n    // Enforcing options validity\n    if (typeof options.multi !== 'boolean')\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"${options.multi}\".`\n      );\n\n    if (!TYPES.has(options.type))\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'type' option. Should be one of \"mixed\", \"directed\" or \"undirected\" but got \"${options.type}\".`\n      );\n\n    if (typeof options.allowSelfLoops !== 'boolean')\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"${options.allowSelfLoops}\".`\n      );\n\n    //-- Private properties\n\n    // Utilities\n    const NodeDataClass =\n      options.type === 'mixed'\n        ? MixedNodeData\n        : options.type === 'directed'\n        ? DirectedNodeData\n        : UndirectedNodeData;\n\n    privateProperty(this, 'NodeDataClass', NodeDataClass);\n\n    // Internal edge key generator\n\n    // NOTE: this internal generator produce keys that are strings\n    // composed of a weird prefix, an incremental instance id starting from\n    // a random byte and finally an internal instance incremental id.\n    // All this to avoid intra-frame and cross-frame adversarial inputs\n    // that can force a single #.addEdge call to degenerate into a O(n)\n    // available key search loop.\n\n    // It also ensures that automatically generated edge keys are unlikely\n    // to produce collisions with arbitrary keys given by users.\n    const instancePrefix = 'geid_' + INSTANCE_ID() + '_';\n    let edgeId = 0;\n\n    const edgeKeyGenerator = () => {\n      let availableEdgeKey;\n\n      do {\n        availableEdgeKey = instancePrefix + edgeId++;\n      } while (this._edges.has(availableEdgeKey));\n\n      return availableEdgeKey;\n    };\n\n    // Indexes\n    privateProperty(this, '_attributes', {});\n    privateProperty(this, '_nodes', new Map());\n    privateProperty(this, '_edges', new Map());\n    privateProperty(this, '_directedSize', 0);\n    privateProperty(this, '_undirectedSize', 0);\n    privateProperty(this, '_directedSelfLoopCount', 0);\n    privateProperty(this, '_undirectedSelfLoopCount', 0);\n    privateProperty(this, '_edgeKeyGenerator', edgeKeyGenerator);\n\n    // Options\n    privateProperty(this, '_options', options);\n\n    // Emitter properties\n    EMITTER_PROPS.forEach(prop => privateProperty(this, prop, this[prop]));\n\n    //-- Properties readers\n    readOnlyProperty(this, 'order', () => this._nodes.size);\n    readOnlyProperty(this, 'size', () => this._edges.size);\n    readOnlyProperty(this, 'directedSize', () => this._directedSize);\n    readOnlyProperty(this, 'undirectedSize', () => this._undirectedSize);\n    readOnlyProperty(\n      this,\n      'selfLoopCount',\n      () => this._directedSelfLoopCount + this._undirectedSelfLoopCount\n    );\n    readOnlyProperty(\n      this,\n      'directedSelfLoopCount',\n      () => this._directedSelfLoopCount\n    );\n    readOnlyProperty(\n      this,\n      'undirectedSelfLoopCount',\n      () => this._undirectedSelfLoopCount\n    );\n    readOnlyProperty(this, 'multi', this._options.multi);\n    readOnlyProperty(this, 'type', this._options.type);\n    readOnlyProperty(this, 'allowSelfLoops', this._options.allowSelfLoops);\n    readOnlyProperty(this, 'implementation', () => 'graphology');\n  }\n\n  _resetInstanceCounters() {\n    this._directedSize = 0;\n    this._undirectedSize = 0;\n    this._directedSelfLoopCount = 0;\n    this._undirectedSelfLoopCount = 0;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Read\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning whether the given node is found in the graph.\n   *\n   * @param  {any}     node - The node.\n   * @return {boolean}\n   */\n  hasNode(node) {\n    return this._nodes.has('' + node);\n  }\n\n  /**\n   * Method returning whether the given directed edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasDirectedEdge(source, target) {\n    // Early termination\n    if (this.type === 'undirected') return false;\n\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      const edgeData = this._edges.get(edge);\n\n      return !!edgeData && !edgeData.undirected;\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return nodeData.out.hasOwnProperty(target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning whether the given undirected edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasUndirectedEdge(source, target) {\n    // Early termination\n    if (this.type === 'directed') return false;\n\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      const edgeData = this._edges.get(edge);\n\n      return !!edgeData && edgeData.undirected;\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return nodeData.undirected.hasOwnProperty(target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning whether the given edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasEdge(source, target) {\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      return this._edges.has(edge);\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      return (\n        (typeof nodeData.out !== 'undefined' &&\n          nodeData.out.hasOwnProperty(target)) ||\n        (typeof nodeData.undirected !== 'undefined' &&\n          nodeData.undirected.hasOwnProperty(target))\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning the edge matching source & target in a directed fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  directedEdge(source, target) {\n    if (this.type === 'undirected') return;\n\n    source = '' + source;\n    target = '' + target;\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.'\n      );\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.directedEdge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.directedEdge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData = (sourceData.out && sourceData.out[target]) || undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning the edge matching source & target in a undirected fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  undirectedEdge(source, target) {\n    if (this.type === 'directed') return;\n\n    source = '' + source;\n    target = '' + target;\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.'\n      );\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedEdge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.undirectedEdge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData =\n      (sourceData.undirected && sourceData.undirected[target]) || undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning the edge matching source & target in a mixed fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  edge(source, target) {\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.'\n      );\n\n    source = '' + source;\n    target = '' + target;\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.edge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.edge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData =\n      (sourceData.out && sourceData.out[target]) ||\n      (sourceData.undirected && sourceData.undirected[target]) ||\n      undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning whether two nodes are directed neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areDirectedNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areDirectedNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.in || neighbor in nodeData.out;\n  }\n\n  /**\n   * Method returning whether two nodes are out neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areOutNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areOutNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.out;\n  }\n\n  /**\n   * Method returning whether two nodes are in neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areInNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areInNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.in;\n  }\n\n  /**\n   * Method returning whether two nodes are undirected neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areUndirectedNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areUndirectedNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return false;\n\n    return neighbor in nodeData.undirected;\n  }\n\n  /**\n   * Method returning whether two nodes are neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.in || neighbor in nodeData.out) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether two nodes are inbound neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areInboundNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areInboundNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.in) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether two nodes are outbound neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areOutboundNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areOutboundNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.out) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning the given node's in degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree;\n  }\n\n  /**\n   * Method returning the given node's out degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.outDegree;\n  }\n\n  /**\n   * Method returning the given node's directed degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  directedDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.directedDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree + nodeData.outDegree;\n  }\n\n  /**\n   * Method returning the given node's undirected degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  undirectedDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return 0;\n\n    return nodeData.undirectedDegree;\n  }\n\n  /**\n   * Method returning the given node's inbound degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's inbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inboundDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inboundDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's outbound degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's outbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outboundDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outboundDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.outDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's directed degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  degree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.degree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree + nodeData.outDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's in degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree - nodeData.directedLoops;\n  }\n\n  /**\n   * Method returning the given node's out degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.outDegree - nodeData.directedLoops;\n  }\n\n  /**\n   * Method returning the given node's directed degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  directedDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.directedDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree + nodeData.outDegree - nodeData.directedLoops * 2;\n  }\n\n  /**\n   * Method returning the given node's undirected degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  undirectedDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return 0;\n\n    return nodeData.undirectedDegree - nodeData.undirectedLoops * 2;\n  }\n\n  /**\n   * Method returning the given node's inbound degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's inbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inboundDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inboundDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree;\n      loops += nodeData.directedLoops;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given node's outbound degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's outbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outboundDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outboundDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.outDegree;\n      loops += nodeData.directedLoops;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given node's directed degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  degreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.degreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n      loops += nodeData.undirectedLoops * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree + nodeData.outDegree;\n      loops += nodeData.directedLoops * 2;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given edge's source.\n   *\n   * @param  {any} edge - The edge's key.\n   * @return {any}      - The edge's source.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  source(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.source: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source.key;\n  }\n\n  /**\n   * Method returning the given edge's target.\n   *\n   * @param  {any} edge - The edge's key.\n   * @return {any}      - The edge's target.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  target(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.target: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.target.key;\n  }\n\n  /**\n   * Method returning the given edge's extremities.\n   *\n   * @param  {any}   edge - The edge's key.\n   * @return {array}      - The edge's extremities.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  extremities(edge) {\n    edge = '' + edge;\n\n    const edgeData = this._edges.get(edge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.extremities: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return [edgeData.source.key, edgeData.target.key];\n  }\n\n  /**\n   * Given a node & an edge, returns the other extremity of the edge.\n   *\n   * @param  {any}   node - The node's key.\n   * @param  {any}   edge - The edge's key.\n   * @return {any}        - The related node.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph or if the\n   *                   edge & node are not related.\n   */\n  opposite(node, edge) {\n    node = '' + node;\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.opposite: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    const source = data.source.key;\n    const target = data.target.key;\n\n    if (node === source) return target;\n    if (node === target) return source;\n\n    throw new NotFoundGraphError(\n      `Graph.opposite: the \"${node}\" node is not attached to the \"${edge}\" edge (${source}, ${target}).`\n    );\n  }\n\n  /**\n   * Returns whether the given edge has the given node as extremity.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @param  {any}     node - The node's key.\n   * @return {boolean}      - The related node.\n   *\n   * @throws {Error} - Will throw if either the node or the edge isn't in the graph.\n   */\n  hasExtremity(edge, node) {\n    edge = '' + edge;\n    node = '' + node;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.hasExtremity: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source.key === node || data.target.key === node;\n  }\n\n  /**\n   * Method returning whether the given edge is undirected.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isUndirected(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isUndirected: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.undirected;\n  }\n\n  /**\n   * Method returning whether the given edge is directed.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isDirected(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isDirected: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return !data.undirected;\n  }\n\n  /**\n   * Method returning whether the given edge is a self loop.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isSelfLoop(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isSelfLoop: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source === data.target;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Mutation\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used to add a node to the graph.\n   *\n   * @param  {any}    node         - The node.\n   * @param  {object} [attributes] - Optional attributes.\n   * @return {any}                 - The node.\n   *\n   * @throws {Error} - Will throw if the given node already exist.\n   * @throws {Error} - Will throw if the given attributes are not an object.\n   */\n  addNode(node, attributes) {\n    const nodeData = addNode(this, node, attributes);\n\n    return nodeData.key;\n  }\n\n  /**\n   * Method used to merge a node into the graph.\n   *\n   * @param  {any}    node         - The node.\n   * @param  {object} [attributes] - Optional attributes.\n   * @return {any}                 - The node.\n   */\n  mergeNode(node, attributes) {\n    if (attributes && !isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.mergeNode: invalid attributes. Expecting an object but got \"${attributes}\"`\n      );\n\n    // String coercion\n    node = '' + node;\n    attributes = attributes || {};\n\n    // If the node already exists, we merge the attributes\n    let data = this._nodes.get(node);\n\n    if (data) {\n      if (attributes) {\n        assign(data.attributes, attributes);\n\n        this.emit('nodeAttributesUpdated', {\n          type: 'merge',\n          key: node,\n          attributes: data.attributes,\n          data: attributes\n        });\n      }\n      return [node, false];\n    }\n\n    data = new this.NodeDataClass(node, attributes);\n\n    // Adding the node to internal register\n    this._nodes.set(node, data);\n\n    // Emitting\n    this.emit('nodeAdded', {\n      key: node,\n      attributes\n    });\n\n    return [node, true];\n  }\n\n  /**\n   * Method used to add a node if it does not exist in the graph or else to\n   * update its attributes using a function.\n   *\n   * @param  {any}      node      - The node.\n   * @param  {function} [updater] - Optional updater function.\n   * @return {any}                - The node.\n   */\n  updateNode(node, updater) {\n    if (updater && typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.updateNode: invalid updater function. Expecting a function but got \"${updater}\"`\n      );\n\n    // String coercion\n    node = '' + node;\n\n    // If the node already exists, we update the attributes\n    let data = this._nodes.get(node);\n\n    if (data) {\n      if (updater) {\n        const oldAttributes = data.attributes;\n        data.attributes = updater(oldAttributes);\n\n        this.emit('nodeAttributesUpdated', {\n          type: 'replace',\n          key: node,\n          attributes: data.attributes\n        });\n      }\n      return [node, false];\n    }\n\n    const attributes = updater ? updater({}) : {};\n\n    data = new this.NodeDataClass(node, attributes);\n\n    // Adding the node to internal register\n    this._nodes.set(node, data);\n\n    // Emitting\n    this.emit('nodeAdded', {\n      key: node,\n      attributes\n    });\n\n    return [node, true];\n  }\n\n  /**\n   * Method used to drop a single node & all its attached edges from the graph.\n   *\n   * @param  {any}    node - The node.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the node doesn't exist.\n   */\n  dropNode(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.dropNode: could not find the \"${node}\" node in the graph.`\n      );\n\n    let edgeData;\n\n    // Removing attached edges\n    // NOTE: we could be faster here, but this is such a pain to maintain\n    if (this.type !== 'undirected') {\n      for (const neighbor in nodeData.out) {\n        edgeData = nodeData.out[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n\n      for (const neighbor in nodeData.in) {\n        edgeData = nodeData.in[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (this.type !== 'directed') {\n      for (const neighbor in nodeData.undirected) {\n        edgeData = nodeData.undirected[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    // Dropping the node from the register\n    this._nodes.delete(node);\n\n    // Emitting\n    this.emit('nodeDropped', {\n      key: node,\n      attributes: nodeData.attributes\n    });\n  }\n\n  /**\n   * Method used to drop a single edge from the graph.\n   *\n   * Arity 1:\n   * @param  {any}    edge - The edge.\n   *\n   * Arity 2:\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropEdge(edge) {\n    let edgeData;\n\n    if (arguments.length > 1) {\n      const source = '' + arguments[0];\n      const target = '' + arguments[1];\n\n      edgeData = getMatchingEdge(this, source, target, this.type);\n\n      if (!edgeData)\n        throw new NotFoundGraphError(\n          `Graph.dropEdge: could not find the \"${source}\" -> \"${target}\" edge in the graph.`\n        );\n    } else {\n      edge = '' + edge;\n\n      edgeData = this._edges.get(edge);\n\n      if (!edgeData)\n        throw new NotFoundGraphError(\n          `Graph.dropEdge: could not find the \"${edge}\" edge in the graph.`\n        );\n    }\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to drop a single directed edge from the graph.\n   *\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropDirectedEdge(source, target) {\n    if (arguments.length < 2)\n      throw new UsageGraphError(\n        'Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.'\n      );\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.'\n      );\n\n    source = '' + source;\n    target = '' + target;\n\n    const edgeData = getMatchingEdge(this, source, target, 'directed');\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.dropDirectedEdge: could not find a \"${source}\" -> \"${target}\" edge in the graph.`\n      );\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to drop a single undirected edge from the graph.\n   *\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropUndirectedEdge(source, target) {\n    if (arguments.length < 2)\n      throw new UsageGraphError(\n        'Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.'\n      );\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.'\n      );\n\n    const edgeData = getMatchingEdge(this, source, target, 'undirected');\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.dropUndirectedEdge: could not find a \"${source}\" -> \"${target}\" edge in the graph.`\n      );\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to remove every edge & every node from the graph.\n   *\n   * @return {Graph}\n   */\n  clear() {\n    // Clearing edges\n    this._edges.clear();\n\n    // Clearing nodes\n    this._nodes.clear();\n\n    // Reset counters\n    this._resetInstanceCounters();\n\n    // Emitting\n    this.emit('cleared');\n  }\n\n  /**\n   * Method used to remove every edge from the graph.\n   *\n   * @return {Graph}\n   */\n  clearEdges() {\n    // Clearing structure index\n    const iterator = this._nodes.values();\n\n    let step;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      step.value.clear();\n    }\n\n    // Clearing edges\n    this._edges.clear();\n\n    // Reset counters\n    this._resetInstanceCounters();\n\n    // Emitting\n    this.emit('edgesCleared');\n  }\n\n  /**---------------------------------------------------------------------------\n   * Attributes-related methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning the desired graph's attribute.\n   *\n   * @param  {string} name - Name of the attribute.\n   * @return {any}\n   */\n  getAttribute(name) {\n    return this._attributes[name];\n  }\n\n  /**\n   * Method returning the graph's attributes.\n   *\n   * @return {object}\n   */\n  getAttributes() {\n    return this._attributes;\n  }\n\n  /**\n   * Method returning whether the graph has the desired attribute.\n   *\n   * @param  {string}  name - Name of the attribute.\n   * @return {boolean}\n   */\n  hasAttribute(name) {\n    return this._attributes.hasOwnProperty(name);\n  }\n\n  /**\n   * Method setting a value for the desired graph's attribute.\n   *\n   * @param  {string}  name  - Name of the attribute.\n   * @param  {any}     value - Value for the attribute.\n   * @return {Graph}\n   */\n  setAttribute(name, value) {\n    this._attributes[name] = value;\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'set',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method using a function to update the desired graph's attribute's value.\n   *\n   * @param  {string}   name    - Name of the attribute.\n   * @param  {function} updater - Function use to update the attribute's value.\n   * @return {Graph}\n   */\n  updateAttribute(name, updater) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateAttribute: updater should be a function.'\n      );\n\n    const value = this._attributes[name];\n\n    this._attributes[name] = updater(value);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'set',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method removing the desired graph's attribute.\n   *\n   * @param  {string} name  - Name of the attribute.\n   * @return {Graph}\n   */\n  removeAttribute(name) {\n    delete this._attributes[name];\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'remove',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method replacing the graph's attributes.\n   *\n   * @param  {object} attributes - New attributes.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given attributes are not a plain object.\n   */\n  replaceAttributes(attributes) {\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        'Graph.replaceAttributes: provided attributes are not a plain object.'\n      );\n\n    this._attributes = attributes;\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'replace',\n      attributes: this._attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method merging the graph's attributes.\n   *\n   * @param  {object} attributes - Attributes to merge.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given attributes are not a plain object.\n   */\n  mergeAttributes(attributes) {\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        'Graph.mergeAttributes: provided attributes are not a plain object.'\n      );\n\n    assign(this._attributes, attributes);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'merge',\n      attributes: this._attributes,\n      data: attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method updating the graph's attributes.\n   *\n   * @param  {function} updater - Function used to update the attributes.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given updater is not a function.\n   */\n  updateAttributes(updater) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateAttributes: provided updater is not a function.'\n      );\n\n    this._attributes = updater(this._attributes);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'update',\n      attributes: this._attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method used to update each node's attributes using the given function.\n   *\n   * @param {function}  updater - Updater function to use.\n   * @param {object}    [hints] - Optional hints.\n   */\n  updateEachNodeAttributes(updater, hints) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachNodeAttributes: expecting an updater function.'\n      );\n\n    if (hints && !validateHints(hints))\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      nodeData.attributes = updater(nodeData.key, nodeData.attributes);\n    }\n\n    this.emit('eachNodeAttributesUpdated', {\n      hints: hints ? hints : null\n    });\n  }\n\n  /**\n   * Method used to update each edge's attributes using the given function.\n   *\n   * @param {function}  updater - Updater function to use.\n   * @param {object}    [hints] - Optional hints.\n   */\n  updateEachEdgeAttributes(updater, hints) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachEdgeAttributes: expecting an updater function.'\n      );\n\n    if (hints && !validateHints(hints))\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}'\n      );\n\n    const iterator = this._edges.values();\n\n    let step, edgeData, sourceData, targetData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      edgeData = step.value;\n      sourceData = edgeData.source;\n      targetData = edgeData.target;\n\n      edgeData.attributes = updater(\n        edgeData.key,\n        edgeData.attributes,\n        sourceData.key,\n        targetData.key,\n        sourceData.attributes,\n        targetData.attributes,\n        edgeData.undirected\n      );\n    }\n\n    this.emit('eachEdgeAttributesUpdated', {\n      hints: hints ? hints : null\n    });\n  }\n\n  /**---------------------------------------------------------------------------\n   * Iteration-related methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method iterating over the graph's adjacency using the given callback.\n   *\n   * @param  {function}  callback - Callback to use.\n   */\n  forEachAdjacencyEntry(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAdjacencyEntry: expecting a callback.'\n      );\n\n    forEachAdjacency(false, false, false, this, callback);\n  }\n  forEachAdjacencyEntryWithOrphans(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.'\n      );\n\n    forEachAdjacency(false, false, true, this, callback);\n  }\n\n  /**\n   * Method iterating over the graph's assymetric adjacency using the given callback.\n   *\n   * @param  {function}  callback - Callback to use.\n   */\n  forEachAssymetricAdjacencyEntry(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAssymetricAdjacencyEntry: expecting a callback.'\n      );\n\n    forEachAdjacency(false, true, false, this, callback);\n  }\n  forEachAssymetricAdjacencyEntryWithOrphans(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.'\n      );\n\n    forEachAdjacency(false, true, true, this, callback);\n  }\n\n  /**\n   * Method returning the list of the graph's nodes.\n   *\n   * @return {array} - The nodes.\n   */\n  nodes() {\n    if (typeof Array.from === 'function') return Array.from(this._nodes.keys());\n\n    return take(this._nodes.keys(), this._nodes.size);\n  }\n\n  /**\n   * Method iterating over the graph's nodes using the given callback.\n   *\n   * @param  {function}  callback - Callback (key, attributes, index).\n   */\n  forEachNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      callback(nodeData.key, nodeData.attributes);\n    }\n  }\n\n  /**\n   * Method iterating attempting to find a node matching the given predicate\n   * function.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  findNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.findNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes)) return nodeData.key;\n    }\n\n    return;\n  }\n\n  /**\n   * Method mapping nodes.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  mapNodes(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.mapNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    const result = new Array(this.order);\n    let i = 0;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      result[i++] = callback(nodeData.key, nodeData.attributes);\n    }\n\n    return result;\n  }\n\n  /**\n   * Method returning whether some node verify the given predicate.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  someNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.someNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes)) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether all node verify the given predicate.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  everyNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.everyNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (!callback(nodeData.key, nodeData.attributes)) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Method filtering nodes.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  filterNodes(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.filterNodes: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    const result = [];\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes))\n        result.push(nodeData.key);\n    }\n\n    return result;\n  }\n\n  /**\n   * Method reducing nodes.\n   *\n   * @param  {function}  callback - Callback (accumulator, key, attributes).\n   */\n  reduceNodes(callback, initialValue) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.reduceNodes: expecting a callback.'\n      );\n\n    if (arguments.length < 2)\n      throw new InvalidArgumentsGraphError(\n        'Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.'\n      );\n\n    let accumulator = initialValue;\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      accumulator = callback(accumulator, nodeData.key, nodeData.attributes);\n    }\n\n    return accumulator;\n  }\n\n  /**\n   * Method returning an iterator over the graph's node entries.\n   *\n   * @return {Iterator}\n   */\n  nodeEntries() {\n    const iterator = this._nodes.values();\n\n    return new Iterator(() => {\n      const step = iterator.next();\n\n      if (step.done) return step;\n\n      const data = step.value;\n\n      return {\n        value: {node: data.key, attributes: data.attributes},\n        done: false\n      };\n    });\n  }\n\n  /**---------------------------------------------------------------------------\n   * Serialization\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used to export the whole graph.\n   *\n   * @return {object} - The serialized graph.\n   */\n  export() {\n    const nodes = new Array(this._nodes.size);\n\n    let i = 0;\n\n    this._nodes.forEach((data, key) => {\n      nodes[i++] = serializeNode(key, data);\n    });\n\n    const edges = new Array(this._edges.size);\n\n    i = 0;\n\n    this._edges.forEach((data, key) => {\n      edges[i++] = serializeEdge(this.type, key, data);\n    });\n\n    return {\n      options: {\n        type: this.type,\n        multi: this.multi,\n        allowSelfLoops: this.allowSelfLoops\n      },\n      attributes: this.getAttributes(),\n      nodes,\n      edges\n    };\n  }\n\n  /**\n   * Method used to import a serialized graph.\n   *\n   * @param  {object|Graph} data  - The serialized graph.\n   * @param  {boolean}      merge - Whether to merge data.\n   * @return {Graph}              - Returns itself for chaining.\n   */\n  import(data, merge = false) {\n    // Importing a Graph instance directly\n    if (data instanceof Graph) {\n      // Nodes\n      data.forEachNode((n, a) => {\n        if (merge) this.mergeNode(n, a);\n        else this.addNode(n, a);\n      });\n\n      // Edges\n      data.forEachEdge((e, a, s, t, _sa, _ta, u) => {\n        if (merge) {\n          if (u) this.mergeUndirectedEdgeWithKey(e, s, t, a);\n          else this.mergeDirectedEdgeWithKey(e, s, t, a);\n        } else {\n          if (u) this.addUndirectedEdgeWithKey(e, s, t, a);\n          else this.addDirectedEdgeWithKey(e, s, t, a);\n        }\n      });\n\n      return this;\n    }\n\n    // Importing a serialized graph\n    if (!isPlainObject(data))\n      throw new InvalidArgumentsGraphError(\n        'Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.'\n      );\n\n    if (data.attributes) {\n      if (!isPlainObject(data.attributes))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid attributes. Expecting a plain object.'\n        );\n\n      if (merge) this.mergeAttributes(data.attributes);\n      else this.replaceAttributes(data.attributes);\n    }\n\n    let i, l, list, node, edge;\n\n    if (data.nodes) {\n      list = data.nodes;\n\n      if (!Array.isArray(list))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid nodes. Expecting an array.'\n        );\n\n      for (i = 0, l = list.length; i < l; i++) {\n        node = list[i];\n\n        // Validating\n        validateSerializedNode(node);\n\n        // Adding the node\n        const {key, attributes} = node;\n\n        if (merge) this.mergeNode(key, attributes);\n        else this.addNode(key, attributes);\n      }\n    }\n\n    if (data.edges) {\n      let undirectedByDefault = false;\n\n      if (this.type === 'undirected') {\n        undirectedByDefault = true;\n      }\n\n      list = data.edges;\n\n      if (!Array.isArray(list))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid edges. Expecting an array.'\n        );\n\n      for (i = 0, l = list.length; i < l; i++) {\n        edge = list[i];\n\n        // Validating\n        validateSerializedEdge(edge);\n\n        // Adding the edge\n        const {\n          source,\n          target,\n          attributes,\n          undirected = undirectedByDefault\n        } = edge;\n\n        let method;\n\n        if ('key' in edge) {\n          method = merge\n            ? undirected\n              ? this.mergeUndirectedEdgeWithKey\n              : this.mergeDirectedEdgeWithKey\n            : undirected\n            ? this.addUndirectedEdgeWithKey\n            : this.addDirectedEdgeWithKey;\n\n          method.call(this, edge.key, source, target, attributes);\n        } else {\n          method = merge\n            ? undirected\n              ? this.mergeUndirectedEdge\n              : this.mergeDirectedEdge\n            : undirected\n            ? this.addUndirectedEdge\n            : this.addDirectedEdge;\n\n          method.call(this, source, target, attributes);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Utils\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning a null copy of the graph, i.e. a graph without nodes\n   * & edges but with the exact same options.\n   *\n   * @param  {object} options - Options to merge with the current ones.\n   * @return {Graph}          - The null copy.\n   */\n  nullCopy(options) {\n    const graph = new Graph(assign({}, this._options, options));\n    graph.replaceAttributes(assign({}, this.getAttributes()));\n    return graph;\n  }\n\n  /**\n   * Method returning an empty copy of the graph, i.e. a graph without edges but\n   * with the exact same options.\n   *\n   * @param  {object} options - Options to merge with the current ones.\n   * @return {Graph}          - The empty copy.\n   */\n  emptyCopy(options) {\n    const graph = this.nullCopy(options);\n\n    this._nodes.forEach((nodeData, key) => {\n      const attributes = assign({}, nodeData.attributes);\n\n      // NOTE: no need to emit events since user cannot access the instance yet\n      nodeData = new graph.NodeDataClass(key, attributes);\n      graph._nodes.set(key, nodeData);\n    });\n\n    return graph;\n  }\n\n  /**\n   * Method returning an exact copy of the graph.\n   *\n   * @param  {object} options - Upgrade options.\n   * @return {Graph}          - The copy.\n   */\n  copy(options) {\n    options = options || {};\n\n    if (\n      typeof options.type === 'string' &&\n      options.type !== this.type &&\n      options.type !== 'mixed'\n    )\n      throw new UsageGraphError(\n        `Graph.copy: cannot create an incompatible copy from \"${this.type}\" type to \"${options.type}\" because this would mean losing information about the current graph.`\n      );\n\n    if (\n      typeof options.multi === 'boolean' &&\n      options.multi !== this.multi &&\n      options.multi !== true\n    )\n      throw new UsageGraphError(\n        'Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.'\n      );\n\n    if (\n      typeof options.allowSelfLoops === 'boolean' &&\n      options.allowSelfLoops !== this.allowSelfLoops &&\n      options.allowSelfLoops !== true\n    )\n      throw new UsageGraphError(\n        'Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.'\n      );\n\n    const graph = this.emptyCopy(options);\n\n    const iterator = this._edges.values();\n\n    let step, edgeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      edgeData = step.value;\n\n      // NOTE: no need to emit events since user cannot access the instance yet\n      addEdge(\n        graph,\n        'copy',\n        false,\n        edgeData.undirected,\n        edgeData.key,\n        edgeData.source.key,\n        edgeData.target.key,\n        assign({}, edgeData.attributes)\n      );\n    }\n\n    return graph;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Known methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used by JavaScript to perform JSON serialization.\n   *\n   * @return {object} - The serialized graph.\n   */\n  toJSON() {\n    return this.export();\n  }\n\n  /**\n   * Method returning [object Graph].\n   */\n  toString() {\n    return '[object Graph]';\n  }\n\n  /**\n   * Method used internally by node's console to display a custom object.\n   *\n   * @return {object} - Formatted object representation of the graph.\n   */\n  inspect() {\n    const nodes = {};\n    this._nodes.forEach((data, key) => {\n      nodes[key] = data.attributes;\n    });\n\n    const edges = {},\n      multiIndex = {};\n\n    this._edges.forEach((data, key) => {\n      const direction = data.undirected ? '--' : '->';\n\n      let label = '';\n\n      let source = data.source.key;\n      let target = data.target.key;\n      let tmp;\n\n      if (data.undirected && source > target) {\n        tmp = source;\n        source = target;\n        target = tmp;\n      }\n\n      const desc = `(${source})${direction}(${target})`;\n\n      if (!key.startsWith('geid_')) {\n        label += `[${key}]: `;\n      } else if (this.multi) {\n        if (typeof multiIndex[desc] === 'undefined') {\n          multiIndex[desc] = 0;\n        } else {\n          multiIndex[desc]++;\n        }\n\n        label += `${multiIndex[desc]}. `;\n      }\n\n      label += desc;\n\n      edges[label] = data.attributes;\n    });\n\n    const dummy = {};\n\n    for (const k in this) {\n      if (\n        this.hasOwnProperty(k) &&\n        !EMITTER_PROPS.has(k) &&\n        typeof this[k] !== 'function' &&\n        typeof k !== 'symbol'\n      )\n        dummy[k] = this[k];\n    }\n\n    dummy.attributes = this._attributes;\n    dummy.nodes = nodes;\n    dummy.edges = edges;\n\n    privateProperty(dummy, 'constructor', this.constructor);\n\n    return dummy;\n  }\n}\n\n/**\n * Attaching methods to the prototype.\n *\n * Here, we are attaching a wide variety of methods to the Graph class'\n * prototype when those are very numerous and when their creation is\n * abstracted.\n */\n\n/**\n * Attaching custom inspect method for node >= 10.\n */\nif (typeof Symbol !== 'undefined')\n  Graph.prototype[Symbol.for('nodejs.util.inspect.custom')] =\n    Graph.prototype.inspect;\n\n/**\n * Related to edge addition.\n */\nEDGE_ADD_METHODS.forEach(method => {\n  ['add', 'merge', 'update'].forEach(verb => {\n    const name = method.name(verb);\n    const fn = verb === 'add' ? addEdge : mergeEdge;\n\n    if (method.generateKey) {\n      Graph.prototype[name] = function (source, target, attributes) {\n        return fn(\n          this,\n          name,\n          true,\n          (method.type || this.type) === 'undirected',\n          null,\n          source,\n          target,\n          attributes,\n          verb === 'update'\n        );\n      };\n    } else {\n      Graph.prototype[name] = function (edge, source, target, attributes) {\n        return fn(\n          this,\n          name,\n          false,\n          (method.type || this.type) === 'undirected',\n          edge,\n          source,\n          target,\n          attributes,\n          verb === 'update'\n        );\n      };\n    }\n  });\n});\n\n/**\n * Attributes-related.\n */\nattachNodeAttributesMethods(Graph);\nattachEdgeAttributesMethods(Graph);\n\n/**\n * Edge iteration-related.\n */\nattachEdgeIterationMethods(Graph);\n\n/**\n * Neighbor iteration-related.\n */\nattachNeighborIterationMethods(Graph);\n\n/**\n * Graphology Helper Classes\n * ==========================\n *\n * Building some higher-order classes instantiating the graph with\n * predefinite options.\n */\n\n/**\n * Alternative constructors.\n */\nclass DirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'directed'}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== false)\n      throw new InvalidArgumentsGraphError(\n        'DirectedGraph.from: inconsistent indication that the graph should be multi in given options!'\n      );\n\n    if (finalOptions.type !== 'directed')\n      throw new InvalidArgumentsGraphError(\n        'DirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass UndirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'undirected'}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== false)\n      throw new InvalidArgumentsGraphError(\n        'UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!'\n      );\n\n    if (finalOptions.type !== 'undirected')\n      throw new InvalidArgumentsGraphError(\n        'UndirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiDirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'directed', multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    if (finalOptions.type !== 'directed')\n      throw new InvalidArgumentsGraphError(\n        'MultiDirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiUndirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'undirected', multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    if (finalOptions.type !== 'undirected')\n      throw new InvalidArgumentsGraphError(\n        'MultiUndirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\n\n/**\n * Attaching static #.from method to each of the constructors.\n */\nfunction attachStaticFromMethod(Class) {\n  /**\n   * Builds a graph from serialized data or another graph's data.\n   *\n   * @param  {Graph|SerializedGraph} data      - Hydratation data.\n   * @param  {object}                [options] - Options.\n   * @return {Class}\n   */\n  Class.from = function (data, options) {\n    // Merging given options with serialized ones\n    const finalOptions = assign({}, data.options, options);\n\n    const instance = new Class(finalOptions);\n    instance.import(data);\n\n    return instance;\n  };\n}\n\nattachStaticFromMethod(Graph);\nattachStaticFromMethod(DirectedGraph);\nattachStaticFromMethod(UndirectedGraph);\nattachStaticFromMethod(MultiGraph);\nattachStaticFromMethod(MultiDirectedGraph);\nattachStaticFromMethod(MultiUndirectedGraph);\n\nGraph.Graph = Graph;\nGraph.DirectedGraph = DirectedGraph;\nGraph.UndirectedGraph = UndirectedGraph;\nGraph.MultiGraph = MultiGraph;\nGraph.MultiDirectedGraph = MultiDirectedGraph;\nGraph.MultiUndirectedGraph = MultiUndirectedGraph;\n\nGraph.InvalidArgumentsGraphError = InvalidArgumentsGraphError;\nGraph.NotFoundGraphError = NotFoundGraphError;\nGraph.UsageGraphError = UsageGraphError;\n\n/**\n * Graphology ESM Endoint\n * =======================\n *\n * Endpoint for ESM modules consumers.\n */\n\nexport { DirectedGraph, Graph, InvalidArgumentsGraphError, MultiDirectedGraph, MultiGraph, MultiUndirectedGraph, NotFoundGraphError, UndirectedGraph, UsageGraphError, Graph as default };\n//# sourceMappingURL=graphology.esm.js.map\n","/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.dropNode === 'function' &&\n    typeof value.multi === 'boolean'\n  );\n};\n","/**\n * Graphology Cycle Detection\n * ===========================\n *\n * Function returning whether the given graph contains at least one cycle.\n *\n * This function also works on disconnected graphs.\n *\n * [Reference]:\n * https://newbedev.com/how-to-detect-cycles-in-a-directed-graph-using-the-iterative-version-of-dfs\n */\nconst isGraph = require('graphology-utils/is-graph');\n\nconst WHITE = undefined;\nconst GREY = 0;\nconst BLACK = 1;\n\nmodule.exports = function hasCycle(graph) {\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-dag/has-cycle: the given graph is not a valid graphology instance.'\n    );\n\n  // Early exit\n  if (graph.size === 0) return false;\n\n  // If the graph has a self loop, it contains a cycle by definition\n  if (graph.selfLoopCount !== 0) return true;\n\n  const labels = {};\n  const stack = [];\n\n  function neighborCallback(neighbor) {\n    const neighborLabel = labels[neighbor];\n\n    if (neighborLabel === WHITE) stack.push(neighbor);\n    else if (neighborLabel === GREY) return true;\n\n    return false;\n  }\n\n  // We iterate over all nodes to be able to handle disconnected graphs\n  // NOTE: possibility to early exit when we know that all nodes have already\n  // been traversed\n  return graph.someNode(node => {\n    // Node was already seen\n    if (labels[node] === BLACK) return false;\n\n    stack.push(node);\n\n    while (stack.length !== 0) {\n      const current = stack[stack.length - 1]; // peek\n      const currentLabel = labels[current];\n\n      if (currentLabel !== GREY) {\n        labels[current] = GREY;\n\n        const shouldStop = graph.someOutboundNeighbor(\n          current,\n          neighborCallback\n        );\n\n        if (shouldStop) return true;\n      } else if (currentLabel === GREY) {\n        stack.pop();\n        labels[current] = BLACK;\n      }\n    }\n\n    return false;\n  });\n};\n","/**\n * Obliterator ForEach Function\n * =============================\n *\n * Helper function used to easily iterate over mixed values.\n */\nvar support = require('./support.js');\n\nvar ARRAY_BUFFER_SUPPORT = support.ARRAY_BUFFER_SUPPORT;\nvar SYMBOL_SUPPORT = support.SYMBOL_SUPPORT;\n\n/**\n * Function able to iterate over almost any iterable JS value.\n *\n * @param  {any}      iterable - Iterable value.\n * @param  {function} callback - Callback function.\n */\nmodule.exports = function forEach(iterable, callback) {\n  var iterator, k, i, l, s;\n\n  if (!iterable) throw new Error('obliterator/forEach: invalid iterable.');\n\n  if (typeof callback !== 'function')\n    throw new Error('obliterator/forEach: expecting a callback.');\n\n  // The target is an array or a string or function arguments\n  if (\n    Array.isArray(iterable) ||\n    (ARRAY_BUFFER_SUPPORT && ArrayBuffer.isView(iterable)) ||\n    typeof iterable === 'string' ||\n    iterable.toString() === '[object Arguments]'\n  ) {\n    for (i = 0, l = iterable.length; i < l; i++) callback(iterable[i], i);\n    return;\n  }\n\n  // The target has a #.forEach method\n  if (typeof iterable.forEach === 'function') {\n    iterable.forEach(callback);\n    return;\n  }\n\n  // The target is iterable\n  if (\n    SYMBOL_SUPPORT &&\n    Symbol.iterator in iterable &&\n    typeof iterable.next !== 'function'\n  ) {\n    iterable = iterable[Symbol.iterator]();\n  }\n\n  // The target is an iterator\n  if (typeof iterable.next === 'function') {\n    iterator = iterable;\n    i = 0;\n\n    while (((s = iterator.next()), s.done !== true)) {\n      callback(s.value, i);\n      i++;\n    }\n\n    return;\n  }\n\n  // The target is a plain object\n  for (k in iterable) {\n    if (iterable.hasOwnProperty(k)) {\n      callback(iterable[k], k);\n    }\n  }\n\n  return;\n};\n","/**\n * Mnemonist Typed Array Helpers\n * ==============================\n *\n * Miscellaneous helpers related to typed arrays.\n */\n\n/**\n * When using an unsigned integer array to store pointers, one might want to\n * choose the optimal word size in regards to the actual numbers of pointers\n * to store.\n *\n * This helpers does just that.\n *\n * @param  {number} size - Expected size of the array to map.\n * @return {TypedArray}\n */\nvar MAX_8BIT_INTEGER = Math.pow(2, 8) - 1,\n    MAX_16BIT_INTEGER = Math.pow(2, 16) - 1,\n    MAX_32BIT_INTEGER = Math.pow(2, 32) - 1;\n\nvar MAX_SIGNED_8BIT_INTEGER = Math.pow(2, 7) - 1,\n    MAX_SIGNED_16BIT_INTEGER = Math.pow(2, 15) - 1,\n    MAX_SIGNED_32BIT_INTEGER = Math.pow(2, 31) - 1;\n\nexports.getPointerArray = function(size) {\n  var maxIndex = size - 1;\n\n  if (maxIndex <= MAX_8BIT_INTEGER)\n    return Uint8Array;\n\n  if (maxIndex <= MAX_16BIT_INTEGER)\n    return Uint16Array;\n\n  if (maxIndex <= MAX_32BIT_INTEGER)\n    return Uint32Array;\n\n  throw new Error('mnemonist: Pointer Array of size > 4294967295 is not supported.');\n};\n\nexports.getSignedPointerArray = function(size) {\n  var maxIndex = size - 1;\n\n  if (maxIndex <= MAX_SIGNED_8BIT_INTEGER)\n    return Int8Array;\n\n  if (maxIndex <= MAX_SIGNED_16BIT_INTEGER)\n    return Int16Array;\n\n  if (maxIndex <= MAX_SIGNED_32BIT_INTEGER)\n    return Int32Array;\n\n  return Float64Array;\n};\n\n/**\n * Function returning the minimal type able to represent the given number.\n *\n * @param  {number} value - Value to test.\n * @return {TypedArrayClass}\n */\nexports.getNumberType = function(value) {\n\n  // <= 32 bits itnteger?\n  if (value === (value | 0)) {\n\n    // Negative\n    if (Math.sign(value) === -1) {\n      if (value <= 127 && value >= -128)\n        return Int8Array;\n\n      if (value <= 32767 && value >= -32768)\n        return Int16Array;\n\n      return Int32Array;\n    }\n    else {\n\n      if (value <= 255)\n        return Uint8Array;\n\n      if (value <= 65535)\n        return Uint16Array;\n\n      return Uint32Array;\n    }\n  }\n\n  // 53 bits integer & floats\n  // NOTE: it's kinda hard to tell whether we could use 32bits or not...\n  return Float64Array;\n};\n\n/**\n * Function returning the minimal type able to represent the given array\n * of JavaScript numbers.\n *\n * @param  {array}    array  - Array to represent.\n * @param  {function} getter - Optional getter.\n * @return {TypedArrayClass}\n */\nvar TYPE_PRIORITY = {\n  Uint8Array: 1,\n  Int8Array: 2,\n  Uint16Array: 3,\n  Int16Array: 4,\n  Uint32Array: 5,\n  Int32Array: 6,\n  Float32Array: 7,\n  Float64Array: 8\n};\n\n// TODO: make this a one-shot for one value\nexports.getMinimalRepresentation = function(array, getter) {\n  var maxType = null,\n      maxPriority = 0,\n      p,\n      t,\n      v,\n      i,\n      l;\n\n  for (i = 0, l = array.length; i < l; i++) {\n    v = getter ? getter(array[i]) : array[i];\n    t = exports.getNumberType(v);\n    p = TYPE_PRIORITY[t.name];\n\n    if (p > maxPriority) {\n      maxPriority = p;\n      maxType = t;\n    }\n  }\n\n  return maxType;\n};\n\n/**\n * Function returning whether the given value is a typed array.\n *\n * @param  {any} value - Value to test.\n * @return {boolean}\n */\nexports.isTypedArray = function(value) {\n  return typeof ArrayBuffer !== 'undefined' && ArrayBuffer.isView(value);\n};\n\n/**\n * Function used to concat byte arrays.\n *\n * @param  {...ByteArray}\n * @return {ByteArray}\n */\nexports.concat = function() {\n  var length = 0,\n      i,\n      o,\n      l;\n\n  for (i = 0, l = arguments.length; i < l; i++)\n    length += arguments[i].length;\n\n  var array = new (arguments[0].constructor)(length);\n\n  for (i = 0, o = 0; i < l; i++) {\n    array.set(arguments[i], o);\n    o += arguments[i].length;\n  }\n\n  return array;\n};\n\n/**\n * Function used to initialize a byte array of indices.\n *\n * @param  {number}    length - Length of target.\n * @return {ByteArray}\n */\nexports.indices = function(length) {\n  var PointerArray = exports.getPointerArray(length);\n\n  var array = new PointerArray(length);\n\n  for (var i = 0; i < length; i++)\n    array[i] = i;\n\n  return array;\n};\n","/**\n * Mnemonist Iterable Function\n * ============================\n *\n * Harmonized iteration helpers over mixed iterable targets.\n */\nvar forEach = require('obliterator/foreach');\n\nvar typed = require('./typed-arrays.js');\n\n/**\n * Function used to determine whether the given object supports array-like\n * random access.\n *\n * @param  {any} target - Target object.\n * @return {boolean}\n */\nfunction isArrayLike(target) {\n  return Array.isArray(target) || typed.isTypedArray(target);\n}\n\n/**\n * Function used to guess the length of the structure over which we are going\n * to iterate.\n *\n * @param  {any} target - Target object.\n * @return {number|undefined}\n */\nfunction guessLength(target) {\n  if (typeof target.length === 'number')\n    return target.length;\n\n  if (typeof target.size === 'number')\n    return target.size;\n\n  return;\n}\n\n/**\n * Function used to convert an iterable to an array.\n *\n * @param  {any}   target - Iteration target.\n * @return {array}\n */\nfunction toArray(target) {\n  var l = guessLength(target);\n\n  var array = typeof l === 'number' ? new Array(l) : [];\n\n  var i = 0;\n\n  // TODO: we could optimize when given target is array like\n  forEach(target, function(value) {\n    array[i++] = value;\n  });\n\n  return array;\n}\n\n/**\n * Same as above but returns a supplementary indices array.\n *\n * @param  {any}   target - Iteration target.\n * @return {array}\n */\nfunction toArrayWithIndices(target) {\n  var l = guessLength(target);\n\n  var IndexArray = typeof l === 'number' ?\n    typed.getPointerArray(l) :\n    Array;\n\n  var array = typeof l === 'number' ? new Array(l) : [];\n  var indices = typeof l === 'number' ? new IndexArray(l) : [];\n\n  var i = 0;\n\n  // TODO: we could optimize when given target is array like\n  forEach(target, function(value) {\n    array[i] = value;\n    indices[i] = i++;\n  });\n\n  return [array, indices];\n}\n\n/**\n * Exporting.\n */\nexports.isArrayLike = isArrayLike;\nexports.guessLength = guessLength;\nexports.toArray = toArray;\nexports.toArrayWithIndices = toArrayWithIndices;\n","/**\n * Mnemonist FixedDeque\n * =====================\n *\n * Fixed capacity double-ended queue implemented as ring deque.\n */\nvar iterables = require('./utils/iterables.js'),\n    Iterator = require('obliterator/iterator');\n\n/**\n * FixedDeque.\n *\n * @constructor\n */\nfunction FixedDeque(ArrayClass, capacity) {\n\n  if (arguments.length < 2)\n    throw new Error('mnemonist/fixed-deque: expecting an Array class and a capacity.');\n\n  if (typeof capacity !== 'number' || capacity <= 0)\n    throw new Error('mnemonist/fixed-deque: `capacity` should be a positive number.');\n\n  this.ArrayClass = ArrayClass;\n  this.capacity = capacity;\n  this.items = new ArrayClass(this.capacity);\n  this.clear();\n}\n\n/**\n * Method used to clear the structure.\n *\n * @return {undefined}\n */\nFixedDeque.prototype.clear = function() {\n\n  // Properties\n  this.start = 0;\n  this.size = 0;\n};\n\n/**\n * Method used to append a value to the deque.\n *\n * @param  {any}    item - Item to append.\n * @return {number}      - Returns the new size of the deque.\n */\nFixedDeque.prototype.push = function(item) {\n  if (this.size === this.capacity)\n    throw new Error('mnemonist/fixed-deque.push: deque capacity (' + this.capacity + ') exceeded!');\n\n  var index = (this.start + this.size) % this.capacity;\n\n  this.items[index] = item;\n\n  return ++this.size;\n};\n\n/**\n * Method used to prepend a value to the deque.\n *\n * @param  {any}    item - Item to prepend.\n * @return {number}      - Returns the new size of the deque.\n */\nFixedDeque.prototype.unshift = function(item) {\n  if (this.size === this.capacity)\n    throw new Error('mnemonist/fixed-deque.unshift: deque capacity (' + this.capacity + ') exceeded!');\n\n  var index = this.start - 1;\n\n  if (this.start === 0)\n    index = this.capacity - 1;\n\n  this.items[index] = item;\n  this.start = index;\n\n  return ++this.size;\n};\n\n/**\n * Method used to pop the deque.\n *\n * @return {any} - Returns the popped item.\n */\nFixedDeque.prototype.pop = function() {\n  if (this.size === 0)\n    return;\n\n  const index = (this.start + this.size - 1) % this.capacity;\n\n  this.size--;\n\n  return this.items[index];\n};\n\n/**\n * Method used to shift the deque.\n *\n * @return {any} - Returns the shifted item.\n */\nFixedDeque.prototype.shift = function() {\n  if (this.size === 0)\n    return;\n\n  var index = this.start;\n\n  this.size--;\n  this.start++;\n\n  if (this.start === this.capacity)\n    this.start = 0;\n\n  return this.items[index];\n};\n\n/**\n * Method used to peek the first value of the deque.\n *\n * @return {any}\n */\nFixedDeque.prototype.peekFirst = function() {\n  if (this.size === 0)\n    return;\n\n  return this.items[this.start];\n};\n\n/**\n * Method used to peek the last value of the deque.\n *\n * @return {any}\n */\nFixedDeque.prototype.peekLast = function() {\n  if (this.size === 0)\n    return;\n\n  var index = this.start + this.size - 1;\n\n  if (index > this.capacity)\n    index -= this.capacity;\n\n  return this.items[index];\n};\n\n/**\n * Method used to get the desired value of the deque.\n *\n * @param  {number} index\n * @return {any}\n */\nFixedDeque.prototype.get = function(index) {\n  if (this.size === 0)\n    return;\n\n  index = this.start + index;\n\n  if (index > this.capacity)\n    index -= this.capacity;\n\n  return this.items[index];\n};\n\n/**\n * Method used to iterate over the deque.\n *\n * @param  {function}  callback - Function to call for each item.\n * @param  {object}    scope    - Optional scope.\n * @return {undefined}\n */\nFixedDeque.prototype.forEach = function(callback, scope) {\n  scope = arguments.length > 1 ? scope : this;\n\n  var c = this.capacity,\n      l = this.size,\n      i = this.start,\n      j = 0;\n\n  while (j < l) {\n    callback.call(scope, this.items[i], j, this);\n    i++;\n    j++;\n\n    if (i === c)\n      i = 0;\n  }\n};\n\n/**\n * Method used to convert the deque to a JavaScript array.\n *\n * @return {array}\n */\n// TODO: optional array class as argument?\nFixedDeque.prototype.toArray = function() {\n\n  // Optimization\n  var offset = this.start + this.size;\n\n  if (offset < this.capacity)\n    return this.items.slice(this.start, offset);\n\n  var array = new this.ArrayClass(this.size),\n      c = this.capacity,\n      l = this.size,\n      i = this.start,\n      j = 0;\n\n  while (j < l) {\n    array[j] = this.items[i];\n    i++;\n    j++;\n\n    if (i === c)\n      i = 0;\n  }\n\n  return array;\n};\n\n/**\n * Method used to create an iterator over the deque's values.\n *\n * @return {Iterator}\n */\nFixedDeque.prototype.values = function() {\n  var items = this.items,\n      c = this.capacity,\n      l = this.size,\n      i = this.start,\n      j = 0;\n\n  return new Iterator(function() {\n    if (j >= l)\n      return {\n        done: true\n      };\n\n    var value = items[i];\n\n    i++;\n    j++;\n\n    if (i === c)\n      i = 0;\n\n    return {\n      value: value,\n      done: false\n    };\n  });\n};\n\n/**\n * Method used to create an iterator over the deque's entries.\n *\n * @return {Iterator}\n */\nFixedDeque.prototype.entries = function() {\n  var items = this.items,\n      c = this.capacity,\n      l = this.size,\n      i = this.start,\n      j = 0;\n\n  return new Iterator(function() {\n    if (j >= l)\n      return {\n        done: true\n      };\n\n    var value = items[i];\n\n    i++;\n\n    if (i === c)\n      i = 0;\n\n    return {\n      value: [j++, value],\n      done: false\n    };\n  });\n};\n\n/**\n * Attaching the #.values method to Symbol.iterator if possible.\n */\nif (typeof Symbol !== 'undefined')\n  FixedDeque.prototype[Symbol.iterator] = FixedDeque.prototype.values;\n\n/**\n * Convenience known methods.\n */\nFixedDeque.prototype.inspect = function() {\n  var array = this.toArray();\n\n  array.type = this.ArrayClass.name;\n  array.capacity = this.capacity;\n\n  // Trick so that node displays the name of the constructor\n  Object.defineProperty(array, 'constructor', {\n    value: FixedDeque,\n    enumerable: false\n  });\n\n  return array;\n};\n\nif (typeof Symbol !== 'undefined')\n  FixedDeque.prototype[Symbol.for('nodejs.util.inspect.custom')] = FixedDeque.prototype.inspect;\n\n/**\n * Static @.from function taking an arbitrary iterable & converting it into\n * a deque.\n *\n * @param  {Iterable} iterable   - Target iterable.\n * @param  {function} ArrayClass - Array class to use.\n * @param  {number}   capacity   - Desired capacity.\n * @return {FiniteStack}\n */\nFixedDeque.from = function(iterable, ArrayClass, capacity) {\n  if (arguments.length < 3) {\n    capacity = iterables.guessLength(iterable);\n\n    if (typeof capacity !== 'number')\n      throw new Error('mnemonist/fixed-deque.from: could not guess iterable length. Please provide desired capacity as last argument.');\n  }\n\n  var deque = new FixedDeque(ArrayClass, capacity);\n\n  if (iterables.isArrayLike(iterable)) {\n    var i, l;\n\n    for (i = 0, l = iterable.length; i < l; i++)\n      deque.items[i] = iterable[i];\n\n    deque.size = l;\n\n    return deque;\n  }\n\n  iterables.forEach(iterable, function(value) {\n    deque.push(value);\n  });\n\n  return deque;\n};\n\n/**\n * Exporting.\n */\nmodule.exports = FixedDeque;\n","exports.hasCycle = require('./has-cycle.js');\nexports.willCreateCycle = require('./will-create-cycle.js');\n\nconst sort = require('./topological-sort');\nexports.forEachNodeInTopologicalOrder = sort.forEachNodeInTopologicalOrder;\nexports.topologicalSort = sort.topologicalSort;\nexports.topologicalGenerations = sort.topologicalGenerations;\nexports.forEachTopologicalGeneration = sort.forEachTopologicalGeneration;\n","export default function cc(names) {\n  if (typeof names === \"string\" || typeof names === \"number\") return \"\" + names\n\n  let out = \"\"\n\n  if (Array.isArray(names)) {\n    for (let i = 0, tmp; i < names.length; i++) {\n      if ((tmp = cc(names[i])) !== \"\") {\n        out += (out && \" \") + tmp\n      }\n    }\n  } else {\n    for (let k in names) {\n      if (names[k]) out += (out && \" \") + k\n    }\n  }\n\n  return out\n}\n","import { useDebugValue } from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\nimport { createStore } from 'zustand/vanilla';\n\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nfunction useStoreWithEqualityFn(api, selector = api.getState, equalityFn) {\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createWithEqualityFnImpl = (createState, defaultEqualityFn) => {\n  const api = createStore(createState);\n  const useBoundStoreWithEqualityFn = (selector, equalityFn = defaultEqualityFn) => useStoreWithEqualityFn(api, selector, equalityFn);\n  Object.assign(useBoundStoreWithEqualityFn, api);\n  return useBoundStoreWithEqualityFn;\n};\nconst createWithEqualityFn = (createState, defaultEqualityFn) => createState ? createWithEqualityFnImpl(createState, defaultEqualityFn) : createWithEqualityFnImpl;\n\nexport { createWithEqualityFn, useStoreWithEqualityFn };\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we dont ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that dont fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnt worried about live collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// dont; wed rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export default x => () => x;\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0  u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weve set an alarm, if we havent already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and were done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and were done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and were done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wont trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { createContext, useContext, useMemo, memo, useRef, useState, useEffect, forwardRef, useCallback } from 'react';\nimport cc from 'classcat';\nimport { useStoreWithEqualityFn, createWithEqualityFn } from 'zustand/traditional';\nimport { shallow } from 'zustand/shallow';\nimport { zoomIdentity, zoom } from 'd3-zoom';\nimport { select, pointer } from 'd3-selection';\nimport { drag } from 'd3-drag';\nimport { createPortal } from 'react-dom';\n\nconst StoreContext = createContext(null);\nconst Provider$1 = StoreContext.Provider;\n\nconst errorMessages = {\n    error001: () => '[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001',\n    error002: () => \"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",\n    error003: (nodeType) => `Node type \"${nodeType}\" not found. Using fallback type \"default\".`,\n    error004: () => 'The React Flow parent container needs a width and a height to render the graph.',\n    error005: () => 'Only child nodes can use a parent extent.',\n    error006: () => \"Can't create edge. An edge needs a source and a target.\",\n    error007: (id) => `The old edge with id=${id} does not exist.`,\n    error009: (type) => `Marker type \"${type}\" doesn't exist.`,\n    error008: (sourceHandle, edge) => `Couldn't create edge for ${!sourceHandle ? 'source' : 'target'} handle id: \"${!sourceHandle ? edge.sourceHandle : edge.targetHandle}\", edge id: ${edge.id}.`,\n    error010: () => 'Handle: No node id found. Make sure to only use a Handle inside a custom Node.',\n    error011: (edgeType) => `Edge type \"${edgeType}\" not found. Using fallback type \"default\".`,\n    error012: (id) => `Node with id \"${id}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,\n};\n\nconst zustandErrorMessage = errorMessages['error001']();\nfunction useStore(selector, equalityFn) {\n    const store = useContext(StoreContext);\n    if (store === null) {\n        throw new Error(zustandErrorMessage);\n    }\n    return useStoreWithEqualityFn(store, selector, equalityFn);\n}\nconst useStoreApi = () => {\n    const store = useContext(StoreContext);\n    if (store === null) {\n        throw new Error(zustandErrorMessage);\n    }\n    return useMemo(() => ({\n        getState: store.getState,\n        setState: store.setState,\n        subscribe: store.subscribe,\n        destroy: store.destroy,\n    }), [store]);\n};\n\nconst selector$g = (s) => (s.userSelectionActive ? 'none' : 'all');\nfunction Panel({ position, children, className, style, ...rest }) {\n    const pointerEvents = useStore(selector$g);\n    const positionClasses = `${position}`.split('-');\n    return (jsx(\"div\", { className: cc(['react-flow__panel', className, ...positionClasses]), style: { ...style, pointerEvents }, ...rest, children: children }));\n}\n\nfunction Attribution({ proOptions, position = 'bottom-right' }) {\n    if (proOptions?.hideAttribution) {\n        return null;\n    }\n    return (jsx(Panel, { position: position, className: \"react-flow__attribution\", \"data-message\": \"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev\", children: jsx(\"a\", { href: \"https://reactflow.dev\", target: \"_blank\", rel: \"noopener noreferrer\", \"aria-label\": \"React Flow attribution\", children: \"React Flow\" }) }));\n}\n\nconst EdgeText = ({ x, y, label, labelStyle = {}, labelShowBg = true, labelBgStyle = {}, labelBgPadding = [2, 4], labelBgBorderRadius = 2, children, className, ...rest }) => {\n    const edgeRef = useRef(null);\n    const [edgeTextBbox, setEdgeTextBbox] = useState({ x: 0, y: 0, width: 0, height: 0 });\n    const edgeTextClasses = cc(['react-flow__edge-textwrapper', className]);\n    useEffect(() => {\n        if (edgeRef.current) {\n            const textBbox = edgeRef.current.getBBox();\n            setEdgeTextBbox({\n                x: textBbox.x,\n                y: textBbox.y,\n                width: textBbox.width,\n                height: textBbox.height,\n            });\n        }\n    }, [label]);\n    if (typeof label === 'undefined' || !label) {\n        return null;\n    }\n    return (jsxs(\"g\", { transform: `translate(${x - edgeTextBbox.width / 2} ${y - edgeTextBbox.height / 2})`, className: edgeTextClasses, visibility: edgeTextBbox.width ? 'visible' : 'hidden', ...rest, children: [labelShowBg && (jsx(\"rect\", { width: edgeTextBbox.width + 2 * labelBgPadding[0], x: -labelBgPadding[0], y: -labelBgPadding[1], height: edgeTextBbox.height + 2 * labelBgPadding[1], className: \"react-flow__edge-textbg\", style: labelBgStyle, rx: labelBgBorderRadius, ry: labelBgBorderRadius })), jsx(\"text\", { className: \"react-flow__edge-text\", y: edgeTextBbox.height / 2, dy: \"0.3em\", ref: edgeRef, style: labelStyle, children: label }), children] }));\n};\nvar EdgeText$1 = memo(EdgeText);\n\nconst getDimensions = (node) => ({\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n});\nconst clamp = (val, min = 0, max = 1) => Math.min(Math.max(val, min), max);\nconst clampPosition = (position = { x: 0, y: 0 }, extent) => ({\n    x: clamp(position.x, extent[0][0], extent[1][0]),\n    y: clamp(position.y, extent[0][1], extent[1][1]),\n});\n// returns a number between 0 and 1 that represents the velocity of the movement\n// when the mouse is close to the edge of the canvas\nconst calcAutoPanVelocity = (value, min, max) => {\n    if (value < min) {\n        return clamp(Math.abs(value - min), 1, 50) / 50;\n    }\n    else if (value > max) {\n        return -clamp(Math.abs(value - max), 1, 50) / 50;\n    }\n    return 0;\n};\nconst calcAutoPan = (pos, bounds) => {\n    const xMovement = calcAutoPanVelocity(pos.x, 35, bounds.width - 35) * 20;\n    const yMovement = calcAutoPanVelocity(pos.y, 35, bounds.height - 35) * 20;\n    return [xMovement, yMovement];\n};\nconst getHostForElement = (element) => element.getRootNode?.() || window?.document;\nconst getBoundsOfBoxes = (box1, box2) => ({\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2),\n});\nconst rectToBox = ({ x, y, width, height }) => ({\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n});\nconst boxToRect = ({ x, y, x2, y2 }) => ({\n    x,\n    y,\n    width: x2 - x,\n    height: y2 - y,\n});\nconst nodeToRect = (node) => ({\n    ...(node.positionAbsolute || { x: 0, y: 0 }),\n    width: node.width || 0,\n    height: node.height || 0,\n});\nconst getBoundsOfRects = (rect1, rect2) => boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\nconst getOverlappingArea = (rectA, rectB) => {\n    const xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n    const yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n    return Math.ceil(xOverlap * yOverlap);\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isRectObject = (obj) => isNumeric(obj.width) && isNumeric(obj.height) && isNumeric(obj.x) && isNumeric(obj.y);\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nconst isNumeric = (n) => !isNaN(n) && isFinite(n);\nconst internalsSymbol = Symbol.for('internals');\n// used for a11y key board controls for nodes and edges\nconst elementSelectionKeys = ['Enter', ' ', 'Escape'];\nconst devWarn = (id, message) => {\n    if (process.env.NODE_ENV === 'development') {\n        console.warn(`[React Flow]: ${message} Help: https://reactflow.dev/error#${id}`);\n    }\n};\nconst isReactKeyboardEvent = (event) => 'nativeEvent' in event;\nfunction isInputDOMNode(event) {\n    const kbEvent = isReactKeyboardEvent(event) ? event.nativeEvent : event;\n    // using composed path for handling shadow dom\n    const target = (kbEvent.composedPath?.()?.[0] || event.target);\n    const isInput = ['INPUT', 'SELECT', 'TEXTAREA'].includes(target?.nodeName) || target?.hasAttribute('contenteditable');\n    // when an input field is focused we don't want to trigger deletion or movement of nodes\n    return isInput || !!target?.closest('.nokey');\n}\nconst isMouseEvent = (event) => 'clientX' in event;\nconst getEventPosition = (event, bounds) => {\n    const isMouseTriggered = isMouseEvent(event);\n    const evtX = isMouseTriggered ? event.clientX : event.touches?.[0].clientX;\n    const evtY = isMouseTriggered ? event.clientY : event.touches?.[0].clientY;\n    return {\n        x: evtX - (bounds?.left ?? 0),\n        y: evtY - (bounds?.top ?? 0),\n    };\n};\nconst isMacOs = () => typeof navigator !== 'undefined' && navigator?.userAgent?.indexOf('Mac') >= 0;\n\nconst BaseEdge = ({ id, path, labelX, labelY, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, markerEnd, markerStart, interactionWidth = 20, }) => {\n    return (jsxs(Fragment, { children: [jsx(\"path\", { id: id, style: style, d: path, fill: \"none\", className: \"react-flow__edge-path\", markerEnd: markerEnd, markerStart: markerStart }), interactionWidth && (jsx(\"path\", { d: path, fill: \"none\", strokeOpacity: 0, strokeWidth: interactionWidth, className: \"react-flow__edge-interaction\" })), label && isNumeric(labelX) && isNumeric(labelY) ? (jsx(EdgeText$1, { x: labelX, y: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius })) : null] }));\n};\nBaseEdge.displayName = 'BaseEdge';\n\nconst getMarkerEnd = (markerType, markerEndId) => {\n    if (typeof markerEndId !== 'undefined' && markerEndId) {\n        return `url(#${markerEndId})`;\n    }\n    return typeof markerType !== 'undefined' ? `url(#react-flow__${markerType})` : 'none';\n};\nfunction getMouseHandler$1(id, getState, handler) {\n    return handler === undefined\n        ? handler\n        : (event) => {\n            const edge = getState().edges.find((e) => e.id === id);\n            if (edge) {\n                handler(event, { ...edge });\n            }\n        };\n}\n// this is used for straight edges and simple smoothstep edges (LTR, RTL, BTT, TTB)\nfunction getEdgeCenter({ sourceX, sourceY, targetX, targetY, }) {\n    const xOffset = Math.abs(targetX - sourceX) / 2;\n    const centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n    const yOffset = Math.abs(targetY - sourceY) / 2;\n    const centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n    return [centerX, centerY, xOffset, yOffset];\n}\nfunction getBezierEdgeCenter({ sourceX, sourceY, targetX, targetY, sourceControlX, sourceControlY, targetControlX, targetControlY, }) {\n    // cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n    // https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n    const centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n    const centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n    const offsetX = Math.abs(centerX - sourceX);\n    const offsetY = Math.abs(centerY - sourceY);\n    return [centerX, centerY, offsetX, offsetY];\n}\n\nvar ConnectionMode;\n(function (ConnectionMode) {\n    ConnectionMode[\"Strict\"] = \"strict\";\n    ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\nvar PanOnScrollMode;\n(function (PanOnScrollMode) {\n    PanOnScrollMode[\"Free\"] = \"free\";\n    PanOnScrollMode[\"Vertical\"] = \"vertical\";\n    PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[\"Partial\"] = \"partial\";\n    SelectionMode[\"Full\"] = \"full\";\n})(SelectionMode || (SelectionMode = {}));\n\nvar ConnectionLineType;\n(function (ConnectionLineType) {\n    ConnectionLineType[\"Bezier\"] = \"default\";\n    ConnectionLineType[\"Straight\"] = \"straight\";\n    ConnectionLineType[\"Step\"] = \"step\";\n    ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n    ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[\"Arrow\"] = \"arrow\";\n    MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\nvar Position;\n(function (Position) {\n    Position[\"Left\"] = \"left\";\n    Position[\"Top\"] = \"top\";\n    Position[\"Right\"] = \"right\";\n    Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\n\nfunction getControl({ pos, x1, y1, x2, y2 }) {\n    if (pos === Position.Left || pos === Position.Right) {\n        return [0.5 * (x1 + x2), y1];\n    }\n    return [x1, 0.5 * (y1 + y2)];\n}\nfunction getSimpleBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, }) {\n    const [sourceControlX, sourceControlY] = getControl({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n    });\n    const [targetControlX, targetControlY] = getControl({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\nconst SimpleBezierEdge = memo(({ sourceX, sourceY, targetX, targetY, sourcePosition = Position.Bottom, targetPosition = Position.Top, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, markerEnd, markerStart, interactionWidth, }) => {\n    const [path, labelX, labelY] = getSimpleBezierPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition,\n    });\n    return (jsx(BaseEdge, { path: path, labelX: labelX, labelY: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, style: style, markerEnd: markerEnd, markerStart: markerStart, interactionWidth: interactionWidth }));\n});\nSimpleBezierEdge.displayName = 'SimpleBezierEdge';\n\nconst handleDirections = {\n    [Position.Left]: { x: -1, y: 0 },\n    [Position.Right]: { x: 1, y: 0 },\n    [Position.Top]: { x: 0, y: -1 },\n    [Position.Bottom]: { x: 0, y: 1 },\n};\nconst getDirection = ({ source, sourcePosition = Position.Bottom, target, }) => {\n    if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n        return source.x < target.x ? { x: 1, y: 0 } : { x: -1, y: 0 };\n    }\n    return source.y < target.y ? { x: 0, y: 1 } : { x: 0, y: -1 };\n};\nconst distance = (a, b) => Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n// ith this function we try to mimic a orthogonal edge routing behaviour\n// It's not as good as a real orthogonal edge routing but it's faster and good enough as a default for step and smooth step edges\nfunction getPoints({ source, sourcePosition = Position.Bottom, target, targetPosition = Position.Top, center, offset, }) {\n    const sourceDir = handleDirections[sourcePosition];\n    const targetDir = handleDirections[targetPosition];\n    const sourceGapped = { x: source.x + sourceDir.x * offset, y: source.y + sourceDir.y * offset };\n    const targetGapped = { x: target.x + targetDir.x * offset, y: target.y + targetDir.y * offset };\n    const dir = getDirection({\n        source: sourceGapped,\n        sourcePosition,\n        target: targetGapped,\n    });\n    const dirAccessor = dir.x !== 0 ? 'x' : 'y';\n    const currDir = dir[dirAccessor];\n    let points = [];\n    let centerX, centerY;\n    const sourceGapOffset = { x: 0, y: 0 };\n    const targetGapOffset = { x: 0, y: 0 };\n    const [defaultCenterX, defaultCenterY, defaultOffsetX, defaultOffsetY] = getEdgeCenter({\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n    });\n    // opposite handle positions, default case\n    if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n        centerX = center.x || defaultCenterX;\n        centerY = center.y || defaultCenterY;\n        //    --->\n        //    |\n        // >---\n        const verticalSplit = [\n            { x: centerX, y: sourceGapped.y },\n            { x: centerX, y: targetGapped.y },\n        ];\n        //    |\n        //  ---\n        //  |\n        const horizontalSplit = [\n            { x: sourceGapped.x, y: centerY },\n            { x: targetGapped.x, y: centerY },\n        ];\n        if (sourceDir[dirAccessor] === currDir) {\n            points = dirAccessor === 'x' ? verticalSplit : horizontalSplit;\n        }\n        else {\n            points = dirAccessor === 'x' ? horizontalSplit : verticalSplit;\n        }\n    }\n    else {\n        // sourceTarget means we take x from source and y from target, targetSource is the opposite\n        const sourceTarget = [{ x: sourceGapped.x, y: targetGapped.y }];\n        const targetSource = [{ x: targetGapped.x, y: sourceGapped.y }];\n        // this handles edges with same handle positions\n        if (dirAccessor === 'x') {\n            points = sourceDir.x === currDir ? targetSource : sourceTarget;\n        }\n        else {\n            points = sourceDir.y === currDir ? sourceTarget : targetSource;\n        }\n        if (sourcePosition === targetPosition) {\n            const diff = Math.abs(source[dirAccessor] - target[dirAccessor]);\n            // if an edge goes from right to right for example (sourcePosition === targetPosition) and the distance between source.x and target.x is less than the offset, the added point and the gapped source/target will overlap. This leads to a weird edge path. To avoid this we add a gapOffset to the source/target\n            if (diff <= offset) {\n                const gapOffset = Math.min(offset - 1, offset - diff);\n                if (sourceDir[dirAccessor] === currDir) {\n                    sourceGapOffset[dirAccessor] = (sourceGapped[dirAccessor] > source[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n                else {\n                    targetGapOffset[dirAccessor] = (targetGapped[dirAccessor] > target[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n            }\n        }\n        // these are conditions for handling mixed handle positions like Right -> Bottom for example\n        if (sourcePosition !== targetPosition) {\n            const dirAccessorOpposite = dirAccessor === 'x' ? 'y' : 'x';\n            const isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n            const sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n            const sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n            const flipSourceTarget = (sourceDir[dirAccessor] === 1 && ((!isSameDir && sourceGtTargetOppo) || (isSameDir && sourceLtTargetOppo))) ||\n                (sourceDir[dirAccessor] !== 1 && ((!isSameDir && sourceLtTargetOppo) || (isSameDir && sourceGtTargetOppo)));\n            if (flipSourceTarget) {\n                points = dirAccessor === 'x' ? sourceTarget : targetSource;\n            }\n        }\n        const sourceGapPoint = { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y };\n        const targetGapPoint = { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y };\n        const maxXDistance = Math.max(Math.abs(sourceGapPoint.x - points[0].x), Math.abs(targetGapPoint.x - points[0].x));\n        const maxYDistance = Math.max(Math.abs(sourceGapPoint.y - points[0].y), Math.abs(targetGapPoint.y - points[0].y));\n        // we want to place the label on the longest segment of the edge\n        if (maxXDistance >= maxYDistance) {\n            centerX = (sourceGapPoint.x + targetGapPoint.x) / 2;\n            centerY = points[0].y;\n        }\n        else {\n            centerX = points[0].x;\n            centerY = (sourceGapPoint.y + targetGapPoint.y) / 2;\n        }\n    }\n    const pathPoints = [\n        source,\n        { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y },\n        ...points,\n        { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y },\n        target,\n    ];\n    return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\nfunction getBend(a, b, c, size) {\n    const bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n    const { x, y } = b;\n    // no bend\n    if ((a.x === x && x === c.x) || (a.y === y && y === c.y)) {\n        return `L${x} ${y}`;\n    }\n    // first segment is horizontal\n    if (a.y === y) {\n        const xDir = a.x < c.x ? -1 : 1;\n        const yDir = a.y < c.y ? 1 : -1;\n        return `L ${x + bendSize * xDir},${y}Q ${x},${y} ${x},${y + bendSize * yDir}`;\n    }\n    const xDir = a.x < c.x ? 1 : -1;\n    const yDir = a.y < c.y ? -1 : 1;\n    return `L ${x},${y + bendSize * yDir}Q ${x},${y} ${x + bendSize * xDir},${y}`;\n}\nfunction getSmoothStepPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, borderRadius = 5, centerX, centerY, offset = 20, }) {\n    const [points, labelX, labelY, offsetX, offsetY] = getPoints({\n        source: { x: sourceX, y: sourceY },\n        sourcePosition,\n        target: { x: targetX, y: targetY },\n        targetPosition,\n        center: { x: centerX, y: centerY },\n        offset,\n    });\n    const path = points.reduce((res, p, i) => {\n        let segment = '';\n        if (i > 0 && i < points.length - 1) {\n            segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n        }\n        else {\n            segment = `${i === 0 ? 'M' : 'L'}${p.x} ${p.y}`;\n        }\n        res += segment;\n        return res;\n    }, '');\n    return [path, labelX, labelY, offsetX, offsetY];\n}\nconst SmoothStepEdge = memo(({ sourceX, sourceY, targetX, targetY, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, sourcePosition = Position.Bottom, targetPosition = Position.Top, markerEnd, markerStart, pathOptions, interactionWidth, }) => {\n    const [path, labelX, labelY] = getSmoothStepPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition,\n        borderRadius: pathOptions?.borderRadius,\n        offset: pathOptions?.offset,\n    });\n    return (jsx(BaseEdge, { path: path, labelX: labelX, labelY: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, style: style, markerEnd: markerEnd, markerStart: markerStart, interactionWidth: interactionWidth }));\n});\nSmoothStepEdge.displayName = 'SmoothStepEdge';\n\nconst StepEdge = memo((props) => (jsx(SmoothStepEdge, { ...props, pathOptions: useMemo(() => ({ borderRadius: 0, offset: props.pathOptions?.offset }), [props.pathOptions?.offset]) })));\nStepEdge.displayName = 'StepEdge';\n\nfunction getStraightPath({ sourceX, sourceY, targetX, targetY, }) {\n    const [labelX, labelY, offsetX, offsetY] = getEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n    });\n    return [`M ${sourceX},${sourceY}L ${targetX},${targetY}`, labelX, labelY, offsetX, offsetY];\n}\nconst StraightEdge = memo(({ sourceX, sourceY, targetX, targetY, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, markerEnd, markerStart, interactionWidth, }) => {\n    const [path, labelX, labelY] = getStraightPath({ sourceX, sourceY, targetX, targetY });\n    return (jsx(BaseEdge, { path: path, labelX: labelX, labelY: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, style: style, markerEnd: markerEnd, markerStart: markerStart, interactionWidth: interactionWidth }));\n});\nStraightEdge.displayName = 'StraightEdge';\n\nfunction calculateControlOffset(distance, curvature) {\n    if (distance >= 0) {\n        return 0.5 * distance;\n    }\n    return curvature * 25 * Math.sqrt(-distance);\n}\nfunction getControlWithCurvature({ pos, x1, y1, x2, y2, c }) {\n    switch (pos) {\n        case Position.Left:\n            return [x1 - calculateControlOffset(x1 - x2, c), y1];\n        case Position.Right:\n            return [x1 + calculateControlOffset(x2 - x1, c), y1];\n        case Position.Top:\n            return [x1, y1 - calculateControlOffset(y1 - y2, c)];\n        case Position.Bottom:\n            return [x1, y1 + calculateControlOffset(y2 - y1, c)];\n    }\n}\nfunction getBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, curvature = 0.25, }) {\n    const [sourceControlX, sourceControlY] = getControlWithCurvature({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n        c: curvature,\n    });\n    const [targetControlX, targetControlY] = getControlWithCurvature({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n        c: curvature,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\nconst BezierEdge = memo(({ sourceX, sourceY, targetX, targetY, sourcePosition = Position.Bottom, targetPosition = Position.Top, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, markerEnd, markerStart, pathOptions, interactionWidth, }) => {\n    const [path, labelX, labelY] = getBezierPath({\n        sourceX,\n        sourceY,\n        sourcePosition,\n        targetX,\n        targetY,\n        targetPosition,\n        curvature: pathOptions?.curvature,\n    });\n    return (jsx(BaseEdge, { path: path, labelX: labelX, labelY: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, style: style, markerEnd: markerEnd, markerStart: markerStart, interactionWidth: interactionWidth }));\n});\nBezierEdge.displayName = 'BezierEdge';\n\nconst NodeIdContext = createContext(null);\nconst Provider = NodeIdContext.Provider;\nNodeIdContext.Consumer;\nconst useNodeId = () => {\n    const nodeId = useContext(NodeIdContext);\n    return nodeId;\n};\n\nconst isEdge = (element) => 'id' in element && 'source' in element && 'target' in element;\nconst isNode = (element) => 'id' in element && !('source' in element) && !('target' in element);\nconst getOutgoers = (node, nodes, edges) => {\n    if (!isNode(node)) {\n        return [];\n    }\n    const outgoerIds = edges.filter((e) => e.source === node.id).map((e) => e.target);\n    return nodes.filter((n) => outgoerIds.includes(n.id));\n};\nconst getIncomers = (node, nodes, edges) => {\n    if (!isNode(node)) {\n        return [];\n    }\n    const incomersIds = edges.filter((e) => e.target === node.id).map((e) => e.source);\n    return nodes.filter((n) => incomersIds.includes(n.id));\n};\nconst getEdgeId = ({ source, sourceHandle, target, targetHandle }) => `reactflow__edge-${source}${sourceHandle || ''}-${target}${targetHandle || ''}`;\nconst getMarkerId = (marker, rfId) => {\n    if (typeof marker === 'undefined') {\n        return '';\n    }\n    if (typeof marker === 'string') {\n        return marker;\n    }\n    const idPrefix = rfId ? `${rfId}__` : '';\n    return `${idPrefix}${Object.keys(marker)\n        .sort()\n        .map((key) => `${key}=${marker[key]}`)\n        .join('&')}`;\n};\nconst connectionExists = (edge, edges) => {\n    return edges.some((el) => el.source === edge.source &&\n        el.target === edge.target &&\n        (el.sourceHandle === edge.sourceHandle || (!el.sourceHandle && !edge.sourceHandle)) &&\n        (el.targetHandle === edge.targetHandle || (!el.targetHandle && !edge.targetHandle)));\n};\nconst addEdge = (edgeParams, edges) => {\n    if (!edgeParams.source || !edgeParams.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    let edge;\n    if (isEdge(edgeParams)) {\n        edge = { ...edgeParams };\n    }\n    else {\n        edge = {\n            ...edgeParams,\n            id: getEdgeId(edgeParams),\n        };\n    }\n    if (connectionExists(edge, edges)) {\n        return edges;\n    }\n    return edges.concat(edge);\n};\nconst updateEdge = (oldEdge, newConnection, edges, options = { shouldReplaceId: true }) => {\n    const { id: oldEdgeId, ...rest } = oldEdge;\n    if (!newConnection.source || !newConnection.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    const foundEdge = edges.find((e) => e.id === oldEdgeId);\n    if (!foundEdge) {\n        devWarn('007', errorMessages['error007'](oldEdgeId));\n        return edges;\n    }\n    // Remove old edge and create the new edge with parameters of old edge.\n    const edge = {\n        ...rest,\n        id: options.shouldReplaceId ? getEdgeId(newConnection) : oldEdgeId,\n        source: newConnection.source,\n        target: newConnection.target,\n        sourceHandle: newConnection.sourceHandle,\n        targetHandle: newConnection.targetHandle,\n    };\n    return edges.filter((e) => e.id !== oldEdgeId).concat(edge);\n};\nconst pointToRendererPoint = ({ x, y }, [tx, ty, tScale], snapToGrid, [snapX, snapY]) => {\n    const position = {\n        x: (x - tx) / tScale,\n        y: (y - ty) / tScale,\n    };\n    if (snapToGrid) {\n        return {\n            x: snapX * Math.round(position.x / snapX),\n            y: snapY * Math.round(position.y / snapY),\n        };\n    }\n    return position;\n};\nconst rendererPointToPoint = ({ x, y }, [tx, ty, tScale]) => {\n    return {\n        x: x * tScale + tx,\n        y: y * tScale + ty,\n    };\n};\nconst getNodePositionWithOrigin = (node, nodeOrigin = [0, 0]) => {\n    if (!node) {\n        return {\n            x: 0,\n            y: 0,\n            positionAbsolute: {\n                x: 0,\n                y: 0,\n            },\n        };\n    }\n    const offsetX = (node.width ?? 0) * nodeOrigin[0];\n    const offsetY = (node.height ?? 0) * nodeOrigin[1];\n    const position = {\n        x: node.position.x - offsetX,\n        y: node.position.y - offsetY,\n    };\n    return {\n        ...position,\n        positionAbsolute: node.positionAbsolute\n            ? {\n                x: node.positionAbsolute.x - offsetX,\n                y: node.positionAbsolute.y - offsetY,\n            }\n            : position,\n    };\n};\nconst getRectOfNodes = (nodes, nodeOrigin = [0, 0]) => {\n    if (nodes.length === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    const box = nodes.reduce((currBox, node) => {\n        const { x, y } = getNodePositionWithOrigin(node, nodeOrigin).positionAbsolute;\n        return getBoundsOfBoxes(currBox, rectToBox({\n            x,\n            y,\n            width: node.width || 0,\n            height: node.height || 0,\n        }));\n    }, { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity });\n    return boxToRect(box);\n};\nconst getNodesInside = (nodeInternals, rect, [tx, ty, tScale] = [0, 0, 1], partially = false, \n// set excludeNonSelectableNodes if you want to pay attention to the nodes \"selectable\" attribute\nexcludeNonSelectableNodes = false, nodeOrigin = [0, 0]) => {\n    const paneRect = {\n        x: (rect.x - tx) / tScale,\n        y: (rect.y - ty) / tScale,\n        width: rect.width / tScale,\n        height: rect.height / tScale,\n    };\n    const visibleNodes = [];\n    nodeInternals.forEach((node) => {\n        const { width, height, selectable = true, hidden = false } = node;\n        if ((excludeNonSelectableNodes && !selectable) || hidden) {\n            return false;\n        }\n        const { positionAbsolute } = getNodePositionWithOrigin(node, nodeOrigin);\n        const nodeRect = {\n            x: positionAbsolute.x,\n            y: positionAbsolute.y,\n            width: width || 0,\n            height: height || 0,\n        };\n        const overlappingArea = getOverlappingArea(paneRect, nodeRect);\n        const notInitialized = typeof width === 'undefined' || typeof height === 'undefined' || width === null || height === null;\n        const partiallyVisible = partially && overlappingArea > 0;\n        const area = (width || 0) * (height || 0);\n        const isVisible = notInitialized || partiallyVisible || overlappingArea >= area;\n        if (isVisible || node.dragging) {\n            visibleNodes.push(node);\n        }\n    });\n    return visibleNodes;\n};\nconst getConnectedEdges = (nodes, edges) => {\n    const nodeIds = nodes.map((node) => node.id);\n    return edges.filter((edge) => nodeIds.includes(edge.source) || nodeIds.includes(edge.target));\n};\nconst getTransformForBounds = (bounds, width, height, minZoom, maxZoom, padding = 0.1) => {\n    const xZoom = width / (bounds.width * (1 + padding));\n    const yZoom = height / (bounds.height * (1 + padding));\n    const zoom = Math.min(xZoom, yZoom);\n    const clampedZoom = clamp(zoom, minZoom, maxZoom);\n    const boundsCenterX = bounds.x + bounds.width / 2;\n    const boundsCenterY = bounds.y + bounds.height / 2;\n    const x = width / 2 - boundsCenterX * clampedZoom;\n    const y = height / 2 - boundsCenterY * clampedZoom;\n    return [x, y, clampedZoom];\n};\nconst getD3Transition = (selection, duration = 0) => {\n    return selection.transition().duration(duration);\n};\n\n// this functions collects all handles and adds an absolute position\n// so that we can later find the closest handle to the mouse position\nfunction getHandles(node, handleBounds, type, currentHandle) {\n    return (handleBounds[type] || []).reduce((res, h) => {\n        if (`${node.id}-${h.id}-${type}` !== currentHandle) {\n            res.push({\n                id: h.id || null,\n                type,\n                nodeId: node.id,\n                x: (node.positionAbsolute?.x ?? 0) + h.x + h.width / 2,\n                y: (node.positionAbsolute?.y ?? 0) + h.y + h.height / 2,\n            });\n        }\n        return res;\n    }, []);\n}\nfunction getClosestHandle(event, doc, pos, connectionRadius, handles, validator) {\n    // we always want to prioritize the handle below the mouse cursor over the closest distance handle,\n    // because it could be that the center of another handle is closer to the mouse pointer than the handle below the cursor\n    const { x, y } = getEventPosition(event);\n    const domNodes = doc.elementsFromPoint(x, y);\n    const handleBelow = domNodes.find((el) => el.classList.contains('react-flow__handle'));\n    if (handleBelow) {\n        const handleNodeId = handleBelow.getAttribute('data-nodeid');\n        if (handleNodeId) {\n            const handleType = getHandleType(undefined, handleBelow);\n            const handleId = handleBelow.getAttribute('data-handleid');\n            const validHandleResult = validator({ nodeId: handleNodeId, id: handleId, type: handleType });\n            if (validHandleResult) {\n                return {\n                    handle: {\n                        id: handleId,\n                        type: handleType,\n                        nodeId: handleNodeId,\n                        x: pos.x,\n                        y: pos.y,\n                    },\n                    validHandleResult,\n                };\n            }\n        }\n    }\n    // if we couldn't find a handle below the mouse cursor we look for the closest distance based on the connectionRadius\n    let closestHandles = [];\n    let minDistance = Infinity;\n    handles.forEach((handle) => {\n        const distance = Math.sqrt((handle.x - pos.x) ** 2 + (handle.y - pos.y) ** 2);\n        if (distance <= connectionRadius) {\n            const validHandleResult = validator(handle);\n            if (distance <= minDistance) {\n                if (distance < minDistance) {\n                    closestHandles = [{ handle, validHandleResult }];\n                }\n                else if (distance === minDistance) {\n                    // when multiple handles are on the same distance we collect all of them\n                    closestHandles.push({\n                        handle,\n                        validHandleResult,\n                    });\n                }\n                minDistance = distance;\n            }\n        }\n    });\n    if (!closestHandles.length) {\n        return { handle: null, validHandleResult: defaultResult() };\n    }\n    if (closestHandles.length === 1) {\n        return closestHandles[0];\n    }\n    const hasValidHandle = closestHandles.some(({ validHandleResult }) => validHandleResult.isValid);\n    const hasTargetHandle = closestHandles.some(({ handle }) => handle.type === 'target');\n    // if multiple handles are layouted on top of each other we prefer the one with type = target and the one that is valid\n    return (closestHandles.find(({ handle, validHandleResult }) => hasTargetHandle ? handle.type === 'target' : (hasValidHandle ? validHandleResult.isValid : true)) || closestHandles[0]);\n}\nconst nullConnection = { source: null, target: null, sourceHandle: null, targetHandle: null };\nconst defaultResult = () => ({\n    handleDomNode: null,\n    isValid: false,\n    connection: nullConnection,\n    endHandle: null,\n});\n// checks if  and returns connection in fom of an object { source: 123, target: 312 }\nfunction isValidHandle(handle, connectionMode, fromNodeId, fromHandleId, fromType, isValidConnection, doc) {\n    const isTarget = fromType === 'target';\n    const handleToCheck = doc.querySelector(`.react-flow__handle[data-id=\"${handle?.nodeId}-${handle?.id}-${handle?.type}\"]`);\n    const result = {\n        ...defaultResult(),\n        handleDomNode: handleToCheck,\n    };\n    if (handleToCheck) {\n        const handleType = getHandleType(undefined, handleToCheck);\n        const handleNodeId = handleToCheck.getAttribute('data-nodeid');\n        const handleId = handleToCheck.getAttribute('data-handleid');\n        const connectable = handleToCheck.classList.contains('connectable');\n        const connectableEnd = handleToCheck.classList.contains('connectableend');\n        const connection = {\n            source: isTarget ? handleNodeId : fromNodeId,\n            sourceHandle: isTarget ? handleId : fromHandleId,\n            target: isTarget ? fromNodeId : handleNodeId,\n            targetHandle: isTarget ? fromHandleId : handleId,\n        };\n        result.connection = connection;\n        const isConnectable = connectable && connectableEnd;\n        // in strict mode we don't allow target to target or source to source connections\n        const isValid = isConnectable &&\n            (connectionMode === ConnectionMode.Strict\n                ? (isTarget && handleType === 'source') || (!isTarget && handleType === 'target')\n                : handleNodeId !== fromNodeId || handleId !== fromHandleId);\n        if (isValid) {\n            result.endHandle = {\n                nodeId: handleNodeId,\n                handleId,\n                type: handleType,\n            };\n            result.isValid = isValidConnection(connection);\n        }\n    }\n    return result;\n}\nfunction getHandleLookup({ nodes, nodeId, handleId, handleType }) {\n    return nodes.reduce((res, node) => {\n        if (node[internalsSymbol]) {\n            const { handleBounds } = node[internalsSymbol];\n            let sourceHandles = [];\n            let targetHandles = [];\n            if (handleBounds) {\n                sourceHandles = getHandles(node, handleBounds, 'source', `${nodeId}-${handleId}-${handleType}`);\n                targetHandles = getHandles(node, handleBounds, 'target', `${nodeId}-${handleId}-${handleType}`);\n            }\n            res.push(...sourceHandles, ...targetHandles);\n        }\n        return res;\n    }, []);\n}\nfunction getHandleType(edgeUpdaterType, handleDomNode) {\n    if (edgeUpdaterType) {\n        return edgeUpdaterType;\n    }\n    else if (handleDomNode?.classList.contains('target')) {\n        return 'target';\n    }\n    else if (handleDomNode?.classList.contains('source')) {\n        return 'source';\n    }\n    return null;\n}\nfunction resetRecentHandle(handleDomNode) {\n    handleDomNode?.classList.remove('valid', 'connecting', 'react-flow__handle-valid', 'react-flow__handle-connecting');\n}\nfunction getConnectionStatus(isInsideConnectionRadius, isHandleValid) {\n    let connectionStatus = null;\n    if (isHandleValid) {\n        connectionStatus = 'valid';\n    }\n    else if (isInsideConnectionRadius && !isHandleValid) {\n        connectionStatus = 'invalid';\n    }\n    return connectionStatus;\n}\n\nfunction handlePointerDown({ event, handleId, nodeId, onConnect, isTarget, getState, setState, isValidConnection, edgeUpdaterType, onEdgeUpdateEnd, }) {\n    // when react-flow is used inside a shadow root we can't use document\n    const doc = getHostForElement(event.target);\n    const { connectionMode, domNode, autoPanOnConnect, connectionRadius, onConnectStart, panBy, getNodes, cancelConnection, } = getState();\n    let autoPanId = 0;\n    let closestHandle;\n    const { x, y } = getEventPosition(event);\n    const clickedHandle = doc?.elementFromPoint(x, y);\n    const handleType = getHandleType(edgeUpdaterType, clickedHandle);\n    const containerBounds = domNode?.getBoundingClientRect();\n    if (!containerBounds || !handleType) {\n        return;\n    }\n    let prevActiveHandle;\n    let connectionPosition = getEventPosition(event, containerBounds);\n    let autoPanStarted = false;\n    let connection = null;\n    let isValid = false;\n    let handleDomNode = null;\n    const handleLookup = getHandleLookup({\n        nodes: getNodes(),\n        nodeId,\n        handleId,\n        handleType,\n    });\n    // when the user is moving the mouse close to the edge of the canvas while connecting we move the canvas\n    const autoPan = () => {\n        if (!autoPanOnConnect) {\n            return;\n        }\n        const [xMovement, yMovement] = calcAutoPan(connectionPosition, containerBounds);\n        panBy({ x: xMovement, y: yMovement });\n        autoPanId = requestAnimationFrame(autoPan);\n    };\n    setState({\n        connectionPosition,\n        connectionStatus: null,\n        // connectionNodeId etc will be removed in the next major in favor of connectionStartHandle\n        connectionNodeId: nodeId,\n        connectionHandleId: handleId,\n        connectionHandleType: handleType,\n        connectionStartHandle: {\n            nodeId,\n            handleId,\n            type: handleType,\n        },\n        connectionEndHandle: null,\n    });\n    onConnectStart?.(event, { nodeId, handleId, handleType });\n    function onPointerMove(event) {\n        const { transform } = getState();\n        connectionPosition = getEventPosition(event, containerBounds);\n        const { handle, validHandleResult } = getClosestHandle(event, doc, pointToRendererPoint(connectionPosition, transform, false, [1, 1]), connectionRadius, handleLookup, (handle) => isValidHandle(handle, connectionMode, nodeId, handleId, isTarget ? 'target' : 'source', isValidConnection, doc));\n        closestHandle = handle;\n        if (!autoPanStarted) {\n            autoPan();\n            autoPanStarted = true;\n        }\n        handleDomNode = validHandleResult.handleDomNode;\n        connection = validHandleResult.connection;\n        isValid = validHandleResult.isValid;\n        setState({\n            connectionPosition: closestHandle && isValid\n                ? rendererPointToPoint({\n                    x: closestHandle.x,\n                    y: closestHandle.y,\n                }, transform)\n                : connectionPosition,\n            connectionStatus: getConnectionStatus(!!closestHandle, isValid),\n            connectionEndHandle: validHandleResult.endHandle,\n        });\n        if (!closestHandle && !isValid && !handleDomNode) {\n            return resetRecentHandle(prevActiveHandle);\n        }\n        if (connection.source !== connection.target && handleDomNode) {\n            resetRecentHandle(prevActiveHandle);\n            prevActiveHandle = handleDomNode;\n            // @todo: remove the old class names \"react-flow__handle-\" in the next major version\n            handleDomNode.classList.add('connecting', 'react-flow__handle-connecting');\n            handleDomNode.classList.toggle('valid', isValid);\n            handleDomNode.classList.toggle('react-flow__handle-valid', isValid);\n        }\n    }\n    function onPointerUp(event) {\n        if ((closestHandle || handleDomNode) && connection && isValid) {\n            onConnect?.(connection);\n        }\n        // it's important to get a fresh reference from the store here\n        // in order to get the latest state of onConnectEnd\n        getState().onConnectEnd?.(event);\n        if (edgeUpdaterType) {\n            onEdgeUpdateEnd?.(event);\n        }\n        resetRecentHandle(prevActiveHandle);\n        cancelConnection();\n        cancelAnimationFrame(autoPanId);\n        autoPanStarted = false;\n        isValid = false;\n        connection = null;\n        handleDomNode = null;\n        doc.removeEventListener('mousemove', onPointerMove);\n        doc.removeEventListener('mouseup', onPointerUp);\n        doc.removeEventListener('touchmove', onPointerMove);\n        doc.removeEventListener('touchend', onPointerUp);\n    }\n    doc.addEventListener('mousemove', onPointerMove);\n    doc.addEventListener('mouseup', onPointerUp);\n    doc.addEventListener('touchmove', onPointerMove);\n    doc.addEventListener('touchend', onPointerUp);\n}\n\nconst alwaysValid = () => true;\nconst selector$f = (s) => ({\n    connectionStartHandle: s.connectionStartHandle,\n    connectOnClick: s.connectOnClick,\n    noPanClassName: s.noPanClassName,\n});\nconst connectingSelector = (nodeId, handleId, type) => (state) => {\n    const { connectionStartHandle: startHandle, connectionEndHandle: endHandle, connectionClickStartHandle: clickHandle, } = state;\n    return {\n        connecting: (startHandle?.nodeId === nodeId && startHandle?.handleId === handleId && startHandle?.type === type) ||\n            (endHandle?.nodeId === nodeId && endHandle?.handleId === handleId && endHandle?.type === type),\n        clickConnecting: clickHandle?.nodeId === nodeId && clickHandle?.handleId === handleId && clickHandle?.type === type,\n    };\n};\nconst Handle = forwardRef(({ type = 'source', position = Position.Top, isValidConnection, isConnectable = true, isConnectableStart = true, isConnectableEnd = true, id, onConnect, children, className, onMouseDown, onTouchStart, ...rest }, ref) => {\n    const handleId = id || null;\n    const isTarget = type === 'target';\n    const store = useStoreApi();\n    const nodeId = useNodeId();\n    const { connectOnClick, noPanClassName } = useStore(selector$f, shallow);\n    const { connecting, clickConnecting } = useStore(connectingSelector(nodeId, handleId, type), shallow);\n    if (!nodeId) {\n        store.getState().onError?.('010', errorMessages['error010']());\n    }\n    const onConnectExtended = (params) => {\n        const { defaultEdgeOptions, onConnect: onConnectAction, hasDefaultEdges } = store.getState();\n        const edgeParams = {\n            ...defaultEdgeOptions,\n            ...params,\n        };\n        if (hasDefaultEdges) {\n            const { edges, setEdges } = store.getState();\n            setEdges(addEdge(edgeParams, edges));\n        }\n        onConnectAction?.(edgeParams);\n        onConnect?.(edgeParams);\n    };\n    const onPointerDown = (event) => {\n        if (!nodeId) {\n            return;\n        }\n        const isMouseTriggered = isMouseEvent(event);\n        if (isConnectableStart && ((isMouseTriggered && event.button === 0) || !isMouseTriggered)) {\n            handlePointerDown({\n                event,\n                handleId,\n                nodeId,\n                onConnect: onConnectExtended,\n                isTarget,\n                getState: store.getState,\n                setState: store.setState,\n                isValidConnection: isValidConnection || store.getState().isValidConnection || alwaysValid,\n            });\n        }\n        if (isMouseTriggered) {\n            onMouseDown?.(event);\n        }\n        else {\n            onTouchStart?.(event);\n        }\n    };\n    const onClick = (event) => {\n        const { onClickConnectStart, onClickConnectEnd, connectionClickStartHandle, connectionMode, isValidConnection: isValidConnectionStore, } = store.getState();\n        if (!nodeId || (!connectionClickStartHandle && !isConnectableStart)) {\n            return;\n        }\n        if (!connectionClickStartHandle) {\n            onClickConnectStart?.(event, { nodeId, handleId, handleType: type });\n            store.setState({ connectionClickStartHandle: { nodeId, type, handleId } });\n            return;\n        }\n        const doc = getHostForElement(event.target);\n        const isValidConnectionHandler = isValidConnection || isValidConnectionStore || alwaysValid;\n        const { connection, isValid } = isValidHandle({\n            nodeId,\n            id: handleId,\n            type,\n        }, connectionMode, connectionClickStartHandle.nodeId, connectionClickStartHandle.handleId || null, connectionClickStartHandle.type, isValidConnectionHandler, doc);\n        if (isValid) {\n            onConnectExtended(connection);\n        }\n        onClickConnectEnd?.(event);\n        store.setState({ connectionClickStartHandle: null });\n    };\n    return (jsx(\"div\", { \"data-handleid\": handleId, \"data-nodeid\": nodeId, \"data-handlepos\": position, \"data-id\": `${nodeId}-${handleId}-${type}`, className: cc([\n            'react-flow__handle',\n            `react-flow__handle-${position}`,\n            'nodrag',\n            noPanClassName,\n            className,\n            {\n                source: !isTarget,\n                target: isTarget,\n                connectable: isConnectable,\n                connectablestart: isConnectableStart,\n                connectableend: isConnectableEnd,\n                connecting: clickConnecting,\n                // this class is used to style the handle when the user is connecting\n                connectionindicator: isConnectable && ((isConnectableStart && !connecting) || (isConnectableEnd && connecting)),\n            },\n        ]), onMouseDown: onPointerDown, onTouchStart: onPointerDown, onClick: connectOnClick ? onClick : undefined, ref: ref, ...rest, children: children }));\n});\nHandle.displayName = 'Handle';\nvar Handle$1 = memo(Handle);\n\nconst DefaultNode = ({ data, isConnectable, targetPosition = Position.Top, sourcePosition = Position.Bottom, }) => {\n    return (jsxs(Fragment, { children: [jsx(Handle$1, { type: \"target\", position: targetPosition, isConnectable: isConnectable }), data?.label, jsx(Handle$1, { type: \"source\", position: sourcePosition, isConnectable: isConnectable })] }));\n};\nDefaultNode.displayName = 'DefaultNode';\nvar DefaultNode$1 = memo(DefaultNode);\n\nconst InputNode = ({ data, isConnectable, sourcePosition = Position.Bottom }) => (jsxs(Fragment, { children: [data?.label, jsx(Handle$1, { type: \"source\", position: sourcePosition, isConnectable: isConnectable })] }));\nInputNode.displayName = 'InputNode';\nvar InputNode$1 = memo(InputNode);\n\nconst OutputNode = ({ data, isConnectable, targetPosition = Position.Top }) => (jsxs(Fragment, { children: [jsx(Handle$1, { type: \"target\", position: targetPosition, isConnectable: isConnectable }), data?.label] }));\nOutputNode.displayName = 'OutputNode';\nvar OutputNode$1 = memo(OutputNode);\n\nconst GroupNode = () => null;\nGroupNode.displayName = 'GroupNode';\n\nconst selector$e = (s) => ({\n    selectedNodes: s.getNodes().filter((n) => n.selected),\n    selectedEdges: s.edges.filter((e) => e.selected),\n});\nconst selectId = (obj) => obj.id;\nfunction areEqual(a, b) {\n    return (shallow(a.selectedNodes.map(selectId), b.selectedNodes.map(selectId)) &&\n        shallow(a.selectedEdges.map(selectId), b.selectedEdges.map(selectId)));\n}\n// This is just a helper component for calling the onSelectionChange listener.\n// @TODO: Now that we have the onNodesChange and on EdgesChange listeners, do we still need this component?\nconst SelectionListener = memo(({ onSelectionChange }) => {\n    const store = useStoreApi();\n    const { selectedNodes, selectedEdges } = useStore(selector$e, areEqual);\n    useEffect(() => {\n        const params = { nodes: selectedNodes, edges: selectedEdges };\n        onSelectionChange?.(params);\n        store.getState().onSelectionChange?.(params);\n    }, [selectedNodes, selectedEdges, onSelectionChange]);\n    return null;\n});\nSelectionListener.displayName = 'SelectionListener';\nconst changeSelector = (s) => !!s.onSelectionChange;\nfunction Wrapper$1({ onSelectionChange }) {\n    const storeHasSelectionChange = useStore(changeSelector);\n    if (onSelectionChange || storeHasSelectionChange) {\n        return jsx(SelectionListener, { onSelectionChange: onSelectionChange });\n    }\n    return null;\n}\n\nconst selector$d = (s) => ({\n    setNodes: s.setNodes,\n    setEdges: s.setEdges,\n    setDefaultNodesAndEdges: s.setDefaultNodesAndEdges,\n    setMinZoom: s.setMinZoom,\n    setMaxZoom: s.setMaxZoom,\n    setTranslateExtent: s.setTranslateExtent,\n    setNodeExtent: s.setNodeExtent,\n    reset: s.reset,\n});\nfunction useStoreUpdater(value, setStoreState) {\n    useEffect(() => {\n        if (typeof value !== 'undefined') {\n            setStoreState(value);\n        }\n    }, [value]);\n}\n// updates with values in store that don't have a dedicated setter function\nfunction useDirectStoreUpdater(key, value, setState) {\n    useEffect(() => {\n        if (typeof value !== 'undefined') {\n            setState({ [key]: value });\n        }\n    }, [value]);\n}\nconst StoreUpdater = ({ nodes, edges, defaultNodes, defaultEdges, onConnect, onConnectStart, onConnectEnd, onClickConnectStart, onClickConnectEnd, nodesDraggable, nodesConnectable, nodesFocusable, edgesFocusable, edgesUpdatable, elevateNodesOnSelect, minZoom, maxZoom, nodeExtent, onNodesChange, onEdgesChange, elementsSelectable, connectionMode, snapGrid, snapToGrid, translateExtent, connectOnClick, defaultEdgeOptions, fitView, fitViewOptions, onNodesDelete, onEdgesDelete, onNodeDrag, onNodeDragStart, onNodeDragStop, onSelectionDrag, onSelectionDragStart, onSelectionDragStop, noPanClassName, nodeOrigin, rfId, autoPanOnConnect, autoPanOnNodeDrag, onError, connectionRadius, isValidConnection, }) => {\n    const { setNodes, setEdges, setDefaultNodesAndEdges, setMinZoom, setMaxZoom, setTranslateExtent, setNodeExtent, reset, } = useStore(selector$d, shallow);\n    const store = useStoreApi();\n    useEffect(() => {\n        const edgesWithDefaults = defaultEdges?.map((e) => ({ ...e, ...defaultEdgeOptions }));\n        setDefaultNodesAndEdges(defaultNodes, edgesWithDefaults);\n        return () => {\n            reset();\n        };\n    }, []);\n    useDirectStoreUpdater('defaultEdgeOptions', defaultEdgeOptions, store.setState);\n    useDirectStoreUpdater('connectionMode', connectionMode, store.setState);\n    useDirectStoreUpdater('onConnect', onConnect, store.setState);\n    useDirectStoreUpdater('onConnectStart', onConnectStart, store.setState);\n    useDirectStoreUpdater('onConnectEnd', onConnectEnd, store.setState);\n    useDirectStoreUpdater('onClickConnectStart', onClickConnectStart, store.setState);\n    useDirectStoreUpdater('onClickConnectEnd', onClickConnectEnd, store.setState);\n    useDirectStoreUpdater('nodesDraggable', nodesDraggable, store.setState);\n    useDirectStoreUpdater('nodesConnectable', nodesConnectable, store.setState);\n    useDirectStoreUpdater('nodesFocusable', nodesFocusable, store.setState);\n    useDirectStoreUpdater('edgesFocusable', edgesFocusable, store.setState);\n    useDirectStoreUpdater('edgesUpdatable', edgesUpdatable, store.setState);\n    useDirectStoreUpdater('elementsSelectable', elementsSelectable, store.setState);\n    useDirectStoreUpdater('elevateNodesOnSelect', elevateNodesOnSelect, store.setState);\n    useDirectStoreUpdater('snapToGrid', snapToGrid, store.setState);\n    useDirectStoreUpdater('snapGrid', snapGrid, store.setState);\n    useDirectStoreUpdater('onNodesChange', onNodesChange, store.setState);\n    useDirectStoreUpdater('onEdgesChange', onEdgesChange, store.setState);\n    useDirectStoreUpdater('connectOnClick', connectOnClick, store.setState);\n    useDirectStoreUpdater('fitViewOnInit', fitView, store.setState);\n    useDirectStoreUpdater('fitViewOnInitOptions', fitViewOptions, store.setState);\n    useDirectStoreUpdater('onNodesDelete', onNodesDelete, store.setState);\n    useDirectStoreUpdater('onEdgesDelete', onEdgesDelete, store.setState);\n    useDirectStoreUpdater('onNodeDrag', onNodeDrag, store.setState);\n    useDirectStoreUpdater('onNodeDragStart', onNodeDragStart, store.setState);\n    useDirectStoreUpdater('onNodeDragStop', onNodeDragStop, store.setState);\n    useDirectStoreUpdater('onSelectionDrag', onSelectionDrag, store.setState);\n    useDirectStoreUpdater('onSelectionDragStart', onSelectionDragStart, store.setState);\n    useDirectStoreUpdater('onSelectionDragStop', onSelectionDragStop, store.setState);\n    useDirectStoreUpdater('noPanClassName', noPanClassName, store.setState);\n    useDirectStoreUpdater('nodeOrigin', nodeOrigin, store.setState);\n    useDirectStoreUpdater('rfId', rfId, store.setState);\n    useDirectStoreUpdater('autoPanOnConnect', autoPanOnConnect, store.setState);\n    useDirectStoreUpdater('autoPanOnNodeDrag', autoPanOnNodeDrag, store.setState);\n    useDirectStoreUpdater('onError', onError, store.setState);\n    useDirectStoreUpdater('connectionRadius', connectionRadius, store.setState);\n    useDirectStoreUpdater('isValidConnection', isValidConnection, store.setState);\n    useStoreUpdater(nodes, setNodes);\n    useStoreUpdater(edges, setEdges);\n    useStoreUpdater(minZoom, setMinZoom);\n    useStoreUpdater(maxZoom, setMaxZoom);\n    useStoreUpdater(translateExtent, setTranslateExtent);\n    useStoreUpdater(nodeExtent, setNodeExtent);\n    return null;\n};\n\nconst style = { display: 'none' };\nconst ariaLiveStyle = {\n    position: 'absolute',\n    width: 1,\n    height: 1,\n    margin: -1,\n    border: 0,\n    padding: 0,\n    overflow: 'hidden',\n    clip: 'rect(0px, 0px, 0px, 0px)',\n    clipPath: 'inset(100%)',\n};\nconst ARIA_NODE_DESC_KEY = 'react-flow__node-desc';\nconst ARIA_EDGE_DESC_KEY = 'react-flow__edge-desc';\nconst ARIA_LIVE_MESSAGE = 'react-flow__aria-live';\nconst selector$c = (s) => s.ariaLiveMessage;\nfunction AriaLiveMessage({ rfId }) {\n    const ariaLiveMessage = useStore(selector$c);\n    return (jsx(\"div\", { id: `${ARIA_LIVE_MESSAGE}-${rfId}`, \"aria-live\": \"assertive\", \"aria-atomic\": \"true\", style: ariaLiveStyle, children: ariaLiveMessage }));\n}\nfunction A11yDescriptions({ rfId, disableKeyboardA11y }) {\n    return (jsxs(Fragment, { children: [jsxs(\"div\", { id: `${ARIA_NODE_DESC_KEY}-${rfId}`, style: style, children: [\"Press enter or space to select a node.\", !disableKeyboardA11y && 'You can then use the arrow keys to move the node around.', \" Press delete to remove it and escape to cancel.\", ' '] }), jsx(\"div\", { id: `${ARIA_EDGE_DESC_KEY}-${rfId}`, style: style, children: \"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.\" }), !disableKeyboardA11y && jsx(AriaLiveMessage, { rfId: rfId })] }));\n}\n\nconst doc = typeof document !== 'undefined' ? document : null;\n// the keycode can be a string 'a' or an array of strings ['a', 'a+d']\n// a string means a single key 'a' or a combination when '+' is used 'a+d'\n// an array means different possibilities. Explainer: ['a', 'd+s'] here the\n// user can use the single key 'a' or the combination 'd' + 's'\nvar useKeyPress = (keyCode = null, options = { target: doc }) => {\n    const [keyPressed, setKeyPressed] = useState(false);\n    // we need to remember if a modifier key is pressed in order to track it\n    const modifierPressed = useRef(false);\n    // we need to remember the pressed keys in order to support combinations\n    const pressedKeys = useRef(new Set([]));\n    // keyCodes = array with single keys [['a']] or key combinations [['a', 's']]\n    // keysToWatch = array with all keys flattened ['a', 'd', 'ShiftLeft']\n    // used to check if we store event.code or event.key. When the code is in the list of keysToWatch\n    // we use the code otherwise the key. Explainer: When you press the left \"command\" key, the code is \"MetaLeft\"\n    // and the key is \"Meta\". We want users to be able to pass keys and codes so we assume that the key is meant when\n    // we can't find it in the list of keysToWatch.\n    const [keyCodes, keysToWatch] = useMemo(() => {\n        if (keyCode !== null) {\n            const keyCodeArr = Array.isArray(keyCode) ? keyCode : [keyCode];\n            const keys = keyCodeArr.filter((kc) => typeof kc === 'string').map((kc) => kc.split('+'));\n            const keysFlat = keys.reduce((res, item) => res.concat(...item), []);\n            return [keys, keysFlat];\n        }\n        return [[], []];\n    }, [keyCode]);\n    useEffect(() => {\n        if (keyCode !== null) {\n            const downHandler = (event) => {\n                modifierPressed.current = event.ctrlKey || event.metaKey || event.shiftKey;\n                if (!modifierPressed.current && isInputDOMNode(event)) {\n                    return false;\n                }\n                const keyOrCode = useKeyOrCode(event.code, keysToWatch);\n                pressedKeys.current.add(event[keyOrCode]);\n                if (isMatchingKey(keyCodes, pressedKeys.current, false)) {\n                    event.preventDefault();\n                    setKeyPressed(true);\n                }\n            };\n            const upHandler = (event) => {\n                if (!modifierPressed.current && isInputDOMNode(event)) {\n                    return false;\n                }\n                const keyOrCode = useKeyOrCode(event.code, keysToWatch);\n                if (isMatchingKey(keyCodes, pressedKeys.current, true)) {\n                    setKeyPressed(false);\n                    pressedKeys.current.clear();\n                }\n                else {\n                    pressedKeys.current.delete(event[keyOrCode]);\n                }\n                // fix for Mac: when cmd key is pressed, keyup is not triggered for any other key, see: https://stackoverflow.com/questions/27380018/when-cmd-key-is-kept-pressed-keyup-is-not-triggered-for-any-other-key\n                if (event.key === 'Meta') {\n                    pressedKeys.current.clear();\n                }\n                modifierPressed.current = false;\n            };\n            const resetHandler = () => {\n                pressedKeys.current.clear();\n                setKeyPressed(false);\n            };\n            options?.target?.addEventListener('keydown', downHandler);\n            options?.target?.addEventListener('keyup', upHandler);\n            window.addEventListener('blur', resetHandler);\n            return () => {\n                options?.target?.removeEventListener('keydown', downHandler);\n                options?.target?.removeEventListener('keyup', upHandler);\n                window.removeEventListener('blur', resetHandler);\n            };\n        }\n    }, [keyCode, setKeyPressed]);\n    return keyPressed;\n};\n// utils\nfunction isMatchingKey(keyCodes, pressedKeys, isUp) {\n    return (keyCodes\n        // we only want to compare same sizes of keyCode definitions\n        // and pressed keys. When the user specified 'Meta' as a key somewhere\n        // this would also be truthy without this filter when user presses 'Meta' + 'r'\n        .filter((keys) => isUp || keys.length === pressedKeys.size)\n        // since we want to support multiple possibilities only one of the\n        // combinations need to be part of the pressed keys\n        .some((keys) => keys.every((k) => pressedKeys.has(k))));\n}\nfunction useKeyOrCode(eventCode, keysToWatch) {\n    return keysToWatch.includes(eventCode) ? 'code' : 'key';\n}\n\nfunction calculateXYZPosition(node, nodeInternals, result, nodeOrigin) {\n    if (!node.parentNode) {\n        return result;\n    }\n    const parentNode = nodeInternals.get(node.parentNode);\n    const parentNodePosition = getNodePositionWithOrigin(parentNode, nodeOrigin);\n    return calculateXYZPosition(parentNode, nodeInternals, {\n        x: (result.x ?? 0) + parentNodePosition.x,\n        y: (result.y ?? 0) + parentNodePosition.y,\n        z: (parentNode[internalsSymbol]?.z ?? 0) > (result.z ?? 0) ? parentNode[internalsSymbol]?.z ?? 0 : result.z ?? 0,\n    }, nodeOrigin);\n}\nfunction updateAbsoluteNodePositions(nodeInternals, nodeOrigin, parentNodes) {\n    nodeInternals.forEach((node) => {\n        if (node.parentNode && !nodeInternals.has(node.parentNode)) {\n            throw new Error(`Parent node ${node.parentNode} not found`);\n        }\n        if (node.parentNode || parentNodes?.[node.id]) {\n            const { x, y, z } = calculateXYZPosition(node, nodeInternals, {\n                ...node.position,\n                z: node[internalsSymbol]?.z ?? 0,\n            }, nodeOrigin);\n            node.positionAbsolute = {\n                x,\n                y,\n            };\n            node[internalsSymbol].z = z;\n            if (parentNodes?.[node.id]) {\n                node[internalsSymbol].isParent = true;\n            }\n        }\n    });\n}\nfunction createNodeInternals(nodes, nodeInternals, nodeOrigin, elevateNodesOnSelect) {\n    const nextNodeInternals = new Map();\n    const parentNodes = {};\n    const selectedNodeZ = elevateNodesOnSelect ? 1000 : 0;\n    nodes.forEach((node) => {\n        const z = (isNumeric(node.zIndex) ? node.zIndex : 0) + (node.selected ? selectedNodeZ : 0);\n        const currInternals = nodeInternals.get(node.id);\n        const internals = {\n            width: currInternals?.width,\n            height: currInternals?.height,\n            ...node,\n            positionAbsolute: {\n                x: node.position.x,\n                y: node.position.y,\n            },\n        };\n        if (node.parentNode) {\n            internals.parentNode = node.parentNode;\n            parentNodes[node.parentNode] = true;\n        }\n        Object.defineProperty(internals, internalsSymbol, {\n            enumerable: false,\n            value: {\n                handleBounds: currInternals?.[internalsSymbol]?.handleBounds,\n                z,\n            },\n        });\n        nextNodeInternals.set(node.id, internals);\n    });\n    updateAbsoluteNodePositions(nextNodeInternals, nodeOrigin, parentNodes);\n    return nextNodeInternals;\n}\nfunction fitView(get, options = {}) {\n    const { getNodes, width, height, minZoom, maxZoom, d3Zoom, d3Selection, fitViewOnInitDone, fitViewOnInit, nodeOrigin, } = get();\n    const isInitialFitView = options.initial && !fitViewOnInitDone && fitViewOnInit;\n    const d3initialized = d3Zoom && d3Selection;\n    if (d3initialized && (isInitialFitView || !options.initial)) {\n        const nodes = getNodes().filter((n) => {\n            const isVisible = options.includeHiddenNodes ? n.width && n.height : !n.hidden;\n            if (options.nodes?.length) {\n                return isVisible && options.nodes.some((optionNode) => optionNode.id === n.id);\n            }\n            return isVisible;\n        });\n        const nodesInitialized = nodes.every((n) => n.width && n.height);\n        if (nodes.length > 0 && nodesInitialized) {\n            const bounds = getRectOfNodes(nodes, nodeOrigin);\n            const [x, y, zoom] = getTransformForBounds(bounds, width, height, options.minZoom ?? minZoom, options.maxZoom ?? maxZoom, options.padding ?? 0.1);\n            const nextTransform = zoomIdentity.translate(x, y).scale(zoom);\n            if (typeof options.duration === 'number' && options.duration > 0) {\n                d3Zoom.transform(getD3Transition(d3Selection, options.duration), nextTransform);\n            }\n            else {\n                d3Zoom.transform(d3Selection, nextTransform);\n            }\n            return true;\n        }\n    }\n    return false;\n}\nfunction handleControlledNodeSelectionChange(nodeChanges, nodeInternals) {\n    nodeChanges.forEach((change) => {\n        const node = nodeInternals.get(change.id);\n        if (node) {\n            nodeInternals.set(node.id, {\n                ...node,\n                [internalsSymbol]: node[internalsSymbol],\n                selected: change.selected,\n            });\n        }\n    });\n    return new Map(nodeInternals);\n}\nfunction handleControlledEdgeSelectionChange(edgeChanges, edges) {\n    return edges.map((e) => {\n        const change = edgeChanges.find((change) => change.id === e.id);\n        if (change) {\n            e.selected = change.selected;\n        }\n        return e;\n    });\n}\nfunction updateNodesAndEdgesSelections({ changedNodes, changedEdges, get, set }) {\n    const { nodeInternals, edges, onNodesChange, onEdgesChange, hasDefaultNodes, hasDefaultEdges } = get();\n    if (changedNodes?.length) {\n        if (hasDefaultNodes) {\n            set({ nodeInternals: handleControlledNodeSelectionChange(changedNodes, nodeInternals) });\n        }\n        onNodesChange?.(changedNodes);\n    }\n    if (changedEdges?.length) {\n        if (hasDefaultEdges) {\n            set({ edges: handleControlledEdgeSelectionChange(changedEdges, edges) });\n        }\n        onEdgesChange?.(changedEdges);\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-empty-function\nconst noop = () => { };\nconst initialViewportHelper = {\n    zoomIn: noop,\n    zoomOut: noop,\n    zoomTo: noop,\n    getZoom: () => 1,\n    setViewport: noop,\n    getViewport: () => ({ x: 0, y: 0, zoom: 1 }),\n    fitView: () => false,\n    setCenter: noop,\n    fitBounds: noop,\n    project: (position) => position,\n    viewportInitialized: false,\n};\nconst selector$b = (s) => ({\n    d3Zoom: s.d3Zoom,\n    d3Selection: s.d3Selection,\n});\nconst useViewportHelper = () => {\n    const store = useStoreApi();\n    const { d3Zoom, d3Selection } = useStore(selector$b, shallow);\n    const viewportHelperFunctions = useMemo(() => {\n        if (d3Selection && d3Zoom) {\n            return {\n                zoomIn: (options) => d3Zoom.scaleBy(getD3Transition(d3Selection, options?.duration), 1.2),\n                zoomOut: (options) => d3Zoom.scaleBy(getD3Transition(d3Selection, options?.duration), 1 / 1.2),\n                zoomTo: (zoomLevel, options) => d3Zoom.scaleTo(getD3Transition(d3Selection, options?.duration), zoomLevel),\n                getZoom: () => store.getState().transform[2],\n                setViewport: (transform, options) => {\n                    const [x, y, zoom] = store.getState().transform;\n                    const nextTransform = zoomIdentity\n                        .translate(transform.x ?? x, transform.y ?? y)\n                        .scale(transform.zoom ?? zoom);\n                    d3Zoom.transform(getD3Transition(d3Selection, options?.duration), nextTransform);\n                },\n                getViewport: () => {\n                    const [x, y, zoom] = store.getState().transform;\n                    return { x, y, zoom };\n                },\n                fitView: (options) => fitView(store.getState, options),\n                setCenter: (x, y, options) => {\n                    const { width, height, maxZoom } = store.getState();\n                    const nextZoom = typeof options?.zoom !== 'undefined' ? options.zoom : maxZoom;\n                    const centerX = width / 2 - x * nextZoom;\n                    const centerY = height / 2 - y * nextZoom;\n                    const transform = zoomIdentity.translate(centerX, centerY).scale(nextZoom);\n                    d3Zoom.transform(getD3Transition(d3Selection, options?.duration), transform);\n                },\n                fitBounds: (bounds, options) => {\n                    const { width, height, minZoom, maxZoom } = store.getState();\n                    const [x, y, zoom] = getTransformForBounds(bounds, width, height, minZoom, maxZoom, options?.padding ?? 0.1);\n                    const transform = zoomIdentity.translate(x, y).scale(zoom);\n                    d3Zoom.transform(getD3Transition(d3Selection, options?.duration), transform);\n                },\n                project: (position) => {\n                    const { transform, snapToGrid, snapGrid } = store.getState();\n                    return pointToRendererPoint(position, transform, snapToGrid, snapGrid);\n                },\n                viewportInitialized: true,\n            };\n        }\n        return initialViewportHelper;\n    }, [d3Zoom, d3Selection]);\n    return viewportHelperFunctions;\n};\n\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nfunction useReactFlow() {\n    const viewportHelper = useViewportHelper();\n    const store = useStoreApi();\n    const getNodes = useCallback(() => {\n        return store\n            .getState()\n            .getNodes()\n            .map((n) => ({ ...n }));\n    }, []);\n    const getNode = useCallback((id) => {\n        return store.getState().nodeInternals.get(id);\n    }, []);\n    const getEdges = useCallback(() => {\n        const { edges = [] } = store.getState();\n        return edges.map((e) => ({ ...e }));\n    }, []);\n    const getEdge = useCallback((id) => {\n        const { edges = [] } = store.getState();\n        return edges.find((e) => e.id === id);\n    }, []);\n    const setNodes = useCallback((payload) => {\n        const { getNodes, setNodes, hasDefaultNodes, onNodesChange } = store.getState();\n        const nodes = getNodes();\n        const nextNodes = typeof payload === 'function' ? payload(nodes) : payload;\n        if (hasDefaultNodes) {\n            setNodes(nextNodes);\n        }\n        else if (onNodesChange) {\n            const changes = nextNodes.length === 0\n                ? nodes.map((node) => ({ type: 'remove', id: node.id }))\n                : nextNodes.map((node) => ({ item: node, type: 'reset' }));\n            onNodesChange(changes);\n        }\n    }, []);\n    const setEdges = useCallback((payload) => {\n        const { edges = [], setEdges, hasDefaultEdges, onEdgesChange } = store.getState();\n        const nextEdges = typeof payload === 'function' ? payload(edges) : payload;\n        if (hasDefaultEdges) {\n            setEdges(nextEdges);\n        }\n        else if (onEdgesChange) {\n            const changes = nextEdges.length === 0\n                ? edges.map((edge) => ({ type: 'remove', id: edge.id }))\n                : nextEdges.map((edge) => ({ item: edge, type: 'reset' }));\n            onEdgesChange(changes);\n        }\n    }, []);\n    const addNodes = useCallback((payload) => {\n        const nodes = Array.isArray(payload) ? payload : [payload];\n        const { getNodes, setNodes, hasDefaultNodes, onNodesChange } = store.getState();\n        if (hasDefaultNodes) {\n            const currentNodes = getNodes();\n            const nextNodes = [...currentNodes, ...nodes];\n            setNodes(nextNodes);\n        }\n        else if (onNodesChange) {\n            const changes = nodes.map((node) => ({ item: node, type: 'add' }));\n            onNodesChange(changes);\n        }\n    }, []);\n    const addEdges = useCallback((payload) => {\n        const nextEdges = Array.isArray(payload) ? payload : [payload];\n        const { edges = [], setEdges, hasDefaultEdges, onEdgesChange } = store.getState();\n        if (hasDefaultEdges) {\n            setEdges([...edges, ...nextEdges]);\n        }\n        else if (onEdgesChange) {\n            const changes = nextEdges.map((edge) => ({ item: edge, type: 'add' }));\n            onEdgesChange(changes);\n        }\n    }, []);\n    const toObject = useCallback(() => {\n        const { getNodes, edges = [], transform } = store.getState();\n        const [x, y, zoom] = transform;\n        return {\n            nodes: getNodes().map((n) => ({ ...n })),\n            edges: edges.map((e) => ({ ...e })),\n            viewport: {\n                x,\n                y,\n                zoom,\n            },\n        };\n    }, []);\n    const deleteElements = useCallback(({ nodes: nodesDeleted, edges: edgesDeleted }) => {\n        const { nodeInternals, getNodes, edges, hasDefaultNodes, hasDefaultEdges, onNodesDelete, onEdgesDelete, onNodesChange, onEdgesChange, } = store.getState();\n        const nodeIds = (nodesDeleted || []).map((node) => node.id);\n        const edgeIds = (edgesDeleted || []).map((edge) => edge.id);\n        const nodesToRemove = getNodes().reduce((res, node) => {\n            const parentHit = !nodeIds.includes(node.id) && node.parentNode && res.find((n) => n.id === node.parentNode);\n            const deletable = typeof node.deletable === 'boolean' ? node.deletable : true;\n            if (deletable && (nodeIds.includes(node.id) || parentHit)) {\n                res.push(node);\n            }\n            return res;\n        }, []);\n        const deletableEdges = edges.filter((e) => (typeof e.deletable === 'boolean' ? e.deletable : true));\n        const initialHitEdges = deletableEdges.filter((e) => edgeIds.includes(e.id));\n        if (nodesToRemove || initialHitEdges) {\n            const connectedEdges = getConnectedEdges(nodesToRemove, deletableEdges);\n            const edgesToRemove = [...initialHitEdges, ...connectedEdges];\n            const edgeIdsToRemove = edgesToRemove.reduce((res, edge) => {\n                if (!res.includes(edge.id)) {\n                    res.push(edge.id);\n                }\n                return res;\n            }, []);\n            if (hasDefaultEdges || hasDefaultNodes) {\n                if (hasDefaultEdges) {\n                    store.setState({\n                        edges: edges.filter((e) => !edgeIdsToRemove.includes(e.id)),\n                    });\n                }\n                if (hasDefaultNodes) {\n                    nodesToRemove.forEach((node) => {\n                        nodeInternals.delete(node.id);\n                    });\n                    store.setState({\n                        nodeInternals: new Map(nodeInternals),\n                    });\n                }\n            }\n            if (edgeIdsToRemove.length > 0) {\n                onEdgesDelete?.(edgesToRemove);\n                if (onEdgesChange) {\n                    onEdgesChange(edgeIdsToRemove.map((id) => ({\n                        id,\n                        type: 'remove',\n                    })));\n                }\n            }\n            if (nodesToRemove.length > 0) {\n                onNodesDelete?.(nodesToRemove);\n                if (onNodesChange) {\n                    const nodeChanges = nodesToRemove.map((n) => ({ id: n.id, type: 'remove' }));\n                    onNodesChange(nodeChanges);\n                }\n            }\n        }\n    }, []);\n    const getNodeRect = useCallback((nodeOrRect) => {\n        const isRect = isRectObject(nodeOrRect);\n        const node = isRect ? null : store.getState().nodeInternals.get(nodeOrRect.id);\n        const nodeRect = isRect ? nodeOrRect : nodeToRect(node);\n        return [nodeRect, node, isRect];\n    }, []);\n    const getIntersectingNodes = useCallback((nodeOrRect, partially = true, nodes) => {\n        const [nodeRect, node, isRect] = getNodeRect(nodeOrRect);\n        if (!nodeRect) {\n            return [];\n        }\n        return (nodes || store.getState().getNodes()).filter((n) => {\n            if (!isRect && (n.id === node.id || !n.positionAbsolute)) {\n                return false;\n            }\n            const currNodeRect = nodeToRect(n);\n            const overlappingArea = getOverlappingArea(currNodeRect, nodeRect);\n            const partiallyVisible = partially && overlappingArea > 0;\n            return partiallyVisible || overlappingArea >= nodeOrRect.width * nodeOrRect.height;\n        });\n    }, []);\n    const isNodeIntersecting = useCallback((nodeOrRect, area, partially = true) => {\n        const [nodeRect] = getNodeRect(nodeOrRect);\n        if (!nodeRect) {\n            return false;\n        }\n        const overlappingArea = getOverlappingArea(nodeRect, area);\n        const partiallyVisible = partially && overlappingArea > 0;\n        return partiallyVisible || overlappingArea >= nodeOrRect.width * nodeOrRect.height;\n    }, []);\n    return useMemo(() => {\n        return {\n            ...viewportHelper,\n            getNodes,\n            getNode,\n            getEdges,\n            getEdge,\n            setNodes,\n            setEdges,\n            addNodes,\n            addEdges,\n            toObject,\n            deleteElements,\n            getIntersectingNodes,\n            isNodeIntersecting,\n        };\n    }, [\n        viewportHelper,\n        getNodes,\n        getNode,\n        getEdges,\n        getEdge,\n        setNodes,\n        setEdges,\n        addNodes,\n        addEdges,\n        toObject,\n        deleteElements,\n        getIntersectingNodes,\n        isNodeIntersecting,\n    ]);\n}\n\nvar useGlobalKeyHandler = ({ deleteKeyCode, multiSelectionKeyCode }) => {\n    const store = useStoreApi();\n    const { deleteElements } = useReactFlow();\n    const deleteKeyPressed = useKeyPress(deleteKeyCode);\n    const multiSelectionKeyPressed = useKeyPress(multiSelectionKeyCode);\n    useEffect(() => {\n        if (deleteKeyPressed) {\n            const { edges, getNodes } = store.getState();\n            const selectedNodes = getNodes().filter((node) => node.selected);\n            const selectedEdges = edges.filter((edge) => edge.selected);\n            deleteElements({ nodes: selectedNodes, edges: selectedEdges });\n            store.setState({ nodesSelectionActive: false });\n        }\n    }, [deleteKeyPressed]);\n    useEffect(() => {\n        store.setState({ multiSelectionActive: multiSelectionKeyPressed });\n    }, [multiSelectionKeyPressed]);\n};\n\nfunction useResizeHandler(rendererNode) {\n    const store = useStoreApi();\n    useEffect(() => {\n        let resizeObserver;\n        const updateDimensions = () => {\n            if (!rendererNode.current) {\n                return;\n            }\n            const size = getDimensions(rendererNode.current);\n            if (size.height === 0 || size.width === 0) {\n                store.getState().onError?.('004', errorMessages['error004']());\n            }\n            store.setState({ width: size.width || 500, height: size.height || 500 });\n        };\n        updateDimensions();\n        window.addEventListener('resize', updateDimensions);\n        if (rendererNode.current) {\n            resizeObserver = new ResizeObserver(() => updateDimensions());\n            resizeObserver.observe(rendererNode.current);\n        }\n        return () => {\n            window.removeEventListener('resize', updateDimensions);\n            if (resizeObserver && rendererNode.current) {\n                resizeObserver.unobserve(rendererNode.current);\n            }\n        };\n    }, []);\n}\n\nconst containerStyle = {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n};\n\nconst viewChanged = (prevViewport, eventTransform) => prevViewport.x !== eventTransform.x || prevViewport.y !== eventTransform.y || prevViewport.zoom !== eventTransform.k;\nconst eventToFlowTransform = (eventTransform) => ({\n    x: eventTransform.x,\n    y: eventTransform.y,\n    zoom: eventTransform.k,\n});\nconst isWrappedWithClass = (event, className) => event.target.closest(`.${className}`);\nconst isRightClickPan = (panOnDrag, usedButton) => usedButton === 2 && Array.isArray(panOnDrag) && panOnDrag.includes(2);\nconst wheelDelta = (event) => {\n    const factor = event.ctrlKey && isMacOs() ? 10 : 1;\n    return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * factor;\n};\nconst selector$a = (s) => ({\n    d3Zoom: s.d3Zoom,\n    d3Selection: s.d3Selection,\n    d3ZoomHandler: s.d3ZoomHandler,\n    userSelectionActive: s.userSelectionActive,\n});\nconst ZoomPane = ({ onMove, onMoveStart, onMoveEnd, onPaneContextMenu, zoomOnScroll = true, zoomOnPinch = true, panOnScroll = false, panOnScrollSpeed = 0.5, panOnScrollMode = PanOnScrollMode.Free, zoomOnDoubleClick = true, elementsSelectable, panOnDrag = true, defaultViewport, translateExtent, minZoom, maxZoom, zoomActivationKeyCode, preventScrolling = true, children, noWheelClassName, noPanClassName, }) => {\n    const timerId = useRef();\n    const store = useStoreApi();\n    const isZoomingOrPanning = useRef(false);\n    const zoomedWithRightMouseButton = useRef(false);\n    const zoomPane = useRef(null);\n    const prevTransform = useRef({ x: 0, y: 0, zoom: 0 });\n    const { d3Zoom, d3Selection, d3ZoomHandler, userSelectionActive } = useStore(selector$a, shallow);\n    const zoomActivationKeyPressed = useKeyPress(zoomActivationKeyCode);\n    const mouseButton = useRef(0);\n    const isPanScrolling = useRef(false);\n    const panScrollTimeout = useRef();\n    useResizeHandler(zoomPane);\n    useEffect(() => {\n        if (zoomPane.current) {\n            const bbox = zoomPane.current.getBoundingClientRect();\n            const d3ZoomInstance = zoom().scaleExtent([minZoom, maxZoom]).translateExtent(translateExtent);\n            const selection = select(zoomPane.current).call(d3ZoomInstance);\n            const updatedTransform = zoomIdentity\n                .translate(defaultViewport.x, defaultViewport.y)\n                .scale(clamp(defaultViewport.zoom, minZoom, maxZoom));\n            const extent = [\n                [0, 0],\n                [bbox.width, bbox.height],\n            ];\n            const constrainedTransform = d3ZoomInstance.constrain()(updatedTransform, extent, translateExtent);\n            d3ZoomInstance.transform(selection, constrainedTransform);\n            d3ZoomInstance.wheelDelta(wheelDelta);\n            store.setState({\n                d3Zoom: d3ZoomInstance,\n                d3Selection: selection,\n                d3ZoomHandler: selection.on('wheel.zoom'),\n                // we need to pass transform because zoom handler is not registered when we set the initial transform\n                transform: [constrainedTransform.x, constrainedTransform.y, constrainedTransform.k],\n                domNode: zoomPane.current.closest('.react-flow'),\n            });\n        }\n    }, []);\n    useEffect(() => {\n        if (d3Selection && d3Zoom) {\n            if (panOnScroll && !zoomActivationKeyPressed && !userSelectionActive) {\n                d3Selection.on('wheel.zoom', (event) => {\n                    if (isWrappedWithClass(event, noWheelClassName)) {\n                        return false;\n                    }\n                    event.preventDefault();\n                    event.stopImmediatePropagation();\n                    const currentZoom = d3Selection.property('__zoom').k || 1;\n                    const _isMacOs = isMacOs();\n                    // macos sets ctrlKey=true for pinch gesture on a trackpad\n                    if (event.ctrlKey && zoomOnPinch && _isMacOs) {\n                        const point = pointer(event);\n                        const pinchDelta = wheelDelta(event);\n                        const zoom = currentZoom * Math.pow(2, pinchDelta);\n                        // @ts-ignore\n                        d3Zoom.scaleTo(d3Selection, zoom, point, event);\n                        return;\n                    }\n                    // increase scroll speed in firefox\n                    // firefox: deltaMode === 1; chrome: deltaMode === 0\n                    const deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n                    let deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n                    let deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n                    // this enables vertical scrolling with shift + scroll on windows\n                    if (!_isMacOs && event.shiftKey && panOnScrollMode !== PanOnScrollMode.Vertical) {\n                        deltaX = event.deltaY * deltaNormalize;\n                        deltaY = 0;\n                    }\n                    d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed, \n                    // @ts-ignore\n                    { internal: true });\n                    const nextViewport = eventToFlowTransform(d3Selection.property('__zoom'));\n                    const { onViewportChangeStart, onViewportChange, onViewportChangeEnd } = store.getState();\n                    clearTimeout(panScrollTimeout.current);\n                    // for pan on scroll we need to handle the event calls on our own\n                    // we can't use the start, zoom and end events from d3-zoom\n                    // because start and move gets called on every scroll event and not once at the beginning\n                    if (!isPanScrolling.current) {\n                        isPanScrolling.current = true;\n                        onMoveStart?.(event, nextViewport);\n                        onViewportChangeStart?.(nextViewport);\n                    }\n                    if (isPanScrolling.current) {\n                        onMove?.(event, nextViewport);\n                        onViewportChange?.(nextViewport);\n                        panScrollTimeout.current = setTimeout(() => {\n                            onMoveEnd?.(event, nextViewport);\n                            onViewportChangeEnd?.(nextViewport);\n                            isPanScrolling.current = false;\n                        }, 150);\n                    }\n                }, { passive: false });\n            }\n            else if (typeof d3ZoomHandler !== 'undefined') {\n                d3Selection.on('wheel.zoom', function (event, d) {\n                    if (!preventScrolling || isWrappedWithClass(event, noWheelClassName)) {\n                        return null;\n                    }\n                    event.preventDefault();\n                    d3ZoomHandler.call(this, event, d);\n                }, { passive: false });\n            }\n        }\n    }, [\n        userSelectionActive,\n        panOnScroll,\n        panOnScrollMode,\n        d3Selection,\n        d3Zoom,\n        d3ZoomHandler,\n        zoomActivationKeyPressed,\n        zoomOnPinch,\n        preventScrolling,\n        noWheelClassName,\n        onMoveStart,\n        onMove,\n        onMoveEnd,\n    ]);\n    useEffect(() => {\n        if (d3Zoom) {\n            d3Zoom.on('start', (event) => {\n                if (!event.sourceEvent || event.sourceEvent.internal) {\n                    return null;\n                }\n                // we need to remember it here, because it's always 0 in the \"zoom\" event\n                mouseButton.current = event.sourceEvent?.button;\n                const { onViewportChangeStart } = store.getState();\n                const flowTransform = eventToFlowTransform(event.transform);\n                isZoomingOrPanning.current = true;\n                prevTransform.current = flowTransform;\n                if (event.sourceEvent?.type === 'mousedown') {\n                    store.setState({ paneDragging: true });\n                }\n                onViewportChangeStart?.(flowTransform);\n                onMoveStart?.(event.sourceEvent, flowTransform);\n            });\n        }\n    }, [d3Zoom, onMoveStart]);\n    useEffect(() => {\n        if (d3Zoom) {\n            if (userSelectionActive && !isZoomingOrPanning.current) {\n                d3Zoom.on('zoom', null);\n            }\n            else if (!userSelectionActive) {\n                d3Zoom.on('zoom', (event) => {\n                    const { onViewportChange } = store.getState();\n                    store.setState({ transform: [event.transform.x, event.transform.y, event.transform.k] });\n                    zoomedWithRightMouseButton.current = !!(onPaneContextMenu && isRightClickPan(panOnDrag, mouseButton.current ?? 0));\n                    if ((onMove || onViewportChange) && !event.sourceEvent?.internal) {\n                        const flowTransform = eventToFlowTransform(event.transform);\n                        onViewportChange?.(flowTransform);\n                        onMove?.(event.sourceEvent, flowTransform);\n                    }\n                });\n            }\n        }\n    }, [userSelectionActive, d3Zoom, onMove, panOnDrag, onPaneContextMenu]);\n    useEffect(() => {\n        if (d3Zoom) {\n            d3Zoom.on('end', (event) => {\n                if (!event.sourceEvent || event.sourceEvent.internal) {\n                    return null;\n                }\n                const { onViewportChangeEnd } = store.getState();\n                isZoomingOrPanning.current = false;\n                store.setState({ paneDragging: false });\n                if (onPaneContextMenu &&\n                    isRightClickPan(panOnDrag, mouseButton.current ?? 0) &&\n                    !zoomedWithRightMouseButton.current) {\n                    onPaneContextMenu(event.sourceEvent);\n                }\n                zoomedWithRightMouseButton.current = false;\n                if ((onMoveEnd || onViewportChangeEnd) && viewChanged(prevTransform.current, event.transform)) {\n                    const flowTransform = eventToFlowTransform(event.transform);\n                    prevTransform.current = flowTransform;\n                    clearTimeout(timerId.current);\n                    timerId.current = setTimeout(() => {\n                        onViewportChangeEnd?.(flowTransform);\n                        onMoveEnd?.(event.sourceEvent, flowTransform);\n                    }, panOnScroll ? 150 : 0);\n                }\n            });\n        }\n    }, [d3Zoom, panOnScroll, panOnDrag, onMoveEnd, onPaneContextMenu]);\n    useEffect(() => {\n        if (d3Zoom) {\n            d3Zoom.filter((event) => {\n                const zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n                const pinchZoom = zoomOnPinch && event.ctrlKey;\n                if (event.button === 1 &&\n                    event.type === 'mousedown' &&\n                    (isWrappedWithClass(event, 'react-flow__node') || isWrappedWithClass(event, 'react-flow__edge'))) {\n                    return true;\n                }\n                // if all interactions are disabled, we prevent all zoom events\n                if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n                    return false;\n                }\n                // during a selection we prevent all other interactions\n                if (userSelectionActive) {\n                    return false;\n                }\n                // if zoom on double click is disabled, we prevent the double click event\n                if (!zoomOnDoubleClick && event.type === 'dblclick') {\n                    return false;\n                }\n                // if the target element is inside an element with the nowheel class, we prevent zooming\n                if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n                    return false;\n                }\n                // if the target element is inside an element with the nopan class, we prevent panning\n                if (isWrappedWithClass(event, noPanClassName) && event.type !== 'wheel') {\n                    return false;\n                }\n                if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n                    return false;\n                }\n                // when there is no scroll handling enabled, we prevent all wheel events\n                if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n                    return false;\n                }\n                // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n                if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n                    return false;\n                }\n                // if the pane is only movable using allowed clicks\n                if (Array.isArray(panOnDrag) &&\n                    !panOnDrag.includes(event.button) &&\n                    (event.type === 'mousedown' || event.type === 'touchstart')) {\n                    return false;\n                }\n                // We only allow right clicks if pan on drag is set to right click\n                const buttonAllowed = (Array.isArray(panOnDrag) && panOnDrag.includes(event.button)) || !event.button || event.button <= 1;\n                // default filter for d3-zoom\n                return (!event.ctrlKey || event.type === 'wheel') && buttonAllowed;\n            });\n        }\n    }, [\n        userSelectionActive,\n        d3Zoom,\n        zoomOnScroll,\n        zoomOnPinch,\n        panOnScroll,\n        zoomOnDoubleClick,\n        panOnDrag,\n        elementsSelectable,\n        zoomActivationKeyPressed,\n    ]);\n    return (jsx(\"div\", { className: \"react-flow__renderer\", ref: zoomPane, style: containerStyle, children: children }));\n};\n\nconst selector$9 = (s) => ({\n    userSelectionActive: s.userSelectionActive,\n    userSelectionRect: s.userSelectionRect,\n});\nfunction UserSelection() {\n    const { userSelectionActive, userSelectionRect } = useStore(selector$9, shallow);\n    const isActive = userSelectionActive && userSelectionRect;\n    if (!isActive) {\n        return null;\n    }\n    return (jsx(\"div\", { className: \"react-flow__selection react-flow__container\", style: {\n            width: userSelectionRect.width,\n            height: userSelectionRect.height,\n            transform: `translate(${userSelectionRect.x}px, ${userSelectionRect.y}px)`,\n        } }));\n}\n\nfunction handleParentExpand(res, updateItem) {\n    const parent = res.find((e) => e.id === updateItem.parentNode);\n    if (parent) {\n        const extendWidth = updateItem.position.x + updateItem.width - parent.width;\n        const extendHeight = updateItem.position.y + updateItem.height - parent.height;\n        if (extendWidth > 0 || extendHeight > 0 || updateItem.position.x < 0 || updateItem.position.y < 0) {\n            parent.style = { ...parent.style } || {};\n            parent.style.width = parent.style.width ?? parent.width;\n            parent.style.height = parent.style.height ?? parent.height;\n            if (extendWidth > 0) {\n                parent.style.width += extendWidth;\n            }\n            if (extendHeight > 0) {\n                parent.style.height += extendHeight;\n            }\n            if (updateItem.position.x < 0) {\n                const xDiff = Math.abs(updateItem.position.x);\n                parent.position.x = parent.position.x - xDiff;\n                parent.style.width += xDiff;\n                updateItem.position.x = 0;\n            }\n            if (updateItem.position.y < 0) {\n                const yDiff = Math.abs(updateItem.position.y);\n                parent.position.y = parent.position.y - yDiff;\n                parent.style.height += yDiff;\n                updateItem.position.y = 0;\n            }\n            parent.width = parent.style.width;\n            parent.height = parent.style.height;\n        }\n    }\n}\nfunction applyChanges(changes, elements) {\n    // we need this hack to handle the setNodes and setEdges function of the useReactFlow hook for controlled flows\n    if (changes.some((c) => c.type === 'reset')) {\n        return changes.filter((c) => c.type === 'reset').map((c) => c.item);\n    }\n    const initElements = changes.filter((c) => c.type === 'add').map((c) => c.item);\n    return elements.reduce((res, item) => {\n        const currentChanges = changes.filter((c) => c.id === item.id);\n        if (currentChanges.length === 0) {\n            res.push(item);\n            return res;\n        }\n        const updateItem = { ...item };\n        for (const currentChange of currentChanges) {\n            if (currentChange) {\n                switch (currentChange.type) {\n                    case 'select': {\n                        updateItem.selected = currentChange.selected;\n                        break;\n                    }\n                    case 'position': {\n                        if (typeof currentChange.position !== 'undefined') {\n                            updateItem.position = currentChange.position;\n                        }\n                        if (typeof currentChange.positionAbsolute !== 'undefined') {\n                            updateItem.positionAbsolute = currentChange.positionAbsolute;\n                        }\n                        if (typeof currentChange.dragging !== 'undefined') {\n                            updateItem.dragging = currentChange.dragging;\n                        }\n                        if (updateItem.expandParent) {\n                            handleParentExpand(res, updateItem);\n                        }\n                        break;\n                    }\n                    case 'dimensions': {\n                        if (typeof currentChange.dimensions !== 'undefined') {\n                            updateItem.width = currentChange.dimensions.width;\n                            updateItem.height = currentChange.dimensions.height;\n                        }\n                        if (typeof currentChange.updateStyle !== 'undefined') {\n                            updateItem.style = { ...(updateItem.style || {}), ...currentChange.dimensions };\n                        }\n                        if (typeof currentChange.resizing === 'boolean') {\n                            updateItem.resizing = currentChange.resizing;\n                        }\n                        if (updateItem.expandParent) {\n                            handleParentExpand(res, updateItem);\n                        }\n                        break;\n                    }\n                    case 'remove': {\n                        return res;\n                    }\n                }\n            }\n        }\n        res.push(updateItem);\n        return res;\n    }, initElements);\n}\nfunction applyNodeChanges(changes, nodes) {\n    return applyChanges(changes, nodes);\n}\nfunction applyEdgeChanges(changes, edges) {\n    return applyChanges(changes, edges);\n}\nconst createSelectionChange = (id, selected) => ({\n    id,\n    type: 'select',\n    selected,\n});\nfunction getSelectionChanges(items, selectedIds) {\n    return items.reduce((res, item) => {\n        const willBeSelected = selectedIds.includes(item.id);\n        if (!item.selected && willBeSelected) {\n            item.selected = true;\n            res.push(createSelectionChange(item.id, true));\n        }\n        else if (item.selected && !willBeSelected) {\n            item.selected = false;\n            res.push(createSelectionChange(item.id, false));\n        }\n        return res;\n    }, []);\n}\n\nconst wrapHandler = (handler, containerRef) => {\n    return (event) => {\n        if (event.target !== containerRef.current) {\n            return;\n        }\n        handler?.(event);\n    };\n};\nconst selector$8 = (s) => ({\n    userSelectionActive: s.userSelectionActive,\n    elementsSelectable: s.elementsSelectable,\n    dragging: s.paneDragging,\n});\nconst Pane = memo(({ isSelecting, selectionMode = SelectionMode.Full, panOnDrag, onSelectionStart, onSelectionEnd, onPaneClick, onPaneContextMenu, onPaneScroll, onPaneMouseEnter, onPaneMouseMove, onPaneMouseLeave, children, }) => {\n    const container = useRef(null);\n    const store = useStoreApi();\n    const prevSelectedNodesCount = useRef(0);\n    const prevSelectedEdgesCount = useRef(0);\n    const containerBounds = useRef();\n    const { userSelectionActive, elementsSelectable, dragging } = useStore(selector$8, shallow);\n    const resetUserSelection = () => {\n        store.setState({ userSelectionActive: false, userSelectionRect: null });\n        prevSelectedNodesCount.current = 0;\n        prevSelectedEdgesCount.current = 0;\n    };\n    const onClick = (event) => {\n        onPaneClick?.(event);\n        store.getState().resetSelectedElements();\n        store.setState({ nodesSelectionActive: false });\n    };\n    const onContextMenu = (event) => {\n        if (Array.isArray(panOnDrag) && panOnDrag?.includes(2)) {\n            event.preventDefault();\n            return;\n        }\n        onPaneContextMenu?.(event);\n    };\n    const onWheel = onPaneScroll ? (event) => onPaneScroll(event) : undefined;\n    const onMouseDown = (event) => {\n        const { resetSelectedElements, domNode } = store.getState();\n        containerBounds.current = domNode?.getBoundingClientRect();\n        if (!elementsSelectable ||\n            !isSelecting ||\n            event.button !== 0 ||\n            event.target !== container.current ||\n            !containerBounds.current) {\n            return;\n        }\n        const { x, y } = getEventPosition(event, containerBounds.current);\n        resetSelectedElements();\n        store.setState({\n            userSelectionRect: {\n                width: 0,\n                height: 0,\n                startX: x,\n                startY: y,\n                x,\n                y,\n            },\n        });\n        onSelectionStart?.(event);\n    };\n    const onMouseMove = (event) => {\n        const { userSelectionRect, nodeInternals, edges, transform, onNodesChange, onEdgesChange, nodeOrigin, getNodes } = store.getState();\n        if (!isSelecting || !containerBounds.current || !userSelectionRect) {\n            return;\n        }\n        store.setState({ userSelectionActive: true, nodesSelectionActive: false });\n        const mousePos = getEventPosition(event, containerBounds.current);\n        const startX = userSelectionRect.startX ?? 0;\n        const startY = userSelectionRect.startY ?? 0;\n        const nextUserSelectRect = {\n            ...userSelectionRect,\n            x: mousePos.x < startX ? mousePos.x : startX,\n            y: mousePos.y < startY ? mousePos.y : startY,\n            width: Math.abs(mousePos.x - startX),\n            height: Math.abs(mousePos.y - startY),\n        };\n        const nodes = getNodes();\n        const selectedNodes = getNodesInside(nodeInternals, nextUserSelectRect, transform, selectionMode === SelectionMode.Partial, true, nodeOrigin);\n        const selectedEdgeIds = getConnectedEdges(selectedNodes, edges).map((e) => e.id);\n        const selectedNodeIds = selectedNodes.map((n) => n.id);\n        if (prevSelectedNodesCount.current !== selectedNodeIds.length) {\n            prevSelectedNodesCount.current = selectedNodeIds.length;\n            const changes = getSelectionChanges(nodes, selectedNodeIds);\n            if (changes.length) {\n                onNodesChange?.(changes);\n            }\n        }\n        if (prevSelectedEdgesCount.current !== selectedEdgeIds.length) {\n            prevSelectedEdgesCount.current = selectedEdgeIds.length;\n            const changes = getSelectionChanges(edges, selectedEdgeIds);\n            if (changes.length) {\n                onEdgesChange?.(changes);\n            }\n        }\n        store.setState({\n            userSelectionRect: nextUserSelectRect,\n        });\n    };\n    const onMouseUp = (event) => {\n        if (event.button !== 0) {\n            return;\n        }\n        const { userSelectionRect } = store.getState();\n        // We only want to trigger click functions when in selection mode if\n        // the user did not move the mouse.\n        if (!userSelectionActive && userSelectionRect && event.target === container.current) {\n            onClick?.(event);\n        }\n        store.setState({ nodesSelectionActive: prevSelectedNodesCount.current > 0 });\n        resetUserSelection();\n        onSelectionEnd?.(event);\n    };\n    const onMouseLeave = (event) => {\n        if (userSelectionActive) {\n            store.setState({ nodesSelectionActive: prevSelectedNodesCount.current > 0 });\n            onSelectionEnd?.(event);\n        }\n        resetUserSelection();\n    };\n    const hasActiveSelection = elementsSelectable && (isSelecting || userSelectionActive);\n    return (jsxs(\"div\", { className: cc(['react-flow__pane', { dragging, selection: isSelecting }]), onClick: hasActiveSelection ? undefined : wrapHandler(onClick, container), onContextMenu: wrapHandler(onContextMenu, container), onWheel: wrapHandler(onWheel, container), onMouseEnter: hasActiveSelection ? undefined : onPaneMouseEnter, onMouseDown: hasActiveSelection ? onMouseDown : undefined, onMouseMove: hasActiveSelection ? onMouseMove : onPaneMouseMove, onMouseUp: hasActiveSelection ? onMouseUp : undefined, onMouseLeave: hasActiveSelection ? onMouseLeave : onPaneMouseLeave, ref: container, style: containerStyle, children: [children, jsx(UserSelection, {})] }));\n});\nPane.displayName = 'Pane';\n\nfunction isParentSelected(node, nodeInternals) {\n    if (!node.parentNode) {\n        return false;\n    }\n    const parentNode = nodeInternals.get(node.parentNode);\n    if (!parentNode) {\n        return false;\n    }\n    if (parentNode.selected) {\n        return true;\n    }\n    return isParentSelected(parentNode, nodeInternals);\n}\nfunction hasSelector(target, selector, nodeRef) {\n    let current = target;\n    do {\n        if (current?.matches(selector))\n            return true;\n        if (current === nodeRef.current)\n            return false;\n        current = current.parentElement;\n    } while (current);\n    return false;\n}\n// looks for all selected nodes and created a NodeDragItem for each of them\nfunction getDragItems(nodeInternals, nodesDraggable, mousePos, nodeId) {\n    return Array.from(nodeInternals.values())\n        .filter((n) => (n.selected || n.id === nodeId) &&\n        (!n.parentNode || !isParentSelected(n, nodeInternals)) &&\n        (n.draggable || (nodesDraggable && typeof n.draggable === 'undefined')))\n        .map((n) => ({\n        id: n.id,\n        position: n.position || { x: 0, y: 0 },\n        positionAbsolute: n.positionAbsolute || { x: 0, y: 0 },\n        distance: {\n            x: mousePos.x - (n.positionAbsolute?.x ?? 0),\n            y: mousePos.y - (n.positionAbsolute?.y ?? 0),\n        },\n        delta: {\n            x: 0,\n            y: 0,\n        },\n        extent: n.extent,\n        parentNode: n.parentNode,\n        width: n.width,\n        height: n.height,\n    }));\n}\nfunction clampNodeExtent(node, extent) {\n    if (!extent || extent === 'parent') {\n        return extent;\n    }\n    return [extent[0], [extent[1][0] - (node.width || 0), extent[1][1] - (node.height || 0)]];\n}\nfunction calcNextPosition(node, nextPosition, nodeInternals, nodeExtent, nodeOrigin = [0, 0], onError) {\n    const clampedNodeExtent = clampNodeExtent(node, node.extent || nodeExtent);\n    let currentExtent = clampedNodeExtent;\n    if (node.extent === 'parent') {\n        if (node.parentNode && node.width && node.height) {\n            const parent = nodeInternals.get(node.parentNode);\n            const { x: parentX, y: parentY } = getNodePositionWithOrigin(parent, nodeOrigin).positionAbsolute;\n            currentExtent =\n                parent && isNumeric(parentX) && isNumeric(parentY) && isNumeric(parent.width) && isNumeric(parent.height)\n                    ? [\n                        [parentX + node.width * nodeOrigin[0], parentY + node.height * nodeOrigin[1]],\n                        [\n                            parentX + parent.width - node.width + node.width * nodeOrigin[0],\n                            parentY + parent.height - node.height + node.height * nodeOrigin[1],\n                        ],\n                    ]\n                    : currentExtent;\n        }\n        else {\n            onError?.('005', errorMessages['error005']());\n            currentExtent = clampedNodeExtent;\n        }\n    }\n    else if (node.extent && node.parentNode) {\n        const parent = nodeInternals.get(node.parentNode);\n        const { x: parentX, y: parentY } = getNodePositionWithOrigin(parent, nodeOrigin).positionAbsolute;\n        currentExtent = [\n            [node.extent[0][0] + parentX, node.extent[0][1] + parentY],\n            [node.extent[1][0] + parentX, node.extent[1][1] + parentY],\n        ];\n    }\n    let parentPosition = { x: 0, y: 0 };\n    if (node.parentNode) {\n        const parentNode = nodeInternals.get(node.parentNode);\n        parentPosition = getNodePositionWithOrigin(parentNode, nodeOrigin).positionAbsolute;\n    }\n    const positionAbsolute = currentExtent && currentExtent !== 'parent'\n        ? clampPosition(nextPosition, currentExtent)\n        : nextPosition;\n    return {\n        position: {\n            x: positionAbsolute.x - parentPosition.x,\n            y: positionAbsolute.y - parentPosition.y,\n        },\n        positionAbsolute,\n    };\n}\n// returns two params:\n// 1. the dragged node (or the first of the list, if we are dragging a node selection)\n// 2. array of selected nodes (for multi selections)\nfunction getEventHandlerParams({ nodeId, dragItems, nodeInternals, }) {\n    const extentedDragItems = dragItems.map((n) => {\n        const node = nodeInternals.get(n.id);\n        return {\n            ...node,\n            position: n.position,\n            positionAbsolute: n.positionAbsolute,\n        };\n    });\n    return [nodeId ? extentedDragItems.find((n) => n.id === nodeId) : extentedDragItems[0], extentedDragItems];\n}\n\nconst getHandleBounds = (selector, nodeElement, zoom, nodeOrigin) => {\n    const handles = nodeElement.querySelectorAll(selector);\n    if (!handles || !handles.length) {\n        return null;\n    }\n    const handlesArray = Array.from(handles);\n    const nodeBounds = nodeElement.getBoundingClientRect();\n    const nodeOffset = {\n        x: nodeBounds.width * nodeOrigin[0],\n        y: nodeBounds.height * nodeOrigin[1],\n    };\n    return handlesArray.map((handle) => {\n        const handleBounds = handle.getBoundingClientRect();\n        return {\n            id: handle.getAttribute('data-handleid'),\n            position: handle.getAttribute('data-handlepos'),\n            x: (handleBounds.left - nodeBounds.left - nodeOffset.x) / zoom,\n            y: (handleBounds.top - nodeBounds.top - nodeOffset.y) / zoom,\n            ...getDimensions(handle),\n        };\n    });\n};\nfunction getMouseHandler(id, getState, handler) {\n    return handler === undefined\n        ? handler\n        : (event) => {\n            const node = getState().nodeInternals.get(id);\n            if (node) {\n                handler(event, { ...node });\n            }\n        };\n}\n// this handler is called by\n// 1. the click handler when node is not draggable or selectNodesOnDrag = false\n// or\n// 2. the on drag start handler when node is draggable and selectNodesOnDrag = true\nfunction handleNodeClick({ id, store, unselect = false, nodeRef, }) {\n    const { addSelectedNodes, unselectNodesAndEdges, multiSelectionActive, nodeInternals, onError } = store.getState();\n    const node = nodeInternals.get(id);\n    if (!node) {\n        onError?.('012', errorMessages['error012'](id));\n        return;\n    }\n    store.setState({ nodesSelectionActive: false });\n    if (!node.selected) {\n        addSelectedNodes([id]);\n    }\n    else if (unselect || (node.selected && multiSelectionActive)) {\n        unselectNodesAndEdges({ nodes: [node] });\n        requestAnimationFrame(() => nodeRef?.current?.blur());\n    }\n}\n\nfunction useGetPointerPosition() {\n    const store = useStoreApi();\n    // returns the pointer position projected to the RF coordinate system\n    const getPointerPosition = useCallback(({ sourceEvent }) => {\n        const { transform, snapGrid, snapToGrid } = store.getState();\n        const x = sourceEvent.touches ? sourceEvent.touches[0].clientX : sourceEvent.clientX;\n        const y = sourceEvent.touches ? sourceEvent.touches[0].clientY : sourceEvent.clientY;\n        const pointerPos = {\n            x: (x - transform[0]) / transform[2],\n            y: (y - transform[1]) / transform[2],\n        };\n        // we need the snapped position in order to be able to skip unnecessary drag events\n        return {\n            xSnapped: snapToGrid ? snapGrid[0] * Math.round(pointerPos.x / snapGrid[0]) : pointerPos.x,\n            ySnapped: snapToGrid ? snapGrid[1] * Math.round(pointerPos.y / snapGrid[1]) : pointerPos.y,\n            ...pointerPos,\n        };\n    }, []);\n    return getPointerPosition;\n}\n\nfunction wrapSelectionDragFunc(selectionFunc) {\n    return (event, _, nodes) => selectionFunc?.(event, nodes);\n}\nfunction useDrag({ nodeRef, disabled = false, noDragClassName, handleSelector, nodeId, isSelectable, selectNodesOnDrag, }) {\n    const store = useStoreApi();\n    const [dragging, setDragging] = useState(false);\n    const dragItems = useRef([]);\n    const lastPos = useRef({ x: null, y: null });\n    const autoPanId = useRef(0);\n    const containerBounds = useRef(null);\n    const mousePosition = useRef({ x: 0, y: 0 });\n    const dragEvent = useRef(null);\n    const autoPanStarted = useRef(false);\n    const getPointerPosition = useGetPointerPosition();\n    useEffect(() => {\n        if (nodeRef?.current) {\n            const selection = select(nodeRef.current);\n            const updateNodes = ({ x, y }) => {\n                const { nodeInternals, onNodeDrag, onSelectionDrag, updateNodePositions, nodeExtent, snapGrid, snapToGrid, nodeOrigin, onError, } = store.getState();\n                lastPos.current = { x, y };\n                let hasChange = false;\n                let nodesBox = { x: 0, y: 0, x2: 0, y2: 0 };\n                if (dragItems.current.length > 1 && nodeExtent) {\n                    const rect = getRectOfNodes(dragItems.current, nodeOrigin);\n                    nodesBox = rectToBox(rect);\n                }\n                dragItems.current = dragItems.current.map((n) => {\n                    const nextPosition = { x: x - n.distance.x, y: y - n.distance.y };\n                    if (snapToGrid) {\n                        nextPosition.x = snapGrid[0] * Math.round(nextPosition.x / snapGrid[0]);\n                        nextPosition.y = snapGrid[1] * Math.round(nextPosition.y / snapGrid[1]);\n                    }\n                    // if there is selection with multiple nodes and a node extent is set, we need to adjust the node extent for each node\n                    // based on its position so that the node stays at it's position relative to the selection.\n                    const adjustedNodeExtent = [\n                        [nodeExtent[0][0], nodeExtent[0][1]],\n                        [nodeExtent[1][0], nodeExtent[1][1]],\n                    ];\n                    if (dragItems.current.length > 1 && nodeExtent && !n.extent) {\n                        adjustedNodeExtent[0][0] = n.positionAbsolute.x - nodesBox.x + nodeExtent[0][0];\n                        adjustedNodeExtent[1][0] = n.positionAbsolute.x + (n.width ?? 0) - nodesBox.x2 + nodeExtent[1][0];\n                        adjustedNodeExtent[0][1] = n.positionAbsolute.y - nodesBox.y + nodeExtent[0][1];\n                        adjustedNodeExtent[1][1] = n.positionAbsolute.y + (n.height ?? 0) - nodesBox.y2 + nodeExtent[1][1];\n                    }\n                    const updatedPos = calcNextPosition(n, nextPosition, nodeInternals, adjustedNodeExtent, nodeOrigin, onError);\n                    // we want to make sure that we only fire a change event when there is a change\n                    hasChange = hasChange || n.position.x !== updatedPos.position.x || n.position.y !== updatedPos.position.y;\n                    n.position = updatedPos.position;\n                    n.positionAbsolute = updatedPos.positionAbsolute;\n                    return n;\n                });\n                if (!hasChange) {\n                    return;\n                }\n                updateNodePositions(dragItems.current, true, true);\n                setDragging(true);\n                const onDrag = nodeId ? onNodeDrag : wrapSelectionDragFunc(onSelectionDrag);\n                if (onDrag && dragEvent.current) {\n                    const [currentNode, nodes] = getEventHandlerParams({\n                        nodeId,\n                        dragItems: dragItems.current,\n                        nodeInternals,\n                    });\n                    onDrag(dragEvent.current, currentNode, nodes);\n                }\n            };\n            const autoPan = () => {\n                if (!containerBounds.current) {\n                    return;\n                }\n                const [xMovement, yMovement] = calcAutoPan(mousePosition.current, containerBounds.current);\n                if (xMovement !== 0 || yMovement !== 0) {\n                    const { transform, panBy } = store.getState();\n                    lastPos.current.x = (lastPos.current.x ?? 0) - xMovement / transform[2];\n                    lastPos.current.y = (lastPos.current.y ?? 0) - yMovement / transform[2];\n                    if (panBy({ x: xMovement, y: yMovement })) {\n                        updateNodes(lastPos.current);\n                    }\n                }\n                autoPanId.current = requestAnimationFrame(autoPan);\n            };\n            if (disabled) {\n                selection.on('.drag', null);\n            }\n            else {\n                const dragHandler = drag()\n                    .on('start', (event) => {\n                    const { nodeInternals, multiSelectionActive, domNode, nodesDraggable, unselectNodesAndEdges, onNodeDragStart, onSelectionDragStart, } = store.getState();\n                    const onStart = nodeId ? onNodeDragStart : wrapSelectionDragFunc(onSelectionDragStart);\n                    if (!selectNodesOnDrag && !multiSelectionActive && nodeId) {\n                        if (!nodeInternals.get(nodeId)?.selected) {\n                            // we need to reset selected nodes when selectNodesOnDrag=false\n                            unselectNodesAndEdges();\n                        }\n                    }\n                    if (nodeId && isSelectable && selectNodesOnDrag) {\n                        handleNodeClick({\n                            id: nodeId,\n                            store,\n                            nodeRef: nodeRef,\n                        });\n                    }\n                    const pointerPos = getPointerPosition(event);\n                    lastPos.current = pointerPos;\n                    dragItems.current = getDragItems(nodeInternals, nodesDraggable, pointerPos, nodeId);\n                    if (onStart && dragItems.current) {\n                        const [currentNode, nodes] = getEventHandlerParams({\n                            nodeId,\n                            dragItems: dragItems.current,\n                            nodeInternals,\n                        });\n                        onStart(event.sourceEvent, currentNode, nodes);\n                    }\n                    containerBounds.current = domNode?.getBoundingClientRect() || null;\n                    mousePosition.current = getEventPosition(event.sourceEvent, containerBounds.current);\n                })\n                    .on('drag', (event) => {\n                    const pointerPos = getPointerPosition(event);\n                    const { autoPanOnNodeDrag } = store.getState();\n                    if (!autoPanStarted.current && autoPanOnNodeDrag) {\n                        autoPanStarted.current = true;\n                        autoPan();\n                    }\n                    // skip events without movement\n                    if ((lastPos.current.x !== pointerPos.xSnapped || lastPos.current.y !== pointerPos.ySnapped) &&\n                        dragItems.current) {\n                        dragEvent.current = event.sourceEvent;\n                        mousePosition.current = getEventPosition(event.sourceEvent, containerBounds.current);\n                        updateNodes(pointerPos);\n                    }\n                })\n                    .on('end', (event) => {\n                    setDragging(false);\n                    autoPanStarted.current = false;\n                    cancelAnimationFrame(autoPanId.current);\n                    if (dragItems.current) {\n                        const { updateNodePositions, nodeInternals, onNodeDragStop, onSelectionDragStop } = store.getState();\n                        const onStop = nodeId ? onNodeDragStop : wrapSelectionDragFunc(onSelectionDragStop);\n                        updateNodePositions(dragItems.current, false, false);\n                        if (onStop) {\n                            const [currentNode, nodes] = getEventHandlerParams({\n                                nodeId,\n                                dragItems: dragItems.current,\n                                nodeInternals,\n                            });\n                            onStop(event.sourceEvent, currentNode, nodes);\n                        }\n                    }\n                })\n                    .filter((event) => {\n                    const target = event.target;\n                    const isDraggable = !event.button &&\n                        (!noDragClassName || !hasSelector(target, `.${noDragClassName}`, nodeRef)) &&\n                        (!handleSelector || hasSelector(target, handleSelector, nodeRef));\n                    return isDraggable;\n                });\n                selection.call(dragHandler);\n                return () => {\n                    selection.on('.drag', null);\n                };\n            }\n        }\n    }, [\n        nodeRef,\n        disabled,\n        noDragClassName,\n        handleSelector,\n        isSelectable,\n        store,\n        nodeId,\n        selectNodesOnDrag,\n        getPointerPosition,\n    ]);\n    return dragging;\n}\n\nfunction useUpdateNodePositions() {\n    const store = useStoreApi();\n    const updatePositions = useCallback((params) => {\n        const { nodeInternals, nodeExtent, updateNodePositions, getNodes, snapToGrid, snapGrid, onError, nodesDraggable } = store.getState();\n        const selectedNodes = getNodes().filter((n) => n.selected && (n.draggable || (nodesDraggable && typeof n.draggable === 'undefined')));\n        // by default a node moves 5px on each key press, or 20px if shift is pressed\n        // if snap grid is enabled, we use that for the velocity.\n        const xVelo = snapToGrid ? snapGrid[0] : 5;\n        const yVelo = snapToGrid ? snapGrid[1] : 5;\n        const factor = params.isShiftPressed ? 4 : 1;\n        const positionDiffX = params.x * xVelo * factor;\n        const positionDiffY = params.y * yVelo * factor;\n        const nodeUpdates = selectedNodes.map((n) => {\n            if (n.positionAbsolute) {\n                const nextPosition = { x: n.positionAbsolute.x + positionDiffX, y: n.positionAbsolute.y + positionDiffY };\n                if (snapToGrid) {\n                    nextPosition.x = snapGrid[0] * Math.round(nextPosition.x / snapGrid[0]);\n                    nextPosition.y = snapGrid[1] * Math.round(nextPosition.y / snapGrid[1]);\n                }\n                const { positionAbsolute, position } = calcNextPosition(n, nextPosition, nodeInternals, nodeExtent, undefined, onError);\n                n.position = position;\n                n.positionAbsolute = positionAbsolute;\n            }\n            return n;\n        });\n        updateNodePositions(nodeUpdates, true, false);\n    }, []);\n    return updatePositions;\n}\n\nconst arrowKeyDiffs = {\n    ArrowUp: { x: 0, y: -1 },\n    ArrowDown: { x: 0, y: 1 },\n    ArrowLeft: { x: -1, y: 0 },\n    ArrowRight: { x: 1, y: 0 },\n};\nvar wrapNode = (NodeComponent) => {\n    const NodeWrapper = ({ id, type, data, xPos, yPos, xPosOrigin, yPosOrigin, selected, onClick, onMouseEnter, onMouseMove, onMouseLeave, onContextMenu, onDoubleClick, style, className, isDraggable, isSelectable, isConnectable, isFocusable, selectNodesOnDrag, sourcePosition, targetPosition, hidden, resizeObserver, dragHandle, zIndex, isParent, noDragClassName, noPanClassName, initialized, disableKeyboardA11y, ariaLabel, rfId, }) => {\n        const store = useStoreApi();\n        const nodeRef = useRef(null);\n        const prevSourcePosition = useRef(sourcePosition);\n        const prevTargetPosition = useRef(targetPosition);\n        const prevType = useRef(type);\n        const hasPointerEvents = isSelectable || isDraggable || onClick || onMouseEnter || onMouseMove || onMouseLeave;\n        const updatePositions = useUpdateNodePositions();\n        const onMouseEnterHandler = getMouseHandler(id, store.getState, onMouseEnter);\n        const onMouseMoveHandler = getMouseHandler(id, store.getState, onMouseMove);\n        const onMouseLeaveHandler = getMouseHandler(id, store.getState, onMouseLeave);\n        const onContextMenuHandler = getMouseHandler(id, store.getState, onContextMenu);\n        const onDoubleClickHandler = getMouseHandler(id, store.getState, onDoubleClick);\n        const onSelectNodeHandler = (event) => {\n            if (isSelectable && (!selectNodesOnDrag || !isDraggable)) {\n                // this handler gets called within the drag start event when selectNodesOnDrag=true\n                handleNodeClick({\n                    id,\n                    store,\n                    nodeRef,\n                });\n            }\n            if (onClick) {\n                const node = store.getState().nodeInternals.get(id);\n                if (node) {\n                    onClick(event, { ...node });\n                }\n            }\n        };\n        const onKeyDown = (event) => {\n            if (isInputDOMNode(event)) {\n                return;\n            }\n            if (elementSelectionKeys.includes(event.key) && isSelectable) {\n                const unselect = event.key === 'Escape';\n                handleNodeClick({\n                    id,\n                    store,\n                    unselect,\n                    nodeRef,\n                });\n            }\n            else if (!disableKeyboardA11y &&\n                isDraggable &&\n                selected &&\n                Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)) {\n                store.setState({\n                    ariaLiveMessage: `Moved selected node ${event.key\n                        .replace('Arrow', '')\n                        .toLowerCase()}. New position, x: ${~~xPos}, y: ${~~yPos}`,\n                });\n                updatePositions({\n                    x: arrowKeyDiffs[event.key].x,\n                    y: arrowKeyDiffs[event.key].y,\n                    isShiftPressed: event.shiftKey,\n                });\n            }\n        };\n        useEffect(() => {\n            if (nodeRef.current && !hidden) {\n                const currNode = nodeRef.current;\n                resizeObserver?.observe(currNode);\n                return () => resizeObserver?.unobserve(currNode);\n            }\n        }, [hidden]);\n        useEffect(() => {\n            // when the user programmatically changes the source or handle position, we re-initialize the node\n            const typeChanged = prevType.current !== type;\n            const sourcePosChanged = prevSourcePosition.current !== sourcePosition;\n            const targetPosChanged = prevTargetPosition.current !== targetPosition;\n            if (nodeRef.current && (typeChanged || sourcePosChanged || targetPosChanged)) {\n                if (typeChanged) {\n                    prevType.current = type;\n                }\n                if (sourcePosChanged) {\n                    prevSourcePosition.current = sourcePosition;\n                }\n                if (targetPosChanged) {\n                    prevTargetPosition.current = targetPosition;\n                }\n                store.getState().updateNodeDimensions([{ id, nodeElement: nodeRef.current, forceUpdate: true }]);\n            }\n        }, [id, type, sourcePosition, targetPosition]);\n        const dragging = useDrag({\n            nodeRef,\n            disabled: hidden || !isDraggable,\n            noDragClassName,\n            handleSelector: dragHandle,\n            nodeId: id,\n            isSelectable,\n            selectNodesOnDrag,\n        });\n        if (hidden) {\n            return null;\n        }\n        return (jsx(\"div\", { className: cc([\n                'react-flow__node',\n                `react-flow__node-${type}`,\n                {\n                    // this is overwritable by passing `nopan` as a class name\n                    [noPanClassName]: isDraggable,\n                },\n                className,\n                {\n                    selected,\n                    selectable: isSelectable,\n                    parent: isParent,\n                    dragging,\n                },\n            ]), ref: nodeRef, style: {\n                zIndex,\n                transform: `translate(${xPosOrigin}px,${yPosOrigin}px)`,\n                pointerEvents: hasPointerEvents ? 'all' : 'none',\n                visibility: initialized ? 'visible' : 'hidden',\n                ...style,\n            }, \"data-id\": id, \"data-testid\": `rf__node-${id}`, onMouseEnter: onMouseEnterHandler, onMouseMove: onMouseMoveHandler, onMouseLeave: onMouseLeaveHandler, onContextMenu: onContextMenuHandler, onClick: onSelectNodeHandler, onDoubleClick: onDoubleClickHandler, onKeyDown: isFocusable ? onKeyDown : undefined, tabIndex: isFocusable ? 0 : undefined, role: isFocusable ? 'button' : undefined, \"aria-describedby\": disableKeyboardA11y ? undefined : `${ARIA_NODE_DESC_KEY}-${rfId}`, \"aria-label\": ariaLabel, children: jsx(Provider, { value: id, children: jsx(NodeComponent, { id: id, data: data, type: type, xPos: xPos, yPos: yPos, selected: selected, isConnectable: isConnectable, sourcePosition: sourcePosition, targetPosition: targetPosition, dragging: dragging, dragHandle: dragHandle, zIndex: zIndex }) }) }));\n    };\n    NodeWrapper.displayName = 'NodeWrapper';\n    return memo(NodeWrapper);\n};\n\nconst selector$7 = (s) => {\n    const selectedNodes = s.getNodes().filter((n) => n.selected);\n    return {\n        ...getRectOfNodes(selectedNodes, s.nodeOrigin),\n        transformString: `translate(${s.transform[0]}px,${s.transform[1]}px) scale(${s.transform[2]})`,\n        userSelectionActive: s.userSelectionActive,\n    };\n};\nfunction NodesSelection({ onSelectionContextMenu, noPanClassName, disableKeyboardA11y }) {\n    const store = useStoreApi();\n    const { width, height, x: left, y: top, transformString, userSelectionActive } = useStore(selector$7, shallow);\n    const updatePositions = useUpdateNodePositions();\n    const nodeRef = useRef(null);\n    useEffect(() => {\n        if (!disableKeyboardA11y) {\n            nodeRef.current?.focus({\n                preventScroll: true,\n            });\n        }\n    }, [disableKeyboardA11y]);\n    useDrag({\n        nodeRef,\n    });\n    if (userSelectionActive || !width || !height) {\n        return null;\n    }\n    const onContextMenu = onSelectionContextMenu\n        ? (event) => {\n            const selectedNodes = store\n                .getState()\n                .getNodes()\n                .filter((n) => n.selected);\n            onSelectionContextMenu(event, selectedNodes);\n        }\n        : undefined;\n    const onKeyDown = (event) => {\n        if (Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)) {\n            updatePositions({\n                x: arrowKeyDiffs[event.key].x,\n                y: arrowKeyDiffs[event.key].y,\n                isShiftPressed: event.shiftKey,\n            });\n        }\n    };\n    return (jsx(\"div\", { className: cc(['react-flow__nodesselection', 'react-flow__container', noPanClassName]), style: {\n            transform: transformString,\n        }, children: jsx(\"div\", { ref: nodeRef, className: \"react-flow__nodesselection-rect\", onContextMenu: onContextMenu, tabIndex: disableKeyboardA11y ? undefined : -1, onKeyDown: disableKeyboardA11y ? undefined : onKeyDown, style: {\n                width,\n                height,\n                top,\n                left,\n            } }) }));\n}\nvar NodesSelection$1 = memo(NodesSelection);\n\nconst selector$6 = (s) => s.nodesSelectionActive;\nconst FlowRenderer = ({ children, onPaneClick, onPaneMouseEnter, onPaneMouseMove, onPaneMouseLeave, onPaneContextMenu, onPaneScroll, deleteKeyCode, onMove, onMoveStart, onMoveEnd, selectionKeyCode, selectionOnDrag, selectionMode, onSelectionStart, onSelectionEnd, multiSelectionKeyCode, panActivationKeyCode, zoomActivationKeyCode, elementsSelectable, zoomOnScroll, zoomOnPinch, panOnScroll, panOnScrollSpeed, panOnScrollMode, zoomOnDoubleClick, panOnDrag: _panOnDrag, defaultViewport, translateExtent, minZoom, maxZoom, preventScrolling, onSelectionContextMenu, noWheelClassName, noPanClassName, disableKeyboardA11y, }) => {\n    const nodesSelectionActive = useStore(selector$6);\n    const selectionKeyPressed = useKeyPress(selectionKeyCode);\n    const panActivationKeyPressed = useKeyPress(panActivationKeyCode);\n    const panOnDrag = panActivationKeyPressed || _panOnDrag;\n    const isSelecting = selectionKeyPressed || (selectionOnDrag && panOnDrag !== true);\n    useGlobalKeyHandler({ deleteKeyCode, multiSelectionKeyCode });\n    return (jsx(ZoomPane, { onMove: onMove, onMoveStart: onMoveStart, onMoveEnd: onMoveEnd, onPaneContextMenu: onPaneContextMenu, elementsSelectable: elementsSelectable, zoomOnScroll: zoomOnScroll, zoomOnPinch: zoomOnPinch, panOnScroll: panOnScroll, panOnScrollSpeed: panOnScrollSpeed, panOnScrollMode: panOnScrollMode, zoomOnDoubleClick: zoomOnDoubleClick, panOnDrag: !selectionKeyPressed && panOnDrag, defaultViewport: defaultViewport, translateExtent: translateExtent, minZoom: minZoom, maxZoom: maxZoom, zoomActivationKeyCode: zoomActivationKeyCode, preventScrolling: preventScrolling, noWheelClassName: noWheelClassName, noPanClassName: noPanClassName, children: jsxs(Pane, { onSelectionStart: onSelectionStart, onSelectionEnd: onSelectionEnd, onPaneClick: onPaneClick, onPaneMouseEnter: onPaneMouseEnter, onPaneMouseMove: onPaneMouseMove, onPaneMouseLeave: onPaneMouseLeave, onPaneContextMenu: onPaneContextMenu, onPaneScroll: onPaneScroll, panOnDrag: panOnDrag, isSelecting: !!isSelecting, selectionMode: selectionMode, children: [children, nodesSelectionActive && (jsx(NodesSelection$1, { onSelectionContextMenu: onSelectionContextMenu, noPanClassName: noPanClassName, disableKeyboardA11y: disableKeyboardA11y }))] }) }));\n};\nFlowRenderer.displayName = 'FlowRenderer';\nvar FlowRenderer$1 = memo(FlowRenderer);\n\nfunction useVisibleNodes(onlyRenderVisible) {\n    const nodes = useStore(useCallback((s) => onlyRenderVisible\n        ? getNodesInside(s.nodeInternals, { x: 0, y: 0, width: s.width, height: s.height }, s.transform, true)\n        : s.getNodes(), [onlyRenderVisible]));\n    return nodes;\n}\n\nfunction createNodeTypes(nodeTypes) {\n    const standardTypes = {\n        input: wrapNode((nodeTypes.input || InputNode$1)),\n        default: wrapNode((nodeTypes.default || DefaultNode$1)),\n        output: wrapNode((nodeTypes.output || OutputNode$1)),\n        group: wrapNode((nodeTypes.group || GroupNode)),\n    };\n    const wrappedTypes = {};\n    const specialTypes = Object.keys(nodeTypes)\n        .filter((k) => !['input', 'default', 'output', 'group'].includes(k))\n        .reduce((res, key) => {\n        res[key] = wrapNode((nodeTypes[key] || DefaultNode$1));\n        return res;\n    }, wrappedTypes);\n    return {\n        ...standardTypes,\n        ...specialTypes,\n    };\n}\nconst getPositionWithOrigin = ({ x, y, width, height, origin, }) => {\n    if (!width || !height) {\n        return { x, y };\n    }\n    if (origin[0] < 0 || origin[1] < 0 || origin[0] > 1 || origin[1] > 1) {\n        return { x, y };\n    }\n    return {\n        x: x - width * origin[0],\n        y: y - height * origin[1],\n    };\n};\n\nconst selector$5 = (s) => ({\n    nodesDraggable: s.nodesDraggable,\n    nodesConnectable: s.nodesConnectable,\n    nodesFocusable: s.nodesFocusable,\n    elementsSelectable: s.elementsSelectable,\n    updateNodeDimensions: s.updateNodeDimensions,\n    onError: s.onError,\n});\nconst NodeRenderer = (props) => {\n    const { nodesDraggable, nodesConnectable, nodesFocusable, elementsSelectable, updateNodeDimensions, onError } = useStore(selector$5, shallow);\n    const nodes = useVisibleNodes(props.onlyRenderVisibleElements);\n    const resizeObserverRef = useRef();\n    const resizeObserver = useMemo(() => {\n        if (typeof ResizeObserver === 'undefined') {\n            return null;\n        }\n        const observer = new ResizeObserver((entries) => {\n            const updates = entries.map((entry) => ({\n                id: entry.target.getAttribute('data-id'),\n                nodeElement: entry.target,\n                forceUpdate: true,\n            }));\n            updateNodeDimensions(updates);\n        });\n        resizeObserverRef.current = observer;\n        return observer;\n    }, []);\n    useEffect(() => {\n        return () => {\n            resizeObserverRef?.current?.disconnect();\n        };\n    }, []);\n    return (jsx(\"div\", { className: \"react-flow__nodes\", style: containerStyle, children: nodes.map((node) => {\n            let nodeType = node.type || 'default';\n            if (!props.nodeTypes[nodeType]) {\n                onError?.('003', errorMessages['error003'](nodeType));\n                nodeType = 'default';\n            }\n            const NodeComponent = (props.nodeTypes[nodeType] || props.nodeTypes.default);\n            const isDraggable = !!(node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'));\n            const isSelectable = !!(node.selectable || (elementsSelectable && typeof node.selectable === 'undefined'));\n            const isConnectable = !!(node.connectable || (nodesConnectable && typeof node.connectable === 'undefined'));\n            const isFocusable = !!(node.focusable || (nodesFocusable && typeof node.focusable === 'undefined'));\n            const clampedPosition = props.nodeExtent\n                ? clampPosition(node.positionAbsolute, props.nodeExtent)\n                : node.positionAbsolute;\n            const posX = clampedPosition?.x ?? 0;\n            const posY = clampedPosition?.y ?? 0;\n            const posOrigin = getPositionWithOrigin({\n                x: posX,\n                y: posY,\n                width: node.width ?? 0,\n                height: node.height ?? 0,\n                origin: props.nodeOrigin,\n            });\n            return (jsx(NodeComponent, { id: node.id, className: node.className, style: node.style, type: nodeType, data: node.data, sourcePosition: node.sourcePosition || Position.Bottom, targetPosition: node.targetPosition || Position.Top, hidden: node.hidden, xPos: posX, yPos: posY, xPosOrigin: posOrigin.x, yPosOrigin: posOrigin.y, selectNodesOnDrag: props.selectNodesOnDrag, onClick: props.onNodeClick, onMouseEnter: props.onNodeMouseEnter, onMouseMove: props.onNodeMouseMove, onMouseLeave: props.onNodeMouseLeave, onContextMenu: props.onNodeContextMenu, onDoubleClick: props.onNodeDoubleClick, selected: !!node.selected, isDraggable: isDraggable, isSelectable: isSelectable, isConnectable: isConnectable, isFocusable: isFocusable, resizeObserver: resizeObserver, dragHandle: node.dragHandle, zIndex: node[internalsSymbol]?.z ?? 0, isParent: !!node[internalsSymbol]?.isParent, noDragClassName: props.noDragClassName, noPanClassName: props.noPanClassName, initialized: !!node.width && !!node.height, rfId: props.rfId, disableKeyboardA11y: props.disableKeyboardA11y, ariaLabel: node.ariaLabel }, node.id));\n        }) }));\n};\nNodeRenderer.displayName = 'NodeRenderer';\nvar NodeRenderer$1 = memo(NodeRenderer);\n\nconst shiftX = (x, shift, position) => {\n    if (position === Position.Left)\n        return x - shift;\n    if (position === Position.Right)\n        return x + shift;\n    return x;\n};\nconst shiftY = (y, shift, position) => {\n    if (position === Position.Top)\n        return y - shift;\n    if (position === Position.Bottom)\n        return y + shift;\n    return y;\n};\nconst EdgeUpdaterClassName = 'react-flow__edgeupdater';\nconst EdgeAnchor = ({ position, centerX, centerY, radius = 10, onMouseDown, onMouseEnter, onMouseOut, type, }) => (jsx(\"circle\", { onMouseDown: onMouseDown, onMouseEnter: onMouseEnter, onMouseOut: onMouseOut, className: cc([EdgeUpdaterClassName, `${EdgeUpdaterClassName}-${type}`]), cx: shiftX(centerX, radius, position), cy: shiftY(centerY, radius, position), r: radius, stroke: \"transparent\", fill: \"transparent\" }));\n\nconst alwaysValidConnection = () => true;\nvar wrapEdge = (EdgeComponent) => {\n    const EdgeWrapper = ({ id, className, type, data, onClick, onEdgeDoubleClick, selected, animated, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, source, target, sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition, elementsSelectable, hidden, sourceHandleId, targetHandleId, onContextMenu, onMouseEnter, onMouseMove, onMouseLeave, edgeUpdaterRadius, onEdgeUpdate, onEdgeUpdateStart, onEdgeUpdateEnd, markerEnd, markerStart, rfId, ariaLabel, isFocusable, isUpdatable, pathOptions, interactionWidth, }) => {\n        const edgeRef = useRef(null);\n        const [updateHover, setUpdateHover] = useState(false);\n        const [updating, setUpdating] = useState(false);\n        const store = useStoreApi();\n        const markerStartUrl = useMemo(() => `url(#${getMarkerId(markerStart, rfId)})`, [markerStart, rfId]);\n        const markerEndUrl = useMemo(() => `url(#${getMarkerId(markerEnd, rfId)})`, [markerEnd, rfId]);\n        if (hidden) {\n            return null;\n        }\n        const onEdgeClick = (event) => {\n            const { edges, addSelectedEdges } = store.getState();\n            if (elementsSelectable) {\n                store.setState({ nodesSelectionActive: false });\n                addSelectedEdges([id]);\n            }\n            if (onClick) {\n                const edge = edges.find((e) => e.id === id);\n                onClick(event, edge);\n            }\n        };\n        const onEdgeDoubleClickHandler = getMouseHandler$1(id, store.getState, onEdgeDoubleClick);\n        const onEdgeContextMenu = getMouseHandler$1(id, store.getState, onContextMenu);\n        const onEdgeMouseEnter = getMouseHandler$1(id, store.getState, onMouseEnter);\n        const onEdgeMouseMove = getMouseHandler$1(id, store.getState, onMouseMove);\n        const onEdgeMouseLeave = getMouseHandler$1(id, store.getState, onMouseLeave);\n        const handleEdgeUpdater = (event, isSourceHandle) => {\n            // avoid triggering edge updater if mouse btn is not left\n            if (event.button !== 0) {\n                return;\n            }\n            const { edges, isValidConnection: isValidConnectionStore } = store.getState();\n            const nodeId = isSourceHandle ? target : source;\n            const handleId = (isSourceHandle ? targetHandleId : sourceHandleId) || null;\n            const handleType = isSourceHandle ? 'target' : 'source';\n            const isValidConnection = isValidConnectionStore || alwaysValidConnection;\n            const isTarget = isSourceHandle;\n            const edge = edges.find((e) => e.id === id);\n            setUpdating(true);\n            onEdgeUpdateStart?.(event, edge, handleType);\n            const _onEdgeUpdateEnd = (evt) => {\n                setUpdating(false);\n                onEdgeUpdateEnd?.(evt, edge, handleType);\n            };\n            const onConnectEdge = (connection) => onEdgeUpdate?.(edge, connection);\n            handlePointerDown({\n                event,\n                handleId,\n                nodeId,\n                onConnect: onConnectEdge,\n                isTarget,\n                getState: store.getState,\n                setState: store.setState,\n                isValidConnection,\n                edgeUpdaterType: handleType,\n                onEdgeUpdateEnd: _onEdgeUpdateEnd,\n            });\n        };\n        const onEdgeUpdaterSourceMouseDown = (event) => handleEdgeUpdater(event, true);\n        const onEdgeUpdaterTargetMouseDown = (event) => handleEdgeUpdater(event, false);\n        const onEdgeUpdaterMouseEnter = () => setUpdateHover(true);\n        const onEdgeUpdaterMouseOut = () => setUpdateHover(false);\n        const inactive = !elementsSelectable && !onClick;\n        const onKeyDown = (event) => {\n            if (elementSelectionKeys.includes(event.key) && elementsSelectable) {\n                const { unselectNodesAndEdges, addSelectedEdges, edges } = store.getState();\n                const unselect = event.key === 'Escape';\n                if (unselect) {\n                    edgeRef.current?.blur();\n                    unselectNodesAndEdges({ edges: [edges.find((e) => e.id === id)] });\n                }\n                else {\n                    addSelectedEdges([id]);\n                }\n            }\n        };\n        return (jsxs(\"g\", { className: cc([\n                'react-flow__edge',\n                `react-flow__edge-${type}`,\n                className,\n                { selected, animated, inactive, updating: updateHover },\n            ]), onClick: onEdgeClick, onDoubleClick: onEdgeDoubleClickHandler, onContextMenu: onEdgeContextMenu, onMouseEnter: onEdgeMouseEnter, onMouseMove: onEdgeMouseMove, onMouseLeave: onEdgeMouseLeave, onKeyDown: isFocusable ? onKeyDown : undefined, tabIndex: isFocusable ? 0 : undefined, role: isFocusable ? 'button' : 'img', \"data-testid\": `rf__edge-${id}`, \"aria-label\": ariaLabel === null ? undefined : ariaLabel ? ariaLabel : `Edge from ${source} to ${target}`, \"aria-describedby\": isFocusable ? `${ARIA_EDGE_DESC_KEY}-${rfId}` : undefined, ref: edgeRef, children: [!updating && (jsx(EdgeComponent, { id: id, source: source, target: target, selected: selected, animated: animated, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, data: data, style: style, sourceX: sourceX, sourceY: sourceY, targetX: targetX, targetY: targetY, sourcePosition: sourcePosition, targetPosition: targetPosition, sourceHandleId: sourceHandleId, targetHandleId: targetHandleId, markerStart: markerStartUrl, markerEnd: markerEndUrl, pathOptions: pathOptions, interactionWidth: interactionWidth })), isUpdatable && (jsxs(Fragment, { children: [(isUpdatable === 'source' || isUpdatable === true) && (jsx(EdgeAnchor, { position: sourcePosition, centerX: sourceX, centerY: sourceY, radius: edgeUpdaterRadius, onMouseDown: onEdgeUpdaterSourceMouseDown, onMouseEnter: onEdgeUpdaterMouseEnter, onMouseOut: onEdgeUpdaterMouseOut, type: \"source\" })), (isUpdatable === 'target' || isUpdatable === true) && (jsx(EdgeAnchor, { position: targetPosition, centerX: targetX, centerY: targetY, radius: edgeUpdaterRadius, onMouseDown: onEdgeUpdaterTargetMouseDown, onMouseEnter: onEdgeUpdaterMouseEnter, onMouseOut: onEdgeUpdaterMouseOut, type: \"target\" }))] }))] }));\n    };\n    EdgeWrapper.displayName = 'EdgeWrapper';\n    return memo(EdgeWrapper);\n};\n\nfunction createEdgeTypes(edgeTypes) {\n    const standardTypes = {\n        default: wrapEdge((edgeTypes.default || BezierEdge)),\n        straight: wrapEdge((edgeTypes.bezier || StraightEdge)),\n        step: wrapEdge((edgeTypes.step || StepEdge)),\n        smoothstep: wrapEdge((edgeTypes.step || SmoothStepEdge)),\n        simplebezier: wrapEdge((edgeTypes.simplebezier || SimpleBezierEdge)),\n    };\n    const wrappedTypes = {};\n    const specialTypes = Object.keys(edgeTypes)\n        .filter((k) => !['default', 'bezier'].includes(k))\n        .reduce((res, key) => {\n        res[key] = wrapEdge((edgeTypes[key] || BezierEdge));\n        return res;\n    }, wrappedTypes);\n    return {\n        ...standardTypes,\n        ...specialTypes,\n    };\n}\nfunction getHandlePosition(position, nodeRect, handle = null) {\n    const x = (handle?.x || 0) + nodeRect.x;\n    const y = (handle?.y || 0) + nodeRect.y;\n    const width = handle?.width || nodeRect.width;\n    const height = handle?.height || nodeRect.height;\n    switch (position) {\n        case Position.Top:\n            return {\n                x: x + width / 2,\n                y,\n            };\n        case Position.Right:\n            return {\n                x: x + width,\n                y: y + height / 2,\n            };\n        case Position.Bottom:\n            return {\n                x: x + width / 2,\n                y: y + height,\n            };\n        case Position.Left:\n            return {\n                x,\n                y: y + height / 2,\n            };\n    }\n}\nfunction getHandle(bounds, handleId) {\n    if (!bounds) {\n        return null;\n    }\n    if (bounds.length === 1 || !handleId) {\n        return bounds[0];\n    }\n    else if (handleId) {\n        return bounds.find((d) => d.id === handleId) || null;\n    }\n    return null;\n}\nconst getEdgePositions = (sourceNodeRect, sourceHandle, sourcePosition, targetNodeRect, targetHandle, targetPosition) => {\n    const sourceHandlePos = getHandlePosition(sourcePosition, sourceNodeRect, sourceHandle);\n    const targetHandlePos = getHandlePosition(targetPosition, targetNodeRect, targetHandle);\n    return {\n        sourceX: sourceHandlePos.x,\n        sourceY: sourceHandlePos.y,\n        targetX: targetHandlePos.x,\n        targetY: targetHandlePos.y,\n    };\n};\nfunction isEdgeVisible({ sourcePos, targetPos, sourceWidth, sourceHeight, targetWidth, targetHeight, width, height, transform, }) {\n    const edgeBox = {\n        x: Math.min(sourcePos.x, targetPos.x),\n        y: Math.min(sourcePos.y, targetPos.y),\n        x2: Math.max(sourcePos.x + sourceWidth, targetPos.x + targetWidth),\n        y2: Math.max(sourcePos.y + sourceHeight, targetPos.y + targetHeight),\n    };\n    if (edgeBox.x === edgeBox.x2) {\n        edgeBox.x2 += 1;\n    }\n    if (edgeBox.y === edgeBox.y2) {\n        edgeBox.y2 += 1;\n    }\n    const viewBox = rectToBox({\n        x: (0 - transform[0]) / transform[2],\n        y: (0 - transform[1]) / transform[2],\n        width: width / transform[2],\n        height: height / transform[2],\n    });\n    const xOverlap = Math.max(0, Math.min(viewBox.x2, edgeBox.x2) - Math.max(viewBox.x, edgeBox.x));\n    const yOverlap = Math.max(0, Math.min(viewBox.y2, edgeBox.y2) - Math.max(viewBox.y, edgeBox.y));\n    const overlappingArea = Math.ceil(xOverlap * yOverlap);\n    return overlappingArea > 0;\n}\nfunction getNodeData(node) {\n    const handleBounds = node?.[internalsSymbol]?.handleBounds || null;\n    const isValid = handleBounds &&\n        node?.width &&\n        node?.height &&\n        typeof node?.positionAbsolute?.x !== 'undefined' &&\n        typeof node?.positionAbsolute?.y !== 'undefined';\n    return [\n        {\n            x: node?.positionAbsolute?.x || 0,\n            y: node?.positionAbsolute?.y || 0,\n            width: node?.width || 0,\n            height: node?.height || 0,\n        },\n        handleBounds,\n        !!isValid,\n    ];\n}\n\nconst defaultEdgeTree = [{ level: 0, isMaxLevel: true, edges: [] }];\nfunction groupEdgesByZLevel(edges, nodeInternals, elevateEdgesOnSelect = false) {\n    let maxLevel = -1;\n    const levelLookup = edges.reduce((tree, edge) => {\n        const hasZIndex = isNumeric(edge.zIndex);\n        let z = hasZIndex ? edge.zIndex : 0;\n        if (elevateEdgesOnSelect) {\n            const targetNode = nodeInternals.get(edge.target);\n            const sourceNode = nodeInternals.get(edge.source);\n            const edgeOrConnectedNodeSelected = edge.selected || targetNode?.selected || sourceNode?.selected;\n            const selectedZIndex = Math.max(sourceNode?.[internalsSymbol]?.z || 0, targetNode?.[internalsSymbol]?.z || 0, 1000);\n            z = (hasZIndex ? edge.zIndex : 0) + (edgeOrConnectedNodeSelected ? selectedZIndex : 0);\n        }\n        if (tree[z]) {\n            tree[z].push(edge);\n        }\n        else {\n            tree[z] = [edge];\n        }\n        maxLevel = z > maxLevel ? z : maxLevel;\n        return tree;\n    }, {});\n    const edgeTree = Object.entries(levelLookup).map(([key, edges]) => {\n        const level = +key;\n        return {\n            edges,\n            level,\n            isMaxLevel: level === maxLevel,\n        };\n    });\n    if (edgeTree.length === 0) {\n        return defaultEdgeTree;\n    }\n    return edgeTree;\n}\nfunction useVisibleEdges(onlyRenderVisible, nodeInternals, elevateEdgesOnSelect) {\n    const edges = useStore(useCallback((s) => {\n        if (!onlyRenderVisible) {\n            return s.edges;\n        }\n        return s.edges.filter((e) => {\n            const sourceNode = nodeInternals.get(e.source);\n            const targetNode = nodeInternals.get(e.target);\n            return (sourceNode?.width &&\n                sourceNode?.height &&\n                targetNode?.width &&\n                targetNode?.height &&\n                isEdgeVisible({\n                    sourcePos: sourceNode.positionAbsolute || { x: 0, y: 0 },\n                    targetPos: targetNode.positionAbsolute || { x: 0, y: 0 },\n                    sourceWidth: sourceNode.width,\n                    sourceHeight: sourceNode.height,\n                    targetWidth: targetNode.width,\n                    targetHeight: targetNode.height,\n                    width: s.width,\n                    height: s.height,\n                    transform: s.transform,\n                }));\n        });\n    }, [onlyRenderVisible, nodeInternals]));\n    return groupEdgesByZLevel(edges, nodeInternals, elevateEdgesOnSelect);\n}\n\nconst ArrowSymbol = ({ color = 'none', strokeWidth = 1 }) => {\n    return (jsx(\"polyline\", { stroke: color, strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: strokeWidth, fill: \"none\", points: \"-5,-4 0,0 -5,4\" }));\n};\nconst ArrowClosedSymbol = ({ color = 'none', strokeWidth = 1 }) => {\n    return (jsx(\"polyline\", { stroke: color, strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: strokeWidth, fill: color, points: \"-5,-4 0,0 -5,4 -5,-4\" }));\n};\nconst MarkerSymbols = {\n    [MarkerType.Arrow]: ArrowSymbol,\n    [MarkerType.ArrowClosed]: ArrowClosedSymbol,\n};\nfunction useMarkerSymbol(type) {\n    const store = useStoreApi();\n    const symbol = useMemo(() => {\n        const symbolExists = Object.prototype.hasOwnProperty.call(MarkerSymbols, type);\n        if (!symbolExists) {\n            store.getState().onError?.('009', errorMessages['error009'](type));\n            return null;\n        }\n        return MarkerSymbols[type];\n    }, [type]);\n    return symbol;\n}\n\nconst Marker = ({ id, type, color, width = 12.5, height = 12.5, markerUnits = 'strokeWidth', strokeWidth, orient = 'auto-start-reverse', }) => {\n    const Symbol = useMarkerSymbol(type);\n    if (!Symbol) {\n        return null;\n    }\n    return (jsx(\"marker\", { className: \"react-flow__arrowhead\", id: id, markerWidth: `${width}`, markerHeight: `${height}`, viewBox: \"-10 -10 20 20\", markerUnits: markerUnits, orient: orient, refX: \"0\", refY: \"0\", children: jsx(Symbol, { color: color, strokeWidth: strokeWidth }) }));\n};\nconst markerSelector = ({ defaultColor, rfId }) => (s) => {\n    const ids = [];\n    return s.edges\n        .reduce((markers, edge) => {\n        [edge.markerStart, edge.markerEnd].forEach((marker) => {\n            if (marker && typeof marker === 'object') {\n                const markerId = getMarkerId(marker, rfId);\n                if (!ids.includes(markerId)) {\n                    markers.push({ id: markerId, color: marker.color || defaultColor, ...marker });\n                    ids.push(markerId);\n                }\n            }\n        });\n        return markers;\n    }, [])\n        .sort((a, b) => a.id.localeCompare(b.id));\n};\n// when you have multiple flows on a page and you hide the first one, the other ones have no markers anymore\n// when they do have markers with the same ids. To prevent this the user can pass a unique id to the react flow wrapper\n// that we can then use for creating our unique marker ids\nconst MarkerDefinitions = ({ defaultColor, rfId }) => {\n    const markers = useStore(useCallback(markerSelector({ defaultColor, rfId }), [defaultColor, rfId]), \n    // the id includes all marker options, so we just need to look at that part of the marker\n    (a, b) => !(a.length !== b.length || a.some((m, i) => m.id !== b[i].id)));\n    return (jsx(\"defs\", { children: markers.map((marker) => (jsx(Marker, { id: marker.id, type: marker.type, color: marker.color, width: marker.width, height: marker.height, markerUnits: marker.markerUnits, strokeWidth: marker.strokeWidth, orient: marker.orient }, marker.id))) }));\n};\nMarkerDefinitions.displayName = 'MarkerDefinitions';\nvar MarkerDefinitions$1 = memo(MarkerDefinitions);\n\nconst selector$4 = (s) => ({\n    nodesConnectable: s.nodesConnectable,\n    edgesFocusable: s.edgesFocusable,\n    edgesUpdatable: s.edgesUpdatable,\n    elementsSelectable: s.elementsSelectable,\n    width: s.width,\n    height: s.height,\n    connectionMode: s.connectionMode,\n    nodeInternals: s.nodeInternals,\n    onError: s.onError,\n});\nconst EdgeRenderer = ({ defaultMarkerColor, onlyRenderVisibleElements, elevateEdgesOnSelect, rfId, edgeTypes, noPanClassName, onEdgeUpdate, onEdgeContextMenu, onEdgeMouseEnter, onEdgeMouseMove, onEdgeMouseLeave, onEdgeClick, edgeUpdaterRadius, onEdgeDoubleClick, onEdgeUpdateStart, onEdgeUpdateEnd, children, }) => {\n    const { edgesFocusable, edgesUpdatable, elementsSelectable, width, height, connectionMode, nodeInternals, onError } = useStore(selector$4, shallow);\n    const edgeTree = useVisibleEdges(onlyRenderVisibleElements, nodeInternals, elevateEdgesOnSelect);\n    if (!width) {\n        return null;\n    }\n    return (jsxs(Fragment, { children: [edgeTree.map(({ level, edges, isMaxLevel }) => (jsxs(\"svg\", { style: { zIndex: level }, width: width, height: height, className: \"react-flow__edges react-flow__container\", children: [isMaxLevel && jsx(MarkerDefinitions$1, { defaultColor: defaultMarkerColor, rfId: rfId }), jsx(\"g\", { children: edges.map((edge) => {\n                            const [sourceNodeRect, sourceHandleBounds, sourceIsValid] = getNodeData(nodeInternals.get(edge.source));\n                            const [targetNodeRect, targetHandleBounds, targetIsValid] = getNodeData(nodeInternals.get(edge.target));\n                            if (!sourceIsValid || !targetIsValid) {\n                                return null;\n                            }\n                            let edgeType = edge.type || 'default';\n                            if (!edgeTypes[edgeType]) {\n                                onError?.('011', errorMessages['error011'](edgeType));\n                                edgeType = 'default';\n                            }\n                            const EdgeComponent = edgeTypes[edgeType] || edgeTypes.default;\n                            // when connection type is loose we can define all handles as sources and connect source -> source\n                            const targetNodeHandles = connectionMode === ConnectionMode.Strict\n                                ? targetHandleBounds.target\n                                : (targetHandleBounds.target ?? []).concat(targetHandleBounds.source ?? []);\n                            const sourceHandle = getHandle(sourceHandleBounds.source, edge.sourceHandle);\n                            const targetHandle = getHandle(targetNodeHandles, edge.targetHandle);\n                            const sourcePosition = sourceHandle?.position || Position.Bottom;\n                            const targetPosition = targetHandle?.position || Position.Top;\n                            const isFocusable = !!(edge.focusable || (edgesFocusable && typeof edge.focusable === 'undefined'));\n                            const isUpdatable = typeof onEdgeUpdate !== 'undefined' &&\n                                (edge.updatable || (edgesUpdatable && typeof edge.updatable === 'undefined'));\n                            if (!sourceHandle || !targetHandle) {\n                                onError?.('008', errorMessages['error008'](sourceHandle, edge));\n                                return null;\n                            }\n                            const { sourceX, sourceY, targetX, targetY } = getEdgePositions(sourceNodeRect, sourceHandle, sourcePosition, targetNodeRect, targetHandle, targetPosition);\n                            return (jsx(EdgeComponent, { id: edge.id, className: cc([edge.className, noPanClassName]), type: edgeType, data: edge.data, selected: !!edge.selected, animated: !!edge.animated, hidden: !!edge.hidden, label: edge.label, labelStyle: edge.labelStyle, labelShowBg: edge.labelShowBg, labelBgStyle: edge.labelBgStyle, labelBgPadding: edge.labelBgPadding, labelBgBorderRadius: edge.labelBgBorderRadius, style: edge.style, source: edge.source, target: edge.target, sourceHandleId: edge.sourceHandle, targetHandleId: edge.targetHandle, markerEnd: edge.markerEnd, markerStart: edge.markerStart, sourceX: sourceX, sourceY: sourceY, targetX: targetX, targetY: targetY, sourcePosition: sourcePosition, targetPosition: targetPosition, elementsSelectable: elementsSelectable, onEdgeUpdate: onEdgeUpdate, onContextMenu: onEdgeContextMenu, onMouseEnter: onEdgeMouseEnter, onMouseMove: onEdgeMouseMove, onMouseLeave: onEdgeMouseLeave, onClick: onEdgeClick, edgeUpdaterRadius: edgeUpdaterRadius, onEdgeDoubleClick: onEdgeDoubleClick, onEdgeUpdateStart: onEdgeUpdateStart, onEdgeUpdateEnd: onEdgeUpdateEnd, rfId: rfId, ariaLabel: edge.ariaLabel, isFocusable: isFocusable, isUpdatable: isUpdatable, pathOptions: 'pathOptions' in edge ? edge.pathOptions : undefined, interactionWidth: edge.interactionWidth }, edge.id));\n                        }) })] }, level))), children] }));\n};\nEdgeRenderer.displayName = 'EdgeRenderer';\nvar EdgeRenderer$1 = memo(EdgeRenderer);\n\nconst selector$3 = (s) => `translate(${s.transform[0]}px,${s.transform[1]}px) scale(${s.transform[2]})`;\nfunction Viewport({ children }) {\n    const transform = useStore(selector$3);\n    return (jsx(\"div\", { className: \"react-flow__viewport react-flow__container\", style: { transform }, children: children }));\n}\n\nfunction useOnInitHandler(onInit) {\n    const rfInstance = useReactFlow();\n    const isInitialized = useRef(false);\n    useEffect(() => {\n        if (!isInitialized.current && rfInstance.viewportInitialized && onInit) {\n            setTimeout(() => onInit(rfInstance), 1);\n            isInitialized.current = true;\n        }\n    }, [onInit, rfInstance.viewportInitialized]);\n}\n\nconst oppositePosition = {\n    [Position.Left]: Position.Right,\n    [Position.Right]: Position.Left,\n    [Position.Top]: Position.Bottom,\n    [Position.Bottom]: Position.Top,\n};\nconst ConnectionLine = ({ nodeId, handleType, style, type = ConnectionLineType.Bezier, CustomComponent, connectionStatus, }) => {\n    const { fromNode, handleId, toX, toY, connectionMode } = useStore(useCallback((s) => ({\n        fromNode: s.nodeInternals.get(nodeId),\n        handleId: s.connectionHandleId,\n        toX: (s.connectionPosition.x - s.transform[0]) / s.transform[2],\n        toY: (s.connectionPosition.y - s.transform[1]) / s.transform[2],\n        connectionMode: s.connectionMode,\n    }), [nodeId]), shallow);\n    const fromHandleBounds = fromNode?.[internalsSymbol]?.handleBounds;\n    let handleBounds = fromHandleBounds?.[handleType];\n    if (connectionMode === ConnectionMode.Loose) {\n        handleBounds = handleBounds ? handleBounds : fromHandleBounds?.[handleType === 'source' ? 'target' : 'source'];\n    }\n    if (!fromNode || !handleBounds) {\n        return null;\n    }\n    const fromHandle = handleId ? handleBounds.find((d) => d.id === handleId) : handleBounds[0];\n    const fromHandleX = fromHandle ? fromHandle.x + fromHandle.width / 2 : (fromNode.width ?? 0) / 2;\n    const fromHandleY = fromHandle ? fromHandle.y + fromHandle.height / 2 : fromNode.height ?? 0;\n    const fromX = (fromNode.positionAbsolute?.x ?? 0) + fromHandleX;\n    const fromY = (fromNode.positionAbsolute?.y ?? 0) + fromHandleY;\n    const fromPosition = fromHandle?.position;\n    const toPosition = fromPosition ? oppositePosition[fromPosition] : null;\n    if (!fromPosition || !toPosition) {\n        return null;\n    }\n    if (CustomComponent) {\n        return (jsx(CustomComponent, { connectionLineType: type, connectionLineStyle: style, fromNode: fromNode, fromHandle: fromHandle, fromX: fromX, fromY: fromY, toX: toX, toY: toY, fromPosition: fromPosition, toPosition: toPosition, connectionStatus: connectionStatus }));\n    }\n    let dAttr = '';\n    const pathParams = {\n        sourceX: fromX,\n        sourceY: fromY,\n        sourcePosition: fromPosition,\n        targetX: toX,\n        targetY: toY,\n        targetPosition: toPosition,\n    };\n    if (type === ConnectionLineType.Bezier) {\n        // we assume the destination position is opposite to the source position\n        [dAttr] = getBezierPath(pathParams);\n    }\n    else if (type === ConnectionLineType.Step) {\n        [dAttr] = getSmoothStepPath({\n            ...pathParams,\n            borderRadius: 0,\n        });\n    }\n    else if (type === ConnectionLineType.SmoothStep) {\n        [dAttr] = getSmoothStepPath(pathParams);\n    }\n    else if (type === ConnectionLineType.SimpleBezier) {\n        [dAttr] = getSimpleBezierPath(pathParams);\n    }\n    else {\n        dAttr = `M${fromX},${fromY} ${toX},${toY}`;\n    }\n    return jsx(\"path\", { d: dAttr, fill: \"none\", className: \"react-flow__connection-path\", style: style });\n};\nConnectionLine.displayName = 'ConnectionLine';\nconst selector$2 = (s) => ({\n    nodeId: s.connectionNodeId,\n    handleType: s.connectionHandleType,\n    nodesConnectable: s.nodesConnectable,\n    connectionStatus: s.connectionStatus,\n    width: s.width,\n    height: s.height,\n});\nfunction ConnectionLineWrapper({ containerStyle, style, type, component }) {\n    const { nodeId, handleType, nodesConnectable, width, height, connectionStatus } = useStore(selector$2, shallow);\n    const isValid = !!(nodeId && handleType && width && nodesConnectable);\n    if (!isValid) {\n        return null;\n    }\n    return (jsx(\"svg\", { style: containerStyle, width: width, height: height, className: \"react-flow__edges react-flow__connectionline react-flow__container\", children: jsx(\"g\", { className: cc(['react-flow__connection', connectionStatus]), children: jsx(ConnectionLine, { nodeId: nodeId, handleType: handleType, style: style, type: type, CustomComponent: component, connectionStatus: connectionStatus }) }) }));\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction useNodeOrEdgeTypes(nodeOrEdgeTypes, createTypes) {\n    const typesKeysRef = useRef(null);\n    const store = useStoreApi();\n    const typesParsed = useMemo(() => {\n        if (process.env.NODE_ENV === 'development') {\n            const typeKeys = Object.keys(nodeOrEdgeTypes);\n            if (shallow(typesKeysRef.current, typeKeys)) {\n                store.getState().onError?.('002', errorMessages['error002']());\n            }\n            typesKeysRef.current = typeKeys;\n        }\n        return createTypes(nodeOrEdgeTypes);\n    }, [nodeOrEdgeTypes]);\n    return typesParsed;\n}\n\nconst GraphView = ({ nodeTypes, edgeTypes, onMove, onMoveStart, onMoveEnd, onInit, onNodeClick, onEdgeClick, onNodeDoubleClick, onEdgeDoubleClick, onNodeMouseEnter, onNodeMouseMove, onNodeMouseLeave, onNodeContextMenu, onSelectionContextMenu, onSelectionStart, onSelectionEnd, connectionLineType, connectionLineStyle, connectionLineComponent, connectionLineContainerStyle, selectionKeyCode, selectionOnDrag, selectionMode, multiSelectionKeyCode, panActivationKeyCode, zoomActivationKeyCode, deleteKeyCode, onlyRenderVisibleElements, elementsSelectable, selectNodesOnDrag, defaultViewport, translateExtent, minZoom, maxZoom, preventScrolling, defaultMarkerColor, zoomOnScroll, zoomOnPinch, panOnScroll, panOnScrollSpeed, panOnScrollMode, zoomOnDoubleClick, panOnDrag, onPaneClick, onPaneMouseEnter, onPaneMouseMove, onPaneMouseLeave, onPaneScroll, onPaneContextMenu, onEdgeUpdate, onEdgeContextMenu, onEdgeMouseEnter, onEdgeMouseMove, onEdgeMouseLeave, edgeUpdaterRadius, onEdgeUpdateStart, onEdgeUpdateEnd, noDragClassName, noWheelClassName, noPanClassName, elevateEdgesOnSelect, disableKeyboardA11y, nodeOrigin, nodeExtent, rfId, }) => {\n    const nodeTypesWrapped = useNodeOrEdgeTypes(nodeTypes, createNodeTypes);\n    const edgeTypesWrapped = useNodeOrEdgeTypes(edgeTypes, createEdgeTypes);\n    useOnInitHandler(onInit);\n    return (jsx(FlowRenderer$1, { onPaneClick: onPaneClick, onPaneMouseEnter: onPaneMouseEnter, onPaneMouseMove: onPaneMouseMove, onPaneMouseLeave: onPaneMouseLeave, onPaneContextMenu: onPaneContextMenu, onPaneScroll: onPaneScroll, deleteKeyCode: deleteKeyCode, selectionKeyCode: selectionKeyCode, selectionOnDrag: selectionOnDrag, selectionMode: selectionMode, onSelectionStart: onSelectionStart, onSelectionEnd: onSelectionEnd, multiSelectionKeyCode: multiSelectionKeyCode, panActivationKeyCode: panActivationKeyCode, zoomActivationKeyCode: zoomActivationKeyCode, elementsSelectable: elementsSelectable, onMove: onMove, onMoveStart: onMoveStart, onMoveEnd: onMoveEnd, zoomOnScroll: zoomOnScroll, zoomOnPinch: zoomOnPinch, zoomOnDoubleClick: zoomOnDoubleClick, panOnScroll: panOnScroll, panOnScrollSpeed: panOnScrollSpeed, panOnScrollMode: panOnScrollMode, panOnDrag: panOnDrag, defaultViewport: defaultViewport, translateExtent: translateExtent, minZoom: minZoom, maxZoom: maxZoom, onSelectionContextMenu: onSelectionContextMenu, preventScrolling: preventScrolling, noDragClassName: noDragClassName, noWheelClassName: noWheelClassName, noPanClassName: noPanClassName, disableKeyboardA11y: disableKeyboardA11y, children: jsxs(Viewport, { children: [jsx(EdgeRenderer$1, { edgeTypes: edgeTypesWrapped, onEdgeClick: onEdgeClick, onEdgeDoubleClick: onEdgeDoubleClick, onEdgeUpdate: onEdgeUpdate, onlyRenderVisibleElements: onlyRenderVisibleElements, onEdgeContextMenu: onEdgeContextMenu, onEdgeMouseEnter: onEdgeMouseEnter, onEdgeMouseMove: onEdgeMouseMove, onEdgeMouseLeave: onEdgeMouseLeave, onEdgeUpdateStart: onEdgeUpdateStart, onEdgeUpdateEnd: onEdgeUpdateEnd, edgeUpdaterRadius: edgeUpdaterRadius, defaultMarkerColor: defaultMarkerColor, noPanClassName: noPanClassName, elevateEdgesOnSelect: !!elevateEdgesOnSelect, disableKeyboardA11y: disableKeyboardA11y, rfId: rfId, children: jsx(ConnectionLineWrapper, { style: connectionLineStyle, type: connectionLineType, component: connectionLineComponent, containerStyle: connectionLineContainerStyle }) }), jsx(\"div\", { className: \"react-flow__edgelabel-renderer\" }), jsx(NodeRenderer$1, { nodeTypes: nodeTypesWrapped, onNodeClick: onNodeClick, onNodeDoubleClick: onNodeDoubleClick, onNodeMouseEnter: onNodeMouseEnter, onNodeMouseMove: onNodeMouseMove, onNodeMouseLeave: onNodeMouseLeave, onNodeContextMenu: onNodeContextMenu, selectNodesOnDrag: selectNodesOnDrag, onlyRenderVisibleElements: onlyRenderVisibleElements, noPanClassName: noPanClassName, noDragClassName: noDragClassName, disableKeyboardA11y: disableKeyboardA11y, nodeOrigin: nodeOrigin, nodeExtent: nodeExtent, rfId: rfId })] }) }));\n};\nGraphView.displayName = 'GraphView';\nvar GraphView$1 = memo(GraphView);\n\nconst infiniteExtent = [\n    [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n    [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY],\n];\nconst initialState = {\n    rfId: '1',\n    width: 0,\n    height: 0,\n    transform: [0, 0, 1],\n    nodeInternals: new Map(),\n    edges: [],\n    onNodesChange: null,\n    onEdgesChange: null,\n    hasDefaultNodes: false,\n    hasDefaultEdges: false,\n    d3Zoom: null,\n    d3Selection: null,\n    d3ZoomHandler: undefined,\n    minZoom: 0.5,\n    maxZoom: 2,\n    translateExtent: infiniteExtent,\n    nodeExtent: infiniteExtent,\n    nodesSelectionActive: false,\n    userSelectionActive: false,\n    userSelectionRect: null,\n    connectionNodeId: null,\n    connectionHandleId: null,\n    connectionHandleType: 'source',\n    connectionPosition: { x: 0, y: 0 },\n    connectionStatus: null,\n    connectionMode: ConnectionMode.Strict,\n    domNode: null,\n    paneDragging: false,\n    noPanClassName: 'nopan',\n    nodeOrigin: [0, 0],\n    snapGrid: [15, 15],\n    snapToGrid: false,\n    nodesDraggable: true,\n    nodesConnectable: true,\n    nodesFocusable: true,\n    edgesFocusable: true,\n    edgesUpdatable: true,\n    elementsSelectable: true,\n    elevateNodesOnSelect: true,\n    fitViewOnInit: false,\n    fitViewOnInitDone: false,\n    fitViewOnInitOptions: undefined,\n    multiSelectionActive: false,\n    connectionStartHandle: null,\n    connectionEndHandle: null,\n    connectionClickStartHandle: null,\n    connectOnClick: true,\n    ariaLiveMessage: '',\n    autoPanOnConnect: true,\n    autoPanOnNodeDrag: true,\n    connectionRadius: 20,\n    onError: devWarn,\n    isValidConnection: undefined,\n};\n\nconst createRFStore = () => createWithEqualityFn((set, get) => ({\n    ...initialState,\n    setNodes: (nodes) => {\n        const { nodeInternals, nodeOrigin, elevateNodesOnSelect } = get();\n        set({ nodeInternals: createNodeInternals(nodes, nodeInternals, nodeOrigin, elevateNodesOnSelect) });\n    },\n    getNodes: () => {\n        return Array.from(get().nodeInternals.values());\n    },\n    setEdges: (edges) => {\n        const { defaultEdgeOptions = {} } = get();\n        set({ edges: edges.map((e) => ({ ...defaultEdgeOptions, ...e })) });\n    },\n    setDefaultNodesAndEdges: (nodes, edges) => {\n        const hasDefaultNodes = typeof nodes !== 'undefined';\n        const hasDefaultEdges = typeof edges !== 'undefined';\n        const nodeInternals = hasDefaultNodes\n            ? createNodeInternals(nodes, new Map(), get().nodeOrigin, get().elevateNodesOnSelect)\n            : new Map();\n        const nextEdges = hasDefaultEdges ? edges : [];\n        set({ nodeInternals, edges: nextEdges, hasDefaultNodes, hasDefaultEdges });\n    },\n    updateNodeDimensions: (updates) => {\n        const { onNodesChange, nodeInternals, fitViewOnInit, fitViewOnInitDone, fitViewOnInitOptions, domNode, nodeOrigin, } = get();\n        const viewportNode = domNode?.querySelector('.react-flow__viewport');\n        if (!viewportNode) {\n            return;\n        }\n        const style = window.getComputedStyle(viewportNode);\n        const { m22: zoom } = new window.DOMMatrixReadOnly(style.transform);\n        const changes = updates.reduce((res, update) => {\n            const node = nodeInternals.get(update.id);\n            if (node) {\n                const dimensions = getDimensions(update.nodeElement);\n                const doUpdate = !!(dimensions.width &&\n                    dimensions.height &&\n                    (node.width !== dimensions.width || node.height !== dimensions.height || update.forceUpdate));\n                if (doUpdate) {\n                    nodeInternals.set(node.id, {\n                        ...node,\n                        [internalsSymbol]: {\n                            ...node[internalsSymbol],\n                            handleBounds: {\n                                source: getHandleBounds('.source', update.nodeElement, zoom, nodeOrigin),\n                                target: getHandleBounds('.target', update.nodeElement, zoom, nodeOrigin),\n                            },\n                        },\n                        ...dimensions,\n                    });\n                    res.push({\n                        id: node.id,\n                        type: 'dimensions',\n                        dimensions,\n                    });\n                }\n            }\n            return res;\n        }, []);\n        updateAbsoluteNodePositions(nodeInternals, nodeOrigin);\n        const nextFitViewOnInitDone = fitViewOnInitDone ||\n            (fitViewOnInit && !fitViewOnInitDone && fitView(get, { initial: true, ...fitViewOnInitOptions }));\n        set({ nodeInternals: new Map(nodeInternals), fitViewOnInitDone: nextFitViewOnInitDone });\n        if (changes?.length > 0) {\n            onNodesChange?.(changes);\n        }\n    },\n    updateNodePositions: (nodeDragItems, positionChanged = true, dragging = false) => {\n        const { triggerNodeChanges } = get();\n        const changes = nodeDragItems.map((node) => {\n            const change = {\n                id: node.id,\n                type: 'position',\n                dragging,\n            };\n            if (positionChanged) {\n                change.positionAbsolute = node.positionAbsolute;\n                change.position = node.position;\n            }\n            return change;\n        });\n        triggerNodeChanges(changes);\n    },\n    triggerNodeChanges: (changes) => {\n        const { onNodesChange, nodeInternals, hasDefaultNodes, nodeOrigin, getNodes, elevateNodesOnSelect } = get();\n        if (changes?.length) {\n            if (hasDefaultNodes) {\n                const nodes = applyNodeChanges(changes, getNodes());\n                const nextNodeInternals = createNodeInternals(nodes, nodeInternals, nodeOrigin, elevateNodesOnSelect);\n                set({ nodeInternals: nextNodeInternals });\n            }\n            onNodesChange?.(changes);\n        }\n    },\n    addSelectedNodes: (selectedNodeIds) => {\n        const { multiSelectionActive, edges, getNodes } = get();\n        let changedNodes;\n        let changedEdges = null;\n        if (multiSelectionActive) {\n            changedNodes = selectedNodeIds.map((nodeId) => createSelectionChange(nodeId, true));\n        }\n        else {\n            changedNodes = getSelectionChanges(getNodes(), selectedNodeIds);\n            changedEdges = getSelectionChanges(edges, []);\n        }\n        updateNodesAndEdgesSelections({\n            changedNodes,\n            changedEdges,\n            get,\n            set,\n        });\n    },\n    addSelectedEdges: (selectedEdgeIds) => {\n        const { multiSelectionActive, edges, getNodes } = get();\n        let changedEdges;\n        let changedNodes = null;\n        if (multiSelectionActive) {\n            changedEdges = selectedEdgeIds.map((edgeId) => createSelectionChange(edgeId, true));\n        }\n        else {\n            changedEdges = getSelectionChanges(edges, selectedEdgeIds);\n            changedNodes = getSelectionChanges(getNodes(), []);\n        }\n        updateNodesAndEdgesSelections({\n            changedNodes,\n            changedEdges,\n            get,\n            set,\n        });\n    },\n    unselectNodesAndEdges: ({ nodes, edges } = {}) => {\n        const { edges: storeEdges, getNodes } = get();\n        const nodesToUnselect = nodes ? nodes : getNodes();\n        const edgesToUnselect = edges ? edges : storeEdges;\n        const changedNodes = nodesToUnselect.map((n) => {\n            n.selected = false;\n            return createSelectionChange(n.id, false);\n        });\n        const changedEdges = edgesToUnselect.map((edge) => createSelectionChange(edge.id, false));\n        updateNodesAndEdgesSelections({\n            changedNodes,\n            changedEdges,\n            get,\n            set,\n        });\n    },\n    setMinZoom: (minZoom) => {\n        const { d3Zoom, maxZoom } = get();\n        d3Zoom?.scaleExtent([minZoom, maxZoom]);\n        set({ minZoom });\n    },\n    setMaxZoom: (maxZoom) => {\n        const { d3Zoom, minZoom } = get();\n        d3Zoom?.scaleExtent([minZoom, maxZoom]);\n        set({ maxZoom });\n    },\n    setTranslateExtent: (translateExtent) => {\n        get().d3Zoom?.translateExtent(translateExtent);\n        set({ translateExtent });\n    },\n    resetSelectedElements: () => {\n        const { edges, getNodes } = get();\n        const nodes = getNodes();\n        const nodesToUnselect = nodes\n            .filter((e) => e.selected)\n            .map((n) => createSelectionChange(n.id, false));\n        const edgesToUnselect = edges\n            .filter((e) => e.selected)\n            .map((e) => createSelectionChange(e.id, false));\n        updateNodesAndEdgesSelections({\n            changedNodes: nodesToUnselect,\n            changedEdges: edgesToUnselect,\n            get,\n            set,\n        });\n    },\n    setNodeExtent: (nodeExtent) => {\n        const { nodeInternals } = get();\n        nodeInternals.forEach((node) => {\n            node.positionAbsolute = clampPosition(node.position, nodeExtent);\n        });\n        set({\n            nodeExtent,\n            nodeInternals: new Map(nodeInternals),\n        });\n    },\n    panBy: (delta) => {\n        const { transform, width, height, d3Zoom, d3Selection, translateExtent } = get();\n        if (!d3Zoom || !d3Selection || (!delta.x && !delta.y)) {\n            return false;\n        }\n        const nextTransform = zoomIdentity\n            .translate(transform[0] + delta.x, transform[1] + delta.y)\n            .scale(transform[2]);\n        const extent = [\n            [0, 0],\n            [width, height],\n        ];\n        const constrainedTransform = d3Zoom?.constrain()(nextTransform, extent, translateExtent);\n        d3Zoom.transform(d3Selection, constrainedTransform);\n        const transformChanged = transform[0] !== constrainedTransform.x ||\n            transform[1] !== constrainedTransform.y ||\n            transform[2] !== constrainedTransform.k;\n        return transformChanged;\n    },\n    cancelConnection: () => set({\n        connectionNodeId: initialState.connectionNodeId,\n        connectionHandleId: initialState.connectionHandleId,\n        connectionHandleType: initialState.connectionHandleType,\n        connectionStatus: initialState.connectionStatus,\n        connectionStartHandle: initialState.connectionStartHandle,\n        connectionEndHandle: initialState.connectionEndHandle,\n    }),\n    reset: () => set({ ...initialState }),\n}), Object.is);\n\nconst ReactFlowProvider = ({ children }) => {\n    const storeRef = useRef(null);\n    if (!storeRef.current) {\n        storeRef.current = createRFStore();\n    }\n    return jsx(Provider$1, { value: storeRef.current, children: children });\n};\nReactFlowProvider.displayName = 'ReactFlowProvider';\n\nconst Wrapper = ({ children }) => {\n    const isWrapped = useContext(StoreContext);\n    if (isWrapped) {\n        // we need to wrap it with a fragment because it's not allowed for children to be a ReactNode\n        // https://github.com/DefinitelyTyped/DefinitelyTyped/issues/18051\n        return jsx(Fragment, { children: children });\n    }\n    return jsx(ReactFlowProvider, { children: children });\n};\nWrapper.displayName = 'ReactFlowWrapper';\n\nconst defaultNodeTypes = {\n    input: InputNode$1,\n    default: DefaultNode$1,\n    output: OutputNode$1,\n    group: GroupNode,\n};\nconst defaultEdgeTypes = {\n    default: BezierEdge,\n    straight: StraightEdge,\n    step: StepEdge,\n    smoothstep: SmoothStepEdge,\n    simplebezier: SimpleBezierEdge,\n};\nconst initNodeOrigin = [0, 0];\nconst initSnapGrid = [15, 15];\nconst initDefaultViewport = { x: 0, y: 0, zoom: 1 };\nconst wrapperStyle = {\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden',\n    position: 'relative',\n    zIndex: 0,\n};\nconst ReactFlow = forwardRef(({ nodes, edges, defaultNodes, defaultEdges, className, nodeTypes = defaultNodeTypes, edgeTypes = defaultEdgeTypes, onNodeClick, onEdgeClick, onInit, onMove, onMoveStart, onMoveEnd, onConnect, onConnectStart, onConnectEnd, onClickConnectStart, onClickConnectEnd, onNodeMouseEnter, onNodeMouseMove, onNodeMouseLeave, onNodeContextMenu, onNodeDoubleClick, onNodeDragStart, onNodeDrag, onNodeDragStop, onNodesDelete, onEdgesDelete, onSelectionChange, onSelectionDragStart, onSelectionDrag, onSelectionDragStop, onSelectionContextMenu, onSelectionStart, onSelectionEnd, connectionMode = ConnectionMode.Strict, connectionLineType = ConnectionLineType.Bezier, connectionLineStyle, connectionLineComponent, connectionLineContainerStyle, deleteKeyCode = 'Backspace', selectionKeyCode = 'Shift', selectionOnDrag = false, selectionMode = SelectionMode.Full, panActivationKeyCode = 'Space', multiSelectionKeyCode = isMacOs() ? 'Meta' : 'Control', zoomActivationKeyCode = isMacOs() ? 'Meta' : 'Control', snapToGrid = false, snapGrid = initSnapGrid, onlyRenderVisibleElements = false, selectNodesOnDrag = true, nodesDraggable, nodesConnectable, nodesFocusable, nodeOrigin = initNodeOrigin, edgesFocusable, edgesUpdatable, elementsSelectable, defaultViewport = initDefaultViewport, minZoom = 0.5, maxZoom = 2, translateExtent = infiniteExtent, preventScrolling = true, nodeExtent, defaultMarkerColor = '#b1b1b7', zoomOnScroll = true, zoomOnPinch = true, panOnScroll = false, panOnScrollSpeed = 0.5, panOnScrollMode = PanOnScrollMode.Free, zoomOnDoubleClick = true, panOnDrag = true, onPaneClick, onPaneMouseEnter, onPaneMouseMove, onPaneMouseLeave, onPaneScroll, onPaneContextMenu, children, onEdgeUpdate, onEdgeContextMenu, onEdgeDoubleClick, onEdgeMouseEnter, onEdgeMouseMove, onEdgeMouseLeave, onEdgeUpdateStart, onEdgeUpdateEnd, edgeUpdaterRadius = 10, onNodesChange, onEdgesChange, noDragClassName = 'nodrag', noWheelClassName = 'nowheel', noPanClassName = 'nopan', fitView = false, fitViewOptions, connectOnClick = true, attributionPosition, proOptions, defaultEdgeOptions, elevateNodesOnSelect = true, elevateEdgesOnSelect = false, disableKeyboardA11y = false, autoPanOnConnect = true, autoPanOnNodeDrag = true, connectionRadius = 20, isValidConnection, onError, style, id, ...rest }, ref) => {\n    const rfId = id || '1';\n    return (jsx(\"div\", { ...rest, style: { ...style, ...wrapperStyle }, ref: ref, className: cc(['react-flow', className]), \"data-testid\": \"rf__wrapper\", id: id, children: jsxs(Wrapper, { children: [jsx(GraphView$1, { onInit: onInit, onMove: onMove, onMoveStart: onMoveStart, onMoveEnd: onMoveEnd, onNodeClick: onNodeClick, onEdgeClick: onEdgeClick, onNodeMouseEnter: onNodeMouseEnter, onNodeMouseMove: onNodeMouseMove, onNodeMouseLeave: onNodeMouseLeave, onNodeContextMenu: onNodeContextMenu, onNodeDoubleClick: onNodeDoubleClick, nodeTypes: nodeTypes, edgeTypes: edgeTypes, connectionLineType: connectionLineType, connectionLineStyle: connectionLineStyle, connectionLineComponent: connectionLineComponent, connectionLineContainerStyle: connectionLineContainerStyle, selectionKeyCode: selectionKeyCode, selectionOnDrag: selectionOnDrag, selectionMode: selectionMode, deleteKeyCode: deleteKeyCode, multiSelectionKeyCode: multiSelectionKeyCode, panActivationKeyCode: panActivationKeyCode, zoomActivationKeyCode: zoomActivationKeyCode, onlyRenderVisibleElements: onlyRenderVisibleElements, selectNodesOnDrag: selectNodesOnDrag, defaultViewport: defaultViewport, translateExtent: translateExtent, minZoom: minZoom, maxZoom: maxZoom, preventScrolling: preventScrolling, zoomOnScroll: zoomOnScroll, zoomOnPinch: zoomOnPinch, zoomOnDoubleClick: zoomOnDoubleClick, panOnScroll: panOnScroll, panOnScrollSpeed: panOnScrollSpeed, panOnScrollMode: panOnScrollMode, panOnDrag: panOnDrag, onPaneClick: onPaneClick, onPaneMouseEnter: onPaneMouseEnter, onPaneMouseMove: onPaneMouseMove, onPaneMouseLeave: onPaneMouseLeave, onPaneScroll: onPaneScroll, onPaneContextMenu: onPaneContextMenu, onSelectionContextMenu: onSelectionContextMenu, onSelectionStart: onSelectionStart, onSelectionEnd: onSelectionEnd, onEdgeUpdate: onEdgeUpdate, onEdgeContextMenu: onEdgeContextMenu, onEdgeDoubleClick: onEdgeDoubleClick, onEdgeMouseEnter: onEdgeMouseEnter, onEdgeMouseMove: onEdgeMouseMove, onEdgeMouseLeave: onEdgeMouseLeave, onEdgeUpdateStart: onEdgeUpdateStart, onEdgeUpdateEnd: onEdgeUpdateEnd, edgeUpdaterRadius: edgeUpdaterRadius, defaultMarkerColor: defaultMarkerColor, noDragClassName: noDragClassName, noWheelClassName: noWheelClassName, noPanClassName: noPanClassName, elevateEdgesOnSelect: elevateEdgesOnSelect, rfId: rfId, disableKeyboardA11y: disableKeyboardA11y, nodeOrigin: nodeOrigin, nodeExtent: nodeExtent }), jsx(StoreUpdater, { nodes: nodes, edges: edges, defaultNodes: defaultNodes, defaultEdges: defaultEdges, onConnect: onConnect, onConnectStart: onConnectStart, onConnectEnd: onConnectEnd, onClickConnectStart: onClickConnectStart, onClickConnectEnd: onClickConnectEnd, nodesDraggable: nodesDraggable, nodesConnectable: nodesConnectable, nodesFocusable: nodesFocusable, edgesFocusable: edgesFocusable, edgesUpdatable: edgesUpdatable, elementsSelectable: elementsSelectable, elevateNodesOnSelect: elevateNodesOnSelect, minZoom: minZoom, maxZoom: maxZoom, nodeExtent: nodeExtent, onNodesChange: onNodesChange, onEdgesChange: onEdgesChange, snapToGrid: snapToGrid, snapGrid: snapGrid, connectionMode: connectionMode, translateExtent: translateExtent, connectOnClick: connectOnClick, defaultEdgeOptions: defaultEdgeOptions, fitView: fitView, fitViewOptions: fitViewOptions, onNodesDelete: onNodesDelete, onEdgesDelete: onEdgesDelete, onNodeDragStart: onNodeDragStart, onNodeDrag: onNodeDrag, onNodeDragStop: onNodeDragStop, onSelectionDrag: onSelectionDrag, onSelectionDragStart: onSelectionDragStart, onSelectionDragStop: onSelectionDragStop, noPanClassName: noPanClassName, nodeOrigin: nodeOrigin, rfId: rfId, autoPanOnConnect: autoPanOnConnect, autoPanOnNodeDrag: autoPanOnNodeDrag, onError: onError, connectionRadius: connectionRadius, isValidConnection: isValidConnection }), jsx(Wrapper$1, { onSelectionChange: onSelectionChange }), children, jsx(Attribution, { proOptions: proOptions, position: attributionPosition }), jsx(A11yDescriptions, { rfId: rfId, disableKeyboardA11y: disableKeyboardA11y })] }) }));\n});\nReactFlow.displayName = 'ReactFlow';\n\nconst selector$1 = (s) => s.domNode?.querySelector('.react-flow__edgelabel-renderer');\nfunction EdgeLabelRenderer({ children }) {\n    const edgeLabelRenderer = useStore(selector$1);\n    if (!edgeLabelRenderer) {\n        return null;\n    }\n    return createPortal(children, edgeLabelRenderer);\n}\n\nfunction useUpdateNodeInternals() {\n    const store = useStoreApi();\n    return useCallback((id) => {\n        const { domNode, updateNodeDimensions } = store.getState();\n        const updateIds = Array.isArray(id) ? id : [id];\n        const updates = updateIds.reduce((res, updateId) => {\n            const nodeElement = domNode?.querySelector(`.react-flow__node[data-id=\"${updateId}\"]`);\n            if (nodeElement) {\n                res.push({ id: updateId, nodeElement, forceUpdate: true });\n            }\n            return res;\n        }, []);\n        requestAnimationFrame(() => updateNodeDimensions(updates));\n    }, []);\n}\n\nconst nodesSelector = (state) => state.getNodes();\nfunction useNodes() {\n    const nodes = useStore(nodesSelector, shallow);\n    return nodes;\n}\n\nconst edgesSelector = (state) => state.edges;\nfunction useEdges() {\n    const edges = useStore(edgesSelector, shallow);\n    return edges;\n}\n\nconst viewportSelector = (state) => ({\n    x: state.transform[0],\n    y: state.transform[1],\n    zoom: state.transform[2],\n});\nfunction useViewport() {\n    const viewport = useStore(viewportSelector, shallow);\n    return viewport;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction createUseItemsState(applyChanges) {\n    return (initialItems) => {\n        const [items, setItems] = useState(initialItems);\n        const onItemsChange = useCallback((changes) => setItems((items) => applyChanges(changes, items)), []);\n        return [items, setItems, onItemsChange];\n    };\n}\nconst useNodesState = createUseItemsState(applyNodeChanges);\nconst useEdgesState = createUseItemsState(applyEdgeChanges);\n\nfunction useOnViewportChange({ onStart, onChange, onEnd }) {\n    const store = useStoreApi();\n    useEffect(() => {\n        store.setState({ onViewportChangeStart: onStart });\n    }, [onStart]);\n    useEffect(() => {\n        store.setState({ onViewportChange: onChange });\n    }, [onChange]);\n    useEffect(() => {\n        store.setState({ onViewportChangeEnd: onEnd });\n    }, [onEnd]);\n}\n\nfunction useOnSelectionChange({ onChange }) {\n    const store = useStoreApi();\n    useEffect(() => {\n        store.setState({ onSelectionChange: onChange });\n    }, [onChange]);\n}\n\nconst selector = (options) => (s) => {\n    if (s.nodeInternals.size === 0) {\n        return false;\n    }\n    return s\n        .getNodes()\n        .filter((n) => (options.includeHiddenNodes ? true : !n.hidden))\n        .every((n) => n[internalsSymbol]?.handleBounds !== undefined);\n};\nconst defaultOptions = {\n    includeHiddenNodes: false,\n};\nfunction useNodesInitialized(options = defaultOptions) {\n    const initialized = useStore(selector(options));\n    return initialized;\n}\n\nexport { BaseEdge, BezierEdge, ConnectionLineType, ConnectionMode, EdgeLabelRenderer, EdgeText$1 as EdgeText, Handle$1 as Handle, MarkerType, PanOnScrollMode, Panel, Position, ReactFlow, ReactFlowProvider, SelectionMode, SimpleBezierEdge, SmoothStepEdge, StepEdge, StraightEdge, addEdge, applyEdgeChanges, applyNodeChanges, boxToRect, clamp, getBezierPath, getBoundsOfRects, getConnectedEdges, getIncomers, getMarkerEnd, getNodePositionWithOrigin, getOutgoers, getRectOfNodes, getSimpleBezierPath, getSmoothStepPath, getStraightPath, getTransformForBounds, internalsSymbol, isEdge, isNode, rectToBox, updateEdge, useEdges, useEdgesState, useGetPointerPosition, useKeyPress, useNodeId, useNodes, useNodesInitialized, useNodesState, useOnSelectionChange, useOnViewportChange, useReactFlow, useStore, useStoreApi, useUpdateNodeInternals, useViewport };\n","import { jsx, jsxs, Fragment } from 'react/jsx-runtime';\nimport { memo, useState, useEffect } from 'react';\nimport cc from 'classcat';\nimport { shallow } from 'zustand/shallow';\nimport { useStoreApi, useStore, useReactFlow, Panel } from '@reactflow/core';\n\nfunction PlusIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 32 32\", children: jsx(\"path\", { d: \"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\" }) }));\n}\n\nfunction MinusIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 32 5\", children: jsx(\"path\", { d: \"M0 0h32v4.2H0z\" }) }));\n}\n\nfunction FitViewIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 32 30\", children: jsx(\"path\", { d: \"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\" }) }));\n}\n\nfunction LockIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 25 32\", children: jsx(\"path\", { d: \"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\" }) }));\n}\n\nfunction UnlockIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 25 32\", children: jsx(\"path\", { d: \"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z\" }) }));\n}\n\nconst ControlButton = ({ children, className, ...rest }) => (jsx(\"button\", { type: \"button\", className: cc(['react-flow__controls-button', className]), ...rest, children: children }));\nControlButton.displayName = 'ControlButton';\n\nconst selector = (s) => ({\n    isInteractive: s.nodesDraggable || s.nodesConnectable || s.elementsSelectable,\n    minZoomReached: s.transform[2] <= s.minZoom,\n    maxZoomReached: s.transform[2] >= s.maxZoom,\n});\nconst Controls = ({ style, showZoom = true, showFitView = true, showInteractive = true, fitViewOptions, onZoomIn, onZoomOut, onFitView, onInteractiveChange, className, children, position = 'bottom-left', }) => {\n    const store = useStoreApi();\n    const [isVisible, setIsVisible] = useState(false);\n    const { isInteractive, minZoomReached, maxZoomReached } = useStore(selector, shallow);\n    const { zoomIn, zoomOut, fitView } = useReactFlow();\n    useEffect(() => {\n        setIsVisible(true);\n    }, []);\n    if (!isVisible) {\n        return null;\n    }\n    const onZoomInHandler = () => {\n        zoomIn();\n        onZoomIn?.();\n    };\n    const onZoomOutHandler = () => {\n        zoomOut();\n        onZoomOut?.();\n    };\n    const onFitViewHandler = () => {\n        fitView(fitViewOptions);\n        onFitView?.();\n    };\n    const onToggleInteractivity = () => {\n        store.setState({\n            nodesDraggable: !isInteractive,\n            nodesConnectable: !isInteractive,\n            elementsSelectable: !isInteractive,\n        });\n        onInteractiveChange?.(!isInteractive);\n    };\n    return (jsxs(Panel, { className: cc(['react-flow__controls', className]), position: position, style: style, \"data-testid\": \"rf__controls\", children: [showZoom && (jsxs(Fragment, { children: [jsx(ControlButton, { onClick: onZoomInHandler, className: \"react-flow__controls-zoomin\", title: \"zoom in\", \"aria-label\": \"zoom in\", disabled: maxZoomReached, children: jsx(PlusIcon, {}) }), jsx(ControlButton, { onClick: onZoomOutHandler, className: \"react-flow__controls-zoomout\", title: \"zoom out\", \"aria-label\": \"zoom out\", disabled: minZoomReached, children: jsx(MinusIcon, {}) })] })), showFitView && (jsx(ControlButton, { className: \"react-flow__controls-fitview\", onClick: onFitViewHandler, title: \"fit view\", \"aria-label\": \"fit view\", children: jsx(FitViewIcon, {}) })), showInteractive && (jsx(ControlButton, { className: \"react-flow__controls-interactive\", onClick: onToggleInteractivity, title: \"toggle interactivity\", \"aria-label\": \"toggle interactivity\", children: isInteractive ? jsx(UnlockIcon, {}) : jsx(LockIcon, {}) })), children] }));\n};\nControls.displayName = 'Controls';\nvar Controls$1 = memo(Controls);\n\nexport { ControlButton, Controls$1 as Controls };\n","import { jsx, jsxs } from 'react/jsx-runtime';\nimport { memo, useRef } from 'react';\nimport cc from 'classcat';\nimport { useStore } from '@reactflow/core';\nimport { shallow } from 'zustand/shallow';\n\nvar BackgroundVariant;\n(function (BackgroundVariant) {\n    BackgroundVariant[\"Lines\"] = \"lines\";\n    BackgroundVariant[\"Dots\"] = \"dots\";\n    BackgroundVariant[\"Cross\"] = \"cross\";\n})(BackgroundVariant || (BackgroundVariant = {}));\n\nfunction LinePattern({ color, dimensions, lineWidth, }) {\n    return (jsx(\"path\", { stroke: color, strokeWidth: lineWidth, d: `M${dimensions[0] / 2} 0 V${dimensions[1]} M0 ${dimensions[1] / 2} H${dimensions[0]}` }));\n}\nfunction DotPattern({ color, radius }) {\n    return jsx(\"circle\", { cx: radius, cy: radius, r: radius, fill: color });\n}\n\nconst defaultColor = {\n    [BackgroundVariant.Dots]: '#91919a',\n    [BackgroundVariant.Lines]: '#eee',\n    [BackgroundVariant.Cross]: '#e2e2e2',\n};\nconst defaultSize = {\n    [BackgroundVariant.Dots]: 1,\n    [BackgroundVariant.Lines]: 1,\n    [BackgroundVariant.Cross]: 6,\n};\nconst selector = (s) => ({ transform: s.transform, patternId: `pattern-${s.rfId}` });\nfunction Background({ id, variant = BackgroundVariant.Dots, \n// only used for dots and cross\ngap = 20, \n// only used for lines and cross\nsize, lineWidth = 1, offset = 2, color, style, className, }) {\n    const ref = useRef(null);\n    const { transform, patternId } = useStore(selector, shallow);\n    const patternColor = color || defaultColor[variant];\n    const patternSize = size || defaultSize[variant];\n    const isDots = variant === BackgroundVariant.Dots;\n    const isCross = variant === BackgroundVariant.Cross;\n    const gapXY = Array.isArray(gap) ? gap : [gap, gap];\n    const scaledGap = [gapXY[0] * transform[2] || 1, gapXY[1] * transform[2] || 1];\n    const scaledSize = patternSize * transform[2];\n    const patternDimensions = isCross ? [scaledSize, scaledSize] : scaledGap;\n    const patternOffset = isDots\n        ? [scaledSize / offset, scaledSize / offset]\n        : [patternDimensions[0] / offset, patternDimensions[1] / offset];\n    return (jsxs(\"svg\", { className: cc(['react-flow__background', className]), style: {\n            ...style,\n            position: 'absolute',\n            width: '100%',\n            height: '100%',\n            top: 0,\n            left: 0,\n        }, ref: ref, \"data-testid\": \"rf__background\", children: [jsx(\"pattern\", { id: patternId + id, x: transform[0] % scaledGap[0], y: transform[1] % scaledGap[1], width: scaledGap[0], height: scaledGap[1], patternUnits: \"userSpaceOnUse\", patternTransform: `translate(-${patternOffset[0]},-${patternOffset[1]})`, children: isDots ? (jsx(DotPattern, { color: patternColor, radius: scaledSize / offset })) : (jsx(LinePattern, { dimensions: patternDimensions, color: patternColor, lineWidth: lineWidth })) }), jsx(\"rect\", { x: \"0\", y: \"0\", width: \"100%\", height: \"100%\", fill: `url(#${patternId + id})` })] }));\n}\nBackground.displayName = 'Background';\nvar Background$1 = memo(Background);\n\nexport { Background$1 as Background, BackgroundVariant };\n","import clsx from 'clsx';\nimport React from 'react';\nimport { getBezierPath } from 'reactflow';\n\nexport const CustomEdge: React.FC<any> = (props) => {\n  const { sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition, style = {}, markerEnd } = props;\n\n  const [edgePath] = getBezierPath({\n    sourceX,\n    sourceY,\n    sourcePosition,\n    targetX,\n    targetY,\n    targetPosition,\n  });\n\n  return (\n    <>\n      <path\n        style={style}\n        className={clsx(['react-flow__edge-path-selector'])}\n        d={edgePath}\n        markerEnd={markerEnd}\n        fillRule='evenodd'\n      />\n      <path\n        style={style}\n        className={clsx(['react-flow__edge-path'])}\n        d={edgePath}\n        markerEnd={markerEnd}\n        fillRule='evenodd'\n      />\n    </>\n  );\n};\n\nexport const edgeFunction = (outer: any) => (props: any) => <CustomEdge {...props} {...outer} />;\n","import type { Edge, Node } from 'reactflow';\n\nimport type { DecisionEdge, DecisionNode } from './context/dg-store.context';\n\nexport const mapToDecisionNode = (node: Node): DecisionNode => {\n  return {\n    id: node.id,\n    type: node.type,\n    position: node.position,\n    name: node?.data?.name,\n    description: node?.data?.description,\n    content: node?.data?.content,\n  };\n};\nexport const mapToDecisionNodes = (nodes: Node[]): DecisionNode[] => {\n  return nodes.map(mapToDecisionNode);\n};\n\nexport const mapToDecisionEdges = (edges: Edge[]): DecisionEdge[] => {\n  return edges.map((edge) => {\n    return {\n      id: edge?.id,\n      sourceId: edge?.source,\n      type: edge?.type,\n      targetId: edge?.target,\n      name: edge?.label as string,\n    };\n  });\n};\n\nexport const mapToGraphNode = (node: DecisionNode): Node => {\n  return {\n    id: node.id,\n    type: node.type,\n    position: node.position,\n    data: {\n      name: node.name,\n      description: node.description,\n      content: node?.content,\n    },\n  };\n};\nexport const mapToGraphNodes = (nodes: DecisionNode[]): Node[] => {\n  return nodes.map(mapToGraphNode);\n};\n\nexport const mapToGraphEdges = (edges: DecisionEdge[]): Edge[] => {\n  return edges\n    .filter((edge) => edge.sourceId && edge.targetId)\n    .map((edge) => {\n      return {\n        id: edge.id,\n        source: edge.sourceId,\n        type: edge?.type || 'edge',\n        target: edge.targetId,\n        label: edge.name,\n      };\n    });\n};\n","export const isTrue = (str: string | boolean | number | undefined) => {\n  if (typeof str === 'string') return ((str as string) || '').toLowerCase() === 'true';\n  else if (typeof str === 'boolean') return str === true;\n  else if (typeof str === 'number') return str === 1;\n  return false;\n};\n\nexport const chunk = <T = unknown>(arr: T[], size: number): T[][] =>\n  Array.from({ length: Math.ceil(arr.length / size) }, (v, i) => arr.slice(i * size, i * size + size));\n\nconst unsecuredCopyToClipboard = (text: string) => {\n  const textArea = document.createElement('textarea');\n  textArea.value = text;\n  document.body.appendChild(textArea);\n  textArea.focus();\n  textArea.select();\n  try {\n    document.execCommand('copy');\n  } catch (err) {\n    console.error('Unable to copy to clipboard', err);\n  }\n  document.body.removeChild(textArea);\n};\n\nexport const copyToClipboard = async (content: string) => {\n  if (window.isSecureContext && navigator.clipboard) {\n    await navigator.clipboard.writeText(content);\n  } else {\n    unsecuredCopyToClipboard(content);\n  }\n};\n\nexport const pasteFromClipboard = async (): Promise<string> => {\n  try {\n    return navigator.clipboard.readText();\n  } catch (e) {\n    return '';\n  }\n};\n","import { message } from 'antd';\nimport { useCallback } from 'react';\nimport type { Edge, Node, ReactFlowInstance, XYPosition } from 'reactflow';\nimport { v4 } from 'uuid';\n\nimport { copyToClipboard, pasteFromClipboard } from '../../../helpers/utility';\n\ntype ClipboardNode = Pick<Node, 'id' | 'type' | 'position' | 'width' | 'height' | 'data'>;\n\ntype ClipboardEdge = Pick<Edge, 'source' | 'target' | 'type'>;\n\ntype ClipboardData = {\n  nodes: ClipboardNode[];\n  edges: ClipboardEdge[];\n};\n\nconst isClipboardData = (data: any): data is ClipboardData => {\n  if (typeof data !== 'object') return false;\n  return Array.isArray(data?.nodes);\n};\n\nexport const useGraphClipboard = (reactFlow?: ReactFlowInstance, wrapper?: HTMLDivElement) => {\n  const copyNodes = useCallback(\n    async (nodes: Node[]) => {\n      try {\n        if (!reactFlow) return;\n\n        const copyNodes = nodes.map<ClipboardNode>((n) => ({\n          id: n.id,\n          type: n.type,\n          data: n.data,\n          position: n.position,\n          width: n.width,\n          height: n.height,\n        }));\n\n        const copyNodeIds = copyNodes.map((n) => n.id);\n        const copyEdges: ClipboardEdge[] = [];\n\n        if (copyNodes.length > 0) {\n          const edges = reactFlow.getEdges();\n          edges.forEach((edge) => {\n            if (copyNodeIds.includes(edge.source) && copyNodeIds.includes(edge.target)) {\n              copyEdges.push({\n                type: edge.type,\n                source: edge.source,\n                target: edge.target,\n              });\n            }\n          });\n        }\n\n        const clipboardData: ClipboardData = {\n          nodes: copyNodes,\n          edges: copyEdges,\n        };\n\n        await copyToClipboard(JSON.stringify(clipboardData));\n      } catch (e) {\n        message.error(e.message);\n      }\n    },\n    [reactFlow],\n  );\n\n  const pasteNodes = useCallback(async () => {\n    if (!reactFlow) return;\n\n    const clipboardText = await pasteFromClipboard();\n    if (!clipboardText) return;\n    const clipboardData = JSON.parse(clipboardText);\n\n    if (!isClipboardData(clipboardData)) {\n      throw new Error('invalid clipboard');\n    }\n\n    if (!Array.isArray(clipboardData?.nodes)) throw new Error('invalid clipboard');\n    const nodeIds: Record<string, string> = clipboardData.nodes.reduce(\n      (acc, curr) => ({\n        ...acc,\n        [curr.id]: v4(),\n      }),\n      {},\n    );\n\n    const copyNodeIds = Object.keys(nodeIds);\n    const anchor = reactFlow.getNodes().find((n) => copyNodeIds.includes(n.id));\n    const copyAnchor = clipboardData.nodes.find((n) => n.id === anchor?.id);\n    const gravityCenter = {\n      x: clipboardData.nodes.reduce((acc, n) => acc + n.position.x, 0) / clipboardData.nodes.length,\n      y: clipboardData.nodes.reduce((acc, n) => acc + n.position.y, 0) / clipboardData.nodes.length,\n    } as XYPosition;\n\n    const nodes = clipboardData.nodes.map((n: ClipboardNode) => {\n      const position: XYPosition = {\n        x: n.position.x,\n        y: n.position.y,\n      };\n\n      if (anchor && copyAnchor) {\n        const isAnchor = n.id === anchor.id;\n\n        if (isAnchor) {\n          position.x = anchor.position.x;\n          position.y = anchor.position.y - 20;\n        } else {\n          position.x = anchor.position.x - copyAnchor.position.x + n.position.x;\n          position.y = anchor.position.y - copyAnchor.position.y + n.position.y - 20;\n        }\n      } else if (wrapper) {\n        const rect = wrapper.getBoundingClientRect();\n        const rectCenter = {\n          x: rect.width / 2,\n          y: rect.height / 2,\n        };\n\n        const projection = reactFlow.project(rectCenter);\n\n        position.x = n.position.x + projection.x - gravityCenter.x - (n.width || 0) / 2;\n        position.y = n.position.y + projection.y - gravityCenter.y - (n.height || 0) / 2;\n      }\n\n      return {\n        ...n,\n        position,\n        id: nodeIds[n.id],\n      };\n    });\n\n    const edges = clipboardData.edges.map((e) => ({\n      id: v4(),\n      type: e.type,\n      source: nodeIds[e.source],\n      target: nodeIds[e.target],\n    }));\n\n    reactFlow.addNodes(nodes);\n    reactFlow.addEdges(edges);\n\n    if (anchor) {\n      try {\n        await copyToClipboard(JSON.stringify({ nodes, edges }));\n      } catch (e) {\n        //\n      }\n    }\n  }, [reactFlow]);\n\n  const register = useCallback(\n    (selected?: Node[]) => {\n      if (!selected) return;\n      const listener = async (e: KeyboardEvent) => {\n        if (e.code === 'KeyC' && (e.ctrlKey || e.metaKey) && selected.length > 0) {\n          await copyNodes(selected);\n          message.success('Copied to clipboard!');\n        } else if (e.code === 'KeyV' && (e.ctrlKey || e.metaKey)) {\n          try {\n            await pasteNodes();\n            message.success('Pasted from clipboard!');\n          } catch (e) {\n            message.error('Invalid clipboard data.');\n          }\n        }\n      };\n\n      window.addEventListener('keydown', listener);\n\n      return () => window.removeEventListener('keydown', listener);\n    },\n    [copyNodes, pasteNodes],\n  );\n\n  return {\n    copyNodes,\n    pasteNodes,\n    register,\n  };\n};\n","import { Button, Typography } from 'antd';\nimport clsx from 'clsx';\nimport equal from 'fast-deep-equal/es6/react';\nimport React, { useCallback } from 'react';\nimport type { XYPosition } from 'reactflow';\n\nimport type { CustomNodeType } from '../context/dg-store.context';\nimport { useDecisionGraphStore } from '../context/dg-store.context';\n\nexport type GraphComponentsProps = {\n  inputDisabled?: boolean;\n  outputDisabled?: boolean;\n  onPaste?: () => void;\n  components?: React.ReactNode[];\n};\n\nexport const GraphComponents: React.FC<GraphComponentsProps> = ({ inputDisabled, outputDisabled, onPaste }) => {\n  const customComponents: CustomNodeType[] = useDecisionGraphStore((store) => store.components || [], equal);\n\n  const onDragStart = useCallback((event: React.DragEvent, nodeType: string) => {\n    const target = event.target as HTMLDivElement;\n    if (!target) {\n      return;\n    }\n\n    const { offsetX, offsetY } = event.nativeEvent;\n    const { height, width } = target.getBoundingClientRect();\n\n    const positionData: XYPosition = {\n      x: offsetX / width,\n      y: offsetY / height,\n    };\n\n    event.dataTransfer.effectAllowed = 'move';\n    event.dataTransfer.setData('application/reactflow', nodeType);\n    event.dataTransfer.setData('relativePosition', JSON.stringify(positionData));\n  }, []);\n\n  return (\n    <div className={'wrapper'}>\n      <Typography.Text style={{ marginBottom: '1rem' }}>Drag and Drop components</Typography.Text>\n      <div className={'list'}>\n        <div\n          className={clsx(['component', inputDisabled && 'disabled'])}\n          onDragStart={(event) => onDragStart(event, 'inputNode')}\n          draggable={!inputDisabled}\n        >\n          <Typography.Text strong type={inputDisabled ? 'secondary' : undefined}>\n            Input\n          </Typography.Text>\n        </div>\n        <div\n          className={clsx(['component', outputDisabled && 'disabled'])}\n          onDragStart={(event) => onDragStart(event, 'outputNode')}\n          draggable={!outputDisabled}\n        >\n          <Typography.Text strong type={outputDisabled ? 'secondary' : undefined}>\n            Output\n          </Typography.Text>\n        </div>\n        <div className={clsx(['component'])} onDragStart={(event) => onDragStart(event, 'decisionTableNode')} draggable>\n          <Typography.Text strong>Decision Table</Typography.Text>\n        </div>\n        <div className={clsx(['component'])} onDragStart={(event) => onDragStart(event, 'functionNode')} draggable>\n          <Typography.Text strong>Function</Typography.Text>\n        </div>\n        <div className={clsx(['component'])} onDragStart={(event) => onDragStart(event, 'expressionNode')} draggable>\n          <Typography.Text strong>Expression</Typography.Text>\n        </div>\n        {customComponents.map((component) => (\n          <div\n            key={component.type}\n            className={clsx(['component'])}\n            onDragStart={(event) => onDragStart(event, component.type)}\n            draggable\n          >\n            <Typography.Text strong>{component.name}</Typography.Text>\n          </div>\n        ))}\n      </div>\n      <Button onClick={onPaste} type='default' style={{ marginTop: 'auto' }}>\n        Paste from clipboard\n      </Button>\n    </div>\n  );\n};\n","import { CloseOutlined } from '@ant-design/icons';\nimport { Button, Typography } from 'antd';\nimport type { FC } from 'react';\nimport React from 'react';\nimport type { Edge, Node } from 'reactflow';\n\nimport { Stack } from '../../stack';\n\nexport type MultiNodeFormProps = {\n  nodes: Node[];\n  edges: Edge[];\n  onCopy?: (node: Node[]) => void;\n  removeNodes?: (nodes: Node[]) => void;\n  removeEdges?: (edges: Edge[]) => void;\n  onClose?: () => void;\n};\n\nexport const MultiNodeForm: FC<MultiNodeFormProps> = ({ nodes, edges, removeEdges, removeNodes, onClose, onCopy }) => {\n  return (\n    <div className={'node-form'}>\n      <Button className={'button'} type='text' onClick={onClose} icon={<CloseOutlined />} />\n      {nodes?.length > 0 && (\n        <>\n          <Typography.Text style={{ display: 'block' }}>Nodes selected:</Typography.Text>\n          <ul style={{ padding: '0 1rem 0' }}>\n            {nodes.map((n) => (\n              <li key={n.id}>\n                <Typography.Text strong>{n.data.name}</Typography.Text>\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n      {edges?.length > 0 && (\n        <>\n          <Typography.Text style={{ display: 'block', margin: '0.5rem 0 0' }}>Edges selected:</Typography.Text>\n          <ul style={{ padding: '0 1rem 0' }}>\n            {edges.map((n) => (\n              <li key={n.id}>\n                <Typography.Text strong>{n.id}</Typography.Text>\n              </li>\n            ))}\n          </ul>\n        </>\n      )}\n      <Stack gap={8} horizontal>\n        {edges?.length === 0 && <Button onClick={() => onCopy?.(nodes)}>Copy</Button>}\n        <Button\n          danger\n          onClick={() => {\n            edges?.length > 0 && removeEdges?.(edges);\n            nodes?.length > 0 && removeNodes?.(nodes);\n          }}\n        >\n          Remove\n        </Button>\n      </Stack>\n    </div>\n  );\n};\n","import { CloseOutlined } from '@ant-design/icons';\nimport { Button, Form, Input, Space, Typography } from 'antd';\nimport equal from 'fast-deep-equal/es6/react';\nimport { produce } from 'immer';\nimport type { FC } from 'react';\nimport React, { useEffect, useMemo } from 'react';\nimport type { Node } from 'reactflow';\n\nimport { Stack } from '../../stack';\nimport type { CustomNodeType } from '../context/dg-store.context';\nimport { useDecisionGraphStore } from '../context/dg-store.context';\n\nexport type NodeFormProps<T = any> = {\n  node: Node;\n  onCopy?: (node: Node) => void;\n  onChange?: (data: T) => void;\n  onClose?: () => void;\n  removeNode?: (node: Node) => void;\n};\n\nexport const NodeForm: FC<NodeFormProps> = ({ node, onChange, removeNode, onClose, onCopy }) => {\n  const [form] = Form.useForm();\n\n  useEffect(() => {\n    form.setFieldsValue({\n      name: node?.data?.name,\n      description: node?.data?.description,\n      content: node?.data?.content,\n    });\n  }, [node?.id]);\n\n  useEffect(() => {\n    form.setFieldsValue({\n      name: node?.data?.name,\n      description: node?.data?.description,\n      content: node?.data?.content,\n    });\n  }, [node?.data]);\n\n  const customComponents: CustomNodeType[] = useDecisionGraphStore((store) => store.components || [], equal);\n\n  const component = useMemo(() => {\n    return customComponents.find((component) => component.type === node.type);\n  }, [customComponents, node?.type]);\n\n  const nodeType = useMemo(() => {\n    switch (node.type) {\n      case 'inputNode':\n        return 'Input';\n      case 'outputNode':\n        return 'Output';\n      case 'decisionTableNode':\n        return 'Decision Table';\n      case 'decisionNode':\n        return 'Decision';\n      case 'functionNode':\n        return 'Function';\n      case 'expressionNode':\n        return 'Expression';\n    }\n\n    return 'Unknown';\n  }, [node?.type]);\n\n  const handleChangeContent = (content: any) => {\n    onChange?.(\n      produce(node, (draft) => {\n        draft.data.content = content;\n      }),\n    );\n  };\n\n  return (\n    <div className={'node-form'}>\n      <Form\n        form={form}\n        layout={'vertical'}\n        className={'form'}\n        initialValues={{\n          name: node?.data?.name,\n          description: node?.data?.description,\n          content: node?.data?.content,\n        }}\n        onValuesChange={(_, data) => {\n          onChange?.({\n            id: node?.id,\n            data,\n          });\n        }}\n      >\n        <Button className={'button'} type='text' onClick={onClose} icon={<CloseOutlined />} />\n        <Form.Item noStyle>\n          <Space direction={'vertical'}>\n            <Typography.Text>Type</Typography.Text>\n            <Typography.Text strong>{component?.type || nodeType}</Typography.Text>\n          </Space>\n        </Form.Item>\n        {node?.type !== 'inputNode' && node?.type !== 'outputNode' && (\n          <>\n            <Form.Item name={['name']} label={'Name'}>\n              <Input placeholder={'Name'} />\n            </Form.Item>\n            <Form.Item name={['description']} label={'Description'}>\n              <Input.TextArea placeholder={'Description'} rows={3} style={{ resize: 'none' }} />\n            </Form.Item>\n          </>\n        )}\n        {component &&\n          component?.renderForm &&\n          component?.renderForm?.({\n            value: node?.data?.content,\n            onChange: handleChangeContent,\n          })}\n        <Form.Item>\n          <Stack gap={8} horizontal>\n            <Button onClick={() => onCopy?.(node)}>Copy</Button>\n            <Button danger onClick={() => removeNode?.(node)}>\n              Remove\n            </Button>\n          </Stack>\n        </Form.Item>\n      </Form>\n    </div>\n  );\n};\n","import {\n  ApartmentOutlined,\n  ArrowRightOutlined,\n  CodeOutlined,\n  FunctionOutlined,\n  TableOutlined,\n} from '@ant-design/icons';\nimport { Space, Typography } from 'antd';\nimport clsx from 'clsx';\nimport equal from 'fast-deep-equal/es6/react';\nimport type { FC } from 'react';\nimport React, { useMemo, useRef } from 'react';\nimport type { NodeProps } from 'reactflow';\nimport { Handle, Position } from 'reactflow';\n\nimport type { CustomNodeType } from '../context/dg-store.context';\nimport { useDecisionGraphStore } from '../context/dg-store.context';\nimport { mapToDecisionNode } from '../dg-util';\n\nconst useNodeError = (id: string, simulate: any) => {\n  if (simulate?.error?.data?.nodeId === id) {\n    return simulate?.error?.data;\n  }\n\n  return null;\n};\n\nexport const GraphNode: FC<NodeProps> = (props) => {\n  const { id, data, isConnectable, type } = props;\n  const doubleClickTimer = useRef<number>();\n\n  const { openTab, simulate, customComponents } = useDecisionGraphStore(\n    ({ simulate, openTab, components }) => ({\n      openTab,\n      simulate,\n      customComponents: components ?? [],\n    }),\n    equal,\n  );\n\n  const component = useMemo(() => {\n    return customComponents.find((component) => component.type === type);\n  }, [customComponents, type]);\n\n  const trace = useMemo(() => {\n    return simulate?.result?.trace?.[id];\n  }, [simulate]);\n\n  const error = useNodeError(id, simulate);\n\n  const innerOpen = () => {\n    if (component) {\n      component?.onOpen?.(mapToDecisionNode(props as any));\n    } else {\n      openTab?.(id);\n    }\n  };\n\n  return (\n    <div\n      className={clsx([\n        'node',\n        trace && 'simulated',\n        error && 'error',\n        type === 'outputNode' && 'output',\n        type === 'inputNode' && 'input',\n      ])}\n      onClick={() => {\n        if (doubleClickTimer.current && performance.now() - doubleClickTimer.current < 250) {\n          if (type !== 'inputNode' && type !== 'outputNode') {\n            innerOpen();\n          }\n        }\n\n        doubleClickTimer.current = performance.now();\n      }}\n    >\n      {trace &&\n        (type === 'decisionNode' ||\n          type === 'expressionNode' ||\n          type === 'decisionTableNode' ||\n          type === 'functionNode') && (\n          <div className={'performance'}>\n            <Typography.Text\n              style={{\n                fontSize: 10,\n              }}\n            >\n              {trace?.performance || null}\n            </Typography.Text>\n          </div>\n        )}\n      {(type === 'decisionTableNode' ||\n        type === 'decisionNode' ||\n        type === 'functionNode' ||\n        type === 'expressionNode' ||\n        type === 'outputNode') && <Handle type='target' position={Position.Left} isConnectable={isConnectable} />}\n      <Space direction={'vertical'} size={0} className={'full-width'} style={{ textAlign: 'center' }}>\n        <div className={'text-ellipsis'}>\n          <Typography.Text strong>{data?.name}</Typography.Text>\n        </div>\n        <div className={'text-ellipsis'}>\n          <Typography.Text\n            style={{\n              fontSize: 12,\n            }}\n          >\n            {type === 'decisionTableNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <TableOutlined />\n                <span>Decision Table</span>\n              </Space>\n            )}\n            {type === 'functionNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <FunctionOutlined />\n                <span>Function</span>\n              </Space>\n            )}\n            {type === 'expressionNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <CodeOutlined />\n                <span>Expression</span>\n              </Space>\n            )}\n            {type === 'inputNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <ArrowRightOutlined />\n                <span>Input</span>\n              </Space>\n            )}\n            {type === 'outputNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <ArrowRightOutlined />\n                <span>Output</span>\n              </Space>\n            )}\n            {component && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                {component?.renderIcon?.()}\n                <span>{component.name}</span>\n              </Space>\n            )}\n          </Typography.Text>\n        </div>\n        {component && component?.onOpen && (\n          <Typography.Link\n            onClick={() => {\n              innerOpen();\n            }}\n          >\n            Open\n          </Typography.Link>\n        )}\n        {!component && type !== 'inputNode' && type !== 'outputNode' && (\n          <Typography.Link\n            onClick={() => {\n              innerOpen();\n            }}\n          >\n            Open\n          </Typography.Link>\n        )}\n      </Space>\n      {(type === 'decisionTableNode' ||\n        type === 'decisionNode' ||\n        type === 'functionNode' ||\n        type === 'expressionNode' ||\n        type === 'inputNode') && <Handle type='source' position={Position.Right} isConnectable={isConnectable} />}\n    </div>\n  );\n};\n\nexport const GraphNodeEdit: FC<NodeProps> = (props) => {\n  const { data, isConnectable, type, selected } = props;\n\n  const customComponents: CustomNodeType[] = useDecisionGraphStore((store) => store.components || [], equal);\n\n  const component = useMemo(() => {\n    return customComponents.find((component) => component.type === type);\n  }, [customComponents, type]);\n\n  return (\n    <div\n      className={clsx([\n        'node',\n        selected && 'selected',\n        type === 'outputNode' && 'output',\n        type === 'inputNode' && 'input',\n      ])}\n    >\n      {(type === 'decisionTableNode' ||\n        type === 'decisionNode' ||\n        type === 'functionNode' ||\n        type === 'expressionNode' ||\n        type === 'outputNode' ||\n        component) && <Handle type='target' position={Position.Left} isConnectable={isConnectable} />}\n      <Space\n        direction={'vertical'}\n        size={0}\n        className={'full-width'}\n        style={{\n          textAlign: 'center',\n        }}\n      >\n        <div className={'text-ellipsis'}>\n          <Typography.Text strong>{data?.name}</Typography.Text>\n        </div>\n        <div className={'text-ellipsis'}>\n          <Typography.Text\n            style={{\n              fontSize: 12,\n            }}\n          >\n            {type === 'decisionTableNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <TableOutlined />\n                <span>Decision Table</span>\n                {data?.hitPolicy === 'COLLECT' && <span>(c)</span>}\n              </Space>\n            )}\n            {type === 'functionNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <FunctionOutlined />\n                <span>Function</span>\n              </Space>\n            )}\n            {type === 'expressionNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <CodeOutlined />\n                <span>Expression</span>\n              </Space>\n            )}\n            {type === 'inputNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <ArrowRightOutlined />\n                <span>Input</span>\n              </Space>\n            )}\n            {type === 'outputNode' && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <ArrowRightOutlined />\n                <span>Output</span>\n              </Space>\n            )}\n            {component && (\n              <Space size={4} style={{ maxWidth: '100%' }}>\n                <ApartmentOutlined />\n                <span>{component?.name}</span>\n              </Space>\n            )}\n          </Typography.Text>\n        </div>\n      </Space>\n      {(type === 'decisionTableNode' ||\n        type === 'decisionNode' ||\n        type === 'functionNode' ||\n        type === 'expressionNode' ||\n        type === 'inputNode' ||\n        component) && <Handle type='source' position={Position.Right} isConnectable={isConnectable} />}\n    </div>\n  );\n};\n","import { CheckOutlined, CloseOutlined, ExportOutlined, ImportOutlined, NodeIndexOutlined } from '@ant-design/icons';\nimport { Button, Tooltip, message } from 'antd';\nimport clsx from 'clsx';\nimport equal from 'fast-deep-equal/es6/react';\nimport { DirectedGraph } from 'graphology';\nimport { hasCycle } from 'graphology-dag';\nimport React, { forwardRef, useEffect, useImperativeHandle, useMemo, useRef, useState } from 'react';\nimport type { Edge, Node, ProOptions, ReactFlowInstance, XYPosition } from 'reactflow';\nimport ReactFlow, { Background, Controls, addEdge, useEdgesState, useNodesState } from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { v4 } from 'uuid';\n\nimport { defaultFunctionValue } from '../../function/helpers/libs';\nimport type { DecisionEdge, DecisionGraphType, DecisionNode } from '../context/dg-store.context';\nimport { useDecisionGraphStore } from '../context/dg-store.context';\nimport { edgeFunction } from '../custom-edge';\nimport { mapToDecisionEdges, mapToDecisionNodes, mapToGraphEdges, mapToGraphNode, mapToGraphNodes } from '../dg-util';\nimport '../dg.scss';\nimport { useGraphClipboard } from '../hooks/use-graph-clipboard';\nimport { GraphComponents } from './graph-components';\nimport { MultiNodeForm } from './multi-node-form';\nimport { NodeForm } from './node-form';\nimport { GraphNode, GraphNodeEdit } from './nodes';\n\nexport const DecisionContentType = 'application/vnd.gorules.decision';\n\nexport type GraphProps = {\n  className?: string;\n  hideExportImport?: boolean;\n  onDisableTabs?: (val: boolean) => void;\n  reactFlowProOptions?: ProOptions;\n};\n\nexport type GraphRef = {\n  openEdit?: () => void;\n  closeEdit?: () => void;\n  confirmEdit?: () => void;\n  openNode?: (id: string) => void;\n  addNode?: (node: DecisionNode) => void;\n  setDecisionGraph?: (decisionGraph: DecisionGraphType) => void;\n};\n\nexport const Graph = forwardRef<GraphRef, GraphProps>(\n  ({ reactFlowProOptions, className, onDisableTabs, hideExportImport }, ref) => {\n    const reactFlowWrapper = useRef<any>(null);\n    const [reactFlowInstance, setReactFlowInstance] = useState<ReactFlowInstance>();\n\n    const fileInput = useRef<HTMLInputElement>(null);\n    const [editGraph, setEditGraph] = useState(false);\n\n    const [editNodes, setEditNodes, onEditNodesChange] = useNodesState([]);\n    const [editEdges, setEditEdges, onEditEdgesChange] = useEdgesState([]);\n\n    const inputNodes = editNodes?.filter?.((node) => node.type === 'inputNode');\n    const outputNodes = editNodes?.filter?.((node) => node.type === 'outputNode');\n\n    const selected = editNodes?.filter?.((node) => node?.selected);\n    const selectedEdges = editEdges?.filter?.((edge) => edge?.selected);\n\n    const { nodes, edges, setDecisionGraph, disabled, closeTab, openTab, onAddNode, onEditGraph, onChange } =\n      useDecisionGraphStore(\n        ({ decisionGraph, setDecisionGraph, disabled, closeTab, openTab, onChange, onAddNode, onEditGraph }) => ({\n          nodes: decisionGraph?.nodes ?? [],\n          edges: decisionGraph?.edges ?? [],\n          setDecisionGraph,\n          disabled,\n          closeTab,\n          openTab,\n          onChange,\n          onAddNode,\n          onEditGraph,\n        }),\n        equal,\n      );\n\n    const graphClipboard = useGraphClipboard(reactFlowInstance, reactFlowWrapper.current || undefined);\n\n    useEffect(() => {\n      onEditGraph?.(editGraph);\n      onDisableTabs?.(editGraph);\n    }, [editGraph]);\n\n    useEffect(() => {\n      return graphClipboard.register(editGraph ? selected : undefined);\n    }, [selected, graphClipboard.register, editGraph]);\n\n    const addNode = (type: string, position?: XYPosition) => {\n      if (!reactFlowWrapper.current || !reactFlowInstance) return;\n      if (!position) {\n        const rect = reactFlowWrapper?.current?.getBoundingClientRect() as DOMRect;\n        const rectCenter = {\n          x: rect.width / 2,\n          y: rect.height / 2,\n        };\n\n        position = reactFlowInstance?.project(rectCenter);\n      }\n\n      if (\n        type !== 'decisionTableNode' &&\n        type !== 'functionNode' &&\n        type !== 'expressionNode' &&\n        type !== 'inputNode' &&\n        type !== 'outputNode'\n      ) {\n        return onAddNode?.(type, position);\n      }\n\n      const count = (nodes || []).filter((node) => node?.type === type)?.length;\n\n      const data: any = {};\n      if (type === 'decisionTableNode') {\n        const inputField = {\n          id: v4(),\n          name: 'Input',\n          type: 'expression',\n        };\n        const outputField = {\n          field: 'output',\n          id: v4(),\n          name: 'Output',\n          type: 'expression',\n        };\n        data.content = {\n          hitPolicy: 'first',\n          inputs: [inputField],\n          outputs: [outputField],\n          rules: [],\n        };\n      } else if (type === 'functionNode') {\n        data.content = defaultFunctionValue;\n      } else if (type === 'inputNode') {\n        data.name = 'Request';\n      } else if (type === 'outputNode') {\n        data.name = 'Response';\n      } else if (type === 'expressionNode') {\n        data.content = {\n          expressions: [],\n        };\n      }\n\n      const newNode: Node = {\n        id: v4(),\n        type,\n        position,\n        data: {\n          name: `${type} ${count + 1}`,\n          ...data,\n        },\n      };\n\n      setEditNodes((nodes) => nodes.concat(newNode));\n    };\n\n    const updateNode = (node: Partial<Node>) => {\n      setEditNodes((nodes) => {\n        return (nodes || []).map((e) => {\n          if (e.id === node?.id) {\n            return {\n              ...(e || {}),\n              ...(node || {}),\n              type: e.type,\n              data: {\n                ...(e?.data || {}),\n                ...(node?.data || {}),\n              },\n            };\n          }\n          return e;\n        });\n      });\n    };\n\n    const onDrop = (event: React.DragEvent) => {\n      event.preventDefault();\n\n      if (!reactFlowWrapper.current || !reactFlowInstance) return;\n\n      const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n      const type = event.dataTransfer.getData('application/reactflow');\n      let elementPosition: XYPosition;\n\n      try {\n        elementPosition = JSON.parse(event.dataTransfer.getData('relativePosition'));\n      } catch (e) {\n        return;\n      }\n\n      const position = reactFlowInstance.project({\n        x: event.clientX - reactFlowBounds.left,\n        y: event.clientY - reactFlowBounds.top,\n      }) as XYPosition;\n\n      position.x -= Math.round((elementPosition.x * 180) / 10) * 10;\n      position.y -= Math.round((elementPosition.y * 80) / 10) * 10;\n\n      addNode(type, position);\n    };\n\n    const onDragOver = (event: any) => {\n      event.preventDefault();\n      event.dataTransfer.dropEffect = 'move';\n    };\n\n    const onConnect = (params: any) => {\n      setEditEdges((els: Edge[]) => {\n        return addEdge(\n          {\n            ...params,\n            type: 'edge',\n            id: v4(),\n          },\n          els,\n        );\n      });\n    };\n\n    const edgeTypes = useMemo(\n      () => ({\n        edge: edgeFunction({\n          nodes,\n        }),\n      }),\n      [],\n    );\n\n    const nodeTypes = useMemo(() => {\n      return {\n        decisionTableNode: GraphNode,\n        decisionNode: GraphNode,\n        functionNode: GraphNode,\n        expressionNode: GraphNode,\n        inputNode: GraphNode,\n        outputNode: GraphNode,\n      };\n    }, []);\n\n    const editNodeTypes = useMemo(() => {\n      return {\n        decisionTableNode: GraphNodeEdit,\n        decisionNode: GraphNodeEdit,\n        functionNode: GraphNodeEdit,\n        expressionNode: GraphNodeEdit,\n        inputNode: GraphNodeEdit,\n        outputNode: GraphNodeEdit,\n      };\n    }, []);\n\n    const confirmEdit = () => {\n      try {\n        const edges = mapToDecisionEdges(editEdges);\n        const nodes = mapToDecisionNodes(editNodes);\n\n        if (nodes.filter((node) => node?.type === 'inputNode')?.length > 1) {\n          message.error('Maximum 1 input');\n          return;\n        }\n        if (nodes.filter((node) => node?.type === 'outputNode')?.length > 1) {\n          message.error('Maximum 1 output');\n          return;\n        }\n\n        const graph = new DirectedGraph();\n        edges.forEach((edge) => {\n          graph.mergeEdge(edge.sourceId, edge.targetId);\n        });\n\n        if (hasCycle(graph)) {\n          throw new Error('Graph is cyclic');\n        }\n\n        setDecisionGraph({\n          nodes,\n          edges,\n        });\n        onChange?.({\n          nodes,\n          edges,\n        });\n        setEditGraph(false);\n      } catch (e: any) {\n        message.error(e?.message);\n      }\n    };\n\n    const handleUploadInput = async (event: any) => {\n      const fileList = event?.target?.files as FileList;\n      const reader = new FileReader();\n      reader.onload = function (e) {\n        try {\n          const parsed: any = JSON.parse(e?.target?.result as string);\n          if (parsed?.contentType !== DecisionContentType) throw new Error('Invalid content type');\n\n          const nodes: DecisionNode[] = Array.isArray(parsed?.nodes) ? parsed.nodes : [];\n          const nodeIds = nodes.map((node) => node.id);\n\n          const edges: DecisionEdge[] = (parsed.edges as DecisionEdge[]).filter(\n            (edge) => nodeIds.includes(edge?.targetId) && nodeIds.includes(edge?.sourceId),\n          );\n\n          setDecisionGraph({\n            edges,\n            nodes,\n          });\n          onChange?.({\n            edges,\n            nodes,\n          });\n        } catch (e: any) {\n          message.error(e.message);\n        }\n      };\n\n      reader.readAsText(Array.from(fileList)?.[0], 'UTF-8');\n    };\n\n    const downloadJDM = async (name: string) => {\n      try {\n        // create file in browser\n        const fileName = `${name.replaceAll('.json', '')}.json`;\n        const json = JSON.stringify(\n          {\n            contentType: DecisionContentType,\n            nodes,\n            edges,\n          },\n          null,\n          2,\n        );\n        const blob = new Blob([json], { type: 'application/json' });\n        const href = URL.createObjectURL(blob);\n\n        // create \"a\" HTLM element with href to file\n        const link = window.document.createElement('a');\n        link.href = href;\n        link.download = fileName;\n        window.document.body.appendChild(link);\n        link.click();\n\n        // clean up \"a\" element & remove ObjectURL\n        window.document.body.removeChild(link);\n        URL.revokeObjectURL(href);\n      } catch (e) {\n        message.error(e.message);\n      }\n    };\n\n    useImperativeHandle(ref, () => ({\n      openEdit: () => {\n        if (disabled) return;\n        setEditNodes(mapToGraphNodes(nodes));\n        setEditEdges(mapToGraphEdges(edges));\n        setEditGraph(true);\n      },\n      closeEdit: () => {\n        setEditGraph(false);\n      },\n      confirmEdit: () => {\n        confirmEdit();\n      },\n      addNode: (node: DecisionNode) => {\n        if (editGraph) {\n          setEditNodes((nodes) => nodes.concat(mapToGraphNode(node)));\n        }\n      },\n      openNode: (id: string) => {\n        if (!editGraph) {\n          openTab(id);\n        }\n      },\n      setDecisionGraph,\n    }));\n\n    return (\n      <div className={clsx(['tab-content', className])}>\n        <input\n          hidden\n          accept='application/json'\n          type='file'\n          ref={fileInput}\n          onChange={handleUploadInput}\n          onClick={(event) => {\n            (event.target as any).value = null;\n          }}\n        />\n        <div className={'grl-dg__command-bar'}>\n          {!editGraph && (\n            <>\n              <Tooltip title='Edit graph mode allows you to add, connect and move nodes.'>\n                <Button\n                  type='default'\n                  size={'small'}\n                  disabled={disabled}\n                  onClick={() => {\n                    setEditNodes(mapToGraphNodes(nodes));\n                    setEditEdges(mapToGraphEdges(edges));\n                    setEditGraph(true);\n                  }}\n                  icon={<NodeIndexOutlined />}\n                >\n                  Edit graph\n                </Button>\n              </Tooltip>\n              {!hideExportImport && (\n                <Button\n                  type='default'\n                  size={'small'}\n                  onClick={() => {\n                    downloadJDM('graph');\n                  }}\n                  icon={<ExportOutlined />}\n                >\n                  Export JSON\n                </Button>\n              )}\n              {!hideExportImport && (\n                <Button\n                  type='default'\n                  size={'small'}\n                  disabled={disabled}\n                  onClick={() => {\n                    fileInput?.current?.click?.();\n                  }}\n                  icon={<ImportOutlined />}\n                >\n                  Import JSON\n                </Button>\n              )}\n            </>\n          )}\n          {editGraph && (\n            <Button\n              type='default'\n              size={'small'}\n              onClick={() => {\n                confirmEdit();\n              }}\n              icon={<CheckOutlined />}\n            >\n              Apply changes\n            </Button>\n          )}\n          {editGraph && (\n            <Button\n              type='default'\n              color='secondary'\n              size={'small'}\n              onClick={() => {\n                setEditGraph(false);\n              }}\n              icon={<CloseOutlined />}\n            >\n              Revert\n            </Button>\n          )}\n        </div>\n        <div className={'content-wrapper'}>\n          <div className={clsx(['react-flow'])} ref={reactFlowWrapper}>\n            <ReactFlow\n              nodesConnectable={editGraph}\n              nodesDraggable={editGraph}\n              elevateEdgesOnSelect={editGraph}\n              elevateNodesOnSelect={editGraph}\n              zoomOnDoubleClick={false}\n              nodes={editGraph ? editNodes : mapToGraphNodes(nodes || [])}\n              edges={editGraph ? editEdges : mapToGraphEdges(edges || [])}\n              onInit={(instance) => setReactFlowInstance(instance)}\n              snapToGrid={true}\n              snapGrid={[10, 10]}\n              nodeTypes={editGraph ? editNodeTypes : nodeTypes}\n              edgeTypes={edgeTypes}\n              onDrop={(e) => (editGraph ? onDrop(e) : undefined)}\n              onDragOver={editGraph ? onDragOver : undefined}\n              onConnect={onConnect}\n              proOptions={reactFlowProOptions}\n              onNodesChange={(e) => {\n                editGraph && onEditNodesChange(e);\n              }}\n              onEdgesChange={(e) => {\n                editGraph && onEditEdgesChange(e);\n              }}\n              onNodesDelete={(e) => {\n                if (editGraph) {\n                  e.forEach((node) => {\n                    closeTab?.(node?.id);\n                  });\n                }\n              }}\n              onEdgesDelete={() => {\n                //\n              }}\n              onEdgeClick={() => {\n                //\n              }}\n            >\n              <Controls showInteractive={false} />\n              <Background color='var(--grl-color-border)' gap={20} />\n            </ReactFlow>\n          </div>\n          {editGraph && (\n            <div className={'grl-dg__aside'}>\n              {!selected?.length && !selectedEdges?.length && (\n                <GraphComponents\n                  inputDisabled={inputNodes.length > 0}\n                  outputDisabled={outputNodes.length > 0}\n                  onPaste={async () => {\n                    if (editGraph) {\n                      try {\n                        await graphClipboard.pasteNodes();\n                      } catch (e) {\n                        message.error(e?.message);\n                      }\n                    }\n                  }}\n                />\n              )}\n              {selected?.length === 1 && selectedEdges?.length === 0 && (\n                <NodeForm\n                  node={selected?.[0]}\n                  onChange={updateNode}\n                  onClose={() => {\n                    setEditNodes((nodes) => nodes.map((i) => ({ ...i, selected: false })));\n                  }}\n                  onCopy={async () => {\n                    await graphClipboard.copyNodes(selected);\n                    message.success('Copied to clipboard!');\n                  }}\n                  removeNode={(node) => {\n                    setEditEdges((edges) =>\n                      edges.filter((edge) => edge?.target !== node?.id && edge?.source !== node?.id),\n                    );\n                    setEditNodes((nodes) => nodes.filter((n) => n?.id !== node?.id));\n                  }}\n                />\n              )}\n              {(selected?.length > 1 || selectedEdges?.length > 0) && (\n                <MultiNodeForm\n                  edges={selectedEdges}\n                  nodes={selected}\n                  onCopy={async (nodes) => {\n                    await graphClipboard.copyNodes(nodes);\n                    message.success('Copied to clipboard!');\n                  }}\n                  removeNodes={(nodes) => {\n                    const nodeIds = nodes.map((i) => i.id);\n                    setEditEdges((edges) =>\n                      edges.filter((edge) => !nodeIds.includes(edge?.target) && !nodeIds.includes(edge?.source)),\n                    );\n                    setEditNodes((nodes) => nodes.filter((n) => !nodeIds.includes(n?.id)));\n                  }}\n                  removeEdges={(edges) => {\n                    const edgeIds = edges.map((i) => i.id);\n                    setEditEdges((edges) => edges.filter((edge) => !edgeIds.includes(edge?.id)));\n                  }}\n                  onClose={() => {\n                    setEditNodes((nodes) => nodes.map((i) => ({ ...i, selected: false })));\n                    setEditEdges((edges) => edges.map((i) => ({ ...i, selected: false })));\n                  }}\n                />\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  },\n);\n","import type { TabsProps } from 'antd';\nimport { Tabs } from 'antd';\nimport equal from 'fast-deep-equal/es6/react';\nimport React, { useEffect } from 'react';\n\nimport { useDecisionGraphStore } from '../context/dg-store.context';\n\nexport type GraphTabsProps = {\n  disabled?: boolean;\n  onTabChange?: (val: string) => void;\n};\n\ntype NonUndefined<T> = T extends undefined ? never : T;\ntype TabItem = NonUndefined<TabsProps['items']>[number];\n\nexport const GraphTabs: React.FC<GraphTabsProps> = ({ disabled, onTabChange }) => {\n  const { activeNode, openNodes, openTab, closeTab } = useDecisionGraphStore(\n    ({ decisionGraph, openTab, closeTab, activeTab, openTabs }) => ({\n      activeNode: (decisionGraph?.nodes ?? []).find((node) => node.id === activeTab),\n      openNodes: (decisionGraph?.nodes ?? []).filter((node) => openTabs.includes(node.id)),\n      openTab,\n      closeTab,\n    }),\n    equal,\n  );\n\n  useEffect(() => {\n    onTabChange?.(activeNode?.id || 'graph');\n  }, [activeNode]);\n\n  return (\n    <Tabs\n      hideAdd\n      type={'editable-card'}\n      size='small'\n      className={'tabs'}\n      activeKey={activeNode?.id || 'graph'}\n      onEdit={(targetKey: any, action: 'add' | 'remove') => {\n        if (action === 'remove') {\n          closeTab(targetKey);\n        }\n      }}\n      onChange={(val) => openTab(val)}\n      items={[\n        { closable: false, label: 'Graph', key: 'graph' },\n        ...openNodes.map(\n          (node) =>\n            ({\n              disabled,\n              key: node.id,\n              label: node?.name ?? node?.type,\n              closable: true,\n            }) satisfies TabItem,\n        ),\n      ]}\n    />\n  );\n};\n","import type { DragDropManager } from 'dnd-core';\nimport equal from 'fast-deep-equal/es6/react';\nimport React from 'react';\n\nimport { DecisionTable } from '../../decision-table';\nimport { useDecisionGraphStore } from '../context/dg-store.context';\n\nexport type TabDecisionTableProps = {\n  id: string;\n  manager?: DragDropManager;\n};\n\nexport const TabDecisionTable: React.FC<TabDecisionTableProps> = ({ id, manager }) => {\n  const { node, nodeTrace, updateNode, disabled, configurable } = useDecisionGraphStore(\n    ({ decisionGraph, simulate, updateNode, disabled, configurable }) => ({\n      node: (decisionGraph?.nodes ?? []).find((node) => node.id === id),\n      nodeTrace: simulate?.result?.trace?.[id],\n      updateNode,\n      disabled,\n      configurable,\n    }),\n    equal,\n  );\n\n  const activeRules: string[] =\n    nodeTrace?.traceData !== undefined\n      ? Array.isArray(nodeTrace?.traceData)\n        ? nodeTrace?.traceData?.map((d: any) => d?.rule?._id)\n        : [nodeTrace?.traceData?.rule?._id]\n      : [];\n\n  if (!node) return null;\n\n  return (\n    <DecisionTable\n      tableHeight={'100%'}\n      value={node?.content as any}\n      onChange={(val) => updateNode(id, val)}\n      manager={manager}\n      disabled={disabled}\n      configurable={configurable}\n      activeRules={(activeRules || []).filter((id) => !!id)}\n    />\n  );\n};\n","import type { DragDropManager } from 'dnd-core';\nimport equal from 'fast-deep-equal/es6/react';\nimport React from 'react';\n\nimport { Expression } from '../../expression/expression';\nimport { useDecisionGraphStore } from '../context/dg-store.context';\n\nexport type TabExpressionProps = {\n  id: string;\n  manager?: DragDropManager;\n};\n\nexport const TabExpression: React.FC<TabExpressionProps> = ({ id, manager }) => {\n  const { node, updateNode, disabled, configurable } = useDecisionGraphStore(\n    ({ decisionGraph, updateNode, disabled, configurable }) => ({\n      node: (decisionGraph?.nodes ?? []).find((node) => node.id === id),\n      updateNode,\n      disabled,\n      configurable,\n    }),\n    equal,\n  );\n\n  if (!node) return null;\n\n  return (\n    <div style={{ maxWidth: 900, height: '100%', overflowY: 'auto', boxSizing: 'border-box', paddingBottom: '1.5rem' }}>\n      <Expression\n        value={node?.content?.expressions}\n        onChange={(val) =>\n          updateNode(id, {\n            expressions: val,\n          })\n        }\n        disabled={disabled}\n        configurable={configurable}\n        manager={manager}\n      />\n    </div>\n  );\n};\n","import { Spin } from 'antd';\nimport equal from 'fast-deep-equal/es6/react';\nimport React, { Suspense } from 'react';\n\nimport { useDecisionGraphStore } from '../context/dg-store.context';\n\nconst Function = React.lazy(async () => {\n  const functionImport = await import('../../function');\n  return { default: functionImport.Function };\n});\n\nexport type TabFunctionProps = {\n  id: string;\n};\n\nexport const TabFunction: React.FC<TabFunctionProps> = ({ id }) => {\n  const { node, nodeTrace, updateNode, disabled } = useDecisionGraphStore(\n    ({ decisionGraph, simulate, updateNode, disabled }) => ({\n      node: (decisionGraph?.nodes ?? []).find((node) => node.id === id),\n      nodeTrace: simulate?.result?.trace?.[id],\n      updateNode,\n      disabled,\n    }),\n    equal,\n  );\n\n  if (!node) return null;\n\n  return (\n    <Suspense fallback={<Spin />}>\n      <Function\n        value={typeof node?.content === 'string' ? node?.content : ''}\n        onChange={(val) => updateNode(id, val)}\n        disabled={disabled}\n        trace={nodeTrace}\n      />\n    </Suspense>\n  );\n};\n","import clsx from 'clsx';\nimport { createDragDropManager } from 'dnd-core';\nimport equal from 'fast-deep-equal/es6/react';\nimport React, { forwardRef, useMemo, useRef, useState } from 'react';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport type { ProOptions } from 'reactflow';\nimport 'reactflow/dist/style.css';\n\nimport { useDecisionGraphStore } from './context/dg-store.context';\nimport './dg.scss';\nimport type { GraphRef } from './graph/graph';\nimport { Graph } from './graph/graph';\nimport { GraphTabs } from './graph/graph-tabs';\nimport { TabDecisionTable } from './graph/tab-decision-table';\nimport { TabExpression } from './graph/tab-expression';\nimport { TabFunction } from './graph/tab-function';\n\nexport type DecisionGraphWrapperProps = {\n  reactFlowProOptions?: ProOptions;\n  hideExportImport?: boolean;\n};\n\nexport const DecisionGraphWrapper = forwardRef<GraphRef, DecisionGraphWrapperProps>(\n  ({ reactFlowProOptions, hideExportImport }, ref) => {\n    const containerRef = useRef<HTMLDivElement>(null);\n    const { activeNode, openNodes, onTabChange } = useDecisionGraphStore(\n      ({ decisionGraph, activeTab, openTabs, onTabChange }) => ({\n        onTabChange,\n        activeNode: (decisionGraph?.nodes ?? []).find((node) => node.id === activeTab),\n        openNodes: (decisionGraph?.nodes ?? []).filter((node) => openTabs.includes(node.id)),\n      }),\n      equal,\n    );\n\n    const [disableTabs, setDisableTabs] = useState(false);\n\n    const dndManager = useMemo(() => {\n      return createDragDropManager(HTML5Backend, undefined, {\n        rootElement: containerRef.current,\n      });\n    }, [containerRef.current]);\n\n    return (\n      <div className={'grl-dg__wrapper'}>\n        <div className={'grl-dg__graph'}>\n          <GraphTabs disabled={disableTabs} onTabChange={onTabChange} />\n          <Graph\n            ref={ref}\n            className={clsx([!activeNode && 'active'])}\n            hideExportImport={hideExportImport}\n            reactFlowProOptions={reactFlowProOptions}\n            onDisableTabs={setDisableTabs}\n          />\n          <div style={{ display: 'contents' }} ref={containerRef}>\n            {openNodes.map((node) => (\n              <div key={node?.id} className={clsx(['tab-content', activeNode?.id === node?.id && 'active'])}>\n                {node?.type === 'decisionTableNode' && <TabDecisionTable id={node.id} manager={dndManager} />}\n                {node?.type === 'expressionNode' && <TabExpression id={node.id} manager={dndManager} />}\n                {node?.type === 'functionNode' && <TabFunction id={node.id} />}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  },\n);\n","import type { DragDropManager } from 'dnd-core';\nimport React, { forwardRef } from 'react';\n\nimport type { DecisionGraphContextProps } from './context/dg-store.context';\nimport { DecisionGraphProvider } from './context/dg-store.context';\nimport type { DecisionGraphEmptyType } from './dg-empty';\nimport { DecisionGraphEmpty } from './dg-empty';\nimport type { DecisionGraphWrapperProps } from './dg-wrapper';\nimport { DecisionGraphWrapper } from './dg-wrapper';\nimport './dg.scss';\nimport type { GraphRef } from './graph/graph';\n\nexport type DecisionGraphProps = {\n  manager?: DragDropManager;\n} & DecisionGraphWrapperProps &\n  DecisionGraphContextProps &\n  DecisionGraphEmptyType;\n\nexport const DecisionGraph = forwardRef<GraphRef, DecisionGraphProps>(\n  ({ manager: _, reactFlowProOptions, hideExportImport, ...props }, ref) => {\n    return (\n      <div className={'grl-dg'}>\n        <DecisionGraphProvider>\n          <DecisionGraphWrapper\n            reactFlowProOptions={reactFlowProOptions}\n            hideExportImport={hideExportImport}\n            ref={ref}\n          />\n          <DecisionGraphEmpty {...props} />\n        </DecisionGraphProvider>\n      </div>\n    );\n  },\n);\n"],"file":"assets/dg-ac93eef4.js"}