const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DFdLzItk.js","./index-CQHSiloJ.js","./index-DQDNmYQF.js","./index-DYVtDik4.js","./monaco-m1Zdbj0r.js","./wasm-C6WB3NPO.js","./AntdIcon-ahp8uH5b.js","./iframe-BNZhFiCo.js","./index.module-DwMh-XUU.js","./index-Ps6eo1yX.css"])))=>i.map(i=>d[i]);
import{r as tg,j as A}from"./index-CQHSiloJ.js";import{r as T,R as W,c as Dn,g as ng}from"./index-DQDNmYQF.js";import{t as J_,v as K_,w as Q_,a as Ul,p as Tt,b as Jn,D as rg,x as dc,y as ig,g as Bu,z as og,E as td,I as ew,e as fc,c as tw,H as nw}from"./confirm-action-BoBmwZ9Z.js";import{N as rw,a as iw,c as ow,b as sw,u as aw,i as uw,A as lw,f as cw,D as Ys,s as Yt,o as Rh,T as nd}from"./index.module-DwMh-XUU.js";import{K as js,k as sg,m as ag,$ as is,r as ug,ae as dw,a0 as fw,a1 as hw,C as oa,u as Ou,c as Sr,af as pw,ag as gw,H as mw,h as yw,G as vw,a4 as Dw,a6 as bw,a8 as _w,j as ww,aG as xw,b as Cw,z as $e,i as go,e as Zn,N as ke,V as lg,T as rn,an as xr,t as rd}from"./wasm-C6WB3NPO.js";import{a as Ew,r as Sw,P as Aw,L as Fw,N as Dt,D as Nw,R as os,T as Tw,M as Mu,S as ks,F as oi,b as Iw,c as Pu,d as cg,z as fe,e as Rw,f as Bw}from"./dt-Bj3aiHCZ.js";import{c as sa,b as it}from"./ce-preview-G44oUvYD.js";import{R as Ow,r as Mw,I as _n,B as ht,S as dg}from"./AntdIcon-ahp8uH5b.js";import{E as Pw}from"./expression-DZCGl1sD.js";import{S as ss,d as zw,a as id,c as Du,P as fg,R as jw,w as kw,p as $w,b as Wl,e as Bh}from"./monaco-m1Zdbj0r.js";import{_ as qw}from"./iframe-BNZhFiCo.js";const Lw=e=>{const{componentCls:n,notificationMarginEdge:r,animationMaxHeight:o}=e,s=`${n}-notice`,u=new js("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),c=new js("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),l=new js("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),d=new js("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[s]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:c}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:l}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:u}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:r,_skip_check_:!0},[s]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:d}}}}},Hw=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Gw={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Vw=(e,n)=>{const{componentCls:r}=e;return{[`${r}-${n}`]:{[`&${r}-stack > ${r}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Gw[n]]:{value:0,_skip_check_:!0}}}}},Uw=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},Ww=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},Xw=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},Uw(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},Ww(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Hw.map(r=>Vw(e,r)).reduce((r,o)=>Object.assign(Object.assign({},r),o),{}))},hg=e=>{const{iconCls:n,componentCls:r,boxShadow:o,fontSizeLG:s,notificationMarginBottom:u,borderRadiusLG:c,colorSuccess:l,colorInfo:d,colorWarning:f,colorError:p,colorTextHeading:g,notificationBg:v,notificationPadding:w,notificationMarginEdge:x,notificationProgressBg:y,notificationProgressHeight:_,fontSize:m,lineHeight:C,width:I,notificationIconSize:F,colorText:j}=e,q=`${r}-notice`;return{position:"relative",marginBottom:u,marginInlineStart:"auto",background:v,borderRadius:c,boxShadow:o,[q]:{padding:w,width:I,maxWidth:`calc(100vw - ${is(e.calc(x).mul(2).equal())})`,overflow:"hidden",lineHeight:C,wordWrap:"break-word"},[`${q}-message`]:{marginBottom:e.marginXS,color:g,fontSize:s,lineHeight:e.lineHeightLG},[`${q}-description`]:{fontSize:m,color:j},[`${q}-closable ${q}-message`]:{paddingInlineEnd:e.paddingLG},[`${q}-with-icon ${q}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:s},[`${q}-with-icon ${q}-description`]:{marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:m},[`${q}-icon`]:{position:"absolute",fontSize:F,lineHeight:1,[`&-success${n}`]:{color:l},[`&-info${n}`]:{color:d},[`&-warning${n}`]:{color:f},[`&-error${n}`]:{color:p}},[`${q}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},fw(e)),[`${q}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${is(c)} * 2)`,left:{_skip_check_:!0,value:c},right:{_skip_check_:!0,value:c},bottom:0,blockSize:_,border:0,"&, &::-webkit-progress-bar":{borderRadius:c,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:y},"&::-webkit-progress-value":{borderRadius:c,background:y}},[`${q}-btn`]:{float:"right",marginTop:e.marginSM}}},Yw=e=>{const{componentCls:n,notificationMarginBottom:r,notificationMarginEdge:o,motionDurationMid:s,motionEaseInOut:u}=e,c=`${n}-notice`,l=new js("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:r},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},ug(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:u,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:u,animationFillMode:"both",animationDuration:s,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:l,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${c}-btn`]:{float:"left"}}})},{[n]:{[`${c}-wrapper`]:Object.assign({},hg(e))}}]},pg=e=>({zIndexPopup:e.zIndexPopupBase+dw+50,width:384}),gg=e=>{const n=e.paddingMD,r=e.paddingLG;return ag(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:r,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${is(e.paddingMD)} ${is(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},mg=sg("Notification",e=>{const n=gg(e);return[Yw(n),Lw(n),Xw(n)]},pg),Zw=hw(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,r=gg(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},hg(r)),{width:r.width,maxWidth:`calc(100vw - ${is(e.calc(r.notificationMarginEdge).mul(2).equal())})`,margin:0})}},pg);var Jw=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};function od(e,n){return n===null||n===!1?null:n||T.createElement(Ow,{className:`${e}-close-icon`})}const Kw={success:sw,info:ow,error:pw,warning:iw},yg=e=>{const{prefixCls:n,icon:r,type:o,message:s,description:u,btn:c,role:l="alert"}=e;let d=null;return r?d=T.createElement("span",{className:`${n}-icon`},r):o&&(d=T.createElement(Kw[o]||null,{className:Sr(`${n}-icon`,`${n}-icon-${o}`)})),T.createElement("div",{className:Sr({[`${n}-with-icon`]:d}),role:l},d,T.createElement("div",{className:`${n}-message`},s),T.createElement("div",{className:`${n}-description`},u),c&&T.createElement("div",{className:`${n}-btn`},c))},Qw=e=>{const{prefixCls:n,className:r,icon:o,type:s,message:u,description:c,btn:l,closable:d=!0,closeIcon:f,className:p}=e,g=Jw(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:v}=T.useContext(oa),w=n||v("notification"),x=`${w}-notice`,y=Ou(w),[_,m,C]=mg(w,y);return _(T.createElement("div",{className:Sr(`${x}-pure-panel`,m,r,C,y)},T.createElement(Zw,{prefixCls:w}),T.createElement(rw,Object.assign({},g,{prefixCls:w,eventKey:"pure",duration:null,closable:d,className:Sr({notificationClassName:p}),closeIcon:od(w,f),content:T.createElement(yg,{prefixCls:x,icon:o,type:s,message:u,description:c,btn:l})}))))};function ex(e,n,r){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":o={left:0,top:n,bottom:"auto"};break;case"topRight":o={right:0,top:n,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":o={left:0,top:"auto",bottom:r};break;default:o={right:0,top:"auto",bottom:r};break}return o}function tx(e){return{motionName:`${e}-fade`}}var nx=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const Oh=24,rx=4.5,ix="topRight",ox=e=>{let{children:n,prefixCls:r}=e;const o=Ou(r),[s,u,c]=mg(r,o);return s(W.createElement(uw,{classNames:{list:Sr(u,c,o)}},n))},sx=(e,n)=>{let{prefixCls:r,key:o}=n;return W.createElement(ox,{prefixCls:r,key:o},e)},ax=W.forwardRef((e,n)=>{const{top:r,bottom:o,prefixCls:s,getContainer:u,maxCount:c,rtl:l,onAllRemoved:d,stack:f,duration:p,pauseOnHover:g=!0,showProgress:v}=e,{getPrefixCls:w,getPopupContainer:x,notification:y,direction:_}=T.useContext(oa),[,m]=mw(),C=s||w("notification"),I=ne=>ex(ne,r??Oh,o??Oh),F=()=>Sr({[`${C}-rtl`]:l??_==="rtl"}),j=()=>tx(C),[q,Y]=aw({prefixCls:C,style:I,className:F,motion:j,closable:!0,closeIcon:od(C),duration:p??rx,getContainer:()=>u?.()||x?.()||document.body,maxCount:c,pauseOnHover:g,showProgress:v,onAllRemoved:d,renderNotifications:sx,stack:f===!1?!1:{threshold:typeof f=="object"?f?.threshold:void 0,offset:8,gap:m.margin}});return W.useImperativeHandle(n,()=>Object.assign(Object.assign({},q),{prefixCls:C,notification:y})),Y});function vg(e){const n=W.useRef(null);return gw(),[W.useMemo(()=>{const o=l=>{var d;if(!n.current)return;const{open:f,prefixCls:p,notification:g}=n.current,v=`${p}-notice`,{message:w,description:x,icon:y,type:_,btn:m,className:C,style:I,role:F="alert",closeIcon:j,closable:q}=l,Y=nx(l,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),ne=od(v,typeof j<"u"?j:g?.closeIcon);return f(Object.assign(Object.assign({placement:(d=e?.placement)!==null&&d!==void 0?d:ix},Y),{content:W.createElement(yg,{prefixCls:v,icon:y,type:_,message:w,description:x,btn:m,role:F}),className:Sr(_&&`${v}-${_}`,C,g?.className),style:Object.assign(Object.assign({},g?.style),I),closeIcon:ne,closable:q??!!ne}))},u={open:o,destroy:l=>{var d,f;l!==void 0?(d=n.current)===null||d===void 0||d.close(l):(f=n.current)===null||f===void 0||f.destroy()}};return["success","info","warning","error"].forEach(l=>{u[l]=d=>o(Object.assign(Object.assign({},d),{type:l}))}),u},[]),W.createElement(ax,Object.assign({key:"notification-holder"},e,{ref:n}))]}function ux(e){return vg(e)}function lx(){const[,e]=T.useReducer(n=>n+1,0);return e}function cx(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=T.useRef({}),r=lx(),o=Ew();return yw(()=>{const s=o.subscribe(u=>{n.current=u,e&&r()});return()=>o.unsubscribe(s)},[]),n.current}const hc=T.createContext({}),dx=e=>{const{antCls:n,componentCls:r,iconCls:o,avatarBg:s,avatarColor:u,containerSize:c,containerSizeLG:l,containerSizeSM:d,textFontSize:f,textFontSizeLG:p,textFontSizeSM:g,borderRadius:v,borderRadiusLG:w,borderRadiusSM:x,lineWidth:y,lineType:_}=e,m=(C,I,F)=>({width:C,height:C,borderRadius:"50%",[`&${r}-square`]:{borderRadius:F},[`&${r}-icon`]:{fontSize:I,[`> ${o}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},ug(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:u,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${is(y)} ${_} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),m(c,f,v)),{"&-lg":Object.assign({},m(l,p,w)),"&-sm":Object.assign({},m(d,g,x)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},fx=e=>{const{componentCls:n,groupBorderColor:r,groupOverlapping:o,groupSpace:s}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:o}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:s}}}},hx=e=>{const{controlHeight:n,controlHeightLG:r,controlHeightSM:o,fontSize:s,fontSizeLG:u,fontSizeXL:c,fontSizeHeading3:l,marginXS:d,marginXXS:f,colorBorderBg:p}=e;return{containerSize:n,containerSizeLG:r,containerSizeSM:o,textFontSize:Math.round((u+c)/2),textFontSizeLG:l,textFontSizeSM:s,groupSpace:f,groupOverlapping:-d,groupBorderColor:p}},Dg=sg("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:r}=e,o=ag(e,{avatarBg:r,avatarColor:n});return[dx(o),fx(o)]},hx);var px=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const gx=(e,n)=>{const[r,o]=T.useState(1),[s,u]=T.useState(!1),[c,l]=T.useState(!0),d=T.useRef(null),f=T.useRef(null),p=vw(n,d),{getPrefixCls:g,avatar:v}=T.useContext(oa),w=T.useContext(hc),x=()=>{if(!f.current||!d.current)return;const De=f.current.offsetWidth,Se=d.current.offsetWidth;if(De!==0&&Se!==0){const{gap:Be=4}=e;Be*2<Se&&o(Se-Be*2<De?(Se-Be*2)/De:1)}};T.useEffect(()=>{u(!0)},[]),T.useEffect(()=>{l(!0),o(1)},[e.src]),T.useEffect(x,[e.gap]);const y=()=>{const{onError:De}=e;De?.()!==!1&&l(!1)},{prefixCls:_,shape:m,size:C,src:I,srcSet:F,icon:j,className:q,rootClassName:Y,alt:ne,draggable:O,children:V,crossOrigin:K}=e,ee=px(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),Z=Dw(De=>{var Se,Be;return(Be=(Se=C??w?.size)!==null&&Se!==void 0?Se:De)!==null&&Be!==void 0?Be:"default"}),R=Object.keys(typeof Z=="object"?Z||{}:{}).some(De=>["xs","sm","md","lg","xl","xxl"].includes(De)),G=cx(R),k=T.useMemo(()=>{if(typeof Z!="object")return{};const De=Sw.find(Be=>G[Be]),Se=Z[De];return Se?{width:Se,height:Se,fontSize:Se&&(j||V)?Se/2:18}:{}},[G,Z]),J=g("avatar",_),se=Ou(J),[U,re,ue]=Dg(J,se),de=Sr({[`${J}-lg`]:Z==="large",[`${J}-sm`]:Z==="small"}),ce=T.isValidElement(I),ve=m||w?.shape||"circle",ge=Sr(J,de,v?.className,`${J}-${ve}`,{[`${J}-image`]:ce||I&&c,[`${J}-icon`]:!!j},ue,se,q,Y,re),Ee=typeof Z=="number"?{width:Z,height:Z,fontSize:j?Z/2:18}:{};let Oe;if(typeof I=="string"&&c)Oe=T.createElement("img",{src:I,draggable:O,srcSet:F,onError:y,alt:ne,crossOrigin:K});else if(ce)Oe=I;else if(j)Oe=j;else if(s||r!==1){const De=`scale(${r})`,Se={msTransform:De,WebkitTransform:De,transform:De};Oe=T.createElement(bw,{onResize:x},T.createElement("span",{className:`${J}-string`,ref:f,style:Object.assign({},Se)},V))}else Oe=T.createElement("span",{className:`${J}-string`,style:{opacity:0},ref:f},V);return delete ee.onError,delete ee.gap,U(T.createElement("span",Object.assign({},ee,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ee),k),v?.style),ee.style),className:ge,ref:p}),Oe))},bg=T.forwardRef(gx),Mh=e=>{const{size:n,shape:r}=T.useContext(hc),o=T.useMemo(()=>({size:e.size||n,shape:e.shape||r}),[e.size,e.shape,n,r]);return T.createElement(hc.Provider,{value:o},e.children)},mx=e=>{var n,r,o;const{getPrefixCls:s,direction:u}=T.useContext(oa),{prefixCls:c,className:l,rootClassName:d,style:f,maxCount:p,maxStyle:g,size:v,shape:w,maxPopoverPlacement:x,maxPopoverTrigger:y,children:_,max:m}=e,C=s("avatar",c),I=`${C}-group`,F=Ou(C),[j,q,Y]=Dg(C,F),ne=Sr(I,{[`${I}-rtl`]:u==="rtl"},Y,F,l,d,q),O=_w(_).map((ee,Z)=>ww(ee,{key:`avatar-key-${Z}`})),V=m?.count||p,K=O.length;if(V&&V<K){const ee=O.slice(0,V),Z=O.slice(V,K),R=m?.style||g,G=((n=m?.popover)===null||n===void 0?void 0:n.trigger)||y||"hover",k=((r=m?.popover)===null||r===void 0?void 0:r.placement)||x||"top",J=Object.assign(Object.assign({content:Z},m?.popover),{overlayClassName:Sr(`${I}-popover`,(o=m?.popover)===null||o===void 0?void 0:o.overlayClassName),placement:k,trigger:G});return ee.push(T.createElement(Aw,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},J),T.createElement(bg,{style:R},`+${K-V}`))),j(T.createElement(Mh,{shape:w,size:v},T.createElement("div",{className:ne,style:f},ee)))}return j(T.createElement(Mh,{shape:w,size:v},T.createElement("div",{className:ne,style:f},O)))},_g=bg;_g.Group=mx;let br=null,du=e=>e(),bu=[],Zs={};function Ph(){const{getContainer:e,rtl:n,maxCount:r,top:o,bottom:s,showProgress:u,pauseOnHover:c}=Zs,l=e?.()||document.body;return{getContainer:()=>l,rtl:n,maxCount:r,top:o,bottom:s,showProgress:u,pauseOnHover:c}}const yx=W.forwardRef((e,n)=>{const{notificationConfig:r,sync:o}=e,{getPrefixCls:s}=T.useContext(oa),u=Zs.prefixCls||s("notification"),c=T.useContext(lw),[l,d]=vg(Object.assign(Object.assign(Object.assign({},r),{prefixCls:u}),c.notification));return W.useEffect(o,[]),W.useImperativeHandle(n,()=>{const f=Object.assign({},l);return Object.keys(f).forEach(p=>{f[p]=function(){return o(),l[p].apply(l,arguments)}}),{instance:f,sync:o}}),d}),vx=W.forwardRef((e,n)=>{const[r,o]=W.useState(Ph),s=()=>{o(Ph)};W.useEffect(s,[]);const u=xw(),c=u.getRootPrefixCls(),l=u.getIconPrefixCls(),d=u.getTheme(),f=W.createElement(yx,{ref:n,sync:s,notificationConfig:r});return W.createElement(Cw,{prefixCls:c,iconPrefixCls:l,theme:d},u.holderRender?u.holderRender(f):f)});function sd(){if(!br){const e=document.createDocumentFragment(),n={fragment:e};br=n,du(()=>{Mw(W.createElement(vx,{ref:r=>{const{instance:o,sync:s}=r||{};Promise.resolve().then(()=>{!n.instance&&o&&(n.instance=o,n.sync=s,sd())})}}),e)});return}br.instance&&(bu.forEach(e=>{switch(e.type){case"open":{du(()=>{br.instance.open(Object.assign(Object.assign({},Zs),e.config))});break}case"destroy":du(()=>{br?.instance.destroy(e.key)});break}}),bu=[])}function Dx(e){Zs=Object.assign(Object.assign({},Zs),e),du(()=>{var n;(n=br?.sync)===null||n===void 0||n.call(br)})}function wg(e){bu.push({type:"open",config:e}),sd()}const bx=e=>{bu.push({type:"destroy",key:e}),sd()},_x=["success","info","warning","error"],wx={open:wg,destroy:bx,config:Dx,useNotification:ux,_InternalPanelDoNotUseOrYouWillBeFired:Qw},ad=wx;_x.forEach(e=>{ad[e]=n=>wg(Object.assign(Object.assign({},n),{type:e}))});var xx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},Cx={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:r}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:n}}]}},name:"check-circle",theme:"twotone"},Ex={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},Sx={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:r}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:n}}]}},name:"close-circle",theme:"twotone"},Ax={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},Fx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},Nx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},Tx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},Ix={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},Rx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Bx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Ox={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},Mx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},Px={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]],jx=sa("arrow-right-from-line",zx);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kx=[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]],$x=sa("arrow-right-to-line",kx);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Lx=sa("grid-3x3",qx);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],Gx=sa("hash",Hx);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],Ux=sa("split",Vx);function pc(){return pc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},pc.apply(this,arguments)}const Wx=(e,n)=>T.createElement(_n,pc({},e,{ref:n,icon:xx})),xg=T.forwardRef(Wx);function gc(){return gc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gc.apply(this,arguments)}const Xx=(e,n)=>T.createElement(_n,gc({},e,{ref:n,icon:Cx})),Yx=T.forwardRef(Xx);function mc(){return mc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},mc.apply(this,arguments)}const Zx=(e,n)=>T.createElement(_n,mc({},e,{ref:n,icon:Ex})),Jx=T.forwardRef(Zx);function yc(){return yc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},yc.apply(this,arguments)}const Kx=(e,n)=>T.createElement(_n,yc({},e,{ref:n,icon:Sx})),Qx=T.forwardRef(Kx);function vc(){return vc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},vc.apply(this,arguments)}const eC=(e,n)=>T.createElement(_n,vc({},e,{ref:n,icon:Ax})),tC=T.forwardRef(eC);function Dc(){return Dc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Dc.apply(this,arguments)}const nC=(e,n)=>T.createElement(_n,Dc({},e,{ref:n,icon:Fx})),rC=T.forwardRef(nC);function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},bc.apply(this,arguments)}const iC=(e,n)=>T.createElement(_n,bc({},e,{ref:n,icon:Nx})),oC=T.forwardRef(iC);function _c(){return _c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_c.apply(this,arguments)}const sC=(e,n)=>T.createElement(_n,_c({},e,{ref:n,icon:Tx})),aC=T.forwardRef(sC);function wc(){return wc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wc.apply(this,arguments)}const uC=(e,n)=>T.createElement(_n,wc({},e,{ref:n,icon:J_})),lC=T.forwardRef(uC);function xc(){return xc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},xc.apply(this,arguments)}const cC=(e,n)=>T.createElement(_n,xc({},e,{ref:n,icon:Ix})),Cg=T.forwardRef(cC);function Cc(){return Cc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Cc.apply(this,arguments)}const dC=(e,n)=>T.createElement(_n,Cc({},e,{ref:n,icon:Fw})),fC=T.forwardRef(dC);function Ec(){return Ec=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ec.apply(this,arguments)}const hC=(e,n)=>T.createElement(_n,Ec({},e,{ref:n,icon:Rx})),pC=T.forwardRef(hC);function Sc(){return Sc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sc.apply(this,arguments)}const gC=(e,n)=>T.createElement(_n,Sc({},e,{ref:n,icon:Bx})),mC=T.forwardRef(gC);function Ac(){return Ac=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ac.apply(this,arguments)}const yC=(e,n)=>T.createElement(_n,Ac({},e,{ref:n,icon:Ox})),Eg=T.forwardRef(yC);function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fc.apply(this,arguments)}const vC=(e,n)=>T.createElement(_n,Fc({},e,{ref:n,icon:Mx})),DC=T.forwardRef(vC);function Nc(){return Nc=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nc.apply(this,arguments)}const bC=(e,n)=>T.createElement(_n,Nc({},e,{ref:n,icon:Px})),_C=T.forwardRef(bC);var wC=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,xC=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,CC=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Xl={Space_Separator:wC,ID_Start:xC,ID_Continue:CC},Gt={isSpaceSeparator(e){return typeof e=="string"&&Xl.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||Xl.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e==="‌"||e==="‍"||Xl.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let Tc,Tn,si,_u,Oi,Cr,dn,ud,Ws;var EC=function(n,r){Tc=String(n),Tn="start",si=[],_u=0,Oi=1,Cr=0,dn=void 0,ud=void 0,Ws=void 0;do dn=SC(),NC[Tn]();while(dn.type!=="eof");return typeof r=="function"?Ic({"":Ws},"",r):Ws};function Ic(e,n,r){const o=e[n];if(o!=null&&typeof o=="object")if(Array.isArray(o))for(let s=0;s<o.length;s++){const u=String(s),c=Ic(o,u,r);c===void 0?delete o[u]:Object.defineProperty(o,u,{value:c,writable:!0,enumerable:!0,configurable:!0})}else for(const s in o){const u=Ic(o,s,r);u===void 0?delete o[s]:Object.defineProperty(o,s,{value:u,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,n,o)}let Ge,je,$s,ii,Ye;function SC(){for(Ge="default",je="",$s=!1,ii=1;;){Ye=ui();const e=Sg[Ge]();if(e)return e}}function ui(){if(Tc[_u])return String.fromCodePoint(Tc.codePointAt(_u))}function ae(){const e=ui();return e===`
`?(Oi++,Cr=0):e?Cr+=e.length:Cr++,e&&(_u+=e.length),e}const Sg={default(){switch(Ye){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":ae();return;case"/":ae(),Ge="comment";return;case void 0:return ae(),xt("eof")}if(Gt.isSpaceSeparator(Ye)){ae();return}return Sg[Tn]()},comment(){switch(Ye){case"*":ae(),Ge="multiLineComment";return;case"/":ae(),Ge="singleLineComment";return}throw Ct(ae())},multiLineComment(){switch(Ye){case"*":ae(),Ge="multiLineCommentAsterisk";return;case void 0:throw Ct(ae())}ae()},multiLineCommentAsterisk(){switch(Ye){case"*":ae();return;case"/":ae(),Ge="default";return;case void 0:throw Ct(ae())}ae(),Ge="multiLineComment"},singleLineComment(){switch(Ye){case`
`:case"\r":case"\u2028":case"\u2029":ae(),Ge="default";return;case void 0:return ae(),xt("eof")}ae()},value(){switch(Ye){case"{":case"[":return xt("punctuator",ae());case"n":return ae(),lo("ull"),xt("null",null);case"t":return ae(),lo("rue"),xt("boolean",!0);case"f":return ae(),lo("alse"),xt("boolean",!1);case"-":case"+":ae()==="-"&&(ii=-1),Ge="sign";return;case".":je=ae(),Ge="decimalPointLeading";return;case"0":je=ae(),Ge="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":je=ae(),Ge="decimalInteger";return;case"I":return ae(),lo("nfinity"),xt("numeric",1/0);case"N":return ae(),lo("aN"),xt("numeric",NaN);case'"':case"'":$s=ae()==='"',je="",Ge="string";return}throw Ct(ae())},identifierNameStartEscape(){if(Ye!=="u")throw Ct(ae());ae();const e=Rc();switch(e){case"$":case"_":break;default:if(!Gt.isIdStartChar(e))throw zh();break}je+=e,Ge="identifierName"},identifierName(){switch(Ye){case"$":case"_":case"‌":case"‍":je+=ae();return;case"\\":ae(),Ge="identifierNameEscape";return}if(Gt.isIdContinueChar(Ye)){je+=ae();return}return xt("identifier",je)},identifierNameEscape(){if(Ye!=="u")throw Ct(ae());ae();const e=Rc();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!Gt.isIdContinueChar(e))throw zh();break}je+=e,Ge="identifierName"},sign(){switch(Ye){case".":je=ae(),Ge="decimalPointLeading";return;case"0":je=ae(),Ge="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":je=ae(),Ge="decimalInteger";return;case"I":return ae(),lo("nfinity"),xt("numeric",ii*(1/0));case"N":return ae(),lo("aN"),xt("numeric",NaN)}throw Ct(ae())},zero(){switch(Ye){case".":je+=ae(),Ge="decimalPoint";return;case"e":case"E":je+=ae(),Ge="decimalExponent";return;case"x":case"X":je+=ae(),Ge="hexadecimal";return}return xt("numeric",ii*0)},decimalInteger(){switch(Ye){case".":je+=ae(),Ge="decimalPoint";return;case"e":case"E":je+=ae(),Ge="decimalExponent";return}if(Gt.isDigit(Ye)){je+=ae();return}return xt("numeric",ii*Number(je))},decimalPointLeading(){if(Gt.isDigit(Ye)){je+=ae(),Ge="decimalFraction";return}throw Ct(ae())},decimalPoint(){switch(Ye){case"e":case"E":je+=ae(),Ge="decimalExponent";return}if(Gt.isDigit(Ye)){je+=ae(),Ge="decimalFraction";return}return xt("numeric",ii*Number(je))},decimalFraction(){switch(Ye){case"e":case"E":je+=ae(),Ge="decimalExponent";return}if(Gt.isDigit(Ye)){je+=ae();return}return xt("numeric",ii*Number(je))},decimalExponent(){switch(Ye){case"+":case"-":je+=ae(),Ge="decimalExponentSign";return}if(Gt.isDigit(Ye)){je+=ae(),Ge="decimalExponentInteger";return}throw Ct(ae())},decimalExponentSign(){if(Gt.isDigit(Ye)){je+=ae(),Ge="decimalExponentInteger";return}throw Ct(ae())},decimalExponentInteger(){if(Gt.isDigit(Ye)){je+=ae();return}return xt("numeric",ii*Number(je))},hexadecimal(){if(Gt.isHexDigit(Ye)){je+=ae(),Ge="hexadecimalInteger";return}throw Ct(ae())},hexadecimalInteger(){if(Gt.isHexDigit(Ye)){je+=ae();return}return xt("numeric",ii*Number(je))},string(){switch(Ye){case"\\":ae(),je+=AC();return;case'"':if($s)return ae(),xt("string",je);je+=ae();return;case"'":if(!$s)return ae(),xt("string",je);je+=ae();return;case`
`:case"\r":throw Ct(ae());case"\u2028":case"\u2029":TC(Ye);break;case void 0:throw Ct(ae())}je+=ae()},start(){switch(Ye){case"{":case"[":return xt("punctuator",ae())}Ge="value"},beforePropertyName(){switch(Ye){case"$":case"_":je=ae(),Ge="identifierName";return;case"\\":ae(),Ge="identifierNameStartEscape";return;case"}":return xt("punctuator",ae());case'"':case"'":$s=ae()==='"',Ge="string";return}if(Gt.isIdStartChar(Ye)){je+=ae(),Ge="identifierName";return}throw Ct(ae())},afterPropertyName(){if(Ye===":")return xt("punctuator",ae());throw Ct(ae())},beforePropertyValue(){Ge="value"},afterPropertyValue(){switch(Ye){case",":case"}":return xt("punctuator",ae())}throw Ct(ae())},beforeArrayValue(){if(Ye==="]")return xt("punctuator",ae());Ge="value"},afterArrayValue(){switch(Ye){case",":case"]":return xt("punctuator",ae())}throw Ct(ae())},end(){throw Ct(ae())}};function xt(e,n){return{type:e,value:n,line:Oi,column:Cr}}function lo(e){for(const n of e){if(ui()!==n)throw Ct(ae());ae()}}function AC(){switch(ui()){case"b":return ae(),"\b";case"f":return ae(),"\f";case"n":return ae(),`
`;case"r":return ae(),"\r";case"t":return ae(),"	";case"v":return ae(),"\v";case"0":if(ae(),Gt.isDigit(ui()))throw Ct(ae());return"\0";case"x":return ae(),FC();case"u":return ae(),Rc();case`
`:case"\u2028":case"\u2029":return ae(),"";case"\r":return ae(),ui()===`
`&&ae(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Ct(ae());case void 0:throw Ct(ae())}return ae()}function FC(){let e="",n=ui();if(!Gt.isHexDigit(n)||(e+=ae(),n=ui(),!Gt.isHexDigit(n)))throw Ct(ae());return e+=ae(),String.fromCodePoint(parseInt(e,16))}function Rc(){let e="",n=4;for(;n-- >0;){const r=ui();if(!Gt.isHexDigit(r))throw Ct(ae());e+=ae()}return String.fromCodePoint(parseInt(e,16))}const NC={start(){if(dn.type==="eof")throw co();Yl()},beforePropertyName(){switch(dn.type){case"identifier":case"string":ud=dn.value,Tn="afterPropertyName";return;case"punctuator":Ya();return;case"eof":throw co()}},afterPropertyName(){if(dn.type==="eof")throw co();Tn="beforePropertyValue"},beforePropertyValue(){if(dn.type==="eof")throw co();Yl()},beforeArrayValue(){if(dn.type==="eof")throw co();if(dn.type==="punctuator"&&dn.value==="]"){Ya();return}Yl()},afterPropertyValue(){if(dn.type==="eof")throw co();switch(dn.value){case",":Tn="beforePropertyName";return;case"}":Ya()}},afterArrayValue(){if(dn.type==="eof")throw co();switch(dn.value){case",":Tn="beforeArrayValue";return;case"]":Ya()}},end(){}};function Yl(){let e;switch(dn.type){case"punctuator":switch(dn.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=dn.value;break}if(Ws===void 0)Ws=e;else{const n=si[si.length-1];Array.isArray(n)?n.push(e):Object.defineProperty(n,ud,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")si.push(e),Array.isArray(e)?Tn="beforeArrayValue":Tn="beforePropertyName";else{const n=si[si.length-1];n==null?Tn="end":Array.isArray(n)?Tn="afterArrayValue":Tn="afterPropertyValue"}}function Ya(){si.pop();const e=si[si.length-1];e==null?Tn="end":Array.isArray(e)?Tn="afterArrayValue":Tn="afterPropertyValue"}function Ct(e){return wu(e===void 0?`JSON5: invalid end of input at ${Oi}:${Cr}`:`JSON5: invalid character '${Ag(e)}' at ${Oi}:${Cr}`)}function co(){return wu(`JSON5: invalid end of input at ${Oi}:${Cr}`)}function zh(){return Cr-=5,wu(`JSON5: invalid identifier character at ${Oi}:${Cr}`)}function TC(e){console.warn(`JSON5: '${Ag(e)}' in strings is not valid ECMAScript; consider escaping`)}function Ag(e){const n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(n[e])return n[e];if(e<" "){const r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function wu(e){const n=new SyntaxError(e);return n.lineNumber=Oi,n.columnNumber=Cr,n}var IC=function(n,r,o){const s=[];let u="",c,l,d="",f;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(o=r.space,f=r.quote,r=r.replacer),typeof r=="function")l=r;else if(Array.isArray(r)){c=[];for(const y of r){let _;typeof y=="string"?_=y:(typeof y=="number"||y instanceof String||y instanceof Number)&&(_=String(y)),_!==void 0&&c.indexOf(_)<0&&c.push(_)}}return o instanceof Number?o=Number(o):o instanceof String&&(o=String(o)),typeof o=="number"?o>0&&(o=Math.min(10,Math.floor(o)),d="          ".substr(0,o)):typeof o=="string"&&(d=o.substr(0,10)),p("",{"":n});function p(y,_){let m=_[y];switch(m!=null&&(typeof m.toJSON5=="function"?m=m.toJSON5(y):typeof m.toJSON=="function"&&(m=m.toJSON(y))),l&&(m=l.call(_,y,m)),m instanceof Number?m=Number(m):m instanceof String?m=String(m):m instanceof Boolean&&(m=m.valueOf()),m){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof m=="string")return g(m);if(typeof m=="number")return String(m);if(typeof m=="object")return Array.isArray(m)?x(m):v(m)}function g(y){const _={"'":.1,'"':.2},m={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let C="";for(let F=0;F<y.length;F++){const j=y[F];switch(j){case"'":case'"':_[j]++,C+=j;continue;case"\0":if(Gt.isDigit(y[F+1])){C+="\\x00";continue}}if(m[j]){C+=m[j];continue}if(j<" "){let q=j.charCodeAt(0).toString(16);C+="\\x"+("00"+q).substring(q.length);continue}C+=j}const I=f||Object.keys(_).reduce((F,j)=>_[F]<_[j]?F:j);return C=C.replace(new RegExp(I,"g"),m[I]),I+C+I}function v(y){if(s.indexOf(y)>=0)throw TypeError("Converting circular structure to JSON5");s.push(y);let _=u;u=u+d;let m=c||Object.keys(y),C=[];for(const F of m){const j=p(F,y);if(j!==void 0){let q=w(F)+":";d!==""&&(q+=" "),q+=j,C.push(q)}}let I;if(C.length===0)I="{}";else{let F;if(d==="")F=C.join(","),I="{"+F+"}";else{let j=`,
`+u;F=C.join(j),I=`{
`+u+F+`,
`+_+"}"}}return s.pop(),u=_,I}function w(y){if(y.length===0)return g(y);const _=String.fromCodePoint(y.codePointAt(0));if(!Gt.isIdStartChar(_))return g(y);for(let m=_.length;m<y.length;m++)if(!Gt.isIdContinueChar(String.fromCodePoint(y.codePointAt(m))))return g(y);return y}function x(y){if(s.indexOf(y)>=0)throw TypeError("Converting circular structure to JSON5");s.push(y);let _=u;u=u+d;let m=[];for(let I=0;I<y.length;I++){const F=p(String(I),y);m.push(F!==void 0?F:"null")}let C;if(m.length===0)C="[]";else if(d==="")C="["+m.join(",")+"]";else{let I=`,
`+u,F=m.join(I);C=`[
`+u+F+`,
`+_+"]"}return s.pop(),u=_,C}};const RC={parse:EC,stringify:IC};var Ii=RC;function In(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=In(e[r]))!==""&&(n+=(n&&" ")+o);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}const{useDebugValue:BC}=W,{useSyncExternalStoreWithSelector:OC}=Q_,MC=e=>e;function Fg(e,n=MC,r){const o=OC(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return BC(o),o}const jh=(e,n)=>{const r=K_(e),o=(s,u=n)=>Fg(r,s,u);return Object.assign(o,r),o},PC=(e,n)=>e?jh(e,n):jh;function bn(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[o,s]of e)if(!Object.is(s,n.get(o)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const o of e)if(!n.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(n,o)||!Object.is(e[o],n[o]))return!1;return!0}var zC={value:()=>{}};function zu(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new fu(r)}function fu(e){this._=e}function jC(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}fu.prototype=zu.prototype={constructor:fu,on:function(e,n){var r=this._,o=jC(e+"",r),s,u=-1,c=o.length;if(arguments.length<2){for(;++u<c;)if((s=(e=o[u]).type)&&(s=kC(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<c;)if(s=(e=o[u]).type)r[s]=kh(r[s],e.name,n);else if(n==null)for(s in r)r[s]=kh(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new fu(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,u;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],o=0,s=u.length;o<s;++o)u[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,u=o.length;s<u;++s)o[s].value.apply(n,r)}};function kC(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function kh(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=zC,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var Bc="http://www.w3.org/1999/xhtml";const $h={svg:"http://www.w3.org/2000/svg",xhtml:Bc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ju(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),$h.hasOwnProperty(n)?{space:$h[n],local:e}:e}function $C(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Bc&&n.documentElement.namespaceURI===Bc?n.createElement(e):n.createElementNS(r,e)}}function qC(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ng(e){var n=ju(e);return(n.local?qC:$C)(n)}function LC(){}function ld(e){return e==null?LC:function(){return this.querySelector(e)}}function HC(e){typeof e!="function"&&(e=ld(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],c=u.length,l=o[s]=new Array(c),d,f,p=0;p<c;++p)(d=u[p])&&(f=e.call(d,d.__data__,p,u))&&("__data__"in d&&(f.__data__=d.__data__),l[p]=f);return new Kn(o,this._parents)}function GC(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function VC(){return[]}function Tg(e){return e==null?VC:function(){return this.querySelectorAll(e)}}function UC(e){return function(){return GC(e.apply(this,arguments))}}function WC(e){typeof e=="function"?e=UC(e):e=Tg(e);for(var n=this._groups,r=n.length,o=[],s=[],u=0;u<r;++u)for(var c=n[u],l=c.length,d,f=0;f<l;++f)(d=c[f])&&(o.push(e.call(d,d.__data__,f,c)),s.push(d));return new Kn(o,s)}function Ig(e){return function(){return this.matches(e)}}function Rg(e){return function(n){return n.matches(e)}}var XC=Array.prototype.find;function YC(e){return function(){return XC.call(this.children,e)}}function ZC(){return this.firstElementChild}function JC(e){return this.select(e==null?ZC:YC(typeof e=="function"?e:Rg(e)))}var KC=Array.prototype.filter;function QC(){return Array.from(this.children)}function e2(e){return function(){return KC.call(this.children,e)}}function t2(e){return this.selectAll(e==null?QC:e2(typeof e=="function"?e:Rg(e)))}function n2(e){typeof e!="function"&&(e=Ig(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],c=u.length,l=o[s]=[],d,f=0;f<c;++f)(d=u[f])&&e.call(d,d.__data__,f,u)&&l.push(d);return new Kn(o,this._parents)}function Bg(e){return new Array(e.length)}function r2(){return new Kn(this._enter||this._groups.map(Bg),this._parents)}function xu(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}xu.prototype={constructor:xu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function i2(e){return function(){return e}}function o2(e,n,r,o,s,u){for(var c=0,l,d=n.length,f=u.length;c<f;++c)(l=n[c])?(l.__data__=u[c],o[c]=l):r[c]=new xu(e,u[c]);for(;c<d;++c)(l=n[c])&&(s[c]=l)}function s2(e,n,r,o,s,u,c){var l,d,f=new Map,p=n.length,g=u.length,v=new Array(p),w;for(l=0;l<p;++l)(d=n[l])&&(v[l]=w=c.call(d,d.__data__,l,n)+"",f.has(w)?s[l]=d:f.set(w,d));for(l=0;l<g;++l)w=c.call(e,u[l],l,u)+"",(d=f.get(w))?(o[l]=d,d.__data__=u[l],f.delete(w)):r[l]=new xu(e,u[l]);for(l=0;l<p;++l)(d=n[l])&&f.get(v[l])===d&&(s[l]=d)}function a2(e){return e.__data__}function u2(e,n){if(!arguments.length)return Array.from(this,a2);var r=n?s2:o2,o=this._parents,s=this._groups;typeof e!="function"&&(e=i2(e));for(var u=s.length,c=new Array(u),l=new Array(u),d=new Array(u),f=0;f<u;++f){var p=o[f],g=s[f],v=g.length,w=l2(e.call(p,p&&p.__data__,f,o)),x=w.length,y=l[f]=new Array(x),_=c[f]=new Array(x),m=d[f]=new Array(v);r(p,g,y,_,m,w,n);for(var C=0,I=0,F,j;C<x;++C)if(F=y[C]){for(C>=I&&(I=C+1);!(j=_[I])&&++I<x;);F._next=j||null}}return c=new Kn(c,o),c._enter=l,c._exit=d,c}function l2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function c2(){return new Kn(this._exit||this._groups.map(Bg),this._parents)}function d2(e,n,r){var o=this.enter(),s=this,u=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?u.remove():r(u),o&&s?o.merge(s).order():s}function f2(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,u=o.length,c=Math.min(s,u),l=new Array(s),d=0;d<c;++d)for(var f=r[d],p=o[d],g=f.length,v=l[d]=new Array(g),w,x=0;x<g;++x)(w=f[x]||p[x])&&(v[x]=w);for(;d<s;++d)l[d]=r[d];return new Kn(l,this._parents)}function h2(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,u=o[s],c;--s>=0;)(c=o[s])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function p2(e){e||(e=g2);function n(g,v){return g&&v?e(g.__data__,v.__data__):!g-!v}for(var r=this._groups,o=r.length,s=new Array(o),u=0;u<o;++u){for(var c=r[u],l=c.length,d=s[u]=new Array(l),f,p=0;p<l;++p)(f=c[p])&&(d[p]=f);d.sort(n)}return new Kn(s,this._parents).order()}function g2(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function m2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function y2(){return Array.from(this)}function v2(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length;s<u;++s){var c=o[s];if(c)return c}return null}function D2(){let e=0;for(const n of this)++e;return e}function b2(){return!this.node()}function _2(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],u=0,c=s.length,l;u<c;++u)(l=s[u])&&e.call(l,l.__data__,u,s);return this}function w2(e){return function(){this.removeAttribute(e)}}function x2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function C2(e,n){return function(){this.setAttribute(e,n)}}function E2(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function S2(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function A2(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function F2(e,n){var r=ju(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?x2:w2:typeof n=="function"?r.local?A2:S2:r.local?E2:C2)(r,n))}function Og(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function N2(e){return function(){this.style.removeProperty(e)}}function T2(e,n,r){return function(){this.style.setProperty(e,n,r)}}function I2(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function R2(e,n,r){return arguments.length>1?this.each((n==null?N2:typeof n=="function"?I2:T2)(e,n,r??"")):as(this.node(),e)}function as(e,n){return e.style.getPropertyValue(n)||Og(e).getComputedStyle(e,null).getPropertyValue(n)}function B2(e){return function(){delete this[e]}}function O2(e,n){return function(){this[e]=n}}function M2(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function P2(e,n){return arguments.length>1?this.each((n==null?B2:typeof n=="function"?M2:O2)(e,n)):this.node()[e]}function Mg(e){return e.trim().split(/^|\s+/)}function cd(e){return e.classList||new Pg(e)}function Pg(e){this._node=e,this._names=Mg(e.getAttribute("class")||"")}Pg.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function zg(e,n){for(var r=cd(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function jg(e,n){for(var r=cd(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function z2(e){return function(){zg(this,e)}}function j2(e){return function(){jg(this,e)}}function k2(e,n){return function(){(n.apply(this,arguments)?zg:jg)(this,e)}}function $2(e,n){var r=Mg(e+"");if(arguments.length<2){for(var o=cd(this.node()),s=-1,u=r.length;++s<u;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?k2:n?z2:j2)(r,n))}function q2(){this.textContent=""}function L2(e){return function(){this.textContent=e}}function H2(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function G2(e){return arguments.length?this.each(e==null?q2:(typeof e=="function"?H2:L2)(e)):this.node().textContent}function V2(){this.innerHTML=""}function U2(e){return function(){this.innerHTML=e}}function W2(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function X2(e){return arguments.length?this.each(e==null?V2:(typeof e=="function"?W2:U2)(e)):this.node().innerHTML}function Y2(){this.nextSibling&&this.parentNode.appendChild(this)}function Z2(){return this.each(Y2)}function J2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function K2(){return this.each(J2)}function Q2(e){var n=typeof e=="function"?e:Ng(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function eE(){return null}function tE(e,n){var r=typeof e=="function"?e:Ng(e),o=n==null?eE:typeof n=="function"?n:ld(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function nE(){var e=this.parentNode;e&&e.removeChild(this)}function rE(){return this.each(nE)}function iE(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function oE(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function sE(e){return this.select(e?oE:iE)}function aE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function uE(e){return function(n){e.call(this,n,this.__data__)}}function lE(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function cE(e){return function(){var n=this.__on;if(n){for(var r=0,o=-1,s=n.length,u;r<s;++r)u=n[r],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):n[++o]=u;++o?n.length=o:delete this.__on}}}function dE(e,n,r){return function(){var o=this.__on,s,u=uE(n);if(o){for(var c=0,l=o.length;c<l;++c)if((s=o[c]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=u,s.options=r),s.value=n;return}}this.addEventListener(e.type,u,r),s={type:e.type,name:e.name,value:n,listener:u,options:r},o?o.push(s):this.__on=[s]}}function fE(e,n,r){var o=lE(e+""),s,u=o.length,c;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,f=l.length,p;d<f;++d)for(s=0,p=l[d];s<u;++s)if((c=o[s]).type===p.type&&c.name===p.name)return p.value}return}for(l=n?dE:cE,s=0;s<u;++s)this.each(l(o[s],n,r));return this}function kg(e,n,r){var o=Og(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function hE(e,n){return function(){return kg(this,e,n)}}function pE(e,n){return function(){return kg(this,e,n.apply(this,arguments))}}function gE(e,n){return this.each((typeof n=="function"?pE:hE)(e,n))}function*mE(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length,c;s<u;++s)(c=o[s])&&(yield c)}var $g=[null];function Kn(e,n){this._groups=e,this._parents=n}function aa(){return new Kn([[document.documentElement]],$g)}function yE(){return this}Kn.prototype=aa.prototype={constructor:Kn,select:HC,selectAll:WC,selectChild:JC,selectChildren:t2,filter:n2,data:u2,enter:r2,exit:c2,join:d2,merge:f2,selection:yE,order:h2,sort:p2,call:m2,nodes:y2,node:v2,size:D2,empty:b2,each:_2,attr:F2,style:R2,property:P2,classed:$2,text:G2,html:X2,raise:Z2,lower:K2,append:Q2,insert:tE,remove:rE,clone:sE,datum:aE,on:fE,dispatch:gE,[Symbol.iterator]:mE};function _r(e){return typeof e=="string"?new Kn([[document.querySelector(e)]],[document.documentElement]):new Kn([[e]],$g)}function vE(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Mr(e,n){if(e=vE(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const DE={passive:!1},Js={capture:!0,passive:!1};function Zl(e){e.stopImmediatePropagation()}function es(e){e.preventDefault(),e.stopImmediatePropagation()}function qg(e){var n=e.document.documentElement,r=_r(e).on("dragstart.drag",es,Js);"onselectstart"in n?r.on("selectstart.drag",es,Js):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Lg(e,n){var r=e.document.documentElement,o=_r(e).on("dragstart.drag",null);n&&(o.on("click.drag",es,Js),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Za=e=>()=>e;function Oc(e,{sourceEvent:n,subject:r,target:o,identifier:s,active:u,x:c,y:l,dx:d,dy:f,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:p}})}Oc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function bE(e){return!e.ctrlKey&&!e.button}function _E(){return this.parentNode}function wE(e,n){return n??{x:e.x,y:e.y}}function xE(){return navigator.maxTouchPoints||"ontouchstart"in this}function CE(){var e=bE,n=_E,r=wE,o=xE,s={},u=zu("start","drag","end"),c=0,l,d,f,p,g=0;function v(F){F.on("mousedown.drag",w).filter(o).on("touchstart.drag",_).on("touchmove.drag",m,DE).on("touchend.drag touchcancel.drag",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function w(F,j){if(!(p||!e.call(this,F,j))){var q=I(this,n.call(this,F,j),F,j,"mouse");q&&(_r(F.view).on("mousemove.drag",x,Js).on("mouseup.drag",y,Js),qg(F.view),Zl(F),f=!1,l=F.clientX,d=F.clientY,q("start",F))}}function x(F){if(es(F),!f){var j=F.clientX-l,q=F.clientY-d;f=j*j+q*q>g}s.mouse("drag",F)}function y(F){_r(F.view).on("mousemove.drag mouseup.drag",null),Lg(F.view,f),es(F),s.mouse("end",F)}function _(F,j){if(e.call(this,F,j)){var q=F.changedTouches,Y=n.call(this,F,j),ne=q.length,O,V;for(O=0;O<ne;++O)(V=I(this,Y,F,j,q[O].identifier,q[O]))&&(Zl(F),V("start",F,q[O]))}}function m(F){var j=F.changedTouches,q=j.length,Y,ne;for(Y=0;Y<q;++Y)(ne=s[j[Y].identifier])&&(es(F),ne("drag",F,j[Y]))}function C(F){var j=F.changedTouches,q=j.length,Y,ne;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),Y=0;Y<q;++Y)(ne=s[j[Y].identifier])&&(Zl(F),ne("end",F,j[Y]))}function I(F,j,q,Y,ne,O){var V=u.copy(),K=Mr(O||q,j),ee,Z,R;if((R=r.call(F,new Oc("beforestart",{sourceEvent:q,target:v,identifier:ne,active:c,x:K[0],y:K[1],dx:0,dy:0,dispatch:V}),Y))!=null)return ee=R.x-K[0]||0,Z=R.y-K[1]||0,function G(k,J,se){var U=K,re;switch(k){case"start":s[ne]=G,re=c++;break;case"end":delete s[ne],--c;case"drag":K=Mr(se||J,j),re=c;break}V.call(k,F,new Oc(k,{sourceEvent:J,subject:R,target:v,identifier:ne,active:re,x:K[0]+ee,y:K[1]+Z,dx:K[0]-U[0],dy:K[1]-U[1],dispatch:V}),Y)}}return v.filter=function(F){return arguments.length?(e=typeof F=="function"?F:Za(!!F),v):e},v.container=function(F){return arguments.length?(n=typeof F=="function"?F:Za(F),v):n},v.subject=function(F){return arguments.length?(r=typeof F=="function"?F:Za(F),v):r},v.touchable=function(F){return arguments.length?(o=typeof F=="function"?F:Za(!!F),v):o},v.on=function(){var F=u.on.apply(u,arguments);return F===u?v:F},v.clickDistance=function(F){return arguments.length?(g=(F=+F)*F,v):Math.sqrt(g)},v}function dd(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function Hg(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function ua(){}var Ks=.7,Cu=1/Ks,ts="\\s*([+-]?\\d+)\\s*",Qs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",EE=/^#([0-9a-f]{3,8})$/,SE=new RegExp(`^rgb\\(${ts},${ts},${ts}\\)$`),AE=new RegExp(`^rgb\\(${Pr},${Pr},${Pr}\\)$`),FE=new RegExp(`^rgba\\(${ts},${ts},${ts},${Qs}\\)$`),NE=new RegExp(`^rgba\\(${Pr},${Pr},${Pr},${Qs}\\)$`),TE=new RegExp(`^hsl\\(${Qs},${Pr},${Pr}\\)$`),IE=new RegExp(`^hsla\\(${Qs},${Pr},${Pr},${Qs}\\)$`),qh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};dd(ua,ea,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Lh,formatHex:Lh,formatHex8:RE,formatHsl:BE,formatRgb:Hh,toString:Hh});function Lh(){return this.rgb().formatHex()}function RE(){return this.rgb().formatHex8()}function BE(){return Gg(this).formatHsl()}function Hh(){return this.rgb().formatRgb()}function ea(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=EE.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Gh(n):r===3?new Ln(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Ja(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Ja(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=SE.exec(e))?new Ln(n[1],n[2],n[3],1):(n=AE.exec(e))?new Ln(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=FE.exec(e))?Ja(n[1],n[2],n[3],n[4]):(n=NE.exec(e))?Ja(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=TE.exec(e))?Wh(n[1],n[2]/100,n[3]/100,1):(n=IE.exec(e))?Wh(n[1],n[2]/100,n[3]/100,n[4]):qh.hasOwnProperty(e)?Gh(qh[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function Gh(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function Ja(e,n,r,o){return o<=0&&(e=n=r=NaN),new Ln(e,n,r,o)}function OE(e){return e instanceof ua||(e=ea(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function Mc(e,n,r,o){return arguments.length===1?OE(e):new Ln(e,n,r,o??1)}function Ln(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}dd(Ln,Mc,Hg(ua,{brighter(e){return e=e==null?Cu:Math.pow(Cu,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ks:Math.pow(Ks,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ln(mo(this.r),mo(this.g),mo(this.b),Eu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Vh,formatHex:Vh,formatHex8:ME,formatRgb:Uh,toString:Uh}));function Vh(){return`#${ho(this.r)}${ho(this.g)}${ho(this.b)}`}function ME(){return`#${ho(this.r)}${ho(this.g)}${ho(this.b)}${ho((isNaN(this.opacity)?1:this.opacity)*255)}`}function Uh(){const e=Eu(this.opacity);return`${e===1?"rgb(":"rgba("}${mo(this.r)}, ${mo(this.g)}, ${mo(this.b)}${e===1?")":`, ${e})`}`}function Eu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ho(e){return e=mo(e),(e<16?"0":"")+e.toString(16)}function Wh(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new wr(e,n,r,o)}function Gg(e){if(e instanceof wr)return new wr(e.h,e.s,e.l,e.opacity);if(e instanceof ua||(e=ea(e)),!e)return new wr;if(e instanceof wr)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),u=Math.max(n,r,o),c=NaN,l=u-s,d=(u+s)/2;return l?(n===u?c=(r-o)/l+(r<o)*6:r===u?c=(o-n)/l+2:c=(n-r)/l+4,l/=d<.5?u+s:2-u-s,c*=60):l=d>0&&d<1?0:c,new wr(c,l,d,e.opacity)}function PE(e,n,r,o){return arguments.length===1?Gg(e):new wr(e,n,r,o??1)}function wr(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}dd(wr,PE,Hg(ua,{brighter(e){return e=e==null?Cu:Math.pow(Cu,e),new wr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ks:Math.pow(Ks,e),new wr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new Ln(Jl(e>=240?e-240:e+120,s,o),Jl(e,s,o),Jl(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new wr(Xh(this.h),Ka(this.s),Ka(this.l),Eu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Eu(this.opacity);return`${e===1?"hsl(":"hsla("}${Xh(this.h)}, ${Ka(this.s)*100}%, ${Ka(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Xh(e){return e=(e||0)%360,e<0?e+360:e}function Ka(e){return Math.max(0,Math.min(1,e||0))}function Jl(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const Vg=e=>()=>e;function zE(e,n){return function(r){return e+r*n}}function jE(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function kE(e){return(e=+e)==1?Ug:function(n,r){return r-n?jE(n,r,e):Vg(isNaN(n)?r:n)}}function Ug(e,n){var r=n-e;return r?zE(e,r):Vg(isNaN(e)?n:e)}const Yh=function e(n){var r=kE(n);function o(s,u){var c=r((s=Mc(s)).r,(u=Mc(u)).r),l=r(s.g,u.g),d=r(s.b,u.b),f=Ug(s.opacity,u.opacity);return function(p){return s.r=c(p),s.g=l(p),s.b=d(p),s.opacity=f(p),s+""}}return o.gamma=e,o}(1);function Fi(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var Pc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kl=new RegExp(Pc.source,"g");function $E(e){return function(){return e}}function qE(e){return function(n){return e(n)+""}}function LE(e,n){var r=Pc.lastIndex=Kl.lastIndex=0,o,s,u,c=-1,l=[],d=[];for(e=e+"",n=n+"";(o=Pc.exec(e))&&(s=Kl.exec(n));)(u=s.index)>r&&(u=n.slice(r,u),l[c]?l[c]+=u:l[++c]=u),(o=o[0])===(s=s[0])?l[c]?l[c]+=s:l[++c]=s:(l[++c]=null,d.push({i:c,x:Fi(o,s)})),r=Kl.lastIndex;return r<n.length&&(u=n.slice(r),l[c]?l[c]+=u:l[++c]=u),l.length<2?d[0]?qE(d[0].x):$E(n):(n=d.length,function(f){for(var p=0,g;p<n;++p)l[(g=d[p]).i]=g.x(f);return l.join("")})}var Zh=180/Math.PI,zc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wg(e,n,r,o,s,u){var c,l,d;return(c=Math.sqrt(e*e+n*n))&&(e/=c,n/=c),(d=e*r+n*o)&&(r-=e*d,o-=n*d),(l=Math.sqrt(r*r+o*o))&&(r/=l,o/=l,d/=l),e*o<n*r&&(e=-e,n=-n,d=-d,c=-c),{translateX:s,translateY:u,rotate:Math.atan2(n,e)*Zh,skewX:Math.atan(d)*Zh,scaleX:c,scaleY:l}}var Qa;function HE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?zc:Wg(n.a,n.b,n.c,n.d,n.e,n.f)}function GE(e){return e==null||(Qa||(Qa=document.createElementNS("http://www.w3.org/2000/svg","g")),Qa.setAttribute("transform",e),!(e=Qa.transform.baseVal.consolidate()))?zc:(e=e.matrix,Wg(e.a,e.b,e.c,e.d,e.e,e.f))}function Xg(e,n,r,o){function s(f){return f.length?f.pop()+" ":""}function u(f,p,g,v,w,x){if(f!==g||p!==v){var y=w.push("translate(",null,n,null,r);x.push({i:y-4,x:Fi(f,g)},{i:y-2,x:Fi(p,v)})}else(g||v)&&w.push("translate("+g+n+v+r)}function c(f,p,g,v){f!==p?(f-p>180?p+=360:p-f>180&&(f+=360),v.push({i:g.push(s(g)+"rotate(",null,o)-2,x:Fi(f,p)})):p&&g.push(s(g)+"rotate("+p+o)}function l(f,p,g,v){f!==p?v.push({i:g.push(s(g)+"skewX(",null,o)-2,x:Fi(f,p)}):p&&g.push(s(g)+"skewX("+p+o)}function d(f,p,g,v,w,x){if(f!==g||p!==v){var y=w.push(s(w)+"scale(",null,",",null,")");x.push({i:y-4,x:Fi(f,g)},{i:y-2,x:Fi(p,v)})}else(g!==1||v!==1)&&w.push(s(w)+"scale("+g+","+v+")")}return function(f,p){var g=[],v=[];return f=e(f),p=e(p),u(f.translateX,f.translateY,p.translateX,p.translateY,g,v),c(f.rotate,p.rotate,g,v),l(f.skewX,p.skewX,g,v),d(f.scaleX,f.scaleY,p.scaleX,p.scaleY,g,v),f=p=null,function(w){for(var x=-1,y=v.length,_;++x<y;)g[(_=v[x]).i]=_.x(w);return g.join("")}}}var VE=Xg(HE,"px, ","px)","deg)"),UE=Xg(GE,", ",")",")"),WE=1e-12;function Jh(e){return((e=Math.exp(e))+1/e)/2}function XE(e){return((e=Math.exp(e))-1/e)/2}function YE(e){return((e=Math.exp(2*e))-1)/(e+1)}const ZE=function e(n,r,o){function s(u,c){var l=u[0],d=u[1],f=u[2],p=c[0],g=c[1],v=c[2],w=p-l,x=g-d,y=w*w+x*x,_,m;if(y<WE)m=Math.log(v/f)/n,_=function(Y){return[l+Y*w,d+Y*x,f*Math.exp(n*Y*m)]};else{var C=Math.sqrt(y),I=(v*v-f*f+o*y)/(2*f*r*C),F=(v*v-f*f-o*y)/(2*v*r*C),j=Math.log(Math.sqrt(I*I+1)-I),q=Math.log(Math.sqrt(F*F+1)-F);m=(q-j)/n,_=function(Y){var ne=Y*m,O=Jh(j),V=f/(r*C)*(O*YE(n*ne+j)-XE(j));return[l+V*w,d+V*x,f*O/Jh(n*ne+j)]}}return _.duration=m*1e3*n/Math.SQRT2,_}return s.rho=function(u){var c=Math.max(.001,+u),l=c*c,d=l*l;return e(c,l,d)},s}(Math.SQRT2,2,4);var us=0,qs=0,Bs=0,Yg=1e3,Su,Ls,Au=0,yo=0,ku=0,ta=typeof performance=="object"&&performance.now?performance:Date,Zg=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function fd(){return yo||(Zg(JE),yo=ta.now()+ku)}function JE(){yo=0}function Fu(){this._call=this._time=this._next=null}Fu.prototype=Jg.prototype={constructor:Fu,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?fd():+r)+(n==null?0:+n),!this._next&&Ls!==this&&(Ls?Ls._next=this:Su=this,Ls=this),this._call=e,this._time=r,jc()},stop:function(){this._call&&(this._call=null,this._time=1/0,jc())}};function Jg(e,n,r){var o=new Fu;return o.restart(e,n,r),o}function KE(){fd(),++us;for(var e=Su,n;e;)(n=yo-e._time)>=0&&e._call.call(void 0,n),e=e._next;--us}function Kh(){yo=(Au=ta.now())+ku,us=qs=0;try{KE()}finally{us=0,eS(),yo=0}}function QE(){var e=ta.now(),n=e-Au;n>Yg&&(ku-=n,Au=e)}function eS(){for(var e,n=Su,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Su=r);Ls=e,jc(o)}function jc(e){if(!us){qs&&(qs=clearTimeout(qs));var n=e-yo;n>24?(e<1/0&&(qs=setTimeout(Kh,e-ta.now()-ku)),Bs&&(Bs=clearInterval(Bs))):(Bs||(Au=ta.now(),Bs=setInterval(QE,Yg)),us=1,Zg(Kh))}}function Qh(e,n,r){var o=new Fu;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var tS=zu("start","end","cancel","interrupt"),nS=[],Kg=0,ep=1,kc=2,hu=3,tp=4,$c=5,pu=6;function $u(e,n,r,o,s,u){var c=e.__transition;if(!c)e.__transition={};else if(r in c)return;rS(e,r,{name:n,index:o,group:s,on:tS,tween:nS,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Kg})}function hd(e,n){var r=Ar(e,n);if(r.state>Kg)throw new Error("too late; already scheduled");return r}function zr(e,n){var r=Ar(e,n);if(r.state>hu)throw new Error("too late; already running");return r}function Ar(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function rS(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=Jg(u,0,r.time);function u(f){r.state=ep,r.timer.restart(c,r.delay,r.time),r.delay<=f&&c(f-r.delay)}function c(f){var p,g,v,w;if(r.state!==ep)return d();for(p in o)if(w=o[p],w.name===r.name){if(w.state===hu)return Qh(c);w.state===tp?(w.state=pu,w.timer.stop(),w.on.call("interrupt",e,e.__data__,w.index,w.group),delete o[p]):+p<n&&(w.state=pu,w.timer.stop(),w.on.call("cancel",e,e.__data__,w.index,w.group),delete o[p])}if(Qh(function(){r.state===hu&&(r.state=tp,r.timer.restart(l,r.delay,r.time),l(f))}),r.state=kc,r.on.call("start",e,e.__data__,r.index,r.group),r.state===kc){for(r.state=hu,s=new Array(v=r.tween.length),p=0,g=-1;p<v;++p)(w=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(s[++g]=w);s.length=g+1}}function l(f){for(var p=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(d),r.state=$c,1),g=-1,v=s.length;++g<v;)s[g].call(e,p);r.state===$c&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=pu,r.timer.stop(),delete o[n];for(var f in o)return;delete e.__transition}}function gu(e,n){var r=e.__transition,o,s,u=!0,c;if(r){n=n==null?null:n+"";for(c in r){if((o=r[c]).name!==n){u=!1;continue}s=o.state>kc&&o.state<$c,o.state=pu,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[c]}u&&delete e.__transition}}function iS(e){return this.each(function(){gu(this,e)})}function oS(e,n){var r,o;return function(){var s=zr(this,e),u=s.tween;if(u!==r){o=r=u;for(var c=0,l=o.length;c<l;++c)if(o[c].name===n){o=o.slice(),o.splice(c,1);break}}s.tween=o}}function sS(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var u=zr(this,e),c=u.tween;if(c!==o){s=(o=c).slice();for(var l={name:n,value:r},d=0,f=s.length;d<f;++d)if(s[d].name===n){s[d]=l;break}d===f&&s.push(l)}u.tween=s}}function aS(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=Ar(this.node(),r).tween,s=0,u=o.length,c;s<u;++s)if((c=o[s]).name===e)return c.value;return null}return this.each((n==null?oS:sS)(r,e,n))}function pd(e,n,r){var o=e._id;return e.each(function(){var s=zr(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Ar(s,o).value[n]}}function Qg(e,n){var r;return(typeof n=="number"?Fi:n instanceof ea?Yh:(r=ea(n))?(n=r,Yh):LE)(e,n)}function uS(e){return function(){this.removeAttribute(e)}}function lS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cS(e,n,r){var o,s=r+"",u;return function(){var c=this.getAttribute(e);return c===s?null:c===o?u:u=n(o=c,r)}}function dS(e,n,r){var o,s=r+"",u;return function(){var c=this.getAttributeNS(e.space,e.local);return c===s?null:c===o?u:u=n(o=c,r)}}function fS(e,n,r){var o,s,u;return function(){var c,l=r(this),d;return l==null?void this.removeAttribute(e):(c=this.getAttribute(e),d=l+"",c===d?null:c===o&&d===s?u:(s=d,u=n(o=c,l)))}}function hS(e,n,r){var o,s,u;return function(){var c,l=r(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),d=l+"",c===d?null:c===o&&d===s?u:(s=d,u=n(o=c,l)))}}function pS(e,n){var r=ju(e),o=r==="transform"?UE:Qg;return this.attrTween(e,typeof n=="function"?(r.local?hS:fS)(r,o,pd(this,"attr."+e,n)):n==null?(r.local?lS:uS)(r):(r.local?dS:cS)(r,o,n))}function gS(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function mS(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function yS(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&mS(e,u)),r}return s._value=n,s}function vS(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&gS(e,u)),r}return s._value=n,s}function DS(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=ju(e);return this.tween(r,(o.local?yS:vS)(o,n))}function bS(e,n){return function(){hd(this,e).delay=+n.apply(this,arguments)}}function _S(e,n){return n=+n,function(){hd(this,e).delay=n}}function wS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?bS:_S)(n,e)):Ar(this.node(),n).delay}function xS(e,n){return function(){zr(this,e).duration=+n.apply(this,arguments)}}function CS(e,n){return n=+n,function(){zr(this,e).duration=n}}function ES(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?xS:CS)(n,e)):Ar(this.node(),n).duration}function SS(e,n){if(typeof n!="function")throw new Error;return function(){zr(this,e).ease=n}}function AS(e){var n=this._id;return arguments.length?this.each(SS(n,e)):Ar(this.node(),n).ease}function FS(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;zr(this,e).ease=r}}function NS(e){if(typeof e!="function")throw new Error;return this.each(FS(this._id,e))}function TS(e){typeof e!="function"&&(e=Ig(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],c=u.length,l=o[s]=[],d,f=0;f<c;++f)(d=u[f])&&e.call(d,d.__data__,f,u)&&l.push(d);return new li(o,this._parents,this._name,this._id)}function IS(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,u=Math.min(o,s),c=new Array(o),l=0;l<u;++l)for(var d=n[l],f=r[l],p=d.length,g=c[l]=new Array(p),v,w=0;w<p;++w)(v=d[w]||f[w])&&(g[w]=v);for(;l<o;++l)c[l]=n[l];return new li(c,this._parents,this._name,this._id)}function RS(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function BS(e,n,r){var o,s,u=RS(n)?hd:zr;return function(){var c=u(this,e),l=c.on;l!==o&&(s=(o=l).copy()).on(n,r),c.on=s}}function OS(e,n){var r=this._id;return arguments.length<2?Ar(this.node(),r).on.on(e):this.each(BS(r,e,n))}function MS(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function PS(){return this.on("end.remove",MS(this._id))}function zS(e){var n=this._name,r=this._id;typeof e!="function"&&(e=ld(e));for(var o=this._groups,s=o.length,u=new Array(s),c=0;c<s;++c)for(var l=o[c],d=l.length,f=u[c]=new Array(d),p,g,v=0;v<d;++v)(p=l[v])&&(g=e.call(p,p.__data__,v,l))&&("__data__"in p&&(g.__data__=p.__data__),f[v]=g,$u(f[v],n,r,v,f,Ar(p,r)));return new li(u,this._parents,n,r)}function jS(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Tg(e));for(var o=this._groups,s=o.length,u=[],c=[],l=0;l<s;++l)for(var d=o[l],f=d.length,p,g=0;g<f;++g)if(p=d[g]){for(var v=e.call(p,p.__data__,g,d),w,x=Ar(p,r),y=0,_=v.length;y<_;++y)(w=v[y])&&$u(w,n,r,y,v,x);u.push(v),c.push(p)}return new li(u,c,n,r)}var kS=aa.prototype.constructor;function $S(){return new kS(this._groups,this._parents)}function qS(e,n){var r,o,s;return function(){var u=as(this,e),c=(this.style.removeProperty(e),as(this,e));return u===c?null:u===r&&c===o?s:s=n(r=u,o=c)}}function e0(e){return function(){this.style.removeProperty(e)}}function LS(e,n,r){var o,s=r+"",u;return function(){var c=as(this,e);return c===s?null:c===o?u:u=n(o=c,r)}}function HS(e,n,r){var o,s,u;return function(){var c=as(this,e),l=r(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),as(this,e))),c===d?null:c===o&&d===s?u:(s=d,u=n(o=c,l))}}function GS(e,n){var r,o,s,u="style."+n,c="end."+u,l;return function(){var d=zr(this,e),f=d.on,p=d.value[u]==null?l||(l=e0(n)):void 0;(f!==r||s!==p)&&(o=(r=f).copy()).on(c,s=p),d.on=o}}function VS(e,n,r){var o=(e+="")=="transform"?VE:Qg;return n==null?this.styleTween(e,qS(e,o)).on("end.style."+e,e0(e)):typeof n=="function"?this.styleTween(e,HS(e,o,pd(this,"style."+e,n))).each(GS(this._id,e)):this.styleTween(e,LS(e,o,n),r).on("end.style."+e,null)}function US(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function WS(e,n,r){var o,s;function u(){var c=n.apply(this,arguments);return c!==s&&(o=(s=c)&&US(e,c,r)),o}return u._value=n,u}function XS(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,WS(e,n,r??""))}function YS(e){return function(){this.textContent=e}}function ZS(e){return function(){var n=e(this);this.textContent=n??""}}function JS(e){return this.tween("text",typeof e=="function"?ZS(pd(this,"text",e)):YS(e==null?"":e+""))}function KS(e){return function(n){this.textContent=e.call(this,n)}}function QS(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&KS(s)),n}return o._value=e,o}function eA(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,QS(e))}function tA(){for(var e=this._name,n=this._id,r=t0(),o=this._groups,s=o.length,u=0;u<s;++u)for(var c=o[u],l=c.length,d,f=0;f<l;++f)if(d=c[f]){var p=Ar(d,n);$u(d,e,r,f,c,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new li(o,this._parents,e,r)}function nA(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(u,c){var l={value:c},d={value:function(){--s===0&&u()}};r.each(function(){var f=zr(this,o),p=f.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(d)),f.on=n}),s===0&&u()})}var rA=0;function li(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function t0(){return++rA}var ri=aa.prototype;li.prototype={constructor:li,select:zS,selectAll:jS,selectChild:ri.selectChild,selectChildren:ri.selectChildren,filter:TS,merge:IS,selection:$S,transition:tA,call:ri.call,nodes:ri.nodes,node:ri.node,size:ri.size,empty:ri.empty,each:ri.each,on:OS,attr:pS,attrTween:DS,style:VS,styleTween:XS,text:JS,textTween:eA,remove:PS,tween:aS,delay:wS,duration:ES,ease:AS,easeVarying:NS,end:nA,[Symbol.iterator]:ri[Symbol.iterator]};function iA(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oA={time:null,delay:0,duration:250,ease:iA};function sA(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function aA(e){var n,r;e instanceof li?(n=e._id,e=e._name):(n=t0(),(r=oA).time=fd(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,u=0;u<s;++u)for(var c=o[u],l=c.length,d,f=0;f<l;++f)(d=c[f])&&$u(d,e,n,f,c,r||sA(d,n));return new li(o,this._parents,e,n)}aa.prototype.interrupt=iS;aa.prototype.transition=aA;const eu=e=>()=>e;function uA(e,{sourceEvent:n,target:r,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function ai(e,n,r){this.k=e,this.x=n,this.y=r}ai.prototype={constructor:ai,scale:function(e){return e===1?this:new ai(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new ai(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ri=new ai(1,0,0);ai.prototype;function Ql(e){e.stopImmediatePropagation()}function Os(e){e.preventDefault(),e.stopImmediatePropagation()}function lA(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cA(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function np(){return this.__zoom||Ri}function dA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function fA(){return navigator.maxTouchPoints||"ontouchstart"in this}function hA(e,n,r){var o=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],u=e.invertY(n[0][1])-r[0][1],c=e.invertY(n[1][1])-r[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function pA(){var e=lA,n=cA,r=hA,o=dA,s=fA,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],l=250,d=ZE,f=zu("start","zoom","end"),p,g,v,w=500,x=150,y=0,_=10;function m(R){R.property("__zoom",np).on("wheel.zoom",ne,{passive:!1}).on("mousedown.zoom",O).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",K).on("touchmove.zoom",ee).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(R,G,k,J){var se=R.selection?R.selection():R;se.property("__zoom",np),R!==se?j(R,G,k,J):se.interrupt().each(function(){q(this,arguments).event(J).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},m.scaleBy=function(R,G,k,J){m.scaleTo(R,function(){var se=this.__zoom.k,U=typeof G=="function"?G.apply(this,arguments):G;return se*U},k,J)},m.scaleTo=function(R,G,k,J){m.transform(R,function(){var se=n.apply(this,arguments),U=this.__zoom,re=k==null?F(se):typeof k=="function"?k.apply(this,arguments):k,ue=U.invert(re),de=typeof G=="function"?G.apply(this,arguments):G;return r(I(C(U,de),re,ue),se,c)},k,J)},m.translateBy=function(R,G,k,J){m.transform(R,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof k=="function"?k.apply(this,arguments):k),n.apply(this,arguments),c)},null,J)},m.translateTo=function(R,G,k,J,se){m.transform(R,function(){var U=n.apply(this,arguments),re=this.__zoom,ue=J==null?F(U):typeof J=="function"?J.apply(this,arguments):J;return r(Ri.translate(ue[0],ue[1]).scale(re.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof k=="function"?-k.apply(this,arguments):-k),U,c)},J,se)};function C(R,G){return G=Math.max(u[0],Math.min(u[1],G)),G===R.k?R:new ai(G,R.x,R.y)}function I(R,G,k){var J=G[0]-k[0]*R.k,se=G[1]-k[1]*R.k;return J===R.x&&se===R.y?R:new ai(R.k,J,se)}function F(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function j(R,G,k,J){R.on("start.zoom",function(){q(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){q(this,arguments).event(J).end()}).tween("zoom",function(){var se=this,U=arguments,re=q(se,U).event(J),ue=n.apply(se,U),de=k==null?F(ue):typeof k=="function"?k.apply(se,U):k,ce=Math.max(ue[1][0]-ue[0][0],ue[1][1]-ue[0][1]),ve=se.__zoom,ge=typeof G=="function"?G.apply(se,U):G,Ee=d(ve.invert(de).concat(ce/ve.k),ge.invert(de).concat(ce/ge.k));return function(Oe){if(Oe===1)Oe=ge;else{var De=Ee(Oe),Se=ce/De[2];Oe=new ai(Se,de[0]-De[0]*Se,de[1]-De[1]*Se)}re.zoom(null,Oe)}})}function q(R,G,k){return!k&&R.__zooming||new Y(R,G)}function Y(R,G){this.that=R,this.args=G,this.active=0,this.sourceEvent=null,this.extent=n.apply(R,G),this.taps=0}Y.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,G){return this.mouse&&R!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var G=_r(this.that).datum();f.call(R,this.that,new uA(R,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:f}),G)}};function ne(R,...G){if(!e.apply(this,arguments))return;var k=q(this,G).event(R),J=this.__zoom,se=Math.max(u[0],Math.min(u[1],J.k*Math.pow(2,o.apply(this,arguments)))),U=Mr(R);if(k.wheel)(k.mouse[0][0]!==U[0]||k.mouse[0][1]!==U[1])&&(k.mouse[1]=J.invert(k.mouse[0]=U)),clearTimeout(k.wheel);else{if(J.k===se)return;k.mouse=[U,J.invert(U)],gu(this),k.start()}Os(R),k.wheel=setTimeout(re,x),k.zoom("mouse",r(I(C(J,se),k.mouse[0],k.mouse[1]),k.extent,c));function re(){k.wheel=null,k.end()}}function O(R,...G){if(v||!e.apply(this,arguments))return;var k=R.currentTarget,J=q(this,G,!0).event(R),se=_r(R.view).on("mousemove.zoom",de,!0).on("mouseup.zoom",ce,!0),U=Mr(R,k),re=R.clientX,ue=R.clientY;qg(R.view),Ql(R),J.mouse=[U,this.__zoom.invert(U)],gu(this),J.start();function de(ve){if(Os(ve),!J.moved){var ge=ve.clientX-re,Ee=ve.clientY-ue;J.moved=ge*ge+Ee*Ee>y}J.event(ve).zoom("mouse",r(I(J.that.__zoom,J.mouse[0]=Mr(ve,k),J.mouse[1]),J.extent,c))}function ce(ve){se.on("mousemove.zoom mouseup.zoom",null),Lg(ve.view,J.moved),Os(ve),J.event(ve).end()}}function V(R,...G){if(e.apply(this,arguments)){var k=this.__zoom,J=Mr(R.changedTouches?R.changedTouches[0]:R,this),se=k.invert(J),U=k.k*(R.shiftKey?.5:2),re=r(I(C(k,U),J,se),n.apply(this,G),c);Os(R),l>0?_r(this).transition().duration(l).call(j,re,J,R):_r(this).call(m.transform,re,J,R)}}function K(R,...G){if(e.apply(this,arguments)){var k=R.touches,J=k.length,se=q(this,G,R.changedTouches.length===J).event(R),U,re,ue,de;for(Ql(R),re=0;re<J;++re)ue=k[re],de=Mr(ue,this),de=[de,this.__zoom.invert(de),ue.identifier],se.touch0?!se.touch1&&se.touch0[2]!==de[2]&&(se.touch1=de,se.taps=0):(se.touch0=de,U=!0,se.taps=1+!!p);p&&(p=clearTimeout(p)),U&&(se.taps<2&&(g=de[0],p=setTimeout(function(){p=null},w)),gu(this),se.start())}}function ee(R,...G){if(this.__zooming){var k=q(this,G).event(R),J=R.changedTouches,se=J.length,U,re,ue,de;for(Os(R),U=0;U<se;++U)re=J[U],ue=Mr(re,this),k.touch0&&k.touch0[2]===re.identifier?k.touch0[0]=ue:k.touch1&&k.touch1[2]===re.identifier&&(k.touch1[0]=ue);if(re=k.that.__zoom,k.touch1){var ce=k.touch0[0],ve=k.touch0[1],ge=k.touch1[0],Ee=k.touch1[1],Oe=(Oe=ge[0]-ce[0])*Oe+(Oe=ge[1]-ce[1])*Oe,De=(De=Ee[0]-ve[0])*De+(De=Ee[1]-ve[1])*De;re=C(re,Math.sqrt(Oe/De)),ue=[(ce[0]+ge[0])/2,(ce[1]+ge[1])/2],de=[(ve[0]+Ee[0])/2,(ve[1]+Ee[1])/2]}else if(k.touch0)ue=k.touch0[0],de=k.touch0[1];else return;k.zoom("touch",r(I(re,ue,de),k.extent,c))}}function Z(R,...G){if(this.__zooming){var k=q(this,G).event(R),J=R.changedTouches,se=J.length,U,re;for(Ql(R),v&&clearTimeout(v),v=setTimeout(function(){v=null},w),U=0;U<se;++U)re=J[U],k.touch0&&k.touch0[2]===re.identifier?delete k.touch0:k.touch1&&k.touch1[2]===re.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(re=Mr(re,this),Math.hypot(g[0]-re[0],g[1]-re[1])<_)){var ue=_r(this).on("dblclick.zoom");ue&&ue.apply(this,arguments)}}}return m.wheelDelta=function(R){return arguments.length?(o=typeof R=="function"?R:eu(+R),m):o},m.filter=function(R){return arguments.length?(e=typeof R=="function"?R:eu(!!R),m):e},m.touchable=function(R){return arguments.length?(s=typeof R=="function"?R:eu(!!R),m):s},m.extent=function(R){return arguments.length?(n=typeof R=="function"?R:eu([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),m):n},m.scaleExtent=function(R){return arguments.length?(u[0]=+R[0],u[1]=+R[1],m):[u[0],u[1]]},m.translateExtent=function(R){return arguments.length?(c[0][0]=+R[0][0],c[1][0]=+R[1][0],c[0][1]=+R[0][1],c[1][1]=+R[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(R){return arguments.length?(r=R,m):r},m.duration=function(R){return arguments.length?(l=+R,m):l},m.interpolate=function(R){return arguments.length?(d=R,m):d},m.on=function(){var R=f.on.apply(f,arguments);return R===f?m:R},m.clickDistance=function(R){return arguments.length?(y=(R=+R)*R,m):Math.sqrt(y)},m.tapDistance=function(R){return arguments.length?(_=+R,m):_},m}const qu=T.createContext(null),gA=qu.Provider,ci={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,n)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?n.targetHandle:n.sourceHandle}", edge id: ${n.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},n0=ci.error001();function It(e,n){const r=T.useContext(qu);if(r===null)throw new Error(n0);return Fg(r,e,n)}const fn=()=>{const e=T.useContext(qu);if(e===null)throw new Error(n0);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},mA=e=>e.userSelectionActive?"none":"all";function r0({position:e,children:n,className:r,style:o,...s}){const u=It(mA),c=`${e}`.split("-");return W.createElement("div",{className:In(["react-flow__panel",r,...c]),style:{...o,pointerEvents:u},...s},n)}function yA({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:W.createElement(r0,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},W.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const vA=({x:e,y:n,label:r,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:l=2,children:d,className:f,...p})=>{const g=T.useRef(null),[v,w]=T.useState({x:0,y:0,width:0,height:0}),x=In(["react-flow__edge-textwrapper",f]);return T.useEffect(()=>{if(g.current){const y=g.current.getBBox();w({x:y.x,y:y.y,width:y.width,height:y.height})}},[r]),typeof r>"u"||!r?null:W.createElement("g",{transform:`translate(${e-v.width/2} ${n-v.height/2})`,className:x,visibility:v.width?"visible":"hidden",...p},s&&W.createElement("rect",{width:v.width+2*c[0],x:-c[0],y:-c[1],height:v.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:l,ry:l}),W.createElement("text",{className:"react-flow__edge-text",y:v.height/2,dy:"0.3em",ref:g,style:o},r),d)};var DA=T.memo(vA);const gd=e=>({width:e.offsetWidth,height:e.offsetHeight}),ls=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),md=(e={x:0,y:0},n)=>({x:ls(e.x,n[0][0],n[1][0]),y:ls(e.y,n[0][1],n[1][1])}),rp=(e,n,r)=>e<n?ls(Math.abs(e-n),1,50)/50:e>r?-ls(Math.abs(e-r),1,50)/50:0,i0=(e,n)=>{const r=rp(e.x,35,n.width-35)*20,o=rp(e.y,35,n.height-35)*20;return[r,o]},o0=e=>e.getRootNode?.()||window?.document,bA=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),yd=({x:e,y:n,width:r,height:o})=>({x:e,y:n,x2:e+r,y2:n+o}),_A=({x:e,y:n,x2:r,y2:o})=>({x:e,y:n,width:r-e,height:o-n}),ip=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),qc=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*o)},wA=e=>dr(e.width)&&dr(e.height)&&dr(e.x)&&dr(e.y),dr=e=>!isNaN(e)&&isFinite(e),jt=Symbol.for("internals"),s0=["Enter"," ","Escape"],xA=(e,n)=>{},CA=e=>"nativeEvent"in e;function Lc(e){const r=(CA(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r?.nodeName)||r?.hasAttribute("contenteditable")||!!r?.closest(".nokey")}const a0=e=>"clientX"in e,Bi=(e,n)=>{const r=a0(e),o=r?e.clientX:e.touches?.[0].clientX,s=r?e.clientY:e.touches?.[0].clientY;return{x:o-(n?.left??0),y:s-(n?.top??0)}},Nu=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,ds=({id:e,path:n,labelX:r,labelY:o,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:v,interactionWidth:w=20})=>W.createElement(W.Fragment,null,W.createElement("path",{id:e,style:p,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:v}),w&&W.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:w,className:"react-flow__edge-interaction"}),s&&dr(r)&&dr(o)?W.createElement(DA,{x:r,y:o,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f}):null);ds.displayName="BaseEdge";function Ms(e,n,r){return r===void 0?r:o=>{const s=n().edges.find(u=>u.id===e);s&&r(o,{...s})}}function u0({sourceX:e,sourceY:n,targetX:r,targetY:o}){const s=Math.abs(r-e)/2,u=r<e?r+s:r-s,c=Math.abs(o-n)/2,l=o<n?o+c:o-c;return[u,l,s,c]}function l0({sourceX:e,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:l}){const d=e*.125+s*.375+c*.375+r*.125,f=n*.125+u*.375+l*.375+o*.125,p=Math.abs(d-e),g=Math.abs(f-n);return[d,f,p,g]}var vo;(function(e){e.Strict="strict",e.Loose="loose"})(vo||(vo={}));var po;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(po||(po={}));var cs;(function(e){e.Partial="partial",e.Full="full"})(cs||(cs={}));var Ti;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ti||(Ti={}));var na;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(na||(na={}));var Ce;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ce||(Ce={}));function op({pos:e,x1:n,y1:r,x2:o,y2:s}){return e===Ce.Left||e===Ce.Right?[.5*(n+o),r]:[n,.5*(r+s)]}function c0({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top}){const[c,l]=op({pos:r,x1:e,y1:n,x2:o,y2:s}),[d,f]=op({pos:u,x1:o,y1:s,x2:e,y2:n}),[p,g,v,w]=l0({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:c,sourceControlY:l,targetControlX:d,targetControlY:f});return[`M${e},${n} C${c},${l} ${d},${f} ${o},${s}`,p,g,v,w]}const vd=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=Ce.Bottom,targetPosition:u=Ce.Top,label:c,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:v,markerEnd:w,markerStart:x,interactionWidth:y})=>{const[_,m,C]=c0({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:u});return W.createElement(ds,{path:_,labelX:m,labelY:C,label:c,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:v,markerEnd:w,markerStart:x,interactionWidth:y})});vd.displayName="SimpleBezierEdge";const sp={[Ce.Left]:{x:-1,y:0},[Ce.Right]:{x:1,y:0},[Ce.Top]:{x:0,y:-1},[Ce.Bottom]:{x:0,y:1}},EA=({source:e,sourcePosition:n=Ce.Bottom,target:r})=>n===Ce.Left||n===Ce.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},ap=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function SA({source:e,sourcePosition:n=Ce.Bottom,target:r,targetPosition:o=Ce.Top,center:s,offset:u}){const c=sp[n],l=sp[o],d={x:e.x+c.x*u,y:e.y+c.y*u},f={x:r.x+l.x*u,y:r.y+l.y*u},p=EA({source:d,sourcePosition:n,target:f}),g=p.x!==0?"x":"y",v=p[g];let w=[],x,y;const _={x:0,y:0},m={x:0,y:0},[C,I,F,j]=u0({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(c[g]*l[g]===-1){x=s.x??C,y=s.y??I;const Y=[{x,y:d.y},{x,y:f.y}],ne=[{x:d.x,y},{x:f.x,y}];c[g]===v?w=g==="x"?Y:ne:w=g==="x"?ne:Y}else{const Y=[{x:d.x,y:f.y}],ne=[{x:f.x,y:d.y}];if(g==="x"?w=c.x===v?ne:Y:w=c.y===v?Y:ne,n===o){const Z=Math.abs(e[g]-r[g]);if(Z<=u){const R=Math.min(u-1,u-Z);c[g]===v?_[g]=(d[g]>e[g]?-1:1)*R:m[g]=(f[g]>r[g]?-1:1)*R}}if(n!==o){const Z=g==="x"?"y":"x",R=c[g]===l[Z],G=d[Z]>f[Z],k=d[Z]<f[Z];(c[g]===1&&(!R&&G||R&&k)||c[g]!==1&&(!R&&k||R&&G))&&(w=g==="x"?Y:ne)}const O={x:d.x+_.x,y:d.y+_.y},V={x:f.x+m.x,y:f.y+m.y},K=Math.max(Math.abs(O.x-w[0].x),Math.abs(V.x-w[0].x)),ee=Math.max(Math.abs(O.y-w[0].y),Math.abs(V.y-w[0].y));K>=ee?(x=(O.x+V.x)/2,y=w[0].y):(x=w[0].x,y=(O.y+V.y)/2)}return[[e,{x:d.x+_.x,y:d.y+_.y},...w,{x:f.x+m.x,y:f.y+m.y},r],x,y,F,j]}function AA(e,n,r,o){const s=Math.min(ap(e,n)/2,ap(n,r)/2,o),{x:u,y:c}=n;if(e.x===u&&u===r.x||e.y===c&&c===r.y)return`L${u} ${c}`;if(e.y===c){const f=e.x<r.x?-1:1,p=e.y<r.y?1:-1;return`L ${u+s*f},${c}Q ${u},${c} ${u},${c+s*p}`}const l=e.x<r.x?1:-1,d=e.y<r.y?-1:1;return`L ${u},${c+s*d}Q ${u},${c} ${u+s*l},${c}`}function Hc({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top,borderRadius:c=5,centerX:l,centerY:d,offset:f=20}){const[p,g,v,w,x]=SA({source:{x:e,y:n},sourcePosition:r,target:{x:o,y:s},targetPosition:u,center:{x:l,y:d},offset:f});return[p.reduce((_,m,C)=>{let I="";return C>0&&C<p.length-1?I=AA(p[C-1],m,p[C+1],c):I=`${C===0?"M":"L"}${m.x} ${m.y}`,_+=I,_},""),g,v,w,x]}const Lu=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,sourcePosition:g=Ce.Bottom,targetPosition:v=Ce.Top,markerEnd:w,markerStart:x,pathOptions:y,interactionWidth:_})=>{const[m,C,I]=Hc({sourceX:e,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:v,borderRadius:y?.borderRadius,offset:y?.offset});return W.createElement(ds,{path:m,labelX:C,labelY:I,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:w,markerStart:x,interactionWidth:_})});Lu.displayName="SmoothStepEdge";const Dd=T.memo(e=>W.createElement(Lu,{...e,pathOptions:T.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Dd.displayName="StepEdge";function FA({sourceX:e,sourceY:n,targetX:r,targetY:o}){const[s,u,c,l]=u0({sourceX:e,sourceY:n,targetX:r,targetY:o});return[`M ${e},${n}L ${r},${o}`,s,u,c,l]}const bd=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:v,interactionWidth:w})=>{const[x,y,_]=FA({sourceX:e,sourceY:n,targetX:r,targetY:o});return W.createElement(ds,{path:x,labelX:y,labelY:_,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:g,markerStart:v,interactionWidth:w})});bd.displayName="StraightEdge";function tu(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function up({pos:e,x1:n,y1:r,x2:o,y2:s,c:u}){switch(e){case Ce.Left:return[n-tu(n-o,u),r];case Ce.Right:return[n+tu(o-n,u),r];case Ce.Top:return[n,r-tu(r-s,u)];case Ce.Bottom:return[n,r+tu(s-r,u)]}}function _d({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top,curvature:c=.25}){const[l,d]=up({pos:r,x1:e,y1:n,x2:o,y2:s,c}),[f,p]=up({pos:u,x1:o,y1:s,x2:e,y2:n,c}),[g,v,w,x]=l0({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:d,targetControlX:f,targetControlY:p});return[`M${e},${n} C${l},${d} ${f},${p} ${o},${s}`,g,v,w,x]}const Tu=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=Ce.Bottom,targetPosition:u=Ce.Top,label:c,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:v,markerEnd:w,markerStart:x,pathOptions:y,interactionWidth:_})=>{const[m,C,I]=_d({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:u,curvature:y?.curvature});return W.createElement(ds,{path:m,labelX:C,labelY:I,label:c,labelStyle:l,labelShowBg:d,labelBgStyle:f,labelBgPadding:p,labelBgBorderRadius:g,style:v,markerEnd:w,markerStart:x,interactionWidth:_})});Tu.displayName="BezierEdge";const wd=T.createContext(null),NA=wd.Provider;wd.Consumer;const TA=()=>T.useContext(wd),IA=e=>"id"in e&&"source"in e&&"target"in e,d0=e=>"id"in e&&!("source"in e)&&!("target"in e),Iu=(e,n,r)=>{if(!d0(e))return[];const o=r.filter(s=>s.source===e.id).map(s=>s.target);return n.filter(s=>o.includes(s.id))},RA=(e,n,r)=>{if(!d0(e))return[];const o=r.filter(s=>s.target===e.id).map(s=>s.source);return n.filter(s=>o.includes(s.id))},BA=({source:e,sourceHandle:n,target:r,targetHandle:o})=>`reactflow__edge-${e}${n||""}-${r}${o||""}`,Gc=(e,n)=>typeof e>"u"?"":typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,OA=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),MA=(e,n)=>{if(!e.source||!e.target)return n;let r;return IA(e)?r={...e}:r={...e,id:BA(e)},OA(r,n)?n:n.concat(r)},Vc=({x:e,y:n},[r,o,s],u,[c,l])=>{const d={x:(e-r)/s,y:(n-o)/s};return u?{x:c*Math.round(d.x/c),y:l*Math.round(d.y/l)}:d},f0=({x:e,y:n},[r,o,s])=>({x:e*s+r,y:n*s+o}),ns=(e,n=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*n[0],o=(e.height??0)*n[1],s={x:e.position.x-r,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-o}:s}},xd=(e,n=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,s)=>{const{x:u,y:c}=ns(s,n).positionAbsolute;return bA(o,yd({x:u,y:c,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return _A(r)},h0=(e,n,[r,o,s]=[0,0,1],u=!1,c=!1,l=[0,0])=>{const d={x:(n.x-r)/s,y:(n.y-o)/s,width:n.width/s,height:n.height/s},f=[];return e.forEach(p=>{const{width:g,height:v,selectable:w=!0,hidden:x=!1}=p;if(c&&!w||x)return!1;const{positionAbsolute:y}=ns(p,l),_={x:y.x,y:y.y,width:g||0,height:v||0},m=qc(d,_),C=typeof g>"u"||typeof v>"u"||g===null||v===null,I=u&&m>0,F=(g||0)*(v||0);(C||I||m>=F||p.dragging)&&f.push(p)}),f},p0=(e,n)=>{const r=e.map(o=>o.id);return n.filter(o=>r.includes(o.source)||r.includes(o.target))},g0=(e,n,r,o,s,u=.1)=>{const c=n/(e.width*(1+u)),l=r/(e.height*(1+u)),d=Math.min(c,l),f=ls(d,o,s),p=e.x+e.width/2,g=e.y+e.height/2,v=n/2-p*f,w=r/2-g*f;return{x:v,y:w,zoom:f}},fo=(e,n=0)=>e.transition().duration(n);function lp(e,n,r,o){return(n[r]||[]).reduce((s,u)=>(`${e.id}-${u.id}-${r}`!==o&&s.push({id:u.id||null,type:r,nodeId:e.id,x:(e.positionAbsolute?.x??0)+u.x+u.width/2,y:(e.positionAbsolute?.y??0)+u.y+u.height/2}),s),[])}function PA(e,n,r,o,s,u){const{x:c,y:l}=Bi(e),f=n.elementsFromPoint(c,l).find(x=>x.classList.contains("react-flow__handle"));if(f){const x=f.getAttribute("data-nodeid");if(x){const y=Cd(void 0,f),_=f.getAttribute("data-handleid"),m=u({nodeId:x,id:_,type:y});if(m){const C=s.find(I=>I.nodeId===x&&I.type===y&&I.id===_);return{handle:{id:_,type:y,nodeId:x,x:C?.x||r.x,y:C?.y||r.y},validHandleResult:m}}}}let p=[],g=1/0;if(s.forEach(x=>{const y=Math.sqrt((x.x-r.x)**2+(x.y-r.y)**2);if(y<=o){const _=u(x);y<=g&&(y<g?p=[{handle:x,validHandleResult:_}]:y===g&&p.push({handle:x,validHandleResult:_}),g=y)}}),!p.length)return{handle:null,validHandleResult:m0()};if(p.length===1)return p[0];const v=p.some(({validHandleResult:x})=>x.isValid),w=p.some(({handle:x})=>x.type==="target");return p.find(({handle:x,validHandleResult:y})=>w?x.type==="target":v?y.isValid:!0)||p[0]}const zA={source:null,target:null,sourceHandle:null,targetHandle:null},m0=()=>({handleDomNode:null,isValid:!1,connection:zA,endHandle:null});function y0(e,n,r,o,s,u,c){const l=s==="target",d=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),f={...m0(),handleDomNode:d};if(d){const p=Cd(void 0,d),g=d.getAttribute("data-nodeid"),v=d.getAttribute("data-handleid"),w=d.classList.contains("connectable"),x=d.classList.contains("connectableend"),y={source:l?g:r,sourceHandle:l?v:o,target:l?r:g,targetHandle:l?o:v};f.connection=y,w&&x&&(n===vo.Strict?l&&p==="source"||!l&&p==="target":g!==r||v!==o)&&(f.endHandle={nodeId:g,handleId:v,type:p},f.isValid=u(y))}return f}function jA({nodes:e,nodeId:n,handleId:r,handleType:o}){return e.reduce((s,u)=>{if(u[jt]){const{handleBounds:c}=u[jt];let l=[],d=[];c&&(l=lp(u,c,"source",`${n}-${r}-${o}`),d=lp(u,c,"target",`${n}-${r}-${o}`)),s.push(...l,...d)}return s},[])}function Cd(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function ec(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function kA(e,n){let r=null;return n?r="valid":e&&!n&&(r="invalid"),r}function v0({event:e,handleId:n,nodeId:r,onConnect:o,isTarget:s,getState:u,setState:c,isValidConnection:l,edgeUpdaterType:d,onReconnectEnd:f}){const p=o0(e.target),{connectionMode:g,domNode:v,autoPanOnConnect:w,connectionRadius:x,onConnectStart:y,panBy:_,getNodes:m,cancelConnection:C}=u();let I=0,F;const{x:j,y:q}=Bi(e),Y=p?.elementFromPoint(j,q),ne=Cd(d,Y),O=v?.getBoundingClientRect();if(!O||!ne)return;let V,K=Bi(e,O),ee=!1,Z=null,R=!1,G=null;const k=jA({nodes:m(),nodeId:r,handleId:n,handleType:ne}),J=()=>{if(!w)return;const[re,ue]=i0(K,O);_({x:re,y:ue}),I=requestAnimationFrame(J)};c({connectionPosition:K,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:ne,connectionStartHandle:{nodeId:r,handleId:n,type:ne},connectionEndHandle:null}),y?.(e,{nodeId:r,handleId:n,handleType:ne});function se(re){const{transform:ue}=u();K=Bi(re,O);const{handle:de,validHandleResult:ce}=PA(re,p,Vc(K,ue,!1,[1,1]),x,k,ve=>y0(ve,g,r,n,s?"target":"source",l,p));if(F=de,ee||(J(),ee=!0),G=ce.handleDomNode,Z=ce.connection,R=ce.isValid,c({connectionPosition:F&&R?f0({x:F.x,y:F.y},ue):K,connectionStatus:kA(!!F,R),connectionEndHandle:ce.endHandle}),!F&&!R&&!G)return ec(V);Z.source!==Z.target&&G&&(ec(V),V=G,G.classList.add("connecting","react-flow__handle-connecting"),G.classList.toggle("valid",R),G.classList.toggle("react-flow__handle-valid",R))}function U(re){(F||G)&&Z&&R&&o?.(Z),u().onConnectEnd?.(re),d&&f?.(re),ec(V),C(),cancelAnimationFrame(I),ee=!1,R=!1,Z=null,G=null,p.removeEventListener("mousemove",se),p.removeEventListener("mouseup",U),p.removeEventListener("touchmove",se),p.removeEventListener("touchend",U)}p.addEventListener("mousemove",se),p.addEventListener("mouseup",U),p.addEventListener("touchmove",se),p.addEventListener("touchend",U)}const cp=()=>!0,$A=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),qA=(e,n,r)=>o=>{const{connectionStartHandle:s,connectionEndHandle:u,connectionClickStartHandle:c}=o;return{connecting:s?.nodeId===e&&s?.handleId===n&&s?.type===r||u?.nodeId===e&&u?.handleId===n&&u?.type===r,clickConnecting:c?.nodeId===e&&c?.handleId===n&&c?.type===r}},D0=T.forwardRef(({type:e="source",position:n=Ce.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:u=!0,id:c,onConnect:l,children:d,className:f,onMouseDown:p,onTouchStart:g,...v},w)=>{const x=c||null,y=e==="target",_=fn(),m=TA(),{connectOnClick:C,noPanClassName:I}=It($A,bn),{connecting:F,clickConnecting:j}=It(qA(m,x,e),bn);m||_.getState().onError?.("010",ci.error010());const q=O=>{const{defaultEdgeOptions:V,onConnect:K,hasDefaultEdges:ee}=_.getState(),Z={...V,...O};if(ee){const{edges:R,setEdges:G}=_.getState();G(MA(Z,R))}K?.(Z),l?.(Z)},Y=O=>{if(!m)return;const V=a0(O);s&&(V&&O.button===0||!V)&&v0({event:O,handleId:x,nodeId:m,onConnect:q,isTarget:y,getState:_.getState,setState:_.setState,isValidConnection:r||_.getState().isValidConnection||cp}),V?p?.(O):g?.(O)},ne=O=>{const{onClickConnectStart:V,onClickConnectEnd:K,connectionClickStartHandle:ee,connectionMode:Z,isValidConnection:R}=_.getState();if(!m||!ee&&!s)return;if(!ee){V?.(O,{nodeId:m,handleId:x,handleType:e}),_.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:x}});return}const G=o0(O.target),k=r||R||cp,{connection:J,isValid:se}=y0({nodeId:m,id:x,type:e},Z,ee.nodeId,ee.handleId||null,ee.type,k,G);se&&q(J),K?.(O),_.setState({connectionClickStartHandle:null})};return W.createElement("div",{"data-handleid":x,"data-nodeid":m,"data-handlepos":n,"data-id":`${m}-${x}-${e}`,className:In(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",I,f,{source:!y,target:y,connectable:o,connectablestart:s,connectableend:u,connecting:j,connectionindicator:o&&(s&&!F||u&&F)}]),onMouseDown:Y,onTouchStart:Y,onClick:C?ne:void 0,ref:w,...v},d)});D0.displayName="Handle";var Mi=T.memo(D0);const b0=({data:e,isConnectable:n,targetPosition:r=Ce.Top,sourcePosition:o=Ce.Bottom})=>W.createElement(W.Fragment,null,W.createElement(Mi,{type:"target",position:r,isConnectable:n}),e?.label,W.createElement(Mi,{type:"source",position:o,isConnectable:n}));b0.displayName="DefaultNode";var Uc=T.memo(b0);const _0=({data:e,isConnectable:n,sourcePosition:r=Ce.Bottom})=>W.createElement(W.Fragment,null,e?.label,W.createElement(Mi,{type:"source",position:r,isConnectable:n}));_0.displayName="InputNode";var w0=T.memo(_0);const x0=({data:e,isConnectable:n,targetPosition:r=Ce.Top})=>W.createElement(W.Fragment,null,W.createElement(Mi,{type:"target",position:r,isConnectable:n}),e?.label);x0.displayName="OutputNode";var C0=T.memo(x0);const Ed=()=>null;Ed.displayName="GroupNode";const LA=e=>({selectedNodes:e.getNodes().filter(n=>n.selected),selectedEdges:e.edges.filter(n=>n.selected).map(n=>({...n}))}),nu=e=>e.id;function HA(e,n){return bn(e.selectedNodes.map(nu),n.selectedNodes.map(nu))&&bn(e.selectedEdges.map(nu),n.selectedEdges.map(nu))}const E0=T.memo(({onSelectionChange:e})=>{const n=fn(),{selectedNodes:r,selectedEdges:o}=It(LA,HA);return T.useEffect(()=>{const s={nodes:r,edges:o};e?.(s),n.getState().onSelectionChange.forEach(u=>u(s))},[r,o,e]),null});E0.displayName="SelectionListener";const GA=e=>!!e.onSelectionChange;function VA({onSelectionChange:e}){const n=It(GA);return e||n?W.createElement(E0,{onSelectionChange:e}):null}const UA=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Wo(e,n){T.useEffect(()=>{typeof e<"u"&&n(e)},[e])}function Ue(e,n,r){T.useEffect(()=>{typeof n<"u"&&r({[e]:n})},[n])}const WA=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:s,onConnectStart:u,onConnectEnd:c,onClickConnectStart:l,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:p,nodesFocusable:g,edgesFocusable:v,edgesUpdatable:w,elevateNodesOnSelect:x,minZoom:y,maxZoom:_,nodeExtent:m,onNodesChange:C,onEdgesChange:I,elementsSelectable:F,connectionMode:j,snapGrid:q,snapToGrid:Y,translateExtent:ne,connectOnClick:O,defaultEdgeOptions:V,fitView:K,fitViewOptions:ee,onNodesDelete:Z,onEdgesDelete:R,onNodeDrag:G,onNodeDragStart:k,onNodeDragStop:J,onSelectionDrag:se,onSelectionDragStart:U,onSelectionDragStop:re,noPanClassName:ue,nodeOrigin:de,rfId:ce,autoPanOnConnect:ve,autoPanOnNodeDrag:ge,onError:Ee,connectionRadius:Oe,isValidConnection:De,nodeDragThreshold:Se})=>{const{setNodes:Be,setEdges:Et,setDefaultNodesAndEdges:Qe,setMinZoom:kt,setMaxZoom:et,setTranslateExtent:tt,setNodeExtent:on,reset:qe}=It(UA,bn),we=fn();return T.useEffect(()=>{const $t=o?.map(Bt=>({...Bt,...V}));return Qe(r,$t),()=>{qe()}},[]),Ue("defaultEdgeOptions",V,we.setState),Ue("connectionMode",j,we.setState),Ue("onConnect",s,we.setState),Ue("onConnectStart",u,we.setState),Ue("onConnectEnd",c,we.setState),Ue("onClickConnectStart",l,we.setState),Ue("onClickConnectEnd",d,we.setState),Ue("nodesDraggable",f,we.setState),Ue("nodesConnectable",p,we.setState),Ue("nodesFocusable",g,we.setState),Ue("edgesFocusable",v,we.setState),Ue("edgesUpdatable",w,we.setState),Ue("elementsSelectable",F,we.setState),Ue("elevateNodesOnSelect",x,we.setState),Ue("snapToGrid",Y,we.setState),Ue("snapGrid",q,we.setState),Ue("onNodesChange",C,we.setState),Ue("onEdgesChange",I,we.setState),Ue("connectOnClick",O,we.setState),Ue("fitViewOnInit",K,we.setState),Ue("fitViewOnInitOptions",ee,we.setState),Ue("onNodesDelete",Z,we.setState),Ue("onEdgesDelete",R,we.setState),Ue("onNodeDrag",G,we.setState),Ue("onNodeDragStart",k,we.setState),Ue("onNodeDragStop",J,we.setState),Ue("onSelectionDrag",se,we.setState),Ue("onSelectionDragStart",U,we.setState),Ue("onSelectionDragStop",re,we.setState),Ue("noPanClassName",ue,we.setState),Ue("nodeOrigin",de,we.setState),Ue("rfId",ce,we.setState),Ue("autoPanOnConnect",ve,we.setState),Ue("autoPanOnNodeDrag",ge,we.setState),Ue("onError",Ee,we.setState),Ue("connectionRadius",Oe,we.setState),Ue("isValidConnection",De,we.setState),Ue("nodeDragThreshold",Se,we.setState),Wo(e,Be),Wo(n,Et),Wo(y,kt),Wo(_,et),Wo(ne,tt),Wo(m,on),null},dp={display:"none"},XA={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},S0="react-flow__node-desc",A0="react-flow__edge-desc",YA="react-flow__aria-live",ZA=e=>e.ariaLiveMessage;function JA({rfId:e}){const n=It(ZA);return W.createElement("div",{id:`${YA}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:XA},n)}function KA({rfId:e,disableKeyboardA11y:n}){return W.createElement(W.Fragment,null,W.createElement("div",{id:`${S0}-${e}`,style:dp},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),W.createElement("div",{id:`${A0}-${e}`,style:dp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&W.createElement(JA,{rfId:e}))}var ra=(e=null,n={actInsideInputWithModifier:!0})=>{const[r,o]=T.useState(!1),s=T.useRef(!1),u=T.useRef(new Set([])),[c,l]=T.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),p=f.reduce((g,v)=>g.concat(...v),[]);return[f,p]}return[[],[]]},[e]);return T.useEffect(()=>{const d=typeof document<"u"?document:null,f=n?.target||d;if(e!==null){const p=w=>{if(s.current=w.ctrlKey||w.metaKey||w.shiftKey,(!s.current||s.current&&!n.actInsideInputWithModifier)&&Lc(w))return!1;const y=hp(w.code,l);u.current.add(w[y]),fp(c,u.current,!1)&&(w.preventDefault(),o(!0))},g=w=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&Lc(w))return!1;const y=hp(w.code,l);fp(c,u.current,!0)?(o(!1),u.current.clear()):u.current.delete(w[y]),w.key==="Meta"&&u.current.clear(),s.current=!1},v=()=>{u.current.clear(),o(!1)};return f?.addEventListener("keydown",p),f?.addEventListener("keyup",g),window.addEventListener("blur",v),()=>{f?.removeEventListener("keydown",p),f?.removeEventListener("keyup",g),window.removeEventListener("blur",v)}}},[e,o]),r};function fp(e,n,r){return e.filter(o=>r||o.length===n.size).some(o=>o.every(s=>n.has(s)))}function hp(e,n){return n.includes(e)?"code":"key"}function F0(e,n,r,o){const s=e.parentNode||e.parentId;if(!s)return r;const u=n.get(s),c=ns(u,o);return F0(u,n,{x:(r.x??0)+c.x,y:(r.y??0)+c.y,z:(u[jt]?.z??0)>(r.z??0)?u[jt]?.z??0:r.z??0},o)}function N0(e,n,r){e.forEach(o=>{const s=o.parentNode||o.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||r?.[o.id]){const{x:u,y:c,z:l}=F0(o,e,{...o.position,z:o[jt]?.z??0},n);o.positionAbsolute={x:u,y:c},o[jt].z=l,r?.[o.id]&&(o[jt].isParent=!0)}})}function tc(e,n,r,o){const s=new Map,u={},c=o?1e3:0;return e.forEach(l=>{const d=(dr(l.zIndex)?l.zIndex:0)+(l.selected?c:0),f=n.get(l.id),p={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},g=l.parentNode||l.parentId;g&&(u[g]=!0);const v=f?.type&&f?.type!==l.type;Object.defineProperty(p,jt,{enumerable:!1,value:{handleBounds:v?void 0:f?.[jt]?.handleBounds,z:d}}),s.set(l.id,p)}),N0(s,r,u),s}function T0(e,n={}){const{getNodes:r,width:o,height:s,minZoom:u,maxZoom:c,d3Zoom:l,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:p,nodeOrigin:g}=e(),v=n.initial&&!f&&p;if(l&&d&&(v||!n.initial)){const x=r().filter(_=>{const m=n.includeHiddenNodes?_.width&&_.height:!_.hidden;return n.nodes?.length?m&&n.nodes.some(C=>C.id===_.id):m}),y=x.every(_=>_.width&&_.height);if(x.length>0&&y){const _=xd(x,g),{x:m,y:C,zoom:I}=g0(_,o,s,n.minZoom??u,n.maxZoom??c,n.padding??.1),F=Ri.translate(m,C).scale(I);return typeof n.duration=="number"&&n.duration>0?l.transform(fo(d,n.duration),F):l.transform(d,F),!0}}return!1}function QA(e,n){return e.forEach(r=>{const o=n.get(r.id);o&&n.set(o.id,{...o,[jt]:o[jt],selected:r.selected})}),new Map(n)}function e3(e,n){return n.map(r=>{const o=e.find(s=>s.id===r.id);return o&&(r.selected=o.selected),r})}function ru({changedNodes:e,changedEdges:n,get:r,set:o}){const{nodeInternals:s,edges:u,onNodesChange:c,onEdgesChange:l,hasDefaultNodes:d,hasDefaultEdges:f}=r();e?.length&&(d&&o({nodeInternals:QA(e,s)}),c?.(e)),n?.length&&(f&&o({edges:e3(n,u)}),l?.(n))}const Xo=()=>{},t3={zoomIn:Xo,zoomOut:Xo,zoomTo:Xo,getZoom:()=>1,setViewport:Xo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Xo,fitBounds:Xo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},n3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),r3=()=>{const e=fn(),{d3Zoom:n,d3Selection:r}=It(n3,bn);return T.useMemo(()=>r&&n?{zoomIn:s=>n.scaleBy(fo(r,s?.duration),1.2),zoomOut:s=>n.scaleBy(fo(r,s?.duration),1/1.2),zoomTo:(s,u)=>n.scaleTo(fo(r,u?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,u)=>{const[c,l,d]=e.getState().transform,f=Ri.translate(s.x??c,s.y??l).scale(s.zoom??d);n.transform(fo(r,u?.duration),f)},getViewport:()=>{const[s,u,c]=e.getState().transform;return{x:s,y:u,zoom:c}},fitView:s=>T0(e.getState,s),setCenter:(s,u,c)=>{const{width:l,height:d,maxZoom:f}=e.getState(),p=typeof c?.zoom<"u"?c.zoom:f,g=l/2-s*p,v=d/2-u*p,w=Ri.translate(g,v).scale(p);n.transform(fo(r,c?.duration),w)},fitBounds:(s,u)=>{const{width:c,height:l,minZoom:d,maxZoom:f}=e.getState(),{x:p,y:g,zoom:v}=g0(s,c,l,d,f,u?.padding??.1),w=Ri.translate(p,g).scale(v);n.transform(fo(r,u?.duration),w)},project:s=>{const{transform:u,snapToGrid:c,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Vc(s,u,c,l)},screenToFlowPosition:s=>{const{transform:u,snapToGrid:c,snapGrid:l,domNode:d}=e.getState();if(!d)return s;const{x:f,y:p}=d.getBoundingClientRect(),g={x:s.x-f,y:s.y-p};return Vc(g,u,c,l)},flowToScreenPosition:s=>{const{transform:u,domNode:c}=e.getState();if(!c)return s;const{x:l,y:d}=c.getBoundingClientRect(),f=f0(s,u);return{x:f.x+l,y:f.y+d}},viewportInitialized:!0}:t3,[n,r])};function Sd(){const e=r3(),n=fn(),r=T.useCallback(()=>n.getState().getNodes().map(y=>({...y})),[]),o=T.useCallback(y=>n.getState().nodeInternals.get(y),[]),s=T.useCallback(()=>{const{edges:y=[]}=n.getState();return y.map(_=>({..._}))},[]),u=T.useCallback(y=>{const{edges:_=[]}=n.getState();return _.find(m=>m.id===y)},[]),c=T.useCallback(y=>{const{getNodes:_,setNodes:m,hasDefaultNodes:C,onNodesChange:I}=n.getState(),F=_(),j=typeof y=="function"?y(F):y;if(C)m(j);else if(I){const q=j.length===0?F.map(Y=>({type:"remove",id:Y.id})):j.map(Y=>({item:Y,type:"reset"}));I(q)}},[]),l=T.useCallback(y=>{const{edges:_=[],setEdges:m,hasDefaultEdges:C,onEdgesChange:I}=n.getState(),F=typeof y=="function"?y(_):y;if(C)m(F);else if(I){const j=F.length===0?_.map(q=>({type:"remove",id:q.id})):F.map(q=>({item:q,type:"reset"}));I(j)}},[]),d=T.useCallback(y=>{const _=Array.isArray(y)?y:[y],{getNodes:m,setNodes:C,hasDefaultNodes:I,onNodesChange:F}=n.getState();if(I){const q=[...m(),..._];C(q)}else if(F){const j=_.map(q=>({item:q,type:"add"}));F(j)}},[]),f=T.useCallback(y=>{const _=Array.isArray(y)?y:[y],{edges:m=[],setEdges:C,hasDefaultEdges:I,onEdgesChange:F}=n.getState();if(I)C([...m,..._]);else if(F){const j=_.map(q=>({item:q,type:"add"}));F(j)}},[]),p=T.useCallback(()=>{const{getNodes:y,edges:_=[],transform:m}=n.getState(),[C,I,F]=m;return{nodes:y().map(j=>({...j})),edges:_.map(j=>({...j})),viewport:{x:C,y:I,zoom:F}}},[]),g=T.useCallback(({nodes:y,edges:_})=>{const{nodeInternals:m,getNodes:C,edges:I,hasDefaultNodes:F,hasDefaultEdges:j,onNodesDelete:q,onEdgesDelete:Y,onNodesChange:ne,onEdgesChange:O}=n.getState(),V=(y||[]).map(G=>G.id),K=(_||[]).map(G=>G.id),ee=C().reduce((G,k)=>{const J=k.parentNode||k.parentId,se=!V.includes(k.id)&&J&&G.find(re=>re.id===J);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(V.includes(k.id)||se)&&G.push(k),G},[]),Z=I.filter(G=>typeof G.deletable=="boolean"?G.deletable:!0),R=Z.filter(G=>K.includes(G.id));if(ee||R){const G=p0(ee,Z),k=[...R,...G],J=k.reduce((se,U)=>(se.includes(U.id)||se.push(U.id),se),[]);if((j||F)&&(j&&n.setState({edges:I.filter(se=>!J.includes(se.id))}),F&&(ee.forEach(se=>{m.delete(se.id)}),n.setState({nodeInternals:new Map(m)}))),J.length>0&&(Y?.(k),O&&O(J.map(se=>({id:se,type:"remove"})))),ee.length>0&&(q?.(ee),ne)){const se=ee.map(U=>({id:U.id,type:"remove"}));ne(se)}}},[]),v=T.useCallback(y=>{const _=wA(y),m=_?null:n.getState().nodeInternals.get(y.id);return!_&&!m?[null,null,_]:[_?y:ip(m),m,_]},[]),w=T.useCallback((y,_=!0,m)=>{const[C,I,F]=v(y);return C?(m||n.getState().getNodes()).filter(j=>{if(!F&&(j.id===I.id||!j.positionAbsolute))return!1;const q=ip(j),Y=qc(q,C);return _&&Y>0||Y>=C.width*C.height}):[]},[]),x=T.useCallback((y,_,m=!0)=>{const[C]=v(y);if(!C)return!1;const I=qc(C,_);return m&&I>0||I>=C.width*C.height},[]);return T.useMemo(()=>({...e,getNodes:r,getNode:o,getEdges:s,getEdge:u,setNodes:c,setEdges:l,addNodes:d,addEdges:f,toObject:p,deleteElements:g,getIntersectingNodes:w,isNodeIntersecting:x}),[e,r,o,s,u,c,l,d,f,p,g,w,x])}const i3={actInsideInputWithModifier:!1};var o3=({deleteKeyCode:e,multiSelectionKeyCode:n})=>{const r=fn(),{deleteElements:o}=Sd(),s=ra(e,i3),u=ra(n);T.useEffect(()=>{if(s){const{edges:c,getNodes:l}=r.getState(),d=l().filter(p=>p.selected),f=c.filter(p=>p.selected);o({nodes:d,edges:f}),r.setState({nodesSelectionActive:!1})}},[s]),T.useEffect(()=>{r.setState({multiSelectionActive:u})},[u])};function s3(e){const n=fn();T.useEffect(()=>{let r;const o=()=>{if(!e.current)return;const s=gd(e.current);(s.height===0||s.width===0)&&n.getState().onError?.("004",ci.error004()),n.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(r=new ResizeObserver(()=>o()),r.observe(e.current)),()=>{window.removeEventListener("resize",o),r&&e.current&&r.unobserve(e.current)}},[])}const Ad={position:"absolute",width:"100%",height:"100%",top:0,left:0},a3=(e,n)=>e.x!==n.x||e.y!==n.y||e.zoom!==n.k,iu=e=>({x:e.x,y:e.y,zoom:e.k}),Yo=(e,n)=>e.target.closest(`.${n}`),pp=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),gp=e=>{const n=e.ctrlKey&&Nu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n},u3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),l3=({onMove:e,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:l=.5,panOnScrollMode:d=po.Free,zoomOnDoubleClick:f=!0,elementsSelectable:p,panOnDrag:g=!0,defaultViewport:v,translateExtent:w,minZoom:x,maxZoom:y,zoomActivationKeyCode:_,preventScrolling:m=!0,children:C,noWheelClassName:I,noPanClassName:F})=>{const j=T.useRef(),q=fn(),Y=T.useRef(!1),ne=T.useRef(!1),O=T.useRef(null),V=T.useRef({x:0,y:0,zoom:0}),{d3Zoom:K,d3Selection:ee,d3ZoomHandler:Z,userSelectionActive:R}=It(u3,bn),G=ra(_),k=T.useRef(0),J=T.useRef(!1),se=T.useRef();return s3(O),T.useEffect(()=>{if(O.current){const U=O.current.getBoundingClientRect(),re=pA().scaleExtent([x,y]).translateExtent(w),ue=_r(O.current).call(re),de=Ri.translate(v.x,v.y).scale(ls(v.zoom,x,y)),ce=[[0,0],[U.width,U.height]],ve=re.constrain()(de,ce,w);re.transform(ue,ve),re.wheelDelta(gp),q.setState({d3Zoom:re,d3Selection:ue,d3ZoomHandler:ue.on("wheel.zoom"),transform:[ve.x,ve.y,ve.k],domNode:O.current.closest(".react-flow")})}},[]),T.useEffect(()=>{ee&&K&&(c&&!G&&!R?ee.on("wheel.zoom",U=>{if(Yo(U,I))return!1;U.preventDefault(),U.stopImmediatePropagation();const re=ee.property("__zoom").k||1;if(U.ctrlKey&&u){const De=Mr(U),Se=gp(U),Be=re*Math.pow(2,Se);K.scaleTo(ee,Be,De,U);return}const ue=U.deltaMode===1?20:1;let de=d===po.Vertical?0:U.deltaX*ue,ce=d===po.Horizontal?0:U.deltaY*ue;!Nu()&&U.shiftKey&&d!==po.Vertical&&(de=U.deltaY*ue,ce=0),K.translateBy(ee,-(de/re)*l,-(ce/re)*l,{internal:!0});const ve=iu(ee.property("__zoom")),{onViewportChangeStart:ge,onViewportChange:Ee,onViewportChangeEnd:Oe}=q.getState();clearTimeout(se.current),J.current||(J.current=!0,n?.(U,ve),ge?.(ve)),J.current&&(e?.(U,ve),Ee?.(ve),se.current=setTimeout(()=>{r?.(U,ve),Oe?.(ve),J.current=!1},150))},{passive:!1}):typeof Z<"u"&&ee.on("wheel.zoom",function(U,re){if(!m&&U.type==="wheel"&&!U.ctrlKey||Yo(U,I))return null;U.preventDefault(),Z.call(this,U,re)},{passive:!1}))},[R,c,d,ee,K,Z,G,u,m,I,n,e,r]),T.useEffect(()=>{K&&K.on("start",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;k.current=U.sourceEvent?.button;const{onViewportChangeStart:re}=q.getState(),ue=iu(U.transform);Y.current=!0,V.current=ue,U.sourceEvent?.type==="mousedown"&&q.setState({paneDragging:!0}),re?.(ue),n?.(U.sourceEvent,ue)})},[K,n]),T.useEffect(()=>{K&&(R&&!Y.current?K.on("zoom",null):R||K.on("zoom",U=>{const{onViewportChange:re}=q.getState();if(q.setState({transform:[U.transform.x,U.transform.y,U.transform.k]}),ne.current=!!(o&&pp(g,k.current??0)),(e||re)&&!U.sourceEvent?.internal){const ue=iu(U.transform);re?.(ue),e?.(U.sourceEvent,ue)}}))},[R,K,e,g,o]),T.useEffect(()=>{K&&K.on("end",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;const{onViewportChangeEnd:re}=q.getState();if(Y.current=!1,q.setState({paneDragging:!1}),o&&pp(g,k.current??0)&&!ne.current&&o(U.sourceEvent),ne.current=!1,(r||re)&&a3(V.current,U.transform)){const ue=iu(U.transform);V.current=ue,clearTimeout(j.current),j.current=setTimeout(()=>{re?.(ue),r?.(U.sourceEvent,ue)},c?150:0)}})},[K,c,g,r,o]),T.useEffect(()=>{K&&K.filter(U=>{const re=G||s,ue=u&&U.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&U.button===1&&U.type==="mousedown"&&(Yo(U,"react-flow__node")||Yo(U,"react-flow__edge")))return!0;if(!g&&!re&&!c&&!f&&!u||R||!f&&U.type==="dblclick"||Yo(U,I)&&U.type==="wheel"||Yo(U,F)&&(U.type!=="wheel"||c&&U.type==="wheel"&&!G)||!u&&U.ctrlKey&&U.type==="wheel"||!re&&!c&&!ue&&U.type==="wheel"||!g&&(U.type==="mousedown"||U.type==="touchstart")||Array.isArray(g)&&!g.includes(U.button)&&U.type==="mousedown")return!1;const de=Array.isArray(g)&&g.includes(U.button)||!U.button||U.button<=1;return(!U.ctrlKey||U.type==="wheel")&&de})},[R,K,s,u,c,f,g,p,G]),W.createElement("div",{className:"react-flow__renderer",ref:O,style:Ad},C)},c3=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function d3(){const{userSelectionActive:e,userSelectionRect:n}=It(c3,bn);return e&&n?W.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}function mp(e,n){const r=n.parentNode||n.parentId,o=e.find(s=>s.id===r);if(o){const s=n.position.x+n.width-o.width,u=n.position.y+n.height-o.height;if(s>0||u>0||n.position.x<0||n.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,s>0&&(o.style.width+=s),u>0&&(o.style.height+=u),n.position.x<0){const c=Math.abs(n.position.x);o.position.x=o.position.x-c,o.style.width+=c,n.position.x=0}if(n.position.y<0){const c=Math.abs(n.position.y);o.position.y=o.position.y-c,o.style.height+=c,n.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function I0(e,n){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const r=e.filter(o=>o.type==="add").map(o=>o.item);return n.reduce((o,s)=>{const u=e.filter(l=>l.id===s.id);if(u.length===0)return o.push(s),o;const c={...s};for(const l of u)if(l)switch(l.type){case"select":{c.selected=l.selected;break}case"position":{typeof l.position<"u"&&(c.position=l.position),typeof l.positionAbsolute<"u"&&(c.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(c.dragging=l.dragging),c.expandParent&&mp(o,c);break}case"dimensions":{typeof l.dimensions<"u"&&(c.width=l.dimensions.width,c.height=l.dimensions.height),typeof l.updateStyle<"u"&&(c.style={...c.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(c.resizing=l.resizing),c.expandParent&&mp(o,c);break}case"remove":return o}return o.push(c),o},r)}function R0(e,n){return I0(e,n)}function f3(e,n){return I0(e,n)}const Ni=(e,n)=>({id:e,type:"select",selected:n});function Ko(e,n){return e.reduce((r,o)=>{const s=n.includes(o.id);return!o.selected&&s?(o.selected=!0,r.push(Ni(o.id,!0))):o.selected&&!s&&(o.selected=!1,r.push(Ni(o.id,!1))),r},[])}const nc=(e,n)=>r=>{r.target===n.current&&e?.(r)},h3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),B0=T.memo(({isSelecting:e,selectionMode:n=cs.Full,panOnDrag:r,onSelectionStart:o,onSelectionEnd:s,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:p,children:g})=>{const v=T.useRef(null),w=fn(),x=T.useRef(0),y=T.useRef(0),_=T.useRef(),{userSelectionActive:m,elementsSelectable:C,dragging:I}=It(h3,bn),F=()=>{w.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,y.current=0},j=Z=>{u?.(Z),w.getState().resetSelectedElements(),w.setState({nodesSelectionActive:!1})},q=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}c?.(Z)},Y=l?Z=>l(Z):void 0,ne=Z=>{const{resetSelectedElements:R,domNode:G}=w.getState();if(_.current=G?.getBoundingClientRect(),!C||!e||Z.button!==0||Z.target!==v.current||!_.current)return;const{x:k,y:J}=Bi(Z,_.current);R(),w.setState({userSelectionRect:{width:0,height:0,startX:k,startY:J,x:k,y:J}}),o?.(Z)},O=Z=>{const{userSelectionRect:R,nodeInternals:G,edges:k,transform:J,onNodesChange:se,onEdgesChange:U,nodeOrigin:re,getNodes:ue}=w.getState();if(!e||!_.current||!R)return;w.setState({userSelectionActive:!0,nodesSelectionActive:!1});const de=Bi(Z,_.current),ce=R.startX??0,ve=R.startY??0,ge={...R,x:de.x<ce?de.x:ce,y:de.y<ve?de.y:ve,width:Math.abs(de.x-ce),height:Math.abs(de.y-ve)},Ee=ue(),Oe=h0(G,ge,J,n===cs.Partial,!0,re),De=p0(Oe,k).map(Be=>Be.id),Se=Oe.map(Be=>Be.id);if(x.current!==Se.length){x.current=Se.length;const Be=Ko(Ee,Se);Be.length&&se?.(Be)}if(y.current!==De.length){y.current=De.length;const Be=Ko(k,De);Be.length&&U?.(Be)}w.setState({userSelectionRect:ge})},V=Z=>{if(Z.button!==0)return;const{userSelectionRect:R}=w.getState();!m&&R&&Z.target===v.current&&j?.(Z),w.setState({nodesSelectionActive:x.current>0}),F(),s?.(Z)},K=Z=>{m&&(w.setState({nodesSelectionActive:x.current>0}),s?.(Z)),F()},ee=C&&(e||m);return W.createElement("div",{className:In(["react-flow__pane",{dragging:I,selection:e}]),onClick:ee?void 0:nc(j,v),onContextMenu:nc(q,v),onWheel:nc(Y,v),onMouseEnter:ee?void 0:d,onMouseDown:ee?ne:void 0,onMouseMove:ee?O:f,onMouseUp:ee?V:void 0,onMouseLeave:ee?K:p,ref:v,style:Ad},g,W.createElement(d3,null))});B0.displayName="Pane";function O0(e,n){const r=e.parentNode||e.parentId;if(!r)return!1;const o=n.get(r);return o?o.selected?!0:O0(o,n):!1}function yp(e,n,r){let o=e;do{if(o?.matches(n))return!0;if(o===r.current)return!1;o=o.parentElement}while(o);return!1}function p3(e,n,r,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||s.parentId||!O0(s,e))&&(s.draggable||n&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(s.positionAbsolute?.x??0),y:r.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function g3(e,n){return!n||n==="parent"?n:[n[0],[n[1][0]-(e.width||0),n[1][1]-(e.height||0)]]}function M0(e,n,r,o,s=[0,0],u){const c=g3(e,e.extent||o);let l=c;const d=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(d&&e.width&&e.height){const g=r.get(d),{x:v,y:w}=ns(g,s).positionAbsolute;l=g&&dr(v)&&dr(w)&&dr(g.width)&&dr(g.height)?[[v+e.width*s[0],w+e.height*s[1]],[v+g.width-e.width+e.width*s[0],w+g.height-e.height+e.height*s[1]]]:l}else u?.("005",ci.error005()),l=c;else if(e.extent&&d&&e.extent!=="parent"){const g=r.get(d),{x:v,y:w}=ns(g,s).positionAbsolute;l=[[e.extent[0][0]+v,e.extent[0][1]+w],[e.extent[1][0]+v,e.extent[1][1]+w]]}let f={x:0,y:0};if(d){const g=r.get(d);f=ns(g,s).positionAbsolute}const p=l&&l!=="parent"?md(n,l):n;return{position:{x:p.x-f.x,y:p.y-f.y},positionAbsolute:p}}function rc({nodeId:e,dragItems:n,nodeInternals:r}){const o=n.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const vp=(e,n,r,o)=>{const s=n.querySelectorAll(e);if(!s||!s.length)return null;const u=Array.from(s),c=n.getBoundingClientRect(),l={x:c.width*o[0],y:c.height*o[1]};return u.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-c.left-l.x)/r,y:(f.top-c.top-l.y)/r,...gd(d)}})};function Ps(e,n,r){return r===void 0?r:o=>{const s=n().nodeInternals.get(e);s&&r(o,{...s})}}function Wc({id:e,store:n,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:l,onError:d}=n.getState(),f=l.get(e);if(!f){d?.("012",ci.error012(e));return}n.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&c)&&(u({nodes:[f],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([e])}function m3(){const e=fn();return T.useCallback(({sourceEvent:r})=>{const{transform:o,snapGrid:s,snapToGrid:u}=e.getState(),c=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,d={x:(c-o[0])/o[2],y:(l-o[1])/o[2]};return{xSnapped:u?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:u?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function ic(e){return(n,r,o)=>e?.(n,o)}function P0({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:o,nodeId:s,isSelectable:u,selectNodesOnDrag:c}){const l=fn(),[d,f]=T.useState(!1),p=T.useRef([]),g=T.useRef({x:null,y:null}),v=T.useRef(0),w=T.useRef(null),x=T.useRef({x:0,y:0}),y=T.useRef(null),_=T.useRef(!1),m=T.useRef(!1),C=T.useRef(!1),I=m3();return T.useEffect(()=>{if(e?.current){const F=_r(e.current),j=({x:ne,y:O})=>{const{nodeInternals:V,onNodeDrag:K,onSelectionDrag:ee,updateNodePositions:Z,nodeExtent:R,snapGrid:G,snapToGrid:k,nodeOrigin:J,onError:se}=l.getState();g.current={x:ne,y:O};let U=!1,re={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&R){const de=xd(p.current,J);re=yd(de)}if(p.current=p.current.map(de=>{const ce={x:ne-de.distance.x,y:O-de.distance.y};k&&(ce.x=G[0]*Math.round(ce.x/G[0]),ce.y=G[1]*Math.round(ce.y/G[1]));const ve=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];p.current.length>1&&R&&!de.extent&&(ve[0][0]=de.positionAbsolute.x-re.x+R[0][0],ve[1][0]=de.positionAbsolute.x+(de.width??0)-re.x2+R[1][0],ve[0][1]=de.positionAbsolute.y-re.y+R[0][1],ve[1][1]=de.positionAbsolute.y+(de.height??0)-re.y2+R[1][1]);const ge=M0(de,ce,V,ve,J,se);return U=U||de.position.x!==ge.position.x||de.position.y!==ge.position.y,de.position=ge.position,de.positionAbsolute=ge.positionAbsolute,de}),!U)return;Z(p.current,!0,!0),f(!0);const ue=s?K:ic(ee);if(ue&&y.current){const[de,ce]=rc({nodeId:s,dragItems:p.current,nodeInternals:V});ue(y.current,de,ce)}},q=()=>{if(!w.current)return;const[ne,O]=i0(x.current,w.current);if(ne!==0||O!==0){const{transform:V,panBy:K}=l.getState();g.current.x=(g.current.x??0)-ne/V[2],g.current.y=(g.current.y??0)-O/V[2],K({x:ne,y:O})&&j(g.current)}v.current=requestAnimationFrame(q)},Y=ne=>{const{nodeInternals:O,multiSelectionActive:V,nodesDraggable:K,unselectNodesAndEdges:ee,onNodeDragStart:Z,onSelectionDragStart:R}=l.getState();m.current=!0;const G=s?Z:ic(R);(!c||!u)&&!V&&s&&(O.get(s)?.selected||ee()),s&&u&&c&&Wc({id:s,store:l,nodeRef:e});const k=I(ne);if(g.current=k,p.current=p3(O,K,k,s),G&&p.current){const[J,se]=rc({nodeId:s,dragItems:p.current,nodeInternals:O});G(ne.sourceEvent,J,se)}};if(n)F.on(".drag",null);else{const ne=CE().on("start",O=>{const{domNode:V,nodeDragThreshold:K}=l.getState();K===0&&Y(O),C.current=!1;const ee=I(O);g.current=ee,w.current=V?.getBoundingClientRect()||null,x.current=Bi(O.sourceEvent,w.current)}).on("drag",O=>{const V=I(O),{autoPanOnNodeDrag:K,nodeDragThreshold:ee}=l.getState();if(O.sourceEvent.type==="touchmove"&&O.sourceEvent.touches.length>1&&(C.current=!0),!C.current){if(!_.current&&m.current&&K&&(_.current=!0,q()),!m.current){const Z=V.xSnapped-(g?.current?.x??0),R=V.ySnapped-(g?.current?.y??0);Math.sqrt(Z*Z+R*R)>ee&&Y(O)}(g.current.x!==V.xSnapped||g.current.y!==V.ySnapped)&&p.current&&m.current&&(y.current=O.sourceEvent,x.current=Bi(O.sourceEvent,w.current),j(V))}}).on("end",O=>{if(!(!m.current||C.current)&&(f(!1),_.current=!1,m.current=!1,cancelAnimationFrame(v.current),p.current)){const{updateNodePositions:V,nodeInternals:K,onNodeDragStop:ee,onSelectionDragStop:Z}=l.getState(),R=s?ee:ic(Z);if(V(p.current,!1,!1),R){const[G,k]=rc({nodeId:s,dragItems:p.current,nodeInternals:K});R(O.sourceEvent,G,k)}}}).filter(O=>{const V=O.target;return!O.button&&(!r||!yp(V,`.${r}`,e))&&(!o||yp(V,o,e))});return F.call(ne),()=>{F.on(".drag",null)}}}},[e,n,r,o,u,l,s,c,I]),d}function z0(){const e=fn();return T.useCallback(r=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:u,getNodes:c,snapToGrid:l,snapGrid:d,onError:f,nodesDraggable:p}=e.getState(),g=c().filter(C=>C.selected&&(C.draggable||p&&typeof C.draggable>"u")),v=l?d[0]:5,w=l?d[1]:5,x=r.isShiftPressed?4:1,y=r.x*v*x,_=r.y*w*x,m=g.map(C=>{if(C.positionAbsolute){const I={x:C.positionAbsolute.x+y,y:C.positionAbsolute.y+_};l&&(I.x=d[0]*Math.round(I.x/d[0]),I.y=d[1]*Math.round(I.y/d[1]));const{positionAbsolute:F,position:j}=M0(C,I,o,s,void 0,f);C.position=j,C.positionAbsolute=F}return C});u(m,!0,!1)},[])}const rs={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var zs=e=>{const n=({id:r,type:o,data:s,xPos:u,yPos:c,xPosOrigin:l,yPosOrigin:d,selected:f,onClick:p,onMouseEnter:g,onMouseMove:v,onMouseLeave:w,onContextMenu:x,onDoubleClick:y,style:_,className:m,isDraggable:C,isSelectable:I,isConnectable:F,isFocusable:j,selectNodesOnDrag:q,sourcePosition:Y,targetPosition:ne,hidden:O,resizeObserver:V,dragHandle:K,zIndex:ee,isParent:Z,noDragClassName:R,noPanClassName:G,initialized:k,disableKeyboardA11y:J,ariaLabel:se,rfId:U,hasHandleBounds:re})=>{const ue=fn(),de=T.useRef(null),ce=T.useRef(null),ve=T.useRef(Y),ge=T.useRef(ne),Ee=T.useRef(o),Oe=I||C||p||g||v||w,De=z0(),Se=Ps(r,ue.getState,g),Be=Ps(r,ue.getState,v),Et=Ps(r,ue.getState,w),Qe=Ps(r,ue.getState,x),kt=Ps(r,ue.getState,y),et=qe=>{const{nodeDragThreshold:we}=ue.getState();if(I&&(!q||!C||we>0)&&Wc({id:r,store:ue,nodeRef:de}),p){const $t=ue.getState().nodeInternals.get(r);$t&&p(qe,{...$t})}},tt=qe=>{if(!Lc(qe)&&!J)if(s0.includes(qe.key)&&I){const we=qe.key==="Escape";Wc({id:r,store:ue,unselect:we,nodeRef:de})}else C&&f&&Object.prototype.hasOwnProperty.call(rs,qe.key)&&(ue.setState({ariaLiveMessage:`Moved selected node ${qe.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),De({x:rs[qe.key].x,y:rs[qe.key].y,isShiftPressed:qe.shiftKey}))};T.useEffect(()=>()=>{ce.current&&(V?.unobserve(ce.current),ce.current=null)},[]),T.useEffect(()=>{if(de.current&&!O){const qe=de.current;(!k||!re||ce.current!==qe)&&(ce.current&&V?.unobserve(ce.current),V?.observe(qe),ce.current=qe)}},[O,k,re]),T.useEffect(()=>{const qe=Ee.current!==o,we=ve.current!==Y,$t=ge.current!==ne;de.current&&(qe||we||$t)&&(qe&&(Ee.current=o),we&&(ve.current=Y),$t&&(ge.current=ne),ue.getState().updateNodeDimensions([{id:r,nodeElement:de.current,forceUpdate:!0}]))},[r,o,Y,ne]);const on=P0({nodeRef:de,disabled:O||!C,noDragClassName:R,handleSelector:K,nodeId:r,isSelectable:I,selectNodesOnDrag:q});return O?null:W.createElement("div",{className:In(["react-flow__node",`react-flow__node-${o}`,{[G]:C},m,{selected:f,selectable:I,parent:Z,dragging:on}]),ref:de,style:{zIndex:ee,transform:`translate(${l}px,${d}px)`,pointerEvents:Oe?"all":"none",visibility:k?"visible":"hidden",..._},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:Se,onMouseMove:Be,onMouseLeave:Et,onContextMenu:Qe,onClick:et,onDoubleClick:kt,onKeyDown:j?tt:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":J?void 0:`${S0}-${U}`,"aria-label":se},W.createElement(NA,{value:r},W.createElement(e,{id:r,data:s,type:o,xPos:u,yPos:c,selected:f,isConnectable:F,sourcePosition:Y,targetPosition:ne,dragging:on,dragHandle:K,zIndex:ee})))};return n.displayName="NodeWrapper",T.memo(n)};const y3=e=>{const n=e.getNodes().filter(r=>r.selected);return{...xd(n,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function v3({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const o=fn(),{width:s,height:u,x:c,y:l,transformString:d,userSelectionActive:f}=It(y3,bn),p=z0(),g=T.useRef(null);if(T.useEffect(()=>{r||g.current?.focus({preventScroll:!0})},[r]),P0({nodeRef:g}),f||!s||!u)return null;const v=e?x=>{const y=o.getState().getNodes().filter(_=>_.selected);e(x,y)}:void 0,w=x=>{Object.prototype.hasOwnProperty.call(rs,x.key)&&p({x:rs[x.key].x,y:rs[x.key].y,isShiftPressed:x.shiftKey})};return W.createElement("div",{className:In(["react-flow__nodesselection","react-flow__container",n]),style:{transform:d}},W.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:r?void 0:-1,onKeyDown:r?void 0:w,style:{width:s,height:u,top:l,left:c}}))}var D3=T.memo(v3);const b3=e=>e.nodesSelectionActive,j0=({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:l,onMove:d,onMoveStart:f,onMoveEnd:p,selectionKeyCode:g,selectionOnDrag:v,selectionMode:w,onSelectionStart:x,onSelectionEnd:y,multiSelectionKeyCode:_,panActivationKeyCode:m,zoomActivationKeyCode:C,elementsSelectable:I,zoomOnScroll:F,zoomOnPinch:j,panOnScroll:q,panOnScrollSpeed:Y,panOnScrollMode:ne,zoomOnDoubleClick:O,panOnDrag:V,defaultViewport:K,translateExtent:ee,minZoom:Z,maxZoom:R,preventScrolling:G,onSelectionContextMenu:k,noWheelClassName:J,noPanClassName:se,disableKeyboardA11y:U})=>{const re=It(b3),ue=ra(g),de=ra(m),ce=de||V,ve=de||q,ge=ue||v&&ce!==!0;return o3({deleteKeyCode:l,multiSelectionKeyCode:_}),W.createElement(l3,{onMove:d,onMoveStart:f,onMoveEnd:p,onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:F,zoomOnPinch:j,panOnScroll:ve,panOnScrollSpeed:Y,panOnScrollMode:ne,zoomOnDoubleClick:O,panOnDrag:!ue&&ce,defaultViewport:K,translateExtent:ee,minZoom:Z,maxZoom:R,zoomActivationKeyCode:C,preventScrolling:G,noWheelClassName:J,noPanClassName:se},W.createElement(B0,{onSelectionStart:x,onSelectionEnd:y,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:ce,isSelecting:!!ge,selectionMode:w},e,re&&W.createElement(D3,{onSelectionContextMenu:k,noPanClassName:se,disableKeyboardA11y:U})))};j0.displayName="FlowRenderer";var _3=T.memo(j0);function w3(e){return It(T.useCallback(r=>e?h0(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function x3(e){const n={input:zs(e.input||w0),default:zs(e.default||Uc),output:zs(e.output||C0),group:zs(e.group||Ed)},r={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,u)=>(s[u]=zs(e[u]||Uc),s),r);return{...n,...o}}const C3=({x:e,y:n,width:r,height:o,origin:s})=>!r||!o?{x:e,y:n}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:n}:{x:e-r*s[0],y:n-o*s[1]},E3=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),k0=e=>{const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:u,onError:c}=It(E3,bn),l=w3(e.onlyRenderVisibleElements),d=T.useRef(),f=T.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(g=>{const v=g.map(w=>({id:w.target.getAttribute("data-id"),nodeElement:w.target,forceUpdate:!0}));u(v)});return d.current=p,p},[]);return T.useEffect(()=>()=>{d?.current?.disconnect()},[]),W.createElement("div",{className:"react-flow__nodes",style:Ad},l.map(p=>{let g=p.type||"default";e.nodeTypes[g]||(c?.("003",ci.error003(g)),g="default");const v=e.nodeTypes[g]||e.nodeTypes.default,w=!!(p.draggable||n&&typeof p.draggable>"u"),x=!!(p.selectable||s&&typeof p.selectable>"u"),y=!!(p.connectable||r&&typeof p.connectable>"u"),_=!!(p.focusable||o&&typeof p.focusable>"u"),m=e.nodeExtent?md(p.positionAbsolute,e.nodeExtent):p.positionAbsolute,C=m?.x??0,I=m?.y??0,F=C3({x:C,y:I,width:p.width??0,height:p.height??0,origin:e.nodeOrigin});return W.createElement(v,{key:p.id,id:p.id,className:p.className,style:p.style,type:g,data:p.data,sourcePosition:p.sourcePosition||Ce.Bottom,targetPosition:p.targetPosition||Ce.Top,hidden:p.hidden,xPos:C,yPos:I,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!p.selected,isDraggable:w,isSelectable:x,isConnectable:y,isFocusable:_,resizeObserver:f,dragHandle:p.dragHandle,zIndex:p[jt]?.z??0,isParent:!!p[jt]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!p.width&&!!p.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[jt]?.handleBounds})}))};k0.displayName="NodeRenderer";var S3=T.memo(k0);const A3=(e,n,r)=>r===Ce.Left?e-n:r===Ce.Right?e+n:e,F3=(e,n,r)=>r===Ce.Top?e-n:r===Ce.Bottom?e+n:e,Dp="react-flow__edgeupdater",bp=({position:e,centerX:n,centerY:r,radius:o=10,onMouseDown:s,onMouseEnter:u,onMouseOut:c,type:l})=>W.createElement("circle",{onMouseDown:s,onMouseEnter:u,onMouseOut:c,className:In([Dp,`${Dp}-${l}`]),cx:A3(n,o,e),cy:F3(r,o,e),r:o,stroke:"transparent",fill:"transparent"}),N3=()=>!0;var Zo=e=>{const n=({id:r,className:o,type:s,data:u,onClick:c,onEdgeDoubleClick:l,selected:d,animated:f,label:p,labelStyle:g,labelShowBg:v,labelBgStyle:w,labelBgPadding:x,labelBgBorderRadius:y,style:_,source:m,target:C,sourceX:I,sourceY:F,targetX:j,targetY:q,sourcePosition:Y,targetPosition:ne,elementsSelectable:O,hidden:V,sourceHandleId:K,targetHandleId:ee,onContextMenu:Z,onMouseEnter:R,onMouseMove:G,onMouseLeave:k,reconnectRadius:J,onReconnect:se,onReconnectStart:U,onReconnectEnd:re,markerEnd:ue,markerStart:de,rfId:ce,ariaLabel:ve,isFocusable:ge,isReconnectable:Ee,pathOptions:Oe,interactionWidth:De,disableKeyboardA11y:Se})=>{const Be=T.useRef(null),[Et,Qe]=T.useState(!1),[kt,et]=T.useState(!1),tt=fn(),on=T.useMemo(()=>`url('#${Gc(de,ce)}')`,[de,ce]),qe=T.useMemo(()=>`url('#${Gc(ue,ce)}')`,[ue,ce]);if(V)return null;const we=ct=>{const{edges:Pt,addSelectedEdges:hn,unselectNodesAndEdges:an,multiSelectionActive:_t}=tt.getState(),At=Pt.find(Kt=>Kt.id===r);At&&(O&&(tt.setState({nodesSelectionActive:!1}),At.selected&&_t?(an({nodes:[],edges:[At]}),Be.current?.blur()):hn([r])),c&&c(ct,At))},$t=Ms(r,tt.getState,l),Bt=Ms(r,tt.getState,Z),lt=Ms(r,tt.getState,R),Ot=Ms(r,tt.getState,G),St=Ms(r,tt.getState,k),sn=(ct,Pt)=>{if(ct.button!==0)return;const{edges:hn,isValidConnection:an}=tt.getState(),_t=Pt?C:m,At=(Pt?ee:K)||null,Kt=Pt?"target":"source",Qn=an||N3,un=Pt,xn=hn.find(Q=>Q.id===r);et(!0),U?.(ct,xn,Kt);const gn=Q=>{et(!1),re?.(Q,xn,Kt)};v0({event:ct,handleId:At,nodeId:_t,onConnect:Q=>se?.(xn,Q),isTarget:un,getState:tt.getState,setState:tt.setState,isValidConnection:Qn,edgeUpdaterType:Kt,onReconnectEnd:gn})},Jt=ct=>sn(ct,!0),wn=ct=>sn(ct,!1),Mt=()=>Qe(!0),gt=()=>Qe(!1),Vt=!O&&!c,bt=ct=>{if(!Se&&s0.includes(ct.key)&&O){const{unselectNodesAndEdges:Pt,addSelectedEdges:hn,edges:an}=tt.getState();ct.key==="Escape"?(Be.current?.blur(),Pt({edges:[an.find(At=>At.id===r)]})):hn([r])}};return W.createElement("g",{className:In(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:d,animated:f,inactive:Vt,updating:Et}]),onClick:we,onDoubleClick:$t,onContextMenu:Bt,onMouseEnter:lt,onMouseMove:Ot,onMouseLeave:St,onKeyDown:ge?bt:void 0,tabIndex:ge?0:void 0,role:ge?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":ve===null?void 0:ve||`Edge from ${m} to ${C}`,"aria-describedby":ge?`${A0}-${ce}`:void 0,ref:Be},!kt&&W.createElement(e,{id:r,source:m,target:C,selected:d,animated:f,label:p,labelStyle:g,labelShowBg:v,labelBgStyle:w,labelBgPadding:x,labelBgBorderRadius:y,data:u,style:_,sourceX:I,sourceY:F,targetX:j,targetY:q,sourcePosition:Y,targetPosition:ne,sourceHandleId:K,targetHandleId:ee,markerStart:on,markerEnd:qe,pathOptions:Oe,interactionWidth:De}),Ee&&W.createElement(W.Fragment,null,(Ee==="source"||Ee===!0)&&W.createElement(bp,{position:Y,centerX:I,centerY:F,radius:J,onMouseDown:Jt,onMouseEnter:Mt,onMouseOut:gt,type:"source"}),(Ee==="target"||Ee===!0)&&W.createElement(bp,{position:ne,centerX:j,centerY:q,radius:J,onMouseDown:wn,onMouseEnter:Mt,onMouseOut:gt,type:"target"})))};return n.displayName="EdgeWrapper",T.memo(n)};function T3(e){const n={default:Zo(e.default||Tu),straight:Zo(e.bezier||bd),step:Zo(e.step||Dd),smoothstep:Zo(e.step||Lu),simplebezier:Zo(e.simplebezier||vd)},r={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,u)=>(s[u]=Zo(e[u]||Tu),s),r);return{...n,...o}}function _p(e,n,r=null){const o=(r?.x||0)+n.x,s=(r?.y||0)+n.y,u=r?.width||n.width,c=r?.height||n.height;switch(e){case Ce.Top:return{x:o+u/2,y:s};case Ce.Right:return{x:o+u,y:s+c/2};case Ce.Bottom:return{x:o+u/2,y:s+c};case Ce.Left:return{x:o,y:s+c/2}}}function wp(e,n){return e?e.length===1||!n?e[0]:n&&e.find(r=>r.id===n)||null:null}const I3=(e,n,r,o,s,u)=>{const c=_p(r,e,n),l=_p(u,o,s);return{sourceX:c.x,sourceY:c.y,targetX:l.x,targetY:l.y}};function R3({sourcePos:e,targetPos:n,sourceWidth:r,sourceHeight:o,targetWidth:s,targetHeight:u,width:c,height:l,transform:d}){const f={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x+r,n.x+s),y2:Math.max(e.y+o,n.y+u)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const p=yd({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:c/d[2],height:l/d[2]}),g=Math.max(0,Math.min(p.x2,f.x2)-Math.max(p.x,f.x)),v=Math.max(0,Math.min(p.y2,f.y2)-Math.max(p.y,f.y));return Math.ceil(g*v)>0}function xp(e){const n=e?.[jt]?.handleBounds||null,r=n&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},n,!!r]}const B3=[{level:0,isMaxLevel:!0,edges:[]}];function O3(e,n,r=!1){let o=-1;const s=e.reduce((c,l)=>{const d=dr(l.zIndex);let f=d?l.zIndex:0;if(r){const p=n.get(l.target),g=n.get(l.source),v=l.selected||p?.selected||g?.selected,w=Math.max(g?.[jt]?.z||0,p?.[jt]?.z||0,1e3);f=(d?l.zIndex:0)+(v?w:0)}return c[f]?c[f].push(l):c[f]=[l],o=f>o?f:o,c},{}),u=Object.entries(s).map(([c,l])=>{const d=+c;return{edges:l,level:d,isMaxLevel:d===o}});return u.length===0?B3:u}function M3(e,n,r){const o=It(T.useCallback(s=>e?s.edges.filter(u=>{const c=n.get(u.source),l=n.get(u.target);return c?.width&&c?.height&&l?.width&&l?.height&&R3({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,n]));return O3(o,n,r)}const P3=({color:e="none",strokeWidth:n=1})=>W.createElement("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),z3=({color:e="none",strokeWidth:n=1})=>W.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Cp={[na.Arrow]:P3,[na.ArrowClosed]:z3};function j3(e){const n=fn();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(Cp,e)?Cp[e]:(n.getState().onError?.("009",ci.error009(e)),null),[e])}const k3=({id:e,type:n,color:r,width:o=12.5,height:s=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:l="auto-start-reverse"})=>{const d=j3(n);return d?W.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:l,refX:"0",refY:"0"},W.createElement(d,{color:r,strokeWidth:c})):null},$3=({defaultColor:e,rfId:n})=>r=>{const o=[];return r.edges.reduce((s,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const l=Gc(c,n);o.includes(l)||(s.push({id:l,color:c.color||e,...c}),o.push(l))}}),s),[]).sort((s,u)=>s.id.localeCompare(u.id))},$0=({defaultColor:e,rfId:n})=>{const r=It(T.useCallback($3({defaultColor:e,rfId:n}),[e,n]),(o,s)=>!(o.length!==s.length||o.some((u,c)=>u.id!==s[c].id)));return W.createElement("defs",null,r.map(o=>W.createElement(k3,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};$0.displayName="MarkerDefinitions";var q3=T.memo($0);const L3=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),q0=({defaultMarkerColor:e,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:o,edgeTypes:s,noPanClassName:u,onEdgeContextMenu:c,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:p,onEdgeDoubleClick:g,onReconnect:v,onReconnectStart:w,onReconnectEnd:x,reconnectRadius:y,children:_,disableKeyboardA11y:m})=>{const{edgesFocusable:C,edgesUpdatable:I,elementsSelectable:F,width:j,height:q,connectionMode:Y,nodeInternals:ne,onError:O}=It(L3,bn),V=M3(n,ne,r);return j?W.createElement(W.Fragment,null,V.map(({level:K,edges:ee,isMaxLevel:Z})=>W.createElement("svg",{key:K,style:{zIndex:K},width:j,height:q,className:"react-flow__edges react-flow__container"},Z&&W.createElement(q3,{defaultColor:e,rfId:o}),W.createElement("g",null,ee.map(R=>{const[G,k,J]=xp(ne.get(R.source)),[se,U,re]=xp(ne.get(R.target));if(!J||!re)return null;let ue=R.type||"default";s[ue]||(O?.("011",ci.error011(ue)),ue="default");const de=s[ue]||s.default,ce=Y===vo.Strict?U.target:(U.target??[]).concat(U.source??[]),ve=wp(k.source,R.sourceHandle),ge=wp(ce,R.targetHandle),Ee=ve?.position||Ce.Bottom,Oe=ge?.position||Ce.Top,De=!!(R.focusable||C&&typeof R.focusable>"u"),Se=R.reconnectable||R.updatable,Be=typeof v<"u"&&(Se||I&&typeof Se>"u");if(!ve||!ge)return O?.("008",ci.error008(ve,R)),null;const{sourceX:Et,sourceY:Qe,targetX:kt,targetY:et}=I3(G,ve,Ee,se,ge,Oe);return W.createElement(de,{key:R.id,id:R.id,className:In([R.className,u]),type:ue,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:Et,sourceY:Qe,targetX:kt,targetY:et,sourcePosition:Ee,targetPosition:Oe,elementsSelectable:F,onContextMenu:c,onMouseEnter:l,onMouseMove:d,onMouseLeave:f,onClick:p,onEdgeDoubleClick:g,onReconnect:v,onReconnectStart:w,onReconnectEnd:x,reconnectRadius:y,rfId:o,ariaLabel:R.ariaLabel,isFocusable:De,isReconnectable:Be,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:m})})))),_):null};q0.displayName="EdgeRenderer";var H3=T.memo(q0);const G3=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function V3({children:e}){const n=It(G3);return W.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},e)}function U3(e){const n=Sd(),r=T.useRef(!1);T.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const W3={[Ce.Left]:Ce.Right,[Ce.Right]:Ce.Left,[Ce.Top]:Ce.Bottom,[Ce.Bottom]:Ce.Top},L0=({nodeId:e,handleType:n,style:r,type:o=Ti.Bezier,CustomComponent:s,connectionStatus:u})=>{const{fromNode:c,handleId:l,toX:d,toY:f,connectionMode:p}=It(T.useCallback(q=>({fromNode:q.nodeInternals.get(e),handleId:q.connectionHandleId,toX:(q.connectionPosition.x-q.transform[0])/q.transform[2],toY:(q.connectionPosition.y-q.transform[1])/q.transform[2],connectionMode:q.connectionMode}),[e]),bn),g=c?.[jt]?.handleBounds;let v=g?.[n];if(p===vo.Loose&&(v=v||g?.[n==="source"?"target":"source"]),!c||!v)return null;const w=l?v.find(q=>q.id===l):v[0],x=w?w.x+w.width/2:(c.width??0)/2,y=w?w.y+w.height/2:c.height??0,_=(c.positionAbsolute?.x??0)+x,m=(c.positionAbsolute?.y??0)+y,C=w?.position,I=C?W3[C]:null;if(!C||!I)return null;if(s)return W.createElement(s,{connectionLineType:o,connectionLineStyle:r,fromNode:c,fromHandle:w,fromX:_,fromY:m,toX:d,toY:f,fromPosition:C,toPosition:I,connectionStatus:u});let F="";const j={sourceX:_,sourceY:m,sourcePosition:C,targetX:d,targetY:f,targetPosition:I};return o===Ti.Bezier?[F]=_d(j):o===Ti.Step?[F]=Hc({...j,borderRadius:0}):o===Ti.SmoothStep?[F]=Hc(j):o===Ti.SimpleBezier?[F]=c0(j):F=`M${_},${m} ${d},${f}`,W.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:r})};L0.displayName="ConnectionLine";const X3=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Y3({containerStyle:e,style:n,type:r,component:o}){const{nodeId:s,handleType:u,nodesConnectable:c,width:l,height:d,connectionStatus:f}=It(X3,bn);return!(s&&u&&l&&c)?null:W.createElement("svg",{style:e,width:l,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},W.createElement("g",{className:In(["react-flow__connection",f])},W.createElement(L0,{nodeId:s,handleType:u,style:n,type:r,CustomComponent:o,connectionStatus:f})))}function Ep(e,n){return T.useRef(null),fn(),T.useMemo(()=>n(e),[e])}const H0=({nodeTypes:e,edgeTypes:n,onMove:r,onMoveStart:o,onMoveEnd:s,onInit:u,onNodeClick:c,onEdgeClick:l,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:v,onNodeContextMenu:w,onSelectionContextMenu:x,onSelectionStart:y,onSelectionEnd:_,connectionLineType:m,connectionLineStyle:C,connectionLineComponent:I,connectionLineContainerStyle:F,selectionKeyCode:j,selectionOnDrag:q,selectionMode:Y,multiSelectionKeyCode:ne,panActivationKeyCode:O,zoomActivationKeyCode:V,deleteKeyCode:K,onlyRenderVisibleElements:ee,elementsSelectable:Z,selectNodesOnDrag:R,defaultViewport:G,translateExtent:k,minZoom:J,maxZoom:se,preventScrolling:U,defaultMarkerColor:re,zoomOnScroll:ue,zoomOnPinch:de,panOnScroll:ce,panOnScrollSpeed:ve,panOnScrollMode:ge,zoomOnDoubleClick:Ee,panOnDrag:Oe,onPaneClick:De,onPaneMouseEnter:Se,onPaneMouseMove:Be,onPaneMouseLeave:Et,onPaneScroll:Qe,onPaneContextMenu:kt,onEdgeContextMenu:et,onEdgeMouseEnter:tt,onEdgeMouseMove:on,onEdgeMouseLeave:qe,onReconnect:we,onReconnectStart:$t,onReconnectEnd:Bt,reconnectRadius:lt,noDragClassName:Ot,noWheelClassName:St,noPanClassName:sn,elevateEdgesOnSelect:Jt,disableKeyboardA11y:wn,nodeOrigin:Mt,nodeExtent:gt,rfId:Vt})=>{const bt=Ep(e,x3),ct=Ep(n,T3);return U3(u),W.createElement(_3,{onPaneClick:De,onPaneMouseEnter:Se,onPaneMouseMove:Be,onPaneMouseLeave:Et,onPaneContextMenu:kt,onPaneScroll:Qe,deleteKeyCode:K,selectionKeyCode:j,selectionOnDrag:q,selectionMode:Y,onSelectionStart:y,onSelectionEnd:_,multiSelectionKeyCode:ne,panActivationKeyCode:O,zoomActivationKeyCode:V,elementsSelectable:Z,onMove:r,onMoveStart:o,onMoveEnd:s,zoomOnScroll:ue,zoomOnPinch:de,zoomOnDoubleClick:Ee,panOnScroll:ce,panOnScrollSpeed:ve,panOnScrollMode:ge,panOnDrag:Oe,defaultViewport:G,translateExtent:k,minZoom:J,maxZoom:se,onSelectionContextMenu:x,preventScrolling:U,noDragClassName:Ot,noWheelClassName:St,noPanClassName:sn,disableKeyboardA11y:wn},W.createElement(V3,null,W.createElement(H3,{edgeTypes:ct,onEdgeClick:l,onEdgeDoubleClick:f,onlyRenderVisibleElements:ee,onEdgeContextMenu:et,onEdgeMouseEnter:tt,onEdgeMouseMove:on,onEdgeMouseLeave:qe,onReconnect:we,onReconnectStart:$t,onReconnectEnd:Bt,reconnectRadius:lt,defaultMarkerColor:re,noPanClassName:sn,elevateEdgesOnSelect:!!Jt,disableKeyboardA11y:wn,rfId:Vt},W.createElement(Y3,{style:C,type:m,component:I,containerStyle:F})),W.createElement("div",{className:"react-flow__edgelabel-renderer"}),W.createElement(S3,{nodeTypes:bt,onNodeClick:c,onNodeDoubleClick:d,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:v,onNodeContextMenu:w,selectNodesOnDrag:R,onlyRenderVisibleElements:ee,noPanClassName:sn,noDragClassName:Ot,disableKeyboardA11y:wn,nodeOrigin:Mt,nodeExtent:gt,rfId:Vt})))};H0.displayName="GraphView";var Z3=T.memo(H0);const Xc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ai={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Xc,nodeExtent:Xc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:vo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:xA,isValidConnection:void 0},J3=()=>PC((e,n)=>({...Ai,setNodes:r=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:u}=n();e({nodeInternals:tc(r,o,s,u)})},getNodes:()=>Array.from(n().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:o={}}=n();e({edges:r.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(r,o)=>{const s=typeof r<"u",u=typeof o<"u",c=s?tc(r,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:u?o:[],hasDefaultNodes:s,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:l,domNode:d,nodeOrigin:f}=n(),p=d?.querySelector(".react-flow__viewport");if(!p)return;const g=window.getComputedStyle(p),{m22:v}=new window.DOMMatrixReadOnly(g.transform),w=r.reduce((y,_)=>{const m=s.get(_.id);if(m?.hidden)s.set(m.id,{...m,[jt]:{...m[jt],handleBounds:void 0}});else if(m){const C=gd(_.nodeElement);!!(C.width&&C.height&&(m.width!==C.width||m.height!==C.height||_.forceUpdate))&&(s.set(m.id,{...m,[jt]:{...m[jt],handleBounds:{source:vp(".source",_.nodeElement,v,f),target:vp(".target",_.nodeElement,v,f)}},...C}),y.push({id:m.id,type:"dimensions",dimensions:C}))}return y},[]);N0(s,f);const x=c||u&&!c&&T0(n,{initial:!0,...l});e({nodeInternals:new Map(s),fitViewOnInitDone:x}),w?.length>0&&o?.(w)},updateNodePositions:(r,o=!0,s=!1)=>{const{triggerNodeChanges:u}=n(),c=r.map(l=>{const d={id:l.id,type:"position",dragging:s};return o&&(d.positionAbsolute=l.positionAbsolute,d.position=l.position),d});u(c)},triggerNodeChanges:r=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:u,nodeOrigin:c,getNodes:l,elevateNodesOnSelect:d}=n();if(r?.length){if(u){const f=R0(r,l()),p=tc(f,s,c,d);e({nodeInternals:p})}o?.(r)}},addSelectedNodes:r=>{const{multiSelectionActive:o,edges:s,getNodes:u}=n();let c,l=null;o?c=r.map(d=>Ni(d,!0)):(c=Ko(u(),r),l=Ko(s,[])),ru({changedNodes:c,changedEdges:l,get:n,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:o,edges:s,getNodes:u}=n();let c,l=null;o?c=r.map(d=>Ni(d,!0)):(c=Ko(s,r),l=Ko(u(),[])),ru({changedNodes:l,changedEdges:c,get:n,set:e})},unselectNodesAndEdges:({nodes:r,edges:o}={})=>{const{edges:s,getNodes:u}=n(),c=r||u(),l=o||s,d=c.map(p=>(p.selected=!1,Ni(p.id,!1))),f=l.map(p=>Ni(p.id,!1));ru({changedNodes:d,changedEdges:f,get:n,set:e})},setMinZoom:r=>{const{d3Zoom:o,maxZoom:s}=n();o?.scaleExtent([r,s]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:o,minZoom:s}=n();o?.scaleExtent([s,r]),e({maxZoom:r})},setTranslateExtent:r=>{n().d3Zoom?.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:o}=n(),u=o().filter(l=>l.selected).map(l=>Ni(l.id,!1)),c=r.filter(l=>l.selected).map(l=>Ni(l.id,!1));ru({changedNodes:u,changedEdges:c,get:n,set:e})},setNodeExtent:r=>{const{nodeInternals:o}=n();o.forEach(s=>{s.positionAbsolute=md(s.position,r)}),e({nodeExtent:r,nodeInternals:new Map(o)})},panBy:r=>{const{transform:o,width:s,height:u,d3Zoom:c,d3Selection:l,translateExtent:d}=n();if(!c||!l||!r.x&&!r.y)return!1;const f=Ri.translate(o[0]+r.x,o[1]+r.y).scale(o[2]),p=[[0,0],[s,u]],g=c?.constrain()(f,p,d);return c.transform(l,g),o[0]!==g.x||o[1]!==g.y||o[2]!==g.k},cancelConnection:()=>e({connectionNodeId:Ai.connectionNodeId,connectionHandleId:Ai.connectionHandleId,connectionHandleType:Ai.connectionHandleType,connectionStatus:Ai.connectionStatus,connectionStartHandle:Ai.connectionStartHandle,connectionEndHandle:Ai.connectionEndHandle}),reset:()=>e({...Ai})}),Object.is),Fd=({children:e})=>{const n=T.useRef(null);return n.current||(n.current=J3()),W.createElement(gA,{value:n.current},e)};Fd.displayName="ReactFlowProvider";const G0=({children:e})=>T.useContext(qu)?W.createElement(W.Fragment,null,e):W.createElement(Fd,null,e);G0.displayName="ReactFlowWrapper";const K3={input:w0,default:Uc,output:C0,group:Ed},Q3={default:Tu,straight:bd,step:Dd,smoothstep:Lu,simplebezier:vd},e6=[0,0],t6=[15,15],n6={x:0,y:0,zoom:1},r6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},V0=T.forwardRef(({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,className:s,nodeTypes:u=K3,edgeTypes:c=Q3,onNodeClick:l,onEdgeClick:d,onInit:f,onMove:p,onMoveStart:g,onMoveEnd:v,onConnect:w,onConnectStart:x,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:m,onNodeMouseEnter:C,onNodeMouseMove:I,onNodeMouseLeave:F,onNodeContextMenu:j,onNodeDoubleClick:q,onNodeDragStart:Y,onNodeDrag:ne,onNodeDragStop:O,onNodesDelete:V,onEdgesDelete:K,onSelectionChange:ee,onSelectionDragStart:Z,onSelectionDrag:R,onSelectionDragStop:G,onSelectionContextMenu:k,onSelectionStart:J,onSelectionEnd:se,connectionMode:U=vo.Strict,connectionLineType:re=Ti.Bezier,connectionLineStyle:ue,connectionLineComponent:de,connectionLineContainerStyle:ce,deleteKeyCode:ve="Backspace",selectionKeyCode:ge="Shift",selectionOnDrag:Ee=!1,selectionMode:Oe=cs.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Se=Nu()?"Meta":"Control",zoomActivationKeyCode:Be=Nu()?"Meta":"Control",snapToGrid:Et=!1,snapGrid:Qe=t6,onlyRenderVisibleElements:kt=!1,selectNodesOnDrag:et=!0,nodesDraggable:tt,nodesConnectable:on,nodesFocusable:qe,nodeOrigin:we=e6,edgesFocusable:$t,edgesUpdatable:Bt,elementsSelectable:lt,defaultViewport:Ot=n6,minZoom:St=.5,maxZoom:sn=2,translateExtent:Jt=Xc,preventScrolling:wn=!0,nodeExtent:Mt,defaultMarkerColor:gt="#b1b1b7",zoomOnScroll:Vt=!0,zoomOnPinch:bt=!0,panOnScroll:ct=!1,panOnScrollSpeed:Pt=.5,panOnScrollMode:hn=po.Free,zoomOnDoubleClick:an=!0,panOnDrag:_t=!0,onPaneClick:At,onPaneMouseEnter:Kt,onPaneMouseMove:Qn,onPaneMouseLeave:un,onPaneScroll:xn,onPaneContextMenu:gn,children:H,onEdgeContextMenu:Q,onEdgeDoubleClick:pe,onEdgeMouseEnter:Fe,onEdgeMouseMove:dt,onEdgeMouseLeave:Je,onEdgeUpdate:Ft,onEdgeUpdateStart:wt,onEdgeUpdateEnd:Ut,onReconnect:Rn,onReconnectStart:qt,onReconnectEnd:Wt,reconnectRadius:Bn=10,edgeUpdaterRadius:On=10,onNodesChange:Hn,onEdgesChange:zi,noDragClassName:ji="nodrag",noWheelClassName:ki="nowheel",noPanClassName:fi="nopan",fitView:er=!1,fitViewOptions:mn,connectOnClick:$i=!0,attributionPosition:qi,proOptions:Li,defaultEdgeOptions:Hi,elevateNodesOnSelect:Gi=!0,elevateEdgesOnSelect:Cn=!1,disableKeyboardA11y:fr=!1,autoPanOnConnect:Fr=!0,autoPanOnNodeDrag:tr=!0,connectionRadius:Vi=20,isValidConnection:Nr,onError:hr,style:hi,id:jr,nodeDragThreshold:En,...pi},Ui)=>{const kr=jr||"1";return W.createElement("div",{...pi,style:{...hi,...r6},ref:Ui,className:In(["react-flow",s]),"data-testid":"rf__wrapper",id:jr},W.createElement(G0,null,W.createElement(Z3,{onInit:f,onMove:p,onMoveStart:g,onMoveEnd:v,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:C,onNodeMouseMove:I,onNodeMouseLeave:F,onNodeContextMenu:j,onNodeDoubleClick:q,nodeTypes:u,edgeTypes:c,connectionLineType:re,connectionLineStyle:ue,connectionLineComponent:de,connectionLineContainerStyle:ce,selectionKeyCode:ge,selectionOnDrag:Ee,selectionMode:Oe,deleteKeyCode:ve,multiSelectionKeyCode:Se,panActivationKeyCode:De,zoomActivationKeyCode:Be,onlyRenderVisibleElements:kt,selectNodesOnDrag:et,defaultViewport:Ot,translateExtent:Jt,minZoom:St,maxZoom:sn,preventScrolling:wn,zoomOnScroll:Vt,zoomOnPinch:bt,zoomOnDoubleClick:an,panOnScroll:ct,panOnScrollSpeed:Pt,panOnScrollMode:hn,panOnDrag:_t,onPaneClick:At,onPaneMouseEnter:Kt,onPaneMouseMove:Qn,onPaneMouseLeave:un,onPaneScroll:xn,onPaneContextMenu:gn,onSelectionContextMenu:k,onSelectionStart:J,onSelectionEnd:se,onEdgeContextMenu:Q,onEdgeDoubleClick:pe,onEdgeMouseEnter:Fe,onEdgeMouseMove:dt,onEdgeMouseLeave:Je,onReconnect:Rn??Ft,onReconnectStart:qt??wt,onReconnectEnd:Wt??Ut,reconnectRadius:Bn??On,defaultMarkerColor:gt,noDragClassName:ji,noWheelClassName:ki,noPanClassName:fi,elevateEdgesOnSelect:Cn,rfId:kr,disableKeyboardA11y:fr,nodeOrigin:we,nodeExtent:Mt}),W.createElement(WA,{nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:w,onConnectStart:x,onConnectEnd:y,onClickConnectStart:_,onClickConnectEnd:m,nodesDraggable:tt,nodesConnectable:on,nodesFocusable:qe,edgesFocusable:$t,edgesUpdatable:Bt,elementsSelectable:lt,elevateNodesOnSelect:Gi,minZoom:St,maxZoom:sn,nodeExtent:Mt,onNodesChange:Hn,onEdgesChange:zi,snapToGrid:Et,snapGrid:Qe,connectionMode:U,translateExtent:Jt,connectOnClick:$i,defaultEdgeOptions:Hi,fitView:er,fitViewOptions:mn,onNodesDelete:V,onEdgesDelete:K,onNodeDragStart:Y,onNodeDrag:ne,onNodeDragStop:O,onSelectionDrag:R,onSelectionDragStart:Z,onSelectionDragStop:G,noPanClassName:fi,nodeOrigin:we,rfId:kr,autoPanOnConnect:Fr,autoPanOnNodeDrag:tr,onError:hr,connectionRadius:Vi,isValidConnection:Nr,nodeDragThreshold:En}),W.createElement(VA,{onSelectionChange:ee}),H,W.createElement(yA,{proOptions:Li,position:qi}),W.createElement(KA,{rfId:kr,disableKeyboardA11y:fr})))});V0.displayName="ReactFlow";const i6=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function o6({children:e}){const n=It(i6);return n?tg.createPortal(e,n):null}function U0(e){return n=>{const[r,o]=T.useState(n),s=T.useCallback(u=>o(c=>e(u,c)),[]);return[r,o,s]}}const s6=U0(R0),a6=U0(f3);function u6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},W.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function l6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},W.createElement("path",{d:"M0 0h32v4.2H0z"}))}function c6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},W.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function d6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function f6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Qo=({children:e,className:n,...r})=>W.createElement("button",{type:"button",className:In(["react-flow__controls-button",n]),...r},e);Qo.displayName="ControlButton";const h6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),W0=({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:u,onZoomOut:c,onFitView:l,onInteractiveChange:d,className:f,children:p,position:g="bottom-left"})=>{const v=fn(),[w,x]=T.useState(!1),{isInteractive:y,minZoomReached:_,maxZoomReached:m}=It(h6,bn),{zoomIn:C,zoomOut:I,fitView:F}=Sd();if(T.useEffect(()=>{x(!0)},[]),!w)return null;const j=()=>{C(),u?.()},q=()=>{I(),c?.()},Y=()=>{F(s),l?.()},ne=()=>{v.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),d?.(!y)};return W.createElement(r0,{className:In(["react-flow__controls",f]),position:g,style:e,"data-testid":"rf__controls"},n&&W.createElement(W.Fragment,null,W.createElement(Qo,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},W.createElement(u6,null)),W.createElement(Qo,{onClick:q,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:_},W.createElement(l6,null))),r&&W.createElement(Qo,{className:"react-flow__controls-fitview",onClick:Y,title:"fit view","aria-label":"fit view"},W.createElement(c6,null)),o&&W.createElement(Qo,{className:"react-flow__controls-interactive",onClick:ne,title:"toggle interactivity","aria-label":"toggle interactivity"},y?W.createElement(f6,null):W.createElement(d6,null)),p)};W0.displayName="Controls";var p6=T.memo(W0),Er;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Er||(Er={}));function g6({color:e,dimensions:n,lineWidth:r}){return W.createElement("path",{stroke:e,strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function m6({color:e,radius:n}){return W.createElement("circle",{cx:n,cy:n,r:n,fill:e})}const y6={[Er.Dots]:"#91919a",[Er.Lines]:"#eee",[Er.Cross]:"#e2e2e2"},v6={[Er.Dots]:1,[Er.Lines]:1,[Er.Cross]:6},D6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function X0({id:e,variant:n=Er.Dots,gap:r=20,size:o,lineWidth:s=1,offset:u=2,color:c,style:l,className:d}){const f=T.useRef(null),{transform:p,patternId:g}=It(D6,bn),v=c||y6[n],w=o||v6[n],x=n===Er.Dots,y=n===Er.Cross,_=Array.isArray(r)?r:[r,r],m=[_[0]*p[2]||1,_[1]*p[2]||1],C=w*p[2],I=y?[C,C]:m,F=x?[C/u,C/u]:[I[0]/u,I[1]/u];return W.createElement("svg",{className:In(["react-flow__background",d]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},W.createElement("pattern",{id:g+e,x:p[0]%m[0],y:p[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},x?W.createElement(m6,{color:v,radius:C/u}):W.createElement(g6,{dimensions:I,color:v,lineWidth:s})),W.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}X0.displayName="Background";var b6=T.memo(X0);const qn=Symbol("private"),_6=e=>({id:e?.id,sourceId:e?.source,type:e?.type,targetId:e?.target,name:e?.label,sourceHandle:e.sourceHandle??void 0,targetHandle:e.targetHandle??void 0}),Yc=e=>({id:e.id,type:e.type,position:e.position,height:e[qn]?.dimensions?.height,width:e[qn]?.dimensions?.width,selected:e[qn]?.selected,data:{name:e.name,kind:e?.content?.kind}}),Hs=e=>e.map(Yc),Zc=e=>({id:e.id,source:e.sourceId,type:e?.type||"edge",target:e.targetId,label:e.name,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,markerEnd:{type:na.ArrowClosed,width:20,height:20}}),Jc=e=>e.filter(n=>n.sourceId&&n.targetId).map(Zc);var vt=(e=>(e[e.Input=0]="Input",e[e.Output=1]="Output",e[e.InferredInput=2]="InferredInput",e[e.InferredOutput=3]="InferredOutput",e))(vt||{});const fs=W.createContext({}),Y0=e=>{const{children:n}=e,r=T.useMemo(()=>Ul()(()=>({id:void 0,simulate:void 0,decisionGraph:{nodes:[],edges:[]},hoveredEdgeId:null,openTabs:[],activeTab:"graph",name:"graph.json",disabled:!1,configurable:!0,components:[],customNodes:[],activePanel:void 0,panels:[],compactMode:localStorage.getItem("jdm-compact-mode")==="true",nodeTypes:{},globalType:{}})),[]),o=T.useMemo(()=>Ul(()=>({onChange:void 0,onPanelsChange:void 0})),[]),s=T.useMemo(()=>Ul(()=>({nodesState:T.createRef(),edgesState:T.createRef(),graphClipboard:T.createRef(),reactFlowInstance:T.createRef()})),[]),u=T.useMemo(()=>({handleNodesChange:(l=[])=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState(),[,,p]=d.current;let g=!1;p?.(l);const v=Tt(f,w=>{l.forEach(x=>$e(x).with({type:"position"},y=>{const _=w.nodes.find(m=>m.id===y.id);_&&y.position&&!Jn(_.position,y.position)&&(g=!0,_.position=y.position)}).with({type:"dimensions"},y=>{const _=w.nodes.find(m=>m.id===y.id);_&&!Jn(_[qn]?.dimensions,y.dimensions)&&(g=!0,_[qn]??={},_[qn].dimensions={height:y.dimensions?.height,width:y.dimensions?.width})}).with({type:"select"},y=>{const _=w.nodes.find(m=>m.id===y.id);_&&_[qn]?.selected!==y.selected&&(g=!0,_[qn]??={},_[qn].selected=y.selected)}).otherwise(()=>{}))});g&&(r.setState({decisionGraph:v}),o.getState().onChange?.(v))},handleEdgesChange:(l=[])=>{const{decisionGraph:d}=r.getState(),{edgesState:f}=s.getState();if(f?.current?.[2](l),l.find(p=>p.type==="remove")){const p=Tt(d,g=>{const v=(g.edges||[]).map(w=>l.find(y=>"id"in y&&y.id===w.id)?.type==="remove"?null:w).filter(w=>!!w);g.edges=v});r.setState({decisionGraph:p}),o.getState().onChange?.(p)}},setNodes:(l=[])=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1](Hs(l));const p=Tt(f,g=>{g.nodes=l});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},addNodes:l=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState();d.current[0]?.some(v=>v.type===Dt.Input)&&(l=l.filter(v=>v.type!==Dt.Input)),d.current[1]?.(v=>v.concat(Hs(l)));const g=Tt(f,v=>{v.nodes=(v.nodes||[]).concat(l)});r.setState({decisionGraph:g}),o.getState().onChange?.(g)},duplicateNodes:l=>{const{nodesState:d,edgesState:f}=s.getState(),{decisionGraph:p}=r.getState();let g=(p?.nodes||[]).filter(C=>l.includes(C.id));if(d.current[0]?.some(C=>C.type===Dt.Input)&&(g=g.filter(C=>C.type!==Dt.Input)),g.length===0)return;const w=g.reduce((C,I)=>({...C,[I.id]:crypto.randomUUID()}),{}),x=g.map(C=>({...C,id:w[C.id],position:{x:C.position?.x||0,y:(C.position?.y||0)+140}})),y=Object.keys(w),_=[];x.length>0&&(f.current?.[0]||[]).forEach(C=>{y.includes(C.source)&&y.includes(C.target)&&_.push({id:crypto.randomUUID(),type:C.type,sourceId:w[C.source],targetId:w[C.target],sourceHandle:C.sourceHandle??void 0,targetHandle:C.targetHandle??void 0})}),d.current[1]?.(C=>C.concat(x.map(Yc))),f.current[1]?.(C=>C.concat(_.map(Zc)));const m=Tt(p,C=>{C.nodes.push(...x),C.edges.push(..._)});r.setState({decisionGraph:m}),o.getState().onChange?.(m)},copyNodes:l=>{const{graphClipboard:d,nodesState:f}=s.getState();if(!d.current||!f.current)return;const[p]=f.current,g=p.filter(v=>l.includes(v.id));d.current.copyNodes(g)},pasteNodes:()=>{const{graphClipboard:l}=s.getState();l.current?.pasteNodes?.()},removeNodes:(l=[])=>{const{nodesState:d,edgesState:f}=s.getState(),{decisionGraph:p,nodeTypes:g}=r.getState();d.current[1]?.(x=>x.filter(y=>l.every(_=>y.id!==_))),f.current[1]?.(x=>x.filter(y=>l.every(_=>y.source!==_&&y.target!==_&&y.sourceHandle!==_&&y.targetHandle!==_)));const v=Tt(p,x=>{const y=x.nodes||[],_=x.edges||[];x.nodes=y.filter(m=>l.every(C=>m.id!==C)),x.edges=_.filter(m=>l.every(C=>m.sourceId!==C&&m.targetId!==C&&m.sourceHandle!==C&&m.targetHandle!==C))}),w=Tt(g,x=>{l.forEach(y=>{y in x&&delete x[y]})});r.setState({decisionGraph:v,nodeTypes:w}),o.getState().onChange?.(v)},addEdges:l=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d.current?.[1]?.(g=>g.concat(l.map(Zc)));const p=Tt(f,g=>{g.edges=(g.edges||[]).concat(l)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},setEdges:(l=[])=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(Jc(l));const p=Tt(f,g=>{g.edges=l});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdges:l=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(g=>g.filter(v=>!l.find(w=>v.id===w)));const p=Tt(f,g=>{g.edges=g.edges.filter(v=>!l.find(w=>v.id===w))});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdgeByHandleId:l=>{if(!l)return;const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(g=>g.filter(v=>v.sourceHandle!==l));const p=Tt(f,g=>{g.edges=g.edges.filter(v=>v.sourceHandle!==l)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},updateNode:(l,d)=>{const{decisionGraph:f}=r.getState(),{nodesState:p}=s.getState(),[g,v]=p.current,w=Tt(f,m=>{const C=(m.nodes??[]).find(I=>I?.id===l);C&&d(C)}),x=w.nodes.find(m=>m.id===l);if(!x)return;const y=Yc(x),_=g.find(m=>m.id===l);Jn(y,_)||v(m=>m.map(C=>C.id===l?y:C)),r.setState({decisionGraph:w}),o.getState().onChange?.(w)},setDecisionGraph:(l,d={})=>{const{decisionGraph:f}=r.getState(),{edgesState:p,nodesState:g}=s.getState(),{skipOnChangeEvent:v=!1}=d,w=Tt(f,x=>{Object.assign(x,l)});p?.current?.[1](Jc(w?.edges??[])),g?.current?.[1](Hs(w?.nodes??[])),r.setState({decisionGraph:w}),v||o.getState().onChange?.(w)},setHoveredEdgeId:l=>r.setState({hoveredEdgeId:l}),goToNode:l=>{if(r.getState().activeTab!=="graph")return;const{reactFlowInstance:d}=s.getState();if(!d.current)return;const f=d.current.getNode(l);f&&d.current.fitView({nodes:[f],duration:1e3,maxZoom:1.25})},openTab:l=>{const{openTabs:d}=r.getState(),f=d.find(p=>p===l);if(l==="graph")return r.setState({activeTab:l});f?r.setState({activeTab:f}):r.setState({openTabs:[...d,l],activeTab:l})},closeTab:(l,d)=>{const{openTabs:f,activeTab:p}=r.getState(),g=f?.findIndex(_=>_===l),v=f?.[g],w=$e(d).with(void 0,()=>f.filter(_=>_!==v)).with("close",()=>f.filter(_=>_!==v)).with("close-all",()=>[]).with("close-other",()=>f.filter(_=>_===v)).with("close-right",()=>f.slice(0,g+1)).with("close-left",()=>f.slice(g)).otherwise(()=>f),x={openTabs:w};w?.find(_=>_===p)||(x.activeTab=w?.[g-1]??"graph"),r.setState(x)},setActivePanel:l=>{const{panels:d}=r.getState(),f={activePanel:l===void 0?void 0:(d||[]).find(p=>p.id===l)?.id};o.getState()?.onPanelsChange?.(l),r.setState(f)},setCompactMode:l=>{const d={compactMode:l};localStorage.setItem("jdm-compact-mode",`${l}`),r.setState(d)},toggleCompactMode:()=>{const{compactMode:l}=r.getState(),d=!l,f={compactMode:d};localStorage.setItem("jdm-compact-mode",`${d}`),r.setState(f)},setNodeType:(l,d,f)=>{const{nodeTypes:p}=r.getState(),g=Tt(p,v=>{v[l]??={},v[l][d]=f});r.setState({nodeTypes:g})},removeNodeType:(l,d)=>{const{nodeTypes:f}=r.getState(),p=Tt(f,g=>{l in g&&(d?d in g[l]&&delete g[l][d]:delete g[l])});r.setState({nodeTypes:p})},triggerNodeSelect:(l,d)=>{const{decisionGraph:f}=r.getState(),{nodesState:p,edgesState:g}=s.getState(),[,v]=p.current,[,w]=g.current,x=Tt(f,y=>{const _=y.nodes.find(m=>m.id===l);_&&(d==="only"&&y.nodes.forEach(m=>{m[qn]&&(m[qn].selected=!1)}),_[qn]??={},_[qn].selected=$e(d).with("only",()=>!0).otherwise(()=>!_[qn]?.selected))});v(Hs(x.nodes)),d=="only"&&w(y=>y.map(_=>({..._,selected:!1}))),r.setState({decisionGraph:x}),o.getState().onChange?.(x)}}),[]),c=T.useMemo(()=>({stateStore:r,referenceStore:s,listenerStore:o,actions:u}),[r,s,o,u]);return A.jsx(fs.Provider,{value:c,children:n})};function pt(e,n=Jn){return W.useContext(fs).stateStore(e,n)}function Z0(e,n=Jn){return W.useContext(fs).listenerStore(e,n)}function w6(e,n=Jn){return W.useContext(fs).referenceStore(e,n)}function Zt(){return W.useContext(fs).actions}function bo(){return W.useContext(fs)}const la=e=>{const{diff:n,contentDiff:r}=pt(o=>{const s=(o?.decisionGraph?.nodes??[]).find(u=>u.id===e);return{diff:s?._diff,contentDiff:s?.content?._diff}});return{diff:n,contentDiff:r}},x6=e=>{const{diff:n}=pt(r=>({diff:(r?.decisionGraph?.edges??[]).find(s=>s.id===e)?._diff}));return{diff:n}};Y0.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphProvider"};const C6=({id:e,defaultValue:n,value:r,name:o,disabled:s=!1,configurable:u=!0,onChange:c,components:l,customNodes:d,defaultActivePanel:f,panels:p,simulate:g,onPanelsChange:v,onReactFlowInit:w,onCodeExtension:x,onFunctionReady:y})=>{const _=T.useRef(!1),m=Zt(),{stateStore:C,listenerStore:I}=bo(),{decisionGraph:F}=pt(({decisionGraph:q})=>({decisionGraph:q})),j=cw(q=>{c?.(q)},100);return T.useEffect(()=>{C.setState({id:e,disabled:s,configurable:u,components:Array.isArray(l)?l:[],customNodes:Array.isArray(d)?d:[],panels:p})},[e,s,u,l,d,p]),T.useEffect(()=>{C.setState({name:o??"graph.json"})},[o]),T.useEffect(()=>{C.setState({simulate:g})},[g]),T.useEffect(()=>{I.setState({onReactFlowInit:w,onPanelsChange:v,onCodeExtension:x,onFunctionReady:y})},[w,v,x,y]),T.useEffect(()=>{I.setState({onChange:j})},[j]),T.useEffect(()=>{_.current&&r!==void 0&&!Jn(r,F)&&m.setDecisionGraph(r)},[r]),T.useEffect(()=>{r!==void 0?m.setDecisionGraph(r):n!==void 0&&m.setDecisionGraph(n),C.setState({activePanel:f}),_.current=!0},[]),null},E6=()=>{let e=null;return{walk:function*(n){const r=S6(n);if(e&&Jn(r,e.digest)){yield*F6(n,e.iterator);return}const o=[];for(const s of A6(n))o.push({id:s.node.id,incomers:s.incomers.map(u=>u.id)}),yield s;e={digest:r,iterator:o}}}},S6=e=>{const n=e.nodes.map(o=>o.id),r=e.edges;return{nodes:n,edges:r}};function*A6(e){const n=Hs(e.nodes),r=Jc(e.edges),o=e.nodes.find(l=>l.type==="inputNode"),s=n.find(l=>l.id===o?.id);if(!o||!s||N6(s,n,r))return;yield{node:o,incomers:[]};const u=new Set;u.add(o.id);const c=Iu(s,n,r);for(;c.length>0;){const l=c.pop();if(u.has(l.id))continue;const d=RA(l,n,r),f=d.filter(v=>!u.has(v.id));if(f.length>0){c.push(l,...f);continue}u.add(l.id);const p=e.nodes.find(v=>v.id===l.id);if(p){const v=e.nodes.filter(w=>d.some(x=>x.id===w.id));yield{node:p,incomers:v}}const g=Iu(l,n,r);c.push(...g)}}function*F6(e,n){for(const r of n){const o=e.nodes.find(u=>u.id===r.id);if(!o)continue;const s=e.nodes.filter(u=>r.incomers.includes(u.id));yield{node:o,incomers:s}}}const N6=(e,n,r)=>{const o=new Set,s=new Set,u=c=>{o.add(c.id),s.add(c.id);const l=Iu(c,n,r);for(const d of l)if(o.has(d.id)){if(s.has(d.id))return!0}else if(u(d))return!0;return s.delete(c.id),!1};return u(e)};var Gs={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var T6=Gs.exports,Sp;function I6(){return Sp||(Sp=1,function(e,n){(function(){var r,o="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",f=500,p="__lodash_placeholder__",g=1,v=2,w=4,x=1,y=2,_=1,m=2,C=4,I=8,F=16,j=32,q=64,Y=128,ne=256,O=512,V=30,K="...",ee=800,Z=16,R=1,G=2,k=3,J=1/0,se=9007199254740991,U=17976931348623157e292,re=NaN,ue=4294967295,de=ue-1,ce=ue>>>1,ve=[["ary",Y],["bind",_],["bindKey",m],["curry",I],["curryRight",F],["flip",O],["partial",j],["partialRight",q],["rearg",ne]],ge="[object Arguments]",Ee="[object Array]",Oe="[object AsyncFunction]",De="[object Boolean]",Se="[object Date]",Be="[object DOMException]",Et="[object Error]",Qe="[object Function]",kt="[object GeneratorFunction]",et="[object Map]",tt="[object Number]",on="[object Null]",qe="[object Object]",we="[object Promise]",$t="[object Proxy]",Bt="[object RegExp]",lt="[object Set]",Ot="[object String]",St="[object Symbol]",sn="[object Undefined]",Jt="[object WeakMap]",wn="[object WeakSet]",Mt="[object ArrayBuffer]",gt="[object DataView]",Vt="[object Float32Array]",bt="[object Float64Array]",ct="[object Int8Array]",Pt="[object Int16Array]",hn="[object Int32Array]",an="[object Uint8Array]",_t="[object Uint8ClampedArray]",At="[object Uint16Array]",Kt="[object Uint32Array]",Qn=/\b__p \+= '';/g,un=/\b(__p \+=) '' \+/g,xn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,gn=/&(?:amp|lt|gt|quot|#39);/g,H=/[&<>"']/g,Q=RegExp(gn.source),pe=RegExp(H.source),Fe=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,Je=/<%=([\s\S]+?)%>/g,Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wt=/^\w*$/,Ut=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rn=/[\\^$.*+?()[\]{}|]/g,qt=RegExp(Rn.source),Wt=/^\s+/,Bn=/\s/,On=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hn=/\{\n\/\* \[wrapped with (.+)\] \*/,zi=/,? & /,ji=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ki=/[()=,{}\[\]\/\s]/,fi=/\\(\\)?/g,er=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mn=/\w*$/,$i=/^[-+]0x[0-9a-f]+$/i,qi=/^0b[01]+$/i,Li=/^\[object .+?Constructor\]$/,Hi=/^0o[0-7]+$/i,Gi=/^(?:0|[1-9]\d*)$/,Cn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fr=/($^)/,Fr=/['\n\r\u2028\u2029\\]/g,tr="\\ud800-\\udfff",Vi="\\u0300-\\u036f",Nr="\\ufe20-\\ufe2f",hr="\\u20d0-\\u20ff",hi=Vi+Nr+hr,jr="\\u2700-\\u27bf",En="a-z\\xdf-\\xf6\\xf8-\\xff",pi="\\xac\\xb1\\xd7\\xf7",Ui="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",kr="\\u2000-\\u206f",ps=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",wo="A-Z\\xc0-\\xd6\\xd8-\\xde",xo="\\ufe0e\\ufe0f",$r=pi+Ui+kr+ps,Wi="['’]",qr="["+tr+"]",Xi="["+$r+"]",Lr="["+hi+"]",Hr="\\d+",Yi="["+jr+"]",Co="["+En+"]",Eo="[^"+tr+$r+Hr+jr+En+wo+"]",Gr="\\ud83c[\\udffb-\\udfff]",gs="(?:"+Lr+"|"+Gr+")",So="[^"+tr+"]",gi="(?:\\ud83c[\\udde6-\\uddff]){2}",pr="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+wo+"]",Ao="\\u200d",Fo="(?:"+Co+"|"+Eo+")",Mn="(?:"+Sn+"|"+Eo+")",No="(?:"+Wi+"(?:d|ll|m|re|s|t|ve))?",To="(?:"+Wi+"(?:D|LL|M|RE|S|T|VE))?",Io=gs+"?",Vr="["+xo+"]?",Zi="(?:"+Ao+"(?:"+[So,gi,pr].join("|")+")"+Vr+Io+")*",Gn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ro=Vr+Io+Zi,Ur="(?:"+[Yi,gi,pr].join("|")+")"+Ro,Ji="(?:"+[So+Lr+"?",Lr,gi,pr,qr].join("|")+")",yi=RegExp(Wi,"g"),gr=RegExp(Lr,"g"),nr=RegExp(Gr+"(?="+Gr+")|"+Ji+Ro,"g"),Bo=RegExp([Sn+"?"+Co+"+"+No+"(?="+[Xi,Sn,"$"].join("|")+")",Mn+"+"+To+"(?="+[Xi,Sn+Fo,"$"].join("|")+")",Sn+"?"+Fo+"+"+No,Sn+"+"+To,mi,Gn,Hr,Ur].join("|"),"g"),Ki=RegExp("["+Ao+tr+hi+xo+"]"),Wr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qi=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ms=-1,st={};st[Vt]=st[bt]=st[ct]=st[Pt]=st[hn]=st[an]=st[_t]=st[At]=st[Kt]=!0,st[ge]=st[Ee]=st[Mt]=st[De]=st[gt]=st[Se]=st[Et]=st[Qe]=st[et]=st[tt]=st[qe]=st[Bt]=st[lt]=st[Ot]=st[Jt]=!1;var nt={};nt[ge]=nt[Ee]=nt[Mt]=nt[gt]=nt[De]=nt[Se]=nt[Vt]=nt[bt]=nt[ct]=nt[Pt]=nt[hn]=nt[et]=nt[tt]=nt[qe]=nt[Bt]=nt[lt]=nt[Ot]=nt[St]=nt[an]=nt[_t]=nt[At]=nt[Kt]=!0,nt[Et]=nt[Qe]=nt[Jt]=!1;var B={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},D={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},N={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,me=parseInt,Ae=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,Me=typeof self=="object"&&self&&self.Object===Object&&self,be=Ae||Me||Function("return this")(),Ne=n&&!n.nodeType&&n,Ke=Ne&&!0&&e&&!e.nodeType&&e,ft=Ke&&Ke.exports===Ne,yt=ft&&Ae.process,at=function(){try{var $=Ke&&Ke.require&&Ke.require("util").types;return $||yt&&yt.binding&&yt.binding("util")}catch{}}(),Qt=at&&at.isArrayBuffer,Pn=at&&at.isDate,rr=at&&at.isMap,Tr=at&&at.isRegExp,ys=at&&at.isSet,eo=at&&at.isTypedArray;function ln($,te,X){switch(X.length){case 0:return $.call(te);case 1:return $.call(te,X[0]);case 2:return $.call(te,X[0],X[1]);case 3:return $.call(te,X[0],X[1],X[2])}return $.apply(te,X)}function bm($,te,X,_e){for(var Pe=-1,rt=$==null?0:$.length;++Pe<rt;){var en=$[Pe];te(_e,en,X(en),$)}return _e}function ir($,te){for(var X=-1,_e=$==null?0:$.length;++X<_e&&te($[X],X,$)!==!1;);return $}function _m($,te){for(var X=$==null?0:$.length;X--&&te($[X],X,$)!==!1;);return $}function Rd($,te){for(var X=-1,_e=$==null?0:$.length;++X<_e;)if(!te($[X],X,$))return!1;return!0}function vi($,te){for(var X=-1,_e=$==null?0:$.length,Pe=0,rt=[];++X<_e;){var en=$[X];te(en,X,$)&&(rt[Pe++]=en)}return rt}function ca($,te){var X=$==null?0:$.length;return!!X&&Oo($,te,0)>-1}function Hu($,te,X){for(var _e=-1,Pe=$==null?0:$.length;++_e<Pe;)if(X(te,$[_e]))return!0;return!1}function Nt($,te){for(var X=-1,_e=$==null?0:$.length,Pe=Array(_e);++X<_e;)Pe[X]=te($[X],X,$);return Pe}function Di($,te){for(var X=-1,_e=te.length,Pe=$.length;++X<_e;)$[Pe+X]=te[X];return $}function Gu($,te,X,_e){var Pe=-1,rt=$==null?0:$.length;for(_e&&rt&&(X=$[++Pe]);++Pe<rt;)X=te(X,$[Pe],Pe,$);return X}function wm($,te,X,_e){var Pe=$==null?0:$.length;for(_e&&Pe&&(X=$[--Pe]);Pe--;)X=te(X,$[Pe],Pe,$);return X}function Vu($,te){for(var X=-1,_e=$==null?0:$.length;++X<_e;)if(te($[X],X,$))return!0;return!1}var xm=Uu("length");function Cm($){return $.split("")}function Em($){return $.match(ji)||[]}function Bd($,te,X){var _e;return X($,function(Pe,rt,en){if(te(Pe,rt,en))return _e=rt,!1}),_e}function da($,te,X,_e){for(var Pe=$.length,rt=X+(_e?1:-1);_e?rt--:++rt<Pe;)if(te($[rt],rt,$))return rt;return-1}function Oo($,te,X){return te===te?zm($,te,X):da($,Od,X)}function Sm($,te,X,_e){for(var Pe=X-1,rt=$.length;++Pe<rt;)if(_e($[Pe],te))return Pe;return-1}function Od($){return $!==$}function Md($,te){var X=$==null?0:$.length;return X?Xu($,te)/X:re}function Uu($){return function(te){return te==null?r:te[$]}}function Wu($){return function(te){return $==null?r:$[te]}}function Pd($,te,X,_e,Pe){return Pe($,function(rt,en,mt){X=_e?(_e=!1,rt):te(X,rt,en,mt)}),X}function Am($,te){var X=$.length;for($.sort(te);X--;)$[X]=$[X].value;return $}function Xu($,te){for(var X,_e=-1,Pe=$.length;++_e<Pe;){var rt=te($[_e]);rt!==r&&(X=X===r?rt:X+rt)}return X}function Yu($,te){for(var X=-1,_e=Array($);++X<$;)_e[X]=te(X);return _e}function Fm($,te){return Nt(te,function(X){return[X,$[X]]})}function zd($){return $&&$.slice(0,qd($)+1).replace(Wt,"")}function Vn($){return function(te){return $(te)}}function Zu($,te){return Nt(te,function(X){return $[X]})}function vs($,te){return $.has(te)}function jd($,te){for(var X=-1,_e=$.length;++X<_e&&Oo(te,$[X],0)>-1;);return X}function kd($,te){for(var X=$.length;X--&&Oo(te,$[X],0)>-1;);return X}function Nm($,te){for(var X=$.length,_e=0;X--;)$[X]===te&&++_e;return _e}var Tm=Wu(B),Im=Wu(D);function Rm($){return"\\"+z[$]}function Bm($,te){return $==null?r:$[te]}function Mo($){return Ki.test($)}function Om($){return Wr.test($)}function Mm($){for(var te,X=[];!(te=$.next()).done;)X.push(te.value);return X}function Ju($){var te=-1,X=Array($.size);return $.forEach(function(_e,Pe){X[++te]=[Pe,_e]}),X}function $d($,te){return function(X){return $(te(X))}}function bi($,te){for(var X=-1,_e=$.length,Pe=0,rt=[];++X<_e;){var en=$[X];(en===te||en===p)&&($[X]=p,rt[Pe++]=X)}return rt}function fa($){var te=-1,X=Array($.size);return $.forEach(function(_e){X[++te]=_e}),X}function Pm($){var te=-1,X=Array($.size);return $.forEach(function(_e){X[++te]=[_e,_e]}),X}function zm($,te,X){for(var _e=X-1,Pe=$.length;++_e<Pe;)if($[_e]===te)return _e;return-1}function jm($,te,X){for(var _e=X+1;_e--;)if($[_e]===te)return _e;return _e}function Po($){return Mo($)?$m($):xm($)}function mr($){return Mo($)?qm($):Cm($)}function qd($){for(var te=$.length;te--&&Bn.test($.charAt(te)););return te}var km=Wu(N);function $m($){for(var te=nr.lastIndex=0;nr.test($);)++te;return te}function qm($){return $.match(nr)||[]}function Lm($){return $.match(Bo)||[]}var Hm=function $(te){te=te==null?be:zo.defaults(be.Object(),te,zo.pick(be,Qi));var X=te.Array,_e=te.Date,Pe=te.Error,rt=te.Function,en=te.Math,mt=te.Object,Ku=te.RegExp,Gm=te.String,or=te.TypeError,ha=X.prototype,Vm=rt.prototype,jo=mt.prototype,pa=te["__core-js_shared__"],ga=Vm.toString,ut=jo.hasOwnProperty,Um=0,Ld=function(){var t=/[^.]+$/.exec(pa&&pa.keys&&pa.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ma=jo.toString,Wm=ga.call(mt),Xm=be._,Ym=Ku("^"+ga.call(ut).replace(Rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ya=ft?te.Buffer:r,_i=te.Symbol,va=te.Uint8Array,Hd=ya?ya.allocUnsafe:r,Da=$d(mt.getPrototypeOf,mt),Gd=mt.create,Vd=jo.propertyIsEnumerable,ba=ha.splice,Ud=_i?_i.isConcatSpreadable:r,Ds=_i?_i.iterator:r,to=_i?_i.toStringTag:r,_a=function(){try{var t=so(mt,"defineProperty");return t({},"",{}),t}catch{}}(),Zm=te.clearTimeout!==be.clearTimeout&&te.clearTimeout,Jm=_e&&_e.now!==be.Date.now&&_e.now,Km=te.setTimeout!==be.setTimeout&&te.setTimeout,wa=en.ceil,xa=en.floor,Qu=mt.getOwnPropertySymbols,Qm=ya?ya.isBuffer:r,Wd=te.isFinite,ey=ha.join,ty=$d(mt.keys,mt),tn=en.max,yn=en.min,ny=_e.now,ry=te.parseInt,Xd=en.random,iy=ha.reverse,el=so(te,"DataView"),bs=so(te,"Map"),tl=so(te,"Promise"),ko=so(te,"Set"),_s=so(te,"WeakMap"),ws=so(mt,"create"),Ca=_s&&new _s,$o={},oy=ao(el),sy=ao(bs),ay=ao(tl),uy=ao(ko),ly=ao(_s),Ea=_i?_i.prototype:r,xs=Ea?Ea.valueOf:r,Yd=Ea?Ea.toString:r;function E(t){if(zt(t)&&!ze(t)&&!(t instanceof Xe)){if(t instanceof sr)return t;if(ut.call(t,"__wrapped__"))return Jf(t)}return new sr(t)}var qo=function(){function t(){}return function(i){if(!Rt(i))return{};if(Gd)return Gd(i);t.prototype=i;var a=new t;return t.prototype=r,a}}();function Sa(){}function sr(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}E.templateSettings={escape:Fe,evaluate:dt,interpolate:Je,variable:"",imports:{_:E}},E.prototype=Sa.prototype,E.prototype.constructor=E,sr.prototype=qo(Sa.prototype),sr.prototype.constructor=sr;function Xe(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ue,this.__views__=[]}function cy(){var t=new Xe(this.__wrapped__);return t.__actions__=zn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=zn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=zn(this.__views__),t}function dy(){if(this.__filtered__){var t=new Xe(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function fy(){var t=this.__wrapped__.value(),i=this.__dir__,a=ze(t),h=i<0,b=a?t.length:0,S=C1(0,b,this.__views__),M=S.start,P=S.end,L=P-M,ie=h?P:M-1,oe=this.__iteratees__,le=oe.length,ye=0,xe=yn(L,this.__takeCount__);if(!a||!h&&b==L&&xe==L)return bf(t,this.__actions__);var Ie=[];e:for(;L--&&ye<xe;){ie+=i;for(var He=-1,Re=t[ie];++He<le;){var We=oe[He],Ze=We.iteratee,Xn=We.type,Nn=Ze(Re);if(Xn==G)Re=Nn;else if(!Nn){if(Xn==R)continue e;break e}}Ie[ye++]=Re}return Ie}Xe.prototype=qo(Sa.prototype),Xe.prototype.constructor=Xe;function no(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function hy(){this.__data__=ws?ws(null):{},this.size=0}function py(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function gy(t){var i=this.__data__;if(ws){var a=i[t];return a===d?r:a}return ut.call(i,t)?i[t]:r}function my(t){var i=this.__data__;return ws?i[t]!==r:ut.call(i,t)}function yy(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=ws&&i===r?d:i,this}no.prototype.clear=hy,no.prototype.delete=py,no.prototype.get=gy,no.prototype.has=my,no.prototype.set=yy;function Xr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function vy(){this.__data__=[],this.size=0}function Dy(t){var i=this.__data__,a=Aa(i,t);if(a<0)return!1;var h=i.length-1;return a==h?i.pop():ba.call(i,a,1),--this.size,!0}function by(t){var i=this.__data__,a=Aa(i,t);return a<0?r:i[a][1]}function _y(t){return Aa(this.__data__,t)>-1}function wy(t,i){var a=this.__data__,h=Aa(a,t);return h<0?(++this.size,a.push([t,i])):a[h][1]=i,this}Xr.prototype.clear=vy,Xr.prototype.delete=Dy,Xr.prototype.get=by,Xr.prototype.has=_y,Xr.prototype.set=wy;function Yr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var h=t[i];this.set(h[0],h[1])}}function xy(){this.size=0,this.__data__={hash:new no,map:new(bs||Xr),string:new no}}function Cy(t){var i=ka(this,t).delete(t);return this.size-=i?1:0,i}function Ey(t){return ka(this,t).get(t)}function Sy(t){return ka(this,t).has(t)}function Ay(t,i){var a=ka(this,t),h=a.size;return a.set(t,i),this.size+=a.size==h?0:1,this}Yr.prototype.clear=xy,Yr.prototype.delete=Cy,Yr.prototype.get=Ey,Yr.prototype.has=Sy,Yr.prototype.set=Ay;function ro(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new Yr;++i<a;)this.add(t[i])}function Fy(t){return this.__data__.set(t,d),this}function Ny(t){return this.__data__.has(t)}ro.prototype.add=ro.prototype.push=Fy,ro.prototype.has=Ny;function yr(t){var i=this.__data__=new Xr(t);this.size=i.size}function Ty(){this.__data__=new Xr,this.size=0}function Iy(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}function Ry(t){return this.__data__.get(t)}function By(t){return this.__data__.has(t)}function Oy(t,i){var a=this.__data__;if(a instanceof Xr){var h=a.__data__;if(!bs||h.length<s-1)return h.push([t,i]),this.size=++a.size,this;a=this.__data__=new Yr(h)}return a.set(t,i),this.size=a.size,this}yr.prototype.clear=Ty,yr.prototype.delete=Iy,yr.prototype.get=Ry,yr.prototype.has=By,yr.prototype.set=Oy;function Zd(t,i){var a=ze(t),h=!a&&uo(t),b=!a&&!h&&Si(t),S=!a&&!h&&!b&&Vo(t),M=a||h||b||S,P=M?Yu(t.length,Gm):[],L=P.length;for(var ie in t)(i||ut.call(t,ie))&&!(M&&(ie=="length"||b&&(ie=="offset"||ie=="parent")||S&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||Qr(ie,L)))&&P.push(ie);return P}function Jd(t){var i=t.length;return i?t[fl(0,i-1)]:r}function My(t,i){return $a(zn(t),io(i,0,t.length))}function Py(t){return $a(zn(t))}function nl(t,i,a){(a!==r&&!vr(t[i],a)||a===r&&!(i in t))&&Zr(t,i,a)}function Cs(t,i,a){var h=t[i];(!(ut.call(t,i)&&vr(h,a))||a===r&&!(i in t))&&Zr(t,i,a)}function Aa(t,i){for(var a=t.length;a--;)if(vr(t[a][0],i))return a;return-1}function zy(t,i,a,h){return wi(t,function(b,S,M){i(h,b,a(b),M)}),h}function Kd(t,i){return t&&Rr(i,cn(i),t)}function jy(t,i){return t&&Rr(i,kn(i),t)}function Zr(t,i,a){i=="__proto__"&&_a?_a(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function rl(t,i){for(var a=-1,h=i.length,b=X(h),S=t==null;++a<h;)b[a]=S?r:zl(t,i[a]);return b}function io(t,i,a){return t===t&&(a!==r&&(t=t<=a?t:a),i!==r&&(t=t>=i?t:i)),t}function ar(t,i,a,h,b,S){var M,P=i&g,L=i&v,ie=i&w;if(a&&(M=b?a(t,h,b,S):a(t)),M!==r)return M;if(!Rt(t))return t;var oe=ze(t);if(oe){if(M=S1(t),!P)return zn(t,M)}else{var le=vn(t),ye=le==Qe||le==kt;if(Si(t))return xf(t,P);if(le==qe||le==ge||ye&&!b){if(M=L||ye?{}:Lf(t),!P)return L?g1(t,jy(M,t)):p1(t,Kd(M,t))}else{if(!nt[le])return b?t:{};M=A1(t,le,P)}}S||(S=new yr);var xe=S.get(t);if(xe)return xe;S.set(t,M),yh(t)?t.forEach(function(Re){M.add(ar(Re,i,a,Re,t,S))}):gh(t)&&t.forEach(function(Re,We){M.set(We,ar(Re,i,a,We,t,S))});var Ie=ie?L?xl:wl:L?kn:cn,He=oe?r:Ie(t);return ir(He||t,function(Re,We){He&&(We=Re,Re=t[We]),Cs(M,We,ar(Re,i,a,We,t,S))}),M}function ky(t){var i=cn(t);return function(a){return Qd(a,t,i)}}function Qd(t,i,a){var h=a.length;if(t==null)return!h;for(t=mt(t);h--;){var b=a[h],S=i[b],M=t[b];if(M===r&&!(b in t)||!S(M))return!1}return!0}function ef(t,i,a){if(typeof t!="function")throw new or(c);return Is(function(){t.apply(r,a)},i)}function Es(t,i,a,h){var b=-1,S=ca,M=!0,P=t.length,L=[],ie=i.length;if(!P)return L;a&&(i=Nt(i,Vn(a))),h?(S=Hu,M=!1):i.length>=s&&(S=vs,M=!1,i=new ro(i));e:for(;++b<P;){var oe=t[b],le=a==null?oe:a(oe);if(oe=h||oe!==0?oe:0,M&&le===le){for(var ye=ie;ye--;)if(i[ye]===le)continue e;L.push(oe)}else S(i,le,h)||L.push(oe)}return L}var wi=Ff(Ir),tf=Ff(ol,!0);function $y(t,i){var a=!0;return wi(t,function(h,b,S){return a=!!i(h,b,S),a}),a}function Fa(t,i,a){for(var h=-1,b=t.length;++h<b;){var S=t[h],M=i(S);if(M!=null&&(P===r?M===M&&!Wn(M):a(M,P)))var P=M,L=S}return L}function qy(t,i,a,h){var b=t.length;for(a=Le(a),a<0&&(a=-a>b?0:b+a),h=h===r||h>b?b:Le(h),h<0&&(h+=b),h=a>h?0:Dh(h);a<h;)t[a++]=i;return t}function nf(t,i){var a=[];return wi(t,function(h,b,S){i(h,b,S)&&a.push(h)}),a}function pn(t,i,a,h,b){var S=-1,M=t.length;for(a||(a=N1),b||(b=[]);++S<M;){var P=t[S];i>0&&a(P)?i>1?pn(P,i-1,a,h,b):Di(b,P):h||(b[b.length]=P)}return b}var il=Nf(),rf=Nf(!0);function Ir(t,i){return t&&il(t,i,cn)}function ol(t,i){return t&&rf(t,i,cn)}function Na(t,i){return vi(i,function(a){return ei(t[a])})}function oo(t,i){i=Ci(i,t);for(var a=0,h=i.length;t!=null&&a<h;)t=t[Br(i[a++])];return a&&a==h?t:r}function of(t,i,a){var h=i(t);return ze(t)?h:Di(h,a(t))}function An(t){return t==null?t===r?sn:on:to&&to in mt(t)?x1(t):P1(t)}function sl(t,i){return t>i}function Ly(t,i){return t!=null&&ut.call(t,i)}function Hy(t,i){return t!=null&&i in mt(t)}function Gy(t,i,a){return t>=yn(i,a)&&t<tn(i,a)}function al(t,i,a){for(var h=a?Hu:ca,b=t[0].length,S=t.length,M=S,P=X(S),L=1/0,ie=[];M--;){var oe=t[M];M&&i&&(oe=Nt(oe,Vn(i))),L=yn(oe.length,L),P[M]=!a&&(i||b>=120&&oe.length>=120)?new ro(M&&oe):r}oe=t[0];var le=-1,ye=P[0];e:for(;++le<b&&ie.length<L;){var xe=oe[le],Ie=i?i(xe):xe;if(xe=a||xe!==0?xe:0,!(ye?vs(ye,Ie):h(ie,Ie,a))){for(M=S;--M;){var He=P[M];if(!(He?vs(He,Ie):h(t[M],Ie,a)))continue e}ye&&ye.push(Ie),ie.push(xe)}}return ie}function Vy(t,i,a,h){return Ir(t,function(b,S,M){i(h,a(b),S,M)}),h}function Ss(t,i,a){i=Ci(i,t),t=Uf(t,i);var h=t==null?t:t[Br(lr(i))];return h==null?r:ln(h,t,a)}function sf(t){return zt(t)&&An(t)==ge}function Uy(t){return zt(t)&&An(t)==Mt}function Wy(t){return zt(t)&&An(t)==Se}function As(t,i,a,h,b){return t===i?!0:t==null||i==null||!zt(t)&&!zt(i)?t!==t&&i!==i:Xy(t,i,a,h,As,b)}function Xy(t,i,a,h,b,S){var M=ze(t),P=ze(i),L=M?Ee:vn(t),ie=P?Ee:vn(i);L=L==ge?qe:L,ie=ie==ge?qe:ie;var oe=L==qe,le=ie==qe,ye=L==ie;if(ye&&Si(t)){if(!Si(i))return!1;M=!0,oe=!1}if(ye&&!oe)return S||(S=new yr),M||Vo(t)?kf(t,i,a,h,b,S):_1(t,i,L,a,h,b,S);if(!(a&x)){var xe=oe&&ut.call(t,"__wrapped__"),Ie=le&&ut.call(i,"__wrapped__");if(xe||Ie){var He=xe?t.value():t,Re=Ie?i.value():i;return S||(S=new yr),b(He,Re,a,h,S)}}return ye?(S||(S=new yr),w1(t,i,a,h,b,S)):!1}function Yy(t){return zt(t)&&vn(t)==et}function ul(t,i,a,h){var b=a.length,S=b,M=!h;if(t==null)return!S;for(t=mt(t);b--;){var P=a[b];if(M&&P[2]?P[1]!==t[P[0]]:!(P[0]in t))return!1}for(;++b<S;){P=a[b];var L=P[0],ie=t[L],oe=P[1];if(M&&P[2]){if(ie===r&&!(L in t))return!1}else{var le=new yr;if(h)var ye=h(ie,oe,L,t,i,le);if(!(ye===r?As(oe,ie,x|y,h,le):ye))return!1}}return!0}function af(t){if(!Rt(t)||I1(t))return!1;var i=ei(t)?Ym:Li;return i.test(ao(t))}function Zy(t){return zt(t)&&An(t)==Bt}function Jy(t){return zt(t)&&vn(t)==lt}function Ky(t){return zt(t)&&Ua(t.length)&&!!st[An(t)]}function uf(t){return typeof t=="function"?t:t==null?$n:typeof t=="object"?ze(t)?df(t[0],t[1]):cf(t):Th(t)}function ll(t){if(!Ts(t))return ty(t);var i=[];for(var a in mt(t))ut.call(t,a)&&a!="constructor"&&i.push(a);return i}function Qy(t){if(!Rt(t))return M1(t);var i=Ts(t),a=[];for(var h in t)h=="constructor"&&(i||!ut.call(t,h))||a.push(h);return a}function cl(t,i){return t<i}function lf(t,i){var a=-1,h=jn(t)?X(t.length):[];return wi(t,function(b,S,M){h[++a]=i(b,S,M)}),h}function cf(t){var i=El(t);return i.length==1&&i[0][2]?Gf(i[0][0],i[0][1]):function(a){return a===t||ul(a,t,i)}}function df(t,i){return Al(t)&&Hf(i)?Gf(Br(t),i):function(a){var h=zl(a,t);return h===r&&h===i?jl(a,t):As(i,h,x|y)}}function Ta(t,i,a,h,b){t!==i&&il(i,function(S,M){if(b||(b=new yr),Rt(S))e1(t,i,M,a,Ta,h,b);else{var P=h?h(Nl(t,M),S,M+"",t,i,b):r;P===r&&(P=S),nl(t,M,P)}},kn)}function e1(t,i,a,h,b,S,M){var P=Nl(t,a),L=Nl(i,a),ie=M.get(L);if(ie){nl(t,a,ie);return}var oe=S?S(P,L,a+"",t,i,M):r,le=oe===r;if(le){var ye=ze(L),xe=!ye&&Si(L),Ie=!ye&&!xe&&Vo(L);oe=L,ye||xe||Ie?ze(P)?oe=P:Lt(P)?oe=zn(P):xe?(le=!1,oe=xf(L,!0)):Ie?(le=!1,oe=Cf(L,!0)):oe=[]:Rs(L)||uo(L)?(oe=P,uo(P)?oe=bh(P):(!Rt(P)||ei(P))&&(oe=Lf(L))):le=!1}le&&(M.set(L,oe),b(oe,L,h,S,M),M.delete(L)),nl(t,a,oe)}function ff(t,i){var a=t.length;if(a)return i+=i<0?a:0,Qr(i,a)?t[i]:r}function hf(t,i,a){i.length?i=Nt(i,function(S){return ze(S)?function(M){return oo(M,S.length===1?S[0]:S)}:S}):i=[$n];var h=-1;i=Nt(i,Vn(Te()));var b=lf(t,function(S,M,P){var L=Nt(i,function(ie){return ie(S)});return{criteria:L,index:++h,value:S}});return Am(b,function(S,M){return h1(S,M,a)})}function t1(t,i){return pf(t,i,function(a,h){return jl(t,h)})}function pf(t,i,a){for(var h=-1,b=i.length,S={};++h<b;){var M=i[h],P=oo(t,M);a(P,M)&&Fs(S,Ci(M,t),P)}return S}function n1(t){return function(i){return oo(i,t)}}function dl(t,i,a,h){var b=h?Sm:Oo,S=-1,M=i.length,P=t;for(t===i&&(i=zn(i)),a&&(P=Nt(t,Vn(a)));++S<M;)for(var L=0,ie=i[S],oe=a?a(ie):ie;(L=b(P,oe,L,h))>-1;)P!==t&&ba.call(P,L,1),ba.call(t,L,1);return t}function gf(t,i){for(var a=t?i.length:0,h=a-1;a--;){var b=i[a];if(a==h||b!==S){var S=b;Qr(b)?ba.call(t,b,1):gl(t,b)}}return t}function fl(t,i){return t+xa(Xd()*(i-t+1))}function r1(t,i,a,h){for(var b=-1,S=tn(wa((i-t)/(a||1)),0),M=X(S);S--;)M[h?S:++b]=t,t+=a;return M}function hl(t,i){var a="";if(!t||i<1||i>se)return a;do i%2&&(a+=t),i=xa(i/2),i&&(t+=t);while(i);return a}function Ve(t,i){return Tl(Vf(t,i,$n),t+"")}function i1(t){return Jd(Uo(t))}function o1(t,i){var a=Uo(t);return $a(a,io(i,0,a.length))}function Fs(t,i,a,h){if(!Rt(t))return t;i=Ci(i,t);for(var b=-1,S=i.length,M=S-1,P=t;P!=null&&++b<S;){var L=Br(i[b]),ie=a;if(L==="__proto__"||L==="constructor"||L==="prototype")return t;if(b!=M){var oe=P[L];ie=h?h(oe,L,P):r,ie===r&&(ie=Rt(oe)?oe:Qr(i[b+1])?[]:{})}Cs(P,L,ie),P=P[L]}return t}var mf=Ca?function(t,i){return Ca.set(t,i),t}:$n,s1=_a?function(t,i){return _a(t,"toString",{configurable:!0,enumerable:!1,value:$l(i),writable:!0})}:$n;function a1(t){return $a(Uo(t))}function ur(t,i,a){var h=-1,b=t.length;i<0&&(i=-i>b?0:b+i),a=a>b?b:a,a<0&&(a+=b),b=i>a?0:a-i>>>0,i>>>=0;for(var S=X(b);++h<b;)S[h]=t[h+i];return S}function u1(t,i){var a;return wi(t,function(h,b,S){return a=i(h,b,S),!a}),!!a}function Ia(t,i,a){var h=0,b=t==null?h:t.length;if(typeof i=="number"&&i===i&&b<=ce){for(;h<b;){var S=h+b>>>1,M=t[S];M!==null&&!Wn(M)&&(a?M<=i:M<i)?h=S+1:b=S}return b}return pl(t,i,$n,a)}function pl(t,i,a,h){var b=0,S=t==null?0:t.length;if(S===0)return 0;i=a(i);for(var M=i!==i,P=i===null,L=Wn(i),ie=i===r;b<S;){var oe=xa((b+S)/2),le=a(t[oe]),ye=le!==r,xe=le===null,Ie=le===le,He=Wn(le);if(M)var Re=h||Ie;else ie?Re=Ie&&(h||ye):P?Re=Ie&&ye&&(h||!xe):L?Re=Ie&&ye&&!xe&&(h||!He):xe||He?Re=!1:Re=h?le<=i:le<i;Re?b=oe+1:S=oe}return yn(S,de)}function yf(t,i){for(var a=-1,h=t.length,b=0,S=[];++a<h;){var M=t[a],P=i?i(M):M;if(!a||!vr(P,L)){var L=P;S[b++]=M===0?0:M}}return S}function vf(t){return typeof t=="number"?t:Wn(t)?re:+t}function Un(t){if(typeof t=="string")return t;if(ze(t))return Nt(t,Un)+"";if(Wn(t))return Yd?Yd.call(t):"";var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}function xi(t,i,a){var h=-1,b=ca,S=t.length,M=!0,P=[],L=P;if(a)M=!1,b=Hu;else if(S>=s){var ie=i?null:D1(t);if(ie)return fa(ie);M=!1,b=vs,L=new ro}else L=i?[]:P;e:for(;++h<S;){var oe=t[h],le=i?i(oe):oe;if(oe=a||oe!==0?oe:0,M&&le===le){for(var ye=L.length;ye--;)if(L[ye]===le)continue e;i&&L.push(le),P.push(oe)}else b(L,le,a)||(L!==P&&L.push(le),P.push(oe))}return P}function gl(t,i){return i=Ci(i,t),t=Uf(t,i),t==null||delete t[Br(lr(i))]}function Df(t,i,a,h){return Fs(t,i,a(oo(t,i)),h)}function Ra(t,i,a,h){for(var b=t.length,S=h?b:-1;(h?S--:++S<b)&&i(t[S],S,t););return a?ur(t,h?0:S,h?S+1:b):ur(t,h?S+1:0,h?b:S)}function bf(t,i){var a=t;return a instanceof Xe&&(a=a.value()),Gu(i,function(h,b){return b.func.apply(b.thisArg,Di([h],b.args))},a)}function ml(t,i,a){var h=t.length;if(h<2)return h?xi(t[0]):[];for(var b=-1,S=X(h);++b<h;)for(var M=t[b],P=-1;++P<h;)P!=b&&(S[b]=Es(S[b]||M,t[P],i,a));return xi(pn(S,1),i,a)}function _f(t,i,a){for(var h=-1,b=t.length,S=i.length,M={};++h<b;){var P=h<S?i[h]:r;a(M,t[h],P)}return M}function yl(t){return Lt(t)?t:[]}function vl(t){return typeof t=="function"?t:$n}function Ci(t,i){return ze(t)?t:Al(t,i)?[t]:Zf(ot(t))}var l1=Ve;function Ei(t,i,a){var h=t.length;return a=a===r?h:a,!i&&a>=h?t:ur(t,i,a)}var wf=Zm||function(t){return be.clearTimeout(t)};function xf(t,i){if(i)return t.slice();var a=t.length,h=Hd?Hd(a):new t.constructor(a);return t.copy(h),h}function Dl(t){var i=new t.constructor(t.byteLength);return new va(i).set(new va(t)),i}function c1(t,i){var a=i?Dl(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function d1(t){var i=new t.constructor(t.source,mn.exec(t));return i.lastIndex=t.lastIndex,i}function f1(t){return xs?mt(xs.call(t)):{}}function Cf(t,i){var a=i?Dl(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Ef(t,i){if(t!==i){var a=t!==r,h=t===null,b=t===t,S=Wn(t),M=i!==r,P=i===null,L=i===i,ie=Wn(i);if(!P&&!ie&&!S&&t>i||S&&M&&L&&!P&&!ie||h&&M&&L||!a&&L||!b)return 1;if(!h&&!S&&!ie&&t<i||ie&&a&&b&&!h&&!S||P&&a&&b||!M&&b||!L)return-1}return 0}function h1(t,i,a){for(var h=-1,b=t.criteria,S=i.criteria,M=b.length,P=a.length;++h<M;){var L=Ef(b[h],S[h]);if(L){if(h>=P)return L;var ie=a[h];return L*(ie=="desc"?-1:1)}}return t.index-i.index}function Sf(t,i,a,h){for(var b=-1,S=t.length,M=a.length,P=-1,L=i.length,ie=tn(S-M,0),oe=X(L+ie),le=!h;++P<L;)oe[P]=i[P];for(;++b<M;)(le||b<S)&&(oe[a[b]]=t[b]);for(;ie--;)oe[P++]=t[b++];return oe}function Af(t,i,a,h){for(var b=-1,S=t.length,M=-1,P=a.length,L=-1,ie=i.length,oe=tn(S-P,0),le=X(oe+ie),ye=!h;++b<oe;)le[b]=t[b];for(var xe=b;++L<ie;)le[xe+L]=i[L];for(;++M<P;)(ye||b<S)&&(le[xe+a[M]]=t[b++]);return le}function zn(t,i){var a=-1,h=t.length;for(i||(i=X(h));++a<h;)i[a]=t[a];return i}function Rr(t,i,a,h){var b=!a;a||(a={});for(var S=-1,M=i.length;++S<M;){var P=i[S],L=h?h(a[P],t[P],P,a,t):r;L===r&&(L=t[P]),b?Zr(a,P,L):Cs(a,P,L)}return a}function p1(t,i){return Rr(t,Sl(t),i)}function g1(t,i){return Rr(t,$f(t),i)}function Ba(t,i){return function(a,h){var b=ze(a)?bm:zy,S=i?i():{};return b(a,t,Te(h,2),S)}}function Lo(t){return Ve(function(i,a){var h=-1,b=a.length,S=b>1?a[b-1]:r,M=b>2?a[2]:r;for(S=t.length>3&&typeof S=="function"?(b--,S):r,M&&Fn(a[0],a[1],M)&&(S=b<3?r:S,b=1),i=mt(i);++h<b;){var P=a[h];P&&t(i,P,h,S)}return i})}function Ff(t,i){return function(a,h){if(a==null)return a;if(!jn(a))return t(a,h);for(var b=a.length,S=i?b:-1,M=mt(a);(i?S--:++S<b)&&h(M[S],S,M)!==!1;);return a}}function Nf(t){return function(i,a,h){for(var b=-1,S=mt(i),M=h(i),P=M.length;P--;){var L=M[t?P:++b];if(a(S[L],L,S)===!1)break}return i}}function m1(t,i,a){var h=i&_,b=Ns(t);function S(){var M=this&&this!==be&&this instanceof S?b:t;return M.apply(h?a:this,arguments)}return S}function Tf(t){return function(i){i=ot(i);var a=Mo(i)?mr(i):r,h=a?a[0]:i.charAt(0),b=a?Ei(a,1).join(""):i.slice(1);return h[t]()+b}}function Ho(t){return function(i){return Gu(Fh(Ah(i).replace(yi,"")),t,"")}}function Ns(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=qo(t.prototype),h=t.apply(a,i);return Rt(h)?h:a}}function y1(t,i,a){var h=Ns(t);function b(){for(var S=arguments.length,M=X(S),P=S,L=Go(b);P--;)M[P]=arguments[P];var ie=S<3&&M[0]!==L&&M[S-1]!==L?[]:bi(M,L);if(S-=ie.length,S<a)return Mf(t,i,Oa,b.placeholder,r,M,ie,r,r,a-S);var oe=this&&this!==be&&this instanceof b?h:t;return ln(oe,this,M)}return b}function If(t){return function(i,a,h){var b=mt(i);if(!jn(i)){var S=Te(a,3);i=cn(i),a=function(P){return S(b[P],P,b)}}var M=t(i,a,h);return M>-1?b[S?i[M]:M]:r}}function Rf(t){return Kr(function(i){var a=i.length,h=a,b=sr.prototype.thru;for(t&&i.reverse();h--;){var S=i[h];if(typeof S!="function")throw new or(c);if(b&&!M&&ja(S)=="wrapper")var M=new sr([],!0)}for(h=M?h:a;++h<a;){S=i[h];var P=ja(S),L=P=="wrapper"?Cl(S):r;L&&Fl(L[0])&&L[1]==(Y|I|j|ne)&&!L[4].length&&L[9]==1?M=M[ja(L[0])].apply(M,L[3]):M=S.length==1&&Fl(S)?M[P]():M.thru(S)}return function(){var ie=arguments,oe=ie[0];if(M&&ie.length==1&&ze(oe))return M.plant(oe).value();for(var le=0,ye=a?i[le].apply(this,ie):oe;++le<a;)ye=i[le].call(this,ye);return ye}})}function Oa(t,i,a,h,b,S,M,P,L,ie){var oe=i&Y,le=i&_,ye=i&m,xe=i&(I|F),Ie=i&O,He=ye?r:Ns(t);function Re(){for(var We=arguments.length,Ze=X(We),Xn=We;Xn--;)Ze[Xn]=arguments[Xn];if(xe)var Nn=Go(Re),Yn=Nm(Ze,Nn);if(h&&(Ze=Sf(Ze,h,b,xe)),S&&(Ze=Af(Ze,S,M,xe)),We-=Yn,xe&&We<ie){var Ht=bi(Ze,Nn);return Mf(t,i,Oa,Re.placeholder,a,Ze,Ht,P,L,ie-We)}var Dr=le?a:this,ni=ye?Dr[t]:t;return We=Ze.length,P?Ze=z1(Ze,P):Ie&&We>1&&Ze.reverse(),oe&&L<We&&(Ze.length=L),this&&this!==be&&this instanceof Re&&(ni=He||Ns(ni)),ni.apply(Dr,Ze)}return Re}function Bf(t,i){return function(a,h){return Vy(a,t,i(h),{})}}function Ma(t,i){return function(a,h){var b;if(a===r&&h===r)return i;if(a!==r&&(b=a),h!==r){if(b===r)return h;typeof a=="string"||typeof h=="string"?(a=Un(a),h=Un(h)):(a=vf(a),h=vf(h)),b=t(a,h)}return b}}function bl(t){return Kr(function(i){return i=Nt(i,Vn(Te())),Ve(function(a){var h=this;return t(i,function(b){return ln(b,h,a)})})})}function Pa(t,i){i=i===r?" ":Un(i);var a=i.length;if(a<2)return a?hl(i,t):i;var h=hl(i,wa(t/Po(i)));return Mo(i)?Ei(mr(h),0,t).join(""):h.slice(0,t)}function v1(t,i,a,h){var b=i&_,S=Ns(t);function M(){for(var P=-1,L=arguments.length,ie=-1,oe=h.length,le=X(oe+L),ye=this&&this!==be&&this instanceof M?S:t;++ie<oe;)le[ie]=h[ie];for(;L--;)le[ie++]=arguments[++P];return ln(ye,b?a:this,le)}return M}function Of(t){return function(i,a,h){return h&&typeof h!="number"&&Fn(i,a,h)&&(a=h=r),i=ti(i),a===r?(a=i,i=0):a=ti(a),h=h===r?i<a?1:-1:ti(h),r1(i,a,h,t)}}function za(t){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=cr(i),a=cr(a)),t(i,a)}}function Mf(t,i,a,h,b,S,M,P,L,ie){var oe=i&I,le=oe?M:r,ye=oe?r:M,xe=oe?S:r,Ie=oe?r:S;i|=oe?j:q,i&=~(oe?q:j),i&C||(i&=-4);var He=[t,i,b,xe,le,Ie,ye,P,L,ie],Re=a.apply(r,He);return Fl(t)&&Wf(Re,He),Re.placeholder=h,Xf(Re,t,i)}function _l(t){var i=en[t];return function(a,h){if(a=cr(a),h=h==null?0:yn(Le(h),292),h&&Wd(a)){var b=(ot(a)+"e").split("e"),S=i(b[0]+"e"+(+b[1]+h));return b=(ot(S)+"e").split("e"),+(b[0]+"e"+(+b[1]-h))}return i(a)}}var D1=ko&&1/fa(new ko([,-0]))[1]==J?function(t){return new ko(t)}:Hl;function Pf(t){return function(i){var a=vn(i);return a==et?Ju(i):a==lt?Pm(i):Fm(i,t(i))}}function Jr(t,i,a,h,b,S,M,P){var L=i&m;if(!L&&typeof t!="function")throw new or(c);var ie=h?h.length:0;if(ie||(i&=-97,h=b=r),M=M===r?M:tn(Le(M),0),P=P===r?P:Le(P),ie-=b?b.length:0,i&q){var oe=h,le=b;h=b=r}var ye=L?r:Cl(t),xe=[t,i,a,h,b,oe,le,S,M,P];if(ye&&O1(xe,ye),t=xe[0],i=xe[1],a=xe[2],h=xe[3],b=xe[4],P=xe[9]=xe[9]===r?L?0:t.length:tn(xe[9]-ie,0),!P&&i&(I|F)&&(i&=-25),!i||i==_)var Ie=m1(t,i,a);else i==I||i==F?Ie=y1(t,i,P):(i==j||i==(_|j))&&!b.length?Ie=v1(t,i,a,h):Ie=Oa.apply(r,xe);var He=ye?mf:Wf;return Xf(He(Ie,xe),t,i)}function zf(t,i,a,h){return t===r||vr(t,jo[a])&&!ut.call(h,a)?i:t}function jf(t,i,a,h,b,S){return Rt(t)&&Rt(i)&&(S.set(i,t),Ta(t,i,r,jf,S),S.delete(i)),t}function b1(t){return Rs(t)?r:t}function kf(t,i,a,h,b,S){var M=a&x,P=t.length,L=i.length;if(P!=L&&!(M&&L>P))return!1;var ie=S.get(t),oe=S.get(i);if(ie&&oe)return ie==i&&oe==t;var le=-1,ye=!0,xe=a&y?new ro:r;for(S.set(t,i),S.set(i,t);++le<P;){var Ie=t[le],He=i[le];if(h)var Re=M?h(He,Ie,le,i,t,S):h(Ie,He,le,t,i,S);if(Re!==r){if(Re)continue;ye=!1;break}if(xe){if(!Vu(i,function(We,Ze){if(!vs(xe,Ze)&&(Ie===We||b(Ie,We,a,h,S)))return xe.push(Ze)})){ye=!1;break}}else if(!(Ie===He||b(Ie,He,a,h,S))){ye=!1;break}}return S.delete(t),S.delete(i),ye}function _1(t,i,a,h,b,S,M){switch(a){case gt:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Mt:return!(t.byteLength!=i.byteLength||!S(new va(t),new va(i)));case De:case Se:case tt:return vr(+t,+i);case Et:return t.name==i.name&&t.message==i.message;case Bt:case Ot:return t==i+"";case et:var P=Ju;case lt:var L=h&x;if(P||(P=fa),t.size!=i.size&&!L)return!1;var ie=M.get(t);if(ie)return ie==i;h|=y,M.set(t,i);var oe=kf(P(t),P(i),h,b,S,M);return M.delete(t),oe;case St:if(xs)return xs.call(t)==xs.call(i)}return!1}function w1(t,i,a,h,b,S){var M=a&x,P=wl(t),L=P.length,ie=wl(i),oe=ie.length;if(L!=oe&&!M)return!1;for(var le=L;le--;){var ye=P[le];if(!(M?ye in i:ut.call(i,ye)))return!1}var xe=S.get(t),Ie=S.get(i);if(xe&&Ie)return xe==i&&Ie==t;var He=!0;S.set(t,i),S.set(i,t);for(var Re=M;++le<L;){ye=P[le];var We=t[ye],Ze=i[ye];if(h)var Xn=M?h(Ze,We,ye,i,t,S):h(We,Ze,ye,t,i,S);if(!(Xn===r?We===Ze||b(We,Ze,a,h,S):Xn)){He=!1;break}Re||(Re=ye=="constructor")}if(He&&!Re){var Nn=t.constructor,Yn=i.constructor;Nn!=Yn&&"constructor"in t&&"constructor"in i&&!(typeof Nn=="function"&&Nn instanceof Nn&&typeof Yn=="function"&&Yn instanceof Yn)&&(He=!1)}return S.delete(t),S.delete(i),He}function Kr(t){return Tl(Vf(t,r,eh),t+"")}function wl(t){return of(t,cn,Sl)}function xl(t){return of(t,kn,$f)}var Cl=Ca?function(t){return Ca.get(t)}:Hl;function ja(t){for(var i=t.name+"",a=$o[i],h=ut.call($o,i)?a.length:0;h--;){var b=a[h],S=b.func;if(S==null||S==t)return b.name}return i}function Go(t){var i=ut.call(E,"placeholder")?E:t;return i.placeholder}function Te(){var t=E.iteratee||ql;return t=t===ql?uf:t,arguments.length?t(arguments[0],arguments[1]):t}function ka(t,i){var a=t.__data__;return T1(i)?a[typeof i=="string"?"string":"hash"]:a.map}function El(t){for(var i=cn(t),a=i.length;a--;){var h=i[a],b=t[h];i[a]=[h,b,Hf(b)]}return i}function so(t,i){var a=Bm(t,i);return af(a)?a:r}function x1(t){var i=ut.call(t,to),a=t[to];try{t[to]=r;var h=!0}catch{}var b=ma.call(t);return h&&(i?t[to]=a:delete t[to]),b}var Sl=Qu?function(t){return t==null?[]:(t=mt(t),vi(Qu(t),function(i){return Vd.call(t,i)}))}:Gl,$f=Qu?function(t){for(var i=[];t;)Di(i,Sl(t)),t=Da(t);return i}:Gl,vn=An;(el&&vn(new el(new ArrayBuffer(1)))!=gt||bs&&vn(new bs)!=et||tl&&vn(tl.resolve())!=we||ko&&vn(new ko)!=lt||_s&&vn(new _s)!=Jt)&&(vn=function(t){var i=An(t),a=i==qe?t.constructor:r,h=a?ao(a):"";if(h)switch(h){case oy:return gt;case sy:return et;case ay:return we;case uy:return lt;case ly:return Jt}return i});function C1(t,i,a){for(var h=-1,b=a.length;++h<b;){var S=a[h],M=S.size;switch(S.type){case"drop":t+=M;break;case"dropRight":i-=M;break;case"take":i=yn(i,t+M);break;case"takeRight":t=tn(t,i-M);break}}return{start:t,end:i}}function E1(t){var i=t.match(Hn);return i?i[1].split(zi):[]}function qf(t,i,a){i=Ci(i,t);for(var h=-1,b=i.length,S=!1;++h<b;){var M=Br(i[h]);if(!(S=t!=null&&a(t,M)))break;t=t[M]}return S||++h!=b?S:(b=t==null?0:t.length,!!b&&Ua(b)&&Qr(M,b)&&(ze(t)||uo(t)))}function S1(t){var i=t.length,a=new t.constructor(i);return i&&typeof t[0]=="string"&&ut.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Lf(t){return typeof t.constructor=="function"&&!Ts(t)?qo(Da(t)):{}}function A1(t,i,a){var h=t.constructor;switch(i){case Mt:return Dl(t);case De:case Se:return new h(+t);case gt:return c1(t,a);case Vt:case bt:case ct:case Pt:case hn:case an:case _t:case At:case Kt:return Cf(t,a);case et:return new h;case tt:case Ot:return new h(t);case Bt:return d1(t);case lt:return new h;case St:return f1(t)}}function F1(t,i){var a=i.length;if(!a)return t;var h=a-1;return i[h]=(a>1?"& ":"")+i[h],i=i.join(a>2?", ":" "),t.replace(On,`{
/* [wrapped with `+i+`] */
`)}function N1(t){return ze(t)||uo(t)||!!(Ud&&t&&t[Ud])}function Qr(t,i){var a=typeof t;return i=i??se,!!i&&(a=="number"||a!="symbol"&&Gi.test(t))&&t>-1&&t%1==0&&t<i}function Fn(t,i,a){if(!Rt(a))return!1;var h=typeof i;return(h=="number"?jn(a)&&Qr(i,a.length):h=="string"&&i in a)?vr(a[i],t):!1}function Al(t,i){if(ze(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Wn(t)?!0:wt.test(t)||!Ft.test(t)||i!=null&&t in mt(i)}function T1(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function Fl(t){var i=ja(t),a=E[i];if(typeof a!="function"||!(i in Xe.prototype))return!1;if(t===a)return!0;var h=Cl(a);return!!h&&t===h[0]}function I1(t){return!!Ld&&Ld in t}var R1=pa?ei:Vl;function Ts(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||jo;return t===a}function Hf(t){return t===t&&!Rt(t)}function Gf(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==r||t in mt(a))}}function B1(t){var i=Ga(t,function(h){return a.size===f&&a.clear(),h}),a=i.cache;return i}function O1(t,i){var a=t[1],h=i[1],b=a|h,S=b<(_|m|Y),M=h==Y&&a==I||h==Y&&a==ne&&t[7].length<=i[8]||h==(Y|ne)&&i[7].length<=i[8]&&a==I;if(!(S||M))return t;h&_&&(t[2]=i[2],b|=a&_?0:C);var P=i[3];if(P){var L=t[3];t[3]=L?Sf(L,P,i[4]):P,t[4]=L?bi(t[3],p):i[4]}return P=i[5],P&&(L=t[5],t[5]=L?Af(L,P,i[6]):P,t[6]=L?bi(t[5],p):i[6]),P=i[7],P&&(t[7]=P),h&Y&&(t[8]=t[8]==null?i[8]:yn(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=b,t}function M1(t){var i=[];if(t!=null)for(var a in mt(t))i.push(a);return i}function P1(t){return ma.call(t)}function Vf(t,i,a){return i=tn(i===r?t.length-1:i,0),function(){for(var h=arguments,b=-1,S=tn(h.length-i,0),M=X(S);++b<S;)M[b]=h[i+b];b=-1;for(var P=X(i+1);++b<i;)P[b]=h[b];return P[i]=a(M),ln(t,this,P)}}function Uf(t,i){return i.length<2?t:oo(t,ur(i,0,-1))}function z1(t,i){for(var a=t.length,h=yn(i.length,a),b=zn(t);h--;){var S=i[h];t[h]=Qr(S,a)?b[S]:r}return t}function Nl(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var Wf=Yf(mf),Is=Km||function(t,i){return be.setTimeout(t,i)},Tl=Yf(s1);function Xf(t,i,a){var h=i+"";return Tl(t,F1(h,j1(E1(h),a)))}function Yf(t){var i=0,a=0;return function(){var h=ny(),b=Z-(h-a);if(a=h,b>0){if(++i>=ee)return arguments[0]}else i=0;return t.apply(r,arguments)}}function $a(t,i){var a=-1,h=t.length,b=h-1;for(i=i===r?h:i;++a<i;){var S=fl(a,b),M=t[S];t[S]=t[a],t[a]=M}return t.length=i,t}var Zf=B1(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Ut,function(a,h,b,S){i.push(b?S.replace(fi,"$1"):h||a)}),i});function Br(t){if(typeof t=="string"||Wn(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}function ao(t){if(t!=null){try{return ga.call(t)}catch{}try{return t+""}catch{}}return""}function j1(t,i){return ir(ve,function(a){var h="_."+a[0];i&a[1]&&!ca(t,h)&&t.push(h)}),t.sort()}function Jf(t){if(t instanceof Xe)return t.clone();var i=new sr(t.__wrapped__,t.__chain__);return i.__actions__=zn(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function k1(t,i,a){(a?Fn(t,i,a):i===r)?i=1:i=tn(Le(i),0);var h=t==null?0:t.length;if(!h||i<1)return[];for(var b=0,S=0,M=X(wa(h/i));b<h;)M[S++]=ur(t,b,b+=i);return M}function $1(t){for(var i=-1,a=t==null?0:t.length,h=0,b=[];++i<a;){var S=t[i];S&&(b[h++]=S)}return b}function q1(){var t=arguments.length;if(!t)return[];for(var i=X(t-1),a=arguments[0],h=t;h--;)i[h-1]=arguments[h];return Di(ze(a)?zn(a):[a],pn(i,1))}var L1=Ve(function(t,i){return Lt(t)?Es(t,pn(i,1,Lt,!0)):[]}),H1=Ve(function(t,i){var a=lr(i);return Lt(a)&&(a=r),Lt(t)?Es(t,pn(i,1,Lt,!0),Te(a,2)):[]}),G1=Ve(function(t,i){var a=lr(i);return Lt(a)&&(a=r),Lt(t)?Es(t,pn(i,1,Lt,!0),r,a):[]});function V1(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:Le(i),ur(t,i<0?0:i,h)):[]}function U1(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:Le(i),i=h-i,ur(t,0,i<0?0:i)):[]}function W1(t,i){return t&&t.length?Ra(t,Te(i,3),!0,!0):[]}function X1(t,i){return t&&t.length?Ra(t,Te(i,3),!0):[]}function Y1(t,i,a,h){var b=t==null?0:t.length;return b?(a&&typeof a!="number"&&Fn(t,i,a)&&(a=0,h=b),qy(t,i,a,h)):[]}function Kf(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var b=a==null?0:Le(a);return b<0&&(b=tn(h+b,0)),da(t,Te(i,3),b)}function Qf(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var b=h-1;return a!==r&&(b=Le(a),b=a<0?tn(h+b,0):yn(b,h-1)),da(t,Te(i,3),b,!0)}function eh(t){var i=t==null?0:t.length;return i?pn(t,1):[]}function Z1(t){var i=t==null?0:t.length;return i?pn(t,J):[]}function J1(t,i){var a=t==null?0:t.length;return a?(i=i===r?1:Le(i),pn(t,i)):[]}function K1(t){for(var i=-1,a=t==null?0:t.length,h={};++i<a;){var b=t[i];h[b[0]]=b[1]}return h}function th(t){return t&&t.length?t[0]:r}function Q1(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var b=a==null?0:Le(a);return b<0&&(b=tn(h+b,0)),Oo(t,i,b)}function ev(t){var i=t==null?0:t.length;return i?ur(t,0,-1):[]}var tv=Ve(function(t){var i=Nt(t,yl);return i.length&&i[0]===t[0]?al(i):[]}),nv=Ve(function(t){var i=lr(t),a=Nt(t,yl);return i===lr(a)?i=r:a.pop(),a.length&&a[0]===t[0]?al(a,Te(i,2)):[]}),rv=Ve(function(t){var i=lr(t),a=Nt(t,yl);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===t[0]?al(a,r,i):[]});function iv(t,i){return t==null?"":ey.call(t,i)}function lr(t){var i=t==null?0:t.length;return i?t[i-1]:r}function ov(t,i,a){var h=t==null?0:t.length;if(!h)return-1;var b=h;return a!==r&&(b=Le(a),b=b<0?tn(h+b,0):yn(b,h-1)),i===i?jm(t,i,b):da(t,Od,b,!0)}function sv(t,i){return t&&t.length?ff(t,Le(i)):r}var av=Ve(nh);function nh(t,i){return t&&t.length&&i&&i.length?dl(t,i):t}function uv(t,i,a){return t&&t.length&&i&&i.length?dl(t,i,Te(a,2)):t}function lv(t,i,a){return t&&t.length&&i&&i.length?dl(t,i,r,a):t}var cv=Kr(function(t,i){var a=t==null?0:t.length,h=rl(t,i);return gf(t,Nt(i,function(b){return Qr(b,a)?+b:b}).sort(Ef)),h});function dv(t,i){var a=[];if(!(t&&t.length))return a;var h=-1,b=[],S=t.length;for(i=Te(i,3);++h<S;){var M=t[h];i(M,h,t)&&(a.push(M),b.push(h))}return gf(t,b),a}function Il(t){return t==null?t:iy.call(t)}function fv(t,i,a){var h=t==null?0:t.length;return h?(a&&typeof a!="number"&&Fn(t,i,a)?(i=0,a=h):(i=i==null?0:Le(i),a=a===r?h:Le(a)),ur(t,i,a)):[]}function hv(t,i){return Ia(t,i)}function pv(t,i,a){return pl(t,i,Te(a,2))}function gv(t,i){var a=t==null?0:t.length;if(a){var h=Ia(t,i);if(h<a&&vr(t[h],i))return h}return-1}function mv(t,i){return Ia(t,i,!0)}function yv(t,i,a){return pl(t,i,Te(a,2),!0)}function vv(t,i){var a=t==null?0:t.length;if(a){var h=Ia(t,i,!0)-1;if(vr(t[h],i))return h}return-1}function Dv(t){return t&&t.length?yf(t):[]}function bv(t,i){return t&&t.length?yf(t,Te(i,2)):[]}function _v(t){var i=t==null?0:t.length;return i?ur(t,1,i):[]}function wv(t,i,a){return t&&t.length?(i=a||i===r?1:Le(i),ur(t,0,i<0?0:i)):[]}function xv(t,i,a){var h=t==null?0:t.length;return h?(i=a||i===r?1:Le(i),i=h-i,ur(t,i<0?0:i,h)):[]}function Cv(t,i){return t&&t.length?Ra(t,Te(i,3),!1,!0):[]}function Ev(t,i){return t&&t.length?Ra(t,Te(i,3)):[]}var Sv=Ve(function(t){return xi(pn(t,1,Lt,!0))}),Av=Ve(function(t){var i=lr(t);return Lt(i)&&(i=r),xi(pn(t,1,Lt,!0),Te(i,2))}),Fv=Ve(function(t){var i=lr(t);return i=typeof i=="function"?i:r,xi(pn(t,1,Lt,!0),r,i)});function Nv(t){return t&&t.length?xi(t):[]}function Tv(t,i){return t&&t.length?xi(t,Te(i,2)):[]}function Iv(t,i){return i=typeof i=="function"?i:r,t&&t.length?xi(t,r,i):[]}function Rl(t){if(!(t&&t.length))return[];var i=0;return t=vi(t,function(a){if(Lt(a))return i=tn(a.length,i),!0}),Yu(i,function(a){return Nt(t,Uu(a))})}function rh(t,i){if(!(t&&t.length))return[];var a=Rl(t);return i==null?a:Nt(a,function(h){return ln(i,r,h)})}var Rv=Ve(function(t,i){return Lt(t)?Es(t,i):[]}),Bv=Ve(function(t){return ml(vi(t,Lt))}),Ov=Ve(function(t){var i=lr(t);return Lt(i)&&(i=r),ml(vi(t,Lt),Te(i,2))}),Mv=Ve(function(t){var i=lr(t);return i=typeof i=="function"?i:r,ml(vi(t,Lt),r,i)}),Pv=Ve(Rl);function zv(t,i){return _f(t||[],i||[],Cs)}function jv(t,i){return _f(t||[],i||[],Fs)}var kv=Ve(function(t){var i=t.length,a=i>1?t[i-1]:r;return a=typeof a=="function"?(t.pop(),a):r,rh(t,a)});function ih(t){var i=E(t);return i.__chain__=!0,i}function $v(t,i){return i(t),t}function qa(t,i){return i(t)}var qv=Kr(function(t){var i=t.length,a=i?t[0]:0,h=this.__wrapped__,b=function(S){return rl(S,t)};return i>1||this.__actions__.length||!(h instanceof Xe)||!Qr(a)?this.thru(b):(h=h.slice(a,+a+(i?1:0)),h.__actions__.push({func:qa,args:[b],thisArg:r}),new sr(h,this.__chain__).thru(function(S){return i&&!S.length&&S.push(r),S}))});function Lv(){return ih(this)}function Hv(){return new sr(this.value(),this.__chain__)}function Gv(){this.__values__===r&&(this.__values__=vh(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function Vv(){return this}function Uv(t){for(var i,a=this;a instanceof Sa;){var h=Jf(a);h.__index__=0,h.__values__=r,i?b.__wrapped__=h:i=h;var b=h;a=a.__wrapped__}return b.__wrapped__=t,i}function Wv(){var t=this.__wrapped__;if(t instanceof Xe){var i=t;return this.__actions__.length&&(i=new Xe(this)),i=i.reverse(),i.__actions__.push({func:qa,args:[Il],thisArg:r}),new sr(i,this.__chain__)}return this.thru(Il)}function Xv(){return bf(this.__wrapped__,this.__actions__)}var Yv=Ba(function(t,i,a){ut.call(t,a)?++t[a]:Zr(t,a,1)});function Zv(t,i,a){var h=ze(t)?Rd:$y;return a&&Fn(t,i,a)&&(i=r),h(t,Te(i,3))}function Jv(t,i){var a=ze(t)?vi:nf;return a(t,Te(i,3))}var Kv=If(Kf),Qv=If(Qf);function eD(t,i){return pn(La(t,i),1)}function tD(t,i){return pn(La(t,i),J)}function nD(t,i,a){return a=a===r?1:Le(a),pn(La(t,i),a)}function oh(t,i){var a=ze(t)?ir:wi;return a(t,Te(i,3))}function sh(t,i){var a=ze(t)?_m:tf;return a(t,Te(i,3))}var rD=Ba(function(t,i,a){ut.call(t,a)?t[a].push(i):Zr(t,a,[i])});function iD(t,i,a,h){t=jn(t)?t:Uo(t),a=a&&!h?Le(a):0;var b=t.length;return a<0&&(a=tn(b+a,0)),Wa(t)?a<=b&&t.indexOf(i,a)>-1:!!b&&Oo(t,i,a)>-1}var oD=Ve(function(t,i,a){var h=-1,b=typeof i=="function",S=jn(t)?X(t.length):[];return wi(t,function(M){S[++h]=b?ln(i,M,a):Ss(M,i,a)}),S}),sD=Ba(function(t,i,a){Zr(t,a,i)});function La(t,i){var a=ze(t)?Nt:lf;return a(t,Te(i,3))}function aD(t,i,a,h){return t==null?[]:(ze(i)||(i=i==null?[]:[i]),a=h?r:a,ze(a)||(a=a==null?[]:[a]),hf(t,i,a))}var uD=Ba(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]});function lD(t,i,a){var h=ze(t)?Gu:Pd,b=arguments.length<3;return h(t,Te(i,4),a,b,wi)}function cD(t,i,a){var h=ze(t)?wm:Pd,b=arguments.length<3;return h(t,Te(i,4),a,b,tf)}function dD(t,i){var a=ze(t)?vi:nf;return a(t,Va(Te(i,3)))}function fD(t){var i=ze(t)?Jd:i1;return i(t)}function hD(t,i,a){(a?Fn(t,i,a):i===r)?i=1:i=Le(i);var h=ze(t)?My:o1;return h(t,i)}function pD(t){var i=ze(t)?Py:a1;return i(t)}function gD(t){if(t==null)return 0;if(jn(t))return Wa(t)?Po(t):t.length;var i=vn(t);return i==et||i==lt?t.size:ll(t).length}function mD(t,i,a){var h=ze(t)?Vu:u1;return a&&Fn(t,i,a)&&(i=r),h(t,Te(i,3))}var yD=Ve(function(t,i){if(t==null)return[];var a=i.length;return a>1&&Fn(t,i[0],i[1])?i=[]:a>2&&Fn(i[0],i[1],i[2])&&(i=[i[0]]),hf(t,pn(i,1),[])}),Ha=Jm||function(){return be.Date.now()};function vD(t,i){if(typeof i!="function")throw new or(c);return t=Le(t),function(){if(--t<1)return i.apply(this,arguments)}}function ah(t,i,a){return i=a?r:i,i=t&&i==null?t.length:i,Jr(t,Y,r,r,r,r,i)}function uh(t,i){var a;if(typeof i!="function")throw new or(c);return t=Le(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=r),a}}var Bl=Ve(function(t,i,a){var h=_;if(a.length){var b=bi(a,Go(Bl));h|=j}return Jr(t,h,i,a,b)}),lh=Ve(function(t,i,a){var h=_|m;if(a.length){var b=bi(a,Go(lh));h|=j}return Jr(i,h,t,a,b)});function ch(t,i,a){i=a?r:i;var h=Jr(t,I,r,r,r,r,r,i);return h.placeholder=ch.placeholder,h}function dh(t,i,a){i=a?r:i;var h=Jr(t,F,r,r,r,r,r,i);return h.placeholder=dh.placeholder,h}function fh(t,i,a){var h,b,S,M,P,L,ie=0,oe=!1,le=!1,ye=!0;if(typeof t!="function")throw new or(c);i=cr(i)||0,Rt(a)&&(oe=!!a.leading,le="maxWait"in a,S=le?tn(cr(a.maxWait)||0,i):S,ye="trailing"in a?!!a.trailing:ye);function xe(Ht){var Dr=h,ni=b;return h=b=r,ie=Ht,M=t.apply(ni,Dr),M}function Ie(Ht){return ie=Ht,P=Is(We,i),oe?xe(Ht):M}function He(Ht){var Dr=Ht-L,ni=Ht-ie,Ih=i-Dr;return le?yn(Ih,S-ni):Ih}function Re(Ht){var Dr=Ht-L,ni=Ht-ie;return L===r||Dr>=i||Dr<0||le&&ni>=S}function We(){var Ht=Ha();if(Re(Ht))return Ze(Ht);P=Is(We,He(Ht))}function Ze(Ht){return P=r,ye&&h?xe(Ht):(h=b=r,M)}function Xn(){P!==r&&wf(P),ie=0,h=L=b=P=r}function Nn(){return P===r?M:Ze(Ha())}function Yn(){var Ht=Ha(),Dr=Re(Ht);if(h=arguments,b=this,L=Ht,Dr){if(P===r)return Ie(L);if(le)return wf(P),P=Is(We,i),xe(L)}return P===r&&(P=Is(We,i)),M}return Yn.cancel=Xn,Yn.flush=Nn,Yn}var DD=Ve(function(t,i){return ef(t,1,i)}),bD=Ve(function(t,i,a){return ef(t,cr(i)||0,a)});function _D(t){return Jr(t,O)}function Ga(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new or(c);var a=function(){var h=arguments,b=i?i.apply(this,h):h[0],S=a.cache;if(S.has(b))return S.get(b);var M=t.apply(this,h);return a.cache=S.set(b,M)||S,M};return a.cache=new(Ga.Cache||Yr),a}Ga.Cache=Yr;function Va(t){if(typeof t!="function")throw new or(c);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function wD(t){return uh(2,t)}var xD=l1(function(t,i){i=i.length==1&&ze(i[0])?Nt(i[0],Vn(Te())):Nt(pn(i,1),Vn(Te()));var a=i.length;return Ve(function(h){for(var b=-1,S=yn(h.length,a);++b<S;)h[b]=i[b].call(this,h[b]);return ln(t,this,h)})}),Ol=Ve(function(t,i){var a=bi(i,Go(Ol));return Jr(t,j,r,i,a)}),hh=Ve(function(t,i){var a=bi(i,Go(hh));return Jr(t,q,r,i,a)}),CD=Kr(function(t,i){return Jr(t,ne,r,r,r,i)});function ED(t,i){if(typeof t!="function")throw new or(c);return i=i===r?i:Le(i),Ve(t,i)}function SD(t,i){if(typeof t!="function")throw new or(c);return i=i==null?0:tn(Le(i),0),Ve(function(a){var h=a[i],b=Ei(a,0,i);return h&&Di(b,h),ln(t,this,b)})}function AD(t,i,a){var h=!0,b=!0;if(typeof t!="function")throw new or(c);return Rt(a)&&(h="leading"in a?!!a.leading:h,b="trailing"in a?!!a.trailing:b),fh(t,i,{leading:h,maxWait:i,trailing:b})}function FD(t){return ah(t,1)}function ND(t,i){return Ol(vl(i),t)}function TD(){if(!arguments.length)return[];var t=arguments[0];return ze(t)?t:[t]}function ID(t){return ar(t,w)}function RD(t,i){return i=typeof i=="function"?i:r,ar(t,w,i)}function BD(t){return ar(t,g|w)}function OD(t,i){return i=typeof i=="function"?i:r,ar(t,g|w,i)}function MD(t,i){return i==null||Qd(t,i,cn(i))}function vr(t,i){return t===i||t!==t&&i!==i}var PD=za(sl),zD=za(function(t,i){return t>=i}),uo=sf(function(){return arguments}())?sf:function(t){return zt(t)&&ut.call(t,"callee")&&!Vd.call(t,"callee")},ze=X.isArray,jD=Qt?Vn(Qt):Uy;function jn(t){return t!=null&&Ua(t.length)&&!ei(t)}function Lt(t){return zt(t)&&jn(t)}function kD(t){return t===!0||t===!1||zt(t)&&An(t)==De}var Si=Qm||Vl,$D=Pn?Vn(Pn):Wy;function qD(t){return zt(t)&&t.nodeType===1&&!Rs(t)}function LD(t){if(t==null)return!0;if(jn(t)&&(ze(t)||typeof t=="string"||typeof t.splice=="function"||Si(t)||Vo(t)||uo(t)))return!t.length;var i=vn(t);if(i==et||i==lt)return!t.size;if(Ts(t))return!ll(t).length;for(var a in t)if(ut.call(t,a))return!1;return!0}function HD(t,i){return As(t,i)}function GD(t,i,a){a=typeof a=="function"?a:r;var h=a?a(t,i):r;return h===r?As(t,i,r,a):!!h}function Ml(t){if(!zt(t))return!1;var i=An(t);return i==Et||i==Be||typeof t.message=="string"&&typeof t.name=="string"&&!Rs(t)}function VD(t){return typeof t=="number"&&Wd(t)}function ei(t){if(!Rt(t))return!1;var i=An(t);return i==Qe||i==kt||i==Oe||i==$t}function ph(t){return typeof t=="number"&&t==Le(t)}function Ua(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=se}function Rt(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function zt(t){return t!=null&&typeof t=="object"}var gh=rr?Vn(rr):Yy;function UD(t,i){return t===i||ul(t,i,El(i))}function WD(t,i,a){return a=typeof a=="function"?a:r,ul(t,i,El(i),a)}function XD(t){return mh(t)&&t!=+t}function YD(t){if(R1(t))throw new Pe(u);return af(t)}function ZD(t){return t===null}function JD(t){return t==null}function mh(t){return typeof t=="number"||zt(t)&&An(t)==tt}function Rs(t){if(!zt(t)||An(t)!=qe)return!1;var i=Da(t);if(i===null)return!0;var a=ut.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&ga.call(a)==Wm}var Pl=Tr?Vn(Tr):Zy;function KD(t){return ph(t)&&t>=-9007199254740991&&t<=se}var yh=ys?Vn(ys):Jy;function Wa(t){return typeof t=="string"||!ze(t)&&zt(t)&&An(t)==Ot}function Wn(t){return typeof t=="symbol"||zt(t)&&An(t)==St}var Vo=eo?Vn(eo):Ky;function QD(t){return t===r}function eb(t){return zt(t)&&vn(t)==Jt}function tb(t){return zt(t)&&An(t)==wn}var nb=za(cl),rb=za(function(t,i){return t<=i});function vh(t){if(!t)return[];if(jn(t))return Wa(t)?mr(t):zn(t);if(Ds&&t[Ds])return Mm(t[Ds]());var i=vn(t),a=i==et?Ju:i==lt?fa:Uo;return a(t)}function ti(t){if(!t)return t===0?t:0;if(t=cr(t),t===J||t===-1/0){var i=t<0?-1:1;return i*U}return t===t?t:0}function Le(t){var i=ti(t),a=i%1;return i===i?a?i-a:i:0}function Dh(t){return t?io(Le(t),0,ue):0}function cr(t){if(typeof t=="number")return t;if(Wn(t))return re;if(Rt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Rt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=zd(t);var a=qi.test(t);return a||Hi.test(t)?me(t.slice(2),a?2:8):$i.test(t)?re:+t}function bh(t){return Rr(t,kn(t))}function ib(t){return t?io(Le(t),-9007199254740991,se):t===0?t:0}function ot(t){return t==null?"":Un(t)}var ob=Lo(function(t,i){if(Ts(i)||jn(i)){Rr(i,cn(i),t);return}for(var a in i)ut.call(i,a)&&Cs(t,a,i[a])}),_h=Lo(function(t,i){Rr(i,kn(i),t)}),Xa=Lo(function(t,i,a,h){Rr(i,kn(i),t,h)}),sb=Lo(function(t,i,a,h){Rr(i,cn(i),t,h)}),ab=Kr(rl);function ub(t,i){var a=qo(t);return i==null?a:Kd(a,i)}var lb=Ve(function(t,i){t=mt(t);var a=-1,h=i.length,b=h>2?i[2]:r;for(b&&Fn(i[0],i[1],b)&&(h=1);++a<h;)for(var S=i[a],M=kn(S),P=-1,L=M.length;++P<L;){var ie=M[P],oe=t[ie];(oe===r||vr(oe,jo[ie])&&!ut.call(t,ie))&&(t[ie]=S[ie])}return t}),cb=Ve(function(t){return t.push(r,jf),ln(wh,r,t)});function db(t,i){return Bd(t,Te(i,3),Ir)}function fb(t,i){return Bd(t,Te(i,3),ol)}function hb(t,i){return t==null?t:il(t,Te(i,3),kn)}function pb(t,i){return t==null?t:rf(t,Te(i,3),kn)}function gb(t,i){return t&&Ir(t,Te(i,3))}function mb(t,i){return t&&ol(t,Te(i,3))}function yb(t){return t==null?[]:Na(t,cn(t))}function vb(t){return t==null?[]:Na(t,kn(t))}function zl(t,i,a){var h=t==null?r:oo(t,i);return h===r?a:h}function Db(t,i){return t!=null&&qf(t,i,Ly)}function jl(t,i){return t!=null&&qf(t,i,Hy)}var bb=Bf(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=ma.call(i)),t[i]=a},$l($n)),_b=Bf(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=ma.call(i)),ut.call(t,i)?t[i].push(a):t[i]=[a]},Te),wb=Ve(Ss);function cn(t){return jn(t)?Zd(t):ll(t)}function kn(t){return jn(t)?Zd(t,!0):Qy(t)}function xb(t,i){var a={};return i=Te(i,3),Ir(t,function(h,b,S){Zr(a,i(h,b,S),h)}),a}function Cb(t,i){var a={};return i=Te(i,3),Ir(t,function(h,b,S){Zr(a,b,i(h,b,S))}),a}var Eb=Lo(function(t,i,a){Ta(t,i,a)}),wh=Lo(function(t,i,a,h){Ta(t,i,a,h)}),Sb=Kr(function(t,i){var a={};if(t==null)return a;var h=!1;i=Nt(i,function(S){return S=Ci(S,t),h||(h=S.length>1),S}),Rr(t,xl(t),a),h&&(a=ar(a,g|v|w,b1));for(var b=i.length;b--;)gl(a,i[b]);return a});function Ab(t,i){return xh(t,Va(Te(i)))}var Fb=Kr(function(t,i){return t==null?{}:t1(t,i)});function xh(t,i){if(t==null)return{};var a=Nt(xl(t),function(h){return[h]});return i=Te(i),pf(t,a,function(h,b){return i(h,b[0])})}function Nb(t,i,a){i=Ci(i,t);var h=-1,b=i.length;for(b||(b=1,t=r);++h<b;){var S=t==null?r:t[Br(i[h])];S===r&&(h=b,S=a),t=ei(S)?S.call(t):S}return t}function Tb(t,i,a){return t==null?t:Fs(t,i,a)}function Ib(t,i,a,h){return h=typeof h=="function"?h:r,t==null?t:Fs(t,i,a,h)}var Ch=Pf(cn),Eh=Pf(kn);function Rb(t,i,a){var h=ze(t),b=h||Si(t)||Vo(t);if(i=Te(i,4),a==null){var S=t&&t.constructor;b?a=h?new S:[]:Rt(t)?a=ei(S)?qo(Da(t)):{}:a={}}return(b?ir:Ir)(t,function(M,P,L){return i(a,M,P,L)}),a}function Bb(t,i){return t==null?!0:gl(t,i)}function Ob(t,i,a){return t==null?t:Df(t,i,vl(a))}function Mb(t,i,a,h){return h=typeof h=="function"?h:r,t==null?t:Df(t,i,vl(a),h)}function Uo(t){return t==null?[]:Zu(t,cn(t))}function Pb(t){return t==null?[]:Zu(t,kn(t))}function zb(t,i,a){return a===r&&(a=i,i=r),a!==r&&(a=cr(a),a=a===a?a:0),i!==r&&(i=cr(i),i=i===i?i:0),io(cr(t),i,a)}function jb(t,i,a){return i=ti(i),a===r?(a=i,i=0):a=ti(a),t=cr(t),Gy(t,i,a)}function kb(t,i,a){if(a&&typeof a!="boolean"&&Fn(t,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&i===r?(t=0,i=1):(t=ti(t),i===r?(i=t,t=0):i=ti(i)),t>i){var h=t;t=i,i=h}if(a||t%1||i%1){var b=Xd();return yn(t+b*(i-t+he("1e-"+((b+"").length-1))),i)}return fl(t,i)}var $b=Ho(function(t,i,a){return i=i.toLowerCase(),t+(a?Sh(i):i)});function Sh(t){return kl(ot(t).toLowerCase())}function Ah(t){return t=ot(t),t&&t.replace(Cn,Tm).replace(gr,"")}function qb(t,i,a){t=ot(t),i=Un(i);var h=t.length;a=a===r?h:io(Le(a),0,h);var b=a;return a-=i.length,a>=0&&t.slice(a,b)==i}function Lb(t){return t=ot(t),t&&pe.test(t)?t.replace(H,Im):t}function Hb(t){return t=ot(t),t&&qt.test(t)?t.replace(Rn,"\\$&"):t}var Gb=Ho(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),Vb=Ho(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),Ub=Tf("toLowerCase");function Wb(t,i,a){t=ot(t),i=Le(i);var h=i?Po(t):0;if(!i||h>=i)return t;var b=(i-h)/2;return Pa(xa(b),a)+t+Pa(wa(b),a)}function Xb(t,i,a){t=ot(t),i=Le(i);var h=i?Po(t):0;return i&&h<i?t+Pa(i-h,a):t}function Yb(t,i,a){t=ot(t),i=Le(i);var h=i?Po(t):0;return i&&h<i?Pa(i-h,a)+t:t}function Zb(t,i,a){return a||i==null?i=0:i&&(i=+i),ry(ot(t).replace(Wt,""),i||0)}function Jb(t,i,a){return(a?Fn(t,i,a):i===r)?i=1:i=Le(i),hl(ot(t),i)}function Kb(){var t=arguments,i=ot(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var Qb=Ho(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()});function e_(t,i,a){return a&&typeof a!="number"&&Fn(t,i,a)&&(i=a=r),a=a===r?ue:a>>>0,a?(t=ot(t),t&&(typeof i=="string"||i!=null&&!Pl(i))&&(i=Un(i),!i&&Mo(t))?Ei(mr(t),0,a):t.split(i,a)):[]}var t_=Ho(function(t,i,a){return t+(a?" ":"")+kl(i)});function n_(t,i,a){return t=ot(t),a=a==null?0:io(Le(a),0,t.length),i=Un(i),t.slice(a,a+i.length)==i}function r_(t,i,a){var h=E.templateSettings;a&&Fn(t,i,a)&&(i=r),t=ot(t),i=Xa({},i,h,zf);var b=Xa({},i.imports,h.imports,zf),S=cn(b),M=Zu(b,S),P,L,ie=0,oe=i.interpolate||fr,le="__p += '",ye=Ku((i.escape||fr).source+"|"+oe.source+"|"+(oe===Je?er:fr).source+"|"+(i.evaluate||fr).source+"|$","g"),xe="//# sourceURL="+(ut.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ms+"]")+`
`;t.replace(ye,function(Re,We,Ze,Xn,Nn,Yn){return Ze||(Ze=Xn),le+=t.slice(ie,Yn).replace(Fr,Rm),We&&(P=!0,le+=`' +
__e(`+We+`) +
'`),Nn&&(L=!0,le+=`';
`+Nn+`;
__p += '`),Ze&&(le+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),ie=Yn+Re.length,Re}),le+=`';
`;var Ie=ut.call(i,"variable")&&i.variable;if(!Ie)le=`with (obj) {
`+le+`
}
`;else if(ki.test(Ie))throw new Pe(l);le=(L?le.replace(Qn,""):le).replace(un,"$1").replace(xn,"$1;"),le="function("+(Ie||"obj")+`) {
`+(Ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+le+`return __p
}`;var He=Nh(function(){return rt(S,xe+"return "+le).apply(r,M)});if(He.source=le,Ml(He))throw He;return He}function i_(t){return ot(t).toLowerCase()}function o_(t){return ot(t).toUpperCase()}function s_(t,i,a){if(t=ot(t),t&&(a||i===r))return zd(t);if(!t||!(i=Un(i)))return t;var h=mr(t),b=mr(i),S=jd(h,b),M=kd(h,b)+1;return Ei(h,S,M).join("")}function a_(t,i,a){if(t=ot(t),t&&(a||i===r))return t.slice(0,qd(t)+1);if(!t||!(i=Un(i)))return t;var h=mr(t),b=kd(h,mr(i))+1;return Ei(h,0,b).join("")}function u_(t,i,a){if(t=ot(t),t&&(a||i===r))return t.replace(Wt,"");if(!t||!(i=Un(i)))return t;var h=mr(t),b=jd(h,mr(i));return Ei(h,b).join("")}function l_(t,i){var a=V,h=K;if(Rt(i)){var b="separator"in i?i.separator:b;a="length"in i?Le(i.length):a,h="omission"in i?Un(i.omission):h}t=ot(t);var S=t.length;if(Mo(t)){var M=mr(t);S=M.length}if(a>=S)return t;var P=a-Po(h);if(P<1)return h;var L=M?Ei(M,0,P).join(""):t.slice(0,P);if(b===r)return L+h;if(M&&(P+=L.length-P),Pl(b)){if(t.slice(P).search(b)){var ie,oe=L;for(b.global||(b=Ku(b.source,ot(mn.exec(b))+"g")),b.lastIndex=0;ie=b.exec(oe);)var le=ie.index;L=L.slice(0,le===r?P:le)}}else if(t.indexOf(Un(b),P)!=P){var ye=L.lastIndexOf(b);ye>-1&&(L=L.slice(0,ye))}return L+h}function c_(t){return t=ot(t),t&&Q.test(t)?t.replace(gn,km):t}var d_=Ho(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),kl=Tf("toUpperCase");function Fh(t,i,a){return t=ot(t),i=a?r:i,i===r?Om(t)?Lm(t):Em(t):t.match(i)||[]}var Nh=Ve(function(t,i){try{return ln(t,r,i)}catch(a){return Ml(a)?a:new Pe(a)}}),f_=Kr(function(t,i){return ir(i,function(a){a=Br(a),Zr(t,a,Bl(t[a],t))}),t});function h_(t){var i=t==null?0:t.length,a=Te();return t=i?Nt(t,function(h){if(typeof h[1]!="function")throw new or(c);return[a(h[0]),h[1]]}):[],Ve(function(h){for(var b=-1;++b<i;){var S=t[b];if(ln(S[0],this,h))return ln(S[1],this,h)}})}function p_(t){return ky(ar(t,g))}function $l(t){return function(){return t}}function g_(t,i){return t==null||t!==t?i:t}var m_=Rf(),y_=Rf(!0);function $n(t){return t}function ql(t){return uf(typeof t=="function"?t:ar(t,g))}function v_(t){return cf(ar(t,g))}function D_(t,i){return df(t,ar(i,g))}var b_=Ve(function(t,i){return function(a){return Ss(a,t,i)}}),__=Ve(function(t,i){return function(a){return Ss(t,a,i)}});function Ll(t,i,a){var h=cn(i),b=Na(i,h);a==null&&!(Rt(i)&&(b.length||!h.length))&&(a=i,i=t,t=this,b=Na(i,cn(i)));var S=!(Rt(a)&&"chain"in a)||!!a.chain,M=ei(t);return ir(b,function(P){var L=i[P];t[P]=L,M&&(t.prototype[P]=function(){var ie=this.__chain__;if(S||ie){var oe=t(this.__wrapped__),le=oe.__actions__=zn(this.__actions__);return le.push({func:L,args:arguments,thisArg:t}),oe.__chain__=ie,oe}return L.apply(t,Di([this.value()],arguments))})}),t}function w_(){return be._===this&&(be._=Xm),this}function Hl(){}function x_(t){return t=Le(t),Ve(function(i){return ff(i,t)})}var C_=bl(Nt),E_=bl(Rd),S_=bl(Vu);function Th(t){return Al(t)?Uu(Br(t)):n1(t)}function A_(t){return function(i){return t==null?r:oo(t,i)}}var F_=Of(),N_=Of(!0);function Gl(){return[]}function Vl(){return!1}function T_(){return{}}function I_(){return""}function R_(){return!0}function B_(t,i){if(t=Le(t),t<1||t>se)return[];var a=ue,h=yn(t,ue);i=Te(i),t-=ue;for(var b=Yu(h,i);++a<t;)i(a);return b}function O_(t){return ze(t)?Nt(t,Br):Wn(t)?[t]:zn(Zf(ot(t)))}function M_(t){var i=++Um;return ot(t)+i}var P_=Ma(function(t,i){return t+i},0),z_=_l("ceil"),j_=Ma(function(t,i){return t/i},1),k_=_l("floor");function $_(t){return t&&t.length?Fa(t,$n,sl):r}function q_(t,i){return t&&t.length?Fa(t,Te(i,2),sl):r}function L_(t){return Md(t,$n)}function H_(t,i){return Md(t,Te(i,2))}function G_(t){return t&&t.length?Fa(t,$n,cl):r}function V_(t,i){return t&&t.length?Fa(t,Te(i,2),cl):r}var U_=Ma(function(t,i){return t*i},1),W_=_l("round"),X_=Ma(function(t,i){return t-i},0);function Y_(t){return t&&t.length?Xu(t,$n):0}function Z_(t,i){return t&&t.length?Xu(t,Te(i,2)):0}return E.after=vD,E.ary=ah,E.assign=ob,E.assignIn=_h,E.assignInWith=Xa,E.assignWith=sb,E.at=ab,E.before=uh,E.bind=Bl,E.bindAll=f_,E.bindKey=lh,E.castArray=TD,E.chain=ih,E.chunk=k1,E.compact=$1,E.concat=q1,E.cond=h_,E.conforms=p_,E.constant=$l,E.countBy=Yv,E.create=ub,E.curry=ch,E.curryRight=dh,E.debounce=fh,E.defaults=lb,E.defaultsDeep=cb,E.defer=DD,E.delay=bD,E.difference=L1,E.differenceBy=H1,E.differenceWith=G1,E.drop=V1,E.dropRight=U1,E.dropRightWhile=W1,E.dropWhile=X1,E.fill=Y1,E.filter=Jv,E.flatMap=eD,E.flatMapDeep=tD,E.flatMapDepth=nD,E.flatten=eh,E.flattenDeep=Z1,E.flattenDepth=J1,E.flip=_D,E.flow=m_,E.flowRight=y_,E.fromPairs=K1,E.functions=yb,E.functionsIn=vb,E.groupBy=rD,E.initial=ev,E.intersection=tv,E.intersectionBy=nv,E.intersectionWith=rv,E.invert=bb,E.invertBy=_b,E.invokeMap=oD,E.iteratee=ql,E.keyBy=sD,E.keys=cn,E.keysIn=kn,E.map=La,E.mapKeys=xb,E.mapValues=Cb,E.matches=v_,E.matchesProperty=D_,E.memoize=Ga,E.merge=Eb,E.mergeWith=wh,E.method=b_,E.methodOf=__,E.mixin=Ll,E.negate=Va,E.nthArg=x_,E.omit=Sb,E.omitBy=Ab,E.once=wD,E.orderBy=aD,E.over=C_,E.overArgs=xD,E.overEvery=E_,E.overSome=S_,E.partial=Ol,E.partialRight=hh,E.partition=uD,E.pick=Fb,E.pickBy=xh,E.property=Th,E.propertyOf=A_,E.pull=av,E.pullAll=nh,E.pullAllBy=uv,E.pullAllWith=lv,E.pullAt=cv,E.range=F_,E.rangeRight=N_,E.rearg=CD,E.reject=dD,E.remove=dv,E.rest=ED,E.reverse=Il,E.sampleSize=hD,E.set=Tb,E.setWith=Ib,E.shuffle=pD,E.slice=fv,E.sortBy=yD,E.sortedUniq=Dv,E.sortedUniqBy=bv,E.split=e_,E.spread=SD,E.tail=_v,E.take=wv,E.takeRight=xv,E.takeRightWhile=Cv,E.takeWhile=Ev,E.tap=$v,E.throttle=AD,E.thru=qa,E.toArray=vh,E.toPairs=Ch,E.toPairsIn=Eh,E.toPath=O_,E.toPlainObject=bh,E.transform=Rb,E.unary=FD,E.union=Sv,E.unionBy=Av,E.unionWith=Fv,E.uniq=Nv,E.uniqBy=Tv,E.uniqWith=Iv,E.unset=Bb,E.unzip=Rl,E.unzipWith=rh,E.update=Ob,E.updateWith=Mb,E.values=Uo,E.valuesIn=Pb,E.without=Rv,E.words=Fh,E.wrap=ND,E.xor=Bv,E.xorBy=Ov,E.xorWith=Mv,E.zip=Pv,E.zipObject=zv,E.zipObjectDeep=jv,E.zipWith=kv,E.entries=Ch,E.entriesIn=Eh,E.extend=_h,E.extendWith=Xa,Ll(E,E),E.add=P_,E.attempt=Nh,E.camelCase=$b,E.capitalize=Sh,E.ceil=z_,E.clamp=zb,E.clone=ID,E.cloneDeep=BD,E.cloneDeepWith=OD,E.cloneWith=RD,E.conformsTo=MD,E.deburr=Ah,E.defaultTo=g_,E.divide=j_,E.endsWith=qb,E.eq=vr,E.escape=Lb,E.escapeRegExp=Hb,E.every=Zv,E.find=Kv,E.findIndex=Kf,E.findKey=db,E.findLast=Qv,E.findLastIndex=Qf,E.findLastKey=fb,E.floor=k_,E.forEach=oh,E.forEachRight=sh,E.forIn=hb,E.forInRight=pb,E.forOwn=gb,E.forOwnRight=mb,E.get=zl,E.gt=PD,E.gte=zD,E.has=Db,E.hasIn=jl,E.head=th,E.identity=$n,E.includes=iD,E.indexOf=Q1,E.inRange=jb,E.invoke=wb,E.isArguments=uo,E.isArray=ze,E.isArrayBuffer=jD,E.isArrayLike=jn,E.isArrayLikeObject=Lt,E.isBoolean=kD,E.isBuffer=Si,E.isDate=$D,E.isElement=qD,E.isEmpty=LD,E.isEqual=HD,E.isEqualWith=GD,E.isError=Ml,E.isFinite=VD,E.isFunction=ei,E.isInteger=ph,E.isLength=Ua,E.isMap=gh,E.isMatch=UD,E.isMatchWith=WD,E.isNaN=XD,E.isNative=YD,E.isNil=JD,E.isNull=ZD,E.isNumber=mh,E.isObject=Rt,E.isObjectLike=zt,E.isPlainObject=Rs,E.isRegExp=Pl,E.isSafeInteger=KD,E.isSet=yh,E.isString=Wa,E.isSymbol=Wn,E.isTypedArray=Vo,E.isUndefined=QD,E.isWeakMap=eb,E.isWeakSet=tb,E.join=iv,E.kebabCase=Gb,E.last=lr,E.lastIndexOf=ov,E.lowerCase=Vb,E.lowerFirst=Ub,E.lt=nb,E.lte=rb,E.max=$_,E.maxBy=q_,E.mean=L_,E.meanBy=H_,E.min=G_,E.minBy=V_,E.stubArray=Gl,E.stubFalse=Vl,E.stubObject=T_,E.stubString=I_,E.stubTrue=R_,E.multiply=U_,E.nth=sv,E.noConflict=w_,E.noop=Hl,E.now=Ha,E.pad=Wb,E.padEnd=Xb,E.padStart=Yb,E.parseInt=Zb,E.random=kb,E.reduce=lD,E.reduceRight=cD,E.repeat=Jb,E.replace=Kb,E.result=Nb,E.round=W_,E.runInContext=$,E.sample=fD,E.size=gD,E.snakeCase=Qb,E.some=mD,E.sortedIndex=hv,E.sortedIndexBy=pv,E.sortedIndexOf=gv,E.sortedLastIndex=mv,E.sortedLastIndexBy=yv,E.sortedLastIndexOf=vv,E.startCase=t_,E.startsWith=n_,E.subtract=X_,E.sum=Y_,E.sumBy=Z_,E.template=r_,E.times=B_,E.toFinite=ti,E.toInteger=Le,E.toLength=Dh,E.toLower=i_,E.toNumber=cr,E.toSafeInteger=ib,E.toString=ot,E.toUpper=o_,E.trim=s_,E.trimEnd=a_,E.trimStart=u_,E.truncate=l_,E.unescape=c_,E.uniqueId=M_,E.upperCase=d_,E.upperFirst=kl,E.each=oh,E.eachRight=sh,E.first=th,Ll(E,function(){var t={};return Ir(E,function(i,a){ut.call(E.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),E.VERSION=o,ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){E[t].placeholder=E}),ir(["drop","take"],function(t,i){Xe.prototype[t]=function(a){a=a===r?1:tn(Le(a),0);var h=this.__filtered__&&!i?new Xe(this):this.clone();return h.__filtered__?h.__takeCount__=yn(a,h.__takeCount__):h.__views__.push({size:yn(a,ue),type:t+(h.__dir__<0?"Right":"")}),h},Xe.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),ir(["filter","map","takeWhile"],function(t,i){var a=i+1,h=a==R||a==k;Xe.prototype[t]=function(b){var S=this.clone();return S.__iteratees__.push({iteratee:Te(b,3),type:a}),S.__filtered__=S.__filtered__||h,S}}),ir(["head","last"],function(t,i){var a="take"+(i?"Right":"");Xe.prototype[t]=function(){return this[a](1).value()[0]}}),ir(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");Xe.prototype[t]=function(){return this.__filtered__?new Xe(this):this[a](1)}}),Xe.prototype.compact=function(){return this.filter($n)},Xe.prototype.find=function(t){return this.filter(t).head()},Xe.prototype.findLast=function(t){return this.reverse().find(t)},Xe.prototype.invokeMap=Ve(function(t,i){return typeof t=="function"?new Xe(this):this.map(function(a){return Ss(a,t,i)})}),Xe.prototype.reject=function(t){return this.filter(Va(Te(t)))},Xe.prototype.slice=function(t,i){t=Le(t);var a=this;return a.__filtered__&&(t>0||i<0)?new Xe(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==r&&(i=Le(i),a=i<0?a.dropRight(-i):a.take(i-t)),a)},Xe.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Xe.prototype.toArray=function(){return this.take(ue)},Ir(Xe.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),h=/^(?:head|last)$/.test(i),b=E[h?"take"+(i=="last"?"Right":""):i],S=h||/^find/.test(i);b&&(E.prototype[i]=function(){var M=this.__wrapped__,P=h?[1]:arguments,L=M instanceof Xe,ie=P[0],oe=L||ze(M),le=function(We){var Ze=b.apply(E,Di([We],P));return h&&ye?Ze[0]:Ze};oe&&a&&typeof ie=="function"&&ie.length!=1&&(L=oe=!1);var ye=this.__chain__,xe=!!this.__actions__.length,Ie=S&&!ye,He=L&&!xe;if(!S&&oe){M=He?M:new Xe(this);var Re=t.apply(M,P);return Re.__actions__.push({func:qa,args:[le],thisArg:r}),new sr(Re,ye)}return Ie&&He?t.apply(this,P):(Re=this.thru(le),Ie?h?Re.value()[0]:Re.value():Re)})}),ir(["pop","push","shift","sort","splice","unshift"],function(t){var i=ha[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",h=/^(?:pop|shift)$/.test(t);E.prototype[t]=function(){var b=arguments;if(h&&!this.__chain__){var S=this.value();return i.apply(ze(S)?S:[],b)}return this[a](function(M){return i.apply(ze(M)?M:[],b)})}}),Ir(Xe.prototype,function(t,i){var a=E[i];if(a){var h=a.name+"";ut.call($o,h)||($o[h]=[]),$o[h].push({name:i,func:a})}}),$o[Oa(r,m).name]=[{name:"wrapper",func:r}],Xe.prototype.clone=cy,Xe.prototype.reverse=dy,Xe.prototype.value=fy,E.prototype.at=qv,E.prototype.chain=Lv,E.prototype.commit=Hv,E.prototype.next=Gv,E.prototype.plant=Uv,E.prototype.reverse=Wv,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=Xv,E.prototype.first=E.prototype.head,Ds&&(E.prototype[Ds]=Vv),E},zo=Hm();Ke?((Ke.exports=zo)._=zo,Ne._=zo):be._=zo}).call(T6)}(Gs,Gs.exports)),Gs.exports}var R6=I6();const nn=ng(R6),B6=(e,n)=>e[n]?.[vt.Input]??e[n]?.[vt.InferredInput]??Zn.fromJson({Object:{}}),hs=(e,{attachGlobals:n=!0,disabled:r=!1}={})=>{const o=pt(({nodeTypes:s,globalType:u})=>{if(!(!go()||r))return{nodeTypes:s,globalType:u}});return T.useMemo(()=>{if(!o?.nodeTypes)return;const s=B6(o.nodeTypes,e);return n&&Object.entries(o?.globalType??{}).forEach(([u,c])=>s.set(u,c)),s},[o?.globalType,o?.nodeTypes,n])},ou=(e,n)=>{const r=(e??"").trim(),o=(n??"").trim();return r===o},Xs=(e,n,r={})=>{const{idField:o="id",compareFields:s}=r,u=v=>v[o]||v._id,c=new Map(n.map((v,w)=>[u(v),{...v,index:w}])),l=new Map(e.map((v,w)=>[u(v),{...v,index:w}])),d=[],f=new Set,p=new Set;e.forEach((v,w)=>{c.has(u(v))||f.add(w)}),n.forEach((v,w)=>{l.has(u(v))||p.add(w)});const g=(v,w)=>{const x=Array.from(f).filter(C=>C<w).length,y=Array.from(p).filter(C=>C<v).length,_=w-x;return v-y!==_};return e.forEach((v,w)=>{const x=c.get(u(v));if(!x)d.push({...v,originalIndex:w,_diff:{status:"added",newIndex:w}});else{const y=g(x.index,w),_=s?s(v,x):{hasChanges:!1};_.hasChanges||y?d.push({...v,originalIndex:w,_diff:{status:"modified",positionChanged:y,previousIndex:x.index,newIndex:w,..._.fields?{fields:_.fields}:{}}}):d.push({...v,originalIndex:w,_diff:{status:"unchanged"}})}}),n.forEach((v,w)=>{if(!l.has(u(v))){let x=w;for(;x<d.length&&c.get(u(d[x]))?.index<w;)x++;d.splice(x,0,{...v,originalIndex:w,isRemoved:!0,_diff:{status:"removed",previousIndex:w}})}}),d.map(({originalIndex:v,isRemoved:w,...x})=>x)},J0=(e,{trace:n,decisionGraph:r})=>{const o=Object.values(n).find(u=>u.id===e)?.input;if(typeof o!="object"||Array.isArray(o))return o;const s=Object.fromEntries(Object.values(n).map(u=>{const c=r.nodes.find(l=>l.id===u.id);return!c||c.type==="outputNode"?null:[u.name,u.output]}).filter(u=>!!u));return{...o,$nodes:s}},K0=({id:e,manager:n})=>{const r=Zt(),o=hs(e,{attachGlobals:!1}),{nodeName:s,nodeTrace:u,inputData:c,nodeSnapshot:l}=pt(({simulate:x,decisionGraph:y})=>({nodeName:y.nodes.find(_=>_.id===e)?.name,nodeTrace:$e(x).with({result:ke.nonNullable},({result:_})=>_.trace[e]).otherwise(()=>null),inputData:$e(x).with({result:ke.nonNullable},({result:_})=>J0(e,{trace:_.trace,decisionGraph:y})).otherwise(()=>null),nodeSnapshot:$e(x).with({result:ke.nonNullable},({result:_})=>_.snapshot.nodes.find(m=>m.id===e)?.content).otherwise(()=>null)})),{disabled:d,configurable:f,content:p,globalType:g}=pt(({disabled:x,configurable:y,decisionGraph:_,globalType:m})=>({disabled:x,configurable:y,content:(_?.nodes??[]).find(C=>C.id===e)?.content,globalType:m})),v=T.useMemo(()=>{if(!o)return;const x=$e(p?.inputField).with(ke.string,_=>o.get(_)).otherwise(()=>o),y=p?.executionMode==="loop"?x.arrayItem():x;return Object.entries(g).forEach(([_,m])=>y.set(_,m)),y},[o,g,p?.inputField,p?.executionMode]),w=T.useMemo(()=>{if(!(!u||!c||!l))return go()?{trace:u,inputData:new lg(c),snapshot:l}:{trace:u,snapshot:l}},[u,l,c]);return A.jsx(Nw,{id:e,name:s,tableHeight:"100%",value:p,manager:n,disabled:d,configurable:f,inputData:v,debug:w,onChange:x=>{r.updateNode(e,y=>(Object.assign(y.content,x),y))}})};K0.__docgenInfo={description:"",methods:[],displayName:"TabDecisionTable",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const O6=navigator.platform.includes("Mac"),Ap={Ctrl:"⌘",Backspace:"⌫",Alt:"⌥"},mu={shortcut:e=>O6?Object.keys(Ap).reduce((n,r)=>n.replaceAll(r,Ap[r]),e):e},Fp={},Ru=(e,n)=>{const[r,o]=T.useState(()=>Fp?.[e]??n);return T.useEffect(()=>{Fp[e]=r},[r]),[r,o]};function Np(e,n=0){const r=performance.now(),o={};function s(){o.id=requestAnimationFrame(u=>{u-r>n?e():s()})}return s(),o}function Tp(e){e.id&&cancelAnimationFrame(e.id)}function M6(e,n){const[r,o]=T.useState(e?"enter":"from"),s=T.useRef({}),[u,c]=T.useState(e);return T.useEffect(function(){return Tp(s.current),e?(o("from"),c(!0),Np(()=>{o("enter")})):(o("leave"),s.current=Np(()=>{c(!1)},n)),()=>{Tp(s.current)}},[e,n]),{stage:r,shouldMount:u}}function P6({state:e,timeout:n,children:r}){const{stage:o,shouldMount:s}=M6(e,n);return r(o,s)}const Kc=({className:e,...n})=>A.jsx("div",{className:it("grl-dn__graphCard",e),...n});Kc.__docgenInfo={description:"",methods:[],displayName:"GraphCard"};var _o=(e=>(e.Blue="var(--node-color-blue)",e.Purple="var(--node-color-purple)",e.Orange="var(--node-color-orange)",e.Green="var(--node-color-green)",e))(_o||{});const Nd=({icon:e,name:n,children:r,actions:o=[],disabled:s=!1,isSelected:u=!1,noBodyPadding:c=!1,color:l="primary",onNameChange:d,menuItems:f=[],status:p,diffStatus:g,compactMode:v,listMode:w,helper:x,details:y,detailsOpen:_=!1,detailsTitle:m="Details",onDetailsClose:C})=>{const I=$e(l).with("primary",()=>_o.Blue).otherwise(F=>F);return A.jsxs("div",{className:it("grl-dn",v&&"grl-dn--compact",w&&"grl-dn--list",!g&&u&&"grl-dn--selected",p&&`grl-dn--${p}`,g&&`grl-dn--diff-${g}`),style:{"--node-color":I},onKeyDown:F=>F.stopPropagation(),children:[A.jsxs(Kc,{children:[A.jsxs("div",{className:"grl-dn__status-bar",children:[Array.isArray(x)&&x.filter(F=>!!F).map((F,j)=>A.jsx("div",{className:it("grl-dn__status-icon"),children:F},j)),p==="error"&&A.jsx("div",{className:it("grl-dn__status-icon",`grl-dn__status-icon--${p}`),children:A.jsx(os,{})}),A.jsx(rg,{status:g,style:{fontSize:16}})]}),A.jsxs("div",{className:it("grl-dn__header",v&&"compact"),children:[A.jsx("div",{className:it("grl-dn__header__icon",v&&"compact"),children:e}),A.jsx(Tw,{onChange:d,disabled:s,value:n}),f.length>0&&A.jsx("div",{className:it("grl-dn__header__actions","nodrag"),children:A.jsx(Ys,{trigger:["click"],overlayStyle:{minWidth:250},menu:{items:f},children:A.jsx(ht,{type:"text",size:"small",icon:A.jsx(pC,{})})})})]}),r&&A.jsx("div",{className:it("grl-dn__body",o.length===0&&"grl-dn__body--no-footer",c&&"grl-dn__body--no-padding"),children:r}),o.length>0&&A.jsx("div",{className:it("grl-dn__footer","nodrag"),children:A.jsx("div",{className:"grl-dn__footer__actions",children:o})})]}),A.jsx(P6,{state:_,timeout:100,children:(F,j)=>j&&A.jsx(Kc,{className:"nodrag",style:{transition:"0.1s ease-in-out",transform:F==="enter"?"translateY(0)":"translateY(-10px)",opacity:F==="enter"?1:0},children:A.jsxs("div",{className:"grl-dn__details",children:[A.jsxs("div",{className:"grl-dn__details__header",children:[A.jsx(rn.Text,{className:"grl-dn__details__header__text",children:m}),A.jsx(ht,{type:"text",size:"small",className:"grl-dn__details__header__close",icon:A.jsx(os,{style:{fontSize:8}}),onClick:C})]}),A.jsx("div",{className:"grl-dn__details__body",children:y})]})})})]})};Nd.__docgenInfo={description:"",methods:[],displayName:"DecisionNode",props:{name:{required:!1,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},type:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},helper:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(React.ReactNode | false)[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:"",defaultValue:{value:"[]",computed:!1}},status:{required:!1,tsType:{name:"union",raw:"'error' | 'success' | 'warning'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'success'"},{name:"literal",value:"'warning'"}]},description:""},diffStatus:{required:!1,tsType:{name:"union",raw:"'removed' | 'added' | 'modified' | 'moved'",elements:[{name:"literal",value:"'removed'"},{name:"literal",value:"'added'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'moved'"}]},description:""},noBodyPadding:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | string",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"string"}]},description:"",defaultValue:{value:"'primary'",computed:!1}},menuItems:{required:!1,tsType:{name:"MenuProps['items']",raw:"MenuProps['items']"},description:"",defaultValue:{value:"[]",computed:!1}},onNameChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},compactMode:{required:!1,tsType:{name:"boolean"},description:""},listMode:{required:!1,tsType:{name:"boolean"},description:""},details:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},detailsOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},detailsTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Details'",computed:!1}},onDetailsClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Pi=W.forwardRef(({id:e,handleLeft:n=!0,handleRight:r=!0,className:o,specification:s,name:u,displayError:c,helper:l,actions:d,...f},p)=>{const[g,v]=Ru(`node:details:${e}`,0),[w,x]=Ru(`node:detailsOpen:${e}`,!1),y=Zt(),{nodeError:_,nodeTrace:m,disabled:C,compactMode:I}=pt(({simulate:Y,disabled:ne,compactMode:O})=>({disabled:ne,nodeTrace:$e(Y).with({result:ke._},({result:V})=>V?.trace?.[e]).otherwise(()=>null),nodeError:$e(Y).with({error:{data:{nodeId:e}}},({error:V})=>V).otherwise(()=>null),compactMode:O})),{diff:F}=la(e),j=s.renderSettings,q=[s.documentationUrl?{key:"documentation",label:A.jsx(ks,{left:"Documentation",right:A.jsx(xg,{})}),onClick:()=>window.open(s.documentationUrl,"_href")}:null,s.documentationUrl?{key:"divider-1",type:"divider"}:null,!c&&{key:"copy-clipboard",label:A.jsx(ks,{left:"Copy to clipboard",right:mu.shortcut("Ctrl + C")}),onClick:()=>{}},!c&&{key:"duplicate",disabled:C,label:A.jsx(ks,{left:"Duplicate",right:mu.shortcut("Ctrl + D")}),onClick:()=>y.duplicateNodes([e])},!c&&{key:"divider-2",type:"divider"},{key:"delete",danger:!0,label:A.jsx(ks,{left:"Delete",right:mu.shortcut("Backspace")}),disabled:C,onClick:()=>Mu.confirm({icon:null,title:"Delete node",content:A.jsxs(rn.Text,{children:["Are you sure you want to delete ",A.jsx(rn.Text,{strong:!0,children:u})," node."]}),okButtonProps:{danger:!0},onOk:()=>y.removeNodes([e])})}].filter(Y=>Y!==!1);return A.jsxs("div",{className:it("grl-graph-node",o),style:{minWidth:220,maxWidth:220},ref:p,onClick:Y=>{const ne=$e(navigator.platform.includes("Mac")).with(!0,()=>Y.metaKey).otherwise(()=>Y.ctrlKey);y.triggerNodeSelect(e,ne?"toggle":"only")},children:[n&&A.jsx(Mi,{className:it("grl-graph-node__handle-left",I&&"compact"),type:"target",position:Ce.Left,...typeof n!="boolean"?n:{}}),A.jsx(Nd,{menuItems:q,...f,disabled:C,icon:s.icon,color:s.color,type:s.displayName,helper:l,name:u,details:j?A.jsx(j,{id:e}):void 0,detailsOpen:w,detailsTitle:$e(g).with(0,()=>"Settings").otherwise(()=>{}),onDetailsClose:()=>x(!1),actions:j?[...d??[],A.jsx(ht,{type:"text",style:{marginLeft:"auto"},onClick:()=>{x(g===0?!w:!0),v(0)},children:"Settings"},"settings")]:d,status:$e([m,_,c]).with([ke._,ke._,!0],()=>"error").with([ke._,ke.not(ke.nullish),ke._],()=>"error").with([ke.not(ke.nullish),ke._,ke._],()=>"success").otherwise(()=>{}),diffStatus:$e([F]).with([{status:"added"}],()=>"added").with([{status:"modified"}],()=>"modified").with([{status:"removed"}],()=>"removed").with([{status:"moved"}],()=>"moved").otherwise(()=>{}),onNameChange:Y=>{y.updateNode(e,ne=>(ne.name=Y,ne))},compactMode:I}),r&&A.jsx(Mi,{className:it("grl-graph-node__handle-right",I&&"compact"),type:"source",position:Ce.Right,...typeof r!="boolean"?r:{}})]})});Pi.__docgenInfo={description:"",methods:[],displayName:"GraphNode",props:{id:{required:!0,tsType:{name:"string"},description:""},handleLeft:{required:!1,tsType:{name:"union",raw:"boolean | Partial<HandleProps>",elements:[{name:"boolean"},{name:"Partial",elements:[{name:"HandleProps"}],raw:"Partial<HandleProps>"}]},description:"",defaultValue:{value:"true",computed:!1}},handleRight:{required:!1,tsType:{name:"union",raw:"boolean | Partial<HandleProps>",elements:[{name:"boolean"},{name:"Partial",elements:[{name:"HandleProps"}],raw:"Partial<HandleProps>"}]},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},specification:{required:!0,tsType:{name:"Pick",elements:[{name:"signature",type:"object",raw:`{
  icon?: React.ReactNode;
  type: string;
  color?: DecisionNodeProps['color'];
  group?: string;
  displayName: string | React.ReactNode;
  documentationUrl?: string;
  shortDescription?: string;
  helper?: string | React.ReactNode;
  renderTab?: (props: { id: string; manager?: DragDropManager }) => React.ReactNode;
  getDiffContent?: (current: T, previous: T) => T;
  generateNode: (params: GenerateNodeParams) => Omit<DecisionNode<T>, 'position' | 'id' | 'type'>;
  renderNode: React.FC<MinimalNodeProps & { specification: MinimalNodeSpecification }>;
  renderSettings?: React.FC<{ id: string }>;
  inferTypes?: {
    needsUpdate: (content: T, prevContent: T) => boolean;
    determineOutputType: (state: InferTypeData<T>) => VariableType;
  };

  onNodeAdd?: (node: DecisionNode<T>) => Promise<DecisionNode<T>>;
}`,signature:{properties:[{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"type",value:{name:"string",required:!0}},{key:"color",value:{name:"union",raw:"DecisionNodeProps['color']",required:!1}},{key:"group",value:{name:"string",required:!1}},{key:"displayName",value:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}],required:!0}},{key:"documentationUrl",value:{name:"string",required:!1}},{key:"shortDescription",value:{name:"string",required:!1}},{key:"helper",value:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}],required:!1}},{key:"renderTab",value:{name:"signature",type:"function",raw:"(props: { id: string; manager?: DragDropManager }) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ id: string; manager?: DragDropManager }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"manager",value:{name:"DragDropManager",required:!1}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}},required:!1}},{key:"getDiffContent",value:{name:"signature",type:"function",raw:"(current: T, previous: T) => T",signature:{arguments:[{type:{name:"T"},name:"current"},{type:{name:"T"},name:"previous"}],return:{name:"T"}},required:!1}},{key:"generateNode",value:{name:"signature",type:"function",raw:"(params: GenerateNodeParams) => Omit<DecisionNode<T>, 'position' | 'id' | 'type'>",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  index: number;
}`,signature:{properties:[{key:"index",value:{name:"number",required:!0}}]}},name:"params"}],return:{name:"Omit",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}},{name:"union",raw:"'position' | 'id' | 'type'",elements:[{name:"literal",value:"'position'"},{name:"literal",value:"'id'"},{name:"literal",value:"'type'"}]}],raw:"Omit<DecisionNode<T>, 'position' | 'id' | 'type'>"}},required:!0}},{key:"renderNode",value:{name:"ReactFC",raw:"React.FC<MinimalNodeProps & { specification: MinimalNodeSpecification }>",elements:[{name:"intersection",raw:"MinimalNodeProps & { specification: MinimalNodeSpecification }",elements:[{name:"Pick",elements:[{name:"NodeProps"},{name:"union",raw:"'id' | 'data' | 'selected'",elements:[{name:"literal",value:"'id'"},{name:"literal",value:"'data'"},{name:"literal",value:"'selected'"}]}],raw:"Pick<NodeProps, 'id' | 'data' | 'selected'>"},{name:"signature",type:"object",raw:"{ specification: MinimalNodeSpecification }",signature:{properties:[{key:"specification",value:{name:"MinimalNodeSpecification",required:!0}}]}}]}],required:!0}},{key:"renderSettings",value:{name:"ReactFC",raw:"React.FC<{ id: string }>",elements:[{name:"signature",type:"object",raw:"{ id: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}}]}}],required:!1}},{key:"inferTypes",value:{name:"signature",type:"object",raw:`{
  needsUpdate: (content: T, prevContent: T) => boolean;
  determineOutputType: (state: InferTypeData<T>) => VariableType;
}`,signature:{properties:[{key:"needsUpdate",value:{name:"signature",type:"function",raw:"(content: T, prevContent: T) => boolean",signature:{arguments:[{type:{name:"T"},name:"content"},{type:{name:"T"},name:"prevContent"}],return:{name:"boolean"}},required:!0}},{key:"determineOutputType",value:{name:"signature",type:"function",raw:"(state: InferTypeData<T>) => VariableType",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  input: VariableType;
  content: T;
}`,signature:{properties:[{key:"input",value:{name:"VariableType",required:!0}},{key:"content",value:{name:"T",required:!0}}]}},name:"state"}],return:{name:"VariableType"}},required:!0}}]},required:!1}},{key:"onNodeAdd",value:{name:"signature",type:"function",raw:"(node: DecisionNode<T>) => Promise<DecisionNode<T>>",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}},name:"node"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"Promise<DecisionNode<T>>"}},required:!1}}]}},{name:"union",raw:"'color' | 'icon' | 'displayName' | 'documentationUrl' | 'helper' | 'renderSettings'",elements:[{name:"literal",value:"'color'"},{name:"literal",value:"'icon'"},{name:"literal",value:"'displayName'"},{name:"literal",value:"'documentationUrl'"},{name:"literal",value:"'helper'"},{name:"literal",value:"'renderSettings'"}]}],raw:`Pick<
  NodeSpecification,
  'color' | 'icon' | 'displayName' | 'documentationUrl' | 'helper' | 'renderSettings'
>`},description:""},displayError:{required:!1,tsType:{name:"boolean"},description:""}}};const Q0={type:Dt.DecisionTable,icon:A.jsx(Lx,{size:"1em"}),displayName:"Decision table",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/decision-tables",shortDescription:"Rules spreadsheet",renderTab:({id:e,manager:n})=>A.jsx(K0,{id:e,manager:n}),getDiffContent:(e,n)=>Tt(e,r=>{const o={};(e.executionMode??"single")!==(n.executionMode??"single")&&nn.set(o,"executionMode",{status:"modified",previousValue:n.executionMode}),(e.hitPolicy??"first")!==(n.hitPolicy??"first")&&nn.set(o,"hitPolicy",{status:"modified",previousValue:n.hitPolicy}),(e.inputField??"")!==(n.inputField??"")&&nn.set(o,"inputField",{status:"modified",previousValue:n.inputField}),(e.outputPath??"")!==(n.outputPath??"")&&nn.set(o,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough??!1)!==(n.passThrough??!1)&&nn.set(o,"passThrough",{status:"modified",previousValue:n.passThrough});const s=Xs(e?.inputs||[],n?.inputs||[],{compareFields:(l,d)=>{const f=(l.name??"")!==(d.name??""),p=(l.field??"")!==(d.field??""),g=(l.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:f||p||g,fields:{...f&&{name:{status:"modified",previousValue:d.name}},...p&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),u=Xs(e?.outputs||[],n?.outputs||[],{compareFields:(l,d)=>{const f=(l.name??"")!==(d.name??""),p=(l.field??"")!==(d.field??""),g=(l.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:f||p||g,fields:{...f&&{name:{status:"modified",previousValue:d.name}},...p&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),c=Xs(e?.rules||[],n?.rules||[],{idField:"_id",compareFields:(l,d)=>{const f=(l._description??"")!==(d._description??""),p={};s.forEach(v=>{v._diff?.status==="added"?p[v.id]={status:"added"}:v._diff?.status==="removed"?p[v.id]={status:"removed"}:(l?.[v.id]??"")!==(d?.[v.id]??"")&&(p[v.id]={status:"modified",previousValue:d?.[v.id]})});const g={};return u.forEach(v=>{v?._diff?.status==="added"?g[v.id]={status:"added"}:v?._diff?.status==="removed"?g[v.id]={status:"removed"}:(l?.[v.id]??"")!==(d?.[v.id]??"")&&(g[v.id]={status:"modified",previousValue:d?.[v.id]})}),{hasChanges:f||Object.keys(p).length>0||Object.keys(g).length>0,fields:{...f&&{_description:{status:"modified",previousValue:d._description}},...p,...g}}}});return r.inputs=s,r.outputs=u,r.rules=c,s.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&nn.set(o,"inputs",{status:"modified"}),u.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&nn.set(o,"outputs",{status:"modified"}),c.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&nn.set(o,"rules",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:(e,n)=>!Jn(e,n),determineOutputType:({content:e,input:n})=>{let r=n.clone(),o=Zn.fromJson({Object:{}});if(e.inputField&&(r=n.calculateType(e.inputField)),e.executionMode==="loop"&&(r=r.arrayItem()),(e?.outputs||[]).filter(u=>!!u.field).forEach(u=>{for(const c of e.rules){if(!c[u.id])continue;const l=r.calculateType(c[u.id]),d=l.toJson();if(d!=="Any"&&d!=="Null"){o.set(u.field,l);return}}o.setJson(u.field,"Any")}),e.hitPolicy==="collect"&&(o=o.toArray()),e.executionMode==="loop"&&(o=o.toArray()),e.outputPath){const u=Zn.fromJson({Object:{}});u.set(e.outputPath,o),o=u}return e.passThrough&&(o=n.merge(o)),o}},generateNode:({index:e})=>({name:`decisionTable${e}`,content:{hitPolicy:"first",inputs:[{id:crypto.randomUUID(),name:"Input"}],outputs:[{id:crypto.randomUUID(),field:"output",name:"Output"}],rules:[],inputField:null,outputPath:null,passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),{passThrough:u,executionMode:c}=pt(({decisionGraph:l})=>{const d=(l?.nodes??[]).find(f=>f.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return A.jsx(Pi,{id:e,specification:o,name:n.name,isSelected:r,helper:[c==="loop"&&A.jsx(Eg,{}),u&&A.jsx(td,{})],actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Edit Table"},"edit-table")]})},renderSettings:({id:e})=>{const n=Zt(),r=hs(e),{contentDiff:o}=la(e),{fields:s,disabled:u}=pt(({decisionGraph:l,disabled:d})=>{const f=(l?.nodes??[]).find(p=>p.id===e)?.content;return{disabled:d,fields:{passThrough:f?.passThrough||!1,inputField:f?.inputField,outputPath:f?.outputPath,executionMode:f?.executionMode||"single",hitPolicy:f?.hitPolicy||"first"}}}),c=l=>{n.updateNode(e,d=>(Object.assign(d.content,l),d))};return A.jsxs("div",{className:"settings-form",children:[A.jsx(oi.Item,{label:"Hit Policy",children:A.jsx(dg,{direction:"vertical",size:2,children:A.jsx(dc,{size:"small",previousValue:o?.fields?.hitPolicy?.previousValue,displayDiff:o?.fields?.hitPolicy?.status==="modified",disabled:u,value:s?.hitPolicy,onChange:l=>c({hitPolicy:l?.target?.value}),options:[{value:"first",label:"First"},{value:"collect",label:"Collect"}]})})}),A.jsx(oi.Item,{label:"Passthrough",children:A.jsx(ig,{disabled:u,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:l=>c({passThrough:l})})}),A.jsx(oi.Item,{label:"Input field",children:A.jsx(Bu,{variableType:r,disabled:u,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:l=>c({inputField:l?.trim()||null})})}),A.jsx(oi.Item,{label:"Output path",children:A.jsx(og,{size:"small",readOnly:u,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:l=>c({outputPath:l?.target?.value?.trim()||null})})}),A.jsx(oi.Item,{label:"Execution mode",children:A.jsx(dc,{size:"small",disabled:u,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:l=>c({executionMode:l?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},em=({id:e,manager:n})=>{const r=Zt(),o=hs(e,{attachGlobals:!1}),{disabled:s,configurable:u,content:c,globalType:l}=pt(({disabled:w,configurable:x,decisionGraph:y,globalType:_})=>({disabled:w,configurable:x,globalType:_,content:(y?.nodes??[]).find(m=>m.id===e)?.content})),{nodeTrace:d,inputData:f,nodeSnapshot:p}=pt(({simulate:w,decisionGraph:x})=>({nodeTrace:$e(w).with({result:ke.nonNullable},({result:y})=>y.trace[e]).otherwise(()=>null),inputData:$e(w).with({result:ke.nonNullable},({result:y})=>J0(e,{trace:y.trace,decisionGraph:x})).otherwise(()=>null),nodeSnapshot:$e(w).with({result:ke.nonNullable},({result:y})=>y.snapshot.nodes.find(_=>_.id===e)?.content).otherwise(()=>null)})),g=T.useMemo(()=>{if(!o)return;const w=$e(c?.inputField).with(ke.string,y=>o.get(y)).otherwise(()=>o),x=c?.executionMode==="loop"?w.arrayItem():w;return Object.entries(l).forEach(([y,_])=>x.set(y,_)),x},[o,l,c?.inputField,c?.executionMode]),v=T.useMemo(()=>{if(!d||!f||!p)return;if(!go())return{trace:d,snapshot:p};const w=Object.fromEntries(Object.entries(d.traceData).map(([x,y])=>[x,z6(y.result)]));return{trace:d,inputData:new lg({...f,$:w}),snapshot:p}},[d,p,f]);return A.jsx("div",{style:{height:"100%",overflowY:"auto",boxSizing:"border-box"},children:A.jsx(Pw,{value:c?.expressions,disabled:s,configurable:u,manager:n,inputData:g,debug:v,onChange:w=>{r.updateNode(e,x=>(x.content.expressions=w,x))}})})},z6=e=>{try{return JSON.parse(e)}catch{return null}};em.__docgenInfo={description:"",methods:[],displayName:"TabExpression",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const tm={type:Dt.Expression,icon:A.jsx(Gx,{size:"1em"}),displayName:"Expression",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/expression",shortDescription:"Mapping utility",renderTab:({id:e,manager:n})=>A.jsx(em,{id:e,manager:n}),getDiffContent:(e,n)=>Tt(e,o=>{const s={};(e.executionMode||!1)!==(n.executionMode||!1)&&nn.set(s,"executionMode",{status:"modified",previousValue:n.executionMode}),ou(e.inputField,n.inputField)||nn.set(s,"inputField",{status:"modified",previousValue:n.inputField}),ou(e.outputPath,n.outputPath)||nn.set(s,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough||!1)!==(n.passThrough||!1)&&nn.set(s,"passThrough",{status:"modified",previousValue:n.passThrough});const u=Xs(e?.expressions||[],n?.expressions||[],{compareFields:(c,l)=>{const d=!ou(c.key,l.key),f=!ou(c.value,l.value);return{hasChanges:d||f,fields:{...d&&{key:{status:"modified",previousValue:l.key}},...f&&{value:{status:"modified",previousValue:l.value}}}}}});return o.expressions=u,u.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&nn.set(s,"expressions",{status:"modified"}),Object.keys(s).length>0&&(o._diff={status:"modified",fields:s}),o}),inferTypes:{needsUpdate:(e,n)=>!Jn(e,n),determineOutputType:({input:e,content:n})=>{let r=e.clone(),o=Zn.fromJson({Object:{}});if(n.inputField&&(r=e.calculateType(n.inputField)),n.executionMode==="loop"&&(r=r.arrayItem()),(n.expressions||[]).forEach(s=>{if(!s.key||!s.value)return;const u=r.calculateType(s.value);r.set(`$.${s.key}`,u),o.set(s.key,u)}),n.executionMode==="loop"&&(o=o.toArray()),n.outputPath){const s=Zn.fromJson({Object:{}});s.set(n.outputPath,o),o=s}return n.passThrough&&(o=e.merge(o)),o}},generateNode:({index:e})=>({name:`expression${e}`,content:{inputField:null,outputPath:null,expressions:[],passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),{passThrough:u,executionMode:c}=pt(({decisionGraph:l})=>{const d=(l?.nodes??[]).find(f=>f.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return A.jsx(Pi,{id:e,specification:o,name:n.name,isSelected:r,actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Edit Expression"},"edit-table")],helper:[c==="loop"&&A.jsx(Eg,{}),u&&A.jsx(td,{})]})},renderSettings:({id:e})=>{const n=Zt(),r=hs(e),{contentDiff:o}=la(e),{fields:s,disabled:u}=pt(({decisionGraph:l,disabled:d})=>{const f=(l?.nodes??[]).find(p=>p.id===e)?.content;return{disabled:d,fields:{passThrough:f?.passThrough||!1,inputField:f?.inputField,outputPath:f?.outputPath,executionMode:f?.executionMode||"single"}}}),c=l=>{n.updateNode(e,d=>(Object.assign(d.content,l),d))};return A.jsxs("div",{className:"settings-form",children:[A.jsx(oi.Item,{label:"Passthrough",children:A.jsx(ig,{disabled:u,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:l=>c({passThrough:l})})}),A.jsx(oi.Item,{label:"Input field",children:A.jsx(Bu,{variableType:r,disabled:u,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:l=>{c({inputField:l?.trim()||null})}})}),A.jsx(oi.Item,{label:"Output path",children:A.jsx(og,{size:"small",readOnly:u,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:l=>c({outputPath:l?.target?.value?.trim()||null})})}),A.jsx(oi.Item,{label:"Execution mode",children:A.jsx(dc,{size:"small",disabled:u,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:l=>c({executionMode:l?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},j6=W.lazy(async()=>({default:(await qw(()=>import("./index-DFdLzItk.js").then(n=>n.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)).Function})),nm=({id:e})=>{const n=im(e),r=Zt(),o=Z0(x=>x.onFunctionReady),[s,u]=T.useState(),c=hs(e),{nodeTrace:l,disabled:d,content:f,nodeError:p}=pt(({simulate:x,disabled:y,configurable:_,decisionGraph:m})=>({nodeTrace:$e(x).with({result:ke._},({result:C})=>C?.trace?.[e]).otherwise(()=>null),nodeError:$e(x).with({error:{data:{nodeId:e}}},({error:C})=>C).otherwise(()=>null),disabled:y,configurable:_,content:(m?.nodes??[]).find(C=>C.id===e)?.content})),{diff:g,contentDiff:v}=la(e),w=T.useMemo(()=>n===yu.Stable?v?.fields?.source?.previousValue:g?.fields?.content?.previousValue,[g,v]);return T.useEffect(()=>{if(!s)return;const x=s.languages.typescript.javascriptDefaults.getExtraLibs(),y=Object.entries(x).map(([_,m])=>({filePath:_,content:m.content}));s.languages.typescript.javascriptDefaults.setExtraLibs(y),o?.(s)},[s,o]),A.jsx(T.Suspense,{fallback:A.jsx(ss,{}),children:A.jsx(j6,{onMonacoReady:x=>u(x),value:n===yu.Stable?f.source:f,previousValue:typeof w=="string"?w:void 0,error:p??void 0,inputData:c,onChange:x=>{r.updateNode(e,y=>(n===yu.Stable?y.content={source:x}:y.content=x,y))},disabled:d,trace:l})})};nm.__docgenInfo={description:"",methods:[],displayName:"TabFunction",props:{id:{required:!0,tsType:{name:"string"},description:""}}};const rm={type:Dt.Function,icon:A.jsx(rn.Text,{style:{color:"white",fontSize:"inherit"},children:"JS"}),displayName:"Function",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/functions",shortDescription:"Javascript lambda",color:_o.Orange,renderTab:({id:e})=>A.jsx(nm,{id:e}),getDiffContent:(e,n)=>{const r={},o=$e(e).with(ke.string,()=>0).otherwise(()=>1);$e([e,n]).with([ke.string,ke.string],([u,c])=>{u!==c&&nn.set(r,"source",{previousValue:c,status:"modified"})}).with([{source:ke.string},{source:ke.string}],([u,c])=>{u?.source!==c?.source&&nn.set(r,"source",{previousValue:c.source,status:"modified"})}).otherwise(()=>{});const s=Object.keys(r).length>0;return{...o===0?{source:e}:e,...s&&{_diff:{status:"modified",fields:r}}}},generateNode:({index:e})=>({name:`function${e}`,content:{source:zw}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),u=im(e);return A.jsx(Pi,{id:e,specification:{...o,displayName:u===1?"Function":A.jsxs("span",{children:["Function v1 ",A.jsx(Ip,{})]})},name:n.name,isSelected:r,helper:[u===0&&A.jsx(Ip,{size:16})],actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Edit Function"},"edit-function")]})}};var yu=(e=>(e[e.Deprecated=0]="Deprecated",e[e.Stable=1]="Stable",e))(yu||{});const im=e=>{const{kind:n}=pt(r=>({kind:$e(r.decisionGraph.nodes.find(o=>o.id===e)?.content).with(ke.string,()=>0).otherwise(()=>1)}));return n},Ip=({size:e})=>A.jsx(xr,{placement:"top",title:'Function v1 will be deprecated in one of the upcoming releases. To use a new Function, drag and drop a new Function Node and copy your logic. For more information click "Documentation". ',children:A.jsx(DC,{style:{color:"var(--grl-color-warning-text)",fontSize:e}})});var Vs={exports:{}};Vs.exports;var Rp;function k6(){return Rp||(Rp=1,function(e,n){var r=200,o="__lodash_hash_undefined__",s=800,u=16,c=9007199254740991,l="[object Arguments]",d="[object Array]",f="[object AsyncFunction]",p="[object Boolean]",g="[object Date]",v="[object Error]",w="[object Function]",x="[object GeneratorFunction]",y="[object Map]",_="[object Number]",m="[object Null]",C="[object Object]",I="[object Proxy]",F="[object RegExp]",j="[object Set]",q="[object String]",Y="[object Undefined]",ne="[object WeakMap]",O="[object ArrayBuffer]",V="[object DataView]",K="[object Float32Array]",ee="[object Float64Array]",Z="[object Int8Array]",R="[object Int16Array]",G="[object Int32Array]",k="[object Uint8Array]",J="[object Uint8ClampedArray]",se="[object Uint16Array]",U="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,ue=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,ce={};ce[K]=ce[ee]=ce[Z]=ce[R]=ce[G]=ce[k]=ce[J]=ce[se]=ce[U]=!0,ce[l]=ce[d]=ce[O]=ce[p]=ce[V]=ce[g]=ce[v]=ce[w]=ce[y]=ce[_]=ce[C]=ce[F]=ce[j]=ce[q]=ce[ne]=!1;var ve=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,ge=typeof self=="object"&&self&&self.Object===Object&&self,Ee=ve||ge||Function("return this")(),Oe=n&&!n.nodeType&&n,De=Oe&&!0&&e&&!e.nodeType&&e,Se=De&&De.exports===Oe,Be=Se&&ve.process,Et=function(){try{var D=De&&De.require&&De.require("util").types;return D||Be&&Be.binding&&Be.binding("util")}catch{}}(),Qe=Et&&Et.isTypedArray;function kt(D,N,z){switch(z.length){case 0:return D.call(N);case 1:return D.call(N,z[0]);case 2:return D.call(N,z[0],z[1]);case 3:return D.call(N,z[0],z[1],z[2])}return D.apply(N,z)}function et(D,N){for(var z=-1,he=Array(D);++z<D;)he[z]=N(z);return he}function tt(D){return function(N){return D(N)}}function on(D,N){return D?.[N]}function qe(D,N){return function(z){return D(N(z))}}var we=Array.prototype,$t=Function.prototype,Bt=Object.prototype,lt=Ee["__core-js_shared__"],Ot=$t.toString,St=Bt.hasOwnProperty,sn=function(){var D=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||"");return D?"Symbol(src)_1."+D:""}(),Jt=Bt.toString,wn=Ot.call(Object),Mt=RegExp("^"+Ot.call(St).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=Se?Ee.Buffer:void 0,Vt=Ee.Symbol,bt=Ee.Uint8Array;gt&&gt.allocUnsafe;var ct=qe(Object.getPrototypeOf,Object),Pt=Object.create,hn=Bt.propertyIsEnumerable,an=we.splice,_t=Vt?Vt.toStringTag:void 0,At=function(){try{var D=Yi(Object,"defineProperty");return D({},"",{}),D}catch{}}(),Kt=gt?gt.isBuffer:void 0,Qn=Math.max,un=Date.now,xn=Yi(Ee,"Map"),gn=Yi(Object,"create"),H=function(){function D(){}return function(N){if(!gr(N))return{};if(Pt)return Pt(N);D.prototype=N;var z=new D;return D.prototype=void 0,z}}();function Q(D){var N=-1,z=D==null?0:D.length;for(this.clear();++N<z;){var he=D[N];this.set(he[0],he[1])}}function pe(){this.__data__=gn?gn(null):{},this.size=0}function Fe(D){var N=this.has(D)&&delete this.__data__[D];return this.size-=N?1:0,N}function dt(D){var N=this.__data__;if(gn){var z=N[D];return z===o?void 0:z}return St.call(N,D)?N[D]:void 0}function Je(D){var N=this.__data__;return gn?N[D]!==void 0:St.call(N,D)}function Ft(D,N){var z=this.__data__;return this.size+=this.has(D)?0:1,z[D]=gn&&N===void 0?o:N,this}Q.prototype.clear=pe,Q.prototype.delete=Fe,Q.prototype.get=dt,Q.prototype.has=Je,Q.prototype.set=Ft;function wt(D){var N=-1,z=D==null?0:D.length;for(this.clear();++N<z;){var he=D[N];this.set(he[0],he[1])}}function Ut(){this.__data__=[],this.size=0}function Rn(D){var N=this.__data__,z=Fr(N,D);if(z<0)return!1;var he=N.length-1;return z==he?N.pop():an.call(N,z,1),--this.size,!0}function qt(D){var N=this.__data__,z=Fr(N,D);return z<0?void 0:N[z][1]}function Wt(D){return Fr(this.__data__,D)>-1}function Bn(D,N){var z=this.__data__,he=Fr(z,D);return he<0?(++this.size,z.push([D,N])):z[he][1]=N,this}wt.prototype.clear=Ut,wt.prototype.delete=Rn,wt.prototype.get=qt,wt.prototype.has=Wt,wt.prototype.set=Bn;function On(D){var N=-1,z=D==null?0:D.length;for(this.clear();++N<z;){var he=D[N];this.set(he[0],he[1])}}function Hn(){this.size=0,this.__data__={hash:new Q,map:new(xn||wt),string:new Q}}function zi(D){var N=Hr(this,D).delete(D);return this.size-=N?1:0,N}function ji(D){return Hr(this,D).get(D)}function ki(D){return Hr(this,D).has(D)}function fi(D,N){var z=Hr(this,D),he=z.size;return z.set(D,N),this.size+=z.size==he?0:1,this}On.prototype.clear=Hn,On.prototype.delete=zi,On.prototype.get=ji,On.prototype.has=ki,On.prototype.set=fi;function er(D){var N=this.__data__=new wt(D);this.size=N.size}function mn(){this.__data__=new wt,this.size=0}function $i(D){var N=this.__data__,z=N.delete(D);return this.size=N.size,z}function qi(D){return this.__data__.get(D)}function Li(D){return this.__data__.has(D)}function Hi(D,N){var z=this.__data__;if(z instanceof wt){var he=z.__data__;if(!xn||he.length<r-1)return he.push([D,N]),this.size=++z.size,this;z=this.__data__=new On(he)}return z.set(D,N),this.size=z.size,this}er.prototype.clear=mn,er.prototype.delete=$i,er.prototype.get=qi,er.prototype.has=Li,er.prototype.set=Hi;function Gi(D,N){var z=Gn(D),he=!z&&Zi(D),me=!z&&!he&&Ur(D),Ae=!z&&!he&&!me&&Ki(D),Me=z||he||me||Ae,be=Me?et(D.length,String):[],Ne=be.length;for(var Ke in D)Me&&(Ke=="length"||me&&(Ke=="offset"||Ke=="parent")||Ae&&(Ke=="buffer"||Ke=="byteLength"||Ke=="byteOffset")||Gr(Ke,Ne))||be.push(Ke);return be}function Cn(D,N,z){(z!==void 0&&!Vr(D[N],z)||z===void 0&&!(N in D))&&tr(D,N,z)}function fr(D,N,z){var he=D[N];(!(St.call(D,N)&&Vr(he,z))||z===void 0&&!(N in D))&&tr(D,N,z)}function Fr(D,N){for(var z=D.length;z--;)if(Vr(D[z][0],N))return z;return-1}function tr(D,N,z){N=="__proto__"&&At?At(D,N,{configurable:!0,enumerable:!0,value:z,writable:!0}):D[N]=z}var Vi=Lr();function Nr(D){return D==null?D===void 0?Y:m:_t&&_t in Object(D)?Co(D):Ao(D)}function hr(D){return nr(D)&&Nr(D)==l}function hi(D){if(!gr(D)||gi(D))return!1;var N=Ji(D)?Mt:ue;return N.test(Io(D))}function jr(D){return nr(D)&&yi(D.length)&&!!ce[Nr(D)]}function En(D){if(!gr(D))return Sn(D);var N=pr(D),z=[];for(var he in D)he=="constructor"&&(N||!St.call(D,he))||z.push(he);return z}function pi(D,N,z,he,me){D!==N&&Vi(N,function(Ae,Me){if(me||(me=new er),gr(Ae))Ui(D,N,Me,z,pi,he,me);else{var be=he?he(Mn(D,Me),Ae,Me+"",D,N,me):void 0;be===void 0&&(be=Ae),Cn(D,Me,be)}},Qi)}function Ui(D,N,z,he,me,Ae,Me){var be=Mn(D,z),Ne=Mn(N,z),Ke=Me.get(Ne);if(Ke){Cn(D,z,Ke);return}var ft=Ae?Ae(be,Ne,z+"",D,N,Me):void 0,yt=ft===void 0;if(yt){var at=Gn(Ne),Qt=!at&&Ur(Ne),Pn=!at&&!Qt&&Ki(Ne);ft=Ne,at||Qt||Pn?Gn(be)?ft=be:Ro(be)?ft=Wi(be):Qt?(yt=!1,ft=wo(Ne)):Pn?(yt=!1,ft=$r(Ne)):ft=[]:Bo(Ne)||Zi(Ne)?(ft=be,Zi(be)?ft=Wr(be):(!gr(be)||Ji(be))&&(ft=Eo(Ne))):yt=!1}yt&&(Me.set(Ne,ft),me(ft,Ne,he,Ae,Me),Me.delete(Ne)),Cn(D,z,ft)}function kr(D,N){return No(Fo(D,N,nt),D+"")}var ps=At?function(D,N){return At(D,"toString",{configurable:!0,enumerable:!1,value:st(N),writable:!0})}:nt;function wo(D,N){return D.slice()}function xo(D){var N=new D.constructor(D.byteLength);return new bt(N).set(new bt(D)),N}function $r(D,N){var z=xo(D.buffer);return new D.constructor(z,D.byteOffset,D.length)}function Wi(D,N){var z=-1,he=D.length;for(N||(N=Array(he));++z<he;)N[z]=D[z];return N}function qr(D,N,z,he){var me=!z;z||(z={});for(var Ae=-1,Me=N.length;++Ae<Me;){var be=N[Ae],Ne=void 0;Ne===void 0&&(Ne=D[be]),me?tr(z,be,Ne):fr(z,be,Ne)}return z}function Xi(D){return kr(function(N,z){var he=-1,me=z.length,Ae=me>1?z[me-1]:void 0,Me=me>2?z[2]:void 0;for(Ae=D.length>3&&typeof Ae=="function"?(me--,Ae):void 0,Me&&gs(z[0],z[1],Me)&&(Ae=me<3?void 0:Ae,me=1),N=Object(N);++he<me;){var be=z[he];be&&D(N,be,he,Ae)}return N})}function Lr(D){return function(N,z,he){for(var me=-1,Ae=Object(N),Me=he(N),be=Me.length;be--;){var Ne=Me[++me];if(z(Ae[Ne],Ne,Ae)===!1)break}return N}}function Hr(D,N){var z=D.__data__;return So(N)?z[typeof N=="string"?"string":"hash"]:z.map}function Yi(D,N){var z=on(D,N);return hi(z)?z:void 0}function Co(D){var N=St.call(D,_t),z=D[_t];try{D[_t]=void 0;var he=!0}catch{}var me=Jt.call(D);return he&&(N?D[_t]=z:delete D[_t]),me}function Eo(D){return typeof D.constructor=="function"&&!pr(D)?H(ct(D)):{}}function Gr(D,N){var z=typeof D;return N=N??c,!!N&&(z=="number"||z!="symbol"&&de.test(D))&&D>-1&&D%1==0&&D<N}function gs(D,N,z){if(!gr(z))return!1;var he=typeof N;return(he=="number"?mi(z)&&Gr(N,z.length):he=="string"&&N in z)?Vr(z[N],D):!1}function So(D){var N=typeof D;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?D!=="__proto__":D===null}function gi(D){return!!sn&&sn in D}function pr(D){var N=D&&D.constructor,z=typeof N=="function"&&N.prototype||Bt;return D===z}function Sn(D){var N=[];if(D!=null)for(var z in Object(D))N.push(z);return N}function Ao(D){return Jt.call(D)}function Fo(D,N,z){return N=Qn(N===void 0?D.length-1:N,0),function(){for(var he=arguments,me=-1,Ae=Qn(he.length-N,0),Me=Array(Ae);++me<Ae;)Me[me]=he[N+me];me=-1;for(var be=Array(N+1);++me<N;)be[me]=he[me];return be[N]=z(Me),kt(D,this,be)}}function Mn(D,N){if(!(N==="constructor"&&typeof D[N]=="function")&&N!="__proto__")return D[N]}var No=To(ps);function To(D){var N=0,z=0;return function(){var he=un(),me=u-(he-z);if(z=he,me>0){if(++N>=s)return arguments[0]}else N=0;return D.apply(void 0,arguments)}}function Io(D){if(D!=null){try{return Ot.call(D)}catch{}try{return D+""}catch{}}return""}function Vr(D,N){return D===N||D!==D&&N!==N}var Zi=hr(function(){return arguments}())?hr:function(D){return nr(D)&&St.call(D,"callee")&&!hn.call(D,"callee")},Gn=Array.isArray;function mi(D){return D!=null&&yi(D.length)&&!Ji(D)}function Ro(D){return nr(D)&&mi(D)}var Ur=Kt||B;function Ji(D){if(!gr(D))return!1;var N=Nr(D);return N==w||N==x||N==f||N==I}function yi(D){return typeof D=="number"&&D>-1&&D%1==0&&D<=c}function gr(D){var N=typeof D;return D!=null&&(N=="object"||N=="function")}function nr(D){return D!=null&&typeof D=="object"}function Bo(D){if(!nr(D)||Nr(D)!=C)return!1;var N=ct(D);if(N===null)return!0;var z=St.call(N,"constructor")&&N.constructor;return typeof z=="function"&&z instanceof z&&Ot.call(z)==wn}var Ki=Qe?tt(Qe):jr;function Wr(D){return qr(D,Qi(D))}function Qi(D){return mi(D)?Gi(D):En(D)}var ms=Xi(function(D,N,z){pi(D,N,z)});function st(D){return function(){return D}}function nt(D){return D}function B(){return!1}e.exports=ms}(Vs,Vs.exports)),Vs.exports}var Us={exports:{}};Us.exports;var Bp;function om(){return Bp||(Bp=1,function(e,n){var r=200,o="__lodash_hash_undefined__",s=1,u=2,c=9007199254740991,l="[object Arguments]",d="[object Array]",f="[object AsyncFunction]",p="[object Boolean]",g="[object Date]",v="[object Error]",w="[object Function]",x="[object GeneratorFunction]",y="[object Map]",_="[object Number]",m="[object Null]",C="[object Object]",I="[object Promise]",F="[object Proxy]",j="[object RegExp]",q="[object Set]",Y="[object String]",ne="[object Symbol]",O="[object Undefined]",V="[object WeakMap]",K="[object ArrayBuffer]",ee="[object DataView]",Z="[object Float32Array]",R="[object Float64Array]",G="[object Int8Array]",k="[object Int16Array]",J="[object Int32Array]",se="[object Uint8Array]",U="[object Uint8ClampedArray]",re="[object Uint16Array]",ue="[object Uint32Array]",de=/[\\^$.*+?()[\]{}|]/g,ce=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,ge={};ge[Z]=ge[R]=ge[G]=ge[k]=ge[J]=ge[se]=ge[U]=ge[re]=ge[ue]=!0,ge[l]=ge[d]=ge[K]=ge[p]=ge[ee]=ge[g]=ge[v]=ge[w]=ge[y]=ge[_]=ge[C]=ge[j]=ge[q]=ge[Y]=ge[V]=!1;var Ee=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,Oe=typeof self=="object"&&self&&self.Object===Object&&self,De=Ee||Oe||Function("return this")(),Se=n&&!n.nodeType&&n,Be=Se&&!0&&e&&!e.nodeType&&e,Et=Be&&Be.exports===Se,Qe=Et&&Ee.process,kt=function(){try{return Qe&&Qe.binding&&Qe.binding("util")}catch{}}(),et=kt&&kt.isTypedArray;function tt(B,D){for(var N=-1,z=B==null?0:B.length,he=0,me=[];++N<z;){var Ae=B[N];D(Ae,N,B)&&(me[he++]=Ae)}return me}function on(B,D){for(var N=-1,z=D.length,he=B.length;++N<z;)B[he+N]=D[N];return B}function qe(B,D){for(var N=-1,z=B==null?0:B.length;++N<z;)if(D(B[N],N,B))return!0;return!1}function we(B,D){for(var N=-1,z=Array(B);++N<B;)z[N]=D(N);return z}function $t(B){return function(D){return B(D)}}function Bt(B,D){return B.has(D)}function lt(B,D){return B?.[D]}function Ot(B){var D=-1,N=Array(B.size);return B.forEach(function(z,he){N[++D]=[he,z]}),N}function St(B,D){return function(N){return B(D(N))}}function sn(B){var D=-1,N=Array(B.size);return B.forEach(function(z){N[++D]=z}),N}var Jt=Array.prototype,wn=Function.prototype,Mt=Object.prototype,gt=De["__core-js_shared__"],Vt=wn.toString,bt=Mt.hasOwnProperty,ct=function(){var B=/[^.]+$/.exec(gt&&gt.keys&&gt.keys.IE_PROTO||"");return B?"Symbol(src)_1."+B:""}(),Pt=Mt.toString,hn=RegExp("^"+Vt.call(bt).replace(de,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=Et?De.Buffer:void 0,_t=De.Symbol,At=De.Uint8Array,Kt=Mt.propertyIsEnumerable,Qn=Jt.splice,un=_t?_t.toStringTag:void 0,xn=Object.getOwnPropertySymbols,gn=an?an.isBuffer:void 0,H=St(Object.keys,Object),Q=Sn(De,"DataView"),pe=Sn(De,"Map"),Fe=Sn(De,"Promise"),dt=Sn(De,"Set"),Je=Sn(De,"WeakMap"),Ft=Sn(Object,"create"),wt=Gn(Q),Ut=Gn(pe),Rn=Gn(Fe),qt=Gn(dt),Wt=Gn(Je),Bn=_t?_t.prototype:void 0,On=Bn?Bn.valueOf:void 0;function Hn(B){var D=-1,N=B==null?0:B.length;for(this.clear();++D<N;){var z=B[D];this.set(z[0],z[1])}}function zi(){this.__data__=Ft?Ft(null):{},this.size=0}function ji(B){var D=this.has(B)&&delete this.__data__[B];return this.size-=D?1:0,D}function ki(B){var D=this.__data__;if(Ft){var N=D[B];return N===o?void 0:N}return bt.call(D,B)?D[B]:void 0}function fi(B){var D=this.__data__;return Ft?D[B]!==void 0:bt.call(D,B)}function er(B,D){var N=this.__data__;return this.size+=this.has(B)?0:1,N[B]=Ft&&D===void 0?o:D,this}Hn.prototype.clear=zi,Hn.prototype.delete=ji,Hn.prototype.get=ki,Hn.prototype.has=fi,Hn.prototype.set=er;function mn(B){var D=-1,N=B==null?0:B.length;for(this.clear();++D<N;){var z=B[D];this.set(z[0],z[1])}}function $i(){this.__data__=[],this.size=0}function qi(B){var D=this.__data__,N=$r(D,B);if(N<0)return!1;var z=D.length-1;return N==z?D.pop():Qn.call(D,N,1),--this.size,!0}function Li(B){var D=this.__data__,N=$r(D,B);return N<0?void 0:D[N][1]}function Hi(B){return $r(this.__data__,B)>-1}function Gi(B,D){var N=this.__data__,z=$r(N,B);return z<0?(++this.size,N.push([B,D])):N[z][1]=D,this}mn.prototype.clear=$i,mn.prototype.delete=qi,mn.prototype.get=Li,mn.prototype.has=Hi,mn.prototype.set=Gi;function Cn(B){var D=-1,N=B==null?0:B.length;for(this.clear();++D<N;){var z=B[D];this.set(z[0],z[1])}}function fr(){this.size=0,this.__data__={hash:new Hn,map:new(pe||mn),string:new Hn}}function Fr(B){var D=pr(this,B).delete(B);return this.size-=D?1:0,D}function tr(B){return pr(this,B).get(B)}function Vi(B){return pr(this,B).has(B)}function Nr(B,D){var N=pr(this,B),z=N.size;return N.set(B,D),this.size+=N.size==z?0:1,this}Cn.prototype.clear=fr,Cn.prototype.delete=Fr,Cn.prototype.get=tr,Cn.prototype.has=Vi,Cn.prototype.set=Nr;function hr(B){var D=-1,N=B==null?0:B.length;for(this.__data__=new Cn;++D<N;)this.add(B[D])}function hi(B){return this.__data__.set(B,o),this}function jr(B){return this.__data__.has(B)}hr.prototype.add=hr.prototype.push=hi,hr.prototype.has=jr;function En(B){var D=this.__data__=new mn(B);this.size=D.size}function pi(){this.__data__=new mn,this.size=0}function Ui(B){var D=this.__data__,N=D.delete(B);return this.size=D.size,N}function kr(B){return this.__data__.get(B)}function ps(B){return this.__data__.has(B)}function wo(B,D){var N=this.__data__;if(N instanceof mn){var z=N.__data__;if(!pe||z.length<r-1)return z.push([B,D]),this.size=++N.size,this;N=this.__data__=new Cn(z)}return N.set(B,D),this.size=N.size,this}En.prototype.clear=pi,En.prototype.delete=Ui,En.prototype.get=kr,En.prototype.has=ps,En.prototype.set=wo;function xo(B,D){var N=Ur(B),z=!N&&Ro(B),he=!N&&!z&&yi(B),me=!N&&!z&&!he&&Qi(B),Ae=N||z||he||me,Me=Ae?we(B.length,String):[],be=Me.length;for(var Ne in B)bt.call(B,Ne)&&!(Ae&&(Ne=="length"||he&&(Ne=="offset"||Ne=="parent")||me&&(Ne=="buffer"||Ne=="byteLength"||Ne=="byteOffset")||No(Ne,be)))&&Me.push(Ne);return Me}function $r(B,D){for(var N=B.length;N--;)if(mi(B[N][0],D))return N;return-1}function Wi(B,D,N){var z=D(B);return Ur(B)?z:on(z,N(B))}function qr(B){return B==null?B===void 0?O:m:un&&un in Object(B)?Ao(B):Zi(B)}function Xi(B){return Wr(B)&&qr(B)==l}function Lr(B,D,N,z,he){return B===D?!0:B==null||D==null||!Wr(B)&&!Wr(D)?B!==B&&D!==D:Hr(B,D,N,z,Lr,he)}function Hr(B,D,N,z,he,me){var Ae=Ur(B),Me=Ur(D),be=Ae?d:Mn(B),Ne=Me?d:Mn(D);be=be==l?C:be,Ne=Ne==l?C:Ne;var Ke=be==C,ft=Ne==C,yt=be==Ne;if(yt&&yi(B)){if(!yi(D))return!1;Ae=!0,Ke=!1}if(yt&&!Ke)return me||(me=new En),Ae||Qi(B)?Gr(B,D,N,z,he,me):gs(B,D,be,N,z,he,me);if(!(N&s)){var at=Ke&&bt.call(B,"__wrapped__"),Qt=ft&&bt.call(D,"__wrapped__");if(at||Qt){var Pn=at?B.value():B,rr=Qt?D.value():D;return me||(me=new En),he(Pn,rr,N,z,me)}}return yt?(me||(me=new En),So(B,D,N,z,he,me)):!1}function Yi(B){if(!Ki(B)||Io(B))return!1;var D=nr(B)?hn:ce;return D.test(Gn(B))}function Co(B){return Wr(B)&&Bo(B.length)&&!!ge[qr(B)]}function Eo(B){if(!Vr(B))return H(B);var D=[];for(var N in Object(B))bt.call(B,N)&&N!="constructor"&&D.push(N);return D}function Gr(B,D,N,z,he,me){var Ae=N&s,Me=B.length,be=D.length;if(Me!=be&&!(Ae&&be>Me))return!1;var Ne=me.get(B);if(Ne&&me.get(D))return Ne==D;var Ke=-1,ft=!0,yt=N&u?new hr:void 0;for(me.set(B,D),me.set(D,B);++Ke<Me;){var at=B[Ke],Qt=D[Ke];if(z)var Pn=Ae?z(Qt,at,Ke,D,B,me):z(at,Qt,Ke,B,D,me);if(Pn!==void 0){if(Pn)continue;ft=!1;break}if(yt){if(!qe(D,function(rr,Tr){if(!Bt(yt,Tr)&&(at===rr||he(at,rr,N,z,me)))return yt.push(Tr)})){ft=!1;break}}else if(!(at===Qt||he(at,Qt,N,z,me))){ft=!1;break}}return me.delete(B),me.delete(D),ft}function gs(B,D,N,z,he,me,Ae){switch(N){case ee:if(B.byteLength!=D.byteLength||B.byteOffset!=D.byteOffset)return!1;B=B.buffer,D=D.buffer;case K:return!(B.byteLength!=D.byteLength||!me(new At(B),new At(D)));case p:case g:case _:return mi(+B,+D);case v:return B.name==D.name&&B.message==D.message;case j:case Y:return B==D+"";case y:var Me=Ot;case q:var be=z&s;if(Me||(Me=sn),B.size!=D.size&&!be)return!1;var Ne=Ae.get(B);if(Ne)return Ne==D;z|=u,Ae.set(B,D);var Ke=Gr(Me(B),Me(D),z,he,me,Ae);return Ae.delete(B),Ke;case ne:if(On)return On.call(B)==On.call(D)}return!1}function So(B,D,N,z,he,me){var Ae=N&s,Me=gi(B),be=Me.length,Ne=gi(D),Ke=Ne.length;if(be!=Ke&&!Ae)return!1;for(var ft=be;ft--;){var yt=Me[ft];if(!(Ae?yt in D:bt.call(D,yt)))return!1}var at=me.get(B);if(at&&me.get(D))return at==D;var Qt=!0;me.set(B,D),me.set(D,B);for(var Pn=Ae;++ft<be;){yt=Me[ft];var rr=B[yt],Tr=D[yt];if(z)var ys=Ae?z(Tr,rr,yt,D,B,me):z(rr,Tr,yt,B,D,me);if(!(ys===void 0?rr===Tr||he(rr,Tr,N,z,me):ys)){Qt=!1;break}Pn||(Pn=yt=="constructor")}if(Qt&&!Pn){var eo=B.constructor,ln=D.constructor;eo!=ln&&"constructor"in B&&"constructor"in D&&!(typeof eo=="function"&&eo instanceof eo&&typeof ln=="function"&&ln instanceof ln)&&(Qt=!1)}return me.delete(B),me.delete(D),Qt}function gi(B){return Wi(B,ms,Fo)}function pr(B,D){var N=B.__data__;return To(D)?N[typeof D=="string"?"string":"hash"]:N.map}function Sn(B,D){var N=lt(B,D);return Yi(N)?N:void 0}function Ao(B){var D=bt.call(B,un),N=B[un];try{B[un]=void 0;var z=!0}catch{}var he=Pt.call(B);return z&&(D?B[un]=N:delete B[un]),he}var Fo=xn?function(B){return B==null?[]:(B=Object(B),tt(xn(B),function(D){return Kt.call(B,D)}))}:st,Mn=qr;(Q&&Mn(new Q(new ArrayBuffer(1)))!=ee||pe&&Mn(new pe)!=y||Fe&&Mn(Fe.resolve())!=I||dt&&Mn(new dt)!=q||Je&&Mn(new Je)!=V)&&(Mn=function(B){var D=qr(B),N=D==C?B.constructor:void 0,z=N?Gn(N):"";if(z)switch(z){case wt:return ee;case Ut:return y;case Rn:return I;case qt:return q;case Wt:return V}return D});function No(B,D){return D=D??c,!!D&&(typeof B=="number"||ve.test(B))&&B>-1&&B%1==0&&B<D}function To(B){var D=typeof B;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?B!=="__proto__":B===null}function Io(B){return!!ct&&ct in B}function Vr(B){var D=B&&B.constructor,N=typeof D=="function"&&D.prototype||Mt;return B===N}function Zi(B){return Pt.call(B)}function Gn(B){if(B!=null){try{return Vt.call(B)}catch{}try{return B+""}catch{}}return""}function mi(B,D){return B===D||B!==B&&D!==D}var Ro=Xi(function(){return arguments}())?Xi:function(B){return Wr(B)&&bt.call(B,"callee")&&!Kt.call(B,"callee")},Ur=Array.isArray;function Ji(B){return B!=null&&Bo(B.length)&&!nr(B)}var yi=gn||nt;function gr(B,D){return Lr(B,D)}function nr(B){if(!Ki(B))return!1;var D=qr(B);return D==w||D==x||D==f||D==F}function Bo(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=c}function Ki(B){var D=typeof B;return B!=null&&(D=="object"||D=="function")}function Wr(B){return B!=null&&typeof B=="object"}var Qi=et?$t(et):Co;function ms(B){return Ji(B)?xo(B):Eo(B)}function st(){return[]}function nt(){return!1}e.exports=gr}(Us,Us.exports)),Us.exports}var oc,Op;function $6(){if(Op)return oc;Op=1;var e=200,n="__lodash_hash_undefined__",r=1/0,o=9007199254740991,s="[object Function]",u="[object GeneratorFunction]",c=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,d=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,f=typeof self=="object"&&self&&self.Object===Object&&self,p=d||f||Function("return this")();function g(H,Q,pe){switch(pe.length){case 0:return H.call(Q);case 1:return H.call(Q,pe[0]);case 2:return H.call(Q,pe[0],pe[1]);case 3:return H.call(Q,pe[0],pe[1],pe[2])}return H.apply(Q,pe)}function v(H,Q){for(var pe=-1,Fe=H?H.length:0,dt=0,Je=[];++pe<Fe;){var Ft=H[pe];Q(Ft,pe,H)&&(Je[dt++]=Ft)}return Je}function w(H,Q){var pe=H?H.length:0;return!!pe&&_(H,Q,0)>-1}function x(H,Q){for(var pe=-1,Fe=Q.length,dt=H.length;++pe<Fe;)H[dt+pe]=Q[pe];return H}function y(H,Q,pe,Fe){for(var dt=H.length,Je=pe+-1;++Je<dt;)if(Q(H[Je],Je,H))return Je;return-1}function _(H,Q,pe){if(Q!==Q)return y(H,m,pe);for(var Fe=pe-1,dt=H.length;++Fe<dt;)if(H[Fe]===Q)return Fe;return-1}function m(H){return H!==H}function C(H,Q){return H.has(Q)}function I(H,Q){return H?.[Q]}function F(H){var Q=!1;if(H!=null&&typeof H.toString!="function")try{Q=!!(H+"")}catch{}return Q}function j(H){var Q=-1,pe=Array(H.size);return H.forEach(function(Fe){pe[++Q]=Fe}),pe}var q=Array.prototype,Y=Function.prototype,ne=Object.prototype,O=p["__core-js_shared__"],V=function(){var H=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||"");return H?"Symbol(src)_1."+H:""}(),K=Y.toString,ee=ne.hasOwnProperty,Z=ne.toString,R=RegExp("^"+K.call(ee).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=q.splice,k=Math.max,J=Vt(p,"Map"),se=Vt(p,"Set"),U=Vt(Object,"create");function re(H){var Q=-1,pe=H?H.length:0;for(this.clear();++Q<pe;){var Fe=H[Q];this.set(Fe[0],Fe[1])}}function ue(){this.__data__=U?U(null):{}}function de(H){return this.has(H)&&delete this.__data__[H]}function ce(H){var Q=this.__data__;if(U){var pe=Q[H];return pe===n?void 0:pe}return ee.call(Q,H)?Q[H]:void 0}function ve(H){var Q=this.__data__;return U?Q[H]!==void 0:ee.call(Q,H)}function ge(H,Q){var pe=this.__data__;return pe[H]=U&&Q===void 0?n:Q,this}re.prototype.clear=ue,re.prototype.delete=de,re.prototype.get=ce,re.prototype.has=ve,re.prototype.set=ge;function Ee(H){var Q=-1,pe=H?H.length:0;for(this.clear();++Q<pe;){var Fe=H[Q];this.set(Fe[0],Fe[1])}}function Oe(){this.__data__=[]}function De(H){var Q=this.__data__,pe=lt(Q,H);if(pe<0)return!1;var Fe=Q.length-1;return pe==Fe?Q.pop():G.call(Q,pe,1),!0}function Se(H){var Q=this.__data__,pe=lt(Q,H);return pe<0?void 0:Q[pe][1]}function Be(H){return lt(this.__data__,H)>-1}function Et(H,Q){var pe=this.__data__,Fe=lt(pe,H);return Fe<0?pe.push([H,Q]):pe[Fe][1]=Q,this}Ee.prototype.clear=Oe,Ee.prototype.delete=De,Ee.prototype.get=Se,Ee.prototype.has=Be,Ee.prototype.set=Et;function Qe(H){var Q=-1,pe=H?H.length:0;for(this.clear();++Q<pe;){var Fe=H[Q];this.set(Fe[0],Fe[1])}}function kt(){this.__data__={hash:new re,map:new(J||Ee),string:new re}}function et(H){return gt(this,H).delete(H)}function tt(H){return gt(this,H).get(H)}function on(H){return gt(this,H).has(H)}function qe(H,Q){return gt(this,H).set(H,Q),this}Qe.prototype.clear=kt,Qe.prototype.delete=et,Qe.prototype.get=tt,Qe.prototype.has=on,Qe.prototype.set=qe;function we(H){var Q=-1,pe=H?H.length:0;for(this.__data__=new Qe;++Q<pe;)this.add(H[Q])}function $t(H){return this.__data__.set(H,n),this}function Bt(H){return this.__data__.has(H)}we.prototype.add=we.prototype.push=$t,we.prototype.has=Bt;function lt(H,Q){for(var pe=H.length;pe--;)if(an(H[pe][0],Q))return pe;return-1}function Ot(H,Q,pe,Fe){var dt=-1,Je=w,Ft=!0,wt=H.length,Ut=[],Rn=Q.length;if(!wt)return Ut;Q.length>=e&&(Je=C,Ft=!1,Q=new we(Q));e:for(;++dt<wt;){var qt=H[dt],Wt=qt;if(qt=qt!==0?qt:0,Ft&&Wt===Wt){for(var Bn=Rn;Bn--;)if(Q[Bn]===Wt)continue e;Ut.push(qt)}else Je(Q,Wt,Fe)||Ut.push(qt)}return Ut}function St(H){if(!un(H)||ct(H))return!1;var Q=Kt(H)||F(H)?R:l;return Q.test(Pt(H))}function sn(H,Q){return Q=k(Q===void 0?H.length-1:Q,0),function(){for(var pe=arguments,Fe=-1,dt=k(pe.length-Q,0),Je=Array(dt);++Fe<dt;)Je[Fe]=pe[Q+Fe];Fe=-1;for(var Ft=Array(Q+1);++Fe<Q;)Ft[Fe]=pe[Fe];return Ft[Q]=Je,g(H,this,Ft)}}function Jt(H,Q,pe){var Fe=-1,dt=w,Je=H.length,Ft=!0,wt=[],Ut=wt;if(Je>=e){var Rn=Mt(H);if(Rn)return j(Rn);Ft=!1,dt=C,Ut=new we}else Ut=wt;e:for(;++Fe<Je;){var qt=H[Fe],Wt=qt;if(qt=qt!==0?qt:0,Ft&&Wt===Wt){for(var Bn=Ut.length;Bn--;)if(Ut[Bn]===Wt)continue e;wt.push(qt)}else dt(Ut,Wt,pe)||(Ut!==wt&&Ut.push(Wt),wt.push(qt))}return wt}function wn(H,Q,pe){for(var Fe=-1,dt=H.length;++Fe<dt;)var Je=Je?x(Ot(Je,H[Fe],Q,pe),Ot(H[Fe],Je,Q,pe)):H[Fe];return Je&&Je.length?Jt(Je,Q,pe):[]}var Mt=se&&1/j(new se([,-0]))[1]==r?function(H){return new se(H)}:gn;function gt(H,Q){var pe=H.__data__;return bt(Q)?pe[typeof Q=="string"?"string":"hash"]:pe.map}function Vt(H,Q){var pe=I(H,Q);return St(pe)?pe:void 0}function bt(H){var Q=typeof H;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?H!=="__proto__":H===null}function ct(H){return!!V&&V in H}function Pt(H){if(H!=null){try{return K.call(H)}catch{}try{return H+""}catch{}}return""}var hn=sn(function(H){return wn(v(H,At))});function an(H,Q){return H===Q||H!==H&&Q!==Q}function _t(H){return H!=null&&Qn(H.length)&&!Kt(H)}function At(H){return xn(H)&&_t(H)}function Kt(H){var Q=un(H)?Z.call(H):"";return Q==s||Q==u}function Qn(H){return typeof H=="number"&&H>-1&&H%1==0&&H<=o}function un(H){var Q=typeof H;return!!H&&(Q=="object"||Q=="function")}function xn(H){return!!H&&typeof H=="object"}function gn(){}return oc=hn,oc}var sc,Mp;function q6(){if(Mp)return sc;Mp=1;var e=9007199254740991,n="[object Arguments]",r="[object Function]",o="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/;function u(O,V){for(var K=-1,ee=Array(O);++K<O;)ee[K]=V(K);return ee}function c(O,V){return function(K){return O(V(K))}}var l=Object.prototype,d=l.hasOwnProperty,f=l.toString,p=l.propertyIsEnumerable,g=c(Object.keys,Object);function v(O,V){var K=m(O)||_(O)?u(O.length,String):[],ee=K.length,Z=!!ee;for(var R in O)d.call(O,R)&&!(Z&&(R=="length"||x(R,ee)))&&K.push(R);return K}function w(O){if(!y(O))return g(O);var V=[];for(var K in Object(O))d.call(O,K)&&K!="constructor"&&V.push(K);return V}function x(O,V){return V=V??e,!!V&&(typeof O=="number"||s.test(O))&&O>-1&&O%1==0&&O<V}function y(O){var V=O&&O.constructor,K=typeof V=="function"&&V.prototype||l;return O===K}function _(O){return I(O)&&d.call(O,"callee")&&(!p.call(O,"callee")||f.call(O)==n)}var m=Array.isArray;function C(O){return O!=null&&j(O.length)&&!F(O)}function I(O){return Y(O)&&C(O)}function F(O){var V=q(O)?f.call(O):"";return V==r||V==o}function j(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=e}function q(O){var V=typeof O;return!!O&&(V=="object"||V=="function")}function Y(O){return!!O&&typeof O=="object"}function ne(O){return C(O)?v(O):w(O)}return sc=ne,sc}var ac,Pp;function L6(){if(Pp)return ac;Pp=1;function e(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(c){return typeof c}:e=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},e(s)}var n={string:function(u){return typeof u=="string"},number:function(u){return typeof u=="number"&&isFinite(u)},integer:function(u){return typeof u=="number"&&u%1===0},boolean:function(u){return typeof u=="boolean"},array:function(u){return u instanceof Array},null:function(u){return u===null},date:function(u){return u instanceof Date},any:function(u){return!0},object:function(u){return u&&e(u)==="object"&&!(u instanceof Array)&&!(u instanceof Date)}},r={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w!#$%&'*+-/=?^`{|}~]+\.)*[\w!#$%&'*+-/=?^`{|}~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(u){return typeof u=="string"&&parseFloat(u)===parseInt(u,10)&&!isNaN(u)},regex:function(u){var c=!0;try{new RegExp(u)}catch{c=!1}return c},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};r.regexp=r.regex,r.pattern=r.regex,r.ipv4=r["ip-address"];var o=function(u,c){if(typeof u=="string"&&r[c]!==void 0){if(r[c]instanceof RegExp)return r[c].test(u);if(typeof r[c]=="function")return r[c](u)}return!0};return ac={types:n,isFormat:o,FORMAT_REGEXPS:r},ac}var uc,zp;function H6(){if(zp)return uc;zp=1;var e=om(),n=$6(),r=q6(),o=L6(),s=o.types,u=o.FORMAT_REGEXPS,c=o.isFormat,l={stringFormats:r(u),isFormat:c,typeNames:["integer","number","string","array","object","boolean","null","date"],getType:function(f){return l.typeNames.find(function(p){return s[p](f)})},mergeSchemaObjs:function(f,p){var g=r(f),v=r(p);if(!e(g,v)){if(f.type==="array"&&p.type==="array"&&e(n(g,v),["items"])){var w=g.length>v.length?p:f,x=g.length>v.length?f:p,y=r(w).reduce(function(j,q){return e(w[q],x[q])&&j},!0);if(y)return w}if(f.type!=="object"||p.type!=="object")return null}for(var _={},m=0,C=g.length;m<C;m++){var I=g[m];if(l.getType(f[I])==="object"){var F=l.mergeSchemaObjs(f[I],p[I]);if(F)_[I]=F;else{if(f.type==="object"||p.type==="object")return{type:"object"};if(I!=="items"||f.type!=="array"||p.type!=="array")return null}}else if(I==="type")if(f[I]!==p[I])if(f[I]==="integer"&&p[I]==="number"||f[I]==="number"&&p[I]==="integer")_[I]="number";else return null;else _[I]=f[I];else{if(!e(f[I],p[I]))return null;_[I]=f[I]}}return _}};return uc=l,uc}var lc,jp;function G6(){if(jp)return lc;jp=1;function e(w,x){if(!(w instanceof x))throw new TypeError("Cannot call a class as a function")}function n(w,x){for(var y=0;y<x.length;y++){var _=x[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(w,_.key,_)}}function r(w,x,y){return x&&n(w.prototype,x),w}var o=k6(),s=om(),u=H6(),c={required:!1,postProcessFnc:null,strings:{detectFormat:!0,preProcessFnc:null},arrays:{mode:"all"},objects:{preProcessFnc:null,postProcessFnc:null,additionalProperties:!0}},l=["hostname","host-name","alpha","alphanumeric","regex","regexp","pattern"],d=u.stringFormats.filter(function(w){return l.indexOf(w)<0});function f(w){for(var x,y=0,_=w.length;y<_;y++){var m=w[y];if(y>0&&(m==="integer"&&x==="number"?m="number":m==="number"&&x==="integer"&&(x="number"),x!==m))return null;x=m}return x}function p(w){return f(w.map(function(x){return u.getType(x)}))}var g=function(){function w(x){e(this,w),this.options=o({},c,x),this.getObjectSchemaDefault=this.getObjectSchemaDefault.bind(this),this.getStringSchemaDefault=this.getStringSchemaDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this),this.commmonPostProcessDefault=this.commmonPostProcessDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this)}return r(w,[{key:"getCommonArrayItemSchema",value:function(y){var _=this,m=y.map(function(C){return _.getSchema(C)});return m.reduce(function(C,I){return u.mergeSchemaObjs(C,I)},m.pop())}},{key:"getObjectSchemaDefault",value:function(y){var _=this,m={type:"object"},C=Object.keys(y);return C.length>0&&(m.properties=C.reduce(function(I,F){return I[F]=_.getSchema(y[F]),I},{})),m}},{key:"getObjectSchema",value:function(y){return this.options.objects.preProcessFnc?this.options.objects.preProcessFnc(y,this.getObjectSchemaDefault):this.getObjectSchemaDefault(y)}},{key:"getArraySchemaMerging",value:function(y){var _={type:"array"},m=p(y);if(m)if(_.items={type:m},m!=="integer"&&m!=="number"){var C=this.getCommonArrayItemSchema(y);C&&(_.items=C)}else this.options.required&&(_.items.required=!0);return _}},{key:"getArraySchemaNoMerging",value:function(y){var _={type:"array"};return y.length>0&&(_.items=this.getSchema(y[0])),_}},{key:"getArraySchemaTuple",value:function(y){var _=this,m={type:"array"};return y.length>0&&(m.items=y.map(function(C){return _.getSchema(C)})),m}},{key:"getArraySchemaUniform",value:function(y){var _=this.getArraySchemaNoMerging(y);if(y.length>1){for(var m=1;m<y.length;m++)if(!s(_.items,this.getSchema(y[m])))throw new Error("Invalid schema, incompatible array items")}return _}},{key:"getArraySchema",value:function(y){if(y.length===0)return{type:"array"};switch(this.options.arrays.mode){case"all":return this.getArraySchemaMerging(y);case"first":return this.getArraySchemaNoMerging(y);case"uniform":return this.getArraySchemaUniform(y);case"tuple":return this.getArraySchemaTuple(y);default:throw new Error("Unknown array mode option '".concat(this.options.arrays.mode,"'"))}}},{key:"getStringSchemaDefault",value:function(y){var _={type:"string"};if(!this.options.strings.detectFormat)return _;var m=d.findIndex(function(C){return u.isFormat(y,C)});return m>=0&&(_.format=d[m]),_}},{key:"getStringSchema",value:function(y){return this.options.strings.preProcessFnc?this.options.strings.preProcessFnc(y,this.getStringSchemaDefault):this.getStringSchemaDefault(y)}},{key:"commmonPostProcessDefault",value:function(y,_,m){return this.options.required?o({},_,{required:!0}):_}},{key:"objectPostProcessDefault",value:function(y,_){return this.options.objects.additionalProperties===!1&&Object.getOwnPropertyNames(_).length>0?o({},y,{additionalProperties:!1}):y}},{key:"getSchema",value:function(y){var _=u.getType(y);if(!_)throw new Error("Type of value couldn't be determined");var m;switch(_){case"object":m=this.getObjectSchema(y);break;case"array":m=this.getArraySchema(y);break;case"string":m=this.getStringSchema(y);break;default:m={type:_}}return this.options.postProcessFnc?m=this.options.postProcessFnc(_,m,y,this.commmonPostProcessDefault):m=this.commmonPostProcessDefault(_,m,y),_==="object"&&(this.options.objects.postProcessFnc?m=this.options.objects.postProcessFnc(m,y,this.objectPostProcessDefault):m=this.objectPostProcessDefault(m,y)),m}}]),w}();function v(w,x){var y=new g(x);return y.getSchema(w)}return lc=v,lc}var V6=G6();const U6=ng(V6),sm=e=>{const{isOpen:n,onDismiss:r,onSuccess:o,model:s}=e,{token:u}=rd.useToken(),[c,l]=T.useState("");return T.useEffect(()=>{n&&s&&l(s)},[n]),A.jsxs(Mu,{title:"Convert to JSON Schema",open:n,destroyOnClose:!0,onCancel:r,width:540,okText:"Convert",onOk:()=>{try{o?.({schema:JSON.stringify(U6(Ii.parse(c)),null,2),model:c})}catch(d){Yt.error(d?.message)}},children:[A.jsx(rn.Text,{children:"Type or paste JSON or JSON5 model here and covert it to JSON Schema"}),A.jsx(id,{loading:A.jsx(ss,{size:"large"}),language:"javascript",theme:u.mode==="dark"?"vs-dark":"light",height:"400px",onChange:d=>l(d||""),value:c||"",onMount:(d,f)=>{f.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),f.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),d.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async p=>{try{await Du(JSON.stringify(Ii.parse(p.getValue()))),Yt.success("Copied to clipboard!")}catch{Yt.error("Failed to copy to clipboard.")}}}),d.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:p=>{const g=JSON.stringify(Ii.parse(p.getValue()),null,2);p.setValue(g)}})},options:{automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})]})};sm.__docgenInfo={description:"",methods:[],displayName:"JsonToJsonSchemaDialog",props:{id:{required:!1,tsType:{name:"string"},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { schema: string; model: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ schema: string; model: string }",signature:{properties:[{key:"schema",value:{name:"string",required:!0}},{key:"model",value:{name:"string",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""},onDismiss:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""},model:{required:!1,tsType:{name:"string"},description:""}}};const W6="Provide JSON Schema format. If no JSON Schema is provided, validation will be skipped.",kp={automaticLayout:!0,contextmenu:!1,fontSize:13,fontFamily:"var(--mono-font-family)",tabSize:2,minimap:{enabled:!1},overviewRulerBorder:!1,scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4}};var am=(e=>(e.Schema="Schema",e))(am||{});const Td=({id:e,type:n="input"})=>{const r=Zt(),o="json",{token:s}=rd.useToken(),[u,c]=T.useState(!1),[l,d]=T.useState("Schema"),[f,p]=T.useState(),[g,v]=T.useState(),w=Rh(()=>f?.layout(),100,{trailing:!0}),x=Rh(()=>g?.layout(),100,{trailing:!0}),{disabled:y,content:_}=pt(({simulate:I,disabled:F,configurable:j,decisionGraph:q})=>({nodeError:$e(I).with({error:{data:{nodeId:e}}},({error:Y})=>Y).otherwise(()=>null),disabled:F,configurable:j,content:(q?.nodes??[]).find(Y=>Y.id===e)?.content})),{contentDiff:m}=la(e),C=T.useMemo(()=>m?.fields?.schema?.previousValue,[m]);return T.useEffect(()=>(window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)),[w,f]),T.useEffect(()=>(window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[x,g]),A.jsx("div",{className:"grl-node-content","data-theme":s.mode,style:{height:"100%","--color-text":s.colorTextBase,"--color-background-elevated":s.colorBgElevated,"--color-border":s.colorBorder,"--line-height":s.lineHeight},children:A.jsx(fg,{className:"grl-node-content-main",direction:"horizontal",autoSaveId:`jdm-editor:${n}:schema:layout`,children:A.jsx("div",{className:"grl-node-content-side",children:A.jsxs("div",{className:"grl-node-content-side__panel",children:[A.jsx("div",{className:"grl-node-content-side__header",children:A.jsx(nd,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},items:Object.values(am).map(I=>({key:I,label:A.jsxs("span",{children:[I," ",A.jsx(xr,{title:W6,children:A.jsx(Cg,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})})]})})),activeKey:l,onChange:I=>d(I),tabBarExtraContent:A.jsxs(dg,{style:{marginRight:8},size:"small",children:[A.jsx(xr,{title:"Format code",placement:"bottomRight",children:A.jsx(ht,{size:"small",type:"text",disabled:y,icon:A.jsx(jw,{}),onClick:()=>f?.getAction?.("editor.action.formatDocument")?.run?.()})}),A.jsx(xr,{title:"Import from JSON",placement:"bottomRight",children:A.jsx(ht,{type:"text",size:"small",disabled:y,icon:A.jsx(Iw,{}),onClick:()=>{c(!0)}})})]})})}),A.jsx("div",{className:"grl-node-content-side__body",children:$e(l).with("Schema",()=>C!==void 0?A.jsx(kw,{loading:A.jsx(ss,{size:"large"}),language:o,original:C,modified:_?.schema,onMount:I=>v(I),theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...kp,readOnly:!0}}):A.jsx(id,{loading:A.jsx(ss,{size:"large"}),language:o,value:_?.schema||"",onMount:I=>p(I),onChange:I=>{r.updateNode(e,F=>(F.content={schema:I},F))},theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...kp,readOnly:y}})).exhaustive()}),A.jsx(sm,{isOpen:u,onDismiss:()=>c(!1),onSuccess:({schema:I,model:F})=>{localStorage.setItem(`${e}-model`,F),r.updateNode(e,j=>(j.content={schema:I},j)),c(!1)},model:localStorage.getItem(`${e}-model`)||void 0})]})})})})};Td.__docgenInfo={description:"",methods:[],displayName:"TabJsonSchema",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""},type:{required:!1,tsType:{name:"union",raw:"'input' | 'output'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'output'"}]},description:"",defaultValue:{value:"'input'",computed:!1}}}};const um={type:Dt.Input,icon:A.jsx($x,{size:"1em"}),displayName:"Request",color:_o.Green,documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Provides input context",generateNode:()=>({name:"request",content:{schema:""}}),renderTab:({id:e,manager:n})=>A.jsx(Td,{id:e,manager:n,type:"input"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),{disabled:u}=pt(({disabled:c})=>({disabled:c}));return A.jsx(Pi,{id:e,specification:o,name:n.name,isSelected:r,handleLeft:!1,actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")],menuItems:[{key:"documentation",icon:A.jsx(xg,{}),label:"Documentation",onClick:()=>window.open(o.documentationUrl,"_href")},{key:"delete",icon:A.jsx(Pu,{}),danger:!0,label:A.jsx(ks,{left:"Delete",right:mu.shortcut("Backspace")}),disabled:u,onClick:()=>Mu.confirm({icon:null,title:"Delete node",content:A.jsxs(rn.Text,{children:["Are you sure you want to delete ",A.jsx(rn.Text,{strong:!0,children:n.name})," node."]}),okButtonProps:{danger:!0},onOk:()=>s.removeNodes([e])})}]})},getDiffContent:(e,n)=>{const r={};return Tt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&nn.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}},lm={type:Dt.Output,icon:A.jsx(jx,{size:"1em"}),color:_o.Green,displayName:"Response",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Outputs the context",generateNode:()=>({name:"response",content:{schema:""}}),renderTab:({id:e,manager:n})=>A.jsx(Td,{id:e,manager:n,type:"output"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=Zt();return A.jsx(Pi,{id:e,specification:o,name:n.name,isSelected:r,handleRight:!1,actions:[A.jsx(ht,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")]})},getDiffContent:(e,n)=>{const r={};return Tt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&nn.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}};var Qc=new Map,su=new WeakMap,$p=0,X6=void 0;function Y6(e){return e?(su.has(e)||($p+=1,su.set(e,$p.toString())),su.get(e)):"0"}function Z6(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?Y6(e.root):e[n]}`).toString()}function J6(e){const n=Z6(e);let r=Qc.get(n);if(!r){const o=new Map;let s;const u=new IntersectionObserver(c=>{c.forEach(l=>{var d;const f=l.isIntersecting&&s.some(p=>l.intersectionRatio>=p);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=f),(d=o.get(l.target))==null||d.forEach(p=>{p(f,l)})})},e);s=u.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:n,observer:u,elements:o},Qc.set(n,r)}return r}function K6(e,n,r={},o=X6){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const d=e.getBoundingClientRect();return n(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:s,observer:u,elements:c}=J6(r),l=c.get(e)||[];return c.has(e)||c.set(e,l),l.push(n),u.observe(e),function(){l.splice(l.indexOf(n),1),l.length===0&&(c.delete(e),u.unobserve(e)),c.size===0&&(u.disconnect(),Qc.delete(s))}}function Q6({threshold:e,delay:n,trackVisibility:r,rootMargin:o,root:s,triggerOnce:u,skip:c,initialInView:l,fallbackInView:d,onChange:f}={}){var p;const[g,v]=T.useState(null),w=T.useRef(f),[x,y]=T.useState({inView:!!l,entry:void 0});w.current=f,T.useEffect(()=>{if(c||!g)return;let I;return I=K6(g,(F,j)=>{y({inView:F,entry:j}),w.current&&w.current(F,j),j.isIntersecting&&u&&I&&(I(),I=void 0)},{root:s,rootMargin:o,threshold:e,trackVisibility:r,delay:n},d),()=>{I&&I()}},[Array.isArray(e)?e.toString():e,g,s,o,u,c,r,d,n]);const _=(p=x.entry)==null?void 0:p.target,m=T.useRef(void 0);!g&&_&&!u&&!c&&m.current!==_&&(m.current=_,y({inView:!!l,entry:void 0}));const C=[v,x.inView,x.entry];return C.ref=C[0],C.inView=C[1],C.entry=C[2],C}const e8={type:Dt.Switch,icon:A.jsx(Ux,{size:"1em"}),displayName:"Switch",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/switch",shortDescription:"Conditional branching",color:_o.Purple,getDiffContent:(e,n)=>Tt(e,r=>{const o={};(e.hitPolicy??"")!==(n.hitPolicy??"")&&nn.set(o,"hitPolicy",{status:"modified",previousValue:e.hitPolicy});const s=Xs(e?.statements||[],n?.statements||[],{compareFields:(u,c)=>{const l=(u.condition??"")!==c.condition;return{hasChanges:l,fields:{...l&&{condition:{status:"modified",previousValue:c.condition}}}}}});return r.statements=s,s.find(u=>u?._diff?.status==="modified"||u?._diff?.status==="added"||u?._diff?.status==="removed")&&nn.set(o,"statements",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:()=>!1,determineOutputType:e=>e.input},generateNode:({index:e})=>({name:`switch${e}`,content:{hitPolicy:"first",statements:[{id:crypto.randomUUID(),condition:"",isDefault:!1}]}}),renderNode:({specification:e,...n})=>A.jsx(t8,{specification:e,...n})},t8=({id:e,data:n,selected:r,specification:o})=>{const s=Zt(),{ref:u,inView:c}=Q6({delay:1e3}),{content:l,disabled:d,nodeTrace:f,compactMode:p,isGraphActive:g}=pt(({decisionGraph:m,disabled:C,simulate:I,compactMode:F,activeTab:j})=>({nodeTrace:$e(I).with({result:ke._},({result:q})=>q?.trace?.[e]).otherwise(()=>null),content:(m?.nodes||[]).find(q=>q?.id===e)?.content,disabled:C,compactMode:F,isGraphActive:j==="graph"})),v=hs(e,{disabled:!g||!c}),w=l?.statements||[],x=l?.hitPolicy||"first",y=m=>{s.updateNode(e,C=>(C.content.hitPolicy=m,C))},_=T.useMemo(()=>p?r8:n8,[p]);return A.jsx(Pi,{id:e,ref:u,className:it(["switch"]),specification:o,name:n.name,handleRight:!1,helper:[A.jsx(td,{},"arrow-right")],noBodyPadding:!0,isSelected:r,actions:[A.jsx(ht,{type:"text",disabled:d,onClick:()=>{x==="first"&&w?.length>0?s.updateNode(e,m=>(m.content.statements=(m.content.statements||[]).map(C=>(C.isDefault&&(C.isDefault=!1),C)),m.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!0}),m)):s.updateNode(e,m=>(m.content.statements=(m.content.statements||[]).map(C=>(C.isDefault&&(C.isDefault=!1),C)),m.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!1}),m))},children:"Add Condition"},"add condition"),A.jsx(Ys,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>y("first"),disabled:d},{key:"collect",label:"Collect",disabled:d,onClick:()=>{s.updateNode(e,m=>(m.content.statements=(m.content.statements||[]).map(C=>(C.isDefault&&(C.isDefault=!1),C)),m)),y("collect")}}]},children:A.jsxs(ht,{type:"text",style:{textTransform:"capitalize",marginLeft:"auto"},children:[x," ",A.jsx(lC,{})]})},"hitPolicy")],children:A.jsx("div",{className:"switchNode",children:A.jsxs("div",{className:"switchNode__body edit nodrag",children:[!(w?.length>0)&&A.jsx(rn.Text,{type:"secondary",className:"no-conditions",children:"No conditions"}),w.map((m,C)=>A.jsx(_,{index:C,value:m.condition,diff:m?._diff,id:m.id,isDefault:m.isDefault,totalStatements:w.length,disabled:d,hitPolicy:x,variableType:v,onSetIsDefault:I=>{s.updateNode(e,F=>{const j=F.content.statements.find(q=>q.id===m.id);return I&&(j.condition=""),j.isDefault=I,F})},isActive:$e(f?.traceData).with({statements:ke.array(ke._)},({statements:I})=>I.some(F=>typeof F=="object"&&F&&"id"in F&&F.id===m?.id)).otherwise(()=>!1),onDelete:()=>{s.updateNode(e,I=>(I.content.statements=I.content.statements.filter(F=>F?.id!==m?.id),(I.content.statements||[]).length===1&&(I.content.statements=(I.content.statements||[]).map(F=>(F.isDefault&&(F.isDefault=!1),F))),I)),s.removeEdgeByHandleId(m?.id)},onChange:I=>{s.updateNode(e,F=>{const j=F.content.statements.find(q=>q.id===m.id);return j.condition=I,F})}},m.id))]})})})},n8=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:u=!0,onDelete:c,isActive:l,index:d=0,isDefault:f=!1,onSetIsDefault:p,totalStatements:g,hitPolicy:v,variableType:w})=>{const[x,y]=T.useState(n);T.useLayoutEffect(()=>{x!==n&&y(n)},[n]);const _=I=>{y(I),o?.(I)},m=d===g-1,C=f&&v==="first"&&m&&d>0&&(n||"")?.trim?.()?.length===0;return A.jsxs("div",{className:it("switchNode__statement",l&&"active",r?.status&&`diff-${r?.status}`),children:[A.jsxs("div",{className:it("switchNode__statement__heading",C&&"switchNode__statement__heading--without-input"),children:[(d===0||v==="collect")&&A.jsx(ht,{disabled:s,className:it("switchNode__statement__heading__action"),size:"small",type:"text",children:"If"}),v!=="collect"&&d>0&&A.jsx(ht,{className:it("switchNode__statement__heading__action",C&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{m&&v==="first"&&p?.(!1)},children:"Else If"}),v!=="collect"&&d>0&&m&&A.jsx(ht,{className:it("switchNode__statement__heading__action",!C&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{m&&v==="first"&&p?.(!0)},children:"Else"}),A.jsx("div",{style:{flexGrow:1}}),!s&&u&&A.jsx(cg,{title:"Remove condition?",okText:"Remove",onConfirm:()=>c?.(),children:A.jsx(ht,{className:"switchNode__statement__delete",size:"small",type:"text",icon:A.jsx(Pu,{})})}),A.jsx(Mi,{id:e,type:"source",position:Ce.Right,className:it(l&&"switchNode__activeHandle")})]}),!C&&A.jsx("div",{className:"switchNode__statement__inputArea",children:A.jsx(Bu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:x,maxRows:4,disabled:s,onChange:_,variableType:w})})]})},r8=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:u=!0,onDelete:c,isActive:l,variableType:d})=>{const[f,p]=T.useState(n);T.useLayoutEffect(()=>{f!==n&&p(n)},[n]);const g=v=>{p(v),o?.(v)};return A.jsxs("div",{className:it("switchNode__statement","compact",l&&"active",r?.status&&`diff-${r?.status}`),children:[A.jsx("div",{className:it("switchNode__statement__inputArea"),children:A.jsx(Bu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:f,maxRows:4,disabled:s,onChange:g,variableType:d})}),!s&&u&&A.jsx("div",{className:"switchNode__statement__button",children:A.jsx(cg,{title:"Remove condition?",okText:"Remove",onConfirm:()=>c?.(),children:A.jsx(ht,{className:"switchNode__statement__delete",size:"small",type:"text",icon:A.jsx(Pu,{})})})}),A.jsx(Mi,{id:e,type:"source",position:Ce.Right,className:it(l&&"switchNode__activeHandle")})]})};const Do={[Dt.Input]:um,[Dt.Output]:lm,[Dt.DecisionTable]:Q0,[Dt.Expression]:tm,[Dt.Function]:rm,[Dt.Switch]:e8},i8=()=>{const{stateStore:e}=bo();return T.useEffect(()=>{if(go())return e.subscribe(({simulate:n,nodeTypes:r,decisionGraph:o},s)=>{try{if(Jn(n,s?.simulate))return;const u=$e(n).with({result:ke.nonNullable},({result:d})=>d.trace).otherwise(()=>null);if(u===null){const d=Tt(r,f=>{Object.values(f).forEach(p=>{delete p[vt.Input],delete p[vt.Output]})});e.setState({nodeTypes:d});return}const c=Object.values(u);if(c.length===0)return;const l=Tt(r,d=>{c.forEach(f=>{o.nodes.find(g=>g.id===f.id)?.type!=="inputNode"&&(d[f.id]??={},d[f.id][vt.Output]=new Zn(f.output??{}),d[f.id][vt.Input]=new Zn(f.input??{}))})});e.setState({nodeTypes:l})}catch(u){console.error("error occurred while setting up variable types from trace",u)}})},[]),T.useEffect(()=>{if(!go())return;const n=E6();return e.subscribe((r,o)=>{try{const s=qp(r),u=qp(o),c=s8(r,o);if(Jn(s,u)&&!c)return;const l=o8(r,o,n);l.isModified&&e.setState({nodeTypes:l.nodeTypes})}catch(s){console.error("error occurred during node type inference",s)}})},[]),T.useEffect(()=>{if(go())return e.subscribe((n,r)=>{try{const o=Lp(n),s=Lp(r);if(Jn(o,s))return;const u=Zn.fromJson({Object:{}});n.decisionGraph.nodes.forEach(c=>{const l=n.nodeTypes[c.id],d=l?.[vt.Output]??l?.[vt.InferredOutput]??Zn.fromJson({Object:{}});u.set(c.name,d)}),e.setState({globalType:{$nodes:u}})}catch(o){console.error("error occurred while global node types",o)}})},[]),null},o8=({decisionGraph:e,nodeTypes:n,customNodes:r},o,s)=>{let u=!1;const c=Tt(n,l=>{s.walk(e).forEach(({node:d,incomers:f})=>{if(d.type==="inputNode")return;const p=f.map(F=>{const j=l[F.id]??{};return j[vt.Output]??j[vt.InferredOutput]}).filter(F=>!!F).map(F=>F.clone()),g=$e(p.length).with(1,()=>p[0]).otherwise(()=>Zn.fromIncoming(p));l?.[d.id]?.[vt.InferredInput]?.equal(g)||(u=!0,l[d.id]??={},l[d.id][vt.InferredInput]=g);const w=Do[d.type]?.inferTypes??r.find(F=>F.kind===d.type)?.inferTypes;if(!w)return;const x=l?.[d.id]?.[vt.Input]??l?.[d.id]?.[vt.InferredInput]??Zn.fromJson("Any"),y=o.nodeTypes?.[d.id]?.[vt.Input]??o.nodeTypes?.[d.id]?.[vt.InferredInput]??Zn.fromJson("Any"),_=o.decisionGraph.nodes.find(F=>F.id===d.id)?.content;if(!(w.needsUpdate(d.content,_)||!x.equal(y))&&l?.[d.id]?.[vt.InferredOutput])return;const C=w.determineOutputType({input:x,content:d.content});l?.[d.id]?.[vt.InferredOutput]?.equal(C)||(u=!0,l[d.id]??={},l[d.id][vt.InferredOutput]=C)})});return{isModified:u,nodeTypes:c}},qp=({decisionGraph:e,nodeTypes:n,customNodes:r})=>{const o=e.edges,s=e.nodes.map(({id:f,type:p})=>({id:f,type:p})),u=r.map(f=>f.kind),c=Object.entries(n).map(([f,p])=>({id:f,input:ed(p[vt.Input]),output:ed(p[vt.Output])})),l=e.nodes.find(f=>f.type==="inputNode")?.id,d=$e(n?.[l??""]?.[vt.InferredOutput]).with(ke.nonNullable,f=>f.hash()).otherwise(()=>null);return{edgesData:o,nodesData:s,typesData:c,customNodesData:u,inputNodeType:d}},s8=({decisionGraph:e,customNodes:n},r)=>e.nodes.map(s=>{const u=Do[s.type]?.inferTypes??n.find(l=>l.kind===s.type)?.inferTypes;if(!u)return!1;const c=r.decisionGraph.nodes.find(l=>l.id===s.id);return c?u.needsUpdate(s.content,c.content):!0}).some(s=>s),ed=e=>{if(e)return e.__hash||(e.__hash=e.hash()),e.__hash},Lp=e=>({nodeInfo:e.decisionGraph.nodes.map(r=>{const o=e.nodeTypes[r.id],s=o?.[vt.Output]??o?.[vt.InferredOutput];return{id:r.id,type:ed(s),name:r.name}})});var Xt=function(){return Xt=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Xt.apply(this,arguments)},Hp={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Gp={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},au={width:"20px",height:"20px",position:"absolute",zIndex:1},a8={top:Xt(Xt({},Hp),{top:"-5px"}),right:Xt(Xt({},Gp),{left:void 0,right:"-5px"}),bottom:Xt(Xt({},Hp),{top:void 0,bottom:"-5px"}),left:Xt(Xt({},Gp),{left:"-5px"}),topRight:Xt(Xt({},au),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Xt(Xt({},au),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Xt(Xt({},au),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Xt(Xt({},au),{left:"-10px",top:"-10px",cursor:"nw-resize"})},u8=T.memo(function(e){var n=e.onResizeStart,r=e.direction,o=e.children,s=e.replaceStyles,u=e.className,c=T.useCallback(function(f){n(f,r)},[n,r]),l=T.useCallback(function(f){n(f,r)},[n,r]),d=T.useMemo(function(){return Xt(Xt({position:"absolute",userSelect:"none"},a8[r]),s??{})},[s,r]);return A.jsx("div",{className:u||void 0,style:d,onMouseDown:c,onTouchStart:l,children:o})}),l8=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])},e(n,r)};return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Or=function(){return Or=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Or.apply(this,arguments)},c8={width:"auto",height:"auto"},uu=function(e,n,r){return Math.max(Math.min(e,r),n)},Vp=function(e,n,r){var o=Math.round(e/n);return o*n+r*(o-1)},Jo=function(e,n){return new RegExp(e,"i").test(n)},lu=function(e){return!!(e.touches&&e.touches.length)},d8=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},Up=function(e,n,r){r===void 0&&(r=0);var o=n.reduce(function(u,c,l){return Math.abs(c-e)<Math.abs(n[u]-e)?l:u},0),s=Math.abs(n[o]-e);return r===0||s<r?n[o]:e},cc=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},cu=function(e,n,r,o){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var s=Number(e.replace("%",""))/100;return n*s}if(e.endsWith("vw")){var s=Number(e.replace("vw",""))/100;return r*s}if(e.endsWith("vh")){var s=Number(e.replace("vh",""))/100;return o*s}}return e},f8=function(e,n,r,o,s,u,c){return o=cu(o,e.width,n,r),s=cu(s,e.height,n,r),u=cu(u,e.width,n,r),c=cu(c,e.height,n,r),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof u>"u"?void 0:Number(u),minHeight:typeof c>"u"?void 0:Number(c)}},h8=function(e){return Array.isArray(e)?e:[e,e]},p8=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Wp="__resizable_base__",g8=function(e){l8(n,e);function n(r){var o,s,u,c,l=e.call(this,r)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.delta={width:0,height:0},l.appendBase=function(){if(!l.resizable||!l.window)return null;var d=l.parentNode;if(!d)return null;var f=l.window.document.createElement("div");return f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.transform="scale(0, 0)",f.style.left="0",f.style.flex="0 0 100%",f.classList?f.classList.add(Wp):f.className+=Wp,d.appendChild(f),f},l.removeBase=function(d){var f=l.parentNode;f&&f.removeChild(d)},l.state={isResizing:!1,width:(s=(o=l.propsSize)===null||o===void 0?void 0:o.width)!==null&&s!==void 0?s:"auto",height:(c=(u=l.propsSize)===null||u===void 0?void 0:u.height)!==null&&c!==void 0?c:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(n.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||c8},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){var r=0,o=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,u=this.resizable.offsetHeight,c=this.resizable.style.position;c!=="relative"&&(this.resizable.style.position="relative"),r=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:u,this.resizable.style.position=c}return{width:r,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sizeStyle",{get:function(){var r=this,o=this.props.size,s=function(l){var d;if(typeof r.state[l]>"u"||r.state[l]==="auto")return"auto";if(r.propsSize&&r.propsSize[l]&&(!((d=r.propsSize[l])===null||d===void 0)&&d.toString().endsWith("%"))){if(r.state[l].toString().endsWith("%"))return r.state[l].toString();var f=r.getParentSize(),p=Number(r.state[l].toString().replace("px","")),g=p/f[l]*100;return"".concat(g,"%")}return cc(r.state[l])},u=o&&typeof o.width<"u"&&!this.state.isResizing?cc(o.width):s("width"),c=o&&typeof o.height<"u"&&!this.state.isResizing?cc(o.height):s("height");return{width:u,height:c}},enumerable:!1,configurable:!0}),n.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var r=this.appendBase();if(!r)return{width:0,height:0};var o=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),r.style.position="relative",r.style.minWidth="100%",r.style.minHeight="100%";var u={width:r.offsetWidth,height:r.offsetHeight};return o&&(this.parentNode.style.flexWrap=s),this.removeBase(r),u},n.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},n.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},n.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var r=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:r.flexBasis!=="auto"?r.flexBasis:void 0})}},n.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},n.prototype.createSizeForCssProperty=function(r,o){var s=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===r&&(typeof s>"u"||s==="auto")?"auto":r},n.prototype.calculateNewMaxFromBoundary=function(r,o){var s=this.props.boundsByDirection,u=this.state.direction,c=s&&Jo("left",u),l=s&&Jo("top",u),d,f;if(this.props.bounds==="parent"){var p=this.parentNode;p&&(d=c?this.resizableRight-this.parentLeft:p.offsetWidth+(this.parentLeft-this.resizableLeft),f=l?this.resizableBottom-this.parentTop:p.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(d=c?this.resizableRight:this.window.innerWidth-this.resizableLeft,f=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(d=c?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),f=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return d&&Number.isFinite(d)&&(r=r&&r<d?r:d),f&&Number.isFinite(f)&&(o=o&&o<f?o:f),{maxWidth:r,maxHeight:o}},n.prototype.calculateNewSizeFromDirection=function(r,o){var s=this.props.scale||1,u=h8(this.props.resizeRatio||1),c=u[0],l=u[1],d=this.state,f=d.direction,p=d.original,g=this.props,v=g.lockAspectRatio,w=g.lockAspectRatioExtraHeight,x=g.lockAspectRatioExtraWidth,y=p.width,_=p.height,m=w||0,C=x||0;return Jo("right",f)&&(y=p.width+(r-p.x)*c/s,v&&(_=(y-C)/this.ratio+m)),Jo("left",f)&&(y=p.width-(r-p.x)*c/s,v&&(_=(y-C)/this.ratio+m)),Jo("bottom",f)&&(_=p.height+(o-p.y)*l/s,v&&(y=(_-m)*this.ratio+C)),Jo("top",f)&&(_=p.height-(o-p.y)*l/s,v&&(y=(_-m)*this.ratio+C)),{newWidth:y,newHeight:_}},n.prototype.calculateNewSizeFromAspectRatio=function(r,o,s,u){var c=this.props,l=c.lockAspectRatio,d=c.lockAspectRatioExtraHeight,f=c.lockAspectRatioExtraWidth,p=typeof u.width>"u"?10:u.width,g=typeof s.width>"u"||s.width<0?r:s.width,v=typeof u.height>"u"?10:u.height,w=typeof s.height>"u"||s.height<0?o:s.height,x=d||0,y=f||0;if(l){var _=(v-x)*this.ratio+y,m=(w-x)*this.ratio+y,C=(p-y)/this.ratio+x,I=(g-y)/this.ratio+x,F=Math.max(p,_),j=Math.min(g,m),q=Math.max(v,C),Y=Math.min(w,I);r=uu(r,F,j),o=uu(o,q,Y)}else r=uu(r,p,g),o=uu(o,v,w);return{newWidth:r,newHeight:o}},n.prototype.setBoundingClientRect=function(){var r=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var s=o.getBoundingClientRect();this.parentLeft=s.left*r,this.parentTop=s.top*r}}if(this.props.bounds&&typeof this.props.bounds!="string"){var u=this.props.bounds.getBoundingClientRect();this.targetLeft=u.left*r,this.targetTop=u.top*r}if(this.resizable){var c=this.resizable.getBoundingClientRect(),l=c.left,d=c.top,f=c.right,p=c.bottom;this.resizableLeft=l*r,this.resizableRight=f*r,this.resizableTop=d*r,this.resizableBottom=p*r}},n.prototype.onResizeStart=function(r,o){if(!(!this.resizable||!this.window)){var s=0,u=0;if(r.nativeEvent&&d8(r.nativeEvent)?(s=r.nativeEvent.clientX,u=r.nativeEvent.clientY):r.nativeEvent&&lu(r.nativeEvent)&&(s=r.nativeEvent.touches[0].clientX,u=r.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var c=this.props.onResizeStart(r,o,this.resizable);if(c===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,d=this.window.getComputedStyle(this.resizable);if(d.flexBasis!=="auto"){var f=this.parentNode;if(f){var p=this.window.getComputedStyle(f).flexDirection;this.flexDir=p.startsWith("row")?"row":"column",l=d.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var g={original:{x:s,y:u,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Or(Or({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(r.target).cursor||"auto"}),direction:o,flexBasis:l};this.setState(g)}},n.prototype.onMouseMove=function(r){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&lu(r))try{r.preventDefault(),r.stopPropagation()}catch{}var s=this.props,u=s.maxWidth,c=s.maxHeight,l=s.minWidth,d=s.minHeight,f=lu(r)?r.touches[0].clientX:r.clientX,p=lu(r)?r.touches[0].clientY:r.clientY,g=this.state,v=g.direction,w=g.original,x=g.width,y=g.height,_=this.getParentSize(),m=f8(_,this.window.innerWidth,this.window.innerHeight,u,c,l,d);u=m.maxWidth,c=m.maxHeight,l=m.minWidth,d=m.minHeight;var C=this.calculateNewSizeFromDirection(f,p),I=C.newHeight,F=C.newWidth,j=this.calculateNewMaxFromBoundary(u,c);this.props.snap&&this.props.snap.x&&(F=Up(F,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(I=Up(I,this.props.snap.y,this.props.snapGap));var q=this.calculateNewSizeFromAspectRatio(F,I,{width:j.maxWidth,height:j.maxHeight},{width:l,height:d});if(F=q.newWidth,I=q.newHeight,this.props.grid){var Y=Vp(F,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),ne=Vp(I,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),O=this.props.snapGap||0,V=O===0||Math.abs(Y-F)<=O?Y:F,K=O===0||Math.abs(ne-I)<=O?ne:I;F=V,I=K}var ee={width:F-w.width,height:I-w.height};if(this.delta=ee,x&&typeof x=="string"){if(x.endsWith("%")){var Z=F/_.width*100;F="".concat(Z,"%")}else if(x.endsWith("vw")){var R=F/this.window.innerWidth*100;F="".concat(R,"vw")}else if(x.endsWith("vh")){var G=F/this.window.innerHeight*100;F="".concat(G,"vh")}}if(y&&typeof y=="string"){if(y.endsWith("%")){var Z=I/_.height*100;I="".concat(Z,"%")}else if(y.endsWith("vw")){var R=I/this.window.innerWidth*100;I="".concat(R,"vw")}else if(y.endsWith("vh")){var G=I/this.window.innerHeight*100;I="".concat(G,"vh")}}var k={width:this.createSizeForCssProperty(F,"width"),height:this.createSizeForCssProperty(I,"height")};this.flexDir==="row"?k.flexBasis=k.width:this.flexDir==="column"&&(k.flexBasis=k.height);var J=this.state.width!==k.width,se=this.state.height!==k.height,U=this.state.flexBasis!==k.flexBasis,re=J||se||U;re&&tg.flushSync(function(){o.setState(k)}),this.props.onResize&&re&&this.props.onResize(r,v,this.resizable,ee)}},n.prototype.onMouseUp=function(r){var o,s,u=this.state,c=u.isResizing,l=u.direction;u.original,!(!c||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(r,l,this.resizable,this.delta),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Or(Or({},this.state.backgroundStyle),{cursor:"auto"})}))},n.prototype.updateSize=function(r){var o,s;this.setState({width:(o=r.width)!==null&&o!==void 0?o:"auto",height:(s=r.height)!==null&&s!==void 0?s:"auto"})},n.prototype.renderResizer=function(){var r=this,o=this.props,s=o.enable,u=o.handleStyles,c=o.handleClasses,l=o.handleWrapperStyle,d=o.handleWrapperClass,f=o.handleComponent;if(!s)return null;var p=Object.keys(s).map(function(g){return s[g]!==!1?A.jsx(u8,{direction:g,onResizeStart:r.onResizeStart,replaceStyles:u&&u[g],className:c&&c[g],children:f&&f[g]?f[g]:null},g):null});return A.jsx("div",{className:d,style:l,children:p})},n.prototype.render=function(){var r=this,o=Object.keys(this.props).reduce(function(c,l){return p8.indexOf(l)!==-1||(c[l]=r.props[l]),c},{}),s=Or(Or(Or({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var u=this.props.as||"div";return A.jsxs(u,Or({style:s,className:this.props.className},o,{ref:function(c){c&&(r.resizable=c)},children:[this.state.isResizing&&A.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},n.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},n}(T.PureComponent);const Xp="jdmEditor:graphPanel:height",cm=()=>{const e=Zt(),{panels:n,activePanel:r}=pt(({panels:u,activePanel:c})=>({panels:u,activePanel:c})),o=T.useMemo(()=>r===void 0?void 0:(n||[]).find(u=>u.id===r),[r,n]),s=T.useMemo(()=>Number.parseFloat(localStorage.getItem(Xp)??"")??300,[o]);return o?A.jsxs(g8,{className:"grl-dg__panel",defaultSize:{height:s},handleStyles:{bottom:{display:"none"},left:{display:"none"},topLeft:{display:"none"},topRight:{display:"none"},right:{display:"none"},bottomLeft:{display:"none"},bottomRight:{display:"none"}},maxHeight:500,minHeight:150,onResize:(u,c,l)=>{localStorage.setItem(Xp,l.clientHeight.toString())},children:[!o.hideHeader&&A.jsxs("div",{className:"grl-dg__panel__toolbar",children:[A.jsx("div",{className:"grl-dg__panel__toolbar__content",children:A.jsx(rn.Text,{style:{fontSize:13},children:o.title})}),A.jsx("div",{className:"grl-dg__panel__toolbar__actions",children:A.jsx(xr,{placement:"topLeft",title:"Close panel",children:A.jsx(ht,{size:"small",type:"text",icon:A.jsx(os,{style:{fontSize:12}}),onClick:()=>e.setActivePanel(void 0)})})})]}),A.jsx("div",{className:"grl-dg__panel__content",children:o?.renderPanel?.({})})]}):null};cm.__docgenInfo={description:"",methods:[],displayName:"GraphPanel"};const ia=fe.string().default(()=>crypto.randomUUID());var dm=(e=>(e.Input="inputNode",e.Output="outputNode",e.DecisionTable="decisionTableNode",e.Function="functionNode",e.Expression="expressionNode",e.Switch="switchNode",e.Decision="decisionNode",e))(dm||{});const m8="customNode",di=fe.object({id:ia,name:fe.string(),position:fe.object({x:fe.number(),y:fe.number()}).default({x:0,y:0})}),y8=fe.object({type:fe.literal("inputNode"),content:fe.object({schema:fe.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(di),v8=fe.object({type:fe.literal("outputNode"),content:fe.object({schema:fe.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(di),D8=fe.object({type:fe.literal("decisionTableNode"),content:fe.object({hitPolicy:fe.enum(["first","collect"]).nullish().transform(e=>e??"first"),rules:fe.array(fe.record(fe.string(),fe.string().nullish().transform(e=>e??""))).default([]),inputs:fe.array(fe.object({id:ia,name:fe.string().nullish(),field:fe.string().nullish(),defaultValue:fe.string().nullish()})),outputs:fe.array(fe.object({id:ia,name:fe.string(),field:fe.string(),defaultValue:fe.string().nullish()})),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(di),b8=fe.object({type:fe.literal("functionNode"),content:fe.string().or(fe.object({source:fe.string().default("")})).nullish()}).merge(di),_8=fe.object({type:fe.literal("expressionNode"),content:fe.object({expressions:fe.array(fe.object({id:ia,key:fe.string().default(""),value:fe.string().default("")})),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(di),w8=fe.object({type:fe.literal("decisionNode"),content:fe.object({key:fe.string(),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(di),x8=fe.object({type:fe.literal("switchNode"),content:fe.object({hitPolicy:fe.enum(["first","collect"]).nullish().transform(e=>e??"first"),statements:fe.array(fe.object({id:ia,condition:fe.string().nullish().transform(e=>e??""),isDefault:fe.boolean().nullish().transform(e=>e??!1)}))})}).merge(di),C8=fe.object({type:fe.literal(m8),content:fe.object({kind:fe.string(),config:fe.any()})}).merge(di),E8=fe.object({type:fe.string().refine(e=>!Object.values(dm).includes(e),{message:"Invalid type"}),content:fe.any().nullish()}).merge(di),vu=fe.discriminatedUnion("type",[w8,_8,b8,D8,x8,C8,y8,v8]).or(E8),S8=fe.object({id:fe.string(),sourceId:fe.string(),targetId:fe.string(),sourceHandle:fe.string().nullish(),type:fe.enum(["edge"])});fe.object({inputSchema:fe.any().nullish().default(null),outputSchema:fe.any().nullish().default(null)});const Yp=fe.object({nodes:fe.array(vu).default([]),edges:fe.array(S8).default([])}),fm=e=>{const n=Zt(),{id:r,sourceX:o,sourceY:s,targetX:u,targetY:c,sourcePosition:l,targetPosition:d,style:f={},markerEnd:p}=e,{isHovered:g,disabled:v}=pt(({hoveredEdgeId:m,disabled:C})=>({isHovered:m===r,disabled:C})),{diff:w}=x6(r),[x,y,_]=_d({sourceX:o,sourceY:s,sourcePosition:l,targetX:u,targetY:c,targetPosition:d});return A.jsxs(A.Fragment,{children:[A.jsx(ds,{path:x,markerEnd:p,style:{...f||{},stroke:$e(w).with({status:"added"},()=>"var(--grl-color-success)").with({status:"removed"},()=>"var(--grl-color-error)").otherwise(()=>{})}}),A.jsx(o6,{children:A.jsx("div",{className:"nodrag nopan edge-renderer",style:{transform:`translate(-50%, -50%) translate(${y}px,${_}px)`},children:!v&&A.jsx(ht,{type:"primary",shape:"round",icon:A.jsx(Pu,{}),danger:!0,className:it("grl-edge-delete-button"),"data-visible":g,onClick:()=>n.removeEdges([r])})})})]})},A8=e=>n=>A.jsx(fm,{...n,...e});fm.__docgenInfo={description:"",methods:[],displayName:"CustomEdge"};const F8=e=>typeof e!="object"?!1:Array.isArray(e?.nodes),N8=(e,n)=>{const r=bo(),o=Zt(),s=T.useCallback(async c=>{try{if(!e.current)return;const l=(r.stateStore.getState()?.decisionGraph?.nodes||[]).filter(g=>c.some(v=>v.id===g.id)),d=l.map(g=>g.id),f=[];l.length>0&&e.current.getEdges().forEach(v=>{d.includes(v.source)&&d.includes(v.target)&&f.push({id:v.id,type:v.type,sourceId:v.source,targetId:v.target,sourceHandle:v.sourceHandle??void 0,targetHandle:v.targetHandle??void 0})}),await Du(JSON.stringify({nodes:l,edges:f})),Yt.success("Copied to clipboard!")}catch(l){Yt.error(l.message)}},[r]),u=T.useCallback(async()=>{try{if(!e?.current)return;const c=await $w();if(!c)return;const l=JSON.parse(c);if(!F8(l))throw new Error("invalid clipboard");const d=l.nodes.reduce((y,_)=>({...y,[_.id]:crypto.randomUUID()}),{}),f=Object.keys(d),p=e.current.getNodes().find(y=>f.includes(y.id)),g=l.nodes.find(y=>y.id===p?.id),v={x:l.nodes.reduce((y,_)=>y+_.position.x,0)/l.nodes.length,y:l.nodes.reduce((y,_)=>y+_.position.y,0)/l.nodes.length},w=l.nodes.map(y=>{const _={x:y?.position?.x||0,y:y?.position?.y||0};if(p&&g)y.id===p.id?(_.x=p.position.x,_.y=p.position.y-20):(_.x=p.position.x-g.position.x+y.position.x,_.y=p.position.y-g.position.y+y.position.y-20);else if(n.current){const m=n.current.getBoundingClientRect(),C={x:m.width/2,y:m.height/2},I=e.current.project(C);_.x=y.position.x+I.x-v.x/2,_.y=y.position.y+I.y-v.y/2}return{...y,position:_,id:d[y.id]}}),x=(l.edges||[]).map(y=>({id:crypto.randomUUID(),type:y.type,sourceId:d[y.sourceId],targetId:d[y.targetId],sourceHandle:y.sourceHandle??void 0,targetHandle:y.targetHandle??void 0}));if(o.addNodes(w),o.addEdges(x),Yt.success("Pasted from clipboard!"),p)try{await Du(JSON.stringify({nodes:w}))}catch{}}catch{Yt.error("Failed to paste from clipboard")}},[e,n]);return T.useMemo(()=>({copyNodes:s,pasteNodes:u}),[s,u])},hm=W.memo(({inputDisabled:e,disabled:n})=>{const r=pt(p=>p.components||[]),o=pt(p=>p.customNodes||[]),[s,u]=T.useState(""),c=T.useCallback((p,g,v)=>{const w=p.target;if(!w)return;const{offsetX:x,offsetY:y}=p.nativeEvent,{height:_,width:m}=w.getBoundingClientRect(),C={x:x/m,y:y/_};p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("nodeType",g),p.dataTransfer.setData("relativePosition",JSON.stringify(C)),v&&p.dataTransfer.setData("customNodeComponent",v)},[]),l=T.useMemo(()=>{const p={core:Object.values(Do)};return r?.length>0&&(p.extended=r),(o||[]).forEach(g=>{const v=g.group?.trim?.()||"";v.length>0&&(p?.[v]?p[v].push({...g,type:"customNode"}):p[v]=[{...g,type:"customNode"}])}),(o||[]).forEach(g=>{g?.group||(p?.custom?p.custom.push({...g,type:"customNode"}):p.custom=[{...g,type:"customNode"}])}),p},[r,o]),d=T.useMemo(()=>Object.keys(l).reduce((p,g)=>({...p,[g]:(l[g]||[]).filter(v=>!(s?.trim?.().length>0)||(v.type||"").toLowerCase().indexOf(s.toLowerCase())>-1||(v.displayName||"").toLowerCase().indexOf(s.toLowerCase())>-1||(v.shortDescription||"").toLowerCase().indexOf(s.toLowerCase())>-1||(v.group||"").toLowerCase().indexOf(s.toLowerCase())>-1)}),{}),[l,s]),f=r.length+o.length;return A.jsxs("div",{children:[f>5&&A.jsx(ew,{placeholder:"Search components...",value:s,onChange:p=>u(p.target.value||""),allowClear:!0,className:"grl-dg__aside__menu__components__search"}),A.jsx("div",{className:"grl-dg__aside__menu__components",children:Object.keys(d).map(p=>$e(p).with("core",()=>d.core?.length>0&&A.jsx(W.Fragment,{children:(d.core||[]).map(g=>A.jsx(W.Fragment,{children:A.jsx(Zp,{disabled:$e(g.type).with(Dt.Input,()=>n||e).otherwise(()=>n),specification:g,onDragStart:v=>Do[g.type]!==void 0?c(v,g.type):c(v,"customNode","kind"in g?g.kind:"")})},"kind"in g?g.kind:g.type))},p)).otherwise(g=>d[g]?.length>0&&A.jsx(W.Fragment,{children:(d?.[g]||[]).map(v=>A.jsx(Zp,{disabled:n,specification:v,onDragStart:w=>g==="extended"?c(w,v.type):c(w,"customNode","kind"in v?v.kind:"")},"kind"in v?v.kind:v.type))},g)))})]})}),Zp=({specification:e,disabled:n=!1,...r})=>A.jsx("div",{className:it("draggable-component"),draggable:!n,...r,children:A.jsx("div",{style:{pointerEvents:"none"},children:A.jsx(Nd,{listMode:!0,compactMode:!0,color:e.color,icon:e.icon,name:e.displayName,type:e.shortDescription})})});hm.__docgenInfo={description:"",methods:[],displayName:"GraphComponents",props:{inputDisabled:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const T8=Object.entries(Do).reduce((e,[n,r])=>({...e,[n]:W.memo(o=>r.renderNode({specification:r,...o}),(o,s)=>o.id===s.id&&o.selected===s.selected&&fc(o.data,s.data))}),{}),I8={edge:W.memo(A8(null))},pm=T.forwardRef(function({reactFlowProOptions:n,className:r},o){const s=T.useRef(null),u=T.useRef(null),c=s6([]),l=a6([]),[d,f]=T.useState(!0),p=bo(),g=Zt(),v=w6(O=>O),{onReactFlowInit:w}=Z0(({onReactFlowInit:O})=>({onReactFlowInit:O})),{disabled:x,hasInputNode:y,components:_,customNodes:m}=pt(({disabled:O,components:V,customNodes:K,decisionGraph:ee})=>({disabled:O,components:V,customNodes:K,hasInputNode:(ee?.nodes||[]).some(Z=>Z.type===Dt.Input)}));v.nodesState.current=c,v.edgesState.current=l,v.graphClipboard.current=N8(u,s),v.reactFlowInstance.current=u.current;const C=T.useMemo(()=>W.memo(O=>{const V=m.find(K=>K.kind===O?.data?.kind);return V?V.renderNode({specification:V,...O}):(console.warn("node not found",O,m),A.jsx(Pi,{id:O.id,specification:{displayName:`${O.data?.kind}`,color:"var(--grl-color-error)",icon:A.jsx(_C,{})},name:O?.data?.name,isSelected:O.selected,displayError:!0,noBodyPadding:!0,handleLeft:!0,handleRight:!0}))},(O,V)=>O.id===V.id&&O.selected===V.selected&&fc(O.data,V.data)),[m]),I=T.useMemo(()=>_.reduce((O,V)=>({...O,[V.type]:W.memo(K=>V.renderNode({specification:V,...K}),(K,ee)=>K.id===ee.id&&K.selected===ee.selected&&fc(K.data,ee.data))}),{...T8,customNode:C}),[_,C]),F=async(O,V,K)=>{if(!s.current||!u.current)return;if(!V){const G=s.current.getBoundingClientRect(),k={x:G.width/2,y:G.height/2};V=u.current.project(k)}const ee=$e(O).with("customNode",()=>m.find(G=>G.kind===K)).otherwise(()=>[...Object.values(Do),..._].find(k=>k.type===O));if(!ee){Yt.error(`Unknown node type ${O} - ${K}.`);return}let Z=$e(ee).with({kind:ke.string},G=>{const k=(u.current?.getNodes()||[]).filter(se=>se.data?.kind===G.kind).length+1,J=G.generateNode({index:k});return{id:crypto.randomUUID(),type:"customNode",name:J.name,position:V,content:{kind:G.kind,config:J?.config}}}).with({type:ke.string},G=>{const k=(u.current?.getNodes()||[]).filter(se=>se.type===G.type).length+1,J=G.generateNode({index:k});return{id:crypto.randomUUID(),type:G.type,position:V,...J}}).otherwise(()=>null);if(!Z){Yt.error(`Unknown node type ${O} - ${K}.`);return}if(ee.onNodeAdd)try{Z=await ee.onNodeAdd(Z)}catch{return}const R=vu.safeParse(Z);if(R.success)return g.addNodes([vu.parse(Z)]);Yt.error(R.error?.message)},j=O=>{if(O.source===O.target||x)return!1;const[V]=c,[K]=l,ee=K.some(G=>G.source===O.source&&G.target===O.target&&(G.sourceHandle??null)===(O.sourceHandle??null)&&(G.targetHandle??null)===(O.targetHandle??null)),Z=V.find(G=>G.id===O.target);if(!Z||Z.id===O.source)return!1;const R=(G,k=new Set)=>{if(k.has(G.id))return!1;k.add(G.id);for(const J of Iu(G,V,K))if(J.id===O.source||R(J,k))return!0};return!ee&&!R(Z)},q=O=>{if(O.preventDefault(),O.stopPropagation(),!s.current||!u.current)return;const V=s.current.getBoundingClientRect();let K;try{K=JSON.parse(O.dataTransfer.getData("relativePosition"))}catch{return}const ee=u.current.project({x:O.clientX-V.left,y:O.clientY-V.top});ee.x-=Math.round(K.x*226/10)*10,ee.y-=Math.round(K.y*60/10)*10;const Z=O.dataTransfer.getData("nodeData");if(Z){try{const k=JSON.parse(Z);g.addNodes([vu.parse({...k,position:ee})])}catch(k){ad.error({message:"Failed to create a node"}),console.error(k)}return}const R=O.dataTransfer.getData("nodeType"),G=$e(O.dataTransfer.getData("customNodeComponent")).with(ke.string,k=>k).otherwise(()=>{});F(R,ee,G)},Y=O=>{O.preventDefault(),O.dataTransfer.dropEffect="move"},ne=O=>{const V={...O,type:"edge",id:crypto.randomUUID()};x||g.addEdges([_6(V)])};return T.useImperativeHandle(o,()=>({...g,stateStore:p.stateStore})),A.jsx("div",{className:it(["tab-content",r]),tabIndex:0,onKeyDown:O=>{O.key==="v"&&O.metaKey&&!x&&g.pasteNodes()},children:A.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex"},children:[!x&&!d&&A.jsx("div",{className:"grl-dg__components__floating",style:{position:"absolute",top:8,right:8,zIndex:1},children:A.jsx(xr,{placement:"right",title:"Components",children:A.jsx(ht,{icon:A.jsx(fC,{style:{fontSize:12}}),onClick:()=>f(!0)})})}),A.jsx("div",{tabIndex:0,className:"content-wrapper",onKeyDown:O=>{const[V]=c,[K]=l;if(O.key==="c"&&O.metaKey){const ee=c[0].filter(Z=>Z.selected).map(({id:Z})=>Z);if(ee.length===0)return;g.copyNodes(ee),O.preventDefault()}else if(O.key==="d"&&O.metaKey){if(!x){const ee=V.filter(Z=>Z.selected).map(({id:Z})=>Z);if(ee.length===0)return;g.duplicateNodes(ee)}O.preventDefault()}else if(O.key==="Backspace"){if(!x){const ee=V.filter(R=>R.selected),Z=K.filter(R=>R.selected);if(ee.length>0){const R=ee.length,G=R>1?"nodes":"node";Mu.confirm({icon:null,title:`Delete ${G}`,content:A.jsxs(rn.Text,{children:["Are you sure you want to delete ",R>1?`${R} ${G}`:G,"?"]}),okButtonProps:{danger:!0},onOk:()=>{Z.length>0&&g.removeEdges(Z.map(k=>k.id)),g.removeNodes(ee.map(k=>k.id))}})}else Z.length>0&&g.removeEdges(Z.map(R=>R.id))}O.stopPropagation(),O.preventDefault()}},children:A.jsx("div",{className:it(["react-flow"]),ref:s,children:A.jsxs(V0,{deleteKeyCode:null,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,zoomOnDoubleClick:!1,connectionRadius:35,nodes:c[0],edges:l[0],onInit:O=>{u.current=O,w?.(O)},snapToGrid:!0,snapGrid:[5,5],minZoom:.25,selectionMode:cs.Partial,nodeTypes:I,edgeTypes:I8,onDrop:q,onDragOver:Y,onConnect:ne,isValidConnection:j,proOptions:n,nodesConnectable:!x,nodesDraggable:!x,edgesUpdatable:!x,onNodesChange:g.handleNodesChange,onEdgesChange:g.handleEdgesChange,onNodesDelete:O=>{O.forEach(V=>{g.closeTab(V?.id)})},onEdgeMouseEnter:(O,V)=>g.setHoveredEdgeId(V.id),onEdgeMouseLeave:()=>g.setHoveredEdgeId(null),children:[A.jsx(p6,{showInteractive:!1,children:A.jsx(Qo,{onClick:()=>g.toggleCompactMode(),children:A.jsx(oC,{})})}),A.jsx(b6,{color:"var(--grl-color-border)",gap:20})]})})}),!x&&d&&A.jsxs("div",{className:"grl-dg__aside__menu",children:[A.jsxs("div",{className:"grl-dg__aside__menu__heading",children:[A.jsxs("div",{className:"grl-dg__aside__menu__heading__text",children:[A.jsx(rn.Text,{strong:!0,style:{marginBottom:0},children:"Components"})," ",A.jsx(rn.Text,{type:"secondary",style:{fontSize:10,marginLeft:5},children:"(Drag-and-drop)"})]}),A.jsx(ht,{type:"text",size:"small",icon:A.jsx(os,{style:{fontSize:12}}),onClick:()=>f(!1)})]}),A.jsx("div",{className:"grl-dg__aside__menu__content",children:A.jsx(hm,{inputDisabled:y,disabled:x})})]})]})})});pm.__docgenInfo={description:"",methods:[],displayName:"Graph",props:{className:{required:!1,tsType:{name:"string"},description:""},onDisableTabs:{required:!1,tsType:{name:"signature",type:"function",raw:"(val: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"val"}],return:{name:"void"}}},description:""},reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""}}};const Jp="application/vnd.gorules.decision",gm=()=>{const e=bo(),n=T.useRef(null),r=T.useRef(null),{setDecisionGraph:o,setActivePanel:s}=Zt(),{disabled:u,panels:c,activePanel:l}=pt(({disabled:x,panels:y,activePanel:_})=>({disabled:x,panels:y,activePanel:_})),d=async x=>{const y=x?.target?.files,_=new FileReader;_.onload=function(m){try{const C=JSON.parse(m?.target?.result);if(C?.contentType!==Jp)throw new Error("Invalid content type");const I=Array.isArray(C?.nodes)?C.nodes:[],F=I.map(Y=>Y.id),j=C.edges.filter(Y=>F.includes(Y?.targetId)&&F.includes(Y?.sourceId)),q=Yp.safeParse({nodes:I,edges:j,settings:C?.settings});if(!q.success){console.log(q.error?.message),Yt.error(q.error?.message);return}o(q.data)}catch(C){Yt.error(C.message)}},_.readAsText(Array.from(y)?.[0],"UTF-8")},f=x=>{const y=x?.target?.files[0],_=new FileReader;try{_.readAsArrayBuffer(y),_.onload=async()=>{const m=_.result;if(!m)return;const{decisionGraph:C}=e.stateStore.getState(),I=await Rw(m,C),F=C.nodes.map(Y=>{let ne=Y;return I.forEach(O=>{O.id===Y.id&&(ne={...Y,content:O.content})}),ne}),j=I.filter(Y=>!F.some(ne=>ne.id===Y.id)).map((Y,ne)=>({...Y,position:{x:ne*250,y:0}})),q=Yp.safeParse({nodes:[...F,...j],edges:C.edges});if(!q.success){console.log(q.error?.message),Yt.error(q.error?.message);return}o(q.data),Yt.success("Excel file has been uploaded successfully!")}}catch{Yt.error("Failed to upload Excel!")}},p=async()=>{try{const{name:x,decisionGraph:y}=e.stateStore.getState(),_=`${x.replaceAll(".json","")}.json`,m=JSON.stringify({contentType:Jp,nodes:y.nodes,edges:y.edges},null,2),C=new Blob([m],{type:"application/json"}),I=URL.createObjectURL(C),F=window.document.createElement("a");F.href=I,F.download=_,window.document.body.appendChild(F),F.click(),window.document.body.removeChild(F),URL.revokeObjectURL(I)}catch(x){Yt.error(x.message)}},g=async()=>{try{const{name:x,decisionGraph:y}=e.stateStore.getState(),_=x.replaceAll(".json",""),m=y.nodes.filter(C=>C.type===Dt.DecisionTable).map(C=>({...C.content,id:C.id,name:C.name}));await Bw(_,m),Yt.success("Excel file has been downloaded successfully!")}catch{Yt.error("Failed to download Excel file!")}},v=[{key:"upload-json",label:"Upload JSON",onClick:()=>n?.current?.click?.()},{key:"upload-excel",label:"Upload Excel",onClick:()=>r?.current?.click?.()}],w=[{key:"download-json",label:"Download JSON",onClick:()=>p()},{key:"download-excel",label:"Download Excel",onClick:()=>g()}];return A.jsxs("div",{className:"grl-dg__aside",children:[A.jsx("input",{hidden:!0,accept:"application/json",type:"file",ref:n,onChange:d,onClick:x=>{x.target.value=null}}),A.jsx("input",{hidden:!0,accept:".xlsx",type:"file",ref:r,onChange:f,onClick:x=>{x.target.value=null}}),A.jsxs("div",{className:"grl-dg__aside__side-bar",children:[A.jsxs("div",{className:"grl-dg__aside__side-bar__top",children:[!u&&A.jsx(Ys,{menu:{items:v},placement:"bottomRight",trigger:["click"],arrow:!0,children:A.jsx(ht,{type:"text",disabled:u,icon:A.jsx(rC,{})})}),A.jsx(Ys,{menu:{items:w},placement:"bottomRight",trigger:["click"],arrow:!0,children:A.jsx(ht,{type:"text",icon:A.jsx(tC,{})})})]}),A.jsx("div",{className:"grl-dg__aside__side-bar__bottom",children:(c||[]).map(x=>{const y=l===x.id;return A.jsx(xr,{title:`${y?"Close":"Open"} ${x.title.toLowerCase()} panel`,placement:"right",children:A.jsx(ht,{type:"text",icon:x.icon,style:{background:y?"rgba(0, 0, 0, 0.1)":void 0},onClick:()=>{if(x?.onClick)return x.onClick();x?.renderPanel&&s(y?void 0:x.id)}},x.id)},x.id)})})]})]})};gm.__docgenInfo={description:"",methods:[],displayName:"GraphSideToolbar"};const mm=({disabled:e,tabBarExtraContent:n})=>{const r=Zt(),{openNodes:o,activeNodeId:s}=pt(({decisionGraph:u,activeTab:c,openTabs:l})=>({activeNodeId:(u?.nodes??[]).find(d=>d.id===c)?.id,openNodes:(l||[]).map(d=>{const f=(u?.nodes??[]).find(p=>p.id===d);if(f)return{id:f?.id,name:f.name,type:f.type,diff:f?._diff}}).filter(d=>!!d)}));return A.jsx("div",{children:A.jsx(nd,{type:"line",size:"small",className:it("grl-graph-tabs"),activeKey:s||"graph",onChange:u=>r.openTab(u),tabBarExtraContent:n,items:[{closable:!1,key:"graph",label:A.jsx(Kp,{total:o?.length,icon:A.jsx(aC,{}),name:"Graph",active:!s||s==="graph",onContextClick:u=>{r.closeTab("graph",u)}})},...o.map((u,c)=>{const l=Do[u.type];return{disabled:e,key:u.id,label:A.jsx(Kp,{onContextClick:d=>{r.closeTab(u.id,d)},icon:l?.icon,name:u?.name??u?.type,diffStatus:u?.diff?.status,color:l?.color,index:c,active:u.id===s,total:o?.length,onClose:()=>r.closeTab(u.id)}),closable:!0}})]})})},Kp=({total:e=0,index:n=-1,icon:r,name:o,active:s,diffStatus:u,color:c=_o.Blue,onClose:l,onContextClick:d})=>{const f=[e>0&&n!==-1&&{key:"close",label:"Close",onClick:()=>d?.("close")},e>0&&n!==-1&&{key:"close-all",label:"Close all Tabs",onClick:()=>d?.("close-all")},e>0&&n!==-1&&{key:"close-other",label:"Close other Tabs",onClick:()=>d?.("close-other")},e>0&&n+1<e&&{key:"close-right",label:"Close Tabs to the right",onClick:()=>d?.("close-right")},e>0&&n>0&&n>0&&{key:"close-left",label:"Close Tabs to the left",onClick:()=>d?.("close-left")}].filter(p=>!!p);return A.jsx(Ys,{menu:{items:f},trigger:["contextMenu"],children:A.jsxs("div",{className:"grl-graph-tabs__tab","data-active":s,children:[A.jsx(_g,{size:"small",shape:"square",style:{background:c,fontSize:11,width:18,height:18,lineHeight:"18px",borderRadius:3},icon:r}),o,A.jsx(rg,{status:u,style:{fontSize:16}}),l&&A.jsx(ht,{className:"grl-graph-tabs__closeIcon",type:"text",size:"small",style:{height:20,width:20,color:"black",borderRadius:"50%",lineHeight:0},icon:A.jsx(os,{style:{fontSize:10}}),onClick:p=>{p.stopPropagation(),l?.()}})]})})};mm.__docgenInfo={description:"",methods:[],displayName:"GraphTabs",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"TabsProps['tabBarExtraContent']"},description:""}}};const ym=W.memo(T.forwardRef(function({reactFlowProOptions:n,tabBarExtraContent:r},o){const[s,u]=T.useState(!1),c=pt(({decisionGraph:l,activeTab:d})=>(l?.nodes??[]).some(f=>f.id===d));return A.jsxs(A.Fragment,{children:[A.jsx(gm,{}),A.jsxs("div",{className:"grl-dg__graph",children:[A.jsx(mm,{disabled:s,tabBarExtraContent:r}),A.jsx(pm,{ref:o,className:it([!c&&"active"]),reactFlowProOptions:n,onDisableTabs:u}),A.jsx(R8,{})]}),A.jsx(cm,{})]})})),R8=W.memo(()=>{const{openNodes:e,activeNodeId:n,components:r}=pt(({decisionGraph:u,openTabs:c,activeTab:l,components:d})=>{const f=(u?.nodes??[]).find(g=>g.id===l)?.id;return{openNodes:(u?.nodes??[]).filter(g=>c.includes(g.id)).map(({id:g,type:v})=>({id:g,type:v})),activeNodeId:f,components:d}}),o=T.useRef(null),s=T.useMemo(()=>tw(nw,void 0,{rootElement:o.current}),[o.current]);return A.jsx("div",{style:{display:"contents"},ref:o,children:e.map(u=>A.jsx("div",{className:it(["tab-content",n===u?.id&&"active"]),children:$e(u?.type).with(Dt.DecisionTable,()=>Q0?.renderTab?.({id:u?.id,manager:s})).with(Dt.Function,()=>rm?.renderTab?.({id:u?.id,manager:s})).with(Dt.Expression,()=>tm?.renderTab?.({id:u?.id,manager:s})).with(Dt.Input,()=>um?.renderTab?.({id:u?.id,manager:s})).with(Dt.Output,()=>lm?.renderTab?.({id:u?.id,manager:s})).otherwise(()=>{const c=r.find(l=>l.type===u.type);return c?c?.renderTab?.({id:u.id,manager:s}):null})},u?.id))})});ym.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphWrapper",props:{reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"GraphTabsProps['tabBarExtraContent']"},description:""}}};const B8=T.forwardRef(({manager:e,reactFlowProOptions:n,tabBarExtraContent:r,...o},s)=>A.jsx("div",{className:"grl-dg",children:A.jsx(Fd,{children:A.jsxs(Y0,{children:[A.jsx(ym,{ref:s,reactFlowProOptions:n,tabBarExtraContent:r}),A.jsx(i8,{}),A.jsx(C6,{...o})]})})}));B8.__docgenInfo={description:"",methods:[],displayName:"DecisionGraph",props:{manager:{required:!1,tsType:{name:"DragDropManager"},description:""},reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"GraphTabsProps['tabBarExtraContent']"},description:""},id:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]}},description:""},value:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},configurable:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"signature['components']",raw:"DecisionGraphStoreType['state']['components']"},description:""},customNodes:{required:!1,tsType:{name:"signature['customNodes']",raw:"DecisionGraphStoreType['state']['customNodes']"},description:""},name:{required:!1,tsType:{name:"signature['name']",raw:"DecisionGraphStoreType['state']['name']"},description:""},defaultActivePanel:{required:!1,tsType:{name:"string"},description:""},panels:{required:!1,tsType:{name:"signature['panels']",raw:"DecisionGraphStoreType['state']['panels']"},description:""},onPanelsChange:{required:!1,tsType:{name:"signature['onPanelsChange']",raw:"DecisionGraphStoreType['listeners']['onPanelsChange']"},description:""},simulate:{required:!1,tsType:{name:"signature['simulate']",raw:"DecisionGraphStoreType['state']['simulate']"},description:""},onChange:{required:!1,tsType:{name:"signature['onChange']",raw:"DecisionGraphStoreType['listeners']['onChange']"},description:""},onReactFlowInit:{required:!1,tsType:{name:"signature['onReactFlowInit']",raw:"DecisionGraphStoreType['listeners']['onReactFlowInit']"},description:""},onCodeExtension:{required:!1,tsType:{name:"signature['onCodeExtension']",raw:"DecisionGraphStoreType['listeners']['onCodeExtension']"},description:""},onFunctionReady:{required:!1,tsType:{name:"signature['onFunctionReady']",raw:"DecisionGraphStoreType['listeners']['onFunctionReady']"},description:""}}};const Id=({value:e,onChange:n,readOnly:r})=>{const{token:o}=rd.useToken();return A.jsx(id,{loading:A.jsx(ss,{size:"large"}),language:"javascript",value:e,onChange:n,theme:o.mode==="dark"?"vs-dark":"light",height:"100%",onMount:(s,u)=>{u.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),u.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),s.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async c=>{try{await Du(JSON.stringify(Ii.parse(c.getValue()))),Yt.success("Copied to clipboard!")}catch{Yt.error("Failed to copy to clipboard.")}}}),s.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:c=>{const l=JSON.stringify(Ii.parse(c.getValue()),null,2);c.setValue(l)}})},options:{readOnly:r,automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})};Id.__docgenInfo={description:"",methods:[],displayName:"SimulatorEditor",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};const O8="Your business context that enters through the Request node, starting the decision process. Supply JSON or JSON5 format.",vm=({onChange:e,hasInputNode:n,loading:r,onRun:o,defaultRequest:s})=>{const[u,c]=T.useState(s),{stateStore:l,actions:d}=bo();return T.useEffect(()=>{if(!go())return;const{decisionGraph:f}=l.getState(),p=f.nodes.find(g=>g.type==="inputNode");if(p)try{const g=u?Ii.parse(u):"Any";d.setNodeType(p.id,vt.InferredOutput,new Zn(g))}catch{}},[u]),A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request",children:[A.jsx(xr,{title:O8,children:A.jsxs(rn.Text,{style:{fontSize:13,cursor:"help"},children:["Request",A.jsx(Cg,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})]})}),A.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&A.jsx(xr,{title:n?void 0:"Request node is required to run the graph. Drag-and-drop it from the Components panel.",children:A.jsx(ht,{size:"small",type:"primary",loading:r,icon:A.jsx(mC,{}),disabled:!n,onClick:()=>{try{const f=(u||"").trim().length===0?null:Ii.parse(u||"");o?.({graph:l.getState().decisionGraph,context:f})}catch{ad.error({message:"Invalid format",description:"Unable to format request, invalid JSON format",placement:"top"})}},children:"Run"})})})]}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(Id,{value:u,onChange:f=>{c(f),e?.(f??"")}})})]})};vm.__docgenInfo={description:"",methods:[],displayName:"SimulatorRequestPanel",props:{defaultRequest:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}}},description:""},hasInputNode:{required:!1,tsType:{name:"boolean"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onRun:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""}}};var Dm=(e=>(e.Output="Output",e.Input="Input",e.Trace="Trace",e))(Dm||{});const M8=({defaultRequest:e,onChange:n,onRun:r,onClear:o,loading:s=!1,leftPanel:u=vm})=>{const[c,l]=Ru("simulation.search",""),[d,f]=Ru("simulation.segment","Output"),{actions:p}=bo(),{nodeTypes:g,simulate:v,hasInputNode:w}=pt(({decisionGraph:m,simulate:C})=>({simulate:C,hasInputNode:m.nodes.some(I=>I.type===Dt.Input),nodeTypes:(m.nodes??[]).reduce((I,F)=>({...I,[F.id]:F.type}),{})})),[x,y]=T.useState("graph"),_=T.useMemo(()=>v?"result"in v?Object.entries(v.result?.trace??{}).map(([m,C])=>({...C,nodeId:m})).filter(m=>![Dt.Input].includes(g?.[m.nodeId])).filter(m=>m.name.toLowerCase().includes(c?.toLowerCase()??"")).sort((m,C)=>(m.order??0)-(C.order??0)):[]:[],[v,c]);return A.jsxs(fg,{className:"grl-dg__simulator",direction:"horizontal",autoSaveId:"jdm-editor:simulator:layout",children:[A.jsx(Wl,{minSize:20,defaultSize:30,className:"grl-dg__simulator__section grl-dg__simulator__request",children:A.jsx(u,{defaultRequest:e,loading:s,hasInputNode:w,onRun:r,onChange:n})}),A.jsx(Bh,{}),A.jsxs(Wl,{minSize:20,maxSize:20,className:"grl-dg__simulator__section grl-dg__simulator__nodes",children:[A.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--nodes",children:[A.jsx("input",{className:"grl-dg__simulator__search",type:"text",placeholder:"Search nodes...",value:c,onChange:m=>l(m.target.value)}),A.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&A.jsx(xr,{title:"Clear",children:A.jsx(ht,{size:"small",type:"text",icon:A.jsx(Jx,{}),onClick:()=>{o?.(),y("graph"),l("")}})})})]}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(ss,{spinning:s,children:A.jsxs("div",{className:"grl-dg__simulator__nodes-list",children:[!v&&A.jsxs(rn.Text,{type:"secondary",style:{textAlign:"center",marginTop:60,fontSize:13},children:["Ready to simulate!",A.jsx("br",{}),"Run a request to see the node trace in action.",A.jsx("br",{}),A.jsx(rn.Link,{href:"https://docs.gorules.io/docs/simulator",target:"_blank",style:{fontSize:13,marginTop:4,display:"inline-block"},children:"Learn more"})]}),"graph".includes(c?.toLowerCase()??"")&&v&&A.jsxs("div",{className:it("grl-dg__simulator__nodes-list__node",x==="graph"&&"active"),onClick:()=>y("graph"),children:[A.jsxs(rn.Text,{"data-role":"name",ellipsis:!0,children:[A.jsx(eg,{status:$e(v).with({error:ke.nonNullable},()=>"error").with({result:ke.nonNullable},()=>"success").otherwise(()=>"not-run")}),"Graph"]}),A.jsx(rn.Text,{type:"secondary","data-role":"performance",children:$e(v).with({result:ke._},({result:m})=>m?.performance).otherwise(()=>{})})]}),_.map(m=>A.jsxs("div",{className:it("grl-dg__simulator__nodes-list__node",m.nodeId===x&&"active"),onClick:()=>y(m.nodeId),onDoubleClick:()=>p.goToNode(m.nodeId),children:[A.jsxs(rn.Text,{"data-role":"name",ellipsis:{tooltip:m.name},children:[A.jsx(eg,{status:m.nodeId===v?.error?.data?.nodeId?"error":"success"}),m.name]}),A.jsx(rn.Text,{type:"secondary","data-role":"performance",children:m.performance})]},m.nodeId))]})})})]}),A.jsx(Bh,{}),A.jsxs(Wl,{minSize:30,defaultSize:50,className:"grl-dg__simulator__section grl-dg__simulator__response",children:[A.jsx("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--response",children:A.jsx(nd,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},onChange:m=>f(m),items:Object.values(Dm).map(m=>({key:m,label:m})),tabBarExtraContent:A.jsx(xr,{title:"Close panel",children:A.jsx(ht,{type:"text",icon:A.jsx(os,{style:{fontSize:12}}),onClick:()=>p.setActivePanel(void 0)})})})}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(Id,{readOnly:!0,value:$e(v).with({result:ke._},({result:m})=>$e(x).with("graph",()=>Qp({traceData:m?.trace,output:m?.result},d??"Output")).otherwise(()=>Qp(m?.trace[x],d??"Output"))).otherwise(()=>"")})})]})]})},Qp=(e,n)=>{const r=$e([n,e]).with(["Output",{output:ke._}],([,{output:o}])=>o).with(["Input",{input:ke._}],([,{input:o}])=>o).with(["Trace",{trace:ke._}],([,{trace:o}])=>o).with(["Trace",{traceData:ke._}],([,{traceData:o}])=>o).otherwise(()=>({}));return Ii.stringify(r,void 0,2)},eg=({status:e})=>e==="not-run"?null:e==="success"?A.jsx(Yx,{twoToneColor:["var(--grl-color-success)","var(--grl-color-success-bg)"],style:{marginRight:6,fontSize:12,opacity:.5}}):A.jsx(Qx,{twoToneColor:["var(--grl-color-error)","var(--grl-color-error-bg)"],style:{marginRight:5,fontSize:12}});M8.__docgenInfo={description:"",methods:[],displayName:"GraphSimulator",props:{onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultRequest:{required:!1,tsType:{name:"string",raw:"SimulatorRequestPanelProps['defaultRequest']"},description:""},onChange:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onChange']"},description:""},onRun:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onRun']"},description:""},leftPanel:{required:!1,tsType:{name:"ReactFC",raw:"React.FC<SimulatorRequestPanelProps>",elements:[{name:"signature",type:"object",raw:`{
  defaultRequest?: string;
  onChange?: (contextJson: string) => void;
  hasInputNode?: boolean;
  loading?: boolean;
  onRun?: (payload: { graph: DecisionGraphType; context: unknown }) => void;
}`,signature:{properties:[{key:"defaultRequest",value:{name:"string",required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}},required:!1}},{key:"hasInputNode",value:{name:"boolean",required:!1}},{key:"loading",value:{name:"boolean",required:!1}},{key:"onRun",value:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}},required:!1}}]}}]},description:"",defaultValue:{value:`({
  onChange,
  hasInputNode,
  loading,
  onRun,
  defaultRequest,
}) => {
  const [requestValue, setRequestValue] = useState(defaultRequest);
  const { stateStore, actions } = useDecisionGraphRaw();

  useEffect(() => {
    if (!isWasmAvailable()) {
      return;
    }

    const { decisionGraph } = stateStore.getState();
    const requestNode = decisionGraph.nodes.find((n) => n.type === 'inputNode');
    if (!requestNode) {
      return;
    }

    try {
      const value = requestValue ? json5.parse(requestValue) : 'Any';
      actions.setNodeType(requestNode.id, NodeTypeKind.InferredOutput, new VariableType(value));
    } catch {
      // Skip
    }
  }, [requestValue]);

  return (
    <>
      <div className={'grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request'}>
        <Tooltip title={requestTooltip}>
          <Typography.Text style={{ fontSize: 13, cursor: 'help' }}>
            Request
            <InfoCircleOutlined style={{ fontSize: 10, marginLeft: 4, opacity: 0.5, verticalAlign: 'text-top' }} />
          </Typography.Text>
        </Tooltip>
        <div className={'grl-dg__simulator__section__bar__actions'}>
          {onRun && (
            <Tooltip
              title={
                !hasInputNode
                  ? 'Request node is required to run the graph. Drag-and-drop it from the Components panel.'
                  : undefined
              }
            >
              <Button
                size={'small'}
                type={'primary'}
                loading={loading}
                icon={<PlayCircleOutlined />}
                disabled={!hasInputNode}
                onClick={() => {
                  try {
                    const parsed = (requestValue || '').trim().length === 0 ? null : json5.parse(requestValue || '');
                    onRun?.({ graph: stateStore.getState().decisionGraph, context: parsed });
                  } catch {
                    notification.error({
                      message: 'Invalid format',
                      description: 'Unable to format request, invalid JSON format',
                      placement: 'top',
                    });
                  }
                }}
              >
                Run
              </Button>
            </Tooltip>
          )}
        </div>
      </div>
      <div className={'grl-dg__simulator__section__content'}>
        <SimulatorEditor
          value={requestValue}
          onChange={(text) => {
            setRequestValue(text);
            onChange?.(text ?? '');
          }}
        />
      </div>
    </>
  );
}`,computed:!1}}}};export{B8 as D,Pi as G,lC as R,nn as _,pt as a,M8 as b,mC as c,Q0 as d,tm as e,rm as f,fC as g,um as i,Ii as l,lm as o,e8 as s,Zt as u};
