const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-D1Q-hL7q.js","./function-BQ2jz20p.js","./wrapNativeSuper-ezTqcbMv.js","./index-uubelm5h.js","./iframe-DlQUjxMR.js","./index.module-D1GEzps3.js","./wasm-B5vNX7mB.js","./index-BK_xiHMm.js","./button-bch9Skz5.js","./index-TW2i6qtr.js","./function-BxbUwNS5.css"])))=>i.map(i=>d[i]);
import{_ as mt,j as A}from"./wrapNativeSuper-ezTqcbMv.js";import{r as b,R as H,c as Ki,g as o2}from"./index-uubelm5h.js";import{j as s2,k as a2,l as u2,D as Zh,p as nt,b as Qt,g as ta,f as Kh,P as Jh,R as na,a as Uu,I as c2,e as ac,c as l2,H as d2}from"./diff-icon-CJ0elFz9.js";import{$ as ro,M as Qh,O as _i,P as f2,a0 as e0,a1 as h2,K as t0,Q as p2,C as Eo,u as ra,c as Fn,a2 as g2,a3 as m2,p as y2,a7 as v2,n as D2,W as x2,a6 as _2,ad as w2,r as C2,a as E2,az as b2,I as yt,z as Ie,T as ft,N as Ne,t as A2,i as co,V as Jt,ae as _r}from"./wasm-B5vNX7mB.js";import{b as S2,r as F2,c as N2,d as io,M as Pc,N as $e,D as T2,e as $c,F as Qn,f as uc,g as n0,R as B2,z as ie,a as I2,h as R2,i as M2}from"./dt-B5V_7_82.js";import{N as z2,a as jr,b as O2,c as P2,u as $2,d as k2,A as H2,D as ho,s as Ct,T as r0,S as L2,e as j2}from"./index.module-D1GEzps3.js";import{r as i0}from"./index-BK_xiHMm.js";import{E as V2}from"./expression-qV_Bwj9u.js";import{c as Pe}from"./ce-DccbC0v4.js";import{R as q2,r as G2,B as Je}from"./button-bch9Skz5.js";import{a as W2,S as kc,c as cc,P as U2,b as Yu,e as Pf,d as Y2,p as X2}from"./function-BQ2jz20p.js";import{_ as Z2}from"./iframe-DlQUjxMR.js";const K2=e=>{const{componentCls:n,notificationMarginEdge:r,animationMaxHeight:o}=e,s=`${n}-notice`,c=new ro("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),u=new ro("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),l=new ro("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),d=new ro("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[s]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:u}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:l}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:c}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:r,_skip_check_:!0},[s]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:d}}}}},J2=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Q2={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},e_=(e,n)=>{const{componentCls:r}=e;return{[`${r}-${n}`]:{[`&${r}-stack > ${r}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Q2[n]]:{value:0,_skip_check_:!0}}}}},t_=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},n_=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},r_=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},t_(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},n_(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},J2.map(r=>e_(e,r)).reduce((r,o)=>Object.assign(Object.assign({},r),o),{}))},o0=e=>{const{iconCls:n,componentCls:r,boxShadow:o,fontSizeLG:s,notificationMarginBottom:c,borderRadiusLG:u,colorSuccess:l,colorInfo:d,colorWarning:p,colorError:h,colorTextHeading:g,notificationBg:m,notificationPadding:x,notificationMarginEdge:C,notificationProgressBg:D,notificationProgressHeight:E,fontSize:y,lineHeight:S,width:T,notificationIconSize:F,colorText:R}=e,k=`${r}-notice`;return{position:"relative",marginBottom:c,marginInlineStart:"auto",background:m,borderRadius:u,boxShadow:o,[k]:{padding:x,width:T,maxWidth:`calc(100vw - ${_i(e.calc(C).mul(2).equal())})`,overflow:"hidden",lineHeight:S,wordWrap:"break-word"},[`${k}-message`]:{marginBottom:e.marginXS,color:g,fontSize:s,lineHeight:e.lineHeightLG},[`${k}-description`]:{fontSize:y,color:R},[`${k}-closable ${k}-message`]:{paddingInlineEnd:e.paddingLG},[`${k}-with-icon ${k}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:s},[`${k}-with-icon ${k}-description`]:{marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:y},[`${k}-icon`]:{position:"absolute",fontSize:F,lineHeight:1,[`&-success${n}`]:{color:l},[`&-info${n}`]:{color:d},[`&-warning${n}`]:{color:p},[`&-error${n}`]:{color:h}},[`${k}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},f2(e)),[`${k}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${_i(u)} * 2)`,left:{_skip_check_:!0,value:u},right:{_skip_check_:!0,value:u},bottom:0,blockSize:E,border:0,"&, &::-webkit-progress-bar":{borderRadius:u,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:D},"&::-webkit-progress-value":{borderRadius:u,background:D}},[`${k}-btn`]:{float:"right",marginTop:e.marginSM}}},i_=e=>{const{componentCls:n,notificationMarginBottom:r,notificationMarginEdge:o,motionDurationMid:s,motionEaseInOut:c}=e,u=`${n}-notice`,l=new ro("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:r},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},e0(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:c,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:c,animationFillMode:"both",animationDuration:s,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:l,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${u}-btn`]:{float:"left"}}})},{[n]:{[`${u}-wrapper`]:Object.assign({},o0(e))}}]},s0=e=>({zIndexPopup:e.zIndexPopupBase+h2+50,width:384}),a0=e=>{const n=e.paddingMD,r=e.paddingLG;return t0(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:r,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${_i(e.paddingMD)} ${_i(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},u0=Qh("Notification",e=>{const n=a0(e);return[i_(n),K2(n),r_(n)]},s0),o_=p2(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,r=a0(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},o0(r)),{width:r.width,maxWidth:`calc(100vw - ${_i(e.calc(r.notificationMarginEdge).mul(2).equal())})`,margin:0})}},s0);var s_=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};function Hc(e,n){return n===null||n===!1?null:n||b.createElement(jr,{className:`${e}-close-icon`})}const a_={success:O2,info:P2,error:g2,warning:q2},c0=e=>{const{prefixCls:n,icon:r,type:o,message:s,description:c,btn:u,role:l="alert"}=e;let d=null;return r?d=b.createElement("span",{className:`${n}-icon`},r):o&&(d=b.createElement(a_[o]||null,{className:Fn(`${n}-icon`,`${n}-icon-${o}`)})),b.createElement("div",{className:Fn({[`${n}-with-icon`]:d}),role:l},d,b.createElement("div",{className:`${n}-message`},s),b.createElement("div",{className:`${n}-description`},c),u&&b.createElement("div",{className:`${n}-btn`},u))},u_=e=>{const{prefixCls:n,className:r,icon:o,type:s,message:c,description:u,btn:l,closable:d=!0,closeIcon:p,className:h}=e,g=s_(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:m}=b.useContext(Eo),x=n||m("notification"),C=`${x}-notice`,D=ra(x),[E,y,S]=u0(x,D);return E(b.createElement("div",{className:Fn(`${C}-pure-panel`,y,r,S,D)},b.createElement(o_,{prefixCls:x}),b.createElement(z2,Object.assign({},g,{prefixCls:x,eventKey:"pure",duration:null,closable:d,className:Fn({notificationClassName:h}),closeIcon:Hc(x,p),content:b.createElement(c0,{prefixCls:C,icon:o,type:s,message:c,description:u,btn:l})}))))};function c_(e,n,r){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":o={left:0,top:n,bottom:"auto"};break;case"topRight":o={right:0,top:n,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":o={left:0,top:"auto",bottom:r};break;default:o={right:0,top:"auto",bottom:r};break}return o}function l_(e){return{motionName:`${e}-fade`}}var d_=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const $f=24,f_=4.5,h_="topRight",p_=e=>{let{children:n,prefixCls:r}=e;const o=ra(r),[s,c,u]=u0(r,o);return s(H.createElement(k2,{classNames:{list:Fn(c,u,o)}},n))},g_=(e,n)=>{let{prefixCls:r,key:o}=n;return H.createElement(p_,{prefixCls:r,key:o},e)},m_=H.forwardRef((e,n)=>{const{top:r,bottom:o,prefixCls:s,getContainer:c,maxCount:u,rtl:l,onAllRemoved:d,stack:p,duration:h,pauseOnHover:g=!0,showProgress:m}=e,{getPrefixCls:x,getPopupContainer:C,notification:D,direction:E}=b.useContext(Eo),[,y]=y2(),S=s||x("notification"),T=Y=>c_(Y,r??$f,o??$f),F=()=>Fn({[`${S}-rtl`]:l??E==="rtl"}),R=()=>l_(S),[k,j]=$2({prefixCls:S,style:T,className:F,motion:R,closable:!0,closeIcon:Hc(S),duration:h??f_,getContainer:()=>c?.()||C?.()||document.body,maxCount:u,pauseOnHover:g,showProgress:m,onAllRemoved:d,renderNotifications:g_,stack:p===!1?!1:{threshold:typeof p=="object"?p?.threshold:void 0,offset:8,gap:y.margin}});return H.useImperativeHandle(n,()=>Object.assign(Object.assign({},k),{prefixCls:S,notification:D})),j});function l0(e){const n=H.useRef(null);return m2(),[H.useMemo(()=>{const o=l=>{var d;if(!n.current)return;const{open:p,prefixCls:h,notification:g}=n.current,m=`${h}-notice`,{message:x,description:C,icon:D,type:E,btn:y,className:S,style:T,role:F="alert",closeIcon:R,closable:k}=l,j=d_(l,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),Y=Hc(m,typeof R<"u"?R:g?.closeIcon);return p(Object.assign(Object.assign({placement:(d=e?.placement)!==null&&d!==void 0?d:h_},j),{content:H.createElement(c0,{prefixCls:m,icon:D,type:E,message:x,description:C,btn:y,role:F}),className:Fn(E&&`${m}-${E}`,S,g?.className),style:Object.assign(Object.assign({},g?.style),T),closeIcon:Y,closable:k??!!Y}))},c={open:o,destroy:l=>{var d,p;l!==void 0?(d=n.current)===null||d===void 0||d.close(l):(p=n.current)===null||p===void 0||p.destroy()}};return["success","info","warning","error"].forEach(l=>{c[l]=d=>o(Object.assign(Object.assign({},d),{type:l}))}),c},[]),H.createElement(m_,Object.assign({key:"notification-holder"},e,{ref:n}))]}function y_(e){return l0(e)}function v_(){const[,e]=b.useReducer(n=>n+1,0);return e}function D_(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=b.useRef({}),r=v_(),o=S2();return v2(()=>{const s=o.subscribe(c=>{n.current=c,e&&r()});return()=>o.unsubscribe(s)},[]),n.current}const lc=b.createContext({}),x_=e=>{const{antCls:n,componentCls:r,iconCls:o,avatarBg:s,avatarColor:c,containerSize:u,containerSizeLG:l,containerSizeSM:d,textFontSize:p,textFontSizeLG:h,textFontSizeSM:g,borderRadius:m,borderRadiusLG:x,borderRadiusSM:C,lineWidth:D,lineType:E}=e,y=(S,T,F)=>({width:S,height:S,borderRadius:"50%",[`&${r}-square`]:{borderRadius:F},[`&${r}-icon`]:{fontSize:T,[`> ${o}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},e0(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:c,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${_i(D)} ${E} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),y(u,p,m)),{"&-lg":Object.assign({},y(l,h,x)),"&-sm":Object.assign({},y(d,g,C)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},__=e=>{const{componentCls:n,groupBorderColor:r,groupOverlapping:o,groupSpace:s}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:o}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:s}}}},w_=e=>{const{controlHeight:n,controlHeightLG:r,controlHeightSM:o,fontSize:s,fontSizeLG:c,fontSizeXL:u,fontSizeHeading3:l,marginXS:d,marginXXS:p,colorBorderBg:h}=e;return{containerSize:n,containerSizeLG:r,containerSizeSM:o,textFontSize:Math.round((c+u)/2),textFontSizeLG:l,textFontSizeSM:s,groupSpace:p,groupOverlapping:-d,groupBorderColor:h}},d0=Qh("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:r}=e,o=t0(e,{avatarBg:r,avatarColor:n});return[x_(o),__(o)]},w_);var C_=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const E_=(e,n)=>{const[r,o]=b.useState(1),[s,c]=b.useState(!1),[u,l]=b.useState(!0),d=b.useRef(null),p=b.useRef(null),h=D2(n,d),{getPrefixCls:g,avatar:m}=b.useContext(Eo),x=b.useContext(lc),C=()=>{if(!p.current||!d.current)return;const he=p.current.offsetWidth,ve=d.current.offsetWidth;if(he!==0&&ve!==0){const{gap:Te=4}=e;Te*2<ve&&o(ve-Te*2<he?(ve-Te*2)/he:1)}};b.useEffect(()=>{c(!0)},[]),b.useEffect(()=>{l(!0),o(1)},[e.src]),b.useEffect(C,[e.gap]);const D=()=>{const{onError:he}=e;he?.()!==!1&&l(!1)},{prefixCls:E,shape:y,size:S,src:T,srcSet:F,icon:R,className:k,rootClassName:j,alt:Y,draggable:z,children:G,crossOrigin:Q}=e,J=C_(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),W=x2(he=>{var ve,Te;return(Te=(ve=S??x?.size)!==null&&ve!==void 0?ve:he)!==null&&Te!==void 0?Te:"default"}),N=Object.keys(typeof W=="object"?W||{}:{}).some(he=>["xs","sm","md","lg","xl","xxl"].includes(he)),$=D_(N),P=b.useMemo(()=>{if(typeof W!="object")return{};const he=F2.find(Te=>$[Te]),ve=W[he];return ve?{width:ve,height:ve,fontSize:ve&&(R||G)?ve/2:18}:{}},[$,W]),q=g("avatar",E),ee=ra(q),[L,te,re]=d0(q,ee),oe=Fn({[`${q}-lg`]:W==="large",[`${q}-sm`]:W==="small"}),ce=b.isValidElement(T),ue=y||x?.shape||"circle",ge=Fn(q,oe,m?.className,`${q}-${ue}`,{[`${q}-image`]:ce||T&&u,[`${q}-icon`]:!!R},re,ee,k,j,te),Ae=typeof W=="number"?{width:W,height:W,fontSize:R?W/2:18}:{};let Se;if(typeof T=="string"&&u)Se=b.createElement("img",{src:T,draggable:z,srcSet:F,onError:D,alt:Y,crossOrigin:Q});else if(ce)Se=T;else if(R)Se=R;else if(s||r!==1){const he=`scale(${r})`,ve={msTransform:he,WebkitTransform:he,transform:he};Se=b.createElement(_2,{onResize:C},b.createElement("span",{className:`${q}-string`,ref:p,style:Object.assign({},ve)},G))}else Se=b.createElement("span",{className:`${q}-string`,style:{opacity:0},ref:p},G);return delete J.onError,delete J.gap,L(b.createElement("span",Object.assign({},J,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ae),P),m?.style),J.style),className:ge,ref:h}),Se))},f0=b.forwardRef(E_),kf=e=>{const{size:n,shape:r}=b.useContext(lc),o=b.useMemo(()=>({size:e.size||n,shape:e.shape||r}),[e.size,e.shape,n,r]);return b.createElement(lc.Provider,{value:o},e.children)},b_=e=>{var n,r,o;const{getPrefixCls:s,direction:c}=b.useContext(Eo),{prefixCls:u,className:l,rootClassName:d,style:p,maxCount:h,maxStyle:g,size:m,shape:x,maxPopoverPlacement:C,maxPopoverTrigger:D,children:E,max:y}=e,S=s("avatar",u),T=`${S}-group`,F=ra(S),[R,k,j]=d0(S,F),Y=Fn(T,{[`${T}-rtl`]:c==="rtl"},j,F,l,d,k),z=w2(E).map((J,W)=>C2(J,{key:`avatar-key-${W}`})),G=y?.count||h,Q=z.length;if(G&&G<Q){const J=z.slice(0,G),W=z.slice(G,Q),N=y?.style||g,$=((n=y?.popover)===null||n===void 0?void 0:n.trigger)||D||"hover",P=((r=y?.popover)===null||r===void 0?void 0:r.placement)||C||"top",q=Object.assign(Object.assign({content:W},y?.popover),{overlayClassName:Fn(`${T}-popover`,(o=y?.popover)===null||o===void 0?void 0:o.overlayClassName),placement:P,trigger:$});return J.push(b.createElement(s2,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},q),b.createElement(f0,{style:N},`+${Q-G}`))),R(b.createElement(kf,{shape:x,size:m},b.createElement("div",{className:Y,style:p},J)))}return R(b.createElement(kf,{shape:x,size:m},b.createElement("div",{className:Y,style:p},z)))},h0=f0;h0.Group=b_;let Cn=null,Ms=e=>e(),Ls=[],po={};function Hf(){const{getContainer:e,rtl:n,maxCount:r,top:o,bottom:s,showProgress:c,pauseOnHover:u}=po,l=e?.()||document.body;return{getContainer:()=>l,rtl:n,maxCount:r,top:o,bottom:s,showProgress:c,pauseOnHover:u}}const A_=H.forwardRef((e,n)=>{const{notificationConfig:r,sync:o}=e,{getPrefixCls:s}=b.useContext(Eo),c=po.prefixCls||s("notification"),u=b.useContext(H2),[l,d]=l0(Object.assign(Object.assign(Object.assign({},r),{prefixCls:c}),u.notification));return H.useEffect(o,[]),H.useImperativeHandle(n,()=>{const p=Object.assign({},l);return Object.keys(p).forEach(h=>{p[h]=function(){return o(),l[h].apply(l,arguments)}}),{instance:p,sync:o}}),d}),S_=H.forwardRef((e,n)=>{const[r,o]=H.useState(Hf),s=()=>{o(Hf)};H.useEffect(s,[]);const c=b2(),u=c.getRootPrefixCls(),l=c.getIconPrefixCls(),d=c.getTheme(),p=H.createElement(A_,{ref:n,sync:s,notificationConfig:r});return H.createElement(E2,{prefixCls:u,iconPrefixCls:l,theme:d},c.holderRender?c.holderRender(p):p)});function Lc(){if(!Cn){const e=document.createDocumentFragment(),n={fragment:e};Cn=n,Ms(()=>{G2(H.createElement(S_,{ref:r=>{const{instance:o,sync:s}=r||{};Promise.resolve().then(()=>{!n.instance&&o&&(n.instance=o,n.sync=s,Lc())})}}),e)});return}Cn.instance&&(Ls.forEach(e=>{switch(e.type){case"open":{Ms(()=>{Cn.instance.open(Object.assign(Object.assign({},po),e.config))});break}case"destroy":Ms(()=>{Cn?.instance.destroy(e.key)});break}}),Ls=[])}function F_(e){po=Object.assign(Object.assign({},po),e),Ms(()=>{var n;(n=Cn?.sync)===null||n===void 0||n.call(Cn)})}function p0(e){Ls.push({type:"open",config:e}),Lc()}const N_=e=>{Ls.push({type:"destroy",key:e}),Lc()},T_=["success","info","warning","error"],B_={open:p0,destroy:N_,config:F_,useNotification:y_,_InternalPanelDoNotUseOrYouWillBeFired:u_},g0=B_;T_.forEach(e=>{g0[e]=n=>p0(Object.assign(Object.assign({},n),{type:e}))});var I_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},R_=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:I_}))},m0=b.forwardRef(R_),M_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M740 161c-61.8 0-112 50.2-112 112 0 50.1 33.1 92.6 78.5 106.9v95.9L320 602.4V318.1c44.2-15 76-56.9 76-106.1 0-61.8-50.2-112-112-112s-112 50.2-112 112c0 49.2 31.8 91 76 106.1V706c-44.2 15-76 56.9-76 106.1 0 61.8 50.2 112 112 112s112-50.2 112-112c0-49.2-31.8-91-76-106.1v-27.8l423.5-138.7a50.52 50.52 0 0034.9-48.2V378.2c42.9-15.8 73.6-57 73.6-105.2 0-61.8-50.2-112-112-112zm-504 51a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm96 600a48.01 48.01 0 01-96 0 48.01 48.01 0 0196 0zm408-491a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"branches",theme:"outlined"},z_=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:M_}))},O_=b.forwardRef(z_),P_={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:r}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:n}}]}},name:"check-circle",theme:"twotone"},$_=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:P_}))},k_=b.forwardRef($_),H_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},L_=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:H_}))},j_=b.forwardRef(L_),V_={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:r}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:n}}]}},name:"close-circle",theme:"twotone"},q_=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:V_}))},G_=b.forwardRef(q_),W_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},U_=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:W_}))},Y_=b.forwardRef(U_),X_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},Z_=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:X_}))},K_=b.forwardRef(Z_),J_={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},Q_=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:J_}))},ew=b.forwardRef(Q_),tw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},nw=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:tw}))},rw=b.forwardRef(nw),iw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},ow=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:iw}))},sw=b.forwardRef(ow),aw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"},uw=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:aw}))},cw=b.forwardRef(uw),lw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},dw=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:lw}))},fw=b.forwardRef(dw),hw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 394c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H400V152c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v166H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v236H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h168v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h228v166c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V706h164c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8H708V394h164zM628 630H400V394h228v236z"}}]},name:"number",theme:"outlined"},pw=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:hw}))},gw=b.forwardRef(pw),mw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},yw=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:mw}))},vw=b.forwardRef(yw),Dw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},xw=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:Dw}))},y0=b.forwardRef(xw),_w={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 208H676V232h212v136zm0 224H676V432h212v160zM412 432h200v160H412V432zm200-64H412V232h200v136zm-476 64h212v160H136V432zm0-200h212v136H136V232zm0 424h212v136H136V656zm276 0h200v136H412V656zm476 136H676V656h212v136z"}}]},name:"table",theme:"outlined"},ww=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:_w}))},Cw=b.forwardRef(ww),Ew={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},bw=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:Ew}))},Aw=b.forwardRef(bw),Sw={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},Fw=function(n,r){return b.createElement(yt,mt({},n,{ref:r,icon:Sw}))},Nw=b.forwardRef(Fw),Tw=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Bw=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Iw=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Xu={Space_Separator:Tw,ID_Start:Bw,ID_Continue:Iw},st={isSpaceSeparator(e){return typeof e=="string"&&Xu.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||Xu.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e===""||e===""||Xu.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let dc,It,er,js,wr,An,pt,jc,lo;var Rw=function(n,r){dc=String(n),It="start",er=[],js=0,wr=1,An=0,pt=void 0,jc=void 0,lo=void 0;do pt=Mw(),Pw[It]();while(pt.type!=="eof");return typeof r=="function"?fc({"":lo},"",r):lo};function fc(e,n,r){const o=e[n];if(o!=null&&typeof o=="object")if(Array.isArray(o))for(let s=0;s<o.length;s++){const c=String(s),u=fc(o,c,r);u===void 0?delete o[c]:Object.defineProperty(o,c,{value:u,writable:!0,enumerable:!0,configurable:!0})}else for(const s in o){const c=fc(o,s,r);c===void 0?delete o[s]:Object.defineProperty(o,s,{value:c,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,n,o)}let Ee,_e,oo,Jn,Me;function Mw(){for(Ee="default",_e="",oo=!1,Jn=1;;){Me=nr();const e=v0[Ee]();if(e)return e}}function nr(){if(dc[js])return String.fromCodePoint(dc.codePointAt(js))}function K(){const e=nr();return e===`
`?(wr++,An=0):e?An+=e.length:An++,e&&(js+=e.length),e}const v0={default(){switch(Me){case"	":case"\v":case"\f":case" ":case"":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":K();return;case"/":K(),Ee="comment";return;case void 0:return K(),Ue("eof")}if(st.isSpaceSeparator(Me)){K();return}return v0[It]()},comment(){switch(Me){case"*":K(),Ee="multiLineComment";return;case"/":K(),Ee="singleLineComment";return}throw Ye(K())},multiLineComment(){switch(Me){case"*":K(),Ee="multiLineCommentAsterisk";return;case void 0:throw Ye(K())}K()},multiLineCommentAsterisk(){switch(Me){case"*":K();return;case"/":K(),Ee="default";return;case void 0:throw Ye(K())}K(),Ee="multiLineComment"},singleLineComment(){switch(Me){case`
`:case"\r":case"\u2028":case"\u2029":K(),Ee="default";return;case void 0:return K(),Ue("eof")}K()},value(){switch(Me){case"{":case"[":return Ue("punctuator",K());case"n":return K(),Or("ull"),Ue("null",null);case"t":return K(),Or("rue"),Ue("boolean",!0);case"f":return K(),Or("alse"),Ue("boolean",!1);case"-":case"+":K()==="-"&&(Jn=-1),Ee="sign";return;case".":_e=K(),Ee="decimalPointLeading";return;case"0":_e=K(),Ee="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":_e=K(),Ee="decimalInteger";return;case"I":return K(),Or("nfinity"),Ue("numeric",1/0);case"N":return K(),Or("aN"),Ue("numeric",NaN);case'"':case"'":oo=K()==='"',_e="",Ee="string";return}throw Ye(K())},identifierNameStartEscape(){if(Me!=="u")throw Ye(K());K();const e=hc();switch(e){case"$":case"_":break;default:if(!st.isIdStartChar(e))throw Lf();break}_e+=e,Ee="identifierName"},identifierName(){switch(Me){case"$":case"_":case"":case"":_e+=K();return;case"\\":K(),Ee="identifierNameEscape";return}if(st.isIdContinueChar(Me)){_e+=K();return}return Ue("identifier",_e)},identifierNameEscape(){if(Me!=="u")throw Ye(K());K();const e=hc();switch(e){case"$":case"_":case"":case"":break;default:if(!st.isIdContinueChar(e))throw Lf();break}_e+=e,Ee="identifierName"},sign(){switch(Me){case".":_e=K(),Ee="decimalPointLeading";return;case"0":_e=K(),Ee="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":_e=K(),Ee="decimalInteger";return;case"I":return K(),Or("nfinity"),Ue("numeric",Jn*(1/0));case"N":return K(),Or("aN"),Ue("numeric",NaN)}throw Ye(K())},zero(){switch(Me){case".":_e+=K(),Ee="decimalPoint";return;case"e":case"E":_e+=K(),Ee="decimalExponent";return;case"x":case"X":_e+=K(),Ee="hexadecimal";return}return Ue("numeric",Jn*0)},decimalInteger(){switch(Me){case".":_e+=K(),Ee="decimalPoint";return;case"e":case"E":_e+=K(),Ee="decimalExponent";return}if(st.isDigit(Me)){_e+=K();return}return Ue("numeric",Jn*Number(_e))},decimalPointLeading(){if(st.isDigit(Me)){_e+=K(),Ee="decimalFraction";return}throw Ye(K())},decimalPoint(){switch(Me){case"e":case"E":_e+=K(),Ee="decimalExponent";return}if(st.isDigit(Me)){_e+=K(),Ee="decimalFraction";return}return Ue("numeric",Jn*Number(_e))},decimalFraction(){switch(Me){case"e":case"E":_e+=K(),Ee="decimalExponent";return}if(st.isDigit(Me)){_e+=K();return}return Ue("numeric",Jn*Number(_e))},decimalExponent(){switch(Me){case"+":case"-":_e+=K(),Ee="decimalExponentSign";return}if(st.isDigit(Me)){_e+=K(),Ee="decimalExponentInteger";return}throw Ye(K())},decimalExponentSign(){if(st.isDigit(Me)){_e+=K(),Ee="decimalExponentInteger";return}throw Ye(K())},decimalExponentInteger(){if(st.isDigit(Me)){_e+=K();return}return Ue("numeric",Jn*Number(_e))},hexadecimal(){if(st.isHexDigit(Me)){_e+=K(),Ee="hexadecimalInteger";return}throw Ye(K())},hexadecimalInteger(){if(st.isHexDigit(Me)){_e+=K();return}return Ue("numeric",Jn*Number(_e))},string(){switch(Me){case"\\":K(),_e+=zw();return;case'"':if(oo)return K(),Ue("string",_e);_e+=K();return;case"'":if(!oo)return K(),Ue("string",_e);_e+=K();return;case`
`:case"\r":throw Ye(K());case"\u2028":case"\u2029":$w(Me);break;case void 0:throw Ye(K())}_e+=K()},start(){switch(Me){case"{":case"[":return Ue("punctuator",K())}Ee="value"},beforePropertyName(){switch(Me){case"$":case"_":_e=K(),Ee="identifierName";return;case"\\":K(),Ee="identifierNameStartEscape";return;case"}":return Ue("punctuator",K());case'"':case"'":oo=K()==='"',Ee="string";return}if(st.isIdStartChar(Me)){_e+=K(),Ee="identifierName";return}throw Ye(K())},afterPropertyName(){if(Me===":")return Ue("punctuator",K());throw Ye(K())},beforePropertyValue(){Ee="value"},afterPropertyValue(){switch(Me){case",":case"}":return Ue("punctuator",K())}throw Ye(K())},beforeArrayValue(){if(Me==="]")return Ue("punctuator",K());Ee="value"},afterArrayValue(){switch(Me){case",":case"]":return Ue("punctuator",K())}throw Ye(K())},end(){throw Ye(K())}};function Ue(e,n){return{type:e,value:n,line:wr,column:An}}function Or(e){for(const n of e){if(nr()!==n)throw Ye(K());K()}}function zw(){switch(nr()){case"b":return K(),"\b";case"f":return K(),"\f";case"n":return K(),`
`;case"r":return K(),"\r";case"t":return K(),"	";case"v":return K(),"\v";case"0":if(K(),st.isDigit(nr()))throw Ye(K());return"\0";case"x":return K(),Ow();case"u":return K(),hc();case`
`:case"\u2028":case"\u2029":return K(),"";case"\r":return K(),nr()===`
`&&K(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Ye(K());case void 0:throw Ye(K())}return K()}function Ow(){let e="",n=nr();if(!st.isHexDigit(n)||(e+=K(),n=nr(),!st.isHexDigit(n)))throw Ye(K());return e+=K(),String.fromCodePoint(parseInt(e,16))}function hc(){let e="",n=4;for(;n-- >0;){const r=nr();if(!st.isHexDigit(r))throw Ye(K());e+=K()}return String.fromCodePoint(parseInt(e,16))}const Pw={start(){if(pt.type==="eof")throw Pr();Zu()},beforePropertyName(){switch(pt.type){case"identifier":case"string":jc=pt.value,It="afterPropertyName";return;case"punctuator":vs();return;case"eof":throw Pr()}},afterPropertyName(){if(pt.type==="eof")throw Pr();It="beforePropertyValue"},beforePropertyValue(){if(pt.type==="eof")throw Pr();Zu()},beforeArrayValue(){if(pt.type==="eof")throw Pr();if(pt.type==="punctuator"&&pt.value==="]"){vs();return}Zu()},afterPropertyValue(){if(pt.type==="eof")throw Pr();switch(pt.value){case",":It="beforePropertyName";return;case"}":vs()}},afterArrayValue(){if(pt.type==="eof")throw Pr();switch(pt.value){case",":It="beforeArrayValue";return;case"]":vs()}},end(){}};function Zu(){let e;switch(pt.type){case"punctuator":switch(pt.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=pt.value;break}if(lo===void 0)lo=e;else{const n=er[er.length-1];Array.isArray(n)?n.push(e):Object.defineProperty(n,jc,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")er.push(e),Array.isArray(e)?It="beforeArrayValue":It="beforePropertyName";else{const n=er[er.length-1];n==null?It="end":Array.isArray(n)?It="afterArrayValue":It="afterPropertyValue"}}function vs(){er.pop();const e=er[er.length-1];e==null?It="end":Array.isArray(e)?It="afterArrayValue":It="afterPropertyValue"}function Ye(e){return Vs(e===void 0?`JSON5: invalid end of input at ${wr}:${An}`:`JSON5: invalid character '${D0(e)}' at ${wr}:${An}`)}function Pr(){return Vs(`JSON5: invalid end of input at ${wr}:${An}`)}function Lf(){return An-=5,Vs(`JSON5: invalid identifier character at ${wr}:${An}`)}function $w(e){console.warn(`JSON5: '${D0(e)}' in strings is not valid ECMAScript; consider escaping`)}function D0(e){const n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(n[e])return n[e];if(e<" "){const r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function Vs(e){const n=new SyntaxError(e);return n.lineNumber=wr,n.columnNumber=An,n}var kw=function(n,r,o){const s=[];let c="",u,l,d="",p;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(o=r.space,p=r.quote,r=r.replacer),typeof r=="function")l=r;else if(Array.isArray(r)){u=[];for(const D of r){let E;typeof D=="string"?E=D:(typeof D=="number"||D instanceof String||D instanceof Number)&&(E=String(D)),E!==void 0&&u.indexOf(E)<0&&u.push(E)}}return o instanceof Number?o=Number(o):o instanceof String&&(o=String(o)),typeof o=="number"?o>0&&(o=Math.min(10,Math.floor(o)),d="          ".substr(0,o)):typeof o=="string"&&(d=o.substr(0,10)),h("",{"":n});function h(D,E){let y=E[D];switch(y!=null&&(typeof y.toJSON5=="function"?y=y.toJSON5(D):typeof y.toJSON=="function"&&(y=y.toJSON(D))),l&&(y=l.call(E,D,y)),y instanceof Number?y=Number(y):y instanceof String?y=String(y):y instanceof Boolean&&(y=y.valueOf()),y){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof y=="string")return g(y);if(typeof y=="number")return String(y);if(typeof y=="object")return Array.isArray(y)?C(y):m(y)}function g(D){const E={"'":.1,'"':.2},y={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let S="";for(let F=0;F<D.length;F++){const R=D[F];switch(R){case"'":case'"':E[R]++,S+=R;continue;case"\0":if(st.isDigit(D[F+1])){S+="\\x00";continue}}if(y[R]){S+=y[R];continue}if(R<" "){let k=R.charCodeAt(0).toString(16);S+="\\x"+("00"+k).substring(k.length);continue}S+=R}const T=p||Object.keys(E).reduce((F,R)=>E[F]<E[R]?F:R);return S=S.replace(new RegExp(T,"g"),y[T]),T+S+T}function m(D){if(s.indexOf(D)>=0)throw TypeError("Converting circular structure to JSON5");s.push(D);let E=c;c=c+d;let y=u||Object.keys(D),S=[];for(const F of y){const R=h(F,D);if(R!==void 0){let k=x(F)+":";d!==""&&(k+=" "),k+=R,S.push(k)}}let T;if(S.length===0)T="{}";else{let F;if(d==="")F=S.join(","),T="{"+F+"}";else{let R=`,
`+c;F=S.join(R),T=`{
`+c+F+`,
`+E+"}"}}return s.pop(),c=E,T}function x(D){if(D.length===0)return g(D);const E=String.fromCodePoint(D.codePointAt(0));if(!st.isIdStartChar(E))return g(D);for(let y=E.length;y<D.length;y++)if(!st.isIdContinueChar(String.fromCodePoint(D.codePointAt(y))))return g(D);return D}function C(D){if(s.indexOf(D)>=0)throw TypeError("Converting circular structure to JSON5");s.push(D);let E=c;c=c+d;let y=[];for(let T=0;T<D.length;T++){const F=h(String(T),D);y.push(F!==void 0?F:"null")}let S;if(y.length===0)S="[]";else if(d==="")S="["+y.join(",")+"]";else{let T=`,
`+c,F=y.join(T);S=`[
`+c+F+`,
`+E+"]"}return s.pop(),c=E,S}};const Hw={parse:Rw,stringify:kw};var go=Hw;function Rt(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=Rt(e[r]))!==""&&(n+=(n&&" ")+o);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}const{useDebugValue:Lw}=H,{useSyncExternalStoreWithSelector:jw}=a2,Vw=e=>e;function x0(e,n=Vw,r){const o=jw(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return Lw(o),o}const jf=(e,n)=>{const r=u2(e),o=(s,c=n)=>x0(r,s,c);return Object.assign(o,r),o},qw=(e,n)=>e?jf(e,n):jf;function St(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[o,s]of e)if(!Object.is(s,n.get(o)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const o of e)if(!n.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(n,o)||!Object.is(e[o],n[o]))return!1;return!0}var Gw={value:()=>{}};function ia(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new zs(r)}function zs(e){this._=e}function Ww(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}zs.prototype=ia.prototype={constructor:zs,on:function(e,n){var r=this._,o=Ww(e+"",r),s,c=-1,u=o.length;if(arguments.length<2){for(;++c<u;)if((s=(e=o[c]).type)&&(s=Uw(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<u;)if(s=(e=o[c]).type)r[s]=Vf(r[s],e.name,n);else if(n==null)for(s in r)r[s]=Vf(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new zs(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,c;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],o=0,s=c.length;o<s;++o)c[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,c=o.length;s<c;++s)o[s].value.apply(n,r)}};function Uw(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function Vf(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=Gw,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var pc="http://www.w3.org/1999/xhtml";const qf={svg:"http://www.w3.org/2000/svg",xhtml:pc,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oa(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),qf.hasOwnProperty(n)?{space:qf[n],local:e}:e}function Yw(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===pc&&n.documentElement.namespaceURI===pc?n.createElement(e):n.createElementNS(r,e)}}function Xw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function _0(e){var n=oa(e);return(n.local?Xw:Yw)(n)}function Zw(){}function Vc(e){return e==null?Zw:function(){return this.querySelector(e)}}function Kw(e){typeof e!="function"&&(e=Vc(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],u=c.length,l=o[s]=new Array(u),d,p,h=0;h<u;++h)(d=c[h])&&(p=e.call(d,d.__data__,h,c))&&("__data__"in d&&(p.__data__=d.__data__),l[h]=p);return new en(o,this._parents)}function Jw(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Qw(){return[]}function w0(e){return e==null?Qw:function(){return this.querySelectorAll(e)}}function eC(e){return function(){return Jw(e.apply(this,arguments))}}function tC(e){typeof e=="function"?e=eC(e):e=w0(e);for(var n=this._groups,r=n.length,o=[],s=[],c=0;c<r;++c)for(var u=n[c],l=u.length,d,p=0;p<l;++p)(d=u[p])&&(o.push(e.call(d,d.__data__,p,u)),s.push(d));return new en(o,s)}function C0(e){return function(){return this.matches(e)}}function E0(e){return function(n){return n.matches(e)}}var nC=Array.prototype.find;function rC(e){return function(){return nC.call(this.children,e)}}function iC(){return this.firstElementChild}function oC(e){return this.select(e==null?iC:rC(typeof e=="function"?e:E0(e)))}var sC=Array.prototype.filter;function aC(){return Array.from(this.children)}function uC(e){return function(){return sC.call(this.children,e)}}function cC(e){return this.selectAll(e==null?aC:uC(typeof e=="function"?e:E0(e)))}function lC(e){typeof e!="function"&&(e=C0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],u=c.length,l=o[s]=[],d,p=0;p<u;++p)(d=c[p])&&e.call(d,d.__data__,p,c)&&l.push(d);return new en(o,this._parents)}function b0(e){return new Array(e.length)}function dC(){return new en(this._enter||this._groups.map(b0),this._parents)}function qs(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}qs.prototype={constructor:qs,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function fC(e){return function(){return e}}function hC(e,n,r,o,s,c){for(var u=0,l,d=n.length,p=c.length;u<p;++u)(l=n[u])?(l.__data__=c[u],o[u]=l):r[u]=new qs(e,c[u]);for(;u<d;++u)(l=n[u])&&(s[u]=l)}function pC(e,n,r,o,s,c,u){var l,d,p=new Map,h=n.length,g=c.length,m=new Array(h),x;for(l=0;l<h;++l)(d=n[l])&&(m[l]=x=u.call(d,d.__data__,l,n)+"",p.has(x)?s[l]=d:p.set(x,d));for(l=0;l<g;++l)x=u.call(e,c[l],l,c)+"",(d=p.get(x))?(o[l]=d,d.__data__=c[l],p.delete(x)):r[l]=new qs(e,c[l]);for(l=0;l<h;++l)(d=n[l])&&p.get(m[l])===d&&(s[l]=d)}function gC(e){return e.__data__}function mC(e,n){if(!arguments.length)return Array.from(this,gC);var r=n?pC:hC,o=this._parents,s=this._groups;typeof e!="function"&&(e=fC(e));for(var c=s.length,u=new Array(c),l=new Array(c),d=new Array(c),p=0;p<c;++p){var h=o[p],g=s[p],m=g.length,x=yC(e.call(h,h&&h.__data__,p,o)),C=x.length,D=l[p]=new Array(C),E=u[p]=new Array(C),y=d[p]=new Array(m);r(h,g,D,E,y,x,n);for(var S=0,T=0,F,R;S<C;++S)if(F=D[S]){for(S>=T&&(T=S+1);!(R=E[T])&&++T<C;);F._next=R||null}}return u=new en(u,o),u._enter=l,u._exit=d,u}function yC(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function vC(){return new en(this._exit||this._groups.map(b0),this._parents)}function DC(e,n,r){var o=this.enter(),s=this,c=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?c.remove():r(c),o&&s?o.merge(s).order():s}function xC(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,c=o.length,u=Math.min(s,c),l=new Array(s),d=0;d<u;++d)for(var p=r[d],h=o[d],g=p.length,m=l[d]=new Array(g),x,C=0;C<g;++C)(x=p[C]||h[C])&&(m[C]=x);for(;d<s;++d)l[d]=r[d];return new en(l,this._parents)}function _C(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,c=o[s],u;--s>=0;)(u=o[s])&&(c&&u.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(u,c),c=u);return this}function wC(e){e||(e=CC);function n(g,m){return g&&m?e(g.__data__,m.__data__):!g-!m}for(var r=this._groups,o=r.length,s=new Array(o),c=0;c<o;++c){for(var u=r[c],l=u.length,d=s[c]=new Array(l),p,h=0;h<l;++h)(p=u[h])&&(d[h]=p);d.sort(n)}return new en(s,this._parents).order()}function CC(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function EC(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function bC(){return Array.from(this)}function AC(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,c=o.length;s<c;++s){var u=o[s];if(u)return u}return null}function SC(){let e=0;for(const n of this)++e;return e}function FC(){return!this.node()}function NC(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],c=0,u=s.length,l;c<u;++c)(l=s[c])&&e.call(l,l.__data__,c,s);return this}function TC(e){return function(){this.removeAttribute(e)}}function BC(e){return function(){this.removeAttributeNS(e.space,e.local)}}function IC(e,n){return function(){this.setAttribute(e,n)}}function RC(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function MC(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function zC(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function OC(e,n){var r=oa(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?BC:TC:typeof n=="function"?r.local?zC:MC:r.local?RC:IC)(r,n))}function A0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function PC(e){return function(){this.style.removeProperty(e)}}function $C(e,n,r){return function(){this.style.setProperty(e,n,r)}}function kC(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function HC(e,n,r){return arguments.length>1?this.each((n==null?PC:typeof n=="function"?kC:$C)(e,n,r??"")):wi(this.node(),e)}function wi(e,n){return e.style.getPropertyValue(n)||A0(e).getComputedStyle(e,null).getPropertyValue(n)}function LC(e){return function(){delete this[e]}}function jC(e,n){return function(){this[e]=n}}function VC(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function qC(e,n){return arguments.length>1?this.each((n==null?LC:typeof n=="function"?VC:jC)(e,n)):this.node()[e]}function S0(e){return e.trim().split(/^|\s+/)}function qc(e){return e.classList||new F0(e)}function F0(e){this._node=e,this._names=S0(e.getAttribute("class")||"")}F0.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function N0(e,n){for(var r=qc(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function T0(e,n){for(var r=qc(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function GC(e){return function(){N0(this,e)}}function WC(e){return function(){T0(this,e)}}function UC(e,n){return function(){(n.apply(this,arguments)?N0:T0)(this,e)}}function YC(e,n){var r=S0(e+"");if(arguments.length<2){for(var o=qc(this.node()),s=-1,c=r.length;++s<c;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?UC:n?GC:WC)(r,n))}function XC(){this.textContent=""}function ZC(e){return function(){this.textContent=e}}function KC(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function JC(e){return arguments.length?this.each(e==null?XC:(typeof e=="function"?KC:ZC)(e)):this.node().textContent}function QC(){this.innerHTML=""}function eE(e){return function(){this.innerHTML=e}}function tE(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function nE(e){return arguments.length?this.each(e==null?QC:(typeof e=="function"?tE:eE)(e)):this.node().innerHTML}function rE(){this.nextSibling&&this.parentNode.appendChild(this)}function iE(){return this.each(rE)}function oE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sE(){return this.each(oE)}function aE(e){var n=typeof e=="function"?e:_0(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function uE(){return null}function cE(e,n){var r=typeof e=="function"?e:_0(e),o=n==null?uE:typeof n=="function"?n:Vc(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function lE(){var e=this.parentNode;e&&e.removeChild(this)}function dE(){return this.each(lE)}function fE(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function hE(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function pE(e){return this.select(e?hE:fE)}function gE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function mE(e){return function(n){e.call(this,n,this.__data__)}}function yE(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function vE(e){return function(){var n=this.__on;if(n){for(var r=0,o=-1,s=n.length,c;r<s;++r)c=n[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):n[++o]=c;++o?n.length=o:delete this.__on}}}function DE(e,n,r){return function(){var o=this.__on,s,c=mE(n);if(o){for(var u=0,l=o.length;u<l;++u)if((s=o[u]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=c,s.options=r),s.value=n;return}}this.addEventListener(e.type,c,r),s={type:e.type,name:e.name,value:n,listener:c,options:r},o?o.push(s):this.__on=[s]}}function xE(e,n,r){var o=yE(e+""),s,c=o.length,u;if(arguments.length<2){var l=this.node().__on;if(l){for(var d=0,p=l.length,h;d<p;++d)for(s=0,h=l[d];s<c;++s)if((u=o[s]).type===h.type&&u.name===h.name)return h.value}return}for(l=n?DE:vE,s=0;s<c;++s)this.each(l(o[s],n,r));return this}function B0(e,n,r){var o=A0(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function _E(e,n){return function(){return B0(this,e,n)}}function wE(e,n){return function(){return B0(this,e,n.apply(this,arguments))}}function CE(e,n){return this.each((typeof n=="function"?wE:_E)(e,n))}function*EE(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,c=o.length,u;s<c;++s)(u=o[s])&&(yield u)}var I0=[null];function en(e,n){this._groups=e,this._parents=n}function bo(){return new en([[document.documentElement]],I0)}function bE(){return this}en.prototype=bo.prototype={constructor:en,select:Kw,selectAll:tC,selectChild:oC,selectChildren:cC,filter:lC,data:mC,enter:dC,exit:vC,join:DC,merge:xC,selection:bE,order:_C,sort:wC,call:EC,nodes:bC,node:AC,size:SC,empty:FC,each:NC,attr:OC,style:HC,property:qC,classed:YC,text:JC,html:nE,raise:iE,lower:sE,append:aE,insert:cE,remove:dE,clone:pE,datum:gE,on:xE,dispatch:CE,[Symbol.iterator]:EE};function En(e){return typeof e=="string"?new en([[document.querySelector(e)]],[document.documentElement]):new en([[e]],I0)}function AE(e){let n;for(;n=e.sourceEvent;)e=n;return e}function On(e,n){if(e=AE(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const SE={passive:!1},mo={capture:!0,passive:!1};function Ku(e){e.stopImmediatePropagation()}function yi(e){e.preventDefault(),e.stopImmediatePropagation()}function R0(e){var n=e.document.documentElement,r=En(e).on("dragstart.drag",yi,mo);"onselectstart"in n?r.on("selectstart.drag",yi,mo):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function M0(e,n){var r=e.document.documentElement,o=En(e).on("dragstart.drag",null);n&&(o.on("click.drag",yi,mo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Ds=e=>()=>e;function gc(e,{sourceEvent:n,subject:r,target:o,identifier:s,active:c,x:u,y:l,dx:d,dy:p,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:c,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:h}})}gc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function FE(e){return!e.ctrlKey&&!e.button}function NE(){return this.parentNode}function TE(e,n){return n??{x:e.x,y:e.y}}function BE(){return navigator.maxTouchPoints||"ontouchstart"in this}function IE(){var e=FE,n=NE,r=TE,o=BE,s={},c=ia("start","drag","end"),u=0,l,d,p,h,g=0;function m(F){F.on("mousedown.drag",x).filter(o).on("touchstart.drag",E).on("touchmove.drag",y,SE).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(F,R){if(!(h||!e.call(this,F,R))){var k=T(this,n.call(this,F,R),F,R,"mouse");k&&(En(F.view).on("mousemove.drag",C,mo).on("mouseup.drag",D,mo),R0(F.view),Ku(F),p=!1,l=F.clientX,d=F.clientY,k("start",F))}}function C(F){if(yi(F),!p){var R=F.clientX-l,k=F.clientY-d;p=R*R+k*k>g}s.mouse("drag",F)}function D(F){En(F.view).on("mousemove.drag mouseup.drag",null),M0(F.view,p),yi(F),s.mouse("end",F)}function E(F,R){if(e.call(this,F,R)){var k=F.changedTouches,j=n.call(this,F,R),Y=k.length,z,G;for(z=0;z<Y;++z)(G=T(this,j,F,R,k[z].identifier,k[z]))&&(Ku(F),G("start",F,k[z]))}}function y(F){var R=F.changedTouches,k=R.length,j,Y;for(j=0;j<k;++j)(Y=s[R[j].identifier])&&(yi(F),Y("drag",F,R[j]))}function S(F){var R=F.changedTouches,k=R.length,j,Y;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),j=0;j<k;++j)(Y=s[R[j].identifier])&&(Ku(F),Y("end",F,R[j]))}function T(F,R,k,j,Y,z){var G=c.copy(),Q=On(z||k,R),J,W,N;if((N=r.call(F,new gc("beforestart",{sourceEvent:k,target:m,identifier:Y,active:u,x:Q[0],y:Q[1],dx:0,dy:0,dispatch:G}),j))!=null)return J=N.x-Q[0]||0,W=N.y-Q[1]||0,function $(P,q,ee){var L=Q,te;switch(P){case"start":s[Y]=$,te=u++;break;case"end":delete s[Y],--u;case"drag":Q=On(ee||q,R),te=u;break}G.call(P,F,new gc(P,{sourceEvent:q,subject:N,target:m,identifier:Y,active:te,x:Q[0]+J,y:Q[1]+W,dx:Q[0]-L[0],dy:Q[1]-L[1],dispatch:G}),j)}}return m.filter=function(F){return arguments.length?(e=typeof F=="function"?F:Ds(!!F),m):e},m.container=function(F){return arguments.length?(n=typeof F=="function"?F:Ds(F),m):n},m.subject=function(F){return arguments.length?(r=typeof F=="function"?F:Ds(F),m):r},m.touchable=function(F){return arguments.length?(o=typeof F=="function"?F:Ds(!!F),m):o},m.on=function(){var F=c.on.apply(c,arguments);return F===c?m:F},m.clickDistance=function(F){return arguments.length?(g=(F=+F)*F,m):Math.sqrt(g)},m}function Gc(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function z0(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function Ao(){}var yo=.7,Gs=1/yo,vi="\\s*([+-]?\\d+)\\s*",vo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",RE=/^#([0-9a-f]{3,8})$/,ME=new RegExp(`^rgb\\(${vi},${vi},${vi}\\)$`),zE=new RegExp(`^rgb\\(${Pn},${Pn},${Pn}\\)$`),OE=new RegExp(`^rgba\\(${vi},${vi},${vi},${vo}\\)$`),PE=new RegExp(`^rgba\\(${Pn},${Pn},${Pn},${vo}\\)$`),$E=new RegExp(`^hsl\\(${vo},${Pn},${Pn}\\)$`),kE=new RegExp(`^hsla\\(${vo},${Pn},${Pn},${vo}\\)$`),Gf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gc(Ao,Do,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Wf,formatHex:Wf,formatHex8:HE,formatHsl:LE,formatRgb:Uf,toString:Uf});function Wf(){return this.rgb().formatHex()}function HE(){return this.rgb().formatHex8()}function LE(){return O0(this).formatHsl()}function Uf(){return this.rgb().formatRgb()}function Do(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=RE.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Yf(n):r===3?new jt(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?xs(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?xs(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=ME.exec(e))?new jt(n[1],n[2],n[3],1):(n=zE.exec(e))?new jt(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=OE.exec(e))?xs(n[1],n[2],n[3],n[4]):(n=PE.exec(e))?xs(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=$E.exec(e))?Kf(n[1],n[2]/100,n[3]/100,1):(n=kE.exec(e))?Kf(n[1],n[2]/100,n[3]/100,n[4]):Gf.hasOwnProperty(e)?Yf(Gf[e]):e==="transparent"?new jt(NaN,NaN,NaN,0):null}function Yf(e){return new jt(e>>16&255,e>>8&255,e&255,1)}function xs(e,n,r,o){return o<=0&&(e=n=r=NaN),new jt(e,n,r,o)}function jE(e){return e instanceof Ao||(e=Do(e)),e?(e=e.rgb(),new jt(e.r,e.g,e.b,e.opacity)):new jt}function mc(e,n,r,o){return arguments.length===1?jE(e):new jt(e,n,r,o??1)}function jt(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}Gc(jt,mc,z0(Ao,{brighter(e){return e=e==null?Gs:Math.pow(Gs,e),new jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?yo:Math.pow(yo,e),new jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jt(Lr(this.r),Lr(this.g),Lr(this.b),Ws(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xf,formatHex:Xf,formatHex8:VE,formatRgb:Zf,toString:Zf}));function Xf(){return`#${kr(this.r)}${kr(this.g)}${kr(this.b)}`}function VE(){return`#${kr(this.r)}${kr(this.g)}${kr(this.b)}${kr((isNaN(this.opacity)?1:this.opacity)*255)}`}function Zf(){const e=Ws(this.opacity);return`${e===1?"rgb(":"rgba("}${Lr(this.r)}, ${Lr(this.g)}, ${Lr(this.b)}${e===1?")":`, ${e})`}`}function Ws(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Lr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function kr(e){return e=Lr(e),(e<16?"0":"")+e.toString(16)}function Kf(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new bn(e,n,r,o)}function O0(e){if(e instanceof bn)return new bn(e.h,e.s,e.l,e.opacity);if(e instanceof Ao||(e=Do(e)),!e)return new bn;if(e instanceof bn)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),c=Math.max(n,r,o),u=NaN,l=c-s,d=(c+s)/2;return l?(n===c?u=(r-o)/l+(r<o)*6:r===c?u=(o-n)/l+2:u=(n-r)/l+4,l/=d<.5?c+s:2-c-s,u*=60):l=d>0&&d<1?0:u,new bn(u,l,d,e.opacity)}function qE(e,n,r,o){return arguments.length===1?O0(e):new bn(e,n,r,o??1)}function bn(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}Gc(bn,qE,z0(Ao,{brighter(e){return e=e==null?Gs:Math.pow(Gs,e),new bn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?yo:Math.pow(yo,e),new bn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new jt(Ju(e>=240?e-240:e+120,s,o),Ju(e,s,o),Ju(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new bn(Jf(this.h),_s(this.s),_s(this.l),Ws(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ws(this.opacity);return`${e===1?"hsl(":"hsla("}${Jf(this.h)}, ${_s(this.s)*100}%, ${_s(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Jf(e){return e=(e||0)%360,e<0?e+360:e}function _s(e){return Math.max(0,Math.min(1,e||0))}function Ju(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const P0=e=>()=>e;function GE(e,n){return function(r){return e+r*n}}function WE(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function UE(e){return(e=+e)==1?$0:function(n,r){return r-n?WE(n,r,e):P0(isNaN(n)?r:n)}}function $0(e,n){var r=n-e;return r?GE(e,r):P0(isNaN(e)?n:e)}const Qf=function e(n){var r=UE(n);function o(s,c){var u=r((s=mc(s)).r,(c=mc(c)).r),l=r(s.g,c.g),d=r(s.b,c.b),p=$0(s.opacity,c.opacity);return function(h){return s.r=u(h),s.g=l(h),s.b=d(h),s.opacity=p(h),s+""}}return o.gamma=e,o}(1);function mr(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var yc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qu=new RegExp(yc.source,"g");function YE(e){return function(){return e}}function XE(e){return function(n){return e(n)+""}}function ZE(e,n){var r=yc.lastIndex=Qu.lastIndex=0,o,s,c,u=-1,l=[],d=[];for(e=e+"",n=n+"";(o=yc.exec(e))&&(s=Qu.exec(n));)(c=s.index)>r&&(c=n.slice(r,c),l[u]?l[u]+=c:l[++u]=c),(o=o[0])===(s=s[0])?l[u]?l[u]+=s:l[++u]=s:(l[++u]=null,d.push({i:u,x:mr(o,s)})),r=Qu.lastIndex;return r<n.length&&(c=n.slice(r),l[u]?l[u]+=c:l[++u]=c),l.length<2?d[0]?XE(d[0].x):YE(n):(n=d.length,function(p){for(var h=0,g;h<n;++h)l[(g=d[h]).i]=g.x(p);return l.join("")})}var eh=180/Math.PI,vc={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function k0(e,n,r,o,s,c){var u,l,d;return(u=Math.sqrt(e*e+n*n))&&(e/=u,n/=u),(d=e*r+n*o)&&(r-=e*d,o-=n*d),(l=Math.sqrt(r*r+o*o))&&(r/=l,o/=l,d/=l),e*o<n*r&&(e=-e,n=-n,d=-d,u=-u),{translateX:s,translateY:c,rotate:Math.atan2(n,e)*eh,skewX:Math.atan(d)*eh,scaleX:u,scaleY:l}}var ws;function KE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?vc:k0(n.a,n.b,n.c,n.d,n.e,n.f)}function JE(e){return e==null||(ws||(ws=document.createElementNS("http://www.w3.org/2000/svg","g")),ws.setAttribute("transform",e),!(e=ws.transform.baseVal.consolidate()))?vc:(e=e.matrix,k0(e.a,e.b,e.c,e.d,e.e,e.f))}function H0(e,n,r,o){function s(p){return p.length?p.pop()+" ":""}function c(p,h,g,m,x,C){if(p!==g||h!==m){var D=x.push("translate(",null,n,null,r);C.push({i:D-4,x:mr(p,g)},{i:D-2,x:mr(h,m)})}else(g||m)&&x.push("translate("+g+n+m+r)}function u(p,h,g,m){p!==h?(p-h>180?h+=360:h-p>180&&(p+=360),m.push({i:g.push(s(g)+"rotate(",null,o)-2,x:mr(p,h)})):h&&g.push(s(g)+"rotate("+h+o)}function l(p,h,g,m){p!==h?m.push({i:g.push(s(g)+"skewX(",null,o)-2,x:mr(p,h)}):h&&g.push(s(g)+"skewX("+h+o)}function d(p,h,g,m,x,C){if(p!==g||h!==m){var D=x.push(s(x)+"scale(",null,",",null,")");C.push({i:D-4,x:mr(p,g)},{i:D-2,x:mr(h,m)})}else(g!==1||m!==1)&&x.push(s(x)+"scale("+g+","+m+")")}return function(p,h){var g=[],m=[];return p=e(p),h=e(h),c(p.translateX,p.translateY,h.translateX,h.translateY,g,m),u(p.rotate,h.rotate,g,m),l(p.skewX,h.skewX,g,m),d(p.scaleX,p.scaleY,h.scaleX,h.scaleY,g,m),p=h=null,function(x){for(var C=-1,D=m.length,E;++C<D;)g[(E=m[C]).i]=E.x(x);return g.join("")}}}var QE=H0(KE,"px, ","px)","deg)"),eb=H0(JE,", ",")",")"),tb=1e-12;function th(e){return((e=Math.exp(e))+1/e)/2}function nb(e){return((e=Math.exp(e))-1/e)/2}function rb(e){return((e=Math.exp(2*e))-1)/(e+1)}const ib=function e(n,r,o){function s(c,u){var l=c[0],d=c[1],p=c[2],h=u[0],g=u[1],m=u[2],x=h-l,C=g-d,D=x*x+C*C,E,y;if(D<tb)y=Math.log(m/p)/n,E=function(j){return[l+j*x,d+j*C,p*Math.exp(n*j*y)]};else{var S=Math.sqrt(D),T=(m*m-p*p+o*D)/(2*p*r*S),F=(m*m-p*p-o*D)/(2*m*r*S),R=Math.log(Math.sqrt(T*T+1)-T),k=Math.log(Math.sqrt(F*F+1)-F);y=(k-R)/n,E=function(j){var Y=j*y,z=th(R),G=p/(r*S)*(z*rb(n*Y+R)-nb(R));return[l+G*x,d+G*C,p*z/th(n*Y+R)]}}return E.duration=y*1e3*n/Math.SQRT2,E}return s.rho=function(c){var u=Math.max(.001,+c),l=u*u,d=l*l;return e(u,l,d)},s}(Math.SQRT2,2,4);var Ci=0,so=0,Ji=0,L0=1e3,Us,ao,Ys=0,Vr=0,sa=0,xo=typeof performance=="object"&&performance.now?performance:Date,j0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wc(){return Vr||(j0(ob),Vr=xo.now()+sa)}function ob(){Vr=0}function Xs(){this._call=this._time=this._next=null}Xs.prototype=V0.prototype={constructor:Xs,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Wc():+r)+(n==null?0:+n),!this._next&&ao!==this&&(ao?ao._next=this:Us=this,ao=this),this._call=e,this._time=r,Dc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Dc())}};function V0(e,n,r){var o=new Xs;return o.restart(e,n,r),o}function sb(){Wc(),++Ci;for(var e=Us,n;e;)(n=Vr-e._time)>=0&&e._call.call(void 0,n),e=e._next;--Ci}function nh(){Vr=(Ys=xo.now())+sa,Ci=so=0;try{sb()}finally{Ci=0,ub(),Vr=0}}function ab(){var e=xo.now(),n=e-Ys;n>L0&&(sa-=n,Ys=e)}function ub(){for(var e,n=Us,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Us=r);ao=e,Dc(o)}function Dc(e){if(!Ci){so&&(so=clearTimeout(so));var n=e-Vr;n>24?(e<1/0&&(so=setTimeout(nh,e-xo.now()-sa)),Ji&&(Ji=clearInterval(Ji))):(Ji||(Ys=xo.now(),Ji=setInterval(ab,L0)),Ci=1,j0(nh))}}function rh(e,n,r){var o=new Xs;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var cb=ia("start","end","cancel","interrupt"),lb=[],q0=0,ih=1,xc=2,Os=3,oh=4,_c=5,Ps=6;function aa(e,n,r,o,s,c){var u=e.__transition;if(!u)e.__transition={};else if(r in u)return;db(e,r,{name:n,index:o,group:s,on:cb,tween:lb,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:q0})}function Uc(e,n){var r=Nn(e,n);if(r.state>q0)throw new Error("too late; already scheduled");return r}function $n(e,n){var r=Nn(e,n);if(r.state>Os)throw new Error("too late; already running");return r}function Nn(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function db(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=V0(c,0,r.time);function c(p){r.state=ih,r.timer.restart(u,r.delay,r.time),r.delay<=p&&u(p-r.delay)}function u(p){var h,g,m,x;if(r.state!==ih)return d();for(h in o)if(x=o[h],x.name===r.name){if(x.state===Os)return rh(u);x.state===oh?(x.state=Ps,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete o[h]):+h<n&&(x.state=Ps,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete o[h])}if(rh(function(){r.state===Os&&(r.state=oh,r.timer.restart(l,r.delay,r.time),l(p))}),r.state=xc,r.on.call("start",e,e.__data__,r.index,r.group),r.state===xc){for(r.state=Os,s=new Array(m=r.tween.length),h=0,g=-1;h<m;++h)(x=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(s[++g]=x);s.length=g+1}}function l(p){for(var h=p<r.duration?r.ease.call(null,p/r.duration):(r.timer.restart(d),r.state=_c,1),g=-1,m=s.length;++g<m;)s[g].call(e,h);r.state===_c&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=Ps,r.timer.stop(),delete o[n];for(var p in o)return;delete e.__transition}}function $s(e,n){var r=e.__transition,o,s,c=!0,u;if(r){n=n==null?null:n+"";for(u in r){if((o=r[u]).name!==n){c=!1;continue}s=o.state>xc&&o.state<_c,o.state=Ps,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[u]}c&&delete e.__transition}}function fb(e){return this.each(function(){$s(this,e)})}function hb(e,n){var r,o;return function(){var s=$n(this,e),c=s.tween;if(c!==r){o=r=c;for(var u=0,l=o.length;u<l;++u)if(o[u].name===n){o=o.slice(),o.splice(u,1);break}}s.tween=o}}function pb(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var c=$n(this,e),u=c.tween;if(u!==o){s=(o=u).slice();for(var l={name:n,value:r},d=0,p=s.length;d<p;++d)if(s[d].name===n){s[d]=l;break}d===p&&s.push(l)}c.tween=s}}function gb(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=Nn(this.node(),r).tween,s=0,c=o.length,u;s<c;++s)if((u=o[s]).name===e)return u.value;return null}return this.each((n==null?hb:pb)(r,e,n))}function Yc(e,n,r){var o=e._id;return e.each(function(){var s=$n(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Nn(s,o).value[n]}}function G0(e,n){var r;return(typeof n=="number"?mr:n instanceof Do?Qf:(r=Do(n))?(n=r,Qf):ZE)(e,n)}function mb(e){return function(){this.removeAttribute(e)}}function yb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vb(e,n,r){var o,s=r+"",c;return function(){var u=this.getAttribute(e);return u===s?null:u===o?c:c=n(o=u,r)}}function Db(e,n,r){var o,s=r+"",c;return function(){var u=this.getAttributeNS(e.space,e.local);return u===s?null:u===o?c:c=n(o=u,r)}}function xb(e,n,r){var o,s,c;return function(){var u,l=r(this),d;return l==null?void this.removeAttribute(e):(u=this.getAttribute(e),d=l+"",u===d?null:u===o&&d===s?c:(s=d,c=n(o=u,l)))}}function _b(e,n,r){var o,s,c;return function(){var u,l=r(this),d;return l==null?void this.removeAttributeNS(e.space,e.local):(u=this.getAttributeNS(e.space,e.local),d=l+"",u===d?null:u===o&&d===s?c:(s=d,c=n(o=u,l)))}}function wb(e,n){var r=oa(e),o=r==="transform"?eb:G0;return this.attrTween(e,typeof n=="function"?(r.local?_b:xb)(r,o,Yc(this,"attr."+e,n)):n==null?(r.local?yb:mb)(r):(r.local?Db:vb)(r,o,n))}function Cb(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function Eb(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function bb(e,n){var r,o;function s(){var c=n.apply(this,arguments);return c!==o&&(r=(o=c)&&Eb(e,c)),r}return s._value=n,s}function Ab(e,n){var r,o;function s(){var c=n.apply(this,arguments);return c!==o&&(r=(o=c)&&Cb(e,c)),r}return s._value=n,s}function Sb(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=oa(e);return this.tween(r,(o.local?bb:Ab)(o,n))}function Fb(e,n){return function(){Uc(this,e).delay=+n.apply(this,arguments)}}function Nb(e,n){return n=+n,function(){Uc(this,e).delay=n}}function Tb(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Fb:Nb)(n,e)):Nn(this.node(),n).delay}function Bb(e,n){return function(){$n(this,e).duration=+n.apply(this,arguments)}}function Ib(e,n){return n=+n,function(){$n(this,e).duration=n}}function Rb(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Bb:Ib)(n,e)):Nn(this.node(),n).duration}function Mb(e,n){if(typeof n!="function")throw new Error;return function(){$n(this,e).ease=n}}function zb(e){var n=this._id;return arguments.length?this.each(Mb(n,e)):Nn(this.node(),n).ease}function Ob(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;$n(this,e).ease=r}}function Pb(e){if(typeof e!="function")throw new Error;return this.each(Ob(this._id,e))}function $b(e){typeof e!="function"&&(e=C0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var c=n[s],u=c.length,l=o[s]=[],d,p=0;p<u;++p)(d=c[p])&&e.call(d,d.__data__,p,c)&&l.push(d);return new rr(o,this._parents,this._name,this._id)}function kb(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,c=Math.min(o,s),u=new Array(o),l=0;l<c;++l)for(var d=n[l],p=r[l],h=d.length,g=u[l]=new Array(h),m,x=0;x<h;++x)(m=d[x]||p[x])&&(g[x]=m);for(;l<o;++l)u[l]=n[l];return new rr(u,this._parents,this._name,this._id)}function Hb(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function Lb(e,n,r){var o,s,c=Hb(n)?Uc:$n;return function(){var u=c(this,e),l=u.on;l!==o&&(s=(o=l).copy()).on(n,r),u.on=s}}function jb(e,n){var r=this._id;return arguments.length<2?Nn(this.node(),r).on.on(e):this.each(Lb(r,e,n))}function Vb(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function qb(){return this.on("end.remove",Vb(this._id))}function Gb(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Vc(e));for(var o=this._groups,s=o.length,c=new Array(s),u=0;u<s;++u)for(var l=o[u],d=l.length,p=c[u]=new Array(d),h,g,m=0;m<d;++m)(h=l[m])&&(g=e.call(h,h.__data__,m,l))&&("__data__"in h&&(g.__data__=h.__data__),p[m]=g,aa(p[m],n,r,m,p,Nn(h,r)));return new rr(c,this._parents,n,r)}function Wb(e){var n=this._name,r=this._id;typeof e!="function"&&(e=w0(e));for(var o=this._groups,s=o.length,c=[],u=[],l=0;l<s;++l)for(var d=o[l],p=d.length,h,g=0;g<p;++g)if(h=d[g]){for(var m=e.call(h,h.__data__,g,d),x,C=Nn(h,r),D=0,E=m.length;D<E;++D)(x=m[D])&&aa(x,n,r,D,m,C);c.push(m),u.push(h)}return new rr(c,u,n,r)}var Ub=bo.prototype.constructor;function Yb(){return new Ub(this._groups,this._parents)}function Xb(e,n){var r,o,s;return function(){var c=wi(this,e),u=(this.style.removeProperty(e),wi(this,e));return c===u?null:c===r&&u===o?s:s=n(r=c,o=u)}}function W0(e){return function(){this.style.removeProperty(e)}}function Zb(e,n,r){var o,s=r+"",c;return function(){var u=wi(this,e);return u===s?null:u===o?c:c=n(o=u,r)}}function Kb(e,n,r){var o,s,c;return function(){var u=wi(this,e),l=r(this),d=l+"";return l==null&&(d=l=(this.style.removeProperty(e),wi(this,e))),u===d?null:u===o&&d===s?c:(s=d,c=n(o=u,l))}}function Jb(e,n){var r,o,s,c="style."+n,u="end."+c,l;return function(){var d=$n(this,e),p=d.on,h=d.value[c]==null?l||(l=W0(n)):void 0;(p!==r||s!==h)&&(o=(r=p).copy()).on(u,s=h),d.on=o}}function Qb(e,n,r){var o=(e+="")=="transform"?QE:G0;return n==null?this.styleTween(e,Xb(e,o)).on("end.style."+e,W0(e)):typeof n=="function"?this.styleTween(e,Kb(e,o,Yc(this,"style."+e,n))).each(Jb(this._id,e)):this.styleTween(e,Zb(e,o,n),r).on("end.style."+e,null)}function e3(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function t3(e,n,r){var o,s;function c(){var u=n.apply(this,arguments);return u!==s&&(o=(s=u)&&e3(e,u,r)),o}return c._value=n,c}function n3(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,t3(e,n,r??""))}function r3(e){return function(){this.textContent=e}}function i3(e){return function(){var n=e(this);this.textContent=n??""}}function o3(e){return this.tween("text",typeof e=="function"?i3(Yc(this,"text",e)):r3(e==null?"":e+""))}function s3(e){return function(n){this.textContent=e.call(this,n)}}function a3(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&s3(s)),n}return o._value=e,o}function u3(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,a3(e))}function c3(){for(var e=this._name,n=this._id,r=U0(),o=this._groups,s=o.length,c=0;c<s;++c)for(var u=o[c],l=u.length,d,p=0;p<l;++p)if(d=u[p]){var h=Nn(d,n);aa(d,e,r,p,u,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new rr(o,this._parents,e,r)}function l3(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(c,u){var l={value:u},d={value:function(){--s===0&&c()}};r.each(function(){var p=$n(this,o),h=p.on;h!==e&&(n=(e=h).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(d)),p.on=n}),s===0&&c()})}var d3=0;function rr(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function U0(){return++d3}var Kn=bo.prototype;rr.prototype={constructor:rr,select:Gb,selectAll:Wb,selectChild:Kn.selectChild,selectChildren:Kn.selectChildren,filter:$b,merge:kb,selection:Yb,transition:c3,call:Kn.call,nodes:Kn.nodes,node:Kn.node,size:Kn.size,empty:Kn.empty,each:Kn.each,on:jb,attr:wb,attrTween:Sb,style:Qb,styleTween:n3,text:o3,textTween:u3,remove:qb,tween:gb,delay:Tb,duration:Rb,ease:zb,easeVarying:Pb,end:l3,[Symbol.iterator]:Kn[Symbol.iterator]};function f3(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var h3={time:null,delay:0,duration:250,ease:f3};function p3(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function g3(e){var n,r;e instanceof rr?(n=e._id,e=e._name):(n=U0(),(r=h3).time=Wc(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,c=0;c<s;++c)for(var u=o[c],l=u.length,d,p=0;p<l;++p)(d=u[p])&&aa(d,e,n,p,u,r||p3(d,n));return new rr(o,this._parents,e,n)}bo.prototype.interrupt=fb;bo.prototype.transition=g3;const Cs=e=>()=>e;function m3(e,{sourceEvent:n,target:r,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function tr(e,n,r){this.k=e,this.x=n,this.y=r}tr.prototype={constructor:tr,scale:function(e){return e===1?this:new tr(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new tr(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dr=new tr(1,0,0);tr.prototype;function ec(e){e.stopImmediatePropagation()}function Qi(e){e.preventDefault(),e.stopImmediatePropagation()}function y3(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function v3(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function sh(){return this.__zoom||Dr}function D3(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function x3(){return navigator.maxTouchPoints||"ontouchstart"in this}function _3(e,n,r){var o=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],c=e.invertY(n[0][1])-r[0][1],u=e.invertY(n[1][1])-r[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),u>c?(c+u)/2:Math.min(0,c)||Math.max(0,u))}function w3(){var e=y3,n=v3,r=_3,o=D3,s=x3,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],l=250,d=ib,p=ia("start","zoom","end"),h,g,m,x=500,C=150,D=0,E=10;function y(N){N.property("__zoom",sh).on("wheel.zoom",Y,{passive:!1}).on("mousedown.zoom",z).on("dblclick.zoom",G).filter(s).on("touchstart.zoom",Q).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}y.transform=function(N,$,P,q){var ee=N.selection?N.selection():N;ee.property("__zoom",sh),N!==ee?R(N,$,P,q):ee.interrupt().each(function(){k(this,arguments).event(q).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},y.scaleBy=function(N,$,P,q){y.scaleTo(N,function(){var ee=this.__zoom.k,L=typeof $=="function"?$.apply(this,arguments):$;return ee*L},P,q)},y.scaleTo=function(N,$,P,q){y.transform(N,function(){var ee=n.apply(this,arguments),L=this.__zoom,te=P==null?F(ee):typeof P=="function"?P.apply(this,arguments):P,re=L.invert(te),oe=typeof $=="function"?$.apply(this,arguments):$;return r(T(S(L,oe),te,re),ee,u)},P,q)},y.translateBy=function(N,$,P,q){y.transform(N,function(){return r(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof P=="function"?P.apply(this,arguments):P),n.apply(this,arguments),u)},null,q)},y.translateTo=function(N,$,P,q,ee){y.transform(N,function(){var L=n.apply(this,arguments),te=this.__zoom,re=q==null?F(L):typeof q=="function"?q.apply(this,arguments):q;return r(Dr.translate(re[0],re[1]).scale(te.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof P=="function"?-P.apply(this,arguments):-P),L,u)},q,ee)};function S(N,$){return $=Math.max(c[0],Math.min(c[1],$)),$===N.k?N:new tr($,N.x,N.y)}function T(N,$,P){var q=$[0]-P[0]*N.k,ee=$[1]-P[1]*N.k;return q===N.x&&ee===N.y?N:new tr(N.k,q,ee)}function F(N){return[(+N[0][0]+ +N[1][0])/2,(+N[0][1]+ +N[1][1])/2]}function R(N,$,P,q){N.on("start.zoom",function(){k(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){k(this,arguments).event(q).end()}).tween("zoom",function(){var ee=this,L=arguments,te=k(ee,L).event(q),re=n.apply(ee,L),oe=P==null?F(re):typeof P=="function"?P.apply(ee,L):P,ce=Math.max(re[1][0]-re[0][0],re[1][1]-re[0][1]),ue=ee.__zoom,ge=typeof $=="function"?$.apply(ee,L):$,Ae=d(ue.invert(oe).concat(ce/ue.k),ge.invert(oe).concat(ce/ge.k));return function(Se){if(Se===1)Se=ge;else{var he=Ae(Se),ve=ce/he[2];Se=new tr(ve,oe[0]-he[0]*ve,oe[1]-he[1]*ve)}te.zoom(null,Se)}})}function k(N,$,P){return!P&&N.__zooming||new j(N,$)}function j(N,$){this.that=N,this.args=$,this.active=0,this.sourceEvent=null,this.extent=n.apply(N,$),this.taps=0}j.prototype={event:function(N){return N&&(this.sourceEvent=N),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(N,$){return this.mouse&&N!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&N!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&N!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(N){var $=En(this.that).datum();p.call(N,this.that,new m3(N,{sourceEvent:this.sourceEvent,target:y,type:N,transform:this.that.__zoom,dispatch:p}),$)}};function Y(N,...$){if(!e.apply(this,arguments))return;var P=k(this,$).event(N),q=this.__zoom,ee=Math.max(c[0],Math.min(c[1],q.k*Math.pow(2,o.apply(this,arguments)))),L=On(N);if(P.wheel)(P.mouse[0][0]!==L[0]||P.mouse[0][1]!==L[1])&&(P.mouse[1]=q.invert(P.mouse[0]=L)),clearTimeout(P.wheel);else{if(q.k===ee)return;P.mouse=[L,q.invert(L)],$s(this),P.start()}Qi(N),P.wheel=setTimeout(te,C),P.zoom("mouse",r(T(S(q,ee),P.mouse[0],P.mouse[1]),P.extent,u));function te(){P.wheel=null,P.end()}}function z(N,...$){if(m||!e.apply(this,arguments))return;var P=N.currentTarget,q=k(this,$,!0).event(N),ee=En(N.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",ce,!0),L=On(N,P),te=N.clientX,re=N.clientY;R0(N.view),ec(N),q.mouse=[L,this.__zoom.invert(L)],$s(this),q.start();function oe(ue){if(Qi(ue),!q.moved){var ge=ue.clientX-te,Ae=ue.clientY-re;q.moved=ge*ge+Ae*Ae>D}q.event(ue).zoom("mouse",r(T(q.that.__zoom,q.mouse[0]=On(ue,P),q.mouse[1]),q.extent,u))}function ce(ue){ee.on("mousemove.zoom mouseup.zoom",null),M0(ue.view,q.moved),Qi(ue),q.event(ue).end()}}function G(N,...$){if(e.apply(this,arguments)){var P=this.__zoom,q=On(N.changedTouches?N.changedTouches[0]:N,this),ee=P.invert(q),L=P.k*(N.shiftKey?.5:2),te=r(T(S(P,L),q,ee),n.apply(this,$),u);Qi(N),l>0?En(this).transition().duration(l).call(R,te,q,N):En(this).call(y.transform,te,q,N)}}function Q(N,...$){if(e.apply(this,arguments)){var P=N.touches,q=P.length,ee=k(this,$,N.changedTouches.length===q).event(N),L,te,re,oe;for(ec(N),te=0;te<q;++te)re=P[te],oe=On(re,this),oe=[oe,this.__zoom.invert(oe),re.identifier],ee.touch0?!ee.touch1&&ee.touch0[2]!==oe[2]&&(ee.touch1=oe,ee.taps=0):(ee.touch0=oe,L=!0,ee.taps=1+!!h);h&&(h=clearTimeout(h)),L&&(ee.taps<2&&(g=oe[0],h=setTimeout(function(){h=null},x)),$s(this),ee.start())}}function J(N,...$){if(this.__zooming){var P=k(this,$).event(N),q=N.changedTouches,ee=q.length,L,te,re,oe;for(Qi(N),L=0;L<ee;++L)te=q[L],re=On(te,this),P.touch0&&P.touch0[2]===te.identifier?P.touch0[0]=re:P.touch1&&P.touch1[2]===te.identifier&&(P.touch1[0]=re);if(te=P.that.__zoom,P.touch1){var ce=P.touch0[0],ue=P.touch0[1],ge=P.touch1[0],Ae=P.touch1[1],Se=(Se=ge[0]-ce[0])*Se+(Se=ge[1]-ce[1])*Se,he=(he=Ae[0]-ue[0])*he+(he=Ae[1]-ue[1])*he;te=S(te,Math.sqrt(Se/he)),re=[(ce[0]+ge[0])/2,(ce[1]+ge[1])/2],oe=[(ue[0]+Ae[0])/2,(ue[1]+Ae[1])/2]}else if(P.touch0)re=P.touch0[0],oe=P.touch0[1];else return;P.zoom("touch",r(T(te,re,oe),P.extent,u))}}function W(N,...$){if(this.__zooming){var P=k(this,$).event(N),q=N.changedTouches,ee=q.length,L,te;for(ec(N),m&&clearTimeout(m),m=setTimeout(function(){m=null},x),L=0;L<ee;++L)te=q[L],P.touch0&&P.touch0[2]===te.identifier?delete P.touch0:P.touch1&&P.touch1[2]===te.identifier&&delete P.touch1;if(P.touch1&&!P.touch0&&(P.touch0=P.touch1,delete P.touch1),P.touch0)P.touch0[1]=this.__zoom.invert(P.touch0[0]);else if(P.end(),P.taps===2&&(te=On(te,this),Math.hypot(g[0]-te[0],g[1]-te[1])<E)){var re=En(this).on("dblclick.zoom");re&&re.apply(this,arguments)}}}return y.wheelDelta=function(N){return arguments.length?(o=typeof N=="function"?N:Cs(+N),y):o},y.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Cs(!!N),y):e},y.touchable=function(N){return arguments.length?(s=typeof N=="function"?N:Cs(!!N),y):s},y.extent=function(N){return arguments.length?(n=typeof N=="function"?N:Cs([[+N[0][0],+N[0][1]],[+N[1][0],+N[1][1]]]),y):n},y.scaleExtent=function(N){return arguments.length?(c[0]=+N[0],c[1]=+N[1],y):[c[0],c[1]]},y.translateExtent=function(N){return arguments.length?(u[0][0]=+N[0][0],u[1][0]=+N[1][0],u[0][1]=+N[0][1],u[1][1]=+N[1][1],y):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},y.constrain=function(N){return arguments.length?(r=N,y):r},y.duration=function(N){return arguments.length?(l=+N,y):l},y.interpolate=function(N){return arguments.length?(d=N,y):d},y.on=function(){var N=p.on.apply(p,arguments);return N===p?y:N},y.clickDistance=function(N){return arguments.length?(D=(N=+N)*N,y):Math.sqrt(D)},y.tapDistance=function(N){return arguments.length?(E=+N,y):E},y}const ua=b.createContext(null),C3=ua.Provider,ir={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,n)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?n.targetHandle:n.sourceHandle}", edge id: ${n.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Y0=ir.error001();function Qe(e,n){const r=b.useContext(ua);if(r===null)throw new Error(Y0);return x0(r,e,n)}const vt=()=>{const e=b.useContext(ua);if(e===null)throw new Error(Y0);return b.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},E3=e=>e.userSelectionActive?"none":"all";function X0({position:e,children:n,className:r,style:o,...s}){const c=Qe(E3),u=`${e}`.split("-");return H.createElement("div",{className:Rt(["react-flow__panel",r,...u]),style:{...o,pointerEvents:c},...s},n)}function b3({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:H.createElement(X0,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},H.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const A3=({x:e,y:n,label:r,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:c={},labelBgPadding:u=[2,4],labelBgBorderRadius:l=2,children:d,className:p,...h})=>{const g=b.useRef(null),[m,x]=b.useState({x:0,y:0,width:0,height:0}),C=Rt(["react-flow__edge-textwrapper",p]);return b.useEffect(()=>{if(g.current){const D=g.current.getBBox();x({x:D.x,y:D.y,width:D.width,height:D.height})}},[r]),typeof r>"u"||!r?null:H.createElement("g",{transform:`translate(${e-m.width/2} ${n-m.height/2})`,className:C,visibility:m.width?"visible":"hidden",...h},s&&H.createElement("rect",{width:m.width+2*u[0],x:-u[0],y:-u[1],height:m.height+2*u[1],className:"react-flow__edge-textbg",style:c,rx:l,ry:l}),H.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:g,style:o},r),d)};var S3=b.memo(A3);const Xc=e=>({width:e.offsetWidth,height:e.offsetHeight}),Ei=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),Zc=(e={x:0,y:0},n)=>({x:Ei(e.x,n[0][0],n[1][0]),y:Ei(e.y,n[0][1],n[1][1])}),ah=(e,n,r)=>e<n?Ei(Math.abs(e-n),1,50)/50:e>r?-Ei(Math.abs(e-r),1,50)/50:0,Z0=(e,n)=>{const r=ah(e.x,35,n.width-35)*20,o=ah(e.y,35,n.height-35)*20;return[r,o]},K0=e=>e.getRootNode?.()||window?.document,F3=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),Kc=({x:e,y:n,width:r,height:o})=>({x:e,y:n,x2:e+r,y2:n+o}),N3=({x:e,y:n,x2:r,y2:o})=>({x:e,y:n,width:r-e,height:o-n}),uh=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),wc=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*o)},T3=e=>hn(e.width)&&hn(e.height)&&hn(e.x)&&hn(e.y),hn=e=>!isNaN(e)&&isFinite(e),rt=Symbol.for("internals"),J0=["Enter"," ","Escape"],B3=(e,n)=>{},I3=e=>"nativeEvent"in e;function Cc(e){const r=(I3(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r?.nodeName)||r?.hasAttribute("contenteditable")||!!r?.closest(".nokey")}const Q0=e=>"clientX"in e,xr=(e,n)=>{const r=Q0(e),o=r?e.clientX:e.touches?.[0].clientX,s=r?e.clientY:e.touches?.[0].clientY;return{x:o-(n?.left??0),y:s-(n?.top??0)}},Zs=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Ai=({id:e,path:n,labelX:r,labelY:o,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:g,markerStart:m,interactionWidth:x=20})=>H.createElement(H.Fragment,null,H.createElement("path",{id:e,style:h,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:m}),x&&H.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),s&&hn(r)&&hn(o)?H.createElement(S3,{x:r,y:o,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p}):null);Ai.displayName="BaseEdge";function eo(e,n,r){return r===void 0?r:o=>{const s=n().edges.find(c=>c.id===e);s&&r(o,{...s})}}function ep({sourceX:e,sourceY:n,targetX:r,targetY:o}){const s=Math.abs(r-e)/2,c=r<e?r+s:r-s,u=Math.abs(o-n)/2,l=o<n?o+u:o-u;return[c,l,s,u]}function tp({sourceX:e,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:c,targetControlX:u,targetControlY:l}){const d=e*.125+s*.375+u*.375+r*.125,p=n*.125+c*.375+l*.375+o*.125,h=Math.abs(d-e),g=Math.abs(p-n);return[d,p,h,g]}var qr;(function(e){e.Strict="strict",e.Loose="loose"})(qr||(qr={}));var Hr;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Hr||(Hr={}));var bi;(function(e){e.Partial="partial",e.Full="full"})(bi||(bi={}));var vr;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(vr||(vr={}));var _o;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(_o||(_o={}));var de;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(de||(de={}));function ch({pos:e,x1:n,y1:r,x2:o,y2:s}){return e===de.Left||e===de.Right?[.5*(n+o),r]:[n,.5*(r+s)]}function np({sourceX:e,sourceY:n,sourcePosition:r=de.Bottom,targetX:o,targetY:s,targetPosition:c=de.Top}){const[u,l]=ch({pos:r,x1:e,y1:n,x2:o,y2:s}),[d,p]=ch({pos:c,x1:o,y1:s,x2:e,y2:n}),[h,g,m,x]=tp({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:u,sourceControlY:l,targetControlX:d,targetControlY:p});return[`M${e},${n} C${u},${l} ${d},${p} ${o},${s}`,h,g,m,x]}const Jc=b.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=de.Bottom,targetPosition:c=de.Top,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:C,interactionWidth:D})=>{const[E,y,S]=np({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:c});return H.createElement(Ai,{path:E,labelX:y,labelY:S,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:C,interactionWidth:D})});Jc.displayName="SimpleBezierEdge";const lh={[de.Left]:{x:-1,y:0},[de.Right]:{x:1,y:0},[de.Top]:{x:0,y:-1},[de.Bottom]:{x:0,y:1}},R3=({source:e,sourcePosition:n=de.Bottom,target:r})=>n===de.Left||n===de.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},dh=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function M3({source:e,sourcePosition:n=de.Bottom,target:r,targetPosition:o=de.Top,center:s,offset:c}){const u=lh[n],l=lh[o],d={x:e.x+u.x*c,y:e.y+u.y*c},p={x:r.x+l.x*c,y:r.y+l.y*c},h=R3({source:d,sourcePosition:n,target:p}),g=h.x!==0?"x":"y",m=h[g];let x=[],C,D;const E={x:0,y:0},y={x:0,y:0},[S,T,F,R]=ep({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(u[g]*l[g]===-1){C=s.x??S,D=s.y??T;const j=[{x:C,y:d.y},{x:C,y:p.y}],Y=[{x:d.x,y:D},{x:p.x,y:D}];u[g]===m?x=g==="x"?j:Y:x=g==="x"?Y:j}else{const j=[{x:d.x,y:p.y}],Y=[{x:p.x,y:d.y}];if(g==="x"?x=u.x===m?Y:j:x=u.y===m?j:Y,n===o){const W=Math.abs(e[g]-r[g]);if(W<=c){const N=Math.min(c-1,c-W);u[g]===m?E[g]=(d[g]>e[g]?-1:1)*N:y[g]=(p[g]>r[g]?-1:1)*N}}if(n!==o){const W=g==="x"?"y":"x",N=u[g]===l[W],$=d[W]>p[W],P=d[W]<p[W];(u[g]===1&&(!N&&$||N&&P)||u[g]!==1&&(!N&&P||N&&$))&&(x=g==="x"?j:Y)}const z={x:d.x+E.x,y:d.y+E.y},G={x:p.x+y.x,y:p.y+y.y},Q=Math.max(Math.abs(z.x-x[0].x),Math.abs(G.x-x[0].x)),J=Math.max(Math.abs(z.y-x[0].y),Math.abs(G.y-x[0].y));Q>=J?(C=(z.x+G.x)/2,D=x[0].y):(C=x[0].x,D=(z.y+G.y)/2)}return[[e,{x:d.x+E.x,y:d.y+E.y},...x,{x:p.x+y.x,y:p.y+y.y},r],C,D,F,R]}function z3(e,n,r,o){const s=Math.min(dh(e,n)/2,dh(n,r)/2,o),{x:c,y:u}=n;if(e.x===c&&c===r.x||e.y===u&&u===r.y)return`L${c} ${u}`;if(e.y===u){const p=e.x<r.x?-1:1,h=e.y<r.y?1:-1;return`L ${c+s*p},${u}Q ${c},${u} ${c},${u+s*h}`}const l=e.x<r.x?1:-1,d=e.y<r.y?-1:1;return`L ${c},${u+s*d}Q ${c},${u} ${c+s*l},${u}`}function Ec({sourceX:e,sourceY:n,sourcePosition:r=de.Bottom,targetX:o,targetY:s,targetPosition:c=de.Top,borderRadius:u=5,centerX:l,centerY:d,offset:p=20}){const[h,g,m,x,C]=M3({source:{x:e,y:n},sourcePosition:r,target:{x:o,y:s},targetPosition:c,center:{x:l,y:d},offset:p});return[h.reduce((E,y,S)=>{let T="";return S>0&&S<h.length-1?T=z3(h[S-1],y,h[S+1],u):T=`${S===0?"M":"L"}${y.x} ${y.y}`,E+=T,E},""),g,m,x,C]}const ca=b.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,sourcePosition:g=de.Bottom,targetPosition:m=de.Top,markerEnd:x,markerStart:C,pathOptions:D,interactionWidth:E})=>{const[y,S,T]=Ec({sourceX:e,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:m,borderRadius:D?.borderRadius,offset:D?.offset});return H.createElement(Ai,{path:y,labelX:S,labelY:T,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:x,markerStart:C,interactionWidth:E})});ca.displayName="SmoothStepEdge";const Qc=b.memo(e=>H.createElement(ca,{...e,pathOptions:b.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Qc.displayName="StepEdge";function O3({sourceX:e,sourceY:n,targetX:r,targetY:o}){const[s,c,u,l]=ep({sourceX:e,sourceY:n,targetX:r,targetY:o});return[`M ${e},${n}L ${r},${o}`,s,c,u,l]}const el=b.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:g,markerStart:m,interactionWidth:x})=>{const[C,D,E]=O3({sourceX:e,sourceY:n,targetX:r,targetY:o});return H.createElement(Ai,{path:C,labelX:D,labelY:E,label:s,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:d,labelBgBorderRadius:p,style:h,markerEnd:g,markerStart:m,interactionWidth:x})});el.displayName="StraightEdge";function Es(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function fh({pos:e,x1:n,y1:r,x2:o,y2:s,c}){switch(e){case de.Left:return[n-Es(n-o,c),r];case de.Right:return[n+Es(o-n,c),r];case de.Top:return[n,r-Es(r-s,c)];case de.Bottom:return[n,r+Es(s-r,c)]}}function tl({sourceX:e,sourceY:n,sourcePosition:r=de.Bottom,targetX:o,targetY:s,targetPosition:c=de.Top,curvature:u=.25}){const[l,d]=fh({pos:r,x1:e,y1:n,x2:o,y2:s,c:u}),[p,h]=fh({pos:c,x1:o,y1:s,x2:e,y2:n,c:u}),[g,m,x,C]=tp({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:d,targetControlX:p,targetControlY:h});return[`M${e},${n} C${l},${d} ${p},${h} ${o},${s}`,g,m,x,C]}const Ks=b.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=de.Bottom,targetPosition:c=de.Top,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:C,pathOptions:D,interactionWidth:E})=>{const[y,S,T]=tl({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:c,curvature:D?.curvature});return H.createElement(Ai,{path:y,labelX:S,labelY:T,label:u,labelStyle:l,labelShowBg:d,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:C,interactionWidth:E})});Ks.displayName="BezierEdge";const nl=b.createContext(null),P3=nl.Provider;nl.Consumer;const $3=()=>b.useContext(nl),k3=e=>"id"in e&&"source"in e&&"target"in e,rp=e=>"id"in e&&!("source"in e)&&!("target"in e),Js=(e,n,r)=>{if(!rp(e))return[];const o=r.filter(s=>s.source===e.id).map(s=>s.target);return n.filter(s=>o.includes(s.id))},H3=(e,n,r)=>{if(!rp(e))return[];const o=r.filter(s=>s.target===e.id).map(s=>s.source);return n.filter(s=>o.includes(s.id))},L3=({source:e,sourceHandle:n,target:r,targetHandle:o})=>`reactflow__edge-${e}${n||""}-${r}${o||""}`,bc=(e,n)=>typeof e>"u"?"":typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,j3=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),V3=(e,n)=>{if(!e.source||!e.target)return n;let r;return k3(e)?r={...e}:r={...e,id:L3(e)},j3(r,n)?n:n.concat(r)},Ac=({x:e,y:n},[r,o,s],c,[u,l])=>{const d={x:(e-r)/s,y:(n-o)/s};return c?{x:u*Math.round(d.x/u),y:l*Math.round(d.y/l)}:d},ip=({x:e,y:n},[r,o,s])=>({x:e*s+r,y:n*s+o}),Di=(e,n=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*n[0],o=(e.height??0)*n[1],s={x:e.position.x-r,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-o}:s}},rl=(e,n=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,s)=>{const{x:c,y:u}=Di(s,n).positionAbsolute;return F3(o,Kc({x:c,y:u,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return N3(r)},op=(e,n,[r,o,s]=[0,0,1],c=!1,u=!1,l=[0,0])=>{const d={x:(n.x-r)/s,y:(n.y-o)/s,width:n.width/s,height:n.height/s},p=[];return e.forEach(h=>{const{width:g,height:m,selectable:x=!0,hidden:C=!1}=h;if(u&&!x||C)return!1;const{positionAbsolute:D}=Di(h,l),E={x:D.x,y:D.y,width:g||0,height:m||0},y=wc(d,E),S=typeof g>"u"||typeof m>"u"||g===null||m===null,T=c&&y>0,F=(g||0)*(m||0);(S||T||y>=F||h.dragging)&&p.push(h)}),p},sp=(e,n)=>{const r=e.map(o=>o.id);return n.filter(o=>r.includes(o.source)||r.includes(o.target))},ap=(e,n,r,o,s,c=.1)=>{const u=n/(e.width*(1+c)),l=r/(e.height*(1+c)),d=Math.min(u,l),p=Ei(d,o,s),h=e.x+e.width/2,g=e.y+e.height/2,m=n/2-h*p,x=r/2-g*p;return{x:m,y:x,zoom:p}},$r=(e,n=0)=>e.transition().duration(n);function hh(e,n,r,o){return(n[r]||[]).reduce((s,c)=>(`${e.id}-${c.id}-${r}`!==o&&s.push({id:c.id||null,type:r,nodeId:e.id,x:(e.positionAbsolute?.x??0)+c.x+c.width/2,y:(e.positionAbsolute?.y??0)+c.y+c.height/2}),s),[])}function q3(e,n,r,o,s,c){const{x:u,y:l}=xr(e),p=n.elementsFromPoint(u,l).find(C=>C.classList.contains("react-flow__handle"));if(p){const C=p.getAttribute("data-nodeid");if(C){const D=il(void 0,p),E=p.getAttribute("data-handleid"),y=c({nodeId:C,id:E,type:D});if(y){const S=s.find(T=>T.nodeId===C&&T.type===D&&T.id===E);return{handle:{id:E,type:D,nodeId:C,x:S?.x||r.x,y:S?.y||r.y},validHandleResult:y}}}}let h=[],g=1/0;if(s.forEach(C=>{const D=Math.sqrt((C.x-r.x)**2+(C.y-r.y)**2);if(D<=o){const E=c(C);D<=g&&(D<g?h=[{handle:C,validHandleResult:E}]:D===g&&h.push({handle:C,validHandleResult:E}),g=D)}}),!h.length)return{handle:null,validHandleResult:up()};if(h.length===1)return h[0];const m=h.some(({validHandleResult:C})=>C.isValid),x=h.some(({handle:C})=>C.type==="target");return h.find(({handle:C,validHandleResult:D})=>x?C.type==="target":m?D.isValid:!0)||h[0]}const G3={source:null,target:null,sourceHandle:null,targetHandle:null},up=()=>({handleDomNode:null,isValid:!1,connection:G3,endHandle:null});function cp(e,n,r,o,s,c,u){const l=s==="target",d=u.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),p={...up(),handleDomNode:d};if(d){const h=il(void 0,d),g=d.getAttribute("data-nodeid"),m=d.getAttribute("data-handleid"),x=d.classList.contains("connectable"),C=d.classList.contains("connectableend"),D={source:l?g:r,sourceHandle:l?m:o,target:l?r:g,targetHandle:l?o:m};p.connection=D,x&&C&&(n===qr.Strict?l&&h==="source"||!l&&h==="target":g!==r||m!==o)&&(p.endHandle={nodeId:g,handleId:m,type:h},p.isValid=c(D))}return p}function W3({nodes:e,nodeId:n,handleId:r,handleType:o}){return e.reduce((s,c)=>{if(c[rt]){const{handleBounds:u}=c[rt];let l=[],d=[];u&&(l=hh(c,u,"source",`${n}-${r}-${o}`),d=hh(c,u,"target",`${n}-${r}-${o}`)),s.push(...l,...d)}return s},[])}function il(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function tc(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function U3(e,n){let r=null;return n?r="valid":e&&!n&&(r="invalid"),r}function lp({event:e,handleId:n,nodeId:r,onConnect:o,isTarget:s,getState:c,setState:u,isValidConnection:l,edgeUpdaterType:d,onReconnectEnd:p}){const h=K0(e.target),{connectionMode:g,domNode:m,autoPanOnConnect:x,connectionRadius:C,onConnectStart:D,panBy:E,getNodes:y,cancelConnection:S}=c();let T=0,F;const{x:R,y:k}=xr(e),j=h?.elementFromPoint(R,k),Y=il(d,j),z=m?.getBoundingClientRect();if(!z||!Y)return;let G,Q=xr(e,z),J=!1,W=null,N=!1,$=null;const P=W3({nodes:y(),nodeId:r,handleId:n,handleType:Y}),q=()=>{if(!x)return;const[te,re]=Z0(Q,z);E({x:te,y:re}),T=requestAnimationFrame(q)};u({connectionPosition:Q,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:Y,connectionStartHandle:{nodeId:r,handleId:n,type:Y},connectionEndHandle:null}),D?.(e,{nodeId:r,handleId:n,handleType:Y});function ee(te){const{transform:re}=c();Q=xr(te,z);const{handle:oe,validHandleResult:ce}=q3(te,h,Ac(Q,re,!1,[1,1]),C,P,ue=>cp(ue,g,r,n,s?"target":"source",l,h));if(F=oe,J||(q(),J=!0),$=ce.handleDomNode,W=ce.connection,N=ce.isValid,u({connectionPosition:F&&N?ip({x:F.x,y:F.y},re):Q,connectionStatus:U3(!!F,N),connectionEndHandle:ce.endHandle}),!F&&!N&&!$)return tc(G);W.source!==W.target&&$&&(tc(G),G=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",N),$.classList.toggle("react-flow__handle-valid",N))}function L(te){(F||$)&&W&&N&&o?.(W),c().onConnectEnd?.(te),d&&p?.(te),tc(G),S(),cancelAnimationFrame(T),J=!1,N=!1,W=null,$=null,h.removeEventListener("mousemove",ee),h.removeEventListener("mouseup",L),h.removeEventListener("touchmove",ee),h.removeEventListener("touchend",L)}h.addEventListener("mousemove",ee),h.addEventListener("mouseup",L),h.addEventListener("touchmove",ee),h.addEventListener("touchend",L)}const ph=()=>!0,Y3=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),X3=(e,n,r)=>o=>{const{connectionStartHandle:s,connectionEndHandle:c,connectionClickStartHandle:u}=o;return{connecting:s?.nodeId===e&&s?.handleId===n&&s?.type===r||c?.nodeId===e&&c?.handleId===n&&c?.type===r,clickConnecting:u?.nodeId===e&&u?.handleId===n&&u?.type===r}},dp=b.forwardRef(({type:e="source",position:n=de.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:c=!0,id:u,onConnect:l,children:d,className:p,onMouseDown:h,onTouchStart:g,...m},x)=>{const C=u||null,D=e==="target",E=vt(),y=$3(),{connectOnClick:S,noPanClassName:T}=Qe(Y3,St),{connecting:F,clickConnecting:R}=Qe(X3(y,C,e),St);y||E.getState().onError?.("010",ir.error010());const k=z=>{const{defaultEdgeOptions:G,onConnect:Q,hasDefaultEdges:J}=E.getState(),W={...G,...z};if(J){const{edges:N,setEdges:$}=E.getState();$(V3(W,N))}Q?.(W),l?.(W)},j=z=>{if(!y)return;const G=Q0(z);s&&(G&&z.button===0||!G)&&lp({event:z,handleId:C,nodeId:y,onConnect:k,isTarget:D,getState:E.getState,setState:E.setState,isValidConnection:r||E.getState().isValidConnection||ph}),G?h?.(z):g?.(z)},Y=z=>{const{onClickConnectStart:G,onClickConnectEnd:Q,connectionClickStartHandle:J,connectionMode:W,isValidConnection:N}=E.getState();if(!y||!J&&!s)return;if(!J){G?.(z,{nodeId:y,handleId:C,handleType:e}),E.setState({connectionClickStartHandle:{nodeId:y,type:e,handleId:C}});return}const $=K0(z.target),P=r||N||ph,{connection:q,isValid:ee}=cp({nodeId:y,id:C,type:e},W,J.nodeId,J.handleId||null,J.type,P,$);ee&&k(q),Q?.(z),E.setState({connectionClickStartHandle:null})};return H.createElement("div",{"data-handleid":C,"data-nodeid":y,"data-handlepos":n,"data-id":`${y}-${C}-${e}`,className:Rt(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",T,p,{source:!D,target:D,connectable:o,connectablestart:s,connectableend:c,connecting:R,connectionindicator:o&&(s&&!F||c&&F)}]),onMouseDown:j,onTouchStart:j,onClick:S?Y:void 0,ref:x,...m},d)});dp.displayName="Handle";var Cr=b.memo(dp);const fp=({data:e,isConnectable:n,targetPosition:r=de.Top,sourcePosition:o=de.Bottom})=>H.createElement(H.Fragment,null,H.createElement(Cr,{type:"target",position:r,isConnectable:n}),e?.label,H.createElement(Cr,{type:"source",position:o,isConnectable:n}));fp.displayName="DefaultNode";var Sc=b.memo(fp);const hp=({data:e,isConnectable:n,sourcePosition:r=de.Bottom})=>H.createElement(H.Fragment,null,e?.label,H.createElement(Cr,{type:"source",position:r,isConnectable:n}));hp.displayName="InputNode";var pp=b.memo(hp);const gp=({data:e,isConnectable:n,targetPosition:r=de.Top})=>H.createElement(H.Fragment,null,H.createElement(Cr,{type:"target",position:r,isConnectable:n}),e?.label);gp.displayName="OutputNode";var mp=b.memo(gp);const ol=()=>null;ol.displayName="GroupNode";const Z3=e=>({selectedNodes:e.getNodes().filter(n=>n.selected),selectedEdges:e.edges.filter(n=>n.selected).map(n=>({...n}))}),bs=e=>e.id;function K3(e,n){return St(e.selectedNodes.map(bs),n.selectedNodes.map(bs))&&St(e.selectedEdges.map(bs),n.selectedEdges.map(bs))}const yp=b.memo(({onSelectionChange:e})=>{const n=vt(),{selectedNodes:r,selectedEdges:o}=Qe(Z3,K3);return b.useEffect(()=>{const s={nodes:r,edges:o};e?.(s),n.getState().onSelectionChange.forEach(c=>c(s))},[r,o,e]),null});yp.displayName="SelectionListener";const J3=e=>!!e.onSelectionChange;function Q3({onSelectionChange:e}){const n=Qe(J3);return e||n?H.createElement(yp,{onSelectionChange:e}):null}const e6=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function li(e,n){b.useEffect(()=>{typeof e<"u"&&n(e)},[e])}function Fe(e,n,r){b.useEffect(()=>{typeof n<"u"&&r({[e]:n})},[n])}const t6=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:s,onConnectStart:c,onConnectEnd:u,onClickConnectStart:l,onClickConnectEnd:d,nodesDraggable:p,nodesConnectable:h,nodesFocusable:g,edgesFocusable:m,edgesUpdatable:x,elevateNodesOnSelect:C,minZoom:D,maxZoom:E,nodeExtent:y,onNodesChange:S,onEdgesChange:T,elementsSelectable:F,connectionMode:R,snapGrid:k,snapToGrid:j,translateExtent:Y,connectOnClick:z,defaultEdgeOptions:G,fitView:Q,fitViewOptions:J,onNodesDelete:W,onEdgesDelete:N,onNodeDrag:$,onNodeDragStart:P,onNodeDragStop:q,onSelectionDrag:ee,onSelectionDragStart:L,onSelectionDragStop:te,noPanClassName:re,nodeOrigin:oe,rfId:ce,autoPanOnConnect:ue,autoPanOnNodeDrag:ge,onError:Ae,connectionRadius:Se,isValidConnection:he,nodeDragThreshold:ve})=>{const{setNodes:Te,setEdges:Et,setDefaultNodesAndEdges:Dt,setMinZoom:Mt,setMaxZoom:Ze,setTranslateExtent:Ge,setNodeExtent:tn,reset:ze}=Qe(e6,St),fe=vt();return b.useEffect(()=>{const Ft=o?.map(Vt=>({...Vt,...G}));return Dt(r,Ft),()=>{ze()}},[]),Fe("defaultEdgeOptions",G,fe.setState),Fe("connectionMode",R,fe.setState),Fe("onConnect",s,fe.setState),Fe("onConnectStart",c,fe.setState),Fe("onConnectEnd",u,fe.setState),Fe("onClickConnectStart",l,fe.setState),Fe("onClickConnectEnd",d,fe.setState),Fe("nodesDraggable",p,fe.setState),Fe("nodesConnectable",h,fe.setState),Fe("nodesFocusable",g,fe.setState),Fe("edgesFocusable",m,fe.setState),Fe("edgesUpdatable",x,fe.setState),Fe("elementsSelectable",F,fe.setState),Fe("elevateNodesOnSelect",C,fe.setState),Fe("snapToGrid",j,fe.setState),Fe("snapGrid",k,fe.setState),Fe("onNodesChange",S,fe.setState),Fe("onEdgesChange",T,fe.setState),Fe("connectOnClick",z,fe.setState),Fe("fitViewOnInit",Q,fe.setState),Fe("fitViewOnInitOptions",J,fe.setState),Fe("onNodesDelete",W,fe.setState),Fe("onEdgesDelete",N,fe.setState),Fe("onNodeDrag",$,fe.setState),Fe("onNodeDragStart",P,fe.setState),Fe("onNodeDragStop",q,fe.setState),Fe("onSelectionDrag",ee,fe.setState),Fe("onSelectionDragStart",L,fe.setState),Fe("onSelectionDragStop",te,fe.setState),Fe("noPanClassName",re,fe.setState),Fe("nodeOrigin",oe,fe.setState),Fe("rfId",ce,fe.setState),Fe("autoPanOnConnect",ue,fe.setState),Fe("autoPanOnNodeDrag",ge,fe.setState),Fe("onError",Ae,fe.setState),Fe("connectionRadius",Se,fe.setState),Fe("isValidConnection",he,fe.setState),Fe("nodeDragThreshold",ve,fe.setState),li(e,Te),li(n,Et),li(D,Mt),li(E,Ze),li(Y,Ge),li(y,tn),null},gh={display:"none"},n6={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},vp="react-flow__node-desc",Dp="react-flow__edge-desc",r6="react-flow__aria-live",i6=e=>e.ariaLiveMessage;function o6({rfId:e}){const n=Qe(i6);return H.createElement("div",{id:`${r6}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:n6},n)}function s6({rfId:e,disableKeyboardA11y:n}){return H.createElement(H.Fragment,null,H.createElement("div",{id:`${vp}-${e}`,style:gh},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),H.createElement("div",{id:`${Dp}-${e}`,style:gh},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&H.createElement(o6,{rfId:e}))}var wo=(e=null,n={actInsideInputWithModifier:!0})=>{const[r,o]=b.useState(!1),s=b.useRef(!1),c=b.useRef(new Set([])),[u,l]=b.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),h=p.reduce((g,m)=>g.concat(...m),[]);return[p,h]}return[[],[]]},[e]);return b.useEffect(()=>{const d=typeof document<"u"?document:null,p=n?.target||d;if(e!==null){const h=x=>{if(s.current=x.ctrlKey||x.metaKey||x.shiftKey,(!s.current||s.current&&!n.actInsideInputWithModifier)&&Cc(x))return!1;const D=yh(x.code,l);c.current.add(x[D]),mh(u,c.current,!1)&&(x.preventDefault(),o(!0))},g=x=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&Cc(x))return!1;const D=yh(x.code,l);mh(u,c.current,!0)?(o(!1),c.current.clear()):c.current.delete(x[D]),x.key==="Meta"&&c.current.clear(),s.current=!1},m=()=>{c.current.clear(),o(!1)};return p?.addEventListener("keydown",h),p?.addEventListener("keyup",g),window.addEventListener("blur",m),()=>{p?.removeEventListener("keydown",h),p?.removeEventListener("keyup",g),window.removeEventListener("blur",m)}}},[e,o]),r};function mh(e,n,r){return e.filter(o=>r||o.length===n.size).some(o=>o.every(s=>n.has(s)))}function yh(e,n){return n.includes(e)?"code":"key"}function xp(e,n,r,o){const s=e.parentNode||e.parentId;if(!s)return r;const c=n.get(s),u=Di(c,o);return xp(c,n,{x:(r.x??0)+u.x,y:(r.y??0)+u.y,z:(c[rt]?.z??0)>(r.z??0)?c[rt]?.z??0:r.z??0},o)}function _p(e,n,r){e.forEach(o=>{const s=o.parentNode||o.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||r?.[o.id]){const{x:c,y:u,z:l}=xp(o,e,{...o.position,z:o[rt]?.z??0},n);o.positionAbsolute={x:c,y:u},o[rt].z=l,r?.[o.id]&&(o[rt].isParent=!0)}})}function nc(e,n,r,o){const s=new Map,c={},u=o?1e3:0;return e.forEach(l=>{const d=(hn(l.zIndex)?l.zIndex:0)+(l.selected?u:0),p=n.get(l.id),h={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},g=l.parentNode||l.parentId;g&&(c[g]=!0);const m=p?.type&&p?.type!==l.type;Object.defineProperty(h,rt,{enumerable:!1,value:{handleBounds:m?void 0:p?.[rt]?.handleBounds,z:d}}),s.set(l.id,h)}),_p(s,r,c),s}function wp(e,n={}){const{getNodes:r,width:o,height:s,minZoom:c,maxZoom:u,d3Zoom:l,d3Selection:d,fitViewOnInitDone:p,fitViewOnInit:h,nodeOrigin:g}=e(),m=n.initial&&!p&&h;if(l&&d&&(m||!n.initial)){const C=r().filter(E=>{const y=n.includeHiddenNodes?E.width&&E.height:!E.hidden;return n.nodes?.length?y&&n.nodes.some(S=>S.id===E.id):y}),D=C.every(E=>E.width&&E.height);if(C.length>0&&D){const E=rl(C,g),{x:y,y:S,zoom:T}=ap(E,o,s,n.minZoom??c,n.maxZoom??u,n.padding??.1),F=Dr.translate(y,S).scale(T);return typeof n.duration=="number"&&n.duration>0?l.transform($r(d,n.duration),F):l.transform(d,F),!0}}return!1}function a6(e,n){return e.forEach(r=>{const o=n.get(r.id);o&&n.set(o.id,{...o,[rt]:o[rt],selected:r.selected})}),new Map(n)}function u6(e,n){return n.map(r=>{const o=e.find(s=>s.id===r.id);return o&&(r.selected=o.selected),r})}function As({changedNodes:e,changedEdges:n,get:r,set:o}){const{nodeInternals:s,edges:c,onNodesChange:u,onEdgesChange:l,hasDefaultNodes:d,hasDefaultEdges:p}=r();e?.length&&(d&&o({nodeInternals:a6(e,s)}),u?.(e)),n?.length&&(p&&o({edges:u6(n,c)}),l?.(n))}const di=()=>{},c6={zoomIn:di,zoomOut:di,zoomTo:di,getZoom:()=>1,setViewport:di,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:di,fitBounds:di,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},l6=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),d6=()=>{const e=vt(),{d3Zoom:n,d3Selection:r}=Qe(l6,St);return b.useMemo(()=>r&&n?{zoomIn:s=>n.scaleBy($r(r,s?.duration),1.2),zoomOut:s=>n.scaleBy($r(r,s?.duration),1/1.2),zoomTo:(s,c)=>n.scaleTo($r(r,c?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,c)=>{const[u,l,d]=e.getState().transform,p=Dr.translate(s.x??u,s.y??l).scale(s.zoom??d);n.transform($r(r,c?.duration),p)},getViewport:()=>{const[s,c,u]=e.getState().transform;return{x:s,y:c,zoom:u}},fitView:s=>wp(e.getState,s),setCenter:(s,c,u)=>{const{width:l,height:d,maxZoom:p}=e.getState(),h=typeof u?.zoom<"u"?u.zoom:p,g=l/2-s*h,m=d/2-c*h,x=Dr.translate(g,m).scale(h);n.transform($r(r,u?.duration),x)},fitBounds:(s,c)=>{const{width:u,height:l,minZoom:d,maxZoom:p}=e.getState(),{x:h,y:g,zoom:m}=ap(s,u,l,d,p,c?.padding??.1),x=Dr.translate(h,g).scale(m);n.transform($r(r,c?.duration),x)},project:s=>{const{transform:c,snapToGrid:u,snapGrid:l}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Ac(s,c,u,l)},screenToFlowPosition:s=>{const{transform:c,snapToGrid:u,snapGrid:l,domNode:d}=e.getState();if(!d)return s;const{x:p,y:h}=d.getBoundingClientRect(),g={x:s.x-p,y:s.y-h};return Ac(g,c,u,l)},flowToScreenPosition:s=>{const{transform:c,domNode:u}=e.getState();if(!u)return s;const{x:l,y:d}=u.getBoundingClientRect(),p=ip(s,c);return{x:p.x+l,y:p.y+d}},viewportInitialized:!0}:c6,[n,r])};function sl(){const e=d6(),n=vt(),r=b.useCallback(()=>n.getState().getNodes().map(D=>({...D})),[]),o=b.useCallback(D=>n.getState().nodeInternals.get(D),[]),s=b.useCallback(()=>{const{edges:D=[]}=n.getState();return D.map(E=>({...E}))},[]),c=b.useCallback(D=>{const{edges:E=[]}=n.getState();return E.find(y=>y.id===D)},[]),u=b.useCallback(D=>{const{getNodes:E,setNodes:y,hasDefaultNodes:S,onNodesChange:T}=n.getState(),F=E(),R=typeof D=="function"?D(F):D;if(S)y(R);else if(T){const k=R.length===0?F.map(j=>({type:"remove",id:j.id})):R.map(j=>({item:j,type:"reset"}));T(k)}},[]),l=b.useCallback(D=>{const{edges:E=[],setEdges:y,hasDefaultEdges:S,onEdgesChange:T}=n.getState(),F=typeof D=="function"?D(E):D;if(S)y(F);else if(T){const R=F.length===0?E.map(k=>({type:"remove",id:k.id})):F.map(k=>({item:k,type:"reset"}));T(R)}},[]),d=b.useCallback(D=>{const E=Array.isArray(D)?D:[D],{getNodes:y,setNodes:S,hasDefaultNodes:T,onNodesChange:F}=n.getState();if(T){const k=[...y(),...E];S(k)}else if(F){const R=E.map(k=>({item:k,type:"add"}));F(R)}},[]),p=b.useCallback(D=>{const E=Array.isArray(D)?D:[D],{edges:y=[],setEdges:S,hasDefaultEdges:T,onEdgesChange:F}=n.getState();if(T)S([...y,...E]);else if(F){const R=E.map(k=>({item:k,type:"add"}));F(R)}},[]),h=b.useCallback(()=>{const{getNodes:D,edges:E=[],transform:y}=n.getState(),[S,T,F]=y;return{nodes:D().map(R=>({...R})),edges:E.map(R=>({...R})),viewport:{x:S,y:T,zoom:F}}},[]),g=b.useCallback(({nodes:D,edges:E})=>{const{nodeInternals:y,getNodes:S,edges:T,hasDefaultNodes:F,hasDefaultEdges:R,onNodesDelete:k,onEdgesDelete:j,onNodesChange:Y,onEdgesChange:z}=n.getState(),G=(D||[]).map($=>$.id),Q=(E||[]).map($=>$.id),J=S().reduce(($,P)=>{const q=P.parentNode||P.parentId,ee=!G.includes(P.id)&&q&&$.find(te=>te.id===q);return(typeof P.deletable=="boolean"?P.deletable:!0)&&(G.includes(P.id)||ee)&&$.push(P),$},[]),W=T.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),N=W.filter($=>Q.includes($.id));if(J||N){const $=sp(J,W),P=[...N,...$],q=P.reduce((ee,L)=>(ee.includes(L.id)||ee.push(L.id),ee),[]);if((R||F)&&(R&&n.setState({edges:T.filter(ee=>!q.includes(ee.id))}),F&&(J.forEach(ee=>{y.delete(ee.id)}),n.setState({nodeInternals:new Map(y)}))),q.length>0&&(j?.(P),z&&z(q.map(ee=>({id:ee,type:"remove"})))),J.length>0&&(k?.(J),Y)){const ee=J.map(L=>({id:L.id,type:"remove"}));Y(ee)}}},[]),m=b.useCallback(D=>{const E=T3(D),y=E?null:n.getState().nodeInternals.get(D.id);return!E&&!y?[null,null,E]:[E?D:uh(y),y,E]},[]),x=b.useCallback((D,E=!0,y)=>{const[S,T,F]=m(D);return S?(y||n.getState().getNodes()).filter(R=>{if(!F&&(R.id===T.id||!R.positionAbsolute))return!1;const k=uh(R),j=wc(k,S);return E&&j>0||j>=S.width*S.height}):[]},[]),C=b.useCallback((D,E,y=!0)=>{const[S]=m(D);if(!S)return!1;const T=wc(S,E);return y&&T>0||T>=S.width*S.height},[]);return b.useMemo(()=>({...e,getNodes:r,getNode:o,getEdges:s,getEdge:c,setNodes:u,setEdges:l,addNodes:d,addEdges:p,toObject:h,deleteElements:g,getIntersectingNodes:x,isNodeIntersecting:C}),[e,r,o,s,c,u,l,d,p,h,g,x,C])}const f6={actInsideInputWithModifier:!1};var h6=({deleteKeyCode:e,multiSelectionKeyCode:n})=>{const r=vt(),{deleteElements:o}=sl(),s=wo(e,f6),c=wo(n);b.useEffect(()=>{if(s){const{edges:u,getNodes:l}=r.getState(),d=l().filter(h=>h.selected),p=u.filter(h=>h.selected);o({nodes:d,edges:p}),r.setState({nodesSelectionActive:!1})}},[s]),b.useEffect(()=>{r.setState({multiSelectionActive:c})},[c])};function p6(e){const n=vt();b.useEffect(()=>{let r;const o=()=>{if(!e.current)return;const s=Xc(e.current);(s.height===0||s.width===0)&&n.getState().onError?.("004",ir.error004()),n.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(r=new ResizeObserver(()=>o()),r.observe(e.current)),()=>{window.removeEventListener("resize",o),r&&e.current&&r.unobserve(e.current)}},[])}const al={position:"absolute",width:"100%",height:"100%",top:0,left:0},g6=(e,n)=>e.x!==n.x||e.y!==n.y||e.zoom!==n.k,Ss=e=>({x:e.x,y:e.y,zoom:e.k}),fi=(e,n)=>e.target.closest(`.${n}`),vh=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),Dh=e=>{const n=e.ctrlKey&&Zs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n},m6=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),y6=({onMove:e,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:c=!0,panOnScroll:u=!1,panOnScrollSpeed:l=.5,panOnScrollMode:d=Hr.Free,zoomOnDoubleClick:p=!0,elementsSelectable:h,panOnDrag:g=!0,defaultViewport:m,translateExtent:x,minZoom:C,maxZoom:D,zoomActivationKeyCode:E,preventScrolling:y=!0,children:S,noWheelClassName:T,noPanClassName:F})=>{const R=b.useRef(),k=vt(),j=b.useRef(!1),Y=b.useRef(!1),z=b.useRef(null),G=b.useRef({x:0,y:0,zoom:0}),{d3Zoom:Q,d3Selection:J,d3ZoomHandler:W,userSelectionActive:N}=Qe(m6,St),$=wo(E),P=b.useRef(0),q=b.useRef(!1),ee=b.useRef();return p6(z),b.useEffect(()=>{if(z.current){const L=z.current.getBoundingClientRect(),te=w3().scaleExtent([C,D]).translateExtent(x),re=En(z.current).call(te),oe=Dr.translate(m.x,m.y).scale(Ei(m.zoom,C,D)),ce=[[0,0],[L.width,L.height]],ue=te.constrain()(oe,ce,x);te.transform(re,ue),te.wheelDelta(Dh),k.setState({d3Zoom:te,d3Selection:re,d3ZoomHandler:re.on("wheel.zoom"),transform:[ue.x,ue.y,ue.k],domNode:z.current.closest(".react-flow")})}},[]),b.useEffect(()=>{J&&Q&&(u&&!$&&!N?J.on("wheel.zoom",L=>{if(fi(L,T))return!1;L.preventDefault(),L.stopImmediatePropagation();const te=J.property("__zoom").k||1;if(L.ctrlKey&&c){const he=On(L),ve=Dh(L),Te=te*Math.pow(2,ve);Q.scaleTo(J,Te,he,L);return}const re=L.deltaMode===1?20:1;let oe=d===Hr.Vertical?0:L.deltaX*re,ce=d===Hr.Horizontal?0:L.deltaY*re;!Zs()&&L.shiftKey&&d!==Hr.Vertical&&(oe=L.deltaY*re,ce=0),Q.translateBy(J,-(oe/te)*l,-(ce/te)*l,{internal:!0});const ue=Ss(J.property("__zoom")),{onViewportChangeStart:ge,onViewportChange:Ae,onViewportChangeEnd:Se}=k.getState();clearTimeout(ee.current),q.current||(q.current=!0,n?.(L,ue),ge?.(ue)),q.current&&(e?.(L,ue),Ae?.(ue),ee.current=setTimeout(()=>{r?.(L,ue),Se?.(ue),q.current=!1},150))},{passive:!1}):typeof W<"u"&&J.on("wheel.zoom",function(L,te){if(!y&&L.type==="wheel"&&!L.ctrlKey||fi(L,T))return null;L.preventDefault(),W.call(this,L,te)},{passive:!1}))},[N,u,d,J,Q,W,$,c,y,T,n,e,r]),b.useEffect(()=>{Q&&Q.on("start",L=>{if(!L.sourceEvent||L.sourceEvent.internal)return null;P.current=L.sourceEvent?.button;const{onViewportChangeStart:te}=k.getState(),re=Ss(L.transform);j.current=!0,G.current=re,L.sourceEvent?.type==="mousedown"&&k.setState({paneDragging:!0}),te?.(re),n?.(L.sourceEvent,re)})},[Q,n]),b.useEffect(()=>{Q&&(N&&!j.current?Q.on("zoom",null):N||Q.on("zoom",L=>{const{onViewportChange:te}=k.getState();if(k.setState({transform:[L.transform.x,L.transform.y,L.transform.k]}),Y.current=!!(o&&vh(g,P.current??0)),(e||te)&&!L.sourceEvent?.internal){const re=Ss(L.transform);te?.(re),e?.(L.sourceEvent,re)}}))},[N,Q,e,g,o]),b.useEffect(()=>{Q&&Q.on("end",L=>{if(!L.sourceEvent||L.sourceEvent.internal)return null;const{onViewportChangeEnd:te}=k.getState();if(j.current=!1,k.setState({paneDragging:!1}),o&&vh(g,P.current??0)&&!Y.current&&o(L.sourceEvent),Y.current=!1,(r||te)&&g6(G.current,L.transform)){const re=Ss(L.transform);G.current=re,clearTimeout(R.current),R.current=setTimeout(()=>{te?.(re),r?.(L.sourceEvent,re)},u?150:0)}})},[Q,u,g,r,o]),b.useEffect(()=>{Q&&Q.filter(L=>{const te=$||s,re=c&&L.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&L.button===1&&L.type==="mousedown"&&(fi(L,"react-flow__node")||fi(L,"react-flow__edge")))return!0;if(!g&&!te&&!u&&!p&&!c||N||!p&&L.type==="dblclick"||fi(L,T)&&L.type==="wheel"||fi(L,F)&&(L.type!=="wheel"||u&&L.type==="wheel"&&!$)||!c&&L.ctrlKey&&L.type==="wheel"||!te&&!u&&!re&&L.type==="wheel"||!g&&(L.type==="mousedown"||L.type==="touchstart")||Array.isArray(g)&&!g.includes(L.button)&&L.type==="mousedown")return!1;const oe=Array.isArray(g)&&g.includes(L.button)||!L.button||L.button<=1;return(!L.ctrlKey||L.type==="wheel")&&oe})},[N,Q,s,c,u,p,g,h,$]),H.createElement("div",{className:"react-flow__renderer",ref:z,style:al},S)},v6=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function D6(){const{userSelectionActive:e,userSelectionRect:n}=Qe(v6,St);return e&&n?H.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}function xh(e,n){const r=n.parentNode||n.parentId,o=e.find(s=>s.id===r);if(o){const s=n.position.x+n.width-o.width,c=n.position.y+n.height-o.height;if(s>0||c>0||n.position.x<0||n.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,s>0&&(o.style.width+=s),c>0&&(o.style.height+=c),n.position.x<0){const u=Math.abs(n.position.x);o.position.x=o.position.x-u,o.style.width+=u,n.position.x=0}if(n.position.y<0){const u=Math.abs(n.position.y);o.position.y=o.position.y-u,o.style.height+=u,n.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function Cp(e,n){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const r=e.filter(o=>o.type==="add").map(o=>o.item);return n.reduce((o,s)=>{const c=e.filter(l=>l.id===s.id);if(c.length===0)return o.push(s),o;const u={...s};for(const l of c)if(l)switch(l.type){case"select":{u.selected=l.selected;break}case"position":{typeof l.position<"u"&&(u.position=l.position),typeof l.positionAbsolute<"u"&&(u.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(u.dragging=l.dragging),u.expandParent&&xh(o,u);break}case"dimensions":{typeof l.dimensions<"u"&&(u.width=l.dimensions.width,u.height=l.dimensions.height),typeof l.updateStyle<"u"&&(u.style={...u.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(u.resizing=l.resizing),u.expandParent&&xh(o,u);break}case"remove":return o}return o.push(u),o},r)}function Ep(e,n){return Cp(e,n)}function x6(e,n){return Cp(e,n)}const yr=(e,n)=>({id:e,type:"select",selected:n});function gi(e,n){return e.reduce((r,o)=>{const s=n.includes(o.id);return!o.selected&&s?(o.selected=!0,r.push(yr(o.id,!0))):o.selected&&!s&&(o.selected=!1,r.push(yr(o.id,!1))),r},[])}const rc=(e,n)=>r=>{r.target===n.current&&e?.(r)},_6=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),bp=b.memo(({isSelecting:e,selectionMode:n=bi.Full,panOnDrag:r,onSelectionStart:o,onSelectionEnd:s,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:l,onPaneMouseEnter:d,onPaneMouseMove:p,onPaneMouseLeave:h,children:g})=>{const m=b.useRef(null),x=vt(),C=b.useRef(0),D=b.useRef(0),E=b.useRef(),{userSelectionActive:y,elementsSelectable:S,dragging:T}=Qe(_6,St),F=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),C.current=0,D.current=0},R=W=>{c?.(W),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},k=W=>{if(Array.isArray(r)&&r?.includes(2)){W.preventDefault();return}u?.(W)},j=l?W=>l(W):void 0,Y=W=>{const{resetSelectedElements:N,domNode:$}=x.getState();if(E.current=$?.getBoundingClientRect(),!S||!e||W.button!==0||W.target!==m.current||!E.current)return;const{x:P,y:q}=xr(W,E.current);N(),x.setState({userSelectionRect:{width:0,height:0,startX:P,startY:q,x:P,y:q}}),o?.(W)},z=W=>{const{userSelectionRect:N,nodeInternals:$,edges:P,transform:q,onNodesChange:ee,onEdgesChange:L,nodeOrigin:te,getNodes:re}=x.getState();if(!e||!E.current||!N)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const oe=xr(W,E.current),ce=N.startX??0,ue=N.startY??0,ge={...N,x:oe.x<ce?oe.x:ce,y:oe.y<ue?oe.y:ue,width:Math.abs(oe.x-ce),height:Math.abs(oe.y-ue)},Ae=re(),Se=op($,ge,q,n===bi.Partial,!0,te),he=sp(Se,P).map(Te=>Te.id),ve=Se.map(Te=>Te.id);if(C.current!==ve.length){C.current=ve.length;const Te=gi(Ae,ve);Te.length&&ee?.(Te)}if(D.current!==he.length){D.current=he.length;const Te=gi(P,he);Te.length&&L?.(Te)}x.setState({userSelectionRect:ge})},G=W=>{if(W.button!==0)return;const{userSelectionRect:N}=x.getState();!y&&N&&W.target===m.current&&R?.(W),x.setState({nodesSelectionActive:C.current>0}),F(),s?.(W)},Q=W=>{y&&(x.setState({nodesSelectionActive:C.current>0}),s?.(W)),F()},J=S&&(e||y);return H.createElement("div",{className:Rt(["react-flow__pane",{dragging:T,selection:e}]),onClick:J?void 0:rc(R,m),onContextMenu:rc(k,m),onWheel:rc(j,m),onMouseEnter:J?void 0:d,onMouseDown:J?Y:void 0,onMouseMove:J?z:p,onMouseUp:J?G:void 0,onMouseLeave:J?Q:h,ref:m,style:al},g,H.createElement(D6,null))});bp.displayName="Pane";function Ap(e,n){const r=e.parentNode||e.parentId;if(!r)return!1;const o=n.get(r);return o?o.selected?!0:Ap(o,n):!1}function _h(e,n,r){let o=e;do{if(o?.matches(n))return!0;if(o===r.current)return!1;o=o.parentElement}while(o);return!1}function w6(e,n,r,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||s.parentId||!Ap(s,e))&&(s.draggable||n&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(s.positionAbsolute?.x??0),y:r.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function C6(e,n){return!n||n==="parent"?n:[n[0],[n[1][0]-(e.width||0),n[1][1]-(e.height||0)]]}function Sp(e,n,r,o,s=[0,0],c){const u=C6(e,e.extent||o);let l=u;const d=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(d&&e.width&&e.height){const g=r.get(d),{x:m,y:x}=Di(g,s).positionAbsolute;l=g&&hn(m)&&hn(x)&&hn(g.width)&&hn(g.height)?[[m+e.width*s[0],x+e.height*s[1]],[m+g.width-e.width+e.width*s[0],x+g.height-e.height+e.height*s[1]]]:l}else c?.("005",ir.error005()),l=u;else if(e.extent&&d&&e.extent!=="parent"){const g=r.get(d),{x:m,y:x}=Di(g,s).positionAbsolute;l=[[e.extent[0][0]+m,e.extent[0][1]+x],[e.extent[1][0]+m,e.extent[1][1]+x]]}let p={x:0,y:0};if(d){const g=r.get(d);p=Di(g,s).positionAbsolute}const h=l&&l!=="parent"?Zc(n,l):n;return{position:{x:h.x-p.x,y:h.y-p.y},positionAbsolute:h}}function ic({nodeId:e,dragItems:n,nodeInternals:r}){const o=n.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const wh=(e,n,r,o)=>{const s=n.querySelectorAll(e);if(!s||!s.length)return null;const c=Array.from(s),u=n.getBoundingClientRect(),l={x:u.width*o[0],y:u.height*o[1]};return c.map(d=>{const p=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(p.left-u.left-l.x)/r,y:(p.top-u.top-l.y)/r,...Xc(d)}})};function to(e,n,r){return r===void 0?r:o=>{const s=n().nodeInternals.get(e);s&&r(o,{...s})}}function Fc({id:e,store:n,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:c,multiSelectionActive:u,nodeInternals:l,onError:d}=n.getState(),p=l.get(e);if(!p){d?.("012",ir.error012(e));return}n.setState({nodesSelectionActive:!1}),p.selected?(r||p.selected&&u)&&(c({nodes:[p],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([e])}function E6(){const e=vt();return b.useCallback(({sourceEvent:r})=>{const{transform:o,snapGrid:s,snapToGrid:c}=e.getState(),u=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,d={x:(u-o[0])/o[2],y:(l-o[1])/o[2]};return{xSnapped:c?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:c?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function oc(e){return(n,r,o)=>e?.(n,o)}function Fp({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:o,nodeId:s,isSelectable:c,selectNodesOnDrag:u}){const l=vt(),[d,p]=b.useState(!1),h=b.useRef([]),g=b.useRef({x:null,y:null}),m=b.useRef(0),x=b.useRef(null),C=b.useRef({x:0,y:0}),D=b.useRef(null),E=b.useRef(!1),y=b.useRef(!1),S=b.useRef(!1),T=E6();return b.useEffect(()=>{if(e?.current){const F=En(e.current),R=({x:Y,y:z})=>{const{nodeInternals:G,onNodeDrag:Q,onSelectionDrag:J,updateNodePositions:W,nodeExtent:N,snapGrid:$,snapToGrid:P,nodeOrigin:q,onError:ee}=l.getState();g.current={x:Y,y:z};let L=!1,te={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&N){const oe=rl(h.current,q);te=Kc(oe)}if(h.current=h.current.map(oe=>{const ce={x:Y-oe.distance.x,y:z-oe.distance.y};P&&(ce.x=$[0]*Math.round(ce.x/$[0]),ce.y=$[1]*Math.round(ce.y/$[1]));const ue=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];h.current.length>1&&N&&!oe.extent&&(ue[0][0]=oe.positionAbsolute.x-te.x+N[0][0],ue[1][0]=oe.positionAbsolute.x+(oe.width??0)-te.x2+N[1][0],ue[0][1]=oe.positionAbsolute.y-te.y+N[0][1],ue[1][1]=oe.positionAbsolute.y+(oe.height??0)-te.y2+N[1][1]);const ge=Sp(oe,ce,G,ue,q,ee);return L=L||oe.position.x!==ge.position.x||oe.position.y!==ge.position.y,oe.position=ge.position,oe.positionAbsolute=ge.positionAbsolute,oe}),!L)return;W(h.current,!0,!0),p(!0);const re=s?Q:oc(J);if(re&&D.current){const[oe,ce]=ic({nodeId:s,dragItems:h.current,nodeInternals:G});re(D.current,oe,ce)}},k=()=>{if(!x.current)return;const[Y,z]=Z0(C.current,x.current);if(Y!==0||z!==0){const{transform:G,panBy:Q}=l.getState();g.current.x=(g.current.x??0)-Y/G[2],g.current.y=(g.current.y??0)-z/G[2],Q({x:Y,y:z})&&R(g.current)}m.current=requestAnimationFrame(k)},j=Y=>{const{nodeInternals:z,multiSelectionActive:G,nodesDraggable:Q,unselectNodesAndEdges:J,onNodeDragStart:W,onSelectionDragStart:N}=l.getState();y.current=!0;const $=s?W:oc(N);(!u||!c)&&!G&&s&&(z.get(s)?.selected||J()),s&&c&&u&&Fc({id:s,store:l,nodeRef:e});const P=T(Y);if(g.current=P,h.current=w6(z,Q,P,s),$&&h.current){const[q,ee]=ic({nodeId:s,dragItems:h.current,nodeInternals:z});$(Y.sourceEvent,q,ee)}};if(n)F.on(".drag",null);else{const Y=IE().on("start",z=>{const{domNode:G,nodeDragThreshold:Q}=l.getState();Q===0&&j(z),S.current=!1;const J=T(z);g.current=J,x.current=G?.getBoundingClientRect()||null,C.current=xr(z.sourceEvent,x.current)}).on("drag",z=>{const G=T(z),{autoPanOnNodeDrag:Q,nodeDragThreshold:J}=l.getState();if(z.sourceEvent.type==="touchmove"&&z.sourceEvent.touches.length>1&&(S.current=!0),!S.current){if(!E.current&&y.current&&Q&&(E.current=!0,k()),!y.current){const W=G.xSnapped-(g?.current?.x??0),N=G.ySnapped-(g?.current?.y??0);Math.sqrt(W*W+N*N)>J&&j(z)}(g.current.x!==G.xSnapped||g.current.y!==G.ySnapped)&&h.current&&y.current&&(D.current=z.sourceEvent,C.current=xr(z.sourceEvent,x.current),R(G))}}).on("end",z=>{if(!(!y.current||S.current)&&(p(!1),E.current=!1,y.current=!1,cancelAnimationFrame(m.current),h.current)){const{updateNodePositions:G,nodeInternals:Q,onNodeDragStop:J,onSelectionDragStop:W}=l.getState(),N=s?J:oc(W);if(G(h.current,!1,!1),N){const[$,P]=ic({nodeId:s,dragItems:h.current,nodeInternals:Q});N(z.sourceEvent,$,P)}}}).filter(z=>{const G=z.target;return!z.button&&(!r||!_h(G,`.${r}`,e))&&(!o||_h(G,o,e))});return F.call(Y),()=>{F.on(".drag",null)}}}},[e,n,r,o,c,l,s,u,T]),d}function Np(){const e=vt();return b.useCallback(r=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:c,getNodes:u,snapToGrid:l,snapGrid:d,onError:p,nodesDraggable:h}=e.getState(),g=u().filter(S=>S.selected&&(S.draggable||h&&typeof S.draggable>"u")),m=l?d[0]:5,x=l?d[1]:5,C=r.isShiftPressed?4:1,D=r.x*m*C,E=r.y*x*C,y=g.map(S=>{if(S.positionAbsolute){const T={x:S.positionAbsolute.x+D,y:S.positionAbsolute.y+E};l&&(T.x=d[0]*Math.round(T.x/d[0]),T.y=d[1]*Math.round(T.y/d[1]));const{positionAbsolute:F,position:R}=Sp(S,T,o,s,void 0,p);S.position=R,S.positionAbsolute=F}return S});c(y,!0,!1)},[])}const xi={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var no=e=>{const n=({id:r,type:o,data:s,xPos:c,yPos:u,xPosOrigin:l,yPosOrigin:d,selected:p,onClick:h,onMouseEnter:g,onMouseMove:m,onMouseLeave:x,onContextMenu:C,onDoubleClick:D,style:E,className:y,isDraggable:S,isSelectable:T,isConnectable:F,isFocusable:R,selectNodesOnDrag:k,sourcePosition:j,targetPosition:Y,hidden:z,resizeObserver:G,dragHandle:Q,zIndex:J,isParent:W,noDragClassName:N,noPanClassName:$,initialized:P,disableKeyboardA11y:q,ariaLabel:ee,rfId:L,hasHandleBounds:te})=>{const re=vt(),oe=b.useRef(null),ce=b.useRef(null),ue=b.useRef(j),ge=b.useRef(Y),Ae=b.useRef(o),Se=T||S||h||g||m||x,he=Np(),ve=to(r,re.getState,g),Te=to(r,re.getState,m),Et=to(r,re.getState,x),Dt=to(r,re.getState,C),Mt=to(r,re.getState,D),Ze=ze=>{const{nodeDragThreshold:fe}=re.getState();if(T&&(!k||!S||fe>0)&&Fc({id:r,store:re,nodeRef:oe}),h){const Ft=re.getState().nodeInternals.get(r);Ft&&h(ze,{...Ft})}},Ge=ze=>{if(!Cc(ze)&&!q)if(J0.includes(ze.key)&&T){const fe=ze.key==="Escape";Fc({id:r,store:re,unselect:fe,nodeRef:oe})}else S&&p&&Object.prototype.hasOwnProperty.call(xi,ze.key)&&(re.setState({ariaLiveMessage:`Moved selected node ${ze.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~c}, y: ${~~u}`}),he({x:xi[ze.key].x,y:xi[ze.key].y,isShiftPressed:ze.shiftKey}))};b.useEffect(()=>()=>{ce.current&&(G?.unobserve(ce.current),ce.current=null)},[]),b.useEffect(()=>{if(oe.current&&!z){const ze=oe.current;(!P||!te||ce.current!==ze)&&(ce.current&&G?.unobserve(ce.current),G?.observe(ze),ce.current=ze)}},[z,P,te]),b.useEffect(()=>{const ze=Ae.current!==o,fe=ue.current!==j,Ft=ge.current!==Y;oe.current&&(ze||fe||Ft)&&(ze&&(Ae.current=o),fe&&(ue.current=j),Ft&&(ge.current=Y),re.getState().updateNodeDimensions([{id:r,nodeElement:oe.current,forceUpdate:!0}]))},[r,o,j,Y]);const tn=Fp({nodeRef:oe,disabled:z||!S,noDragClassName:N,handleSelector:Q,nodeId:r,isSelectable:T,selectNodesOnDrag:k});return z?null:H.createElement("div",{className:Rt(["react-flow__node",`react-flow__node-${o}`,{[$]:S},y,{selected:p,selectable:T,parent:W,dragging:tn}]),ref:oe,style:{zIndex:J,transform:`translate(${l}px,${d}px)`,pointerEvents:Se?"all":"none",visibility:P?"visible":"hidden",...E},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ve,onMouseMove:Te,onMouseLeave:Et,onContextMenu:Dt,onClick:Ze,onDoubleClick:Mt,onKeyDown:R?Ge:void 0,tabIndex:R?0:void 0,role:R?"button":void 0,"aria-describedby":q?void 0:`${vp}-${L}`,"aria-label":ee},H.createElement(P3,{value:r},H.createElement(e,{id:r,data:s,type:o,xPos:c,yPos:u,selected:p,isConnectable:F,sourcePosition:j,targetPosition:Y,dragging:tn,dragHandle:Q,zIndex:J})))};return n.displayName="NodeWrapper",b.memo(n)};const b6=e=>{const n=e.getNodes().filter(r=>r.selected);return{...rl(n,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function A6({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const o=vt(),{width:s,height:c,x:u,y:l,transformString:d,userSelectionActive:p}=Qe(b6,St),h=Np(),g=b.useRef(null);if(b.useEffect(()=>{r||g.current?.focus({preventScroll:!0})},[r]),Fp({nodeRef:g}),p||!s||!c)return null;const m=e?C=>{const D=o.getState().getNodes().filter(E=>E.selected);e(C,D)}:void 0,x=C=>{Object.prototype.hasOwnProperty.call(xi,C.key)&&h({x:xi[C.key].x,y:xi[C.key].y,isShiftPressed:C.shiftKey})};return H.createElement("div",{className:Rt(["react-flow__nodesselection","react-flow__container",n]),style:{transform:d}},H.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:x,style:{width:s,height:c,top:l,left:u}}))}var S6=b.memo(A6);const F6=e=>e.nodesSelectionActive,Tp=({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:u,deleteKeyCode:l,onMove:d,onMoveStart:p,onMoveEnd:h,selectionKeyCode:g,selectionOnDrag:m,selectionMode:x,onSelectionStart:C,onSelectionEnd:D,multiSelectionKeyCode:E,panActivationKeyCode:y,zoomActivationKeyCode:S,elementsSelectable:T,zoomOnScroll:F,zoomOnPinch:R,panOnScroll:k,panOnScrollSpeed:j,panOnScrollMode:Y,zoomOnDoubleClick:z,panOnDrag:G,defaultViewport:Q,translateExtent:J,minZoom:W,maxZoom:N,preventScrolling:$,onSelectionContextMenu:P,noWheelClassName:q,noPanClassName:ee,disableKeyboardA11y:L})=>{const te=Qe(F6),re=wo(g),oe=wo(y),ce=oe||G,ue=oe||k,ge=re||m&&ce!==!0;return h6({deleteKeyCode:l,multiSelectionKeyCode:E}),H.createElement(y6,{onMove:d,onMoveStart:p,onMoveEnd:h,onPaneContextMenu:c,elementsSelectable:T,zoomOnScroll:F,zoomOnPinch:R,panOnScroll:ue,panOnScrollSpeed:j,panOnScrollMode:Y,zoomOnDoubleClick:z,panOnDrag:!re&&ce,defaultViewport:Q,translateExtent:J,minZoom:W,maxZoom:N,zoomActivationKeyCode:S,preventScrolling:$,noWheelClassName:q,noPanClassName:ee},H.createElement(bp,{onSelectionStart:C,onSelectionEnd:D,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:c,onPaneScroll:u,panOnDrag:ce,isSelecting:!!ge,selectionMode:x},e,te&&H.createElement(S6,{onSelectionContextMenu:P,noPanClassName:ee,disableKeyboardA11y:L})))};Tp.displayName="FlowRenderer";var N6=b.memo(Tp);function T6(e){return Qe(b.useCallback(r=>e?op(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function B6(e){const n={input:no(e.input||pp),default:no(e.default||Sc),output:no(e.output||mp),group:no(e.group||ol)},r={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,c)=>(s[c]=no(e[c]||Sc),s),r);return{...n,...o}}const I6=({x:e,y:n,width:r,height:o,origin:s})=>!r||!o?{x:e,y:n}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:n}:{x:e-r*s[0],y:n-o*s[1]},R6=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Bp=e=>{const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:c,onError:u}=Qe(R6,St),l=T6(e.onlyRenderVisibleElements),d=b.useRef(),p=b.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(g=>{const m=g.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));c(m)});return d.current=h,h},[]);return b.useEffect(()=>()=>{d?.current?.disconnect()},[]),H.createElement("div",{className:"react-flow__nodes",style:al},l.map(h=>{let g=h.type||"default";e.nodeTypes[g]||(u?.("003",ir.error003(g)),g="default");const m=e.nodeTypes[g]||e.nodeTypes.default,x=!!(h.draggable||n&&typeof h.draggable>"u"),C=!!(h.selectable||s&&typeof h.selectable>"u"),D=!!(h.connectable||r&&typeof h.connectable>"u"),E=!!(h.focusable||o&&typeof h.focusable>"u"),y=e.nodeExtent?Zc(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,S=y?.x??0,T=y?.y??0,F=I6({x:S,y:T,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return H.createElement(m,{key:h.id,id:h.id,className:h.className,style:h.style,type:g,data:h.data,sourcePosition:h.sourcePosition||de.Bottom,targetPosition:h.targetPosition||de.Top,hidden:h.hidden,xPos:S,yPos:T,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:x,isSelectable:C,isConnectable:D,isFocusable:E,resizeObserver:p,dragHandle:h.dragHandle,zIndex:h[rt]?.z??0,isParent:!!h[rt]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!h[rt]?.handleBounds})}))};Bp.displayName="NodeRenderer";var M6=b.memo(Bp);const z6=(e,n,r)=>r===de.Left?e-n:r===de.Right?e+n:e,O6=(e,n,r)=>r===de.Top?e-n:r===de.Bottom?e+n:e,Ch="react-flow__edgeupdater",Eh=({position:e,centerX:n,centerY:r,radius:o=10,onMouseDown:s,onMouseEnter:c,onMouseOut:u,type:l})=>H.createElement("circle",{onMouseDown:s,onMouseEnter:c,onMouseOut:u,className:Rt([Ch,`${Ch}-${l}`]),cx:z6(n,o,e),cy:O6(r,o,e),r:o,stroke:"transparent",fill:"transparent"}),P6=()=>!0;var hi=e=>{const n=({id:r,className:o,type:s,data:c,onClick:u,onEdgeDoubleClick:l,selected:d,animated:p,label:h,labelStyle:g,labelShowBg:m,labelBgStyle:x,labelBgPadding:C,labelBgBorderRadius:D,style:E,source:y,target:S,sourceX:T,sourceY:F,targetX:R,targetY:k,sourcePosition:j,targetPosition:Y,elementsSelectable:z,hidden:G,sourceHandleId:Q,targetHandleId:J,onContextMenu:W,onMouseEnter:N,onMouseMove:$,onMouseLeave:P,reconnectRadius:q,onReconnect:ee,onReconnectStart:L,onReconnectEnd:te,markerEnd:re,markerStart:oe,rfId:ce,ariaLabel:ue,isFocusable:ge,isReconnectable:Ae,pathOptions:Se,interactionWidth:he,disableKeyboardA11y:ve})=>{const Te=b.useRef(null),[Et,Dt]=b.useState(!1),[Mt,Ze]=b.useState(!1),Ge=vt(),tn=b.useMemo(()=>`url('#${bc(oe,ce)}')`,[oe,ce]),ze=b.useMemo(()=>`url('#${bc(re,ce)}')`,[re,ce]);if(G)return null;const fe=at=>{const{edges:zt,addSelectedEdges:mn,unselectNodesAndEdges:yn,multiSelectionActive:Bn}=Ge.getState(),Ot=zt.find(vn=>vn.id===r);Ot&&(z&&(Ge.setState({nodesSelectionActive:!1}),Ot.selected&&Bn?(yn({nodes:[],edges:[Ot]}),Te.current?.blur()):mn([r])),u&&u(at,Ot))},Ft=eo(r,Ge.getState,l),Vt=eo(r,Ge.getState,W),xt=eo(r,Ge.getState,N),nn=eo(r,Ge.getState,$),pn=eo(r,Ge.getState,P),gn=(at,zt)=>{if(at.button!==0)return;const{edges:mn,isValidConnection:yn}=Ge.getState(),Bn=zt?S:y,Ot=(zt?J:Q)||null,vn=zt?"target":"source",Ni=yn||P6,Ti=zt,br=mn.find(Ln=>Ln.id===r);Ze(!0),L?.(at,br,vn);const Yr=Ln=>{Ze(!1),te?.(Ln,br,vn)};lp({event:at,handleId:Ot,nodeId:Bn,onConnect:Ln=>ee?.(br,Ln),isTarget:Ti,getState:Ge.getState,setState:Ge.setState,isValidConnection:Ni,edgeUpdaterType:vn,onReconnectEnd:Yr})},rn=at=>gn(at,!0),kn=at=>gn(at,!1),qt=()=>Dt(!0),Gt=()=>Dt(!1),Tn=!z&&!u,Hn=at=>{if(!ve&&J0.includes(at.key)&&z){const{unselectNodesAndEdges:zt,addSelectedEdges:mn,edges:yn}=Ge.getState();at.key==="Escape"?(Te.current?.blur(),zt({edges:[yn.find(Ot=>Ot.id===r)]})):mn([r])}};return H.createElement("g",{className:Rt(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:d,animated:p,inactive:Tn,updating:Et}]),onClick:fe,onDoubleClick:Ft,onContextMenu:Vt,onMouseEnter:xt,onMouseMove:nn,onMouseLeave:pn,onKeyDown:ge?Hn:void 0,tabIndex:ge?0:void 0,role:ge?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":ue===null?void 0:ue||`Edge from ${y} to ${S}`,"aria-describedby":ge?`${Dp}-${ce}`:void 0,ref:Te},!Mt&&H.createElement(e,{id:r,source:y,target:S,selected:d,animated:p,label:h,labelStyle:g,labelShowBg:m,labelBgStyle:x,labelBgPadding:C,labelBgBorderRadius:D,data:c,style:E,sourceX:T,sourceY:F,targetX:R,targetY:k,sourcePosition:j,targetPosition:Y,sourceHandleId:Q,targetHandleId:J,markerStart:tn,markerEnd:ze,pathOptions:Se,interactionWidth:he}),Ae&&H.createElement(H.Fragment,null,(Ae==="source"||Ae===!0)&&H.createElement(Eh,{position:j,centerX:T,centerY:F,radius:q,onMouseDown:rn,onMouseEnter:qt,onMouseOut:Gt,type:"source"}),(Ae==="target"||Ae===!0)&&H.createElement(Eh,{position:Y,centerX:R,centerY:k,radius:q,onMouseDown:kn,onMouseEnter:qt,onMouseOut:Gt,type:"target"})))};return n.displayName="EdgeWrapper",b.memo(n)};function $6(e){const n={default:hi(e.default||Ks),straight:hi(e.bezier||el),step:hi(e.step||Qc),smoothstep:hi(e.step||ca),simplebezier:hi(e.simplebezier||Jc)},r={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,c)=>(s[c]=hi(e[c]||Ks),s),r);return{...n,...o}}function bh(e,n,r=null){const o=(r?.x||0)+n.x,s=(r?.y||0)+n.y,c=r?.width||n.width,u=r?.height||n.height;switch(e){case de.Top:return{x:o+c/2,y:s};case de.Right:return{x:o+c,y:s+u/2};case de.Bottom:return{x:o+c/2,y:s+u};case de.Left:return{x:o,y:s+u/2}}}function Ah(e,n){return e?e.length===1||!n?e[0]:n&&e.find(r=>r.id===n)||null:null}const k6=(e,n,r,o,s,c)=>{const u=bh(r,e,n),l=bh(c,o,s);return{sourceX:u.x,sourceY:u.y,targetX:l.x,targetY:l.y}};function H6({sourcePos:e,targetPos:n,sourceWidth:r,sourceHeight:o,targetWidth:s,targetHeight:c,width:u,height:l,transform:d}){const p={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x+r,n.x+s),y2:Math.max(e.y+o,n.y+c)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const h=Kc({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:u/d[2],height:l/d[2]}),g=Math.max(0,Math.min(h.x2,p.x2)-Math.max(h.x,p.x)),m=Math.max(0,Math.min(h.y2,p.y2)-Math.max(h.y,p.y));return Math.ceil(g*m)>0}function Sh(e){const n=e?.[rt]?.handleBounds||null,r=n&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},n,!!r]}const L6=[{level:0,isMaxLevel:!0,edges:[]}];function j6(e,n,r=!1){let o=-1;const s=e.reduce((u,l)=>{const d=hn(l.zIndex);let p=d?l.zIndex:0;if(r){const h=n.get(l.target),g=n.get(l.source),m=l.selected||h?.selected||g?.selected,x=Math.max(g?.[rt]?.z||0,h?.[rt]?.z||0,1e3);p=(d?l.zIndex:0)+(m?x:0)}return u[p]?u[p].push(l):u[p]=[l],o=p>o?p:o,u},{}),c=Object.entries(s).map(([u,l])=>{const d=+u;return{edges:l,level:d,isMaxLevel:d===o}});return c.length===0?L6:c}function V6(e,n,r){const o=Qe(b.useCallback(s=>e?s.edges.filter(c=>{const u=n.get(c.source),l=n.get(c.target);return u?.width&&u?.height&&l?.width&&l?.height&&H6({sourcePos:u.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:u.width,sourceHeight:u.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,n]));return j6(o,n,r)}const q6=({color:e="none",strokeWidth:n=1})=>H.createElement("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),G6=({color:e="none",strokeWidth:n=1})=>H.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Fh={[_o.Arrow]:q6,[_o.ArrowClosed]:G6};function W6(e){const n=vt();return b.useMemo(()=>Object.prototype.hasOwnProperty.call(Fh,e)?Fh[e]:(n.getState().onError?.("009",ir.error009(e)),null),[e])}const U6=({id:e,type:n,color:r,width:o=12.5,height:s=12.5,markerUnits:c="strokeWidth",strokeWidth:u,orient:l="auto-start-reverse"})=>{const d=W6(n);return d?H.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:c,orient:l,refX:"0",refY:"0"},H.createElement(d,{color:r,strokeWidth:u})):null},Y6=({defaultColor:e,rfId:n})=>r=>{const o=[];return r.edges.reduce((s,c)=>([c.markerStart,c.markerEnd].forEach(u=>{if(u&&typeof u=="object"){const l=bc(u,n);o.includes(l)||(s.push({id:l,color:u.color||e,...u}),o.push(l))}}),s),[]).sort((s,c)=>s.id.localeCompare(c.id))},Ip=({defaultColor:e,rfId:n})=>{const r=Qe(b.useCallback(Y6({defaultColor:e,rfId:n}),[e,n]),(o,s)=>!(o.length!==s.length||o.some((c,u)=>c.id!==s[u].id)));return H.createElement("defs",null,r.map(o=>H.createElement(U6,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};Ip.displayName="MarkerDefinitions";var X6=b.memo(Ip);const Z6=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),Rp=({defaultMarkerColor:e,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:o,edgeTypes:s,noPanClassName:c,onEdgeContextMenu:u,onEdgeMouseEnter:l,onEdgeMouseMove:d,onEdgeMouseLeave:p,onEdgeClick:h,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:x,onReconnectEnd:C,reconnectRadius:D,children:E,disableKeyboardA11y:y})=>{const{edgesFocusable:S,edgesUpdatable:T,elementsSelectable:F,width:R,height:k,connectionMode:j,nodeInternals:Y,onError:z}=Qe(Z6,St),G=V6(n,Y,r);return R?H.createElement(H.Fragment,null,G.map(({level:Q,edges:J,isMaxLevel:W})=>H.createElement("svg",{key:Q,style:{zIndex:Q},width:R,height:k,className:"react-flow__edges react-flow__container"},W&&H.createElement(X6,{defaultColor:e,rfId:o}),H.createElement("g",null,J.map(N=>{const[$,P,q]=Sh(Y.get(N.source)),[ee,L,te]=Sh(Y.get(N.target));if(!q||!te)return null;let re=N.type||"default";s[re]||(z?.("011",ir.error011(re)),re="default");const oe=s[re]||s.default,ce=j===qr.Strict?L.target:(L.target??[]).concat(L.source??[]),ue=Ah(P.source,N.sourceHandle),ge=Ah(ce,N.targetHandle),Ae=ue?.position||de.Bottom,Se=ge?.position||de.Top,he=!!(N.focusable||S&&typeof N.focusable>"u"),ve=N.reconnectable||N.updatable,Te=typeof m<"u"&&(ve||T&&typeof ve>"u");if(!ue||!ge)return z?.("008",ir.error008(ue,N)),null;const{sourceX:Et,sourceY:Dt,targetX:Mt,targetY:Ze}=k6($,ue,Ae,ee,ge,Se);return H.createElement(oe,{key:N.id,id:N.id,className:Rt([N.className,c]),type:re,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:Et,sourceY:Dt,targetX:Mt,targetY:Ze,sourcePosition:Ae,targetPosition:Se,elementsSelectable:F,onContextMenu:u,onMouseEnter:l,onMouseMove:d,onMouseLeave:p,onClick:h,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:x,onReconnectEnd:C,reconnectRadius:D,rfId:o,ariaLabel:N.ariaLabel,isFocusable:he,isReconnectable:Te,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth,disableKeyboardA11y:y})})))),E):null};Rp.displayName="EdgeRenderer";var K6=b.memo(Rp);const J6=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Q6({children:e}){const n=Qe(J6);return H.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},e)}function e8(e){const n=sl(),r=b.useRef(!1);b.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const t8={[de.Left]:de.Right,[de.Right]:de.Left,[de.Top]:de.Bottom,[de.Bottom]:de.Top},Mp=({nodeId:e,handleType:n,style:r,type:o=vr.Bezier,CustomComponent:s,connectionStatus:c})=>{const{fromNode:u,handleId:l,toX:d,toY:p,connectionMode:h}=Qe(b.useCallback(k=>({fromNode:k.nodeInternals.get(e),handleId:k.connectionHandleId,toX:(k.connectionPosition.x-k.transform[0])/k.transform[2],toY:(k.connectionPosition.y-k.transform[1])/k.transform[2],connectionMode:k.connectionMode}),[e]),St),g=u?.[rt]?.handleBounds;let m=g?.[n];if(h===qr.Loose&&(m=m||g?.[n==="source"?"target":"source"]),!u||!m)return null;const x=l?m.find(k=>k.id===l):m[0],C=x?x.x+x.width/2:(u.width??0)/2,D=x?x.y+x.height/2:u.height??0,E=(u.positionAbsolute?.x??0)+C,y=(u.positionAbsolute?.y??0)+D,S=x?.position,T=S?t8[S]:null;if(!S||!T)return null;if(s)return H.createElement(s,{connectionLineType:o,connectionLineStyle:r,fromNode:u,fromHandle:x,fromX:E,fromY:y,toX:d,toY:p,fromPosition:S,toPosition:T,connectionStatus:c});let F="";const R={sourceX:E,sourceY:y,sourcePosition:S,targetX:d,targetY:p,targetPosition:T};return o===vr.Bezier?[F]=tl(R):o===vr.Step?[F]=Ec({...R,borderRadius:0}):o===vr.SmoothStep?[F]=Ec(R):o===vr.SimpleBezier?[F]=np(R):F=`M${E},${y} ${d},${p}`,H.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:r})};Mp.displayName="ConnectionLine";const n8=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function r8({containerStyle:e,style:n,type:r,component:o}){const{nodeId:s,handleType:c,nodesConnectable:u,width:l,height:d,connectionStatus:p}=Qe(n8,St);return!(s&&c&&l&&u)?null:H.createElement("svg",{style:e,width:l,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},H.createElement("g",{className:Rt(["react-flow__connection",p])},H.createElement(Mp,{nodeId:s,handleType:c,style:n,type:r,CustomComponent:o,connectionStatus:p})))}function Nh(e,n){return b.useRef(null),vt(),b.useMemo(()=>n(e),[e])}const zp=({nodeTypes:e,edgeTypes:n,onMove:r,onMoveStart:o,onMoveEnd:s,onInit:c,onNodeClick:u,onEdgeClick:l,onNodeDoubleClick:d,onEdgeDoubleClick:p,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:x,onSelectionContextMenu:C,onSelectionStart:D,onSelectionEnd:E,connectionLineType:y,connectionLineStyle:S,connectionLineComponent:T,connectionLineContainerStyle:F,selectionKeyCode:R,selectionOnDrag:k,selectionMode:j,multiSelectionKeyCode:Y,panActivationKeyCode:z,zoomActivationKeyCode:G,deleteKeyCode:Q,onlyRenderVisibleElements:J,elementsSelectable:W,selectNodesOnDrag:N,defaultViewport:$,translateExtent:P,minZoom:q,maxZoom:ee,preventScrolling:L,defaultMarkerColor:te,zoomOnScroll:re,zoomOnPinch:oe,panOnScroll:ce,panOnScrollSpeed:ue,panOnScrollMode:ge,zoomOnDoubleClick:Ae,panOnDrag:Se,onPaneClick:he,onPaneMouseEnter:ve,onPaneMouseMove:Te,onPaneMouseLeave:Et,onPaneScroll:Dt,onPaneContextMenu:Mt,onEdgeContextMenu:Ze,onEdgeMouseEnter:Ge,onEdgeMouseMove:tn,onEdgeMouseLeave:ze,onReconnect:fe,onReconnectStart:Ft,onReconnectEnd:Vt,reconnectRadius:xt,noDragClassName:nn,noWheelClassName:pn,noPanClassName:gn,elevateEdgesOnSelect:rn,disableKeyboardA11y:kn,nodeOrigin:qt,nodeExtent:Gt,rfId:Tn})=>{const Hn=Nh(e,B6),at=Nh(n,$6);return e8(c),H.createElement(N6,{onPaneClick:he,onPaneMouseEnter:ve,onPaneMouseMove:Te,onPaneMouseLeave:Et,onPaneContextMenu:Mt,onPaneScroll:Dt,deleteKeyCode:Q,selectionKeyCode:R,selectionOnDrag:k,selectionMode:j,onSelectionStart:D,onSelectionEnd:E,multiSelectionKeyCode:Y,panActivationKeyCode:z,zoomActivationKeyCode:G,elementsSelectable:W,onMove:r,onMoveStart:o,onMoveEnd:s,zoomOnScroll:re,zoomOnPinch:oe,zoomOnDoubleClick:Ae,panOnScroll:ce,panOnScrollSpeed:ue,panOnScrollMode:ge,panOnDrag:Se,defaultViewport:$,translateExtent:P,minZoom:q,maxZoom:ee,onSelectionContextMenu:C,preventScrolling:L,noDragClassName:nn,noWheelClassName:pn,noPanClassName:gn,disableKeyboardA11y:kn},H.createElement(Q6,null,H.createElement(K6,{edgeTypes:at,onEdgeClick:l,onEdgeDoubleClick:p,onlyRenderVisibleElements:J,onEdgeContextMenu:Ze,onEdgeMouseEnter:Ge,onEdgeMouseMove:tn,onEdgeMouseLeave:ze,onReconnect:fe,onReconnectStart:Ft,onReconnectEnd:Vt,reconnectRadius:xt,defaultMarkerColor:te,noPanClassName:gn,elevateEdgesOnSelect:!!rn,disableKeyboardA11y:kn,rfId:Tn},H.createElement(r8,{style:S,type:y,component:T,containerStyle:F})),H.createElement("div",{className:"react-flow__edgelabel-renderer"}),H.createElement(M6,{nodeTypes:Hn,onNodeClick:u,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:x,selectNodesOnDrag:N,onlyRenderVisibleElements:J,noPanClassName:gn,noDragClassName:nn,disableKeyboardA11y:kn,nodeOrigin:qt,nodeExtent:Gt,rfId:Tn})))};zp.displayName="GraphView";var i8=b.memo(zp);const Nc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],gr={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Nc,nodeExtent:Nc,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:qr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:B3,isValidConnection:void 0},o8=()=>qw((e,n)=>({...gr,setNodes:r=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:c}=n();e({nodeInternals:nc(r,o,s,c)})},getNodes:()=>Array.from(n().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:o={}}=n();e({edges:r.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(r,o)=>{const s=typeof r<"u",c=typeof o<"u",u=s?nc(r,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;e({nodeInternals:u,edges:c?o:[],hasDefaultNodes:s,hasDefaultEdges:c})},updateNodeDimensions:r=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:c,fitViewOnInitDone:u,fitViewOnInitOptions:l,domNode:d,nodeOrigin:p}=n(),h=d?.querySelector(".react-flow__viewport");if(!h)return;const g=window.getComputedStyle(h),{m22:m}=new window.DOMMatrixReadOnly(g.transform),x=r.reduce((D,E)=>{const y=s.get(E.id);if(y?.hidden)s.set(y.id,{...y,[rt]:{...y[rt],handleBounds:void 0}});else if(y){const S=Xc(E.nodeElement);!!(S.width&&S.height&&(y.width!==S.width||y.height!==S.height||E.forceUpdate))&&(s.set(y.id,{...y,[rt]:{...y[rt],handleBounds:{source:wh(".source",E.nodeElement,m,p),target:wh(".target",E.nodeElement,m,p)}},...S}),D.push({id:y.id,type:"dimensions",dimensions:S}))}return D},[]);_p(s,p);const C=u||c&&!u&&wp(n,{initial:!0,...l});e({nodeInternals:new Map(s),fitViewOnInitDone:C}),x?.length>0&&o?.(x)},updateNodePositions:(r,o=!0,s=!1)=>{const{triggerNodeChanges:c}=n(),u=r.map(l=>{const d={id:l.id,type:"position",dragging:s};return o&&(d.positionAbsolute=l.positionAbsolute,d.position=l.position),d});c(u)},triggerNodeChanges:r=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:c,nodeOrigin:u,getNodes:l,elevateNodesOnSelect:d}=n();if(r?.length){if(c){const p=Ep(r,l()),h=nc(p,s,u,d);e({nodeInternals:h})}o?.(r)}},addSelectedNodes:r=>{const{multiSelectionActive:o,edges:s,getNodes:c}=n();let u,l=null;o?u=r.map(d=>yr(d,!0)):(u=gi(c(),r),l=gi(s,[])),As({changedNodes:u,changedEdges:l,get:n,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:o,edges:s,getNodes:c}=n();let u,l=null;o?u=r.map(d=>yr(d,!0)):(u=gi(s,r),l=gi(c(),[])),As({changedNodes:l,changedEdges:u,get:n,set:e})},unselectNodesAndEdges:({nodes:r,edges:o}={})=>{const{edges:s,getNodes:c}=n(),u=r||c(),l=o||s,d=u.map(h=>(h.selected=!1,yr(h.id,!1))),p=l.map(h=>yr(h.id,!1));As({changedNodes:d,changedEdges:p,get:n,set:e})},setMinZoom:r=>{const{d3Zoom:o,maxZoom:s}=n();o?.scaleExtent([r,s]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:o,minZoom:s}=n();o?.scaleExtent([s,r]),e({maxZoom:r})},setTranslateExtent:r=>{n().d3Zoom?.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:o}=n(),c=o().filter(l=>l.selected).map(l=>yr(l.id,!1)),u=r.filter(l=>l.selected).map(l=>yr(l.id,!1));As({changedNodes:c,changedEdges:u,get:n,set:e})},setNodeExtent:r=>{const{nodeInternals:o}=n();o.forEach(s=>{s.positionAbsolute=Zc(s.position,r)}),e({nodeExtent:r,nodeInternals:new Map(o)})},panBy:r=>{const{transform:o,width:s,height:c,d3Zoom:u,d3Selection:l,translateExtent:d}=n();if(!u||!l||!r.x&&!r.y)return!1;const p=Dr.translate(o[0]+r.x,o[1]+r.y).scale(o[2]),h=[[0,0],[s,c]],g=u?.constrain()(p,h,d);return u.transform(l,g),o[0]!==g.x||o[1]!==g.y||o[2]!==g.k},cancelConnection:()=>e({connectionNodeId:gr.connectionNodeId,connectionHandleId:gr.connectionHandleId,connectionHandleType:gr.connectionHandleType,connectionStatus:gr.connectionStatus,connectionStartHandle:gr.connectionStartHandle,connectionEndHandle:gr.connectionEndHandle}),reset:()=>e({...gr})}),Object.is),ul=({children:e})=>{const n=b.useRef(null);return n.current||(n.current=o8()),H.createElement(C3,{value:n.current},e)};ul.displayName="ReactFlowProvider";const Op=({children:e})=>b.useContext(ua)?H.createElement(H.Fragment,null,e):H.createElement(ul,null,e);Op.displayName="ReactFlowWrapper";const s8={input:pp,default:Sc,output:mp,group:ol},a8={default:Ks,straight:el,step:Qc,smoothstep:ca,simplebezier:Jc},u8=[0,0],c8=[15,15],l8={x:0,y:0,zoom:1},d8={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Pp=b.forwardRef(({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,className:s,nodeTypes:c=s8,edgeTypes:u=a8,onNodeClick:l,onEdgeClick:d,onInit:p,onMove:h,onMoveStart:g,onMoveEnd:m,onConnect:x,onConnectStart:C,onConnectEnd:D,onClickConnectStart:E,onClickConnectEnd:y,onNodeMouseEnter:S,onNodeMouseMove:T,onNodeMouseLeave:F,onNodeContextMenu:R,onNodeDoubleClick:k,onNodeDragStart:j,onNodeDrag:Y,onNodeDragStop:z,onNodesDelete:G,onEdgesDelete:Q,onSelectionChange:J,onSelectionDragStart:W,onSelectionDrag:N,onSelectionDragStop:$,onSelectionContextMenu:P,onSelectionStart:q,onSelectionEnd:ee,connectionMode:L=qr.Strict,connectionLineType:te=vr.Bezier,connectionLineStyle:re,connectionLineComponent:oe,connectionLineContainerStyle:ce,deleteKeyCode:ue="Backspace",selectionKeyCode:ge="Shift",selectionOnDrag:Ae=!1,selectionMode:Se=bi.Full,panActivationKeyCode:he="Space",multiSelectionKeyCode:ve=Zs()?"Meta":"Control",zoomActivationKeyCode:Te=Zs()?"Meta":"Control",snapToGrid:Et=!1,snapGrid:Dt=c8,onlyRenderVisibleElements:Mt=!1,selectNodesOnDrag:Ze=!0,nodesDraggable:Ge,nodesConnectable:tn,nodesFocusable:ze,nodeOrigin:fe=u8,edgesFocusable:Ft,edgesUpdatable:Vt,elementsSelectable:xt,defaultViewport:nn=l8,minZoom:pn=.5,maxZoom:gn=2,translateExtent:rn=Nc,preventScrolling:kn=!0,nodeExtent:qt,defaultMarkerColor:Gt="#b1b1b7",zoomOnScroll:Tn=!0,zoomOnPinch:Hn=!0,panOnScroll:at=!1,panOnScrollSpeed:zt=.5,panOnScrollMode:mn=Hr.Free,zoomOnDoubleClick:yn=!0,panOnDrag:Bn=!0,onPaneClick:Ot,onPaneMouseEnter:vn,onPaneMouseMove:Ni,onPaneMouseLeave:Ti,onPaneScroll:br,onPaneContextMenu:Yr,children:Bi,onEdgeContextMenu:Ln,onEdgeDoubleClick:da,onEdgeMouseEnter:fa,onEdgeMouseMove:ha,onEdgeMouseLeave:So,onEdgeUpdate:pa,onEdgeUpdateStart:ga,onEdgeUpdateEnd:ma,onReconnect:Ii,onReconnectStart:ya,onReconnectEnd:Ri,reconnectRadius:va=10,edgeUpdaterRadius:Da=10,onNodesChange:xa,onEdgesChange:_a,noDragClassName:wa="nodrag",noWheelClassName:Ca="nowheel",noPanClassName:Fo="nopan",fitView:Ea=!1,fitViewOptions:No,connectOnClick:ba=!0,attributionPosition:Aa,proOptions:Sa,defaultEdgeOptions:Fa,elevateNodesOnSelect:Na=!0,elevateEdgesOnSelect:Ta=!1,disableKeyboardA11y:Ar=!1,autoPanOnConnect:Ba=!0,autoPanOnNodeDrag:Xr=!0,connectionRadius:Ia=20,isValidConnection:Ra,onError:Ma,style:To,id:Mi,nodeDragThreshold:Bo,...za},Oa)=>{const zi=Mi||"1";return H.createElement("div",{...za,style:{...To,...d8},ref:Oa,className:Rt(["react-flow",s]),"data-testid":"rf__wrapper",id:Mi},H.createElement(Op,null,H.createElement(i8,{onInit:p,onMove:h,onMoveStart:g,onMoveEnd:m,onNodeClick:l,onEdgeClick:d,onNodeMouseEnter:S,onNodeMouseMove:T,onNodeMouseLeave:F,onNodeContextMenu:R,onNodeDoubleClick:k,nodeTypes:c,edgeTypes:u,connectionLineType:te,connectionLineStyle:re,connectionLineComponent:oe,connectionLineContainerStyle:ce,selectionKeyCode:ge,selectionOnDrag:Ae,selectionMode:Se,deleteKeyCode:ue,multiSelectionKeyCode:ve,panActivationKeyCode:he,zoomActivationKeyCode:Te,onlyRenderVisibleElements:Mt,selectNodesOnDrag:Ze,defaultViewport:nn,translateExtent:rn,minZoom:pn,maxZoom:gn,preventScrolling:kn,zoomOnScroll:Tn,zoomOnPinch:Hn,zoomOnDoubleClick:yn,panOnScroll:at,panOnScrollSpeed:zt,panOnScrollMode:mn,panOnDrag:Bn,onPaneClick:Ot,onPaneMouseEnter:vn,onPaneMouseMove:Ni,onPaneMouseLeave:Ti,onPaneScroll:br,onPaneContextMenu:Yr,onSelectionContextMenu:P,onSelectionStart:q,onSelectionEnd:ee,onEdgeContextMenu:Ln,onEdgeDoubleClick:da,onEdgeMouseEnter:fa,onEdgeMouseMove:ha,onEdgeMouseLeave:So,onReconnect:Ii??pa,onReconnectStart:ya??ga,onReconnectEnd:Ri??ma,reconnectRadius:va??Da,defaultMarkerColor:Gt,noDragClassName:wa,noWheelClassName:Ca,noPanClassName:Fo,elevateEdgesOnSelect:Ta,rfId:zi,disableKeyboardA11y:Ar,nodeOrigin:fe,nodeExtent:qt}),H.createElement(t6,{nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:x,onConnectStart:C,onConnectEnd:D,onClickConnectStart:E,onClickConnectEnd:y,nodesDraggable:Ge,nodesConnectable:tn,nodesFocusable:ze,edgesFocusable:Ft,edgesUpdatable:Vt,elementsSelectable:xt,elevateNodesOnSelect:Na,minZoom:pn,maxZoom:gn,nodeExtent:qt,onNodesChange:xa,onEdgesChange:_a,snapToGrid:Et,snapGrid:Dt,connectionMode:L,translateExtent:rn,connectOnClick:ba,defaultEdgeOptions:Fa,fitView:Ea,fitViewOptions:No,onNodesDelete:G,onEdgesDelete:Q,onNodeDragStart:j,onNodeDrag:Y,onNodeDragStop:z,onSelectionDrag:N,onSelectionDragStart:W,onSelectionDragStop:$,noPanClassName:Fo,nodeOrigin:fe,rfId:zi,autoPanOnConnect:Ba,autoPanOnNodeDrag:Xr,onError:Ma,connectionRadius:Ia,isValidConnection:Ra,nodeDragThreshold:Bo}),H.createElement(Q3,{onSelectionChange:J}),Bi,H.createElement(b3,{proOptions:Sa,position:Aa}),H.createElement(s6,{rfId:zi,disableKeyboardA11y:Ar})))});Pp.displayName="ReactFlow";const f8=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function h8({children:e}){const n=Qe(f8);return n?i0.createPortal(e,n):null}function $p(e){return n=>{const[r,o]=b.useState(n),s=b.useCallback(c=>o(u=>e(c,u)),[]);return[r,o,s]}}const p8=$p(Ep),g8=$p(x6);function m8(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},H.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function y8(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},H.createElement("path",{d:"M0 0h32v4.2H0z"}))}function v8(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},H.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function D8(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},H.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function x8(){return H.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},H.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const mi=({children:e,className:n,...r})=>H.createElement("button",{type:"button",className:Rt(["react-flow__controls-button",n]),...r},e);mi.displayName="ControlButton";const _8=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),kp=({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:c,onZoomOut:u,onFitView:l,onInteractiveChange:d,className:p,children:h,position:g="bottom-left"})=>{const m=vt(),[x,C]=b.useState(!1),{isInteractive:D,minZoomReached:E,maxZoomReached:y}=Qe(_8,St),{zoomIn:S,zoomOut:T,fitView:F}=sl();if(b.useEffect(()=>{C(!0)},[]),!x)return null;const R=()=>{S(),c?.()},k=()=>{T(),u?.()},j=()=>{F(s),l?.()},Y=()=>{m.setState({nodesDraggable:!D,nodesConnectable:!D,elementsSelectable:!D}),d?.(!D)};return H.createElement(X0,{className:Rt(["react-flow__controls",p]),position:g,style:e,"data-testid":"rf__controls"},n&&H.createElement(H.Fragment,null,H.createElement(mi,{onClick:R,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},H.createElement(m8,null)),H.createElement(mi,{onClick:k,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:E},H.createElement(y8,null))),r&&H.createElement(mi,{className:"react-flow__controls-fitview",onClick:j,title:"fit view","aria-label":"fit view"},H.createElement(v8,null)),o&&H.createElement(mi,{className:"react-flow__controls-interactive",onClick:Y,title:"toggle interactivity","aria-label":"toggle interactivity"},D?H.createElement(x8,null):H.createElement(D8,null)),h)};kp.displayName="Controls";var w8=b.memo(kp),Sn;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Sn||(Sn={}));function C8({color:e,dimensions:n,lineWidth:r}){return H.createElement("path",{stroke:e,strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function E8({color:e,radius:n}){return H.createElement("circle",{cx:n,cy:n,r:n,fill:e})}const b8={[Sn.Dots]:"#91919a",[Sn.Lines]:"#eee",[Sn.Cross]:"#e2e2e2"},A8={[Sn.Dots]:1,[Sn.Lines]:1,[Sn.Cross]:6},S8=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Hp({id:e,variant:n=Sn.Dots,gap:r=20,size:o,lineWidth:s=1,offset:c=2,color:u,style:l,className:d}){const p=b.useRef(null),{transform:h,patternId:g}=Qe(S8,St),m=u||b8[n],x=o||A8[n],C=n===Sn.Dots,D=n===Sn.Cross,E=Array.isArray(r)?r:[r,r],y=[E[0]*h[2]||1,E[1]*h[2]||1],S=x*h[2],T=D?[S,S]:y,F=C?[S/c,S/c]:[T[0]/c,T[1]/c];return H.createElement("svg",{className:Rt(["react-flow__background",d]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},H.createElement("pattern",{id:g+e,x:h[0]%y[0],y:h[1]%y[1],width:y[0],height:y[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},C?H.createElement(E8,{color:m,radius:S/c}):H.createElement(C8,{dimensions:T,color:m,lineWidth:s})),H.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}Hp.displayName="Background";var F8=b.memo(Hp),Qs={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Qs.exports;(function(e,n){(function(){var r,o="4.17.21",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",p=500,h="__lodash_placeholder__",g=1,m=2,x=4,C=1,D=2,E=1,y=2,S=4,T=8,F=16,R=32,k=64,j=128,Y=256,z=512,G=30,Q="...",J=800,W=16,N=1,$=2,P=3,q=1/0,ee=9007199254740991,L=17976931348623157e292,te=NaN,re=4294967295,oe=re-1,ce=re>>>1,ue=[["ary",j],["bind",E],["bindKey",y],["curry",T],["curryRight",F],["flip",z],["partial",R],["partialRight",k],["rearg",Y]],ge="[object Arguments]",Ae="[object Array]",Se="[object AsyncFunction]",he="[object Boolean]",ve="[object Date]",Te="[object DOMException]",Et="[object Error]",Dt="[object Function]",Mt="[object GeneratorFunction]",Ze="[object Map]",Ge="[object Number]",tn="[object Null]",ze="[object Object]",fe="[object Promise]",Ft="[object Proxy]",Vt="[object RegExp]",xt="[object Set]",nn="[object String]",pn="[object Symbol]",gn="[object Undefined]",rn="[object WeakMap]",kn="[object WeakSet]",qt="[object ArrayBuffer]",Gt="[object DataView]",Tn="[object Float32Array]",Hn="[object Float64Array]",at="[object Int8Array]",zt="[object Int16Array]",mn="[object Int32Array]",yn="[object Uint8Array]",Bn="[object Uint8ClampedArray]",Ot="[object Uint16Array]",vn="[object Uint32Array]",Ni=/\b__p \+= '';/g,Ti=/\b(__p \+=) '' \+/g,br=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Yr=/&(?:amp|lt|gt|quot|#39);/g,Bi=/[&<>"']/g,Ln=RegExp(Yr.source),da=RegExp(Bi.source),fa=/<%-([\s\S]+?)%>/g,ha=/<%([\s\S]+?)%>/g,So=/<%=([\s\S]+?)%>/g,pa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ga=/^\w*$/,ma=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ii=/[\\^$.*+?()[\]{}|]/g,ya=RegExp(Ii.source),Ri=/^\s+/,va=/\s/,Da=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,xa=/\{\n\/\* \[wrapped with (.+)\] \*/,_a=/,? & /,wa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ca=/[()=,{}\[\]\/\s]/,Fo=/\\(\\)?/g,Ea=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,No=/\w*$/,ba=/^[-+]0x[0-9a-f]+$/i,Aa=/^0b[01]+$/i,Sa=/^\[object .+?Constructor\]$/,Fa=/^0o[0-7]+$/i,Na=/^(?:0|[1-9]\d*)$/,Ta=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ar=/($^)/,Ba=/['\n\r\u2028\u2029\\]/g,Xr="\\ud800-\\udfff",Ia="\\u0300-\\u036f",Ra="\\ufe20-\\ufe2f",Ma="\\u20d0-\\u20ff",To=Ia+Ra+Ma,Mi="\\u2700-\\u27bf",Bo="a-z\\xdf-\\xf6\\xf8-\\xff",za="\\xac\\xb1\\xd7\\xf7",Oa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",zi="\\u2000-\\u206f",ig=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pl="A-Z\\xc0-\\xd6\\xd8-\\xde",gl="\\ufe0e\\ufe0f",ml=za+Oa+zi+ig,Pa="[']",og="["+Xr+"]",yl="["+ml+"]",Io="["+To+"]",vl="\\d+",sg="["+Mi+"]",Dl="["+Bo+"]",xl="[^"+Xr+ml+vl+Mi+Bo+pl+"]",$a="\\ud83c[\\udffb-\\udfff]",ag="(?:"+Io+"|"+$a+")",_l="[^"+Xr+"]",ka="(?:\\ud83c[\\udde6-\\uddff]){2}",Ha="[\\ud800-\\udbff][\\udc00-\\udfff]",Zr="["+pl+"]",wl="\\u200d",Cl="(?:"+Dl+"|"+xl+")",ug="(?:"+Zr+"|"+xl+")",El="(?:"+Pa+"(?:d|ll|m|re|s|t|ve))?",bl="(?:"+Pa+"(?:D|LL|M|RE|S|T|VE))?",Al=ag+"?",Sl="["+gl+"]?",cg="(?:"+wl+"(?:"+[_l,ka,Ha].join("|")+")"+Sl+Al+")*",lg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Fl=Sl+Al+cg,fg="(?:"+[sg,ka,Ha].join("|")+")"+Fl,hg="(?:"+[_l+Io+"?",Io,ka,Ha,og].join("|")+")",pg=RegExp(Pa,"g"),gg=RegExp(Io,"g"),La=RegExp($a+"(?="+$a+")|"+hg+Fl,"g"),mg=RegExp([Zr+"?"+Dl+"+"+El+"(?="+[yl,Zr,"$"].join("|")+")",ug+"+"+bl+"(?="+[yl,Zr+Cl,"$"].join("|")+")",Zr+"?"+Cl+"+"+El,Zr+"+"+bl,dg,lg,vl,fg].join("|"),"g"),yg=RegExp("["+wl+Xr+To+gl+"]"),vg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dg=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xg=-1,We={};We[Tn]=We[Hn]=We[at]=We[zt]=We[mn]=We[yn]=We[Bn]=We[Ot]=We[vn]=!0,We[ge]=We[Ae]=We[qt]=We[he]=We[Gt]=We[ve]=We[Et]=We[Dt]=We[Ze]=We[Ge]=We[ze]=We[Vt]=We[xt]=We[nn]=We[rn]=!1;var Ve={};Ve[ge]=Ve[Ae]=Ve[qt]=Ve[Gt]=Ve[he]=Ve[ve]=Ve[Tn]=Ve[Hn]=Ve[at]=Ve[zt]=Ve[mn]=Ve[Ze]=Ve[Ge]=Ve[ze]=Ve[Vt]=Ve[xt]=Ve[nn]=Ve[pn]=Ve[yn]=Ve[Bn]=Ve[Ot]=Ve[vn]=!0,Ve[Et]=Ve[Dt]=Ve[rn]=!1;var _g={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},wg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cg={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Eg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},bg=parseFloat,Ag=parseInt,Nl=typeof Ki=="object"&&Ki&&Ki.Object===Object&&Ki,Sg=typeof self=="object"&&self&&self.Object===Object&&self,_t=Nl||Sg||Function("return this")(),ja=n&&!n.nodeType&&n,Sr=ja&&!0&&e&&!e.nodeType&&e,Tl=Sr&&Sr.exports===ja,Va=Tl&&Nl.process,on=function(){try{var M=Sr&&Sr.require&&Sr.require("util").types;return M||Va&&Va.binding&&Va.binding("util")}catch{}}(),Bl=on&&on.isArrayBuffer,Il=on&&on.isDate,Rl=on&&on.isMap,Ml=on&&on.isRegExp,zl=on&&on.isSet,Ol=on&&on.isTypedArray;function Wt(M,U,V){switch(V.length){case 0:return M.call(U);case 1:return M.call(U,V[0]);case 2:return M.call(U,V[0],V[1]);case 3:return M.call(U,V[0],V[1],V[2])}return M.apply(U,V)}function Fg(M,U,V,ae){for(var De=-1,ke=M==null?0:M.length;++De<ke;){var lt=M[De];U(ae,lt,V(lt),M)}return ae}function sn(M,U){for(var V=-1,ae=M==null?0:M.length;++V<ae&&U(M[V],V,M)!==!1;);return M}function Ng(M,U){for(var V=M==null?0:M.length;V--&&U(M[V],V,M)!==!1;);return M}function Pl(M,U){for(var V=-1,ae=M==null?0:M.length;++V<ae;)if(!U(M[V],V,M))return!1;return!0}function sr(M,U){for(var V=-1,ae=M==null?0:M.length,De=0,ke=[];++V<ae;){var lt=M[V];U(lt,V,M)&&(ke[De++]=lt)}return ke}function Ro(M,U){var V=M==null?0:M.length;return!!V&&Kr(M,U,0)>-1}function qa(M,U,V){for(var ae=-1,De=M==null?0:M.length;++ae<De;)if(V(U,M[ae]))return!0;return!1}function Ke(M,U){for(var V=-1,ae=M==null?0:M.length,De=Array(ae);++V<ae;)De[V]=U(M[V],V,M);return De}function ar(M,U){for(var V=-1,ae=U.length,De=M.length;++V<ae;)M[De+V]=U[V];return M}function Ga(M,U,V,ae){var De=-1,ke=M==null?0:M.length;for(ae&&ke&&(V=M[++De]);++De<ke;)V=U(V,M[De],De,M);return V}function Tg(M,U,V,ae){var De=M==null?0:M.length;for(ae&&De&&(V=M[--De]);De--;)V=U(V,M[De],De,M);return V}function Wa(M,U){for(var V=-1,ae=M==null?0:M.length;++V<ae;)if(U(M[V],V,M))return!0;return!1}var Bg=Ua("length");function Ig(M){return M.split("")}function Rg(M){return M.match(wa)||[]}function $l(M,U,V){var ae;return V(M,function(De,ke,lt){if(U(De,ke,lt))return ae=ke,!1}),ae}function Mo(M,U,V,ae){for(var De=M.length,ke=V+(ae?1:-1);ae?ke--:++ke<De;)if(U(M[ke],ke,M))return ke;return-1}function Kr(M,U,V){return U===U?Gg(M,U,V):Mo(M,kl,V)}function Mg(M,U,V,ae){for(var De=V-1,ke=M.length;++De<ke;)if(ae(M[De],U))return De;return-1}function kl(M){return M!==M}function Hl(M,U){var V=M==null?0:M.length;return V?Xa(M,U)/V:te}function Ua(M){return function(U){return U==null?r:U[M]}}function Ya(M){return function(U){return M==null?r:M[U]}}function Ll(M,U,V,ae,De){return De(M,function(ke,lt,je){V=ae?(ae=!1,ke):U(V,ke,lt,je)}),V}function zg(M,U){var V=M.length;for(M.sort(U);V--;)M[V]=M[V].value;return M}function Xa(M,U){for(var V,ae=-1,De=M.length;++ae<De;){var ke=U(M[ae]);ke!==r&&(V=V===r?ke:V+ke)}return V}function Za(M,U){for(var V=-1,ae=Array(M);++V<M;)ae[V]=U(V);return ae}function Og(M,U){return Ke(U,function(V){return[V,M[V]]})}function jl(M){return M&&M.slice(0,Wl(M)+1).replace(Ri,"")}function Ut(M){return function(U){return M(U)}}function Ka(M,U){return Ke(U,function(V){return M[V]})}function Oi(M,U){return M.has(U)}function Vl(M,U){for(var V=-1,ae=M.length;++V<ae&&Kr(U,M[V],0)>-1;);return V}function ql(M,U){for(var V=M.length;V--&&Kr(U,M[V],0)>-1;);return V}function Pg(M,U){for(var V=M.length,ae=0;V--;)M[V]===U&&++ae;return ae}var $g=Ya(_g),kg=Ya(wg);function Hg(M){return"\\"+Eg[M]}function Lg(M,U){return M==null?r:M[U]}function Jr(M){return yg.test(M)}function jg(M){return vg.test(M)}function Vg(M){for(var U,V=[];!(U=M.next()).done;)V.push(U.value);return V}function Ja(M){var U=-1,V=Array(M.size);return M.forEach(function(ae,De){V[++U]=[De,ae]}),V}function Gl(M,U){return function(V){return M(U(V))}}function ur(M,U){for(var V=-1,ae=M.length,De=0,ke=[];++V<ae;){var lt=M[V];(lt===U||lt===h)&&(M[V]=h,ke[De++]=V)}return ke}function zo(M){var U=-1,V=Array(M.size);return M.forEach(function(ae){V[++U]=ae}),V}function qg(M){var U=-1,V=Array(M.size);return M.forEach(function(ae){V[++U]=[ae,ae]}),V}function Gg(M,U,V){for(var ae=V-1,De=M.length;++ae<De;)if(M[ae]===U)return ae;return-1}function Wg(M,U,V){for(var ae=V+1;ae--;)if(M[ae]===U)return ae;return ae}function Qr(M){return Jr(M)?Yg(M):Bg(M)}function Dn(M){return Jr(M)?Xg(M):Ig(M)}function Wl(M){for(var U=M.length;U--&&va.test(M.charAt(U)););return U}var Ug=Ya(Cg);function Yg(M){for(var U=La.lastIndex=0;La.test(M);)++U;return U}function Xg(M){return M.match(La)||[]}function Zg(M){return M.match(mg)||[]}var Kg=function M(U){U=U==null?_t:ei.defaults(_t.Object(),U,ei.pick(_t,Dg));var V=U.Array,ae=U.Date,De=U.Error,ke=U.Function,lt=U.Math,je=U.Object,Qa=U.RegExp,Jg=U.String,an=U.TypeError,Oo=V.prototype,Qg=ke.prototype,ti=je.prototype,Po=U["__core-js_shared__"],$o=Qg.toString,Le=ti.hasOwnProperty,em=0,Ul=function(){var t=/[^.]+$/.exec(Po&&Po.keys&&Po.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ko=ti.toString,tm=$o.call(je),nm=_t._,rm=Qa("^"+$o.call(Le).replace(Ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ho=Tl?U.Buffer:r,cr=U.Symbol,Lo=U.Uint8Array,Yl=Ho?Ho.allocUnsafe:r,jo=Gl(je.getPrototypeOf,je),Xl=je.create,Zl=ti.propertyIsEnumerable,Vo=Oo.splice,Kl=cr?cr.isConcatSpreadable:r,Pi=cr?cr.iterator:r,Fr=cr?cr.toStringTag:r,qo=function(){try{var t=Rr(je,"defineProperty");return t({},"",{}),t}catch{}}(),im=U.clearTimeout!==_t.clearTimeout&&U.clearTimeout,om=ae&&ae.now!==_t.Date.now&&ae.now,sm=U.setTimeout!==_t.setTimeout&&U.setTimeout,Go=lt.ceil,Wo=lt.floor,eu=je.getOwnPropertySymbols,am=Ho?Ho.isBuffer:r,Jl=U.isFinite,um=Oo.join,cm=Gl(je.keys,je),dt=lt.max,bt=lt.min,lm=ae.now,dm=U.parseInt,Ql=lt.random,fm=Oo.reverse,tu=Rr(U,"DataView"),$i=Rr(U,"Map"),nu=Rr(U,"Promise"),ni=Rr(U,"Set"),ki=Rr(U,"WeakMap"),Hi=Rr(je,"create"),Uo=ki&&new ki,ri={},hm=Mr(tu),pm=Mr($i),gm=Mr(nu),mm=Mr(ni),ym=Mr(ki),Yo=cr?cr.prototype:r,Li=Yo?Yo.valueOf:r,ed=Yo?Yo.toString:r;function _(t){if(tt(t)&&!xe(t)&&!(t instanceof Re)){if(t instanceof un)return t;if(Le.call(t,"__wrapped__"))return tf(t)}return new un(t)}var ii=function(){function t(){}return function(i){if(!et(i))return{};if(Xl)return Xl(i);t.prototype=i;var a=new t;return t.prototype=r,a}}();function Xo(){}function un(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}_.templateSettings={escape:fa,evaluate:ha,interpolate:So,variable:"",imports:{_}},_.prototype=Xo.prototype,_.prototype.constructor=_,un.prototype=ii(Xo.prototype),un.prototype.constructor=un;function Re(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=re,this.__views__=[]}function vm(){var t=new Re(this.__wrapped__);return t.__actions__=Pt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Pt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Pt(this.__views__),t}function Dm(){if(this.__filtered__){var t=new Re(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function xm(){var t=this.__wrapped__.value(),i=this.__dir__,a=xe(t),f=i<0,v=a?t.length:0,w=I1(0,v,this.__views__),B=w.start,I=w.end,O=I-B,X=f?I:B-1,Z=this.__iteratees__,ne=Z.length,se=0,le=bt(O,this.__takeCount__);if(!a||!f&&v==O&&le==O)return Ed(t,this.__actions__);var me=[];e:for(;O--&&se<le;){X+=i;for(var Ce=-1,ye=t[X];++Ce<ne;){var Be=Z[Ce],Oe=Be.iteratee,Zt=Be.type,Bt=Oe(ye);if(Zt==$)ye=Bt;else if(!Bt){if(Zt==N)continue e;break e}}me[se++]=ye}return me}Re.prototype=ii(Xo.prototype),Re.prototype.constructor=Re;function Nr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var f=t[i];this.set(f[0],f[1])}}function _m(){this.__data__=Hi?Hi(null):{},this.size=0}function wm(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function Cm(t){var i=this.__data__;if(Hi){var a=i[t];return a===d?r:a}return Le.call(i,t)?i[t]:r}function Em(t){var i=this.__data__;return Hi?i[t]!==r:Le.call(i,t)}function bm(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Hi&&i===r?d:i,this}Nr.prototype.clear=_m,Nr.prototype.delete=wm,Nr.prototype.get=Cm,Nr.prototype.has=Em,Nr.prototype.set=bm;function jn(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var f=t[i];this.set(f[0],f[1])}}function Am(){this.__data__=[],this.size=0}function Sm(t){var i=this.__data__,a=Zo(i,t);if(a<0)return!1;var f=i.length-1;return a==f?i.pop():Vo.call(i,a,1),--this.size,!0}function Fm(t){var i=this.__data__,a=Zo(i,t);return a<0?r:i[a][1]}function Nm(t){return Zo(this.__data__,t)>-1}function Tm(t,i){var a=this.__data__,f=Zo(a,t);return f<0?(++this.size,a.push([t,i])):a[f][1]=i,this}jn.prototype.clear=Am,jn.prototype.delete=Sm,jn.prototype.get=Fm,jn.prototype.has=Nm,jn.prototype.set=Tm;function Vn(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var f=t[i];this.set(f[0],f[1])}}function Bm(){this.size=0,this.__data__={hash:new Nr,map:new($i||jn),string:new Nr}}function Im(t){var i=us(this,t).delete(t);return this.size-=i?1:0,i}function Rm(t){return us(this,t).get(t)}function Mm(t){return us(this,t).has(t)}function zm(t,i){var a=us(this,t),f=a.size;return a.set(t,i),this.size+=a.size==f?0:1,this}Vn.prototype.clear=Bm,Vn.prototype.delete=Im,Vn.prototype.get=Rm,Vn.prototype.has=Mm,Vn.prototype.set=zm;function Tr(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new Vn;++i<a;)this.add(t[i])}function Om(t){return this.__data__.set(t,d),this}function Pm(t){return this.__data__.has(t)}Tr.prototype.add=Tr.prototype.push=Om,Tr.prototype.has=Pm;function xn(t){var i=this.__data__=new jn(t);this.size=i.size}function $m(){this.__data__=new jn,this.size=0}function km(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}function Hm(t){return this.__data__.get(t)}function Lm(t){return this.__data__.has(t)}function jm(t,i){var a=this.__data__;if(a instanceof jn){var f=a.__data__;if(!$i||f.length<s-1)return f.push([t,i]),this.size=++a.size,this;a=this.__data__=new Vn(f)}return a.set(t,i),this.size=a.size,this}xn.prototype.clear=$m,xn.prototype.delete=km,xn.prototype.get=Hm,xn.prototype.has=Lm,xn.prototype.set=jm;function td(t,i){var a=xe(t),f=!a&&zr(t),v=!a&&!f&&pr(t),w=!a&&!f&&!v&&ui(t),B=a||f||v||w,I=B?Za(t.length,Jg):[],O=I.length;for(var X in t)(i||Le.call(t,X))&&!(B&&(X=="length"||v&&(X=="offset"||X=="parent")||w&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||Un(X,O)))&&I.push(X);return I}function nd(t){var i=t.length;return i?t[hu(0,i-1)]:r}function Vm(t,i){return cs(Pt(t),Br(i,0,t.length))}function qm(t){return cs(Pt(t))}function ru(t,i,a){(a!==r&&!_n(t[i],a)||a===r&&!(i in t))&&qn(t,i,a)}function ji(t,i,a){var f=t[i];(!(Le.call(t,i)&&_n(f,a))||a===r&&!(i in t))&&qn(t,i,a)}function Zo(t,i){for(var a=t.length;a--;)if(_n(t[a][0],i))return a;return-1}function Gm(t,i,a,f){return lr(t,function(v,w,B){i(f,v,a(v),B)}),f}function rd(t,i){return t&&Rn(i,ht(i),t)}function Wm(t,i){return t&&Rn(i,kt(i),t)}function qn(t,i,a){i=="__proto__"&&qo?qo(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function iu(t,i){for(var a=-1,f=i.length,v=V(f),w=t==null;++a<f;)v[a]=w?r:$u(t,i[a]);return v}function Br(t,i,a){return t===t&&(a!==r&&(t=t<=a?t:a),i!==r&&(t=t>=i?t:i)),t}function cn(t,i,a,f,v,w){var B,I=i&g,O=i&m,X=i&x;if(a&&(B=v?a(t,f,v,w):a(t)),B!==r)return B;if(!et(t))return t;var Z=xe(t);if(Z){if(B=M1(t),!I)return Pt(t,B)}else{var ne=At(t),se=ne==Dt||ne==Mt;if(pr(t))return Sd(t,I);if(ne==ze||ne==ge||se&&!v){if(B=O||se?{}:Wd(t),!I)return O?C1(t,Wm(B,t)):w1(t,rd(B,t))}else{if(!Ve[ne])return v?t:{};B=z1(t,ne,I)}}w||(w=new xn);var le=w.get(t);if(le)return le;w.set(t,B),wf(t)?t.forEach(function(ye){B.add(cn(ye,i,a,ye,t,w))}):xf(t)&&t.forEach(function(ye,Be){B.set(Be,cn(ye,i,a,Be,t,w))});var me=X?O?Eu:Cu:O?kt:ht,Ce=Z?r:me(t);return sn(Ce||t,function(ye,Be){Ce&&(Be=ye,ye=t[Be]),ji(B,Be,cn(ye,i,a,Be,t,w))}),B}function Um(t){var i=ht(t);return function(a){return id(a,t,i)}}function id(t,i,a){var f=a.length;if(t==null)return!f;for(t=je(t);f--;){var v=a[f],w=i[v],B=t[v];if(B===r&&!(v in t)||!w(B))return!1}return!0}function od(t,i,a){if(typeof t!="function")throw new an(u);return Xi(function(){t.apply(r,a)},i)}function Vi(t,i,a,f){var v=-1,w=Ro,B=!0,I=t.length,O=[],X=i.length;if(!I)return O;a&&(i=Ke(i,Ut(a))),f?(w=qa,B=!1):i.length>=s&&(w=Oi,B=!1,i=new Tr(i));e:for(;++v<I;){var Z=t[v],ne=a==null?Z:a(Z);if(Z=f||Z!==0?Z:0,B&&ne===ne){for(var se=X;se--;)if(i[se]===ne)continue e;O.push(Z)}else w(i,ne,f)||O.push(Z)}return O}var lr=Id(In),sd=Id(su,!0);function Ym(t,i){var a=!0;return lr(t,function(f,v,w){return a=!!i(f,v,w),a}),a}function Ko(t,i,a){for(var f=-1,v=t.length;++f<v;){var w=t[f],B=i(w);if(B!=null&&(I===r?B===B&&!Xt(B):a(B,I)))var I=B,O=w}return O}function Xm(t,i,a,f){var v=t.length;for(a=we(a),a<0&&(a=-a>v?0:v+a),f=f===r||f>v?v:we(f),f<0&&(f+=v),f=a>f?0:Ef(f);a<f;)t[a++]=i;return t}function ad(t,i){var a=[];return lr(t,function(f,v,w){i(f,v,w)&&a.push(f)}),a}function wt(t,i,a,f,v){var w=-1,B=t.length;for(a||(a=P1),v||(v=[]);++w<B;){var I=t[w];i>0&&a(I)?i>1?wt(I,i-1,a,f,v):ar(v,I):f||(v[v.length]=I)}return v}var ou=Rd(),ud=Rd(!0);function In(t,i){return t&&ou(t,i,ht)}function su(t,i){return t&&ud(t,i,ht)}function Jo(t,i){return sr(i,function(a){return Yn(t[a])})}function Ir(t,i){i=fr(i,t);for(var a=0,f=i.length;t!=null&&a<f;)t=t[Mn(i[a++])];return a&&a==f?t:r}function cd(t,i,a){var f=i(t);return xe(t)?f:ar(f,a(t))}function Nt(t){return t==null?t===r?gn:tn:Fr&&Fr in je(t)?B1(t):q1(t)}function au(t,i){return t>i}function Zm(t,i){return t!=null&&Le.call(t,i)}function Km(t,i){return t!=null&&i in je(t)}function Jm(t,i,a){return t>=bt(i,a)&&t<dt(i,a)}function uu(t,i,a){for(var f=a?qa:Ro,v=t[0].length,w=t.length,B=w,I=V(w),O=1/0,X=[];B--;){var Z=t[B];B&&i&&(Z=Ke(Z,Ut(i))),O=bt(Z.length,O),I[B]=!a&&(i||v>=120&&Z.length>=120)?new Tr(B&&Z):r}Z=t[0];var ne=-1,se=I[0];e:for(;++ne<v&&X.length<O;){var le=Z[ne],me=i?i(le):le;if(le=a||le!==0?le:0,!(se?Oi(se,me):f(X,me,a))){for(B=w;--B;){var Ce=I[B];if(!(Ce?Oi(Ce,me):f(t[B],me,a)))continue e}se&&se.push(me),X.push(le)}}return X}function Qm(t,i,a,f){return In(t,function(v,w,B){i(f,a(v),w,B)}),f}function qi(t,i,a){i=fr(i,t),t=Zd(t,i);var f=t==null?t:t[Mn(dn(i))];return f==null?r:Wt(f,t,a)}function ld(t){return tt(t)&&Nt(t)==ge}function e1(t){return tt(t)&&Nt(t)==qt}function t1(t){return tt(t)&&Nt(t)==ve}function Gi(t,i,a,f,v){return t===i?!0:t==null||i==null||!tt(t)&&!tt(i)?t!==t&&i!==i:n1(t,i,a,f,Gi,v)}function n1(t,i,a,f,v,w){var B=xe(t),I=xe(i),O=B?Ae:At(t),X=I?Ae:At(i);O=O==ge?ze:O,X=X==ge?ze:X;var Z=O==ze,ne=X==ze,se=O==X;if(se&&pr(t)){if(!pr(i))return!1;B=!0,Z=!1}if(se&&!Z)return w||(w=new xn),B||ui(t)?Vd(t,i,a,f,v,w):N1(t,i,O,a,f,v,w);if(!(a&C)){var le=Z&&Le.call(t,"__wrapped__"),me=ne&&Le.call(i,"__wrapped__");if(le||me){var Ce=le?t.value():t,ye=me?i.value():i;return w||(w=new xn),v(Ce,ye,a,f,w)}}return se?(w||(w=new xn),T1(t,i,a,f,v,w)):!1}function r1(t){return tt(t)&&At(t)==Ze}function cu(t,i,a,f){var v=a.length,w=v,B=!f;if(t==null)return!w;for(t=je(t);v--;){var I=a[v];if(B&&I[2]?I[1]!==t[I[0]]:!(I[0]in t))return!1}for(;++v<w;){I=a[v];var O=I[0],X=t[O],Z=I[1];if(B&&I[2]){if(X===r&&!(O in t))return!1}else{var ne=new xn;if(f)var se=f(X,Z,O,t,i,ne);if(!(se===r?Gi(Z,X,C|D,f,ne):se))return!1}}return!0}function dd(t){if(!et(t)||k1(t))return!1;var i=Yn(t)?rm:Sa;return i.test(Mr(t))}function i1(t){return tt(t)&&Nt(t)==Vt}function o1(t){return tt(t)&&At(t)==xt}function s1(t){return tt(t)&&gs(t.length)&&!!We[Nt(t)]}function fd(t){return typeof t=="function"?t:t==null?Ht:typeof t=="object"?xe(t)?gd(t[0],t[1]):pd(t):zf(t)}function lu(t){if(!Yi(t))return cm(t);var i=[];for(var a in je(t))Le.call(t,a)&&a!="constructor"&&i.push(a);return i}function a1(t){if(!et(t))return V1(t);var i=Yi(t),a=[];for(var f in t)f=="constructor"&&(i||!Le.call(t,f))||a.push(f);return a}function du(t,i){return t<i}function hd(t,i){var a=-1,f=$t(t)?V(t.length):[];return lr(t,function(v,w,B){f[++a]=i(v,w,B)}),f}function pd(t){var i=Au(t);return i.length==1&&i[0][2]?Yd(i[0][0],i[0][1]):function(a){return a===t||cu(a,t,i)}}function gd(t,i){return Fu(t)&&Ud(i)?Yd(Mn(t),i):function(a){var f=$u(a,t);return f===r&&f===i?ku(a,t):Gi(i,f,C|D)}}function Qo(t,i,a,f,v){t!==i&&ou(i,function(w,B){if(v||(v=new xn),et(w))u1(t,i,B,a,Qo,f,v);else{var I=f?f(Tu(t,B),w,B+"",t,i,v):r;I===r&&(I=w),ru(t,B,I)}},kt)}function u1(t,i,a,f,v,w,B){var I=Tu(t,a),O=Tu(i,a),X=B.get(O);if(X){ru(t,a,X);return}var Z=w?w(I,O,a+"",t,i,B):r,ne=Z===r;if(ne){var se=xe(O),le=!se&&pr(O),me=!se&&!le&&ui(O);Z=O,se||le||me?xe(I)?Z=I:it(I)?Z=Pt(I):le?(ne=!1,Z=Sd(O,!0)):me?(ne=!1,Z=Fd(O,!0)):Z=[]:Zi(O)||zr(O)?(Z=I,zr(I)?Z=bf(I):(!et(I)||Yn(I))&&(Z=Wd(O))):ne=!1}ne&&(B.set(O,Z),v(Z,O,f,w,B),B.delete(O)),ru(t,a,Z)}function md(t,i){var a=t.length;if(a)return i+=i<0?a:0,Un(i,a)?t[i]:r}function yd(t,i,a){i.length?i=Ke(i,function(w){return xe(w)?function(B){return Ir(B,w.length===1?w[0]:w)}:w}):i=[Ht];var f=-1;i=Ke(i,Ut(pe()));var v=hd(t,function(w,B,I){var O=Ke(i,function(X){return X(w)});return{criteria:O,index:++f,value:w}});return zg(v,function(w,B){return _1(w,B,a)})}function c1(t,i){return vd(t,i,function(a,f){return ku(t,f)})}function vd(t,i,a){for(var f=-1,v=i.length,w={};++f<v;){var B=i[f],I=Ir(t,B);a(I,B)&&Wi(w,fr(B,t),I)}return w}function l1(t){return function(i){return Ir(i,t)}}function fu(t,i,a,f){var v=f?Mg:Kr,w=-1,B=i.length,I=t;for(t===i&&(i=Pt(i)),a&&(I=Ke(t,Ut(a)));++w<B;)for(var O=0,X=i[w],Z=a?a(X):X;(O=v(I,Z,O,f))>-1;)I!==t&&Vo.call(I,O,1),Vo.call(t,O,1);return t}function Dd(t,i){for(var a=t?i.length:0,f=a-1;a--;){var v=i[a];if(a==f||v!==w){var w=v;Un(v)?Vo.call(t,v,1):mu(t,v)}}return t}function hu(t,i){return t+Wo(Ql()*(i-t+1))}function d1(t,i,a,f){for(var v=-1,w=dt(Go((i-t)/(a||1)),0),B=V(w);w--;)B[f?w:++v]=t,t+=a;return B}function pu(t,i){var a="";if(!t||i<1||i>ee)return a;do i%2&&(a+=t),i=Wo(i/2),i&&(t+=t);while(i);return a}function be(t,i){return Bu(Xd(t,i,Ht),t+"")}function f1(t){return nd(ci(t))}function h1(t,i){var a=ci(t);return cs(a,Br(i,0,a.length))}function Wi(t,i,a,f){if(!et(t))return t;i=fr(i,t);for(var v=-1,w=i.length,B=w-1,I=t;I!=null&&++v<w;){var O=Mn(i[v]),X=a;if(O==="__proto__"||O==="constructor"||O==="prototype")return t;if(v!=B){var Z=I[O];X=f?f(Z,O,I):r,X===r&&(X=et(Z)?Z:Un(i[v+1])?[]:{})}ji(I,O,X),I=I[O]}return t}var xd=Uo?function(t,i){return Uo.set(t,i),t}:Ht,p1=qo?function(t,i){return qo(t,"toString",{configurable:!0,enumerable:!1,value:Lu(i),writable:!0})}:Ht;function g1(t){return cs(ci(t))}function ln(t,i,a){var f=-1,v=t.length;i<0&&(i=-i>v?0:v+i),a=a>v?v:a,a<0&&(a+=v),v=i>a?0:a-i>>>0,i>>>=0;for(var w=V(v);++f<v;)w[f]=t[f+i];return w}function m1(t,i){var a;return lr(t,function(f,v,w){return a=i(f,v,w),!a}),!!a}function es(t,i,a){var f=0,v=t==null?f:t.length;if(typeof i=="number"&&i===i&&v<=ce){for(;f<v;){var w=f+v>>>1,B=t[w];B!==null&&!Xt(B)&&(a?B<=i:B<i)?f=w+1:v=w}return v}return gu(t,i,Ht,a)}function gu(t,i,a,f){var v=0,w=t==null?0:t.length;if(w===0)return 0;i=a(i);for(var B=i!==i,I=i===null,O=Xt(i),X=i===r;v<w;){var Z=Wo((v+w)/2),ne=a(t[Z]),se=ne!==r,le=ne===null,me=ne===ne,Ce=Xt(ne);if(B)var ye=f||me;else X?ye=me&&(f||se):I?ye=me&&se&&(f||!le):O?ye=me&&se&&!le&&(f||!Ce):le||Ce?ye=!1:ye=f?ne<=i:ne<i;ye?v=Z+1:w=Z}return bt(w,oe)}function _d(t,i){for(var a=-1,f=t.length,v=0,w=[];++a<f;){var B=t[a],I=i?i(B):B;if(!a||!_n(I,O)){var O=I;w[v++]=B===0?0:B}}return w}function wd(t){return typeof t=="number"?t:Xt(t)?te:+t}function Yt(t){if(typeof t=="string")return t;if(xe(t))return Ke(t,Yt)+"";if(Xt(t))return ed?ed.call(t):"";var i=t+"";return i=="0"&&1/t==-q?"-0":i}function dr(t,i,a){var f=-1,v=Ro,w=t.length,B=!0,I=[],O=I;if(a)B=!1,v=qa;else if(w>=s){var X=i?null:S1(t);if(X)return zo(X);B=!1,v=Oi,O=new Tr}else O=i?[]:I;e:for(;++f<w;){var Z=t[f],ne=i?i(Z):Z;if(Z=a||Z!==0?Z:0,B&&ne===ne){for(var se=O.length;se--;)if(O[se]===ne)continue e;i&&O.push(ne),I.push(Z)}else v(O,ne,a)||(O!==I&&O.push(ne),I.push(Z))}return I}function mu(t,i){return i=fr(i,t),t=Zd(t,i),t==null||delete t[Mn(dn(i))]}function Cd(t,i,a,f){return Wi(t,i,a(Ir(t,i)),f)}function ts(t,i,a,f){for(var v=t.length,w=f?v:-1;(f?w--:++w<v)&&i(t[w],w,t););return a?ln(t,f?0:w,f?w+1:v):ln(t,f?w+1:0,f?v:w)}function Ed(t,i){var a=t;return a instanceof Re&&(a=a.value()),Ga(i,function(f,v){return v.func.apply(v.thisArg,ar([f],v.args))},a)}function yu(t,i,a){var f=t.length;if(f<2)return f?dr(t[0]):[];for(var v=-1,w=V(f);++v<f;)for(var B=t[v],I=-1;++I<f;)I!=v&&(w[v]=Vi(w[v]||B,t[I],i,a));return dr(wt(w,1),i,a)}function bd(t,i,a){for(var f=-1,v=t.length,w=i.length,B={};++f<v;){var I=f<w?i[f]:r;a(B,t[f],I)}return B}function vu(t){return it(t)?t:[]}function Du(t){return typeof t=="function"?t:Ht}function fr(t,i){return xe(t)?t:Fu(t,i)?[t]:ef(He(t))}var y1=be;function hr(t,i,a){var f=t.length;return a=a===r?f:a,!i&&a>=f?t:ln(t,i,a)}var Ad=im||function(t){return _t.clearTimeout(t)};function Sd(t,i){if(i)return t.slice();var a=t.length,f=Yl?Yl(a):new t.constructor(a);return t.copy(f),f}function xu(t){var i=new t.constructor(t.byteLength);return new Lo(i).set(new Lo(t)),i}function v1(t,i){var a=i?xu(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function D1(t){var i=new t.constructor(t.source,No.exec(t));return i.lastIndex=t.lastIndex,i}function x1(t){return Li?je(Li.call(t)):{}}function Fd(t,i){var a=i?xu(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Nd(t,i){if(t!==i){var a=t!==r,f=t===null,v=t===t,w=Xt(t),B=i!==r,I=i===null,O=i===i,X=Xt(i);if(!I&&!X&&!w&&t>i||w&&B&&O&&!I&&!X||f&&B&&O||!a&&O||!v)return 1;if(!f&&!w&&!X&&t<i||X&&a&&v&&!f&&!w||I&&a&&v||!B&&v||!O)return-1}return 0}function _1(t,i,a){for(var f=-1,v=t.criteria,w=i.criteria,B=v.length,I=a.length;++f<B;){var O=Nd(v[f],w[f]);if(O){if(f>=I)return O;var X=a[f];return O*(X=="desc"?-1:1)}}return t.index-i.index}function Td(t,i,a,f){for(var v=-1,w=t.length,B=a.length,I=-1,O=i.length,X=dt(w-B,0),Z=V(O+X),ne=!f;++I<O;)Z[I]=i[I];for(;++v<B;)(ne||v<w)&&(Z[a[v]]=t[v]);for(;X--;)Z[I++]=t[v++];return Z}function Bd(t,i,a,f){for(var v=-1,w=t.length,B=-1,I=a.length,O=-1,X=i.length,Z=dt(w-I,0),ne=V(Z+X),se=!f;++v<Z;)ne[v]=t[v];for(var le=v;++O<X;)ne[le+O]=i[O];for(;++B<I;)(se||v<w)&&(ne[le+a[B]]=t[v++]);return ne}function Pt(t,i){var a=-1,f=t.length;for(i||(i=V(f));++a<f;)i[a]=t[a];return i}function Rn(t,i,a,f){var v=!a;a||(a={});for(var w=-1,B=i.length;++w<B;){var I=i[w],O=f?f(a[I],t[I],I,a,t):r;O===r&&(O=t[I]),v?qn(a,I,O):ji(a,I,O)}return a}function w1(t,i){return Rn(t,Su(t),i)}function C1(t,i){return Rn(t,qd(t),i)}function ns(t,i){return function(a,f){var v=xe(a)?Fg:Gm,w=i?i():{};return v(a,t,pe(f,2),w)}}function oi(t){return be(function(i,a){var f=-1,v=a.length,w=v>1?a[v-1]:r,B=v>2?a[2]:r;for(w=t.length>3&&typeof w=="function"?(v--,w):r,B&&Tt(a[0],a[1],B)&&(w=v<3?r:w,v=1),i=je(i);++f<v;){var I=a[f];I&&t(i,I,f,w)}return i})}function Id(t,i){return function(a,f){if(a==null)return a;if(!$t(a))return t(a,f);for(var v=a.length,w=i?v:-1,B=je(a);(i?w--:++w<v)&&f(B[w],w,B)!==!1;);return a}}function Rd(t){return function(i,a,f){for(var v=-1,w=je(i),B=f(i),I=B.length;I--;){var O=B[t?I:++v];if(a(w[O],O,w)===!1)break}return i}}function E1(t,i,a){var f=i&E,v=Ui(t);function w(){var B=this&&this!==_t&&this instanceof w?v:t;return B.apply(f?a:this,arguments)}return w}function Md(t){return function(i){i=He(i);var a=Jr(i)?Dn(i):r,f=a?a[0]:i.charAt(0),v=a?hr(a,1).join(""):i.slice(1);return f[t]()+v}}function si(t){return function(i){return Ga(Rf(If(i).replace(pg,"")),t,"")}}function Ui(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=ii(t.prototype),f=t.apply(a,i);return et(f)?f:a}}function b1(t,i,a){var f=Ui(t);function v(){for(var w=arguments.length,B=V(w),I=w,O=ai(v);I--;)B[I]=arguments[I];var X=w<3&&B[0]!==O&&B[w-1]!==O?[]:ur(B,O);if(w-=X.length,w<a)return kd(t,i,rs,v.placeholder,r,B,X,r,r,a-w);var Z=this&&this!==_t&&this instanceof v?f:t;return Wt(Z,this,B)}return v}function zd(t){return function(i,a,f){var v=je(i);if(!$t(i)){var w=pe(a,3);i=ht(i),a=function(I){return w(v[I],I,v)}}var B=t(i,a,f);return B>-1?v[w?i[B]:B]:r}}function Od(t){return Wn(function(i){var a=i.length,f=a,v=un.prototype.thru;for(t&&i.reverse();f--;){var w=i[f];if(typeof w!="function")throw new an(u);if(v&&!B&&as(w)=="wrapper")var B=new un([],!0)}for(f=B?f:a;++f<a;){w=i[f];var I=as(w),O=I=="wrapper"?bu(w):r;O&&Nu(O[0])&&O[1]==(j|T|R|Y)&&!O[4].length&&O[9]==1?B=B[as(O[0])].apply(B,O[3]):B=w.length==1&&Nu(w)?B[I]():B.thru(w)}return function(){var X=arguments,Z=X[0];if(B&&X.length==1&&xe(Z))return B.plant(Z).value();for(var ne=0,se=a?i[ne].apply(this,X):Z;++ne<a;)se=i[ne].call(this,se);return se}})}function rs(t,i,a,f,v,w,B,I,O,X){var Z=i&j,ne=i&E,se=i&y,le=i&(T|F),me=i&z,Ce=se?r:Ui(t);function ye(){for(var Be=arguments.length,Oe=V(Be),Zt=Be;Zt--;)Oe[Zt]=arguments[Zt];if(le)var Bt=ai(ye),Kt=Pg(Oe,Bt);if(f&&(Oe=Td(Oe,f,v,le)),w&&(Oe=Bd(Oe,w,B,le)),Be-=Kt,le&&Be<X){var ot=ur(Oe,Bt);return kd(t,i,rs,ye.placeholder,a,Oe,ot,I,O,X-Be)}var wn=ne?a:this,Zn=se?wn[t]:t;return Be=Oe.length,I?Oe=G1(Oe,I):me&&Be>1&&Oe.reverse(),Z&&O<Be&&(Oe.length=O),this&&this!==_t&&this instanceof ye&&(Zn=Ce||Ui(Zn)),Zn.apply(wn,Oe)}return ye}function Pd(t,i){return function(a,f){return Qm(a,t,i(f),{})}}function is(t,i){return function(a,f){var v;if(a===r&&f===r)return i;if(a!==r&&(v=a),f!==r){if(v===r)return f;typeof a=="string"||typeof f=="string"?(a=Yt(a),f=Yt(f)):(a=wd(a),f=wd(f)),v=t(a,f)}return v}}function _u(t){return Wn(function(i){return i=Ke(i,Ut(pe())),be(function(a){var f=this;return t(i,function(v){return Wt(v,f,a)})})})}function os(t,i){i=i===r?" ":Yt(i);var a=i.length;if(a<2)return a?pu(i,t):i;var f=pu(i,Go(t/Qr(i)));return Jr(i)?hr(Dn(f),0,t).join(""):f.slice(0,t)}function A1(t,i,a,f){var v=i&E,w=Ui(t);function B(){for(var I=-1,O=arguments.length,X=-1,Z=f.length,ne=V(Z+O),se=this&&this!==_t&&this instanceof B?w:t;++X<Z;)ne[X]=f[X];for(;O--;)ne[X++]=arguments[++I];return Wt(se,v?a:this,ne)}return B}function $d(t){return function(i,a,f){return f&&typeof f!="number"&&Tt(i,a,f)&&(a=f=r),i=Xn(i),a===r?(a=i,i=0):a=Xn(a),f=f===r?i<a?1:-1:Xn(f),d1(i,a,f,t)}}function ss(t){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=fn(i),a=fn(a)),t(i,a)}}function kd(t,i,a,f,v,w,B,I,O,X){var Z=i&T,ne=Z?B:r,se=Z?r:B,le=Z?w:r,me=Z?r:w;i|=Z?R:k,i&=~(Z?k:R),i&S||(i&=~(E|y));var Ce=[t,i,v,le,ne,me,se,I,O,X],ye=a.apply(r,Ce);return Nu(t)&&Kd(ye,Ce),ye.placeholder=f,Jd(ye,t,i)}function wu(t){var i=lt[t];return function(a,f){if(a=fn(a),f=f==null?0:bt(we(f),292),f&&Jl(a)){var v=(He(a)+"e").split("e"),w=i(v[0]+"e"+(+v[1]+f));return v=(He(w)+"e").split("e"),+(v[0]+"e"+(+v[1]-f))}return i(a)}}var S1=ni&&1/zo(new ni([,-0]))[1]==q?function(t){return new ni(t)}:qu;function Hd(t){return function(i){var a=At(i);return a==Ze?Ja(i):a==xt?qg(i):Og(i,t(i))}}function Gn(t,i,a,f,v,w,B,I){var O=i&y;if(!O&&typeof t!="function")throw new an(u);var X=f?f.length:0;if(X||(i&=~(R|k),f=v=r),B=B===r?B:dt(we(B),0),I=I===r?I:we(I),X-=v?v.length:0,i&k){var Z=f,ne=v;f=v=r}var se=O?r:bu(t),le=[t,i,a,f,v,Z,ne,w,B,I];if(se&&j1(le,se),t=le[0],i=le[1],a=le[2],f=le[3],v=le[4],I=le[9]=le[9]===r?O?0:t.length:dt(le[9]-X,0),!I&&i&(T|F)&&(i&=~(T|F)),!i||i==E)var me=E1(t,i,a);else i==T||i==F?me=b1(t,i,I):(i==R||i==(E|R))&&!v.length?me=A1(t,i,a,f):me=rs.apply(r,le);var Ce=se?xd:Kd;return Jd(Ce(me,le),t,i)}function Ld(t,i,a,f){return t===r||_n(t,ti[a])&&!Le.call(f,a)?i:t}function jd(t,i,a,f,v,w){return et(t)&&et(i)&&(w.set(i,t),Qo(t,i,r,jd,w),w.delete(i)),t}function F1(t){return Zi(t)?r:t}function Vd(t,i,a,f,v,w){var B=a&C,I=t.length,O=i.length;if(I!=O&&!(B&&O>I))return!1;var X=w.get(t),Z=w.get(i);if(X&&Z)return X==i&&Z==t;var ne=-1,se=!0,le=a&D?new Tr:r;for(w.set(t,i),w.set(i,t);++ne<I;){var me=t[ne],Ce=i[ne];if(f)var ye=B?f(Ce,me,ne,i,t,w):f(me,Ce,ne,t,i,w);if(ye!==r){if(ye)continue;se=!1;break}if(le){if(!Wa(i,function(Be,Oe){if(!Oi(le,Oe)&&(me===Be||v(me,Be,a,f,w)))return le.push(Oe)})){se=!1;break}}else if(!(me===Ce||v(me,Ce,a,f,w))){se=!1;break}}return w.delete(t),w.delete(i),se}function N1(t,i,a,f,v,w,B){switch(a){case Gt:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case qt:return!(t.byteLength!=i.byteLength||!w(new Lo(t),new Lo(i)));case he:case ve:case Ge:return _n(+t,+i);case Et:return t.name==i.name&&t.message==i.message;case Vt:case nn:return t==i+"";case Ze:var I=Ja;case xt:var O=f&C;if(I||(I=zo),t.size!=i.size&&!O)return!1;var X=B.get(t);if(X)return X==i;f|=D,B.set(t,i);var Z=Vd(I(t),I(i),f,v,w,B);return B.delete(t),Z;case pn:if(Li)return Li.call(t)==Li.call(i)}return!1}function T1(t,i,a,f,v,w){var B=a&C,I=Cu(t),O=I.length,X=Cu(i),Z=X.length;if(O!=Z&&!B)return!1;for(var ne=O;ne--;){var se=I[ne];if(!(B?se in i:Le.call(i,se)))return!1}var le=w.get(t),me=w.get(i);if(le&&me)return le==i&&me==t;var Ce=!0;w.set(t,i),w.set(i,t);for(var ye=B;++ne<O;){se=I[ne];var Be=t[se],Oe=i[se];if(f)var Zt=B?f(Oe,Be,se,i,t,w):f(Be,Oe,se,t,i,w);if(!(Zt===r?Be===Oe||v(Be,Oe,a,f,w):Zt)){Ce=!1;break}ye||(ye=se=="constructor")}if(Ce&&!ye){var Bt=t.constructor,Kt=i.constructor;Bt!=Kt&&"constructor"in t&&"constructor"in i&&!(typeof Bt=="function"&&Bt instanceof Bt&&typeof Kt=="function"&&Kt instanceof Kt)&&(Ce=!1)}return w.delete(t),w.delete(i),Ce}function Wn(t){return Bu(Xd(t,r,of),t+"")}function Cu(t){return cd(t,ht,Su)}function Eu(t){return cd(t,kt,qd)}var bu=Uo?function(t){return Uo.get(t)}:qu;function as(t){for(var i=t.name+"",a=ri[i],f=Le.call(ri,i)?a.length:0;f--;){var v=a[f],w=v.func;if(w==null||w==t)return v.name}return i}function ai(t){var i=Le.call(_,"placeholder")?_:t;return i.placeholder}function pe(){var t=_.iteratee||ju;return t=t===ju?fd:t,arguments.length?t(arguments[0],arguments[1]):t}function us(t,i){var a=t.__data__;return $1(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Au(t){for(var i=ht(t),a=i.length;a--;){var f=i[a],v=t[f];i[a]=[f,v,Ud(v)]}return i}function Rr(t,i){var a=Lg(t,i);return dd(a)?a:r}function B1(t){var i=Le.call(t,Fr),a=t[Fr];try{t[Fr]=r;var f=!0}catch{}var v=ko.call(t);return f&&(i?t[Fr]=a:delete t[Fr]),v}var Su=eu?function(t){return t==null?[]:(t=je(t),sr(eu(t),function(i){return Zl.call(t,i)}))}:Gu,qd=eu?function(t){for(var i=[];t;)ar(i,Su(t)),t=jo(t);return i}:Gu,At=Nt;(tu&&At(new tu(new ArrayBuffer(1)))!=Gt||$i&&At(new $i)!=Ze||nu&&At(nu.resolve())!=fe||ni&&At(new ni)!=xt||ki&&At(new ki)!=rn)&&(At=function(t){var i=Nt(t),a=i==ze?t.constructor:r,f=a?Mr(a):"";if(f)switch(f){case hm:return Gt;case pm:return Ze;case gm:return fe;case mm:return xt;case ym:return rn}return i});function I1(t,i,a){for(var f=-1,v=a.length;++f<v;){var w=a[f],B=w.size;switch(w.type){case"drop":t+=B;break;case"dropRight":i-=B;break;case"take":i=bt(i,t+B);break;case"takeRight":t=dt(t,i-B);break}}return{start:t,end:i}}function R1(t){var i=t.match(xa);return i?i[1].split(_a):[]}function Gd(t,i,a){i=fr(i,t);for(var f=-1,v=i.length,w=!1;++f<v;){var B=Mn(i[f]);if(!(w=t!=null&&a(t,B)))break;t=t[B]}return w||++f!=v?w:(v=t==null?0:t.length,!!v&&gs(v)&&Un(B,v)&&(xe(t)||zr(t)))}function M1(t){var i=t.length,a=new t.constructor(i);return i&&typeof t[0]=="string"&&Le.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Wd(t){return typeof t.constructor=="function"&&!Yi(t)?ii(jo(t)):{}}function z1(t,i,a){var f=t.constructor;switch(i){case qt:return xu(t);case he:case ve:return new f(+t);case Gt:return v1(t,a);case Tn:case Hn:case at:case zt:case mn:case yn:case Bn:case Ot:case vn:return Fd(t,a);case Ze:return new f;case Ge:case nn:return new f(t);case Vt:return D1(t);case xt:return new f;case pn:return x1(t)}}function O1(t,i){var a=i.length;if(!a)return t;var f=a-1;return i[f]=(a>1?"& ":"")+i[f],i=i.join(a>2?", ":" "),t.replace(Da,`{
/* [wrapped with `+i+`] */
`)}function P1(t){return xe(t)||zr(t)||!!(Kl&&t&&t[Kl])}function Un(t,i){var a=typeof t;return i=i??ee,!!i&&(a=="number"||a!="symbol"&&Na.test(t))&&t>-1&&t%1==0&&t<i}function Tt(t,i,a){if(!et(a))return!1;var f=typeof i;return(f=="number"?$t(a)&&Un(i,a.length):f=="string"&&i in a)?_n(a[i],t):!1}function Fu(t,i){if(xe(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Xt(t)?!0:ga.test(t)||!pa.test(t)||i!=null&&t in je(i)}function $1(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function Nu(t){var i=as(t),a=_[i];if(typeof a!="function"||!(i in Re.prototype))return!1;if(t===a)return!0;var f=bu(a);return!!f&&t===f[0]}function k1(t){return!!Ul&&Ul in t}var H1=Po?Yn:Wu;function Yi(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||ti;return t===a}function Ud(t){return t===t&&!et(t)}function Yd(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==r||t in je(a))}}function L1(t){var i=hs(t,function(f){return a.size===p&&a.clear(),f}),a=i.cache;return i}function j1(t,i){var a=t[1],f=i[1],v=a|f,w=v<(E|y|j),B=f==j&&a==T||f==j&&a==Y&&t[7].length<=i[8]||f==(j|Y)&&i[7].length<=i[8]&&a==T;if(!(w||B))return t;f&E&&(t[2]=i[2],v|=a&E?0:S);var I=i[3];if(I){var O=t[3];t[3]=O?Td(O,I,i[4]):I,t[4]=O?ur(t[3],h):i[4]}return I=i[5],I&&(O=t[5],t[5]=O?Bd(O,I,i[6]):I,t[6]=O?ur(t[5],h):i[6]),I=i[7],I&&(t[7]=I),f&j&&(t[8]=t[8]==null?i[8]:bt(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=v,t}function V1(t){var i=[];if(t!=null)for(var a in je(t))i.push(a);return i}function q1(t){return ko.call(t)}function Xd(t,i,a){return i=dt(i===r?t.length-1:i,0),function(){for(var f=arguments,v=-1,w=dt(f.length-i,0),B=V(w);++v<w;)B[v]=f[i+v];v=-1;for(var I=V(i+1);++v<i;)I[v]=f[v];return I[i]=a(B),Wt(t,this,I)}}function Zd(t,i){return i.length<2?t:Ir(t,ln(i,0,-1))}function G1(t,i){for(var a=t.length,f=bt(i.length,a),v=Pt(t);f--;){var w=i[f];t[f]=Un(w,a)?v[w]:r}return t}function Tu(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var Kd=Qd(xd),Xi=sm||function(t,i){return _t.setTimeout(t,i)},Bu=Qd(p1);function Jd(t,i,a){var f=i+"";return Bu(t,O1(f,W1(R1(f),a)))}function Qd(t){var i=0,a=0;return function(){var f=lm(),v=W-(f-a);if(a=f,v>0){if(++i>=J)return arguments[0]}else i=0;return t.apply(r,arguments)}}function cs(t,i){var a=-1,f=t.length,v=f-1;for(i=i===r?f:i;++a<i;){var w=hu(a,v),B=t[w];t[w]=t[a],t[a]=B}return t.length=i,t}var ef=L1(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(ma,function(a,f,v,w){i.push(v?w.replace(Fo,"$1"):f||a)}),i});function Mn(t){if(typeof t=="string"||Xt(t))return t;var i=t+"";return i=="0"&&1/t==-q?"-0":i}function Mr(t){if(t!=null){try{return $o.call(t)}catch{}try{return t+""}catch{}}return""}function W1(t,i){return sn(ue,function(a){var f="_."+a[0];i&a[1]&&!Ro(t,f)&&t.push(f)}),t.sort()}function tf(t){if(t instanceof Re)return t.clone();var i=new un(t.__wrapped__,t.__chain__);return i.__actions__=Pt(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function U1(t,i,a){(a?Tt(t,i,a):i===r)?i=1:i=dt(we(i),0);var f=t==null?0:t.length;if(!f||i<1)return[];for(var v=0,w=0,B=V(Go(f/i));v<f;)B[w++]=ln(t,v,v+=i);return B}function Y1(t){for(var i=-1,a=t==null?0:t.length,f=0,v=[];++i<a;){var w=t[i];w&&(v[f++]=w)}return v}function X1(){var t=arguments.length;if(!t)return[];for(var i=V(t-1),a=arguments[0],f=t;f--;)i[f-1]=arguments[f];return ar(xe(a)?Pt(a):[a],wt(i,1))}var Z1=be(function(t,i){return it(t)?Vi(t,wt(i,1,it,!0)):[]}),K1=be(function(t,i){var a=dn(i);return it(a)&&(a=r),it(t)?Vi(t,wt(i,1,it,!0),pe(a,2)):[]}),J1=be(function(t,i){var a=dn(i);return it(a)&&(a=r),it(t)?Vi(t,wt(i,1,it,!0),r,a):[]});function Q1(t,i,a){var f=t==null?0:t.length;return f?(i=a||i===r?1:we(i),ln(t,i<0?0:i,f)):[]}function ey(t,i,a){var f=t==null?0:t.length;return f?(i=a||i===r?1:we(i),i=f-i,ln(t,0,i<0?0:i)):[]}function ty(t,i){return t&&t.length?ts(t,pe(i,3),!0,!0):[]}function ny(t,i){return t&&t.length?ts(t,pe(i,3),!0):[]}function ry(t,i,a,f){var v=t==null?0:t.length;return v?(a&&typeof a!="number"&&Tt(t,i,a)&&(a=0,f=v),Xm(t,i,a,f)):[]}function nf(t,i,a){var f=t==null?0:t.length;if(!f)return-1;var v=a==null?0:we(a);return v<0&&(v=dt(f+v,0)),Mo(t,pe(i,3),v)}function rf(t,i,a){var f=t==null?0:t.length;if(!f)return-1;var v=f-1;return a!==r&&(v=we(a),v=a<0?dt(f+v,0):bt(v,f-1)),Mo(t,pe(i,3),v,!0)}function of(t){var i=t==null?0:t.length;return i?wt(t,1):[]}function iy(t){var i=t==null?0:t.length;return i?wt(t,q):[]}function oy(t,i){var a=t==null?0:t.length;return a?(i=i===r?1:we(i),wt(t,i)):[]}function sy(t){for(var i=-1,a=t==null?0:t.length,f={};++i<a;){var v=t[i];f[v[0]]=v[1]}return f}function sf(t){return t&&t.length?t[0]:r}function ay(t,i,a){var f=t==null?0:t.length;if(!f)return-1;var v=a==null?0:we(a);return v<0&&(v=dt(f+v,0)),Kr(t,i,v)}function uy(t){var i=t==null?0:t.length;return i?ln(t,0,-1):[]}var cy=be(function(t){var i=Ke(t,vu);return i.length&&i[0]===t[0]?uu(i):[]}),ly=be(function(t){var i=dn(t),a=Ke(t,vu);return i===dn(a)?i=r:a.pop(),a.length&&a[0]===t[0]?uu(a,pe(i,2)):[]}),dy=be(function(t){var i=dn(t),a=Ke(t,vu);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===t[0]?uu(a,r,i):[]});function fy(t,i){return t==null?"":um.call(t,i)}function dn(t){var i=t==null?0:t.length;return i?t[i-1]:r}function hy(t,i,a){var f=t==null?0:t.length;if(!f)return-1;var v=f;return a!==r&&(v=we(a),v=v<0?dt(f+v,0):bt(v,f-1)),i===i?Wg(t,i,v):Mo(t,kl,v,!0)}function py(t,i){return t&&t.length?md(t,we(i)):r}var gy=be(af);function af(t,i){return t&&t.length&&i&&i.length?fu(t,i):t}function my(t,i,a){return t&&t.length&&i&&i.length?fu(t,i,pe(a,2)):t}function yy(t,i,a){return t&&t.length&&i&&i.length?fu(t,i,r,a):t}var vy=Wn(function(t,i){var a=t==null?0:t.length,f=iu(t,i);return Dd(t,Ke(i,function(v){return Un(v,a)?+v:v}).sort(Nd)),f});function Dy(t,i){var a=[];if(!(t&&t.length))return a;var f=-1,v=[],w=t.length;for(i=pe(i,3);++f<w;){var B=t[f];i(B,f,t)&&(a.push(B),v.push(f))}return Dd(t,v),a}function Iu(t){return t==null?t:fm.call(t)}function xy(t,i,a){var f=t==null?0:t.length;return f?(a&&typeof a!="number"&&Tt(t,i,a)?(i=0,a=f):(i=i==null?0:we(i),a=a===r?f:we(a)),ln(t,i,a)):[]}function _y(t,i){return es(t,i)}function wy(t,i,a){return gu(t,i,pe(a,2))}function Cy(t,i){var a=t==null?0:t.length;if(a){var f=es(t,i);if(f<a&&_n(t[f],i))return f}return-1}function Ey(t,i){return es(t,i,!0)}function by(t,i,a){return gu(t,i,pe(a,2),!0)}function Ay(t,i){var a=t==null?0:t.length;if(a){var f=es(t,i,!0)-1;if(_n(t[f],i))return f}return-1}function Sy(t){return t&&t.length?_d(t):[]}function Fy(t,i){return t&&t.length?_d(t,pe(i,2)):[]}function Ny(t){var i=t==null?0:t.length;return i?ln(t,1,i):[]}function Ty(t,i,a){return t&&t.length?(i=a||i===r?1:we(i),ln(t,0,i<0?0:i)):[]}function By(t,i,a){var f=t==null?0:t.length;return f?(i=a||i===r?1:we(i),i=f-i,ln(t,i<0?0:i,f)):[]}function Iy(t,i){return t&&t.length?ts(t,pe(i,3),!1,!0):[]}function Ry(t,i){return t&&t.length?ts(t,pe(i,3)):[]}var My=be(function(t){return dr(wt(t,1,it,!0))}),zy=be(function(t){var i=dn(t);return it(i)&&(i=r),dr(wt(t,1,it,!0),pe(i,2))}),Oy=be(function(t){var i=dn(t);return i=typeof i=="function"?i:r,dr(wt(t,1,it,!0),r,i)});function Py(t){return t&&t.length?dr(t):[]}function $y(t,i){return t&&t.length?dr(t,pe(i,2)):[]}function ky(t,i){return i=typeof i=="function"?i:r,t&&t.length?dr(t,r,i):[]}function Ru(t){if(!(t&&t.length))return[];var i=0;return t=sr(t,function(a){if(it(a))return i=dt(a.length,i),!0}),Za(i,function(a){return Ke(t,Ua(a))})}function uf(t,i){if(!(t&&t.length))return[];var a=Ru(t);return i==null?a:Ke(a,function(f){return Wt(i,r,f)})}var Hy=be(function(t,i){return it(t)?Vi(t,i):[]}),Ly=be(function(t){return yu(sr(t,it))}),jy=be(function(t){var i=dn(t);return it(i)&&(i=r),yu(sr(t,it),pe(i,2))}),Vy=be(function(t){var i=dn(t);return i=typeof i=="function"?i:r,yu(sr(t,it),r,i)}),qy=be(Ru);function Gy(t,i){return bd(t||[],i||[],ji)}function Wy(t,i){return bd(t||[],i||[],Wi)}var Uy=be(function(t){var i=t.length,a=i>1?t[i-1]:r;return a=typeof a=="function"?(t.pop(),a):r,uf(t,a)});function cf(t){var i=_(t);return i.__chain__=!0,i}function Yy(t,i){return i(t),t}function ls(t,i){return i(t)}var Xy=Wn(function(t){var i=t.length,a=i?t[0]:0,f=this.__wrapped__,v=function(w){return iu(w,t)};return i>1||this.__actions__.length||!(f instanceof Re)||!Un(a)?this.thru(v):(f=f.slice(a,+a+(i?1:0)),f.__actions__.push({func:ls,args:[v],thisArg:r}),new un(f,this.__chain__).thru(function(w){return i&&!w.length&&w.push(r),w}))});function Zy(){return cf(this)}function Ky(){return new un(this.value(),this.__chain__)}function Jy(){this.__values__===r&&(this.__values__=Cf(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function Qy(){return this}function ev(t){for(var i,a=this;a instanceof Xo;){var f=tf(a);f.__index__=0,f.__values__=r,i?v.__wrapped__=f:i=f;var v=f;a=a.__wrapped__}return v.__wrapped__=t,i}function tv(){var t=this.__wrapped__;if(t instanceof Re){var i=t;return this.__actions__.length&&(i=new Re(this)),i=i.reverse(),i.__actions__.push({func:ls,args:[Iu],thisArg:r}),new un(i,this.__chain__)}return this.thru(Iu)}function nv(){return Ed(this.__wrapped__,this.__actions__)}var rv=ns(function(t,i,a){Le.call(t,a)?++t[a]:qn(t,a,1)});function iv(t,i,a){var f=xe(t)?Pl:Ym;return a&&Tt(t,i,a)&&(i=r),f(t,pe(i,3))}function ov(t,i){var a=xe(t)?sr:ad;return a(t,pe(i,3))}var sv=zd(nf),av=zd(rf);function uv(t,i){return wt(ds(t,i),1)}function cv(t,i){return wt(ds(t,i),q)}function lv(t,i,a){return a=a===r?1:we(a),wt(ds(t,i),a)}function lf(t,i){var a=xe(t)?sn:lr;return a(t,pe(i,3))}function df(t,i){var a=xe(t)?Ng:sd;return a(t,pe(i,3))}var dv=ns(function(t,i,a){Le.call(t,a)?t[a].push(i):qn(t,a,[i])});function fv(t,i,a,f){t=$t(t)?t:ci(t),a=a&&!f?we(a):0;var v=t.length;return a<0&&(a=dt(v+a,0)),ms(t)?a<=v&&t.indexOf(i,a)>-1:!!v&&Kr(t,i,a)>-1}var hv=be(function(t,i,a){var f=-1,v=typeof i=="function",w=$t(t)?V(t.length):[];return lr(t,function(B){w[++f]=v?Wt(i,B,a):qi(B,i,a)}),w}),pv=ns(function(t,i,a){qn(t,a,i)});function ds(t,i){var a=xe(t)?Ke:hd;return a(t,pe(i,3))}function gv(t,i,a,f){return t==null?[]:(xe(i)||(i=i==null?[]:[i]),a=f?r:a,xe(a)||(a=a==null?[]:[a]),yd(t,i,a))}var mv=ns(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]});function yv(t,i,a){var f=xe(t)?Ga:Ll,v=arguments.length<3;return f(t,pe(i,4),a,v,lr)}function vv(t,i,a){var f=xe(t)?Tg:Ll,v=arguments.length<3;return f(t,pe(i,4),a,v,sd)}function Dv(t,i){var a=xe(t)?sr:ad;return a(t,ps(pe(i,3)))}function xv(t){var i=xe(t)?nd:f1;return i(t)}function _v(t,i,a){(a?Tt(t,i,a):i===r)?i=1:i=we(i);var f=xe(t)?Vm:h1;return f(t,i)}function wv(t){var i=xe(t)?qm:g1;return i(t)}function Cv(t){if(t==null)return 0;if($t(t))return ms(t)?Qr(t):t.length;var i=At(t);return i==Ze||i==xt?t.size:lu(t).length}function Ev(t,i,a){var f=xe(t)?Wa:m1;return a&&Tt(t,i,a)&&(i=r),f(t,pe(i,3))}var bv=be(function(t,i){if(t==null)return[];var a=i.length;return a>1&&Tt(t,i[0],i[1])?i=[]:a>2&&Tt(i[0],i[1],i[2])&&(i=[i[0]]),yd(t,wt(i,1),[])}),fs=om||function(){return _t.Date.now()};function Av(t,i){if(typeof i!="function")throw new an(u);return t=we(t),function(){if(--t<1)return i.apply(this,arguments)}}function ff(t,i,a){return i=a?r:i,i=t&&i==null?t.length:i,Gn(t,j,r,r,r,r,i)}function hf(t,i){var a;if(typeof i!="function")throw new an(u);return t=we(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=r),a}}var Mu=be(function(t,i,a){var f=E;if(a.length){var v=ur(a,ai(Mu));f|=R}return Gn(t,f,i,a,v)}),pf=be(function(t,i,a){var f=E|y;if(a.length){var v=ur(a,ai(pf));f|=R}return Gn(i,f,t,a,v)});function gf(t,i,a){i=a?r:i;var f=Gn(t,T,r,r,r,r,r,i);return f.placeholder=gf.placeholder,f}function mf(t,i,a){i=a?r:i;var f=Gn(t,F,r,r,r,r,r,i);return f.placeholder=mf.placeholder,f}function yf(t,i,a){var f,v,w,B,I,O,X=0,Z=!1,ne=!1,se=!0;if(typeof t!="function")throw new an(u);i=fn(i)||0,et(a)&&(Z=!!a.leading,ne="maxWait"in a,w=ne?dt(fn(a.maxWait)||0,i):w,se="trailing"in a?!!a.trailing:se);function le(ot){var wn=f,Zn=v;return f=v=r,X=ot,B=t.apply(Zn,wn),B}function me(ot){return X=ot,I=Xi(Be,i),Z?le(ot):B}function Ce(ot){var wn=ot-O,Zn=ot-X,Of=i-wn;return ne?bt(Of,w-Zn):Of}function ye(ot){var wn=ot-O,Zn=ot-X;return O===r||wn>=i||wn<0||ne&&Zn>=w}function Be(){var ot=fs();if(ye(ot))return Oe(ot);I=Xi(Be,Ce(ot))}function Oe(ot){return I=r,se&&f?le(ot):(f=v=r,B)}function Zt(){I!==r&&Ad(I),X=0,f=O=v=I=r}function Bt(){return I===r?B:Oe(fs())}function Kt(){var ot=fs(),wn=ye(ot);if(f=arguments,v=this,O=ot,wn){if(I===r)return me(O);if(ne)return Ad(I),I=Xi(Be,i),le(O)}return I===r&&(I=Xi(Be,i)),B}return Kt.cancel=Zt,Kt.flush=Bt,Kt}var Sv=be(function(t,i){return od(t,1,i)}),Fv=be(function(t,i,a){return od(t,fn(i)||0,a)});function Nv(t){return Gn(t,z)}function hs(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new an(u);var a=function(){var f=arguments,v=i?i.apply(this,f):f[0],w=a.cache;if(w.has(v))return w.get(v);var B=t.apply(this,f);return a.cache=w.set(v,B)||w,B};return a.cache=new(hs.Cache||Vn),a}hs.Cache=Vn;function ps(t){if(typeof t!="function")throw new an(u);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function Tv(t){return hf(2,t)}var Bv=y1(function(t,i){i=i.length==1&&xe(i[0])?Ke(i[0],Ut(pe())):Ke(wt(i,1),Ut(pe()));var a=i.length;return be(function(f){for(var v=-1,w=bt(f.length,a);++v<w;)f[v]=i[v].call(this,f[v]);return Wt(t,this,f)})}),zu=be(function(t,i){var a=ur(i,ai(zu));return Gn(t,R,r,i,a)}),vf=be(function(t,i){var a=ur(i,ai(vf));return Gn(t,k,r,i,a)}),Iv=Wn(function(t,i){return Gn(t,Y,r,r,r,i)});function Rv(t,i){if(typeof t!="function")throw new an(u);return i=i===r?i:we(i),be(t,i)}function Mv(t,i){if(typeof t!="function")throw new an(u);return i=i==null?0:dt(we(i),0),be(function(a){var f=a[i],v=hr(a,0,i);return f&&ar(v,f),Wt(t,this,v)})}function zv(t,i,a){var f=!0,v=!0;if(typeof t!="function")throw new an(u);return et(a)&&(f="leading"in a?!!a.leading:f,v="trailing"in a?!!a.trailing:v),yf(t,i,{leading:f,maxWait:i,trailing:v})}function Ov(t){return ff(t,1)}function Pv(t,i){return zu(Du(i),t)}function $v(){if(!arguments.length)return[];var t=arguments[0];return xe(t)?t:[t]}function kv(t){return cn(t,x)}function Hv(t,i){return i=typeof i=="function"?i:r,cn(t,x,i)}function Lv(t){return cn(t,g|x)}function jv(t,i){return i=typeof i=="function"?i:r,cn(t,g|x,i)}function Vv(t,i){return i==null||id(t,i,ht(i))}function _n(t,i){return t===i||t!==t&&i!==i}var qv=ss(au),Gv=ss(function(t,i){return t>=i}),zr=ld(function(){return arguments}())?ld:function(t){return tt(t)&&Le.call(t,"callee")&&!Zl.call(t,"callee")},xe=V.isArray,Wv=Bl?Ut(Bl):e1;function $t(t){return t!=null&&gs(t.length)&&!Yn(t)}function it(t){return tt(t)&&$t(t)}function Uv(t){return t===!0||t===!1||tt(t)&&Nt(t)==he}var pr=am||Wu,Yv=Il?Ut(Il):t1;function Xv(t){return tt(t)&&t.nodeType===1&&!Zi(t)}function Zv(t){if(t==null)return!0;if($t(t)&&(xe(t)||typeof t=="string"||typeof t.splice=="function"||pr(t)||ui(t)||zr(t)))return!t.length;var i=At(t);if(i==Ze||i==xt)return!t.size;if(Yi(t))return!lu(t).length;for(var a in t)if(Le.call(t,a))return!1;return!0}function Kv(t,i){return Gi(t,i)}function Jv(t,i,a){a=typeof a=="function"?a:r;var f=a?a(t,i):r;return f===r?Gi(t,i,r,a):!!f}function Ou(t){if(!tt(t))return!1;var i=Nt(t);return i==Et||i==Te||typeof t.message=="string"&&typeof t.name=="string"&&!Zi(t)}function Qv(t){return typeof t=="number"&&Jl(t)}function Yn(t){if(!et(t))return!1;var i=Nt(t);return i==Dt||i==Mt||i==Se||i==Ft}function Df(t){return typeof t=="number"&&t==we(t)}function gs(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ee}function et(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function tt(t){return t!=null&&typeof t=="object"}var xf=Rl?Ut(Rl):r1;function eD(t,i){return t===i||cu(t,i,Au(i))}function tD(t,i,a){return a=typeof a=="function"?a:r,cu(t,i,Au(i),a)}function nD(t){return _f(t)&&t!=+t}function rD(t){if(H1(t))throw new De(c);return dd(t)}function iD(t){return t===null}function oD(t){return t==null}function _f(t){return typeof t=="number"||tt(t)&&Nt(t)==Ge}function Zi(t){if(!tt(t)||Nt(t)!=ze)return!1;var i=jo(t);if(i===null)return!0;var a=Le.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&$o.call(a)==tm}var Pu=Ml?Ut(Ml):i1;function sD(t){return Df(t)&&t>=-ee&&t<=ee}var wf=zl?Ut(zl):o1;function ms(t){return typeof t=="string"||!xe(t)&&tt(t)&&Nt(t)==nn}function Xt(t){return typeof t=="symbol"||tt(t)&&Nt(t)==pn}var ui=Ol?Ut(Ol):s1;function aD(t){return t===r}function uD(t){return tt(t)&&At(t)==rn}function cD(t){return tt(t)&&Nt(t)==kn}var lD=ss(du),dD=ss(function(t,i){return t<=i});function Cf(t){if(!t)return[];if($t(t))return ms(t)?Dn(t):Pt(t);if(Pi&&t[Pi])return Vg(t[Pi]());var i=At(t),a=i==Ze?Ja:i==xt?zo:ci;return a(t)}function Xn(t){if(!t)return t===0?t:0;if(t=fn(t),t===q||t===-q){var i=t<0?-1:1;return i*L}return t===t?t:0}function we(t){var i=Xn(t),a=i%1;return i===i?a?i-a:i:0}function Ef(t){return t?Br(we(t),0,re):0}function fn(t){if(typeof t=="number")return t;if(Xt(t))return te;if(et(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=et(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=jl(t);var a=Aa.test(t);return a||Fa.test(t)?Ag(t.slice(2),a?2:8):ba.test(t)?te:+t}function bf(t){return Rn(t,kt(t))}function fD(t){return t?Br(we(t),-ee,ee):t===0?t:0}function He(t){return t==null?"":Yt(t)}var hD=oi(function(t,i){if(Yi(i)||$t(i)){Rn(i,ht(i),t);return}for(var a in i)Le.call(i,a)&&ji(t,a,i[a])}),Af=oi(function(t,i){Rn(i,kt(i),t)}),ys=oi(function(t,i,a,f){Rn(i,kt(i),t,f)}),pD=oi(function(t,i,a,f){Rn(i,ht(i),t,f)}),gD=Wn(iu);function mD(t,i){var a=ii(t);return i==null?a:rd(a,i)}var yD=be(function(t,i){t=je(t);var a=-1,f=i.length,v=f>2?i[2]:r;for(v&&Tt(i[0],i[1],v)&&(f=1);++a<f;)for(var w=i[a],B=kt(w),I=-1,O=B.length;++I<O;){var X=B[I],Z=t[X];(Z===r||_n(Z,ti[X])&&!Le.call(t,X))&&(t[X]=w[X])}return t}),vD=be(function(t){return t.push(r,jd),Wt(Sf,r,t)});function DD(t,i){return $l(t,pe(i,3),In)}function xD(t,i){return $l(t,pe(i,3),su)}function _D(t,i){return t==null?t:ou(t,pe(i,3),kt)}function wD(t,i){return t==null?t:ud(t,pe(i,3),kt)}function CD(t,i){return t&&In(t,pe(i,3))}function ED(t,i){return t&&su(t,pe(i,3))}function bD(t){return t==null?[]:Jo(t,ht(t))}function AD(t){return t==null?[]:Jo(t,kt(t))}function $u(t,i,a){var f=t==null?r:Ir(t,i);return f===r?a:f}function SD(t,i){return t!=null&&Gd(t,i,Zm)}function ku(t,i){return t!=null&&Gd(t,i,Km)}var FD=Pd(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=ko.call(i)),t[i]=a},Lu(Ht)),ND=Pd(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=ko.call(i)),Le.call(t,i)?t[i].push(a):t[i]=[a]},pe),TD=be(qi);function ht(t){return $t(t)?td(t):lu(t)}function kt(t){return $t(t)?td(t,!0):a1(t)}function BD(t,i){var a={};return i=pe(i,3),In(t,function(f,v,w){qn(a,i(f,v,w),f)}),a}function ID(t,i){var a={};return i=pe(i,3),In(t,function(f,v,w){qn(a,v,i(f,v,w))}),a}var RD=oi(function(t,i,a){Qo(t,i,a)}),Sf=oi(function(t,i,a,f){Qo(t,i,a,f)}),MD=Wn(function(t,i){var a={};if(t==null)return a;var f=!1;i=Ke(i,function(w){return w=fr(w,t),f||(f=w.length>1),w}),Rn(t,Eu(t),a),f&&(a=cn(a,g|m|x,F1));for(var v=i.length;v--;)mu(a,i[v]);return a});function zD(t,i){return Ff(t,ps(pe(i)))}var OD=Wn(function(t,i){return t==null?{}:c1(t,i)});function Ff(t,i){if(t==null)return{};var a=Ke(Eu(t),function(f){return[f]});return i=pe(i),vd(t,a,function(f,v){return i(f,v[0])})}function PD(t,i,a){i=fr(i,t);var f=-1,v=i.length;for(v||(v=1,t=r);++f<v;){var w=t==null?r:t[Mn(i[f])];w===r&&(f=v,w=a),t=Yn(w)?w.call(t):w}return t}function $D(t,i,a){return t==null?t:Wi(t,i,a)}function kD(t,i,a,f){return f=typeof f=="function"?f:r,t==null?t:Wi(t,i,a,f)}var Nf=Hd(ht),Tf=Hd(kt);function HD(t,i,a){var f=xe(t),v=f||pr(t)||ui(t);if(i=pe(i,4),a==null){var w=t&&t.constructor;v?a=f?new w:[]:et(t)?a=Yn(w)?ii(jo(t)):{}:a={}}return(v?sn:In)(t,function(B,I,O){return i(a,B,I,O)}),a}function LD(t,i){return t==null?!0:mu(t,i)}function jD(t,i,a){return t==null?t:Cd(t,i,Du(a))}function VD(t,i,a,f){return f=typeof f=="function"?f:r,t==null?t:Cd(t,i,Du(a),f)}function ci(t){return t==null?[]:Ka(t,ht(t))}function qD(t){return t==null?[]:Ka(t,kt(t))}function GD(t,i,a){return a===r&&(a=i,i=r),a!==r&&(a=fn(a),a=a===a?a:0),i!==r&&(i=fn(i),i=i===i?i:0),Br(fn(t),i,a)}function WD(t,i,a){return i=Xn(i),a===r?(a=i,i=0):a=Xn(a),t=fn(t),Jm(t,i,a)}function UD(t,i,a){if(a&&typeof a!="boolean"&&Tt(t,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&i===r?(t=0,i=1):(t=Xn(t),i===r?(i=t,t=0):i=Xn(i)),t>i){var f=t;t=i,i=f}if(a||t%1||i%1){var v=Ql();return bt(t+v*(i-t+bg("1e-"+((v+"").length-1))),i)}return hu(t,i)}var YD=si(function(t,i,a){return i=i.toLowerCase(),t+(a?Bf(i):i)});function Bf(t){return Hu(He(t).toLowerCase())}function If(t){return t=He(t),t&&t.replace(Ta,$g).replace(gg,"")}function XD(t,i,a){t=He(t),i=Yt(i);var f=t.length;a=a===r?f:Br(we(a),0,f);var v=a;return a-=i.length,a>=0&&t.slice(a,v)==i}function ZD(t){return t=He(t),t&&da.test(t)?t.replace(Bi,kg):t}function KD(t){return t=He(t),t&&ya.test(t)?t.replace(Ii,"\\$&"):t}var JD=si(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),QD=si(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),ex=Md("toLowerCase");function tx(t,i,a){t=He(t),i=we(i);var f=i?Qr(t):0;if(!i||f>=i)return t;var v=(i-f)/2;return os(Wo(v),a)+t+os(Go(v),a)}function nx(t,i,a){t=He(t),i=we(i);var f=i?Qr(t):0;return i&&f<i?t+os(i-f,a):t}function rx(t,i,a){t=He(t),i=we(i);var f=i?Qr(t):0;return i&&f<i?os(i-f,a)+t:t}function ix(t,i,a){return a||i==null?i=0:i&&(i=+i),dm(He(t).replace(Ri,""),i||0)}function ox(t,i,a){return(a?Tt(t,i,a):i===r)?i=1:i=we(i),pu(He(t),i)}function sx(){var t=arguments,i=He(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var ax=si(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()});function ux(t,i,a){return a&&typeof a!="number"&&Tt(t,i,a)&&(i=a=r),a=a===r?re:a>>>0,a?(t=He(t),t&&(typeof i=="string"||i!=null&&!Pu(i))&&(i=Yt(i),!i&&Jr(t))?hr(Dn(t),0,a):t.split(i,a)):[]}var cx=si(function(t,i,a){return t+(a?" ":"")+Hu(i)});function lx(t,i,a){return t=He(t),a=a==null?0:Br(we(a),0,t.length),i=Yt(i),t.slice(a,a+i.length)==i}function dx(t,i,a){var f=_.templateSettings;a&&Tt(t,i,a)&&(i=r),t=He(t),i=ys({},i,f,Ld);var v=ys({},i.imports,f.imports,Ld),w=ht(v),B=Ka(v,w),I,O,X=0,Z=i.interpolate||Ar,ne="__p += '",se=Qa((i.escape||Ar).source+"|"+Z.source+"|"+(Z===So?Ea:Ar).source+"|"+(i.evaluate||Ar).source+"|$","g"),le="//# sourceURL="+(Le.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xg+"]")+`
`;t.replace(se,function(ye,Be,Oe,Zt,Bt,Kt){return Oe||(Oe=Zt),ne+=t.slice(X,Kt).replace(Ba,Hg),Be&&(I=!0,ne+=`' +
__e(`+Be+`) +
'`),Bt&&(O=!0,ne+=`';
`+Bt+`;
__p += '`),Oe&&(ne+=`' +
((__t = (`+Oe+`)) == null ? '' : __t) +
'`),X=Kt+ye.length,ye}),ne+=`';
`;var me=Le.call(i,"variable")&&i.variable;if(!me)ne=`with (obj) {
`+ne+`
}
`;else if(Ca.test(me))throw new De(l);ne=(O?ne.replace(Ni,""):ne).replace(Ti,"$1").replace(br,"$1;"),ne="function("+(me||"obj")+`) {
`+(me?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(O?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var Ce=Mf(function(){return ke(w,le+"return "+ne).apply(r,B)});if(Ce.source=ne,Ou(Ce))throw Ce;return Ce}function fx(t){return He(t).toLowerCase()}function hx(t){return He(t).toUpperCase()}function px(t,i,a){if(t=He(t),t&&(a||i===r))return jl(t);if(!t||!(i=Yt(i)))return t;var f=Dn(t),v=Dn(i),w=Vl(f,v),B=ql(f,v)+1;return hr(f,w,B).join("")}function gx(t,i,a){if(t=He(t),t&&(a||i===r))return t.slice(0,Wl(t)+1);if(!t||!(i=Yt(i)))return t;var f=Dn(t),v=ql(f,Dn(i))+1;return hr(f,0,v).join("")}function mx(t,i,a){if(t=He(t),t&&(a||i===r))return t.replace(Ri,"");if(!t||!(i=Yt(i)))return t;var f=Dn(t),v=Vl(f,Dn(i));return hr(f,v).join("")}function yx(t,i){var a=G,f=Q;if(et(i)){var v="separator"in i?i.separator:v;a="length"in i?we(i.length):a,f="omission"in i?Yt(i.omission):f}t=He(t);var w=t.length;if(Jr(t)){var B=Dn(t);w=B.length}if(a>=w)return t;var I=a-Qr(f);if(I<1)return f;var O=B?hr(B,0,I).join(""):t.slice(0,I);if(v===r)return O+f;if(B&&(I+=O.length-I),Pu(v)){if(t.slice(I).search(v)){var X,Z=O;for(v.global||(v=Qa(v.source,He(No.exec(v))+"g")),v.lastIndex=0;X=v.exec(Z);)var ne=X.index;O=O.slice(0,ne===r?I:ne)}}else if(t.indexOf(Yt(v),I)!=I){var se=O.lastIndexOf(v);se>-1&&(O=O.slice(0,se))}return O+f}function vx(t){return t=He(t),t&&Ln.test(t)?t.replace(Yr,Ug):t}var Dx=si(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),Hu=Md("toUpperCase");function Rf(t,i,a){return t=He(t),i=a?r:i,i===r?jg(t)?Zg(t):Rg(t):t.match(i)||[]}var Mf=be(function(t,i){try{return Wt(t,r,i)}catch(a){return Ou(a)?a:new De(a)}}),xx=Wn(function(t,i){return sn(i,function(a){a=Mn(a),qn(t,a,Mu(t[a],t))}),t});function _x(t){var i=t==null?0:t.length,a=pe();return t=i?Ke(t,function(f){if(typeof f[1]!="function")throw new an(u);return[a(f[0]),f[1]]}):[],be(function(f){for(var v=-1;++v<i;){var w=t[v];if(Wt(w[0],this,f))return Wt(w[1],this,f)}})}function wx(t){return Um(cn(t,g))}function Lu(t){return function(){return t}}function Cx(t,i){return t==null||t!==t?i:t}var Ex=Od(),bx=Od(!0);function Ht(t){return t}function ju(t){return fd(typeof t=="function"?t:cn(t,g))}function Ax(t){return pd(cn(t,g))}function Sx(t,i){return gd(t,cn(i,g))}var Fx=be(function(t,i){return function(a){return qi(a,t,i)}}),Nx=be(function(t,i){return function(a){return qi(t,a,i)}});function Vu(t,i,a){var f=ht(i),v=Jo(i,f);a==null&&!(et(i)&&(v.length||!f.length))&&(a=i,i=t,t=this,v=Jo(i,ht(i)));var w=!(et(a)&&"chain"in a)||!!a.chain,B=Yn(t);return sn(v,function(I){var O=i[I];t[I]=O,B&&(t.prototype[I]=function(){var X=this.__chain__;if(w||X){var Z=t(this.__wrapped__),ne=Z.__actions__=Pt(this.__actions__);return ne.push({func:O,args:arguments,thisArg:t}),Z.__chain__=X,Z}return O.apply(t,ar([this.value()],arguments))})}),t}function Tx(){return _t._===this&&(_t._=nm),this}function qu(){}function Bx(t){return t=we(t),be(function(i){return md(i,t)})}var Ix=_u(Ke),Rx=_u(Pl),Mx=_u(Wa);function zf(t){return Fu(t)?Ua(Mn(t)):l1(t)}function zx(t){return function(i){return t==null?r:Ir(t,i)}}var Ox=$d(),Px=$d(!0);function Gu(){return[]}function Wu(){return!1}function $x(){return{}}function kx(){return""}function Hx(){return!0}function Lx(t,i){if(t=we(t),t<1||t>ee)return[];var a=re,f=bt(t,re);i=pe(i),t-=re;for(var v=Za(f,i);++a<t;)i(a);return v}function jx(t){return xe(t)?Ke(t,Mn):Xt(t)?[t]:Pt(ef(He(t)))}function Vx(t){var i=++em;return He(t)+i}var qx=is(function(t,i){return t+i},0),Gx=wu("ceil"),Wx=is(function(t,i){return t/i},1),Ux=wu("floor");function Yx(t){return t&&t.length?Ko(t,Ht,au):r}function Xx(t,i){return t&&t.length?Ko(t,pe(i,2),au):r}function Zx(t){return Hl(t,Ht)}function Kx(t,i){return Hl(t,pe(i,2))}function Jx(t){return t&&t.length?Ko(t,Ht,du):r}function Qx(t,i){return t&&t.length?Ko(t,pe(i,2),du):r}var e2=is(function(t,i){return t*i},1),t2=wu("round"),n2=is(function(t,i){return t-i},0);function r2(t){return t&&t.length?Xa(t,Ht):0}function i2(t,i){return t&&t.length?Xa(t,pe(i,2)):0}return _.after=Av,_.ary=ff,_.assign=hD,_.assignIn=Af,_.assignInWith=ys,_.assignWith=pD,_.at=gD,_.before=hf,_.bind=Mu,_.bindAll=xx,_.bindKey=pf,_.castArray=$v,_.chain=cf,_.chunk=U1,_.compact=Y1,_.concat=X1,_.cond=_x,_.conforms=wx,_.constant=Lu,_.countBy=rv,_.create=mD,_.curry=gf,_.curryRight=mf,_.debounce=yf,_.defaults=yD,_.defaultsDeep=vD,_.defer=Sv,_.delay=Fv,_.difference=Z1,_.differenceBy=K1,_.differenceWith=J1,_.drop=Q1,_.dropRight=ey,_.dropRightWhile=ty,_.dropWhile=ny,_.fill=ry,_.filter=ov,_.flatMap=uv,_.flatMapDeep=cv,_.flatMapDepth=lv,_.flatten=of,_.flattenDeep=iy,_.flattenDepth=oy,_.flip=Nv,_.flow=Ex,_.flowRight=bx,_.fromPairs=sy,_.functions=bD,_.functionsIn=AD,_.groupBy=dv,_.initial=uy,_.intersection=cy,_.intersectionBy=ly,_.intersectionWith=dy,_.invert=FD,_.invertBy=ND,_.invokeMap=hv,_.iteratee=ju,_.keyBy=pv,_.keys=ht,_.keysIn=kt,_.map=ds,_.mapKeys=BD,_.mapValues=ID,_.matches=Ax,_.matchesProperty=Sx,_.memoize=hs,_.merge=RD,_.mergeWith=Sf,_.method=Fx,_.methodOf=Nx,_.mixin=Vu,_.negate=ps,_.nthArg=Bx,_.omit=MD,_.omitBy=zD,_.once=Tv,_.orderBy=gv,_.over=Ix,_.overArgs=Bv,_.overEvery=Rx,_.overSome=Mx,_.partial=zu,_.partialRight=vf,_.partition=mv,_.pick=OD,_.pickBy=Ff,_.property=zf,_.propertyOf=zx,_.pull=gy,_.pullAll=af,_.pullAllBy=my,_.pullAllWith=yy,_.pullAt=vy,_.range=Ox,_.rangeRight=Px,_.rearg=Iv,_.reject=Dv,_.remove=Dy,_.rest=Rv,_.reverse=Iu,_.sampleSize=_v,_.set=$D,_.setWith=kD,_.shuffle=wv,_.slice=xy,_.sortBy=bv,_.sortedUniq=Sy,_.sortedUniqBy=Fy,_.split=ux,_.spread=Mv,_.tail=Ny,_.take=Ty,_.takeRight=By,_.takeRightWhile=Iy,_.takeWhile=Ry,_.tap=Yy,_.throttle=zv,_.thru=ls,_.toArray=Cf,_.toPairs=Nf,_.toPairsIn=Tf,_.toPath=jx,_.toPlainObject=bf,_.transform=HD,_.unary=Ov,_.union=My,_.unionBy=zy,_.unionWith=Oy,_.uniq=Py,_.uniqBy=$y,_.uniqWith=ky,_.unset=LD,_.unzip=Ru,_.unzipWith=uf,_.update=jD,_.updateWith=VD,_.values=ci,_.valuesIn=qD,_.without=Hy,_.words=Rf,_.wrap=Pv,_.xor=Ly,_.xorBy=jy,_.xorWith=Vy,_.zip=qy,_.zipObject=Gy,_.zipObjectDeep=Wy,_.zipWith=Uy,_.entries=Nf,_.entriesIn=Tf,_.extend=Af,_.extendWith=ys,Vu(_,_),_.add=qx,_.attempt=Mf,_.camelCase=YD,_.capitalize=Bf,_.ceil=Gx,_.clamp=GD,_.clone=kv,_.cloneDeep=Lv,_.cloneDeepWith=jv,_.cloneWith=Hv,_.conformsTo=Vv,_.deburr=If,_.defaultTo=Cx,_.divide=Wx,_.endsWith=XD,_.eq=_n,_.escape=ZD,_.escapeRegExp=KD,_.every=iv,_.find=sv,_.findIndex=nf,_.findKey=DD,_.findLast=av,_.findLastIndex=rf,_.findLastKey=xD,_.floor=Ux,_.forEach=lf,_.forEachRight=df,_.forIn=_D,_.forInRight=wD,_.forOwn=CD,_.forOwnRight=ED,_.get=$u,_.gt=qv,_.gte=Gv,_.has=SD,_.hasIn=ku,_.head=sf,_.identity=Ht,_.includes=fv,_.indexOf=ay,_.inRange=WD,_.invoke=TD,_.isArguments=zr,_.isArray=xe,_.isArrayBuffer=Wv,_.isArrayLike=$t,_.isArrayLikeObject=it,_.isBoolean=Uv,_.isBuffer=pr,_.isDate=Yv,_.isElement=Xv,_.isEmpty=Zv,_.isEqual=Kv,_.isEqualWith=Jv,_.isError=Ou,_.isFinite=Qv,_.isFunction=Yn,_.isInteger=Df,_.isLength=gs,_.isMap=xf,_.isMatch=eD,_.isMatchWith=tD,_.isNaN=nD,_.isNative=rD,_.isNil=oD,_.isNull=iD,_.isNumber=_f,_.isObject=et,_.isObjectLike=tt,_.isPlainObject=Zi,_.isRegExp=Pu,_.isSafeInteger=sD,_.isSet=wf,_.isString=ms,_.isSymbol=Xt,_.isTypedArray=ui,_.isUndefined=aD,_.isWeakMap=uD,_.isWeakSet=cD,_.join=fy,_.kebabCase=JD,_.last=dn,_.lastIndexOf=hy,_.lowerCase=QD,_.lowerFirst=ex,_.lt=lD,_.lte=dD,_.max=Yx,_.maxBy=Xx,_.mean=Zx,_.meanBy=Kx,_.min=Jx,_.minBy=Qx,_.stubArray=Gu,_.stubFalse=Wu,_.stubObject=$x,_.stubString=kx,_.stubTrue=Hx,_.multiply=e2,_.nth=py,_.noConflict=Tx,_.noop=qu,_.now=fs,_.pad=tx,_.padEnd=nx,_.padStart=rx,_.parseInt=ix,_.random=UD,_.reduce=yv,_.reduceRight=vv,_.repeat=ox,_.replace=sx,_.result=PD,_.round=t2,_.runInContext=M,_.sample=xv,_.size=Cv,_.snakeCase=ax,_.some=Ev,_.sortedIndex=_y,_.sortedIndexBy=wy,_.sortedIndexOf=Cy,_.sortedLastIndex=Ey,_.sortedLastIndexBy=by,_.sortedLastIndexOf=Ay,_.startCase=cx,_.startsWith=lx,_.subtract=n2,_.sum=r2,_.sumBy=i2,_.template=dx,_.times=Lx,_.toFinite=Xn,_.toInteger=we,_.toLength=Ef,_.toLower=fx,_.toNumber=fn,_.toSafeInteger=fD,_.toString=He,_.toUpper=hx,_.trim=px,_.trimEnd=gx,_.trimStart=mx,_.truncate=yx,_.unescape=vx,_.uniqueId=Vx,_.upperCase=Dx,_.upperFirst=Hu,_.each=lf,_.eachRight=df,_.first=sf,Vu(_,function(){var t={};return In(_,function(i,a){Le.call(_.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),_.VERSION=o,sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){_[t].placeholder=_}),sn(["drop","take"],function(t,i){Re.prototype[t]=function(a){a=a===r?1:dt(we(a),0);var f=this.__filtered__&&!i?new Re(this):this.clone();return f.__filtered__?f.__takeCount__=bt(a,f.__takeCount__):f.__views__.push({size:bt(a,re),type:t+(f.__dir__<0?"Right":"")}),f},Re.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),sn(["filter","map","takeWhile"],function(t,i){var a=i+1,f=a==N||a==P;Re.prototype[t]=function(v){var w=this.clone();return w.__iteratees__.push({iteratee:pe(v,3),type:a}),w.__filtered__=w.__filtered__||f,w}}),sn(["head","last"],function(t,i){var a="take"+(i?"Right":"");Re.prototype[t]=function(){return this[a](1).value()[0]}}),sn(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");Re.prototype[t]=function(){return this.__filtered__?new Re(this):this[a](1)}}),Re.prototype.compact=function(){return this.filter(Ht)},Re.prototype.find=function(t){return this.filter(t).head()},Re.prototype.findLast=function(t){return this.reverse().find(t)},Re.prototype.invokeMap=be(function(t,i){return typeof t=="function"?new Re(this):this.map(function(a){return qi(a,t,i)})}),Re.prototype.reject=function(t){return this.filter(ps(pe(t)))},Re.prototype.slice=function(t,i){t=we(t);var a=this;return a.__filtered__&&(t>0||i<0)?new Re(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==r&&(i=we(i),a=i<0?a.dropRight(-i):a.take(i-t)),a)},Re.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Re.prototype.toArray=function(){return this.take(re)},In(Re.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),f=/^(?:head|last)$/.test(i),v=_[f?"take"+(i=="last"?"Right":""):i],w=f||/^find/.test(i);v&&(_.prototype[i]=function(){var B=this.__wrapped__,I=f?[1]:arguments,O=B instanceof Re,X=I[0],Z=O||xe(B),ne=function(Be){var Oe=v.apply(_,ar([Be],I));return f&&se?Oe[0]:Oe};Z&&a&&typeof X=="function"&&X.length!=1&&(O=Z=!1);var se=this.__chain__,le=!!this.__actions__.length,me=w&&!se,Ce=O&&!le;if(!w&&Z){B=Ce?B:new Re(this);var ye=t.apply(B,I);return ye.__actions__.push({func:ls,args:[ne],thisArg:r}),new un(ye,se)}return me&&Ce?t.apply(this,I):(ye=this.thru(ne),me?f?ye.value()[0]:ye.value():ye)})}),sn(["pop","push","shift","sort","splice","unshift"],function(t){var i=Oo[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",f=/^(?:pop|shift)$/.test(t);_.prototype[t]=function(){var v=arguments;if(f&&!this.__chain__){var w=this.value();return i.apply(xe(w)?w:[],v)}return this[a](function(B){return i.apply(xe(B)?B:[],v)})}}),In(Re.prototype,function(t,i){var a=_[i];if(a){var f=a.name+"";Le.call(ri,f)||(ri[f]=[]),ri[f].push({name:i,func:a})}}),ri[rs(r,y).name]=[{name:"wrapper",func:r}],Re.prototype.clone=vm,Re.prototype.reverse=Dm,Re.prototype.value=xm,_.prototype.at=Xy,_.prototype.chain=Zy,_.prototype.commit=Ky,_.prototype.next=Jy,_.prototype.plant=ev,_.prototype.reverse=tv,_.prototype.toJSON=_.prototype.valueOf=_.prototype.value=nv,_.prototype.first=_.prototype.head,Pi&&(_.prototype[Pi]=Qy),_},ei=Kg();Sr?((Sr.exports=ei)._=ei,ja._=ei):_t._=ei}).call(Ki)})(Qs,Qs.exports);var N8=Qs.exports;const ct=o2(N8),T8=navigator.platform.includes("Mac"),Th={Ctrl:"",Backspace:"",Alt:""},ks={shortcut:e=>T8?Object.keys(Th).reduce((n,r)=>n.replaceAll(r,Th[r]),e):e},Bh={},ea=(e,n)=>{const[r,o]=b.useState(()=>Bh?.[e]??n);return b.useEffect(()=>{Bh[e]=r},[r]),[r,o]};function Ih(e,n=0){const r=performance.now(),o={};function s(){o.id=requestAnimationFrame(c=>{c-r>n?e():s()})}return s(),o}function Rh(e){e.id&&cancelAnimationFrame(e.id)}function B8(e,n){const[r,o]=b.useState(e?"enter":"from"),s=b.useRef({}),[c,u]=b.useState(e);return b.useEffect(function(){return Rh(s.current),e?(o("from"),u(!0),Ih(()=>{o("enter")})):(o("leave"),s.current=Ih(()=>{u(!1)},n)),()=>{Rh(s.current)}},[e,n]),{stage:r,shouldMount:c}}function I8({state:e,timeout:n,children:r}){const{stage:o,shouldMount:s}=B8(e,n);return r(o,s)}const Tc=({className:e,...n})=>A.jsx("div",{className:Pe("grl-dn__graphCard",e),...n});Tc.__docgenInfo={description:"",methods:[],displayName:"GraphCard"};var Wr=(e=>(e.Blue="var(--node-color-blue)",e.Purple="var(--node-color-purple)",e.Orange="var(--node-color-orange)",e.Green="var(--node-color-green)",e))(Wr||{});const cl=({icon:e,name:n,children:r,actions:o=[],disabled:s=!1,isSelected:c=!1,noBodyPadding:u=!1,color:l="primary",onNameChange:d,menuItems:p=[],status:h,diffStatus:g,compactMode:m,listMode:x,helper:C,details:D,detailsOpen:E=!1,detailsTitle:y="Details",onDetailsClose:S})=>{const[T,F]=b.useState(!1),R=b.useRef(null);b.useEffect(()=>{R.current&&T&&(R.current.value=n,R.current.focus(),R.current.select())},[T]);const k=Ie(l).with("primary",()=>Wr.Blue).otherwise(j=>j);return A.jsxs("div",{className:Pe("grl-dn",m&&"grl-dn--compact",x&&"grl-dn--list",!g&&c&&"grl-dn--selected",h&&`grl-dn--${h}`,g&&`grl-dn--diff-${g}`),style:{"--node-color":k},onKeyDown:j=>j.stopPropagation(),children:[A.jsxs(Tc,{children:[A.jsxs("div",{className:"grl-dn__status-bar",children:[Array.isArray(C)&&C.filter(j=>!!j).map((j,Y)=>A.jsx("div",{className:Pe("grl-dn__status-icon"),children:j},Y)),h==="error"&&A.jsx("div",{className:Pe("grl-dn__status-icon",`grl-dn__status-icon--${h}`),children:A.jsx(jr,{})}),A.jsx(Zh,{status:g,style:{fontSize:16}})]}),A.jsxs("div",{className:Pe("grl-dn__header",m&&"compact"),children:[A.jsx("div",{className:Pe("grl-dn__header__icon",m&&"compact"),children:e}),A.jsxs("div",{className:"grl-dn__header__text",children:[!T&&A.jsx(ft.Text,{className:Pe("grl-dn__header__text__name"),onClick:()=>{s||F(!0)},children:n}),T&&A.jsx("input",{ref:R,className:Pe("grl-dn__header__text__name-input","nodrag"),onBlur:j=>{j.target.value?.trim?.()?.length>0&&d?.(R?.current?.value),j.preventDefault(),F(!1)},onKeyDown:j=>{j.key==="Enter"?(j.currentTarget.blur(),j.preventDefault()):j.key==="Escape"&&(R.current&&(R.current.value=n),F(!1),j.preventDefault())}})]}),p.length>0&&A.jsx("div",{className:Pe("grl-dn__header__actions","nodrag"),children:A.jsx(ho,{trigger:["click"],overlayStyle:{minWidth:250},menu:{items:p},children:A.jsx(Je,{type:"text",size:"small",icon:A.jsx(N2,{})})})})]}),r&&A.jsx("div",{className:Pe("grl-dn__body",o.length===0&&"grl-dn__body--no-footer",u&&"grl-dn__body--no-padding"),children:r}),o.length>0&&A.jsx("div",{className:Pe("grl-dn__footer","nodrag"),children:A.jsx("div",{className:"grl-dn__footer__actions",children:o})})]}),A.jsx(I8,{state:E,timeout:100,children:(j,Y)=>Y&&A.jsx(Tc,{className:"nodrag",style:{transition:"0.1s ease-in-out",transform:j==="enter"?"translateY(0)":"translateY(-10px)",opacity:j==="enter"?1:0},children:A.jsxs("div",{className:"grl-dn__details",children:[A.jsxs("div",{className:"grl-dn__details__header",children:[A.jsx(ft.Text,{className:"grl-dn__details__header__text",children:y}),A.jsx(Je,{type:"text",size:"small",className:"grl-dn__details__header__close",icon:A.jsx(jr,{style:{fontSize:8}}),onClick:S})]}),A.jsx("div",{className:"grl-dn__details__body",children:D})]})})})]})};cl.__docgenInfo={description:"",methods:[],displayName:"DecisionNode",props:{name:{required:!1,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},type:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},helper:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(React.ReactNode | false)[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:"",defaultValue:{value:"[]",computed:!1}},status:{required:!1,tsType:{name:"union",raw:"'error' | 'success' | 'warning'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'success'"},{name:"literal",value:"'warning'"}]},description:""},diffStatus:{required:!1,tsType:{name:"union",raw:"'removed' | 'added' | 'modified' | 'moved'",elements:[{name:"literal",value:"'removed'"},{name:"literal",value:"'added'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'moved'"}]},description:""},noBodyPadding:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | string",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"string"}]},description:"",defaultValue:{value:"'primary'",computed:!1}},menuItems:{required:!1,tsType:{name:"MenuProps['items']",raw:"MenuProps['items']"},description:"",defaultValue:{value:"[]",computed:!1}},onNameChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},compactMode:{required:!1,tsType:{name:"boolean"},description:""},listMode:{required:!1,tsType:{name:"boolean"},description:""},details:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},detailsOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},detailsTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Details'",computed:!1}},onDetailsClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const Er=H.forwardRef(({id:e,handleLeft:n=!0,handleRight:r=!0,className:o,specification:s,name:c,displayError:u,helper:l,actions:d,...p},h)=>{const[g,m]=ea(`node:details:${e}`,0),[x,C]=ea(`node:detailsOpen:${e}`,!1),D=gt(),{nodeError:E,nodeTrace:y,disabled:S,compactMode:T}=Xe(({simulate:j,disabled:Y,compactMode:z})=>({disabled:Y,nodeTrace:Ie(j).with({result:Ne._},({result:G})=>G?.trace?.[e]).otherwise(()=>null),nodeError:Ie(j).with({error:{data:{nodeId:e}}},({error:G})=>G).otherwise(()=>null),compactMode:z})),{diff:F}=la(e),R=s.renderSettings,k=[s.documentationUrl?{key:"documentation",label:A.jsx(io,{left:"Documentation",right:A.jsx(m0,{})}),onClick:()=>window.open(s.documentationUrl,"_href")}:null,s.documentationUrl?{key:"divider-1",type:"divider"}:null,!u&&{key:"copy-clipboard",label:A.jsx(io,{left:"Copy to clipboard",right:ks.shortcut("Ctrl + C")}),onClick:()=>{}},!u&&{key:"duplicate",disabled:S,label:A.jsx(io,{left:"Duplicate",right:ks.shortcut("Ctrl + D")}),onClick:()=>D.duplicateNodes([e])},!u&&{key:"divider-2",type:"divider"},{key:"delete",danger:!0,label:A.jsx(io,{left:"Delete",right:ks.shortcut("Backspace")}),disabled:S,onClick:()=>Pc.confirm({icon:null,title:"Delete node",content:A.jsxs(ft.Text,{children:["Are you sure you want to delete ",A.jsx(ft.Text,{strong:!0,children:c})," node."]}),okButtonProps:{danger:!0},onOk:()=>D.removeNodes([e])})}].filter(j=>j!==!1);return A.jsxs("div",{className:Pe("grl-graph-node",o),style:{minWidth:220,maxWidth:220},ref:h,onClick:j=>{const Y=Ie(navigator.platform.includes("Mac")).with(!0,()=>j.metaKey).otherwise(()=>j.ctrlKey);D.triggerNodeSelect(e,Y?"toggle":"only")},children:[n&&A.jsx(Cr,{className:Pe("grl-graph-node__handle-left",T&&"compact"),type:"target",position:de.Left,...typeof n!="boolean"?n:{}}),A.jsx(cl,{menuItems:k,...p,disabled:S,icon:s.icon,color:s.color,type:s.displayName,helper:l,name:c,details:R?A.jsx(R,{id:e}):void 0,detailsOpen:x,detailsTitle:Ie(g).with(0,()=>"Settings").otherwise(()=>{}),onDetailsClose:()=>C(!1),actions:R?[...d??[],A.jsx(Je,{type:"text",style:{marginLeft:"auto"},onClick:()=>{C(g===0?!x:!0),m(0)},children:"Settings"},"settings")]:d,status:Ie([y,E,u]).with([Ne._,Ne._,!0],()=>"error").with([Ne._,Ne.not(Ne.nullish),Ne._],()=>"error").with([Ne.not(Ne.nullish),Ne._,Ne._],()=>"success").otherwise(()=>{}),diffStatus:Ie([F]).with([{status:"added"}],()=>"added").with([{status:"modified"}],()=>"modified").with([{status:"removed"}],()=>"removed").with([{status:"moved"}],()=>"moved").otherwise(()=>{}),onNameChange:j=>{D.updateNode(e,Y=>(Y.name=j,Y))},compactMode:T}),r&&A.jsx(Cr,{className:Pe("grl-graph-node__handle-right",T&&"compact"),type:"source",position:de.Right,...typeof r!="boolean"?r:{}})]})});Er.__docgenInfo={description:"",methods:[],displayName:"GraphNode",props:{handleLeft:{defaultValue:{value:"true",computed:!1},required:!1},handleRight:{defaultValue:{value:"true",computed:!1},required:!1}}};const ll=({value:e,onChange:n,readOnly:r})=>{const{token:o}=A2.useToken();return A.jsx(W2,{loading:A.jsx(kc,{size:"large"}),language:"javascript",value:e,onChange:n,theme:o.mode==="dark"?"vs-dark":"light",height:"100%",onMount:(s,c)=>{c.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),c.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),s.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async u=>{try{await cc(JSON.stringify(go.parse(u.getValue()))),Ct.success("Copied to clipboard!")}catch{Ct.error("Failed to copy to clipboard.")}}}),s.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:u=>{const l=JSON.stringify(go.parse(u.getValue()),null,2);u.setValue(l)}})},options:{readOnly:r,automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})};ll.__docgenInfo={description:"",methods:[],displayName:"SimulatorEditor",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};const R8="Your business context that enters through the Request node, starting the decision process. Supply JSON or JSON5 format.",Lp=({onChange:e,hasInputNode:n,loading:r,onRun:o,defaultRequest:s})=>{const[c,u]=b.useState(s),{stateStore:l,actions:d}=Ur();return b.useEffect(()=>{if(!co())return;const{decisionGraph:p}=l.getState(),h=p.nodes.find(g=>g.type==="inputNode");if(h)try{const g=c?go.parse(c):"Any";d.setNodeType(h.id,qe.InferredOutput,new Jt(g))}catch{}},[c]),A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request",children:[A.jsx(_r,{title:R8,children:A.jsxs(ft.Text,{style:{fontSize:13,cursor:"help"},children:["Request",A.jsx(sw,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})]})}),A.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&A.jsx(_r,{title:n?void 0:"Request node is required to run the graph. Drag-and-drop it from the Components panel.",children:A.jsx(Je,{size:"small",type:"primary",loading:r,icon:A.jsx(vw,{}),disabled:!n,onClick:()=>{try{const p=(c||"").trim().length===0?null:go.parse(c||"");o?.({graph:l.getState().decisionGraph,context:p})}catch{g0.error({message:"Invalid format",description:"Unable to format request, invalid JSON format",placement:"top"})}},children:"Run"})})})]}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(ll,{value:c,onChange:p=>{u(p),e?.(p??"")}})})]})};Lp.__docgenInfo={description:"",methods:[],displayName:"SimulatorRequestPanel",props:{defaultRequest:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}}},description:""},hasInputNode:{required:!1,tsType:{name:"boolean"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onRun:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
  settings?: DecisionSettings;
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}},{key:"settings",value:{name:"intersection",raw:"z.infer<typeof decisionModelSchema>['settings'] & Diff",elements:[{name:"z.infer['settings']",raw:"z.infer<typeof decisionModelSchema>['settings']"},{name:"signature",type:"object",raw:`{
  _diff?: DiffMetadata<T>;
}`,signature:{properties:[{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],required:!1}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""}}};var jp=(e=>(e.Output="Output",e.Input="Input",e.Trace="Trace",e))(jp||{});const M8=({defaultRequest:e,onChange:n,onRun:r,onClear:o,loading:s=!1,leftPanel:c=Lp})=>{const[u,l]=ea("simulation.search",""),[d,p]=ea("simulation.segment","Output"),{actions:h}=Ur(),{nodeTypes:g,simulate:m,hasInputNode:x}=Xe(({decisionGraph:y,simulate:S})=>({simulate:S,hasInputNode:y.nodes.some(T=>T.type===$e.Input),nodeTypes:(y.nodes??[]).reduce((T,F)=>({...T,[F.id]:F.type}),{})})),[C,D]=b.useState("graph"),E=b.useMemo(()=>m?"result"in m?Object.entries(m.result?.trace??{}).map(([y,S])=>({...S,nodeId:y})).filter(y=>![$e.Input,$e.Output].includes(g?.[y.nodeId])).filter(y=>y.name.toLowerCase().includes(u?.toLowerCase()??"")).sort((y,S)=>(y.order??0)-(S.order??0)):[]:[],[m,u]);return A.jsxs(U2,{className:"grl-dg__simulator",direction:"horizontal",autoSaveId:"jdm-editor:simulator:layout",children:[A.jsx(Yu,{minSize:20,defaultSize:30,className:"grl-dg__simulator__section grl-dg__simulator__request",children:A.jsx(c,{defaultRequest:e,loading:s,hasInputNode:x,onRun:r,onChange:n})}),A.jsx(Pf,{}),A.jsxs(Yu,{minSize:20,maxSize:20,className:"grl-dg__simulator__section grl-dg__simulator__nodes",children:[A.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--nodes",children:[A.jsx("input",{className:"grl-dg__simulator__search",type:"text",placeholder:"Search nodes...",value:u,onChange:y=>l(y.target.value)}),A.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&A.jsx(_r,{title:"Clear",children:A.jsx(Je,{size:"small",type:"text",icon:A.jsx(j_,{}),onClick:()=>{o?.(),D("graph"),l("")}})})})]}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(kc,{spinning:s,children:A.jsxs("div",{className:"grl-dg__simulator__nodes-list",children:[!m&&A.jsxs(ft.Text,{type:"secondary",style:{textAlign:"center",marginTop:60,fontSize:13},children:["Ready to simulate!",A.jsx("br",{}),"Run a request to see the node trace in action.",A.jsx("br",{}),A.jsx(ft.Link,{href:"https://docs.gorules.io/docs/simulator",target:"_blank",style:{fontSize:13,marginTop:4,display:"inline-block"},children:"Learn more"})]}),"graph".includes(u?.toLowerCase()??"")&&m&&A.jsxs("div",{className:Pe("grl-dg__simulator__nodes-list__node",C==="graph"&&"active"),onClick:()=>D("graph"),children:[A.jsxs(ft.Text,{"data-role":"name",ellipsis:!0,children:[A.jsx(zh,{status:Ie(m).with({error:Ne.nonNullable},()=>"error").with({result:Ne.nonNullable},()=>"success").otherwise(()=>"not-run")}),"Graph"]}),A.jsx(ft.Text,{type:"secondary","data-role":"performance",children:Ie(m).with({result:Ne._},({result:y})=>y?.performance).otherwise(()=>{})})]}),E.map(y=>A.jsxs("div",{className:Pe("grl-dg__simulator__nodes-list__node",y.nodeId===C&&"active"),onClick:()=>D(y.nodeId),onDoubleClick:()=>h.goToNode(y.nodeId),children:[A.jsxs(ft.Text,{"data-role":"name",ellipsis:{tooltip:y.name},children:[A.jsx(zh,{status:y.nodeId===m?.error?.data?.nodeId?"error":"success"}),y.name]}),A.jsx(ft.Text,{type:"secondary","data-role":"performance",children:y.performance})]},y.nodeId))]})})})]}),A.jsx(Pf,{}),A.jsxs(Yu,{minSize:30,defaultSize:50,className:"grl-dg__simulator__section grl-dg__simulator__response",children:[A.jsx("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--response",children:A.jsx(r0,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},onChange:y=>p(y),items:Object.values(jp).map(y=>({key:y,label:y})),tabBarExtraContent:A.jsx(_r,{title:"Close panel",children:A.jsx(Je,{type:"text",icon:A.jsx(jr,{style:{fontSize:12}}),onClick:()=>h.setActivePanel(void 0)})})})}),A.jsx("div",{className:"grl-dg__simulator__section__content",children:A.jsx(ll,{readOnly:!0,value:Ie(m).with({result:Ne._},({result:y})=>Ie(C).with("graph",()=>Mh({traceData:y?.trace,output:y?.result},d??"Output")).otherwise(()=>Mh(y?.trace[C],d??"Output"))).otherwise(()=>"")})})]})]})},Mh=(e,n)=>{const r=Ie([n,e]).with(["Output",{output:Ne._}],([,{output:o}])=>o).with(["Input",{input:Ne._}],([,{input:o}])=>o).with(["Trace",{trace:Ne._}],([,{trace:o}])=>o).with(["Trace",{traceData:Ne._}],([,{traceData:o}])=>o).otherwise(()=>({}));return go.stringify(r,void 0,2)},zh=({status:e})=>e==="not-run"?null:e==="success"?A.jsx(k_,{twoToneColor:["var(--grl-color-success)","var(--grl-color-success-bg)"],style:{marginRight:6,fontSize:12,opacity:.5}}):A.jsx(G_,{twoToneColor:["var(--grl-color-error)","var(--grl-color-error-bg)"],style:{marginRight:5,fontSize:12}});M8.__docgenInfo={description:"",methods:[],displayName:"GraphSimulator",props:{onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultRequest:{required:!1,tsType:{name:"string",raw:"SimulatorRequestPanelProps['defaultRequest']"},description:""},onChange:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onChange']"},description:""},onRun:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onRun']"},description:""},leftPanel:{required:!1,tsType:{name:"ReactFC",raw:"React.FC<SimulatorRequestPanelProps>",elements:[{name:"signature",type:"object",raw:`{
  defaultRequest?: string;
  onChange?: (contextJson: string) => void;
  hasInputNode?: boolean;
  loading?: boolean;
  onRun?: (payload: { graph: DecisionGraphType; context: unknown }) => void;
}`,signature:{properties:[{key:"defaultRequest",value:{name:"string",required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}},required:!1}},{key:"hasInputNode",value:{name:"boolean",required:!1}},{key:"loading",value:{name:"boolean",required:!1}},{key:"onRun",value:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
  settings?: DecisionSettings;
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}},{key:"settings",value:{name:"intersection",raw:"z.infer<typeof decisionModelSchema>['settings'] & Diff",elements:[{name:"z.infer['settings']",raw:"z.infer<typeof decisionModelSchema>['settings']"},{name:"signature",type:"object",raw:`{
  _diff?: DiffMetadata<T>;
}`,signature:{properties:[{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],required:!1}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}},required:!1}}]}}]},description:"",defaultValue:{value:`({
  onChange,
  hasInputNode,
  loading,
  onRun,
  defaultRequest,
}) => {
  const [requestValue, setRequestValue] = useState(defaultRequest);
  const { stateStore, actions } = useDecisionGraphRaw();

  useEffect(() => {
    if (!isWasmAvailable()) {
      return;
    }

    const { decisionGraph } = stateStore.getState();
    const requestNode = decisionGraph.nodes.find((n) => n.type === 'inputNode');
    if (!requestNode) {
      return;
    }

    try {
      const value = requestValue ? json5.parse(requestValue) : 'Any';
      actions.setNodeType(requestNode.id, NodeTypeKind.InferredOutput, new VariableType(value));
    } catch {
      // Skip
    }
  }, [requestValue]);

  return (
    <>
      <div className={'grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request'}>
        <Tooltip title={requestTooltip}>
          <Typography.Text style={{ fontSize: 13, cursor: 'help' }}>
            Request
            <InfoCircleOutlined style={{ fontSize: 10, marginLeft: 4, opacity: 0.5, verticalAlign: 'text-top' }} />
          </Typography.Text>
        </Tooltip>
        <div className={'grl-dg__simulator__section__bar__actions'}>
          {onRun && (
            <Tooltip
              title={
                !hasInputNode
                  ? 'Request node is required to run the graph. Drag-and-drop it from the Components panel.'
                  : undefined
              }
            >
              <Button
                size={'small'}
                type={'primary'}
                loading={loading}
                icon={<PlayCircleOutlined />}
                disabled={!hasInputNode}
                onClick={() => {
                  try {
                    const parsed = (requestValue || '').trim().length === 0 ? null : json5.parse(requestValue || '');
                    onRun?.({ graph: stateStore.getState().decisionGraph, context: parsed });
                  } catch {
                    notification.error({
                      message: 'Invalid format',
                      description: 'Unable to format request, invalid JSON format',
                      placement: 'top',
                    });
                  }
                }}
              >
                Run
              </Button>
            </Tooltip>
          )}
        </div>
      </div>
      <div className={'grl-dg__simulator__section__content'}>
        <SimulatorEditor
          value={requestValue}
          onChange={(text) => {
            setRequestValue(text);
            onChange?.(text ?? '');
          }}
        />
      </div>
    </>
  );
}`,computed:!1}}}};const z8=(e,n)=>e[n]?.[qe.Input]??e[n]?.[qe.InferredInput]??Jt.fromJson({Object:{}}),Si=(e,{attachGlobals:n=!0,disabled:r=!1}={})=>{const o=Xe(({nodeTypes:s,globalType:c})=>{if(!(!co()||r))return{nodeTypes:s,globalType:c}});return b.useMemo(()=>{if(!o?.nodeTypes)return;const s=z8(o.nodeTypes,e);return n&&Object.entries(o?.globalType??{}).forEach(([c,u])=>s.set(c,u)),s},[o?.globalType,o?.nodeTypes,n])},Vp=({id:e,manager:n})=>{const r=gt(),o=Si(e,{attachGlobals:!1}),{nodeTrace:s,disabled:c,configurable:u,content:l,globalType:d}=Xe(({simulate:g,disabled:m,configurable:x,decisionGraph:C,globalType:D})=>({nodeTrace:Ie(g).with({result:Ne._},({result:E})=>E?.trace?.[e]).otherwise(()=>null),disabled:m,configurable:x,content:(C?.nodes??[]).find(E=>E.id===e)?.content,globalType:D})),p=s?.traceData!==void 0?Array.isArray(s?.traceData)?s?.traceData?.map(g=>g?.rule?._id):[s?.traceData?.rule?._id]:[],h=b.useMemo(()=>{if(!o)return;const g=Ie(l?.inputField).with(Ne.string,x=>o.get(x)).otherwise(()=>o),m=l?.executionMode==="loop"?g.arrayItem():g;return Object.entries(d).forEach(([x,C])=>m.set(x,C)),m},[o,d,l?.inputField,l?.executionMode]);return A.jsx(T2,{id:e,tableHeight:"100%",value:l,manager:n,disabled:c,configurable:u,inputData:h,activeRules:(p||[]).filter(g=>!!g),onChange:g=>{r.updateNode(e,m=>(Object.assign(m.content,g),m))}})};Vp.__docgenInfo={description:"",methods:[],displayName:"TabDecisionTable",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const dl={type:$e.DecisionTable,icon:A.jsx(Cw,{}),displayName:"Decision table",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/decision-tables",shortDescription:"Rules spreadsheet",renderTab:({id:e,manager:n})=>A.jsx(Vp,{id:e,manager:n}),getDiffContent:(e,n)=>nt(e,r=>{const o={};(e.executionMode??"single")!==(n.executionMode??"single")&&ct.set(o,"executionMode",{status:"modified",previousValue:n.executionMode}),(e.hitPolicy??"first")!==(n.hitPolicy??"first")&&ct.set(o,"hitPolicy",{status:"modified",previousValue:n.hitPolicy}),(e.inputField??"")!==(n.inputField??"")&&ct.set(o,"inputField",{status:"modified",previousValue:n.inputField}),(e.outputPath??"")!==(n.outputPath??"")&&ct.set(o,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough??!1)!==(n.passThrough??!1)&&ct.set(o,"passThrough",{status:"modified",previousValue:n.passThrough});const s=fo(e?.inputs||[],n?.inputs||[],{compareFields:(l,d)=>{const p=(l.name??"")!==(d.name??""),h=(l.field??"")!==(d.field??""),g=(l.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:p||h||g,fields:{...p&&{name:{status:"modified",previousValue:d.name}},...h&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),c=fo(e?.outputs||[],n?.outputs||[],{compareFields:(l,d)=>{const p=(l.name??"")!==(d.name??""),h=(l.field??"")!==(d.field??""),g=(l.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:p||h||g,fields:{...p&&{name:{status:"modified",previousValue:d.name}},...h&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),u=fo(e?.rules||[],n?.rules||[],{idField:"_id",compareFields:(l,d)=>{const p=(l._description??"")!==(d._description??""),h={};s.forEach(m=>{m._diff?.status==="added"?h[m.id]={status:"added"}:m._diff?.status==="removed"?h[m.id]={status:"removed"}:(l?.[m.id]??"")!==(d?.[m.id]??"")&&(h[m.id]={status:"modified",previousValue:d?.[m.id]})});const g={};return c.forEach(m=>{m?._diff?.status==="added"?g[m.id]={status:"added"}:m?._diff?.status==="removed"?g[m.id]={status:"removed"}:(l?.[m.id]??"")!==(d?.[m.id]??"")&&(g[m.id]={status:"modified",previousValue:d?.[m.id]})}),{hasChanges:p||Object.keys(h).length>0||Object.keys(g).length>0,fields:{...p&&{_description:{status:"modified",previousValue:d._description}},...h,...g}}}});return r.inputs=s,r.outputs=c,r.rules=u,s.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&ct.set(o,"inputs",{status:"modified"}),c.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&ct.set(o,"outputs",{status:"modified"}),u.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&ct.set(o,"rules",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:(e,n)=>!Qt(e,n),determineOutputType:({content:e,input:n})=>{let r=n.clone(),o=Jt.fromJson({Object:{}});if(e.inputField&&(r=n.calculateType(e.inputField)),e.executionMode==="loop"&&(r=r.arrayItem()),(e?.outputs||[]).filter(c=>!!c.field).forEach(c=>{for(const u of e.rules){if(!u[c.id])continue;const l=r.calculateType(u[c.id]),d=l.toJson();if(d!=="Any"&&d!=="Null"){o.set(c.field,l);return}}o.setJson(c.field,"Any")}),e.hitPolicy==="collect"&&(o=o.toArray()),e.executionMode==="loop"&&(o=o.toArray()),e.outputPath){const c=Jt.fromJson({Object:{}});c.set(e.outputPath,o),o=c}return e.passThrough&&(o=n.merge(o)),o}},generateNode:({index:e})=>({name:`decisionTable${e}`,content:{hitPolicy:"first",inputs:[{id:crypto.randomUUID(),name:"Input"}],outputs:[{id:crypto.randomUUID(),field:"output",name:"Output"}],rules:[],inputField:null,outputPath:null,passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=gt(),{passThrough:c,executionMode:u}=Xe(({decisionGraph:l})=>{const d=(l?.nodes??[]).find(p=>p.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return A.jsx(Er,{id:e,specification:o,name:n.name,isSelected:r,helper:[u==="loop"&&A.jsx(y0,{}),c&&A.jsx($c,{})],actions:[A.jsx(Je,{type:"text",onClick:()=>s.openTab(e),children:"Edit Table"},"edit-table")]})},renderSettings:({id:e})=>{const n=gt(),r=Si(e),{contentDiff:o}=la(e),{fields:s,disabled:c}=Xe(({decisionGraph:l,disabled:d})=>{const p=(l?.nodes??[]).find(h=>h.id===e)?.content;return{disabled:d,fields:{passThrough:p?.passThrough||!1,inputField:p?.inputField,outputPath:p?.outputPath,executionMode:p?.executionMode||"single",hitPolicy:p?.hitPolicy||"first"}}}),u=l=>{n.updateNode(e,d=>(Object.assign(d.content,l),d))};return A.jsxs("div",{className:"settings-form",children:[A.jsx(Qn.Item,{label:"Hit Policy",children:A.jsx(L2,{direction:"vertical",size:2,children:A.jsx(uc,{size:"small",previousValue:o?.fields?.hitPolicy?.previousValue,displayDiff:o?.fields?.hitPolicy?.status==="modified",disabled:c,value:s?.hitPolicy,onChange:l=>u({hitPolicy:l?.target?.value}),options:[{value:"first",label:"First"},{value:"collect",label:"Collect"}]})})}),A.jsx(Qn.Item,{label:"Passthrough",children:A.jsx(n0,{disabled:c,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:l=>u({passThrough:l})})}),A.jsx(Qn.Item,{label:"Input field",children:A.jsx(ta,{variableType:r,disabled:c,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:l=>u({inputField:l?.trim()||null})})}),A.jsx(Qn.Item,{label:"Output path",children:A.jsx(Kh,{size:"small",readOnly:c,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:l=>u({outputPath:l?.target?.value?.trim()||null})})}),A.jsx(Qn.Item,{label:"Execution mode",children:A.jsx(uc,{size:"small",disabled:c,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:l=>u({executionMode:l?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},qp=({id:e,manager:n})=>{const r=gt(),o=Si(e,{attachGlobals:!1}),{disabled:s,configurable:c,content:u,trace:l,globalType:d}=Xe(({disabled:h,configurable:g,decisionGraph:m,simulate:x,globalType:C})=>({disabled:h,configurable:g,content:(m?.nodes??[]).find(D=>D.id===e)?.content,trace:x&&"result"in x?x.result?.trace[e]:void 0,globalType:C})),p=b.useMemo(()=>{if(!o)return;const h=Ie(u?.inputField).with(Ne.string,m=>o.get(m)).otherwise(()=>o),g=u?.executionMode==="loop"?h.arrayItem():h;return Object.entries(d).forEach(([m,x])=>g.set(m,x)),g},[o,d,u?.inputField,u?.executionMode]);return A.jsx("div",{style:{height:"100%",overflowY:"auto",boxSizing:"border-box"},children:A.jsx(V2,{traceData:l?.traceData,value:u?.expressions,disabled:s,configurable:c,manager:n,inputData:p,onChange:h=>{r.updateNode(e,g=>(g.content.expressions=h,g))}})})};qp.__docgenInfo={description:"",methods:[],displayName:"TabExpression",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const fl={type:$e.Expression,icon:A.jsx(gw,{}),displayName:"Expression",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/expression",shortDescription:"Mapping utility",renderTab:({id:e,manager:n})=>A.jsx(qp,{id:e,manager:n}),getDiffContent:(e,n)=>nt(e,o=>{const s={};(e.executionMode||!1)!==(n.executionMode||!1)&&ct.set(s,"executionMode",{status:"modified",previousValue:n.executionMode}),Ns(e.inputField,n.inputField)||ct.set(s,"inputField",{status:"modified",previousValue:n.inputField}),Ns(e.outputPath,n.outputPath)||ct.set(s,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough||!1)!==(n.passThrough||!1)&&ct.set(s,"passThrough",{status:"modified",previousValue:n.passThrough});const c=fo(e?.expressions||[],n?.expressions||[],{compareFields:(u,l)=>{const d=!Ns(u.key,l.key),p=!Ns(u.value,l.value);return{hasChanges:d||p,fields:{...d&&{key:{status:"modified",previousValue:l.key}},...p&&{value:{status:"modified",previousValue:l.value}}}}}});return o.expressions=c,c.find(u=>u?._diff?.status==="modified"||u?._diff?.status==="added"||u?._diff?.status==="removed")&&ct.set(s,"expressions",{status:"modified"}),Object.keys(s).length>0&&(o._diff={status:"modified",fields:s}),o}),inferTypes:{needsUpdate:(e,n)=>!Qt(e,n),determineOutputType:({input:e,content:n})=>{let r=e.clone(),o=Jt.fromJson({Object:{}});if(n.inputField&&(r=e.calculateType(n.inputField)),n.executionMode==="loop"&&(r=r.arrayItem()),(n.expressions||[]).forEach(s=>{if(!s.key||!s.value)return;const c=r.calculateType(s.value);r.set(`$.${s.key}`,c),o.set(s.key,c)}),n.executionMode==="loop"&&(o=o.toArray()),n.outputPath){const s=Jt.fromJson({Object:{}});s.set(n.outputPath,o),o=s}return n.passThrough&&(o=e.merge(o)),o}},generateNode:({index:e})=>({name:`expression${e}`,content:{inputField:null,outputPath:null,expressions:[],passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=gt(),{passThrough:c,executionMode:u}=Xe(({decisionGraph:l})=>{const d=(l?.nodes??[]).find(p=>p.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return A.jsx(Er,{id:e,specification:o,name:n.name,isSelected:r,actions:[A.jsx(Je,{type:"text",onClick:()=>s.openTab(e),children:"Edit Expression"},"edit-table")],helper:[u==="loop"&&A.jsx(y0,{}),c&&A.jsx($c,{})]})},renderSettings:({id:e})=>{const n=gt(),r=Si(e),{contentDiff:o}=la(e),{fields:s,disabled:c}=Xe(({decisionGraph:l,disabled:d})=>{const p=(l?.nodes??[]).find(h=>h.id===e)?.content;return{disabled:d,fields:{passThrough:p?.passThrough||!1,inputField:p?.inputField,outputPath:p?.outputPath,executionMode:p?.executionMode||"single"}}}),u=l=>{n.updateNode(e,d=>(Object.assign(d.content,l),d))};return A.jsxs("div",{className:"settings-form",children:[A.jsx(Qn.Item,{label:"Passthrough",children:A.jsx(n0,{disabled:c,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:l=>u({passThrough:l})})}),A.jsx(Qn.Item,{label:"Input field",children:A.jsx(ta,{variableType:r,disabled:c,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:l=>{u({inputField:l?.trim()||null})}})}),A.jsx(Qn.Item,{label:"Output path",children:A.jsx(Kh,{size:"small",readOnly:c,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:l=>u({outputPath:l?.target?.value?.trim()||null})})}),A.jsx(Qn.Item,{label:"Execution mode",children:A.jsx(uc,{size:"small",disabled:c,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:l=>u({executionMode:l?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},O8=H.lazy(async()=>({default:(await Z2(()=>import("./index-D1Q-hL7q.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]),import.meta.url)).Function})),Gp=({id:e})=>{const n=Wp(e),r=gt(),o=Xp(D=>D.onFunctionReady),[s,c]=b.useState(),u=Si(e),{nodeTrace:l,disabled:d,content:p,additionalModules:h,nodeError:g}=Xe(({simulate:D,disabled:E,configurable:y,decisionGraph:S})=>({nodeTrace:Ie(D).with({result:Ne._},({result:T})=>T?.trace?.[e]).otherwise(()=>null),nodeError:Ie(D).with({error:{data:{nodeId:e}}},({error:T})=>T).otherwise(()=>null),disabled:E,configurable:y,content:(S?.nodes??[]).find(T=>T.id===e)?.content,additionalModules:(S?.nodes??[]).filter(T=>T.type==="functionNode").map(T=>({id:T.id,name:T.name,content:T.content}))})),{diff:m,contentDiff:x}=la(e),C=b.useMemo(()=>n===Hs.Stable?x?.fields?.source?.previousValue:m?.fields?.content?.previousValue,[m,x]);return b.useEffect(()=>{if(!s)return;const D=s.languages.typescript.javascriptDefaults.getExtraLibs(),E=Object.entries(D).map(([y,S])=>({filePath:y,content:S.content})).filter(y=>!y.filePath.startsWith("node:"));h.forEach(y=>{E.push({filePath:`node:${y.name}`,content:`declare module 'node:${y.name}' { ${y.content} }`})}),s.languages.typescript.javascriptDefaults.setExtraLibs(E),o?.(s)},[JSON.stringify(h),s,o]),A.jsx(b.Suspense,{fallback:A.jsx(kc,{}),children:A.jsx(O8,{onMonacoReady:D=>c(D),value:n===Hs.Stable?p.source:p,previousValue:typeof C=="string"?C:void 0,error:g??void 0,inputData:u,onChange:D=>{r.updateNode(e,E=>(n===Hs.Stable?E.content={source:D}:E.content=D,E))},disabled:d,trace:l})})};Gp.__docgenInfo={description:"",methods:[],displayName:"TabFunction",props:{id:{required:!0,tsType:{name:"string"},description:""}}};const hl={type:$e.Function,icon:A.jsx(ft.Text,{style:{color:"white",fontSize:"inherit"},children:"JS"}),displayName:"Function",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/functions",shortDescription:"Javascript lambda",color:Wr.Orange,renderTab:({id:e})=>A.jsx(Gp,{id:e}),getDiffContent:(e,n)=>{const r={},o=Ie(e).with(Ne.string,()=>0).otherwise(()=>1);Ie([e,n]).with([Ne.string,Ne.string],([c,u])=>{c!==u&&ct.set(r,"source",{previousValue:u,status:"modified"})}).with([{source:Ne.string},{source:Ne.string}],([c,u])=>{c?.source!==u?.source&&ct.set(r,"source",{previousValue:u.source,status:"modified"})}).otherwise(()=>{});const s=Object.keys(r).length>0;return{...o===0?{source:e}:e,...s&&{_diff:{status:"modified",fields:r}}}},generateNode:({index:e})=>({name:`function${e}`,content:{source:Y2}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=gt(),c=Wp(e);return A.jsx(Er,{id:e,specification:{...o,displayName:c===1?"Function":A.jsxs("span",{children:["Function v1 ",A.jsx(Oh,{})]})},name:n.name,isSelected:r,helper:[c===0&&A.jsx(Oh,{size:16})],actions:[A.jsx(Je,{type:"text",onClick:()=>s.openTab(e),children:"Edit Function"},"edit-function")]})}};var Hs=(e=>(e[e.Deprecated=0]="Deprecated",e[e.Stable=1]="Stable",e))(Hs||{});const Wp=e=>{const{kind:n}=Xe(r=>({kind:Ie(r.decisionGraph.nodes.find(o=>o.id===e)?.content).with(Ne.string,()=>0).otherwise(()=>1)}));return n},Oh=({size:e})=>A.jsx(_r,{placement:"top",title:'Function v1 will be deprecated in one of the upcoming releases. To use a new Function, drag and drop a new Function Node and copy your logic. For more information click "Documentation". ',children:A.jsx(Aw,{style:{color:"var(--grl-color-warning-text)",fontSize:e}})});var Bc=new Map,Fs=new WeakMap,Ph=0,P8=void 0;function $8(e){return e?(Fs.has(e)||(Ph+=1,Fs.set(e,Ph.toString())),Fs.get(e)):"0"}function k8(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?$8(e.root):e[n]}`).toString()}function H8(e){const n=k8(e);let r=Bc.get(n);if(!r){const o=new Map;let s;const c=new IntersectionObserver(u=>{u.forEach(l=>{var d;const p=l.isIntersecting&&s.some(h=>l.intersectionRatio>=h);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=p),(d=o.get(l.target))==null||d.forEach(h=>{h(p,l)})})},e);s=c.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:n,observer:c,elements:o},Bc.set(n,r)}return r}function L8(e,n,r={},o=P8){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const d=e.getBoundingClientRect();return n(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:s,observer:c,elements:u}=H8(r),l=u.get(e)||[];return u.has(e)||u.set(e,l),l.push(n),c.observe(e),function(){l.splice(l.indexOf(n),1),l.length===0&&(u.delete(e),c.unobserve(e)),u.size===0&&(c.disconnect(),Bc.delete(s))}}function j8({threshold:e,delay:n,trackVisibility:r,rootMargin:o,root:s,triggerOnce:c,skip:u,initialInView:l,fallbackInView:d,onChange:p}={}){var h;const[g,m]=b.useState(null),x=b.useRef(p),[C,D]=b.useState({inView:!!l,entry:void 0});x.current=p,b.useEffect(()=>{if(u||!g)return;let T;return T=L8(g,(F,R)=>{D({inView:F,entry:R}),x.current&&x.current(F,R),R.isIntersecting&&c&&T&&(T(),T=void 0)},{root:s,rootMargin:o,threshold:e,trackVisibility:r,delay:n},d),()=>{T&&T()}},[Array.isArray(e)?e.toString():e,g,s,o,c,u,r,d,n]);const E=(h=C.entry)==null?void 0:h.target,y=b.useRef(void 0);!g&&E&&!c&&!u&&y.current!==E&&(y.current=E,D({inView:!!l,entry:void 0}));const S=[m,C.inView,C.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}const Up={type:$e.Switch,icon:A.jsx(O_,{}),displayName:"Switch",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/switch",shortDescription:"Conditional branching",color:Wr.Purple,getDiffContent:(e,n)=>nt(e,r=>{const o={};(e.hitPolicy??"")!==(n.hitPolicy??"")&&ct.set(o,"hitPolicy",{status:"modified",previousValue:e.hitPolicy});const s=fo(e?.statements||[],n?.statements||[],{compareFields:(c,u)=>{const l=(c.condition??"")!==u.condition;return{hasChanges:l,fields:{...l&&{condition:{status:"modified",previousValue:u.condition}}}}}});return r.statements=s,s.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&ct.set(o,"statements",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:()=>!1,determineOutputType:e=>e.input},generateNode:({index:e})=>({name:`switch${e}`,content:{hitPolicy:"first",statements:[{id:crypto.randomUUID(),condition:"",isDefault:!1}]}}),renderNode:({specification:e,...n})=>A.jsx(V8,{specification:e,...n})},V8=({id:e,data:n,selected:r,specification:o})=>{const s=gt(),{ref:c,inView:u}=j8({delay:1e3}),{content:l,disabled:d,nodeTrace:p,compactMode:h,isGraphActive:g}=Xe(({decisionGraph:y,disabled:S,simulate:T,compactMode:F,activeTab:R})=>({nodeTrace:Ie(T).with({result:Ne._},({result:k})=>k?.trace?.[e]).otherwise(()=>null),content:(y?.nodes||[]).find(k=>k?.id===e)?.content,disabled:S,compactMode:F,isGraphActive:R==="graph"})),m=Si(e,{disabled:!g||!u}),x=l?.statements||[],C=l?.hitPolicy||"first",D=y=>{s.updateNode(e,S=>(S.content.hitPolicy=y,S))},E=b.useMemo(()=>h?G8:q8,[h]);return A.jsx(Er,{id:e,ref:c,className:Pe(["switch"]),specification:o,name:n.name,handleRight:!1,helper:[A.jsx($c,{},"arrow-right")],noBodyPadding:!0,isSelected:r,actions:[A.jsx(Je,{type:"text",disabled:d,onClick:()=>{C==="first"&&x?.length>0?s.updateNode(e,y=>(y.content.statements=(y.content.statements||[]).map(S=>(S.isDefault&&(S.isDefault=!1),S)),y.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!0}),y)):s.updateNode(e,y=>(y.content.statements=(y.content.statements||[]).map(S=>(S.isDefault&&(S.isDefault=!1),S)),y.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!1}),y))},children:"Add Condition"},"add condition"),A.jsx(ho,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>D("first"),disabled:d},{key:"collect",label:"Collect",disabled:d,onClick:()=>{s.updateNode(e,y=>(y.content.statements=(y.content.statements||[]).map(S=>(S.isDefault&&(S.isDefault=!1),S)),y)),D("collect")}}]},children:A.jsxs(Je,{type:"text",style:{textTransform:"capitalize",marginLeft:"auto"},children:[C," ",A.jsx(B2,{})]})},"hitPolicy")],children:A.jsx("div",{className:"switchNode",children:A.jsxs("div",{className:"switchNode__body edit nodrag",children:[!(x?.length>0)&&A.jsx(ft.Text,{type:"secondary",className:"no-conditions",children:"No conditions"}),x.map((y,S)=>A.jsx(E,{index:S,value:y.condition,diff:y?._diff,id:y.id,isDefault:y.isDefault,totalStatements:x.length,disabled:d,hitPolicy:C,variableType:m,onSetIsDefault:T=>{s.updateNode(e,F=>{const R=F.content.statements.find(k=>k.id===y.id);return T&&(R.condition=""),R.isDefault=T,F})},isActive:Ie(p?.traceData).with({statements:Ne.array(Ne._)},({statements:T})=>T.some(F=>typeof F=="object"&&F&&"id"in F&&F.id===y?.id)).otherwise(()=>!1),onDelete:()=>{s.updateNode(e,T=>(T.content.statements=T.content.statements.filter(F=>F?.id!==y?.id),(T.content.statements||[]).length===1&&(T.content.statements=(T.content.statements||[]).map(F=>(F.isDefault&&(F.isDefault=!1),F))),T)),s.removeEdgeByHandleId(y?.id)},onChange:T=>{s.updateNode(e,F=>{const R=F.content.statements.find(k=>k.id===y.id);return R.condition=T,F})}},y.id))]})})})},q8=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:c=!0,onDelete:u,isActive:l,index:d=0,isDefault:p=!1,onSetIsDefault:h,totalStatements:g,hitPolicy:m,variableType:x})=>{const[C,D]=b.useState(n);b.useLayoutEffect(()=>{C!==n&&D(n)},[n]);const E=T=>{D(T),o?.(T)},y=d===g-1,S=p&&m==="first"&&y&&d>0&&(n||"")?.trim?.()?.length===0;return A.jsxs("div",{className:Pe("switchNode__statement",l&&"active",r?.status&&`diff-${r?.status}`),children:[A.jsxs("div",{className:Pe("switchNode__statement__heading",S&&"switchNode__statement__heading--without-input"),children:[(d===0||m==="collect")&&A.jsx(Je,{disabled:s,className:Pe("switchNode__statement__heading__action"),size:"small",type:"text",children:"If"}),m!=="collect"&&d>0&&A.jsx(Je,{className:Pe("switchNode__statement__heading__action",S&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{y&&m==="first"&&h?.(!1)},children:"Else If"}),m!=="collect"&&d>0&&y&&A.jsx(Je,{className:Pe("switchNode__statement__heading__action",!S&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{y&&m==="first"&&h?.(!0)},children:"Else"}),A.jsx("div",{style:{flexGrow:1}}),!s&&c&&A.jsx(Jh,{title:"Remove condition?",okText:"Remove",onConfirm:()=>u?.(),children:A.jsx(Je,{className:"switchNode__statement__delete",size:"small",type:"text",icon:A.jsx(na,{})})}),A.jsx(Cr,{id:e,type:"source",position:de.Right,className:Pe(l&&"switchNode__activeHandle")})]}),!S&&A.jsx("div",{className:"switchNode__statement__inputArea",children:A.jsx(ta,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:C,maxRows:4,disabled:s,onChange:E,variableType:x})})]})},G8=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:c=!0,onDelete:u,isActive:l,variableType:d})=>{const[p,h]=b.useState(n);b.useLayoutEffect(()=>{p!==n&&h(n)},[n]);const g=m=>{h(m),o?.(m)};return A.jsxs("div",{className:Pe("switchNode__statement","compact",l&&"active",r?.status&&`diff-${r?.status}`),children:[A.jsx("div",{className:Pe("switchNode__statement__inputArea"),children:A.jsx(ta,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:p,maxRows:4,disabled:s,onChange:g,variableType:d})}),!s&&c&&A.jsx("div",{className:"switchNode__statement__button",children:A.jsx(Jh,{title:"Remove condition?",okText:"Remove",onConfirm:()=>u?.(),children:A.jsx(Je,{className:"switchNode__statement__delete",size:"small",type:"text",icon:A.jsx(na,{})})})}),A.jsx(Cr,{id:e,type:"source",position:de.Right,className:Pe(l&&"switchNode__activeHandle")})]})},Ns=(e,n)=>{const r=(e||"").trim(),o=(n||"").trim();return r===o},W8=(e,n,r)=>{const o=U8(e?.nodes??[],n?.nodes??[],r),s=Y8(e?.edges??[],n?.edges??[]);return{nodes:o,edges:s,settings:e?.settings}},U8=(e,n,r)=>{const o=r?.components||[],s=r?.customNodes||[],c=new Map;return(e||[]).forEach(u=>{const l=(n||[]).find(d=>d.id===u.id);if(!l)c.set(u.id,{...u,_diff:{status:"added"}});else{const d={};(l.position.x!==u.position.x||l.position.y!==u.position.y)&&ct.set(d,"position",{status:"moved",previousValue:l.position}),l.name!==u.name&&ct.set(d,"name",{status:"modified",previousValue:l.name});const p=Ie([u.type,l.type]).with([$e.Expression,$e.Expression],()=>fl?.getDiffContent?.(u?.content,l?.content)).with([$e.DecisionTable,$e.DecisionTable],()=>dl?.getDiffContent?.(u?.content,l?.content)).with([$e.Function,$e.Function],()=>{const h=hl?.getDiffContent?.(u?.content,l?.content);return Ie(u?.content).with(Ne.string,()=>(h?._diff?.fields?.source?.status==="modified"&&ct.set(d,"content",{status:"modified",previousValue:h?._diff?.fields?.source?.previousValue}),h?.source)).otherwise(()=>h)}).with([$e.Switch,$e.Switch],()=>Up?.getDiffContent?.(u?.content,l?.content)).otherwise(()=>{const h=o.find(m=>m.type===u.type);if(h)return h?.getDiffContent?.(u?.content,l?.content);const g=s.find(m=>u?.type==="customNode"&&u?.content?.kind===m?.kind);return g?g?.calculateDiff?.(u?.content,l?.content):null});Object.keys(d||{}).filter(h=>h!=="position").length>0||p?._diff?.status==="modified"?c.set(u.id,{...u,content:p??u.content,_diff:{status:"modified",fields:d}}):Object.keys(d||{}).length===1&&d?.position?.status==="moved"?c.set(u.id,{...u,content:p??u.content,_diff:{status:"moved",fields:d}}):c.set(u.id,{...u,_diff:{status:"unchanged"}})}}),(n||[]).forEach(u=>{c.has(u.id)||c.set(u.id,{...u,_diff:{status:"removed"}})}),Array.from(c.values())},Y8=(e,n)=>{const r=new Map;return(e||[]).forEach(o=>{(n||[]).find(c=>c.id===o.id)?r.set(o.id,{...o,_diff:{status:"unchanged"}}):r.set(o.id,{...o,_diff:{status:"added"}})}),(n||[]).forEach(o=>{r.has(o.id)||r.set(o.id,{...o,_diff:{status:"removed"}})}),Array.from(r.values())},fo=(e,n,r={})=>{const{idField:o="id",compareFields:s}=r,c=m=>m[o]||m._id,u=new Map(n.map((m,x)=>[c(m),{...m,index:x}])),l=new Map(e.map((m,x)=>[c(m),{...m,index:x}])),d=[],p=new Set,h=new Set;e.forEach((m,x)=>{u.has(c(m))||p.add(x)}),n.forEach((m,x)=>{l.has(c(m))||h.add(x)});const g=(m,x)=>{const C=Array.from(p).filter(S=>S<x).length,D=Array.from(h).filter(S=>S<m).length,E=x-C;return m-D!==E};return e.forEach((m,x)=>{const C=u.get(c(m));if(!C)d.push({...m,originalIndex:x,_diff:{status:"added",newIndex:x}});else{const D=g(C.index,x),E=s?s(m,C):{hasChanges:!1};E.hasChanges||D?d.push({...m,originalIndex:x,_diff:{status:"modified",positionChanged:D,previousIndex:C.index,newIndex:x,...E.fields?{fields:E.fields}:{}}}):d.push({...m,originalIndex:x,_diff:{status:"unchanged"}})}}),n.forEach((m,x)=>{if(!l.has(c(m))){let C=x;for(;C<d.length&&u.get(c(d[C]))?.index<x;)C++;d.splice(C,0,{...m,originalIndex:x,isRemoved:!0,_diff:{status:"removed",previousIndex:x}})}}),d.map(({originalIndex:m,isRemoved:x,...C})=>C)},Lt=Symbol("private"),X8=e=>({id:e?.id,sourceId:e?.source,type:e?.type,targetId:e?.target,name:e?.label,sourceHandle:e.sourceHandle??void 0,targetHandle:e.targetHandle??void 0}),Ic=e=>({id:e.id,type:e.type,position:e.position,height:e[Lt]?.dimensions?.height,width:e[Lt]?.dimensions?.width,selected:e[Lt]?.selected,data:{name:e.name,kind:e?.content?.kind}}),uo=e=>e.map(Ic),Rc=e=>({id:e.id,source:e.sourceId,type:e?.type||"edge",target:e.targetId,label:e.name,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,markerEnd:{type:_o.ArrowClosed,width:20,height:20}}),Mc=e=>e.filter(n=>n.sourceId&&n.targetId).map(Rc);var qe=(e=>(e[e.Input=0]="Input",e[e.Output=1]="Output",e[e.InferredInput=2]="InferredInput",e[e.InferredOutput=3]="InferredOutput",e))(qe||{});const Fi=H.createContext({}),Yp=e=>{const{children:n}=e,r=b.useMemo(()=>Uu()(()=>({id:void 0,simulate:void 0,decisionGraph:{nodes:[],edges:[]},hoveredEdgeId:null,openTabs:[],activeTab:"graph",name:"graph.json",disabled:!1,configurable:!0,components:[],customNodes:[],activePanel:void 0,panels:[],compactMode:localStorage.getItem("jdm-compact-mode")==="true",nodeTypes:{},globalType:{}})),[]),o=b.useMemo(()=>Uu(()=>({onChange:void 0,onPanelsChange:void 0})),[]),s=b.useMemo(()=>Uu(()=>({nodesState:b.createRef(),edgesState:b.createRef(),graphClipboard:b.createRef(),reactFlowInstance:b.createRef()})),[]),c=b.useMemo(()=>({handleNodesChange:(u=[])=>{const{nodesState:l}=s.getState(),{decisionGraph:d}=r.getState(),[,,p]=l.current;let h=!1;p?.(u);const g=nt(d,m=>{u.forEach(x=>Ie(x).with({type:"position"},C=>{const D=m.nodes.find(E=>E.id===C.id);D&&C.position&&!Qt(D.position,C.position)&&(h=!0,D.position=C.position)}).with({type:"dimensions"},C=>{const D=m.nodes.find(E=>E.id===C.id);D&&!Qt(D[Lt]?.dimensions,C.dimensions)&&(h=!0,D[Lt]??={},D[Lt].dimensions={height:C.dimensions?.height,width:C.dimensions?.width})}).with({type:"select"},C=>{const D=m.nodes.find(E=>E.id===C.id);D&&D[Lt]?.selected!==C.selected&&(h=!0,D[Lt]??={},D[Lt].selected=C.selected)}).otherwise(()=>{}))});h&&(r.setState({decisionGraph:g}),o.getState().onChange?.(g))},handleEdgesChange:(u=[])=>{const{decisionGraph:l}=r.getState(),{edgesState:d}=s.getState();if(d?.current?.[2](u),u.find(p=>p.type==="remove")){const p=nt(l,h=>{const g=(h.edges||[]).map(m=>u.find(C=>"id"in C&&C.id===m.id)?.type==="remove"?null:m).filter(m=>!!m);h.edges=g});r.setState({decisionGraph:p}),o.getState().onChange?.(p)}},setNodes:(u=[])=>{const{nodesState:l}=s.getState(),{decisionGraph:d}=r.getState();l?.current?.[1](uo(u));const p=nt(d,h=>{h.nodes=u});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},addNodes:u=>{const{nodesState:l}=s.getState(),{decisionGraph:d}=r.getState();l.current[0]?.some(g=>g.type===$e.Input)&&(u=u.filter(g=>g.type!==$e.Input)),l.current[1]?.(g=>g.concat(uo(u)));const h=nt(d,g=>{g.nodes=(g.nodes||[]).concat(u)});r.setState({decisionGraph:h}),o.getState().onChange?.(h)},duplicateNodes:u=>{const{nodesState:l,edgesState:d}=s.getState(),{decisionGraph:p}=r.getState();let h=(p?.nodes||[]).filter(y=>u.includes(y.id));if(l.current[0]?.some(y=>y.type===$e.Input)&&(h=h.filter(y=>y.type!==$e.Input)),h.length===0)return;const m=h.reduce((y,S)=>({...y,[S.id]:crypto.randomUUID()}),{}),x=h.map(y=>({...y,id:m[y.id],position:{x:y.position?.x||0,y:(y.position?.y||0)+140}})),C=Object.keys(m),D=[];x.length>0&&(d.current?.[0]||[]).forEach(y=>{C.includes(y.source)&&C.includes(y.target)&&D.push({id:crypto.randomUUID(),type:y.type,sourceId:m[y.source],targetId:m[y.target],sourceHandle:y.sourceHandle??void 0,targetHandle:y.targetHandle??void 0})}),l.current[1]?.(y=>y.concat(x.map(Ic))),d.current[1]?.(y=>y.concat(D.map(Rc)));const E=nt(p,y=>{y.nodes.push(...x),y.edges.push(...D)});r.setState({decisionGraph:E}),o.getState().onChange?.(E)},copyNodes:u=>{const{graphClipboard:l,nodesState:d}=s.getState();if(!l.current||!d.current)return;const[p]=d.current,h=p.filter(g=>u.includes(g.id));l.current.copyNodes(h)},pasteNodes:()=>{const{graphClipboard:u}=s.getState();u.current?.pasteNodes?.()},removeNodes:(u=[])=>{const{nodesState:l,edgesState:d}=s.getState(),{decisionGraph:p,nodeTypes:h}=r.getState();l.current[1]?.(x=>x.filter(C=>u.every(D=>C.id!==D))),d.current[1]?.(x=>x.filter(C=>u.every(D=>C.source!==D&&C.target!==D&&C.sourceHandle!==D&&C.targetHandle!==D)));const g=nt(p,x=>{const C=x.nodes||[],D=x.edges||[];x.nodes=C.filter(E=>u.every(y=>E.id!==y)),x.edges=D.filter(E=>u.every(y=>E.sourceId!==y&&E.targetId!==y&&E.sourceHandle!==y&&E.targetHandle!==y))}),m=nt(h,x=>{u.forEach(C=>{C in x&&delete x[C]})});r.setState({decisionGraph:g,nodeTypes:m}),o.getState().onChange?.(g)},addEdges:u=>{const{edgesState:l}=s.getState(),{decisionGraph:d}=r.getState();l.current?.[1]?.(h=>h.concat(u.map(Rc)));const p=nt(d,h=>{h.edges=(h.edges||[]).concat(u)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},setEdges:(u=[])=>{const{edgesState:l}=s.getState(),{decisionGraph:d}=r.getState();l?.current?.[1]?.(Mc(u));const p=nt(d,h=>{h.edges=u});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdges:u=>{const{edgesState:l}=s.getState(),{decisionGraph:d}=r.getState();l?.current?.[1]?.(h=>h.filter(g=>!u.find(m=>g.id===m)));const p=nt(d,h=>{h.edges=h.edges.filter(g=>!u.find(m=>g.id===m))});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdgeByHandleId:u=>{if(!u)return;const{edgesState:l}=s.getState(),{decisionGraph:d}=r.getState();l?.current?.[1]?.(h=>h.filter(g=>g.sourceHandle!==u));const p=nt(d,h=>{h.edges=h.edges.filter(g=>g.sourceHandle!==u)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},updateNode:(u,l)=>{const{decisionGraph:d}=r.getState(),{nodesState:p}=s.getState(),[h,g]=p.current,m=nt(d,E=>{const y=(E.nodes??[]).find(S=>S?.id===u);y&&l(y)}),x=m.nodes.find(E=>E.id===u);if(!x)return;const C=Ic(x),D=h.find(E=>E.id===u);Qt(C,D)||g(E=>E.map(y=>y.id===u?C:y)),r.setState({decisionGraph:m}),o.getState().onChange?.(m)},setDecisionGraph:(u,l={})=>{const{decisionGraph:d}=r.getState(),{edgesState:p,nodesState:h}=s.getState(),{skipOnChangeEvent:g=!1}=l,m=nt(d,x=>{Object.assign(x,u)});p?.current?.[1](Mc(m?.edges??[])),h?.current?.[1](uo(m?.nodes??[])),r.setState({decisionGraph:m}),g||o.getState().onChange?.(m)},calculateDiffGraph:(u,l)=>{const{components:d,customNodes:p}=r.getState();return W8(u,l,{components:d,customNodes:p})},setHoveredEdgeId:u=>r.setState({hoveredEdgeId:u}),goToNode:u=>{if(r.getState().activeTab!=="graph")return;const{reactFlowInstance:l}=s.getState();if(!l.current)return;const d=l.current.getNode(u);d&&l.current.fitView({nodes:[d],duration:1e3,maxZoom:1.25})},openTab:u=>{const{openTabs:l}=r.getState(),d=l.find(p=>p===u);if(u==="graph")return r.setState({activeTab:u});d?r.setState({activeTab:d}):r.setState({openTabs:[...l,u],activeTab:u})},closeTab:(u,l)=>{const{openTabs:d,activeTab:p}=r.getState(),h=d?.findIndex(D=>D===u),g=d?.[h],m=Ie(l).with(void 0,()=>d.filter(D=>D!==g)).with("close",()=>d.filter(D=>D!==g)).with("close-all",()=>[]).with("close-other",()=>d.filter(D=>D===g)).with("close-right",()=>d.slice(0,h+1)).with("close-left",()=>d.slice(h)).otherwise(()=>d),x={openTabs:m};m?.find(D=>D===p)||(x.activeTab=m?.[h-1]??"graph"),r.setState(x)},setActivePanel:u=>{const{panels:l}=r.getState(),d={activePanel:u===void 0?void 0:(l||[]).find(p=>p.id===u)?.id};o.getState()?.onPanelsChange?.(u),r.setState(d)},setCompactMode:u=>{const l={compactMode:u};localStorage.setItem("jdm-compact-mode",`${u}`),r.setState(l)},toggleCompactMode:()=>{const{compactMode:u}=r.getState(),l=!u,d={compactMode:l};localStorage.setItem("jdm-compact-mode",`${l}`),r.setState(d)},setNodeType:(u,l,d)=>{const{nodeTypes:p}=r.getState(),h=nt(p,g=>{g[u]??={},g[u][l]=d});r.setState({nodeTypes:h})},removeNodeType:(u,l)=>{const{nodeTypes:d}=r.getState(),p=nt(d,h=>{u in h&&(l?l in h[u]&&delete h[u][l]:delete h[u])});r.setState({nodeTypes:p})},triggerNodeSelect:(u,l)=>{const{decisionGraph:d}=r.getState(),{nodesState:p,edgesState:h}=s.getState(),[,g]=p.current,[,m]=h.current,x=nt(d,C=>{const D=C.nodes.find(E=>E.id===u);D&&(l==="only"&&C.nodes.forEach(E=>{E[Lt]&&(E[Lt].selected=!1)}),D[Lt]??={},D[Lt].selected=Ie(l).with("only",()=>!0).otherwise(()=>!D[Lt]?.selected))});g(uo(x.nodes)),l=="only"&&m(C=>C.map(D=>({...D,selected:!1}))),r.setState({decisionGraph:x}),o.getState().onChange?.(x)}}),[]);return A.jsx(Fi.Provider,{value:{stateStore:r,referenceStore:s,listenerStore:o,actions:c},children:n})};function Xe(e,n=Qt){return H.useContext(Fi).stateStore(e,n)}function Xp(e,n=Qt){return H.useContext(Fi).listenerStore(e,n)}function Z8(e,n=Qt){return H.useContext(Fi).referenceStore(e,n)}function gt(){return H.useContext(Fi).actions}function Ur(){return H.useContext(Fi)}const la=e=>{const{diff:n,contentDiff:r}=Xe(o=>{const s=(o?.decisionGraph?.nodes??[]).find(c=>c.id===e);return{diff:s?._diff,contentDiff:s?.content?._diff}});return{diff:n,contentDiff:r}},K8=e=>{const{diff:n}=Xe(r=>({diff:(r?.decisionGraph?.edges??[]).find(s=>s.id===e)?._diff}));return{diff:n}};Yp.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphProvider"};const J8=({id:e,defaultValue:n,value:r,name:o,disabled:s=!1,configurable:c=!0,onChange:u,components:l,customNodes:d,defaultActivePanel:p,panels:h,simulate:g,onPanelsChange:m,onReactFlowInit:x,onCodeExtension:C,onFunctionReady:D})=>{const E=b.useRef(!1),y=gt(),{stateStore:S,listenerStore:T}=Ur(),{decisionGraph:F}=Xe(({decisionGraph:k})=>({decisionGraph:k})),R=j2(k=>{u?.(k)},100);return b.useEffect(()=>{S.setState({id:e,disabled:s,configurable:c,components:Array.isArray(l)?l:[],customNodes:Array.isArray(d)?d:[],panels:h})},[e,s,c,l,d,h]),b.useEffect(()=>{S.setState({name:o??"graph.json"})},[o]),b.useEffect(()=>{S.setState({simulate:g})},[g]),b.useEffect(()=>{T.setState({onReactFlowInit:x,onPanelsChange:m,onCodeExtension:C,onFunctionReady:D})},[x,m,C,D]),b.useEffect(()=>{T.setState({onChange:R})},[R]),b.useEffect(()=>{E.current&&r!==void 0&&!Qt(r,F)&&y.setDecisionGraph(r)},[r]),b.useEffect(()=>{r!==void 0?y.setDecisionGraph(r):n!==void 0&&y.setDecisionGraph(n),S.setState({activePanel:p}),E.current=!0},[]),null},Q8=()=>{let e=null;return{walk:function*(n){const r=eA(n);if(e&&Qt(r,e.digest)){yield*nA(n,e.iterator);return}const o=[];for(const s of tA(n))o.push({id:s.node.id,incomers:s.incomers.map(c=>c.id)}),yield s;e={digest:r,iterator:o}}}},eA=e=>{const n=e.nodes.map(o=>o.id),r=e.edges;return{nodes:n,edges:r}};function*tA(e){const n=uo(e.nodes),r=Mc(e.edges),o=e.nodes.find(l=>l.type==="inputNode"),s=n.find(l=>l.id===o?.id);if(!o||!s||rA(s,n,r))return;yield{node:o,incomers:[]};const c=new Set;c.add(o.id);const u=Js(s,n,r);for(;u.length>0;){const l=u.pop();if(c.has(l.id))continue;const d=H3(l,n,r),p=d.filter(m=>!c.has(m.id));if(p.length>0){u.push(l,...p);continue}c.add(l.id);const h=e.nodes.find(m=>m.id===l.id);if(h){const m=e.nodes.filter(x=>d.some(C=>C.id===x.id));yield{node:h,incomers:m}}const g=Js(l,n,r);u.push(...g)}}function*nA(e,n){for(const r of n){const o=e.nodes.find(c=>c.id===r.id);if(!o)continue;const s=e.nodes.filter(c=>r.incomers.includes(c.id));yield{node:o,incomers:s}}}const rA=(e,n,r)=>{const o=new Set,s=new Set,c=u=>{o.add(u.id),s.add(u.id);const l=Js(u,n,r);for(const d of l)if(o.has(d.id)){if(s.has(d.id))return!0}else if(c(d))return!0;return s.delete(u.id),!1};return c(e)},iA={type:$e.Input,icon:A.jsx(cw,{}),displayName:"Request",color:Wr.Green,documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Provides input context",generateNode:()=>({name:"request"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=gt(),{disabled:c}=Xe(({disabled:u})=>({disabled:u}));return A.jsx(Er,{id:e,specification:o,name:n.name,isSelected:r,handleLeft:!1,menuItems:[{key:"documentation",icon:A.jsx(m0,{}),label:"Documentation",onClick:()=>window.open(o.documentationUrl,"_href")},{key:"delete",icon:A.jsx(na,{}),danger:!0,label:A.jsx(io,{left:"Delete",right:ks.shortcut("Backspace")}),disabled:c,onClick:()=>Pc.confirm({icon:null,title:"Delete node",content:A.jsxs(ft.Text,{children:["Are you sure you want to delete ",A.jsx(ft.Text,{strong:!0,children:n.name})," node."]}),okButtonProps:{danger:!0},onOk:()=>s.removeNodes([e])})}]})}},oA={type:$e.Output,icon:A.jsx(fw,{}),color:Wr.Green,displayName:"Response",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Outputs the context",generateNode:()=>({name:"response"}),renderNode:({id:e,data:n,selected:r,specification:o})=>A.jsx(Er,{id:e,specification:o,name:n.name,isSelected:r,handleRight:!1})};const Gr={[$e.Input]:iA,[$e.Output]:oA,[$e.DecisionTable]:dl,[$e.Expression]:fl,[$e.Function]:hl,[$e.Switch]:Up},sA=()=>{const{stateStore:e}=Ur();return b.useEffect(()=>{if(co())return e.subscribe(({simulate:n,nodeTypes:r,decisionGraph:o},s)=>{if(Qt(n,s?.simulate))return;const c=Ie(n).with({result:Ne.nonNullable},({result:d})=>d.trace).otherwise(()=>null);if(c===null){const d=nt(r,p=>{Object.values(p).forEach(h=>{delete h[qe.Input],delete h[qe.Output]})});e.setState({nodeTypes:d});return}const u=Object.values(c);if(u.length===0)return;const l=nt(r,d=>{u.forEach(p=>{o.nodes.find(g=>g.id===p.id)?.type!=="inputNode"&&(d[p.id]??={},d[p.id][qe.Output]=new Jt(p.output??{}),d[p.id][qe.Input]=new Jt(p.input??{}))})});e.setState({nodeTypes:l})})},[]),b.useEffect(()=>{if(!co())return;const n=Q8();return e.subscribe((r,o)=>{const s=$h(r),c=$h(o),u=uA(r,o);if(Qt(s,c)&&!u)return;const l=aA(r,o,n);l.isModified&&e.setState({nodeTypes:l.nodeTypes})})},[]),b.useEffect(()=>{if(co())return e.subscribe((n,r)=>{const o=kh(n),s=kh(r);if(Qt(o,s))return;const c=Jt.fromJson({Object:{}});n.decisionGraph.nodes.forEach(u=>{const l=n.nodeTypes[u.id],d=l?.[qe.Output]??l?.[qe.InferredOutput]??Jt.fromJson({Object:{}});c.set(u.name,d)}),e.setState({globalType:{$nodes:c}})})},[]),null},aA=({decisionGraph:e,nodeTypes:n,customNodes:r},o,s)=>{let c=!1;const u=nt(n,l=>{s.walk(e).forEach(({node:d,incomers:p})=>{if(d.type==="inputNode")return;const h=p.map(F=>{const R=l[F.id]??{};return R[qe.Output]??R[qe.InferredOutput]}).filter(F=>!!F).map(F=>F.clone()),g=Ie(h.length).with(1,()=>h[0]).otherwise(()=>Jt.fromIncoming(h));l?.[d.id]?.[qe.InferredInput]?.equal(g)||(c=!0,l[d.id]??={},l[d.id][qe.InferredInput]=g);const x=Gr[d.type]?.inferTypes??r.find(F=>F.kind===d.type)?.inferTypes;if(!x)return;const C=l?.[d.id]?.[qe.Input]??l?.[d.id]?.[qe.InferredInput]??Jt.fromJson("Any"),D=o.nodeTypes?.[d.id]?.[qe.Input]??o.nodeTypes?.[d.id]?.[qe.InferredInput]??Jt.fromJson("Any"),E=o.decisionGraph.nodes.find(F=>F.id===d.id)?.content;if(!(x.needsUpdate(d.content,E)||!C.equal(D))&&l?.[d.id]?.[qe.InferredOutput])return;const S=x.determineOutputType({input:C,content:d.content});l?.[d.id]?.[qe.InferredOutput]?.equal(S)||(c=!0,l[d.id]??={},l[d.id][qe.InferredOutput]=S)})});return{isModified:c,nodeTypes:u}},$h=({decisionGraph:e,nodeTypes:n,customNodes:r})=>{const o=e.edges,s=e.nodes.map(({id:p,type:h})=>({id:p,type:h})),c=r.map(p=>p.kind),u=Object.entries(n).map(([p,h])=>({id:p,input:zc(h[qe.Input]),output:zc(h[qe.Output])})),l=e.nodes.find(p=>p.type==="inputNode")?.id,d=Ie(n?.[l??""]?.[qe.InferredOutput]).with(Ne.nonNullable,p=>p.hash()).otherwise(()=>null);return{edgesData:o,nodesData:s,typesData:u,customNodesData:c,inputNodeType:d}},uA=({decisionGraph:e,customNodes:n},r)=>e.nodes.map(s=>{const c=Gr[s.type]?.inferTypes??n.find(l=>l.kind===s.type)?.inferTypes;if(!c)return!1;const u=r.decisionGraph.nodes.find(l=>l.id===s.id);return u?c.needsUpdate(s.content,u.content):!0}).some(s=>s),zc=e=>{if(e)return e.__hash||(e.__hash=e.hash()),e.__hash},kh=e=>({nodeInfo:e.decisionGraph.nodes.map(r=>{const o=e.nodeTypes[r.id],s=o?.[qe.Output]??o?.[qe.InferredOutput];return{id:r.id,type:zc(s),name:r.name}})});var cA=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c])},e(n,r)};return function(n,r){e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),ut=function(){return ut=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ut.apply(this,arguments)},Hh={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Lh={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},Ts={width:"20px",height:"20px",position:"absolute"},lA={top:ut(ut({},Hh),{top:"-5px"}),right:ut(ut({},Lh),{left:void 0,right:"-5px"}),bottom:ut(ut({},Hh),{top:void 0,bottom:"-5px"}),left:ut(ut({},Lh),{left:"-5px"}),topRight:ut(ut({},Ts),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:ut(ut({},Ts),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:ut(ut({},Ts),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:ut(ut({},Ts),{left:"-10px",top:"-10px",cursor:"nw-resize"})},dA=function(e){cA(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.onMouseDown=function(o){r.props.onResizeStart(o,r.props.direction)},r.onTouchStart=function(o){r.props.onResizeStart(o,r.props.direction)},r}return n.prototype.render=function(){return b.createElement("div",{className:this.props.className||"",style:ut(ut({position:"absolute",userSelect:"none"},lA[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},n}(b.PureComponent),fA=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(o[c]=s[c])},e(n,r)};return function(n,r){e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),zn=function(){return zn=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zn.apply(this,arguments)},hA={width:"auto",height:"auto"},Bs=function(e,n,r){return Math.max(Math.min(e,r),n)},jh=function(e,n,r){var o=Math.round(e/n);return o*n+r*(o-1)},pi=function(e,n){return new RegExp(e,"i").test(n)},Is=function(e){return!!(e.touches&&e.touches.length)},pA=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},Vh=function(e,n,r){r===void 0&&(r=0);var o=n.reduce(function(c,u,l){return Math.abs(u-e)<Math.abs(n[c]-e)?l:c},0),s=Math.abs(n[o]-e);return r===0||s<r?n[o]:e},sc=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},Rs=function(e,n,r,o){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var s=Number(e.replace("%",""))/100;return n*s}if(e.endsWith("vw")){var s=Number(e.replace("vw",""))/100;return r*s}if(e.endsWith("vh")){var s=Number(e.replace("vh",""))/100;return o*s}}return e},gA=function(e,n,r,o,s,c,u){return o=Rs(o,e.width,n,r),s=Rs(s,e.height,n,r),c=Rs(c,e.width,n,r),u=Rs(u,e.height,n,r),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof c>"u"?void 0:Number(c),minHeight:typeof u>"u"?void 0:Number(u)}},mA=function(e){return Array.isArray(e)?e:[e,e]},yA=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],qh="__resizable_base__",vA=function(e){fA(n,e);function n(r){var o,s,c,u,l=e.call(this,r)||this;return l.ratio=1,l.resizable=null,l.parentLeft=0,l.parentTop=0,l.resizableLeft=0,l.resizableRight=0,l.resizableTop=0,l.resizableBottom=0,l.targetLeft=0,l.targetTop=0,l.appendBase=function(){if(!l.resizable||!l.window)return null;var d=l.parentNode;if(!d)return null;var p=l.window.document.createElement("div");return p.style.width="100%",p.style.height="100%",p.style.position="absolute",p.style.transform="scale(0, 0)",p.style.left="0",p.style.flex="0 0 100%",p.classList?p.classList.add(qh):p.className+=qh,d.appendChild(p),p},l.removeBase=function(d){var p=l.parentNode;p&&p.removeChild(d)},l.state={isResizing:!1,width:(s=(o=l.propsSize)===null||o===void 0?void 0:o.width)!==null&&s!==void 0?s:"auto",height:(u=(c=l.propsSize)===null||c===void 0?void 0:c.height)!==null&&u!==void 0?u:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},l.onResizeStart=l.onResizeStart.bind(l),l.onMouseMove=l.onMouseMove.bind(l),l.onMouseUp=l.onMouseUp.bind(l),l}return Object.defineProperty(n.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||hA},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){var r=0,o=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,c=this.resizable.offsetHeight,u=this.resizable.style.position;u!=="relative"&&(this.resizable.style.position="relative"),r=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:c,this.resizable.style.position=u}return{width:r,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sizeStyle",{get:function(){var r=this,o=this.props.size,s=function(l){var d;if(typeof r.state[l]>"u"||r.state[l]==="auto")return"auto";if(r.propsSize&&r.propsSize[l]&&(!((d=r.propsSize[l])===null||d===void 0)&&d.toString().endsWith("%"))){if(r.state[l].toString().endsWith("%"))return r.state[l].toString();var p=r.getParentSize(),h=Number(r.state[l].toString().replace("px","")),g=h/p[l]*100;return g+"%"}return sc(r.state[l])},c=o&&typeof o.width<"u"&&!this.state.isResizing?sc(o.width):s("width"),u=o&&typeof o.height<"u"&&!this.state.isResizing?sc(o.height):s("height");return{width:c,height:u}},enumerable:!1,configurable:!0}),n.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var r=this.appendBase();if(!r)return{width:0,height:0};var o=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),r.style.position="relative",r.style.minWidth="100%",r.style.minHeight="100%";var c={width:r.offsetWidth,height:r.offsetHeight};return o&&(this.parentNode.style.flexWrap=s),this.removeBase(r),c},n.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},n.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},n.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var r=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:r.flexBasis!=="auto"?r.flexBasis:void 0})}},n.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},n.prototype.createSizeForCssProperty=function(r,o){var s=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===r&&(typeof s>"u"||s==="auto")?"auto":r},n.prototype.calculateNewMaxFromBoundary=function(r,o){var s=this.props.boundsByDirection,c=this.state.direction,u=s&&pi("left",c),l=s&&pi("top",c),d,p;if(this.props.bounds==="parent"){var h=this.parentNode;h&&(d=u?this.resizableRight-this.parentLeft:h.offsetWidth+(this.parentLeft-this.resizableLeft),p=l?this.resizableBottom-this.parentTop:h.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(d=u?this.resizableRight:this.window.innerWidth-this.resizableLeft,p=l?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(d=u?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),p=l?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return d&&Number.isFinite(d)&&(r=r&&r<d?r:d),p&&Number.isFinite(p)&&(o=o&&o<p?o:p),{maxWidth:r,maxHeight:o}},n.prototype.calculateNewSizeFromDirection=function(r,o){var s=this.props.scale||1,c=mA(this.props.resizeRatio||1),u=c[0],l=c[1],d=this.state,p=d.direction,h=d.original,g=this.props,m=g.lockAspectRatio,x=g.lockAspectRatioExtraHeight,C=g.lockAspectRatioExtraWidth,D=h.width,E=h.height,y=x||0,S=C||0;return pi("right",p)&&(D=h.width+(r-h.x)*u/s,m&&(E=(D-S)/this.ratio+y)),pi("left",p)&&(D=h.width-(r-h.x)*u/s,m&&(E=(D-S)/this.ratio+y)),pi("bottom",p)&&(E=h.height+(o-h.y)*l/s,m&&(D=(E-y)*this.ratio+S)),pi("top",p)&&(E=h.height-(o-h.y)*l/s,m&&(D=(E-y)*this.ratio+S)),{newWidth:D,newHeight:E}},n.prototype.calculateNewSizeFromAspectRatio=function(r,o,s,c){var u=this.props,l=u.lockAspectRatio,d=u.lockAspectRatioExtraHeight,p=u.lockAspectRatioExtraWidth,h=typeof c.width>"u"?10:c.width,g=typeof s.width>"u"||s.width<0?r:s.width,m=typeof c.height>"u"?10:c.height,x=typeof s.height>"u"||s.height<0?o:s.height,C=d||0,D=p||0;if(l){var E=(m-C)*this.ratio+D,y=(x-C)*this.ratio+D,S=(h-D)/this.ratio+C,T=(g-D)/this.ratio+C,F=Math.max(h,E),R=Math.min(g,y),k=Math.max(m,S),j=Math.min(x,T);r=Bs(r,F,R),o=Bs(o,k,j)}else r=Bs(r,h,g),o=Bs(o,m,x);return{newWidth:r,newHeight:o}},n.prototype.setBoundingClientRect=function(){var r=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var s=o.getBoundingClientRect();this.parentLeft=s.left*r,this.parentTop=s.top*r}}if(this.props.bounds&&typeof this.props.bounds!="string"){var c=this.props.bounds.getBoundingClientRect();this.targetLeft=c.left*r,this.targetTop=c.top*r}if(this.resizable){var u=this.resizable.getBoundingClientRect(),l=u.left,d=u.top,p=u.right,h=u.bottom;this.resizableLeft=l*r,this.resizableRight=p*r,this.resizableTop=d*r,this.resizableBottom=h*r}},n.prototype.onResizeStart=function(r,o){if(!(!this.resizable||!this.window)){var s=0,c=0;if(r.nativeEvent&&pA(r.nativeEvent)?(s=r.nativeEvent.clientX,c=r.nativeEvent.clientY):r.nativeEvent&&Is(r.nativeEvent)&&(s=r.nativeEvent.touches[0].clientX,c=r.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var u=this.props.onResizeStart(r,o,this.resizable);if(u===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var l,d=this.window.getComputedStyle(this.resizable);if(d.flexBasis!=="auto"){var p=this.parentNode;if(p){var h=this.window.getComputedStyle(p).flexDirection;this.flexDir=h.startsWith("row")?"row":"column",l=d.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var g={original:{x:s,y:c,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:zn(zn({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(r.target).cursor||"auto"}),direction:o,flexBasis:l};this.setState(g)}},n.prototype.onMouseMove=function(r){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&Is(r))try{r.preventDefault(),r.stopPropagation()}catch{}var s=this.props,c=s.maxWidth,u=s.maxHeight,l=s.minWidth,d=s.minHeight,p=Is(r)?r.touches[0].clientX:r.clientX,h=Is(r)?r.touches[0].clientY:r.clientY,g=this.state,m=g.direction,x=g.original,C=g.width,D=g.height,E=this.getParentSize(),y=gA(E,this.window.innerWidth,this.window.innerHeight,c,u,l,d);c=y.maxWidth,u=y.maxHeight,l=y.minWidth,d=y.minHeight;var S=this.calculateNewSizeFromDirection(p,h),T=S.newHeight,F=S.newWidth,R=this.calculateNewMaxFromBoundary(c,u);this.props.snap&&this.props.snap.x&&(F=Vh(F,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(T=Vh(T,this.props.snap.y,this.props.snapGap));var k=this.calculateNewSizeFromAspectRatio(F,T,{width:R.maxWidth,height:R.maxHeight},{width:l,height:d});if(F=k.newWidth,T=k.newHeight,this.props.grid){var j=jh(F,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),Y=jh(T,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),z=this.props.snapGap||0,G=z===0||Math.abs(j-F)<=z?j:F,Q=z===0||Math.abs(Y-T)<=z?Y:T;F=G,T=Q}var J={width:F-x.width,height:T-x.height};if(C&&typeof C=="string"){if(C.endsWith("%")){var W=F/E.width*100;F=W+"%"}else if(C.endsWith("vw")){var N=F/this.window.innerWidth*100;F=N+"vw"}else if(C.endsWith("vh")){var $=F/this.window.innerHeight*100;F=$+"vh"}}if(D&&typeof D=="string"){if(D.endsWith("%")){var W=T/E.height*100;T=W+"%"}else if(D.endsWith("vw")){var N=T/this.window.innerWidth*100;T=N+"vw"}else if(D.endsWith("vh")){var $=T/this.window.innerHeight*100;T=$+"vh"}}var P={width:this.createSizeForCssProperty(F,"width"),height:this.createSizeForCssProperty(T,"height")};this.flexDir==="row"?P.flexBasis=P.width:this.flexDir==="column"&&(P.flexBasis=P.height);var q=this.state.width!==P.width,ee=this.state.height!==P.height,L=this.state.flexBasis!==P.flexBasis,te=q||ee||L;te&&i0.flushSync(function(){o.setState(P)}),this.props.onResize&&te&&this.props.onResize(r,m,this.resizable,J)}},n.prototype.onMouseUp=function(r){var o,s,c=this.state,u=c.isResizing,l=c.direction,d=c.original;if(!(!u||!this.resizable)){var p={width:this.size.width-d.width,height:this.size.height-d.height};this.props.onResizeStop&&this.props.onResizeStop(r,l,this.resizable,p),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:zn(zn({},this.state.backgroundStyle),{cursor:"auto"})})}},n.prototype.updateSize=function(r){var o,s;this.setState({width:(o=r.width)!==null&&o!==void 0?o:"auto",height:(s=r.height)!==null&&s!==void 0?s:"auto"})},n.prototype.renderResizer=function(){var r=this,o=this.props,s=o.enable,c=o.handleStyles,u=o.handleClasses,l=o.handleWrapperStyle,d=o.handleWrapperClass,p=o.handleComponent;if(!s)return null;var h=Object.keys(s).map(function(g){return s[g]!==!1?b.createElement(dA,{key:g,direction:g,onResizeStart:r.onResizeStart,replaceStyles:c&&c[g],className:u&&u[g]},p&&p[g]?p[g]:null):null});return b.createElement("div",{className:d,style:l},h)},n.prototype.render=function(){var r=this,o=Object.keys(this.props).reduce(function(u,l){return yA.indexOf(l)!==-1||(u[l]=r.props[l]),u},{}),s=zn(zn(zn({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var c=this.props.as||"div";return b.createElement(c,zn({style:s,className:this.props.className},o,{ref:function(u){u&&(r.resizable=u)}}),this.state.isResizing&&b.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},n.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},n}(b.PureComponent);const Gh="jdmEditor:graphPanel:height",Zp=()=>{const e=gt(),{panels:n,activePanel:r}=Xe(({panels:c,activePanel:u})=>({panels:c,activePanel:u})),o=b.useMemo(()=>r===void 0?void 0:(n||[]).find(c=>c.id===r),[r,n]),s=b.useMemo(()=>Number.parseFloat(localStorage.getItem(Gh)??"")??300,[o]);return o?A.jsxs(vA,{className:"grl-dg__panel",defaultSize:{height:s},handleStyles:{bottom:{display:"none"},left:{display:"none"},topLeft:{display:"none"},topRight:{display:"none"},right:{display:"none"},bottomLeft:{display:"none"},bottomRight:{display:"none"}},maxHeight:500,minHeight:150,onResize:(c,u,l)=>{localStorage.setItem(Gh,l.clientHeight.toString())},children:[!o.hideHeader&&A.jsxs("div",{className:"grl-dg__panel__toolbar",children:[A.jsx("div",{className:"grl-dg__panel__toolbar__content",children:A.jsx(ft.Text,{style:{fontSize:13},children:o.title})}),A.jsx("div",{className:"grl-dg__panel__toolbar__actions",children:A.jsx(_r,{placement:"topLeft",title:"Close panel",children:A.jsx(Je,{size:"small",type:"text",icon:A.jsx(jr,{style:{fontSize:12}}),onClick:()=>e.setActivePanel(void 0)})})})]}),A.jsx("div",{className:"grl-dg__panel__content",children:o?.renderPanel?.({})})]}):null};Zp.__docgenInfo={description:"",methods:[],displayName:"GraphPanel"};const Co=ie.string().default(crypto.randomUUID);var Kp=(e=>(e.Input="inputNode",e.Output="outputNode",e.DecisionTable="decisionTableNode",e.Function="functionNode",e.Expression="expressionNode",e.Switch="switchNode",e.Decision="decisionNode",e))(Kp||{});const DA="customNode",or=ie.object({id:Co,name:ie.string(),position:ie.object({x:ie.number(),y:ie.number()}).default({x:0,y:0})}),xA=ie.object({type:ie.literal("inputNode")}).merge(or),_A=ie.object({type:ie.literal("outputNode")}).merge(or),wA=ie.object({type:ie.literal("decisionTableNode"),content:ie.object({hitPolicy:ie.enum(["first","collect"]).nullish().transform(e=>e??"first"),rules:ie.array(ie.record(ie.string(),ie.string().nullish().transform(e=>e??""))).default([]),inputs:ie.array(ie.object({id:Co,name:ie.string().nullish(),field:ie.string().nullish(),defaultValue:ie.string().nullish()})),outputs:ie.array(ie.object({id:Co,name:ie.string(),field:ie.string(),defaultValue:ie.string().nullish()})),passThrough:ie.boolean().nullish().transform(e=>e??!1),inputField:ie.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ie.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ie.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(or),CA=ie.object({type:ie.literal("functionNode"),content:ie.string().or(ie.object({source:ie.string().default("")})).nullish()}).merge(or),EA=ie.object({type:ie.literal("expressionNode"),content:ie.object({expressions:ie.array(ie.object({id:Co,key:ie.string().default(""),value:ie.string().default("")})),passThrough:ie.boolean().nullish().transform(e=>e??!1),inputField:ie.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ie.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ie.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(or),bA=ie.object({type:ie.literal("decisionNode"),content:ie.object({key:ie.string(),passThrough:ie.boolean().nullish().transform(e=>e??!1),inputField:ie.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ie.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ie.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(or),AA=ie.object({type:ie.literal("switchNode"),content:ie.object({hitPolicy:ie.enum(["first","collect"]).nullish().transform(e=>e??"first"),statements:ie.array(ie.object({id:Co,condition:ie.string().nullish().transform(e=>e??""),isDefault:ie.boolean().nullish().transform(e=>e??!1)}))})}).merge(or),SA=ie.object({type:ie.literal(DA),content:ie.object({kind:ie.string(),config:ie.any()})}).merge(or),FA=ie.object({type:ie.string().refine(e=>!Object.values(Kp).includes(e),{message:"Invalid type"}),content:ie.any().nullish()}).merge(or),Oc=ie.discriminatedUnion("type",[bA,EA,CA,wA,AA,SA,xA,_A]).or(FA),NA=ie.object({id:ie.string(),sourceId:ie.string(),targetId:ie.string(),sourceHandle:ie.string().nullish(),type:ie.enum(["edge"])}),TA=ie.object({inputSchema:ie.any().nullish().default(null),outputSchema:ie.any().nullish().default(null)}),BA=ie.object({validation:TA}).default({validation:{inputSchema:null,outputSchema:null}}),Wh=ie.object({nodes:ie.array(Oc).default([]),edges:ie.array(NA).default([]),settings:BA}),Jp=e=>{const n=gt(),{id:r,sourceX:o,sourceY:s,targetX:c,targetY:u,sourcePosition:l,targetPosition:d,style:p={},markerEnd:h}=e,{isHovered:g,disabled:m}=Xe(({hoveredEdgeId:y,disabled:S})=>({isHovered:y===r,disabled:S})),{diff:x}=K8(r),[C,D,E]=tl({sourceX:o,sourceY:s,sourcePosition:l,targetX:c,targetY:u,targetPosition:d});return A.jsxs(A.Fragment,{children:[A.jsx(Ai,{path:C,markerEnd:h,style:{...p||{},stroke:Ie(x).with({status:"added"},()=>"var(--grl-color-success)").with({status:"removed"},()=>"var(--grl-color-error)").otherwise(()=>{})}}),A.jsx(h8,{children:A.jsx("div",{className:"nodrag nopan edge-renderer",style:{transform:`translate(-50%, -50%) translate(${D}px,${E}px)`},children:!m&&A.jsx(Je,{type:"primary",shape:"round",icon:A.jsx(na,{}),danger:!0,className:Pe("grl-edge-delete-button"),"data-visible":g,onClick:()=>n.removeEdges([r])})})})]})},IA=e=>n=>A.jsx(Jp,{...n,...e});Jp.__docgenInfo={description:"",methods:[],displayName:"CustomEdge"};const RA=e=>typeof e!="object"?!1:Array.isArray(e?.nodes),MA=(e,n)=>{const r=Ur(),o=gt(),s=b.useCallback(async u=>{try{if(!e.current)return;const l=(r.stateStore.getState()?.decisionGraph?.nodes||[]).filter(g=>u.some(m=>m.id===g.id)),d=l.map(g=>g.id),p=[];l.length>0&&e.current.getEdges().forEach(m=>{d.includes(m.source)&&d.includes(m.target)&&p.push({id:m.id,type:m.type,sourceId:m.source,targetId:m.target,sourceHandle:m.sourceHandle??void 0,targetHandle:m.targetHandle??void 0})}),await cc(JSON.stringify({nodes:l,edges:p})),Ct.success("Copied to clipboard!")}catch(l){Ct.error(l.message)}},[r]),c=b.useCallback(async()=>{try{if(!e?.current)return;const u=await X2();if(!u)return;const l=JSON.parse(u);if(!RA(l))throw new Error("invalid clipboard");const d=l.nodes.reduce((D,E)=>({...D,[E.id]:crypto.randomUUID()}),{}),p=Object.keys(d),h=e.current.getNodes().find(D=>p.includes(D.id)),g=l.nodes.find(D=>D.id===h?.id),m={x:l.nodes.reduce((D,E)=>D+E.position.x,0)/l.nodes.length,y:l.nodes.reduce((D,E)=>D+E.position.y,0)/l.nodes.length},x=l.nodes.map(D=>{const E={x:D?.position?.x||0,y:D?.position?.y||0};if(h&&g)D.id===h.id?(E.x=h.position.x,E.y=h.position.y-20):(E.x=h.position.x-g.position.x+D.position.x,E.y=h.position.y-g.position.y+D.position.y-20);else if(n.current){const y=n.current.getBoundingClientRect(),S={x:y.width/2,y:y.height/2},T=e.current.project(S);E.x=D.position.x+T.x-m.x/2,E.y=D.position.y+T.y-m.y/2}return{...D,position:E,id:d[D.id]}}),C=(l.edges||[]).map(D=>({id:crypto.randomUUID(),type:D.type,sourceId:d[D.sourceId],targetId:d[D.targetId],sourceHandle:D.sourceHandle??void 0,targetHandle:D.targetHandle??void 0}));if(o.addNodes(x),o.addEdges(C),Ct.success("Pasted from clipboard!"),h)try{await cc(JSON.stringify({nodes:x}))}catch{}}catch{Ct.error("Failed to paste from clipboard")}},[e,n]);return b.useMemo(()=>({copyNodes:s,pasteNodes:c}),[s,c])},Qp=H.memo(({inputDisabled:e,disabled:n})=>{const r=Xe(h=>h.components||[]),o=Xe(h=>h.customNodes||[]),[s,c]=b.useState(""),u=b.useCallback((h,g,m)=>{const x=h.target;if(!x)return;const{offsetX:C,offsetY:D}=h.nativeEvent,{height:E,width:y}=x.getBoundingClientRect(),S={x:C/y,y:D/E};h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("application/reactflow",g),h.dataTransfer.setData("relativePosition",JSON.stringify(S)),m&&h.dataTransfer.setData("customNodeComponent",m)},[]),l=b.useMemo(()=>{const h={core:Object.values(Gr)};return r?.length>0&&(h.extended=r),(o||[]).forEach(g=>{const m=g.group?.trim?.()||"";m.length>0&&(h?.[m]?h[m].push({...g,type:"customNode"}):h[m]=[{...g,type:"customNode"}])}),(o||[]).forEach(g=>{g?.group||(h?.custom?h.custom.push({...g,type:"customNode"}):h.custom=[{...g,type:"customNode"}])}),h},[r,o]),d=b.useMemo(()=>Object.keys(l).reduce((h,g)=>({...h,[g]:(l[g]||[]).filter(m=>!(s?.trim?.().length>0)||(m.type||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.displayName||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.shortDescription||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.group||"").toLowerCase().indexOf(s.toLowerCase())>-1)}),{}),[l,s]),p=r.length+o.length;return A.jsxs("div",{children:[p>5&&A.jsx(c2,{placeholder:"Search components...",value:s,onChange:h=>c(h.target.value||""),allowClear:!0,className:"grl-dg__aside__menu__components__search"}),A.jsx("div",{className:"grl-dg__aside__menu__components",children:Object.keys(d).map(h=>Ie(h).with("core",()=>d.core?.length>0&&A.jsx(H.Fragment,{children:(d.core||[]).map(g=>A.jsx(H.Fragment,{children:A.jsx(Uh,{disabled:Ie(g.type).with($e.Input,()=>n||e).otherwise(()=>n),specification:g,onDragStart:m=>Gr[g.type]!==void 0?u(m,g.type):u(m,"customNode","kind"in g?g.kind:"")})},"kind"in g?g.kind:g.type))},h)).otherwise(g=>d[g]?.length>0&&A.jsx(H.Fragment,{children:(d?.[g]||[]).map(m=>A.jsx(Uh,{disabled:n,specification:m,onDragStart:x=>g==="extended"?u(x,m.type):u(x,"customNode","kind"in m?m.kind:"")},"kind"in m?m.kind:m.type))},g)))})]})}),Uh=({specification:e,disabled:n=!1,...r})=>A.jsx("div",{className:Pe("draggable-component"),draggable:!n,...r,children:A.jsx("div",{style:{pointerEvents:"none"},children:A.jsx(cl,{listMode:!0,compactMode:!0,color:e.color,icon:e.icon,name:e.displayName,type:e.shortDescription})})});Qp.__docgenInfo={description:"",methods:[],displayName:"GraphComponents",props:{inputDisabled:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const zA=Object.entries(Gr).reduce((e,[n,r])=>({...e,[n]:H.memo(o=>r.renderNode({specification:r,...o}),(o,s)=>o.id===s.id&&o.selected===s.selected&&ac(o.data,s.data))}),{}),OA={edge:H.memo(IA(null))},eg=b.forwardRef(function({reactFlowProOptions:n,className:r},o){const s=b.useRef(null),c=b.useRef(null),u=p8([]),l=g8([]),[d,p]=b.useState(!0),h=Ur(),g=gt(),m=Z8(z=>z),{onReactFlowInit:x}=Xp(({onReactFlowInit:z})=>({onReactFlowInit:z})),{disabled:C,hasInputNode:D,components:E,customNodes:y}=Xe(({disabled:z,components:G,customNodes:Q,decisionGraph:J})=>({disabled:z,components:G,customNodes:Q,hasInputNode:(J?.nodes||[]).some(W=>W.type===$e.Input)}));m.nodesState.current=u,m.edgesState.current=l,m.graphClipboard.current=MA(c,s),m.reactFlowInstance.current=c.current;const S=b.useMemo(()=>H.memo(z=>{const G=y.find(Q=>Q.kind===z?.data?.kind);return G?G.renderNode({specification:G,...z}):(console.warn("node not found",z,y),A.jsx(Er,{id:z.id,specification:{displayName:`${z.data?.kind}`,color:"var(--grl-color-error)",icon:A.jsx(Nw,{})},name:z?.data?.name,isSelected:z.selected,displayError:!0,noBodyPadding:!0,handleLeft:!0,handleRight:!0}))},(z,G)=>z.id===G.id&&z.selected===G.selected&&ac(z.data,G.data)),[y]),T=b.useMemo(()=>E.reduce((z,G)=>({...z,[G.type]:H.memo(Q=>G.renderNode({specification:G,...Q}),(Q,J)=>Q.id===J.id&&Q.selected===J.selected&&ac(Q.data,J.data))}),{...zA,customNode:S}),[E,S]),F=async(z,G,Q)=>{if(!s.current||!c.current)return;if(!G){const $=s.current.getBoundingClientRect(),P={x:$.width/2,y:$.height/2};G=c.current.project(P)}const J=Ie(z).with("customNode",()=>y.find($=>$.kind===Q)).otherwise(()=>[...Object.values(Gr),...E].find(P=>P.type===z));if(!J){Ct.error(`Unknown node type ${z} - ${Q}.`);return}let W=Ie(J).with({kind:Ne.string},$=>{const P=(c.current?.getNodes()||[]).filter(ee=>ee.data?.kind===$.kind).length+1,q=$.generateNode({index:P});return{id:crypto.randomUUID(),type:"customNode",name:q.name,position:G,content:{kind:$.kind,config:q?.config}}}).with({type:Ne.string},$=>{const P=(c.current?.getNodes()||[]).filter(ee=>ee.type===$.type).length+1,q=$.generateNode({index:P});return{id:crypto.randomUUID(),type:$.type,position:G,...q}}).otherwise(()=>null);if(!W){Ct.error(`Unknown node type ${z} - ${Q}.`);return}if(J.onNodeAdd)try{W=await J.onNodeAdd(W)}catch{return}const N=Oc.safeParse(W);if(N.success)return g.addNodes([Oc.parse(W)]);Ct.error(N.error?.message)},R=z=>{if(z.source===z.target||C)return!1;const[G]=u,[Q]=l,J=Q.some($=>$.source===z.source&&$.target===z.target&&($.sourceHandle??null)===(z.sourceHandle??null)&&($.targetHandle??null)===(z.targetHandle??null)),W=G.find($=>$.id===z.target);if(!W||W.id===z.source)return!1;const N=($,P=new Set)=>{if(P.has($.id))return!1;P.add($.id);for(const q of Js($,G,Q))if(q.id===z.source||N(q,P))return!0};return!J&&!N(W)},k=z=>{if(z.preventDefault(),z.stopPropagation(),!s.current||!c.current)return;const G=s.current.getBoundingClientRect(),Q=z.dataTransfer.getData("application/reactflow");let J;try{J=JSON.parse(z.dataTransfer.getData("relativePosition"))}catch{return}const W=c.current.project({x:z.clientX-G.left,y:z.clientY-G.top});W.x-=Math.round(J.x*226/10)*10,W.y-=Math.round(J.y*60/10)*10;const N=Ie(z.dataTransfer.getData("customNodeComponent")).with(Ne.string,$=>$).otherwise(()=>{});F(Q,W,N)},j=z=>{z.preventDefault(),z.dataTransfer.dropEffect="move"},Y=z=>{const G={...z,type:"edge",id:crypto.randomUUID()};C||g.addEdges([X8(G)])};return b.useImperativeHandle(o,()=>({...g,stateStore:h.stateStore})),A.jsx("div",{className:Pe(["tab-content",r]),tabIndex:0,onKeyDown:z=>{z.key==="v"&&z.metaKey&&!C&&g.pasteNodes()},children:A.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex"},children:[!C&&!d&&A.jsx("div",{className:"grl-dg__components__floating",style:{position:"absolute",top:8,right:8,zIndex:1},children:A.jsx(_r,{placement:"right",title:"Components",children:A.jsx(Je,{icon:A.jsx(I2,{style:{fontSize:12}}),onClick:()=>p(!0)})})}),A.jsx("div",{tabIndex:0,className:"content-wrapper",onKeyDown:z=>{const[G]=u,[Q]=l;if(z.key==="c"&&z.metaKey){const J=u[0].filter(W=>W.selected).map(({id:W})=>W);if(J.length===0)return;g.copyNodes(J),z.preventDefault()}else if(z.key==="d"&&z.metaKey){if(!C){const J=G.filter(W=>W.selected).map(({id:W})=>W);if(J.length===0)return;g.duplicateNodes(J)}z.preventDefault()}else if(z.key==="Backspace"){if(!C){const J=G.filter(N=>N.selected),W=Q.filter(N=>N.selected);if(J.length>0){const N=J.length,$=N>1?"nodes":"node";Pc.confirm({icon:null,title:`Delete ${$}`,content:A.jsxs(ft.Text,{children:["Are you sure you want to delete ",N>1?`${N} ${$}`:$,"?"]}),okButtonProps:{danger:!0},onOk:()=>{W.length>0&&g.removeEdges(W.map(P=>P.id)),g.removeNodes(J.map(P=>P.id))}})}else W.length>0&&g.removeEdges(W.map(N=>N.id))}z.stopPropagation(),z.preventDefault()}},children:A.jsx("div",{className:Pe(["react-flow"]),ref:s,children:A.jsxs(Pp,{deleteKeyCode:null,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,zoomOnDoubleClick:!1,connectionRadius:35,nodes:u[0],edges:l[0],onInit:z=>{c.current=z,x?.(z)},snapToGrid:!0,snapGrid:[5,5],minZoom:.25,selectionMode:bi.Partial,nodeTypes:T,edgeTypes:OA,onDrop:k,onDragOver:j,onConnect:Y,isValidConnection:R,proOptions:n,nodesConnectable:!C,nodesDraggable:!C,edgesUpdatable:!C,onNodesChange:g.handleNodesChange,onEdgesChange:g.handleEdgesChange,onNodesDelete:z=>{z.forEach(G=>{g.closeTab(G?.id)})},onEdgeMouseEnter:(z,G)=>g.setHoveredEdgeId(G.id),onEdgeMouseLeave:()=>g.setHoveredEdgeId(null),children:[A.jsx(w8,{showInteractive:!1,children:A.jsx(mi,{onClick:()=>g.toggleCompactMode(),children:A.jsx(ew,{})})}),A.jsx(F8,{color:"var(--grl-color-border)",gap:20})]})})}),!C&&d&&A.jsx("div",{className:"grl-dg__aside__menu",children:A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"grl-dg__aside__menu__heading",children:[A.jsxs("div",{className:"grl-dg__aside__menu__heading__text",children:[A.jsx(ft.Text,{strong:!0,style:{marginBottom:0},children:"Components"})," ",A.jsx(ft.Text,{type:"secondary",style:{fontSize:10,marginLeft:5},children:"(Drag-and-drop)"})]}),A.jsx(Je,{type:"text",size:"small",icon:A.jsx(jr,{style:{fontSize:12}}),onClick:()=>p(!1)})]}),A.jsx("div",{className:"grl-dg__aside__menu__content",children:A.jsx(Qp,{inputDisabled:D,disabled:C})})]})})]})})});eg.__docgenInfo={description:"",methods:[],displayName:"Graph"};const Yh="application/vnd.gorules.decision",tg=()=>{const e=Ur(),n=b.useRef(null),r=b.useRef(null),{setDecisionGraph:o,setActivePanel:s}=gt(),{disabled:c,panels:u,activePanel:l}=Xe(({disabled:C,panels:D,activePanel:E})=>({disabled:C,panels:D,activePanel:E})),d=async C=>{const D=C?.target?.files,E=new FileReader;E.onload=function(y){try{const S=JSON.parse(y?.target?.result);if(S?.contentType!==Yh)throw new Error("Invalid content type");const T=Array.isArray(S?.nodes)?S.nodes:[],F=T.map(j=>j.id),R=S.edges.filter(j=>F.includes(j?.targetId)&&F.includes(j?.sourceId)),k=Wh.safeParse({nodes:T,edges:R,settings:S?.settings});if(!k.success){console.log(k.error?.message),Ct.error(k.error?.message);return}o(k.data)}catch(S){Ct.error(S.message)}},E.readAsText(Array.from(D)?.[0],"UTF-8")},p=C=>{const D=C?.target?.files[0],E=new FileReader;try{E.readAsArrayBuffer(D),E.onload=async()=>{const y=E.result;if(!y)return;const S=await R2(y),{decisionGraph:T}=e.stateStore.getState(),F=T.nodes.map(j=>{let Y=j;return S.forEach(z=>{z.id===j.id&&(Y={...j,content:z.content})}),Y}),R=S.filter(j=>!F.some(Y=>Y.id===j.id)).map((j,Y)=>({...j,position:{x:Y*250,y:0}})),k=Wh.safeParse({nodes:[...F,...R],edges:T.edges,settings:T.settings});if(!k.success){console.log(k.error?.message),Ct.error(k.error?.message);return}o(k.data),Ct.success("Excel file has been uploaded successfully!")}}catch{Ct.error("Failed to upload Excel!")}},h=async()=>{try{const{name:C}=e.stateStore.getState(),{decisionGraph:D}=e.stateStore.getState(),E=`${C.replaceAll(".json","")}.json`,y=JSON.stringify({contentType:Yh,nodes:D.nodes,edges:D.edges,settings:D.settings},null,2),S=new Blob([y],{type:"application/json"}),T=URL.createObjectURL(S),F=window.document.createElement("a");F.href=T,F.download=E,window.document.body.appendChild(F),F.click(),window.document.body.removeChild(F),URL.revokeObjectURL(T)}catch(C){Ct.error(C.message)}},g=async(C="decision tables")=>{try{const{decisionGraph:D}=e.stateStore.getState(),E=D.nodes.filter(y=>y.type===$e.DecisionTable).map(y=>({...y.content,id:y.id,name:y.name}));await M2(C,E),Ct.success("Excel file has been downloaded successfully!")}catch{Ct.error("Failed to download Excel file!")}},m=[{key:"upload-json",label:"Upload JSON",onClick:()=>n?.current?.click?.()},{key:"upload-excel",label:"Upload Excel",onClick:()=>r?.current?.click?.()}],x=[{key:"download-json",label:"Download JSON",onClick:()=>h()},{key:"download-excel",label:"Download Excel",onClick:()=>g()}];return A.jsxs("div",{className:"grl-dg__aside",children:[A.jsx("input",{hidden:!0,accept:"application/json",type:"file",ref:n,onChange:d,onClick:C=>{C.target.value=null}}),A.jsx("input",{hidden:!0,accept:".xlsx",type:"file",ref:r,onChange:p,onClick:C=>{C.target.value=null}}),A.jsxs("div",{className:"grl-dg__aside__side-bar",children:[A.jsxs("div",{className:"grl-dg__aside__side-bar__top",children:[!c&&A.jsx(ho,{menu:{items:m},placement:"bottomRight",trigger:["click"],arrow:!0,children:A.jsx(Je,{type:"text",disabled:c,icon:A.jsx(K_,{})})}),A.jsx(ho,{menu:{items:x},placement:"bottomRight",trigger:["click"],arrow:!0,children:A.jsx(Je,{type:"text",icon:A.jsx(Y_,{})})})]}),A.jsx("div",{className:"grl-dg__aside__side-bar__bottom",children:(u||[]).map(C=>{const D=l===C.id;return A.jsx(_r,{title:`${D?"Close":"Open"} ${C.title.toLowerCase()} panel`,placement:"right",children:A.jsx(Je,{type:"text",icon:C.icon,style:{background:D?"rgba(0, 0, 0, 0.1)":void 0},onClick:()=>{if(C?.onClick)return C.onClick();C?.renderPanel&&s(D?void 0:C.id)}},C.id)},C.id)})})]})]})};tg.__docgenInfo={description:"",methods:[],displayName:"GraphSideToolbar"};const ng=({disabled:e,tabBarExtraContent:n})=>{const r=gt(),{openNodes:o,activeNodeId:s}=Xe(({decisionGraph:c,activeTab:u,openTabs:l})=>({activeNodeId:(c?.nodes??[]).find(d=>d.id===u)?.id,openNodes:(l||[]).map(d=>{const p=(c?.nodes??[]).find(h=>h.id===d);if(p)return{id:p?.id,name:p.name,type:p.type,diff:p?._diff}}).filter(d=>!!d)}));return A.jsx("div",{children:A.jsx(r0,{type:"line",size:"small",className:Pe("grl-graph-tabs"),activeKey:s||"graph",onChange:c=>r.openTab(c),tabBarExtraContent:n,items:[{closable:!1,key:"graph",label:A.jsx(Xh,{total:o?.length,icon:A.jsx(rw,{}),name:"Graph",active:!s||s==="graph",onContextClick:c=>{r.closeTab("graph",c)}})},...o.map((c,u)=>{const l=Gr[c.type];return{disabled:e,key:c.id,label:A.jsx(Xh,{onContextClick:d=>{r.closeTab(c.id,d)},icon:l?.icon,name:c?.name??c?.type,diffStatus:c?.diff?.status,color:l?.color,index:u,active:c.id===s,total:o?.length,onClose:()=>r.closeTab(c.id)}),closable:!0}})]})})},Xh=({total:e=0,index:n=-1,icon:r,name:o,active:s,diffStatus:c,color:u=Wr.Blue,onClose:l,onContextClick:d})=>{const p=[e>0&&n!==-1&&{key:"close",label:"Close",onClick:()=>d?.("close")},e>0&&n!==-1&&{key:"close-all",label:"Close all Tabs",onClick:()=>d?.("close-all")},e>0&&n!==-1&&{key:"close-other",label:"Close other Tabs",onClick:()=>d?.("close-other")},e>0&&n+1<e&&{key:"close-right",label:"Close Tabs to the right",onClick:()=>d?.("close-right")},e>0&&n>0&&n>0&&{key:"close-left",label:"Close Tabs to the left",onClick:()=>d?.("close-left")}].filter(h=>!!h);return A.jsx(ho,{menu:{items:p},trigger:["contextMenu"],children:A.jsxs("div",{className:"grl-graph-tabs__tab","data-active":s,children:[A.jsx(h0,{size:"small",shape:"square",style:{background:u,fontSize:11,width:18,height:18,lineHeight:"18px",borderRadius:3},icon:r}),o,A.jsx(Zh,{status:c,style:{fontSize:16}}),l&&A.jsx(Je,{className:"grl-graph-tabs__closeIcon",type:"text",size:"small",style:{height:20,width:20,color:"black",borderRadius:"50%",lineHeight:0},icon:A.jsx(jr,{style:{fontSize:10}}),onClick:h=>{h.stopPropagation(),l?.()}})]})})};ng.__docgenInfo={description:"",methods:[],displayName:"GraphTabs",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"TabsProps['tabBarExtraContent']"},description:""}}};const rg=H.memo(b.forwardRef(function({reactFlowProOptions:n,tabBarExtraContent:r},o){const[s,c]=b.useState(!1),u=Xe(({decisionGraph:l,activeTab:d})=>(l?.nodes??[]).some(p=>p.id===d));return A.jsxs(A.Fragment,{children:[A.jsx(tg,{}),A.jsxs("div",{className:"grl-dg__graph",children:[A.jsx(ng,{disabled:s,tabBarExtraContent:r}),A.jsx(eg,{ref:o,className:Pe([!u&&"active"]),reactFlowProOptions:n,onDisableTabs:c}),A.jsx(PA,{})]}),A.jsx(Zp,{})]})})),PA=H.memo(()=>{const{openNodes:e,activeNodeId:n,components:r}=Xe(({decisionGraph:c,openTabs:u,activeTab:l,components:d})=>{const p=(c?.nodes??[]).find(g=>g.id===l)?.id;return{openNodes:(c?.nodes??[]).filter(g=>u.includes(g.id)).map(({id:g,type:m})=>({id:g,type:m})),activeNodeId:p,components:d}}),o=b.useRef(null),s=b.useMemo(()=>l2(d2,void 0,{rootElement:o.current}),[o.current]);return A.jsx("div",{style:{display:"contents"},ref:o,children:e.map(c=>A.jsx("div",{className:Pe(["tab-content",n===c?.id&&"active"]),children:Ie(c?.type).with($e.DecisionTable,()=>dl?.renderTab?.({id:c?.id,manager:s})).with($e.Function,()=>hl?.renderTab?.({id:c?.id,manager:s})).with($e.Expression,()=>fl?.renderTab?.({id:c?.id,manager:s})).otherwise(()=>{const u=r.find(l=>l.type===c.type);return u?u?.renderTab?.({id:c.id,manager:s}):null})},c?.id))})});rg.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphWrapper"};const $A=b.forwardRef(({manager:e,reactFlowProOptions:n,tabBarExtraContent:r,...o},s)=>A.jsx("div",{className:"grl-dg",children:A.jsx(ul,{children:A.jsxs(Yp,{children:[A.jsx(rg,{ref:s,reactFlowProOptions:n,tabBarExtraContent:r}),A.jsx(sA,{}),A.jsx(J8,{...o})]})})}));$A.__docgenInfo={description:"",methods:[],displayName:"DecisionGraph"};export{$A as D,Er as G,vw as R,Xe as a,M8 as b,W8 as c,go as l,gt as u};
