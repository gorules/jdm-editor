const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-ZlP2Eigh.js","./index-CQHSiloJ.js","./index-DQDNmYQF.js","./index-DYVtDik4.js","./monaco-Bb_jW-CV.js","./wasm-4n1FS0GN.js","./AntdIcon-CiuL2TYD.js","./iframe-C0WoNdRM.js","./index.module-Dzt1z5Mh.js","./index-Ps6eo1yX.css"])))=>i.map(i=>d[i]);
import{r as cg,j as E}from"./index-CQHSiloJ.js";import{r as T,R as W,c as _n,g as lg}from"./index-DQDNmYQF.js";import{v as rw,w as iw,x as ow,y as sw,a as Wc,p as Tt,b as Jn,D as dg,f as ks,z as fl,E as id,i as Ou,F as fg,G as od,I as hg,e as hl,c as aw,H as uw}from"./confirm-action-DO8YvHJu.js";import{N as cw,R as lw,b as dw,a as fw,u as hw,f as pw,A as gw,d as mw,s as Zt,o as kh,T as sd}from"./index.module-Dzt1z5Mh.js";import{K as $s,k as pg,m as gg,Y as ss,r as mg,E as yw,$ as vw,ai as Dw,C as sa,u as Bu,b as Sr,G as _w,H as bw,a7 as ww,h as xw,a6 as Cw,a0 as Ew,O as Sw,X as Aw,j as Fw,a1 as Nw,d as Tw,z as qe,i as yo,f as Zn,N as Ge,T as Kt,aq as xr,t as ad}from"./wasm-4n1FS0GN.js";import{g as yg,S as as,d as Iw,a as ud,c as Du,P as vg,R as Rw,w as Ow,p as Bw,b as Xc,e as $h}from"./monaco-Bb_jW-CV.js";import{a as Mw,r as Pw,P as zw,L as jw,N as et,D as kw,R as Do,T as $w,M as Mu,F as Pr,b as qw,c as Pu,d as Dg,z as fe,e as Lw,C as Hw,f as Gw,g as Vw,h as Uw}from"./dt-BRMSdDOt.js";import{c as aa,b as Ke}from"./ce-preview-BhjUWkDx.js";import{a as Ww,r as Xw,I as fn,D as Zs,B as ut,S as cd}from"./AntdIcon-CiuL2TYD.js";import{E as Yw}from"./expression-DW9Knpiy.js";import{_ as Zw}from"./iframe-C0WoNdRM.js";const Jw=e=>{const{componentCls:n,notificationMarginEdge:r,animationMaxHeight:o}=e,s=`${n}-notice`,u=new $s("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),l=new $s("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),c=new $s("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),d=new $s("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[s]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:l}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:c}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:u}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:r,_skip_check_:!0},[s]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:d}}}}},Kw=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Qw={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},ex=(e,n)=>{const{componentCls:r}=e;return{[`${r}-${n}`]:{[`&${r}-stack > ${r}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Qw[n]]:{value:0,_skip_check_:!0}}}}},tx=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},nx=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},rx=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},tx(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},nx(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Kw.map(r=>ex(e,r)).reduce((r,o)=>Object.assign(Object.assign({},r),o),{}))},_g=e=>{const{iconCls:n,componentCls:r,boxShadow:o,fontSizeLG:s,notificationMarginBottom:u,borderRadiusLG:l,colorSuccess:c,colorInfo:d,colorWarning:f,colorError:h,colorTextHeading:g,notificationBg:m,notificationPadding:D,notificationMarginEdge:C,notificationProgressBg:y,notificationProgressHeight:w,fontSize:_,lineHeight:x,width:N,notificationIconSize:F,colorText:j}=e,H=`${r}-notice`;return{position:"relative",marginBottom:u,marginInlineStart:"auto",background:m,borderRadius:l,boxShadow:o,[H]:{padding:D,width:N,maxWidth:`calc(100vw - ${ss(e.calc(C).mul(2).equal())})`,overflow:"hidden",lineHeight:x,wordWrap:"break-word"},[`${H}-message`]:{marginBottom:e.marginXS,color:g,fontSize:s,lineHeight:e.lineHeightLG},[`${H}-description`]:{fontSize:_,color:j},[`${H}-closable ${H}-message`]:{paddingInlineEnd:e.paddingLG},[`${H}-with-icon ${H}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:s},[`${H}-with-icon ${H}-description`]:{marginInlineStart:e.calc(e.marginSM).add(F).equal(),fontSize:_},[`${H}-icon`]:{position:"absolute",fontSize:F,lineHeight:1,[`&-success${n}`]:{color:c},[`&-info${n}`]:{color:d},[`&-warning${n}`]:{color:f},[`&-error${n}`]:{color:h}},[`${H}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},vw(e)),[`${H}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${ss(l)} * 2)`,left:{_skip_check_:!0,value:l},right:{_skip_check_:!0,value:l},bottom:0,blockSize:w,border:0,"&, &::-webkit-progress-bar":{borderRadius:l,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:y},"&::-webkit-progress-value":{borderRadius:l,background:y}},[`${H}-btn`]:{float:"right",marginTop:e.marginSM}}},ix=e=>{const{componentCls:n,notificationMarginBottom:r,notificationMarginEdge:o,motionDurationMid:s,motionEaseInOut:u}=e,l=`${n}-notice`,c=new $s("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:r},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},mg(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:u,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:u,animationFillMode:"both",animationDuration:s,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:c,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${l}-btn`]:{float:"left"}}})},{[n]:{[`${l}-wrapper`]:Object.assign({},_g(e))}}]},bg=e=>({zIndexPopup:e.zIndexPopupBase+yw+50,width:384}),wg=e=>{const n=e.paddingMD,r=e.paddingLG;return gg(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:r,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${ss(e.paddingMD)} ${ss(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},xg=pg("Notification",e=>{const n=wg(e);return[ix(n),Jw(n),rx(n)]},bg),ox=Dw(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,r=wg(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},_g(r)),{width:r.width,maxWidth:`calc(100vw - ${ss(e.calc(r.notificationMarginEdge).mul(2).equal())})`,margin:0})}},bg);var sx=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};function ld(e,n){return n===null||n===!1?null:n||T.createElement(Ww,{className:`${e}-close-icon`})}const ax={success:fw,info:dw,error:_w,warning:lw},Cg=e=>{const{prefixCls:n,icon:r,type:o,message:s,description:u,btn:l,role:c="alert"}=e;let d=null;return r?d=T.createElement("span",{className:`${n}-icon`},r):o&&(d=T.createElement(ax[o]||null,{className:Sr(`${n}-icon`,`${n}-icon-${o}`)})),T.createElement("div",{className:Sr({[`${n}-with-icon`]:d}),role:c},d,T.createElement("div",{className:`${n}-message`},s),T.createElement("div",{className:`${n}-description`},u),l&&T.createElement("div",{className:`${n}-btn`},l))},ux=e=>{const{prefixCls:n,className:r,icon:o,type:s,message:u,description:l,btn:c,closable:d=!0,closeIcon:f,className:h}=e,g=sx(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:m}=T.useContext(sa),D=n||m("notification"),C=`${D}-notice`,y=Bu(D),[w,_,x]=xg(D,y);return w(T.createElement("div",{className:Sr(`${C}-pure-panel`,_,r,x,y)},T.createElement(ox,{prefixCls:D}),T.createElement(cw,Object.assign({},g,{prefixCls:D,eventKey:"pure",duration:null,closable:d,className:Sr({notificationClassName:h}),closeIcon:ld(D,f),content:T.createElement(Cg,{prefixCls:C,icon:o,type:s,message:u,description:l,btn:c})}))))};function cx(e,n,r){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":o={left:0,top:n,bottom:"auto"};break;case"topRight":o={right:0,top:n,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":o={left:0,top:"auto",bottom:r};break;default:o={right:0,top:"auto",bottom:r};break}return o}function lx(e){return{motionName:`${e}-fade`}}var dx=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const qh=24,fx=4.5,hx="topRight",px=e=>{let{children:n,prefixCls:r}=e;const o=Bu(r),[s,u,l]=xg(r,o);return s(W.createElement(pw,{classNames:{list:Sr(u,l,o)}},n))},gx=(e,n)=>{let{prefixCls:r,key:o}=n;return W.createElement(px,{prefixCls:r,key:o},e)},mx=W.forwardRef((e,n)=>{const{top:r,bottom:o,prefixCls:s,getContainer:u,maxCount:l,rtl:c,onAllRemoved:d,stack:f,duration:h,pauseOnHover:g=!0,showProgress:m}=e,{getPrefixCls:D,getPopupContainer:C,notification:y,direction:w}=T.useContext(sa),[,_]=ww(),x=s||D("notification"),N=ee=>cx(ee,r??qh,o??qh),F=()=>Sr({[`${x}-rtl`]:c??w==="rtl"}),j=()=>lx(x),[H,K]=hw({prefixCls:x,style:N,className:F,motion:j,closable:!0,closeIcon:ld(x),duration:h??fx,getContainer:()=>u?.()||C?.()||document.body,maxCount:l,pauseOnHover:g,showProgress:m,onAllRemoved:d,renderNotifications:gx,stack:f===!1?!1:{threshold:typeof f=="object"?f?.threshold:void 0,offset:8,gap:_.margin}});return W.useImperativeHandle(n,()=>Object.assign(Object.assign({},H),{prefixCls:x,notification:y})),K});function Eg(e){const n=W.useRef(null);return bw(),[W.useMemo(()=>{const o=c=>{var d;if(!n.current)return;const{open:f,prefixCls:h,notification:g}=n.current,m=`${h}-notice`,{message:D,description:C,icon:y,type:w,btn:_,className:x,style:N,role:F="alert",closeIcon:j,closable:H}=c,K=dx(c,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),ee=ld(m,typeof j<"u"?j:g?.closeIcon);return f(Object.assign(Object.assign({placement:(d=e?.placement)!==null&&d!==void 0?d:hx},K),{content:W.createElement(Cg,{prefixCls:m,icon:y,type:w,message:D,description:C,btn:_,role:F}),className:Sr(w&&`${m}-${w}`,x,g?.className),style:Object.assign(Object.assign({},g?.style),N),closeIcon:ee,closable:H??!!ee}))},u={open:o,destroy:c=>{var d,f;c!==void 0?(d=n.current)===null||d===void 0||d.close(c):(f=n.current)===null||f===void 0||f.destroy()}};return["success","info","warning","error"].forEach(c=>{u[c]=d=>o(Object.assign(Object.assign({},d),{type:c}))}),u},[]),W.createElement(mx,Object.assign({key:"notification-holder"},e,{ref:n}))]}function yx(e){return Eg(e)}function vx(){const[,e]=T.useReducer(n=>n+1,0);return e}function Dx(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=T.useRef({}),r=vx(),o=Mw();return xw(()=>{const s=o.subscribe(u=>{n.current=u,e&&r()});return()=>o.unsubscribe(s)},[]),n.current}const pl=T.createContext({}),_x=e=>{const{antCls:n,componentCls:r,iconCls:o,avatarBg:s,avatarColor:u,containerSize:l,containerSizeLG:c,containerSizeSM:d,textFontSize:f,textFontSizeLG:h,textFontSizeSM:g,borderRadius:m,borderRadiusLG:D,borderRadiusSM:C,lineWidth:y,lineType:w}=e,_=(x,N,F)=>({width:x,height:x,borderRadius:"50%",[`&${r}-square`]:{borderRadius:F},[`&${r}-icon`]:{fontSize:N,[`> ${o}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},mg(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:u,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${ss(y)} ${w} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),_(l,f,m)),{"&-lg":Object.assign({},_(c,h,D)),"&-sm":Object.assign({},_(d,g,C)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},bx=e=>{const{componentCls:n,groupBorderColor:r,groupOverlapping:o,groupSpace:s}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:o}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:s}}}},wx=e=>{const{controlHeight:n,controlHeightLG:r,controlHeightSM:o,fontSize:s,fontSizeLG:u,fontSizeXL:l,fontSizeHeading3:c,marginXS:d,marginXXS:f,colorBorderBg:h}=e;return{containerSize:n,containerSizeLG:r,containerSizeSM:o,textFontSize:Math.round((u+l)/2),textFontSizeLG:c,textFontSizeSM:s,groupSpace:f,groupOverlapping:-d,groupBorderColor:h}},Sg=pg("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:r}=e,o=gg(e,{avatarBg:r,avatarColor:n});return[_x(o),bx(o)]},wx);var xx=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const Cx=(e,n)=>{const[r,o]=T.useState(1),[s,u]=T.useState(!1),[l,c]=T.useState(!0),d=T.useRef(null),f=T.useRef(null),h=Cw(n,d),{getPrefixCls:g,avatar:m}=T.useContext(sa),D=T.useContext(pl),C=()=>{if(!f.current||!d.current)return;const De=f.current.offsetWidth,Se=d.current.offsetWidth;if(De!==0&&Se!==0){const{gap:Oe=4}=e;Oe*2<Se&&o(Se-Oe*2<De?(Se-Oe*2)/De:1)}};T.useEffect(()=>{u(!0)},[]),T.useEffect(()=>{c(!0),o(1)},[e.src]),T.useEffect(C,[e.gap]);const y=()=>{const{onError:De}=e;De?.()!==!1&&c(!1)},{prefixCls:w,shape:_,size:x,src:N,srcSet:F,icon:j,className:H,rootClassName:K,alt:ee,draggable:B,children:V,crossOrigin:Y}=e,te=xx(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),Z=Ew(De=>{var Se,Oe;return(Oe=(Se=x??D?.size)!==null&&Se!==void 0?Se:De)!==null&&Oe!==void 0?Oe:"default"}),R=Object.keys(typeof Z=="object"?Z||{}:{}).some(De=>["xs","sm","md","lg","xl","xxl"].includes(De)),G=Dx(R),k=T.useMemo(()=>{if(typeof Z!="object")return{};const De=Pw.find(Oe=>G[Oe]),Se=Z[De];return Se?{width:Se,height:Se,fontSize:Se&&(j||V)?Se/2:18}:{}},[G,Z]),J=g("avatar",w),se=Bu(J),[U,re,ue]=Sg(J,se),de=Sr({[`${J}-lg`]:Z==="large",[`${J}-sm`]:Z==="small"}),le=T.isValidElement(N),ve=_||D?.shape||"circle",ge=Sr(J,de,m?.className,`${J}-${ve}`,{[`${J}-image`]:le||N&&l,[`${J}-icon`]:!!j},ue,se,H,K,re),Ee=typeof Z=="number"?{width:Z,height:Z,fontSize:j?Z/2:18}:{};let Be;if(typeof N=="string"&&l)Be=T.createElement("img",{src:N,draggable:B,srcSet:F,onError:y,alt:ee,crossOrigin:Y});else if(le)Be=N;else if(j)Be=j;else if(s||r!==1){const De=`scale(${r})`,Se={msTransform:De,WebkitTransform:De,transform:De};Be=T.createElement(Sw,{onResize:C},T.createElement("span",{className:`${J}-string`,ref:f,style:Object.assign({},Se)},V))}else Be=T.createElement("span",{className:`${J}-string`,style:{opacity:0},ref:f},V);return delete te.onError,delete te.gap,U(T.createElement("span",Object.assign({},te,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Ee),k),m?.style),te.style),className:ge,ref:h}),Be))},Ag=T.forwardRef(Cx),Lh=e=>{const{size:n,shape:r}=T.useContext(pl),o=T.useMemo(()=>({size:e.size||n,shape:e.shape||r}),[e.size,e.shape,n,r]);return T.createElement(pl.Provider,{value:o},e.children)},Ex=e=>{var n,r,o;const{getPrefixCls:s,direction:u}=T.useContext(sa),{prefixCls:l,className:c,rootClassName:d,style:f,maxCount:h,maxStyle:g,size:m,shape:D,maxPopoverPlacement:C,maxPopoverTrigger:y,children:w,max:_}=e,x=s("avatar",l),N=`${x}-group`,F=Bu(x),[j,H,K]=Sg(x,F),ee=Sr(N,{[`${N}-rtl`]:u==="rtl"},K,F,c,d,H),B=Aw(w).map((te,Z)=>Fw(te,{key:`avatar-key-${Z}`})),V=_?.count||h,Y=B.length;if(V&&V<Y){const te=B.slice(0,V),Z=B.slice(V,Y),R=_?.style||g,G=((n=_?.popover)===null||n===void 0?void 0:n.trigger)||y||"hover",k=((r=_?.popover)===null||r===void 0?void 0:r.placement)||C||"top",J=Object.assign(Object.assign({content:Z},_?.popover),{overlayClassName:Sr(`${N}-popover`,(o=_?.popover)===null||o===void 0?void 0:o.overlayClassName),placement:k,trigger:G});return te.push(T.createElement(zw,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},J),T.createElement(Ag,{style:R},`+${Y-V}`))),j(T.createElement(Lh,{shape:D,size:m},T.createElement("div",{className:ee,style:f},te)))}return j(T.createElement(Lh,{shape:D,size:m},T.createElement("div",{className:ee,style:f},B)))},dd=Ag;dd.Group=Ex;let _r=null,du=e=>e(),_u=[],Js={};function Hh(){const{getContainer:e,rtl:n,maxCount:r,top:o,bottom:s,showProgress:u,pauseOnHover:l}=Js,c=e?.()||document.body;return{getContainer:()=>c,rtl:n,maxCount:r,top:o,bottom:s,showProgress:u,pauseOnHover:l}}const Sx=W.forwardRef((e,n)=>{const{notificationConfig:r,sync:o}=e,{getPrefixCls:s}=T.useContext(sa),u=Js.prefixCls||s("notification"),l=T.useContext(gw),[c,d]=Eg(Object.assign(Object.assign(Object.assign({},r),{prefixCls:u}),l.notification));return W.useEffect(o,[]),W.useImperativeHandle(n,()=>{const f=Object.assign({},c);return Object.keys(f).forEach(h=>{f[h]=function(){return o(),c[h].apply(c,arguments)}}),{instance:f,sync:o}}),d}),Ax=W.forwardRef((e,n)=>{const[r,o]=W.useState(Hh),s=()=>{o(Hh)};W.useEffect(s,[]);const u=Nw(),l=u.getRootPrefixCls(),c=u.getIconPrefixCls(),d=u.getTheme(),f=W.createElement(Sx,{ref:n,sync:s,notificationConfig:r});return W.createElement(Tw,{prefixCls:l,iconPrefixCls:c,theme:d},u.holderRender?u.holderRender(f):f)});function fd(){if(!_r){const e=document.createDocumentFragment(),n={fragment:e};_r=n,du(()=>{Xw(W.createElement(Ax,{ref:r=>{const{instance:o,sync:s}=r||{};Promise.resolve().then(()=>{!n.instance&&o&&(n.instance=o,n.sync=s,fd())})}}),e)});return}_r.instance&&(_u.forEach(e=>{switch(e.type){case"open":{du(()=>{_r.instance.open(Object.assign(Object.assign({},Js),e.config))});break}case"destroy":du(()=>{_r?.instance.destroy(e.key)});break}}),_u=[])}function Fx(e){Js=Object.assign(Object.assign({},Js),e),du(()=>{var n;(n=_r?.sync)===null||n===void 0||n.call(_r)})}function Fg(e){_u.push({type:"open",config:e}),fd()}const Nx=e=>{_u.push({type:"destroy",key:e}),fd()},Tx=["success","info","warning","error"],Ix={open:Fg,destroy:Nx,config:Fx,useNotification:yx,_InternalPanelDoNotUseOrYouWillBeFired:ux},hd=Ix;Tx.forEach(e=>{hd[e]=n=>Fg(Object.assign(Object.assign({},n),{type:e}))});var Rx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},Ox={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:r}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:n}}]}},name:"check-circle",theme:"twotone"},Bx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},Mx={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:r}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:n}}]}},name:"close-circle",theme:"twotone"},Px={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},zx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},jx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},kx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},$x={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},qx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Lx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},Hx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},Gx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 284H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM104 228a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0zm0 284a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"unordered-list",theme:"outlined"},Vx={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},Ux={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"};/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wx=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]],Xx=aa("arrow-right-from-line",Wx);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]],Zx=aa("arrow-right-to-line",Yx);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Kx=aa("grid-3x3",Jx);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],eC=aa("hash",Qx);/**
 * @license lucide-react v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],nC=aa("split",tC);function gl(){return gl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gl.apply(this,arguments)}const rC=(e,n)=>T.createElement(fn,gl({},e,{ref:n,icon:Rx})),Ng=T.forwardRef(rC);function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ml.apply(this,arguments)}const iC=(e,n)=>T.createElement(fn,ml({},e,{ref:n,icon:Ox})),oC=T.forwardRef(iC);function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},yl.apply(this,arguments)}const sC=(e,n)=>T.createElement(fn,yl({},e,{ref:n,icon:Bx})),aC=T.forwardRef(sC);function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},vl.apply(this,arguments)}const uC=(e,n)=>T.createElement(fn,vl({},e,{ref:n,icon:Mx})),cC=T.forwardRef(uC);function Dl(){return Dl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Dl.apply(this,arguments)}const lC=(e,n)=>T.createElement(fn,Dl({},e,{ref:n,icon:Px})),dC=T.forwardRef(lC);function _l(){return _l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},_l.apply(this,arguments)}const fC=(e,n)=>T.createElement(fn,_l({},e,{ref:n,icon:zx})),hC=T.forwardRef(fC);function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},bl.apply(this,arguments)}const pC=(e,n)=>T.createElement(fn,bl({},e,{ref:n,icon:jx})),gC=T.forwardRef(pC);function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},wl.apply(this,arguments)}const mC=(e,n)=>T.createElement(fn,wl({},e,{ref:n,icon:kx})),yC=T.forwardRef(mC);function xl(){return xl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},xl.apply(this,arguments)}const vC=(e,n)=>T.createElement(fn,xl({},e,{ref:n,icon:rw})),DC=T.forwardRef(vC);function Cl(){return Cl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Cl.apply(this,arguments)}const _C=(e,n)=>T.createElement(fn,Cl({},e,{ref:n,icon:$x})),Tg=T.forwardRef(_C);function El(){return El=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},El.apply(this,arguments)}const bC=(e,n)=>T.createElement(fn,El({},e,{ref:n,icon:jw})),wC=T.forwardRef(bC);function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Sl.apply(this,arguments)}const xC=(e,n)=>T.createElement(fn,Sl({},e,{ref:n,icon:qx})),CC=T.forwardRef(xC);function Al(){return Al=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Al.apply(this,arguments)}const EC=(e,n)=>T.createElement(fn,Al({},e,{ref:n,icon:Lx})),SC=T.forwardRef(EC);function Fl(){return Fl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Fl.apply(this,arguments)}const AC=(e,n)=>T.createElement(fn,Fl({},e,{ref:n,icon:iw})),FC=T.forwardRef(AC);function Nl(){return Nl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Nl.apply(this,arguments)}const NC=(e,n)=>T.createElement(fn,Nl({},e,{ref:n,icon:Hx})),Ig=T.forwardRef(NC);function Tl(){return Tl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Tl.apply(this,arguments)}const TC=(e,n)=>T.createElement(fn,Tl({},e,{ref:n,icon:Gx})),IC=T.forwardRef(TC);function Il(){return Il=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Il.apply(this,arguments)}const RC=(e,n)=>T.createElement(fn,Il({},e,{ref:n,icon:Vx})),OC=T.forwardRef(RC);function Rl(){return Rl=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Rl.apply(this,arguments)}const BC=(e,n)=>T.createElement(fn,Rl({},e,{ref:n,icon:Ux})),MC=T.forwardRef(BC);var PC=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,zC=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,jC=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,Yc={Space_Separator:PC,ID_Start:zC,ID_Continue:jC},Vt={isSpaceSeparator(e){return typeof e=="string"&&Yc.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||Yc.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e==="‌"||e==="‍"||Yc.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let Ol,Tn,si,bu,Mi,Cr,dn,pd,Xs;var kC=function(n,r){Ol=String(n),Tn="start",si=[],bu=0,Mi=1,Cr=0,dn=void 0,pd=void 0,Xs=void 0;do dn=$C(),HC[Tn]();while(dn.type!=="eof");return typeof r=="function"?Bl({"":Xs},"",r):Xs};function Bl(e,n,r){const o=e[n];if(o!=null&&typeof o=="object")if(Array.isArray(o))for(let s=0;s<o.length;s++){const u=String(s),l=Bl(o,u,r);l===void 0?delete o[u]:Object.defineProperty(o,u,{value:l,writable:!0,enumerable:!0,configurable:!0})}else for(const s in o){const u=Bl(o,s,r);u===void 0?delete o[s]:Object.defineProperty(o,s,{value:u,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,n,o)}let He,je,qs,oi,Ye;function $C(){for(He="default",je="",qs=!1,oi=1;;){Ye=ui();const e=Rg[He]();if(e)return e}}function ui(){if(Ol[bu])return String.fromCodePoint(Ol.codePointAt(bu))}function ae(){const e=ui();return e===`
`?(Mi++,Cr=0):e?Cr+=e.length:Cr++,e&&(bu+=e.length),e}const Rg={default(){switch(Ye){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":ae();return;case"/":ae(),He="comment";return;case void 0:return ae(),xt("eof")}if(Vt.isSpaceSeparator(Ye)){ae();return}return Rg[Tn]()},comment(){switch(Ye){case"*":ae(),He="multiLineComment";return;case"/":ae(),He="singleLineComment";return}throw Ct(ae())},multiLineComment(){switch(Ye){case"*":ae(),He="multiLineCommentAsterisk";return;case void 0:throw Ct(ae())}ae()},multiLineCommentAsterisk(){switch(Ye){case"*":ae();return;case"/":ae(),He="default";return;case void 0:throw Ct(ae())}ae(),He="multiLineComment"},singleLineComment(){switch(Ye){case`
`:case"\r":case"\u2028":case"\u2029":ae(),He="default";return;case void 0:return ae(),xt("eof")}ae()},value(){switch(Ye){case"{":case"[":return xt("punctuator",ae());case"n":return ae(),fo("ull"),xt("null",null);case"t":return ae(),fo("rue"),xt("boolean",!0);case"f":return ae(),fo("alse"),xt("boolean",!1);case"-":case"+":ae()==="-"&&(oi=-1),He="sign";return;case".":je=ae(),He="decimalPointLeading";return;case"0":je=ae(),He="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":je=ae(),He="decimalInteger";return;case"I":return ae(),fo("nfinity"),xt("numeric",1/0);case"N":return ae(),fo("aN"),xt("numeric",NaN);case'"':case"'":qs=ae()==='"',je="",He="string";return}throw Ct(ae())},identifierNameStartEscape(){if(Ye!=="u")throw Ct(ae());ae();const e=Ml();switch(e){case"$":case"_":break;default:if(!Vt.isIdStartChar(e))throw Gh();break}je+=e,He="identifierName"},identifierName(){switch(Ye){case"$":case"_":case"‌":case"‍":je+=ae();return;case"\\":ae(),He="identifierNameEscape";return}if(Vt.isIdContinueChar(Ye)){je+=ae();return}return xt("identifier",je)},identifierNameEscape(){if(Ye!=="u")throw Ct(ae());ae();const e=Ml();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!Vt.isIdContinueChar(e))throw Gh();break}je+=e,He="identifierName"},sign(){switch(Ye){case".":je=ae(),He="decimalPointLeading";return;case"0":je=ae(),He="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":je=ae(),He="decimalInteger";return;case"I":return ae(),fo("nfinity"),xt("numeric",oi*(1/0));case"N":return ae(),fo("aN"),xt("numeric",NaN)}throw Ct(ae())},zero(){switch(Ye){case".":je+=ae(),He="decimalPoint";return;case"e":case"E":je+=ae(),He="decimalExponent";return;case"x":case"X":je+=ae(),He="hexadecimal";return}return xt("numeric",oi*0)},decimalInteger(){switch(Ye){case".":je+=ae(),He="decimalPoint";return;case"e":case"E":je+=ae(),He="decimalExponent";return}if(Vt.isDigit(Ye)){je+=ae();return}return xt("numeric",oi*Number(je))},decimalPointLeading(){if(Vt.isDigit(Ye)){je+=ae(),He="decimalFraction";return}throw Ct(ae())},decimalPoint(){switch(Ye){case"e":case"E":je+=ae(),He="decimalExponent";return}if(Vt.isDigit(Ye)){je+=ae(),He="decimalFraction";return}return xt("numeric",oi*Number(je))},decimalFraction(){switch(Ye){case"e":case"E":je+=ae(),He="decimalExponent";return}if(Vt.isDigit(Ye)){je+=ae();return}return xt("numeric",oi*Number(je))},decimalExponent(){switch(Ye){case"+":case"-":je+=ae(),He="decimalExponentSign";return}if(Vt.isDigit(Ye)){je+=ae(),He="decimalExponentInteger";return}throw Ct(ae())},decimalExponentSign(){if(Vt.isDigit(Ye)){je+=ae(),He="decimalExponentInteger";return}throw Ct(ae())},decimalExponentInteger(){if(Vt.isDigit(Ye)){je+=ae();return}return xt("numeric",oi*Number(je))},hexadecimal(){if(Vt.isHexDigit(Ye)){je+=ae(),He="hexadecimalInteger";return}throw Ct(ae())},hexadecimalInteger(){if(Vt.isHexDigit(Ye)){je+=ae();return}return xt("numeric",oi*Number(je))},string(){switch(Ye){case"\\":ae(),je+=qC();return;case'"':if(qs)return ae(),xt("string",je);je+=ae();return;case"'":if(!qs)return ae(),xt("string",je);je+=ae();return;case`
`:case"\r":throw Ct(ae());case"\u2028":case"\u2029":GC(Ye);break;case void 0:throw Ct(ae())}je+=ae()},start(){switch(Ye){case"{":case"[":return xt("punctuator",ae())}He="value"},beforePropertyName(){switch(Ye){case"$":case"_":je=ae(),He="identifierName";return;case"\\":ae(),He="identifierNameStartEscape";return;case"}":return xt("punctuator",ae());case'"':case"'":qs=ae()==='"',He="string";return}if(Vt.isIdStartChar(Ye)){je+=ae(),He="identifierName";return}throw Ct(ae())},afterPropertyName(){if(Ye===":")return xt("punctuator",ae());throw Ct(ae())},beforePropertyValue(){He="value"},afterPropertyValue(){switch(Ye){case",":case"}":return xt("punctuator",ae())}throw Ct(ae())},beforeArrayValue(){if(Ye==="]")return xt("punctuator",ae());He="value"},afterArrayValue(){switch(Ye){case",":case"]":return xt("punctuator",ae())}throw Ct(ae())},end(){throw Ct(ae())}};function xt(e,n){return{type:e,value:n,line:Mi,column:Cr}}function fo(e){for(const n of e){if(ui()!==n)throw Ct(ae());ae()}}function qC(){switch(ui()){case"b":return ae(),"\b";case"f":return ae(),"\f";case"n":return ae(),`
`;case"r":return ae(),"\r";case"t":return ae(),"	";case"v":return ae(),"\v";case"0":if(ae(),Vt.isDigit(ui()))throw Ct(ae());return"\0";case"x":return ae(),LC();case"u":return ae(),Ml();case`
`:case"\u2028":case"\u2029":return ae(),"";case"\r":return ae(),ui()===`
`&&ae(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Ct(ae());case void 0:throw Ct(ae())}return ae()}function LC(){let e="",n=ui();if(!Vt.isHexDigit(n)||(e+=ae(),n=ui(),!Vt.isHexDigit(n)))throw Ct(ae());return e+=ae(),String.fromCodePoint(parseInt(e,16))}function Ml(){let e="",n=4;for(;n-- >0;){const r=ui();if(!Vt.isHexDigit(r))throw Ct(ae());e+=ae()}return String.fromCodePoint(parseInt(e,16))}const HC={start(){if(dn.type==="eof")throw ho();Zc()},beforePropertyName(){switch(dn.type){case"identifier":case"string":pd=dn.value,Tn="afterPropertyName";return;case"punctuator":Ya();return;case"eof":throw ho()}},afterPropertyName(){if(dn.type==="eof")throw ho();Tn="beforePropertyValue"},beforePropertyValue(){if(dn.type==="eof")throw ho();Zc()},beforeArrayValue(){if(dn.type==="eof")throw ho();if(dn.type==="punctuator"&&dn.value==="]"){Ya();return}Zc()},afterPropertyValue(){if(dn.type==="eof")throw ho();switch(dn.value){case",":Tn="beforePropertyName";return;case"}":Ya()}},afterArrayValue(){if(dn.type==="eof")throw ho();switch(dn.value){case",":Tn="beforeArrayValue";return;case"]":Ya()}},end(){}};function Zc(){let e;switch(dn.type){case"punctuator":switch(dn.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=dn.value;break}if(Xs===void 0)Xs=e;else{const n=si[si.length-1];Array.isArray(n)?n.push(e):Object.defineProperty(n,pd,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")si.push(e),Array.isArray(e)?Tn="beforeArrayValue":Tn="beforePropertyName";else{const n=si[si.length-1];n==null?Tn="end":Array.isArray(n)?Tn="afterArrayValue":Tn="afterPropertyValue"}}function Ya(){si.pop();const e=si[si.length-1];e==null?Tn="end":Array.isArray(e)?Tn="afterArrayValue":Tn="afterPropertyValue"}function Ct(e){return wu(e===void 0?`JSON5: invalid end of input at ${Mi}:${Cr}`:`JSON5: invalid character '${Og(e)}' at ${Mi}:${Cr}`)}function ho(){return wu(`JSON5: invalid end of input at ${Mi}:${Cr}`)}function Gh(){return Cr-=5,wu(`JSON5: invalid identifier character at ${Mi}:${Cr}`)}function GC(e){console.warn(`JSON5: '${Og(e)}' in strings is not valid ECMAScript; consider escaping`)}function Og(e){const n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(n[e])return n[e];if(e<" "){const r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function wu(e){const n=new SyntaxError(e);return n.lineNumber=Mi,n.columnNumber=Cr,n}var VC=function(n,r,o){const s=[];let u="",l,c,d="",f;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(o=r.space,f=r.quote,r=r.replacer),typeof r=="function")c=r;else if(Array.isArray(r)){l=[];for(const y of r){let w;typeof y=="string"?w=y:(typeof y=="number"||y instanceof String||y instanceof Number)&&(w=String(y)),w!==void 0&&l.indexOf(w)<0&&l.push(w)}}return o instanceof Number?o=Number(o):o instanceof String&&(o=String(o)),typeof o=="number"?o>0&&(o=Math.min(10,Math.floor(o)),d="          ".substr(0,o)):typeof o=="string"&&(d=o.substr(0,10)),h("",{"":n});function h(y,w){let _=w[y];switch(_!=null&&(typeof _.toJSON5=="function"?_=_.toJSON5(y):typeof _.toJSON=="function"&&(_=_.toJSON(y))),c&&(_=c.call(w,y,_)),_ instanceof Number?_=Number(_):_ instanceof String?_=String(_):_ instanceof Boolean&&(_=_.valueOf()),_){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof _=="string")return g(_);if(typeof _=="number")return String(_);if(typeof _=="object")return Array.isArray(_)?C(_):m(_)}function g(y){const w={"'":.1,'"':.2},_={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let x="";for(let F=0;F<y.length;F++){const j=y[F];switch(j){case"'":case'"':w[j]++,x+=j;continue;case"\0":if(Vt.isDigit(y[F+1])){x+="\\x00";continue}}if(_[j]){x+=_[j];continue}if(j<" "){let H=j.charCodeAt(0).toString(16);x+="\\x"+("00"+H).substring(H.length);continue}x+=j}const N=f||Object.keys(w).reduce((F,j)=>w[F]<w[j]?F:j);return x=x.replace(new RegExp(N,"g"),_[N]),N+x+N}function m(y){if(s.indexOf(y)>=0)throw TypeError("Converting circular structure to JSON5");s.push(y);let w=u;u=u+d;let _=l||Object.keys(y),x=[];for(const F of _){const j=h(F,y);if(j!==void 0){let H=D(F)+":";d!==""&&(H+=" "),H+=j,x.push(H)}}let N;if(x.length===0)N="{}";else{let F;if(d==="")F=x.join(","),N="{"+F+"}";else{let j=`,
`+u;F=x.join(j),N=`{
`+u+F+`,
`+w+"}"}}return s.pop(),u=w,N}function D(y){if(y.length===0)return g(y);const w=String.fromCodePoint(y.codePointAt(0));if(!Vt.isIdStartChar(w))return g(y);for(let _=w.length;_<y.length;_++)if(!Vt.isIdContinueChar(String.fromCodePoint(y.codePointAt(_))))return g(y);return y}function C(y){if(s.indexOf(y)>=0)throw TypeError("Converting circular structure to JSON5");s.push(y);let w=u;u=u+d;let _=[];for(let N=0;N<y.length;N++){const F=h(String(N),y);_.push(F!==void 0?F:"null")}let x;if(_.length===0)x="[]";else if(d==="")x="["+_.join(",")+"]";else{let N=`,
`+u,F=_.join(N);x=`[
`+u+F+`,
`+w+"]"}return s.pop(),u=w,x}};const UC={parse:kC,stringify:VC};var Ri=UC;function In(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=In(e[r]))!==""&&(n+=(n&&" ")+o);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}const{useDebugValue:WC}=W,{useSyncExternalStoreWithSelector:XC}=sw,YC=e=>e;function Bg(e,n=YC,r){const o=XC(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return WC(o),o}const Vh=(e,n)=>{const r=ow(e),o=(s,u=n)=>Bg(r,s,u);return Object.assign(o,r),o},ZC=(e,n)=>e?Vh(e,n):Vh;function bn(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[o,s]of e)if(!Object.is(s,n.get(o)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const o of e)if(!n.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(n,o)||!Object.is(e[o],n[o]))return!1;return!0}var JC={value:()=>{}};function zu(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new fu(r)}function fu(e){this._=e}function KC(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}fu.prototype=zu.prototype={constructor:fu,on:function(e,n){var r=this._,o=KC(e+"",r),s,u=-1,l=o.length;if(arguments.length<2){for(;++u<l;)if((s=(e=o[u]).type)&&(s=QC(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<l;)if(s=(e=o[u]).type)r[s]=Uh(r[s],e.name,n);else if(n==null)for(s in r)r[s]=Uh(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new fu(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,u;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],o=0,s=u.length;o<s;++o)u[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,u=o.length;s<u;++s)o[s].value.apply(n,r)}};function QC(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function Uh(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=JC,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var Pl="http://www.w3.org/1999/xhtml";const Wh={svg:"http://www.w3.org/2000/svg",xhtml:Pl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ju(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Wh.hasOwnProperty(n)?{space:Wh[n],local:e}:e}function e2(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Pl&&n.documentElement.namespaceURI===Pl?n.createElement(e):n.createElementNS(r,e)}}function t2(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mg(e){var n=ju(e);return(n.local?t2:e2)(n)}function n2(){}function gd(e){return e==null?n2:function(){return this.querySelector(e)}}function r2(e){typeof e!="function"&&(e=gd(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=new Array(l),d,f,h=0;h<l;++h)(d=u[h])&&(f=e.call(d,d.__data__,h,u))&&("__data__"in d&&(f.__data__=d.__data__),c[h]=f);return new Kn(o,this._parents)}function i2(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function o2(){return[]}function Pg(e){return e==null?o2:function(){return this.querySelectorAll(e)}}function s2(e){return function(){return i2(e.apply(this,arguments))}}function a2(e){typeof e=="function"?e=s2(e):e=Pg(e);for(var n=this._groups,r=n.length,o=[],s=[],u=0;u<r;++u)for(var l=n[u],c=l.length,d,f=0;f<c;++f)(d=l[f])&&(o.push(e.call(d,d.__data__,f,l)),s.push(d));return new Kn(o,s)}function zg(e){return function(){return this.matches(e)}}function jg(e){return function(n){return n.matches(e)}}var u2=Array.prototype.find;function c2(e){return function(){return u2.call(this.children,e)}}function l2(){return this.firstElementChild}function d2(e){return this.select(e==null?l2:c2(typeof e=="function"?e:jg(e)))}var f2=Array.prototype.filter;function h2(){return Array.from(this.children)}function p2(e){return function(){return f2.call(this.children,e)}}function g2(e){return this.selectAll(e==null?h2:p2(typeof e=="function"?e:jg(e)))}function m2(e){typeof e!="function"&&(e=zg(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=[],d,f=0;f<l;++f)(d=u[f])&&e.call(d,d.__data__,f,u)&&c.push(d);return new Kn(o,this._parents)}function kg(e){return new Array(e.length)}function y2(){return new Kn(this._enter||this._groups.map(kg),this._parents)}function xu(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}xu.prototype={constructor:xu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function v2(e){return function(){return e}}function D2(e,n,r,o,s,u){for(var l=0,c,d=n.length,f=u.length;l<f;++l)(c=n[l])?(c.__data__=u[l],o[l]=c):r[l]=new xu(e,u[l]);for(;l<d;++l)(c=n[l])&&(s[l]=c)}function _2(e,n,r,o,s,u,l){var c,d,f=new Map,h=n.length,g=u.length,m=new Array(h),D;for(c=0;c<h;++c)(d=n[c])&&(m[c]=D=l.call(d,d.__data__,c,n)+"",f.has(D)?s[c]=d:f.set(D,d));for(c=0;c<g;++c)D=l.call(e,u[c],c,u)+"",(d=f.get(D))?(o[c]=d,d.__data__=u[c],f.delete(D)):r[c]=new xu(e,u[c]);for(c=0;c<h;++c)(d=n[c])&&f.get(m[c])===d&&(s[c]=d)}function b2(e){return e.__data__}function w2(e,n){if(!arguments.length)return Array.from(this,b2);var r=n?_2:D2,o=this._parents,s=this._groups;typeof e!="function"&&(e=v2(e));for(var u=s.length,l=new Array(u),c=new Array(u),d=new Array(u),f=0;f<u;++f){var h=o[f],g=s[f],m=g.length,D=x2(e.call(h,h&&h.__data__,f,o)),C=D.length,y=c[f]=new Array(C),w=l[f]=new Array(C),_=d[f]=new Array(m);r(h,g,y,w,_,D,n);for(var x=0,N=0,F,j;x<C;++x)if(F=y[x]){for(x>=N&&(N=x+1);!(j=w[N])&&++N<C;);F._next=j||null}}return l=new Kn(l,o),l._enter=c,l._exit=d,l}function x2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function C2(){return new Kn(this._exit||this._groups.map(kg),this._parents)}function E2(e,n,r){var o=this.enter(),s=this,u=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?u.remove():r(u),o&&s?o.merge(s).order():s}function S2(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,u=o.length,l=Math.min(s,u),c=new Array(s),d=0;d<l;++d)for(var f=r[d],h=o[d],g=f.length,m=c[d]=new Array(g),D,C=0;C<g;++C)(D=f[C]||h[C])&&(m[C]=D);for(;d<s;++d)c[d]=r[d];return new Kn(c,this._parents)}function A2(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,u=o[s],l;--s>=0;)(l=o[s])&&(u&&l.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(l,u),u=l);return this}function F2(e){e||(e=N2);function n(g,m){return g&&m?e(g.__data__,m.__data__):!g-!m}for(var r=this._groups,o=r.length,s=new Array(o),u=0;u<o;++u){for(var l=r[u],c=l.length,d=s[u]=new Array(c),f,h=0;h<c;++h)(f=l[h])&&(d[h]=f);d.sort(n)}return new Kn(s,this._parents).order()}function N2(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function T2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function I2(){return Array.from(this)}function R2(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length;s<u;++s){var l=o[s];if(l)return l}return null}function O2(){let e=0;for(const n of this)++e;return e}function B2(){return!this.node()}function M2(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],u=0,l=s.length,c;u<l;++u)(c=s[u])&&e.call(c,c.__data__,u,s);return this}function P2(e){return function(){this.removeAttribute(e)}}function z2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function j2(e,n){return function(){this.setAttribute(e,n)}}function k2(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function $2(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function q2(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function L2(e,n){var r=ju(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?z2:P2:typeof n=="function"?r.local?q2:$2:r.local?k2:j2)(r,n))}function $g(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function H2(e){return function(){this.style.removeProperty(e)}}function G2(e,n,r){return function(){this.style.setProperty(e,n,r)}}function V2(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function U2(e,n,r){return arguments.length>1?this.each((n==null?H2:typeof n=="function"?V2:G2)(e,n,r??"")):us(this.node(),e)}function us(e,n){return e.style.getPropertyValue(n)||$g(e).getComputedStyle(e,null).getPropertyValue(n)}function W2(e){return function(){delete this[e]}}function X2(e,n){return function(){this[e]=n}}function Y2(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Z2(e,n){return arguments.length>1?this.each((n==null?W2:typeof n=="function"?Y2:X2)(e,n)):this.node()[e]}function qg(e){return e.trim().split(/^|\s+/)}function md(e){return e.classList||new Lg(e)}function Lg(e){this._node=e,this._names=qg(e.getAttribute("class")||"")}Lg.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hg(e,n){for(var r=md(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function Gg(e,n){for(var r=md(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function J2(e){return function(){Hg(this,e)}}function K2(e){return function(){Gg(this,e)}}function Q2(e,n){return function(){(n.apply(this,arguments)?Hg:Gg)(this,e)}}function eE(e,n){var r=qg(e+"");if(arguments.length<2){for(var o=md(this.node()),s=-1,u=r.length;++s<u;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?Q2:n?J2:K2)(r,n))}function tE(){this.textContent=""}function nE(e){return function(){this.textContent=e}}function rE(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function iE(e){return arguments.length?this.each(e==null?tE:(typeof e=="function"?rE:nE)(e)):this.node().textContent}function oE(){this.innerHTML=""}function sE(e){return function(){this.innerHTML=e}}function aE(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function uE(e){return arguments.length?this.each(e==null?oE:(typeof e=="function"?aE:sE)(e)):this.node().innerHTML}function cE(){this.nextSibling&&this.parentNode.appendChild(this)}function lE(){return this.each(cE)}function dE(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function fE(){return this.each(dE)}function hE(e){var n=typeof e=="function"?e:Mg(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function pE(){return null}function gE(e,n){var r=typeof e=="function"?e:Mg(e),o=n==null?pE:typeof n=="function"?n:gd(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function mE(){var e=this.parentNode;e&&e.removeChild(this)}function yE(){return this.each(mE)}function vE(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function DE(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function _E(e){return this.select(e?DE:vE)}function bE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function wE(e){return function(n){e.call(this,n,this.__data__)}}function xE(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function CE(e){return function(){var n=this.__on;if(n){for(var r=0,o=-1,s=n.length,u;r<s;++r)u=n[r],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):n[++o]=u;++o?n.length=o:delete this.__on}}}function EE(e,n,r){return function(){var o=this.__on,s,u=wE(n);if(o){for(var l=0,c=o.length;l<c;++l)if((s=o[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=u,s.options=r),s.value=n;return}}this.addEventListener(e.type,u,r),s={type:e.type,name:e.name,value:n,listener:u,options:r},o?o.push(s):this.__on=[s]}}function SE(e,n,r){var o=xE(e+""),s,u=o.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var d=0,f=c.length,h;d<f;++d)for(s=0,h=c[d];s<u;++s)if((l=o[s]).type===h.type&&l.name===h.name)return h.value}return}for(c=n?EE:CE,s=0;s<u;++s)this.each(c(o[s],n,r));return this}function Vg(e,n,r){var o=$g(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function AE(e,n){return function(){return Vg(this,e,n)}}function FE(e,n){return function(){return Vg(this,e,n.apply(this,arguments))}}function NE(e,n){return this.each((typeof n=="function"?FE:AE)(e,n))}function*TE(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length,l;s<u;++s)(l=o[s])&&(yield l)}var Ug=[null];function Kn(e,n){this._groups=e,this._parents=n}function ua(){return new Kn([[document.documentElement]],Ug)}function IE(){return this}Kn.prototype=ua.prototype={constructor:Kn,select:r2,selectAll:a2,selectChild:d2,selectChildren:g2,filter:m2,data:w2,enter:y2,exit:C2,join:E2,merge:S2,selection:IE,order:A2,sort:F2,call:T2,nodes:I2,node:R2,size:O2,empty:B2,each:M2,attr:L2,style:U2,property:Z2,classed:eE,text:iE,html:uE,raise:lE,lower:fE,append:hE,insert:gE,remove:yE,clone:_E,datum:bE,on:SE,dispatch:NE,[Symbol.iterator]:TE};function br(e){return typeof e=="string"?new Kn([[document.querySelector(e)]],[document.documentElement]):new Kn([[e]],Ug)}function RE(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Mr(e,n){if(e=RE(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const OE={passive:!1},Ks={capture:!0,passive:!1};function Jc(e){e.stopImmediatePropagation()}function ns(e){e.preventDefault(),e.stopImmediatePropagation()}function Wg(e){var n=e.document.documentElement,r=br(e).on("dragstart.drag",ns,Ks);"onselectstart"in n?r.on("selectstart.drag",ns,Ks):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Xg(e,n){var r=e.document.documentElement,o=br(e).on("dragstart.drag",null);n&&(o.on("click.drag",ns,Ks),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Za=e=>()=>e;function zl(e,{sourceEvent:n,subject:r,target:o,identifier:s,active:u,x:l,y:c,dx:d,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:d,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}zl.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function BE(e){return!e.ctrlKey&&!e.button}function ME(){return this.parentNode}function PE(e,n){return n??{x:e.x,y:e.y}}function zE(){return navigator.maxTouchPoints||"ontouchstart"in this}function jE(){var e=BE,n=ME,r=PE,o=zE,s={},u=zu("start","drag","end"),l=0,c,d,f,h,g=0;function m(F){F.on("mousedown.drag",D).filter(o).on("touchstart.drag",w).on("touchmove.drag",_,OE).on("touchend.drag touchcancel.drag",x).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function D(F,j){if(!(h||!e.call(this,F,j))){var H=N(this,n.call(this,F,j),F,j,"mouse");H&&(br(F.view).on("mousemove.drag",C,Ks).on("mouseup.drag",y,Ks),Wg(F.view),Jc(F),f=!1,c=F.clientX,d=F.clientY,H("start",F))}}function C(F){if(ns(F),!f){var j=F.clientX-c,H=F.clientY-d;f=j*j+H*H>g}s.mouse("drag",F)}function y(F){br(F.view).on("mousemove.drag mouseup.drag",null),Xg(F.view,f),ns(F),s.mouse("end",F)}function w(F,j){if(e.call(this,F,j)){var H=F.changedTouches,K=n.call(this,F,j),ee=H.length,B,V;for(B=0;B<ee;++B)(V=N(this,K,F,j,H[B].identifier,H[B]))&&(Jc(F),V("start",F,H[B]))}}function _(F){var j=F.changedTouches,H=j.length,K,ee;for(K=0;K<H;++K)(ee=s[j[K].identifier])&&(ns(F),ee("drag",F,j[K]))}function x(F){var j=F.changedTouches,H=j.length,K,ee;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),K=0;K<H;++K)(ee=s[j[K].identifier])&&(Jc(F),ee("end",F,j[K]))}function N(F,j,H,K,ee,B){var V=u.copy(),Y=Mr(B||H,j),te,Z,R;if((R=r.call(F,new zl("beforestart",{sourceEvent:H,target:m,identifier:ee,active:l,x:Y[0],y:Y[1],dx:0,dy:0,dispatch:V}),K))!=null)return te=R.x-Y[0]||0,Z=R.y-Y[1]||0,function G(k,J,se){var U=Y,re;switch(k){case"start":s[ee]=G,re=l++;break;case"end":delete s[ee],--l;case"drag":Y=Mr(se||J,j),re=l;break}V.call(k,F,new zl(k,{sourceEvent:J,subject:R,target:m,identifier:ee,active:re,x:Y[0]+te,y:Y[1]+Z,dx:Y[0]-U[0],dy:Y[1]-U[1],dispatch:V}),K)}}return m.filter=function(F){return arguments.length?(e=typeof F=="function"?F:Za(!!F),m):e},m.container=function(F){return arguments.length?(n=typeof F=="function"?F:Za(F),m):n},m.subject=function(F){return arguments.length?(r=typeof F=="function"?F:Za(F),m):r},m.touchable=function(F){return arguments.length?(o=typeof F=="function"?F:Za(!!F),m):o},m.on=function(){var F=u.on.apply(u,arguments);return F===u?m:F},m.clickDistance=function(F){return arguments.length?(g=(F=+F)*F,m):Math.sqrt(g)},m}function yd(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function Yg(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function ca(){}var Qs=.7,Cu=1/Qs,rs="\\s*([+-]?\\d+)\\s*",ea="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",kE=/^#([0-9a-f]{3,8})$/,$E=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),qE=new RegExp(`^rgb\\(${zr},${zr},${zr}\\)$`),LE=new RegExp(`^rgba\\(${rs},${rs},${rs},${ea}\\)$`),HE=new RegExp(`^rgba\\(${zr},${zr},${zr},${ea}\\)$`),GE=new RegExp(`^hsl\\(${ea},${zr},${zr}\\)$`),VE=new RegExp(`^hsla\\(${ea},${zr},${zr},${ea}\\)$`),Xh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yd(ca,ta,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Yh,formatHex:Yh,formatHex8:UE,formatHsl:WE,formatRgb:Zh,toString:Zh});function Yh(){return this.rgb().formatHex()}function UE(){return this.rgb().formatHex8()}function WE(){return Zg(this).formatHsl()}function Zh(){return this.rgb().formatRgb()}function ta(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=kE.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Jh(n):r===3?new Ln(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?Ja(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?Ja(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=$E.exec(e))?new Ln(n[1],n[2],n[3],1):(n=qE.exec(e))?new Ln(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=LE.exec(e))?Ja(n[1],n[2],n[3],n[4]):(n=HE.exec(e))?Ja(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=GE.exec(e))?ep(n[1],n[2]/100,n[3]/100,1):(n=VE.exec(e))?ep(n[1],n[2]/100,n[3]/100,n[4]):Xh.hasOwnProperty(e)?Jh(Xh[e]):e==="transparent"?new Ln(NaN,NaN,NaN,0):null}function Jh(e){return new Ln(e>>16&255,e>>8&255,e&255,1)}function Ja(e,n,r,o){return o<=0&&(e=n=r=NaN),new Ln(e,n,r,o)}function XE(e){return e instanceof ca||(e=ta(e)),e?(e=e.rgb(),new Ln(e.r,e.g,e.b,e.opacity)):new Ln}function jl(e,n,r,o){return arguments.length===1?XE(e):new Ln(e,n,r,o??1)}function Ln(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}yd(Ln,jl,Yg(ca,{brighter(e){return e=e==null?Cu:Math.pow(Cu,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qs:Math.pow(Qs,e),new Ln(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ln(vo(this.r),vo(this.g),vo(this.b),Eu(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Kh,formatHex:Kh,formatHex8:YE,formatRgb:Qh,toString:Qh}));function Kh(){return`#${go(this.r)}${go(this.g)}${go(this.b)}`}function YE(){return`#${go(this.r)}${go(this.g)}${go(this.b)}${go((isNaN(this.opacity)?1:this.opacity)*255)}`}function Qh(){const e=Eu(this.opacity);return`${e===1?"rgb(":"rgba("}${vo(this.r)}, ${vo(this.g)}, ${vo(this.b)}${e===1?")":`, ${e})`}`}function Eu(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function vo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function go(e){return e=vo(e),(e<16?"0":"")+e.toString(16)}function ep(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new wr(e,n,r,o)}function Zg(e){if(e instanceof wr)return new wr(e.h,e.s,e.l,e.opacity);if(e instanceof ca||(e=ta(e)),!e)return new wr;if(e instanceof wr)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),u=Math.max(n,r,o),l=NaN,c=u-s,d=(u+s)/2;return c?(n===u?l=(r-o)/c+(r<o)*6:r===u?l=(o-n)/c+2:l=(n-r)/c+4,c/=d<.5?u+s:2-u-s,l*=60):c=d>0&&d<1?0:l,new wr(l,c,d,e.opacity)}function ZE(e,n,r,o){return arguments.length===1?Zg(e):new wr(e,n,r,o??1)}function wr(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}yd(wr,ZE,Yg(ca,{brighter(e){return e=e==null?Cu:Math.pow(Cu,e),new wr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qs:Math.pow(Qs,e),new wr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new Ln(Kc(e>=240?e-240:e+120,s,o),Kc(e,s,o),Kc(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new wr(tp(this.h),Ka(this.s),Ka(this.l),Eu(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Eu(this.opacity);return`${e===1?"hsl(":"hsla("}${tp(this.h)}, ${Ka(this.s)*100}%, ${Ka(this.l)*100}%${e===1?")":`, ${e})`}`}}));function tp(e){return e=(e||0)%360,e<0?e+360:e}function Ka(e){return Math.max(0,Math.min(1,e||0))}function Kc(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const Jg=e=>()=>e;function JE(e,n){return function(r){return e+r*n}}function KE(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function QE(e){return(e=+e)==1?Kg:function(n,r){return r-n?KE(n,r,e):Jg(isNaN(n)?r:n)}}function Kg(e,n){var r=n-e;return r?JE(e,r):Jg(isNaN(e)?n:e)}const np=function e(n){var r=QE(n);function o(s,u){var l=r((s=jl(s)).r,(u=jl(u)).r),c=r(s.g,u.g),d=r(s.b,u.b),f=Kg(s.opacity,u.opacity);return function(h){return s.r=l(h),s.g=c(h),s.b=d(h),s.opacity=f(h),s+""}}return o.gamma=e,o}(1);function Ni(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var kl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qc=new RegExp(kl.source,"g");function eS(e){return function(){return e}}function tS(e){return function(n){return e(n)+""}}function nS(e,n){var r=kl.lastIndex=Qc.lastIndex=0,o,s,u,l=-1,c=[],d=[];for(e=e+"",n=n+"";(o=kl.exec(e))&&(s=Qc.exec(n));)(u=s.index)>r&&(u=n.slice(r,u),c[l]?c[l]+=u:c[++l]=u),(o=o[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,d.push({i:l,x:Ni(o,s)})),r=Qc.lastIndex;return r<n.length&&(u=n.slice(r),c[l]?c[l]+=u:c[++l]=u),c.length<2?d[0]?tS(d[0].x):eS(n):(n=d.length,function(f){for(var h=0,g;h<n;++h)c[(g=d[h]).i]=g.x(f);return c.join("")})}var rp=180/Math.PI,$l={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Qg(e,n,r,o,s,u){var l,c,d;return(l=Math.sqrt(e*e+n*n))&&(e/=l,n/=l),(d=e*r+n*o)&&(r-=e*d,o-=n*d),(c=Math.sqrt(r*r+o*o))&&(r/=c,o/=c,d/=c),e*o<n*r&&(e=-e,n=-n,d=-d,l=-l),{translateX:s,translateY:u,rotate:Math.atan2(n,e)*rp,skewX:Math.atan(d)*rp,scaleX:l,scaleY:c}}var Qa;function rS(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?$l:Qg(n.a,n.b,n.c,n.d,n.e,n.f)}function iS(e){return e==null||(Qa||(Qa=document.createElementNS("http://www.w3.org/2000/svg","g")),Qa.setAttribute("transform",e),!(e=Qa.transform.baseVal.consolidate()))?$l:(e=e.matrix,Qg(e.a,e.b,e.c,e.d,e.e,e.f))}function e0(e,n,r,o){function s(f){return f.length?f.pop()+" ":""}function u(f,h,g,m,D,C){if(f!==g||h!==m){var y=D.push("translate(",null,n,null,r);C.push({i:y-4,x:Ni(f,g)},{i:y-2,x:Ni(h,m)})}else(g||m)&&D.push("translate("+g+n+m+r)}function l(f,h,g,m){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),m.push({i:g.push(s(g)+"rotate(",null,o)-2,x:Ni(f,h)})):h&&g.push(s(g)+"rotate("+h+o)}function c(f,h,g,m){f!==h?m.push({i:g.push(s(g)+"skewX(",null,o)-2,x:Ni(f,h)}):h&&g.push(s(g)+"skewX("+h+o)}function d(f,h,g,m,D,C){if(f!==g||h!==m){var y=D.push(s(D)+"scale(",null,",",null,")");C.push({i:y-4,x:Ni(f,g)},{i:y-2,x:Ni(h,m)})}else(g!==1||m!==1)&&D.push(s(D)+"scale("+g+","+m+")")}return function(f,h){var g=[],m=[];return f=e(f),h=e(h),u(f.translateX,f.translateY,h.translateX,h.translateY,g,m),l(f.rotate,h.rotate,g,m),c(f.skewX,h.skewX,g,m),d(f.scaleX,f.scaleY,h.scaleX,h.scaleY,g,m),f=h=null,function(D){for(var C=-1,y=m.length,w;++C<y;)g[(w=m[C]).i]=w.x(D);return g.join("")}}}var oS=e0(rS,"px, ","px)","deg)"),sS=e0(iS,", ",")",")"),aS=1e-12;function ip(e){return((e=Math.exp(e))+1/e)/2}function uS(e){return((e=Math.exp(e))-1/e)/2}function cS(e){return((e=Math.exp(2*e))-1)/(e+1)}const lS=function e(n,r,o){function s(u,l){var c=u[0],d=u[1],f=u[2],h=l[0],g=l[1],m=l[2],D=h-c,C=g-d,y=D*D+C*C,w,_;if(y<aS)_=Math.log(m/f)/n,w=function(K){return[c+K*D,d+K*C,f*Math.exp(n*K*_)]};else{var x=Math.sqrt(y),N=(m*m-f*f+o*y)/(2*f*r*x),F=(m*m-f*f-o*y)/(2*m*r*x),j=Math.log(Math.sqrt(N*N+1)-N),H=Math.log(Math.sqrt(F*F+1)-F);_=(H-j)/n,w=function(K){var ee=K*_,B=ip(j),V=f/(r*x)*(B*cS(n*ee+j)-uS(j));return[c+V*D,d+V*C,f*B/ip(n*ee+j)]}}return w.duration=_*1e3*n/Math.SQRT2,w}return s.rho=function(u){var l=Math.max(.001,+u),c=l*l,d=c*c;return e(l,c,d)},s}(Math.SQRT2,2,4);var cs=0,Ls=0,Bs=0,t0=1e3,Su,Hs,Au=0,_o=0,ku=0,na=typeof performance=="object"&&performance.now?performance:Date,n0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vd(){return _o||(n0(dS),_o=na.now()+ku)}function dS(){_o=0}function Fu(){this._call=this._time=this._next=null}Fu.prototype=r0.prototype={constructor:Fu,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?vd():+r)+(n==null?0:+n),!this._next&&Hs!==this&&(Hs?Hs._next=this:Su=this,Hs=this),this._call=e,this._time=r,ql()},stop:function(){this._call&&(this._call=null,this._time=1/0,ql())}};function r0(e,n,r){var o=new Fu;return o.restart(e,n,r),o}function fS(){vd(),++cs;for(var e=Su,n;e;)(n=_o-e._time)>=0&&e._call.call(void 0,n),e=e._next;--cs}function op(){_o=(Au=na.now())+ku,cs=Ls=0;try{fS()}finally{cs=0,pS(),_o=0}}function hS(){var e=na.now(),n=e-Au;n>t0&&(ku-=n,Au=e)}function pS(){for(var e,n=Su,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Su=r);Hs=e,ql(o)}function ql(e){if(!cs){Ls&&(Ls=clearTimeout(Ls));var n=e-_o;n>24?(e<1/0&&(Ls=setTimeout(op,e-na.now()-ku)),Bs&&(Bs=clearInterval(Bs))):(Bs||(Au=na.now(),Bs=setInterval(hS,t0)),cs=1,n0(op))}}function sp(e,n,r){var o=new Fu;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var gS=zu("start","end","cancel","interrupt"),mS=[],i0=0,ap=1,Ll=2,hu=3,up=4,Hl=5,pu=6;function $u(e,n,r,o,s,u){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;yS(e,r,{name:n,index:o,group:s,on:gS,tween:mS,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:i0})}function Dd(e,n){var r=Ar(e,n);if(r.state>i0)throw new Error("too late; already scheduled");return r}function jr(e,n){var r=Ar(e,n);if(r.state>hu)throw new Error("too late; already running");return r}function Ar(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function yS(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=r0(u,0,r.time);function u(f){r.state=ap,r.timer.restart(l,r.delay,r.time),r.delay<=f&&l(f-r.delay)}function l(f){var h,g,m,D;if(r.state!==ap)return d();for(h in o)if(D=o[h],D.name===r.name){if(D.state===hu)return sp(l);D.state===up?(D.state=pu,D.timer.stop(),D.on.call("interrupt",e,e.__data__,D.index,D.group),delete o[h]):+h<n&&(D.state=pu,D.timer.stop(),D.on.call("cancel",e,e.__data__,D.index,D.group),delete o[h])}if(sp(function(){r.state===hu&&(r.state=up,r.timer.restart(c,r.delay,r.time),c(f))}),r.state=Ll,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Ll){for(r.state=hu,s=new Array(m=r.tween.length),h=0,g=-1;h<m;++h)(D=r.tween[h].value.call(e,e.__data__,r.index,r.group))&&(s[++g]=D);s.length=g+1}}function c(f){for(var h=f<r.duration?r.ease.call(null,f/r.duration):(r.timer.restart(d),r.state=Hl,1),g=-1,m=s.length;++g<m;)s[g].call(e,h);r.state===Hl&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=pu,r.timer.stop(),delete o[n];for(var f in o)return;delete e.__transition}}function gu(e,n){var r=e.__transition,o,s,u=!0,l;if(r){n=n==null?null:n+"";for(l in r){if((o=r[l]).name!==n){u=!1;continue}s=o.state>Ll&&o.state<Hl,o.state=pu,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[l]}u&&delete e.__transition}}function vS(e){return this.each(function(){gu(this,e)})}function DS(e,n){var r,o;return function(){var s=jr(this,e),u=s.tween;if(u!==r){o=r=u;for(var l=0,c=o.length;l<c;++l)if(o[l].name===n){o=o.slice(),o.splice(l,1);break}}s.tween=o}}function _S(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var u=jr(this,e),l=u.tween;if(l!==o){s=(o=l).slice();for(var c={name:n,value:r},d=0,f=s.length;d<f;++d)if(s[d].name===n){s[d]=c;break}d===f&&s.push(c)}u.tween=s}}function bS(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=Ar(this.node(),r).tween,s=0,u=o.length,l;s<u;++s)if((l=o[s]).name===e)return l.value;return null}return this.each((n==null?DS:_S)(r,e,n))}function _d(e,n,r){var o=e._id;return e.each(function(){var s=jr(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Ar(s,o).value[n]}}function o0(e,n){var r;return(typeof n=="number"?Ni:n instanceof ta?np:(r=ta(n))?(n=r,np):nS)(e,n)}function wS(e){return function(){this.removeAttribute(e)}}function xS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function CS(e,n,r){var o,s=r+"",u;return function(){var l=this.getAttribute(e);return l===s?null:l===o?u:u=n(o=l,r)}}function ES(e,n,r){var o,s=r+"",u;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===o?u:u=n(o=l,r)}}function SS(e,n,r){var o,s,u;return function(){var l,c=r(this),d;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),d=c+"",l===d?null:l===o&&d===s?u:(s=d,u=n(o=l,c)))}}function AS(e,n,r){var o,s,u;return function(){var l,c=r(this),d;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),d=c+"",l===d?null:l===o&&d===s?u:(s=d,u=n(o=l,c)))}}function FS(e,n){var r=ju(e),o=r==="transform"?sS:o0;return this.attrTween(e,typeof n=="function"?(r.local?AS:SS)(r,o,_d(this,"attr."+e,n)):n==null?(r.local?xS:wS)(r):(r.local?ES:CS)(r,o,n))}function NS(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function TS(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function IS(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&TS(e,u)),r}return s._value=n,s}function RS(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&NS(e,u)),r}return s._value=n,s}function OS(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=ju(e);return this.tween(r,(o.local?IS:RS)(o,n))}function BS(e,n){return function(){Dd(this,e).delay=+n.apply(this,arguments)}}function MS(e,n){return n=+n,function(){Dd(this,e).delay=n}}function PS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?BS:MS)(n,e)):Ar(this.node(),n).delay}function zS(e,n){return function(){jr(this,e).duration=+n.apply(this,arguments)}}function jS(e,n){return n=+n,function(){jr(this,e).duration=n}}function kS(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?zS:jS)(n,e)):Ar(this.node(),n).duration}function $S(e,n){if(typeof n!="function")throw new Error;return function(){jr(this,e).ease=n}}function qS(e){var n=this._id;return arguments.length?this.each($S(n,e)):Ar(this.node(),n).ease}function LS(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;jr(this,e).ease=r}}function HS(e){if(typeof e!="function")throw new Error;return this.each(LS(this._id,e))}function GS(e){typeof e!="function"&&(e=zg(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=[],d,f=0;f<l;++f)(d=u[f])&&e.call(d,d.__data__,f,u)&&c.push(d);return new ci(o,this._parents,this._name,this._id)}function VS(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,u=Math.min(o,s),l=new Array(o),c=0;c<u;++c)for(var d=n[c],f=r[c],h=d.length,g=l[c]=new Array(h),m,D=0;D<h;++D)(m=d[D]||f[D])&&(g[D]=m);for(;c<o;++c)l[c]=n[c];return new ci(l,this._parents,this._name,this._id)}function US(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function WS(e,n,r){var o,s,u=US(n)?Dd:jr;return function(){var l=u(this,e),c=l.on;c!==o&&(s=(o=c).copy()).on(n,r),l.on=s}}function XS(e,n){var r=this._id;return arguments.length<2?Ar(this.node(),r).on.on(e):this.each(WS(r,e,n))}function YS(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function ZS(){return this.on("end.remove",YS(this._id))}function JS(e){var n=this._name,r=this._id;typeof e!="function"&&(e=gd(e));for(var o=this._groups,s=o.length,u=new Array(s),l=0;l<s;++l)for(var c=o[l],d=c.length,f=u[l]=new Array(d),h,g,m=0;m<d;++m)(h=c[m])&&(g=e.call(h,h.__data__,m,c))&&("__data__"in h&&(g.__data__=h.__data__),f[m]=g,$u(f[m],n,r,m,f,Ar(h,r)));return new ci(u,this._parents,n,r)}function KS(e){var n=this._name,r=this._id;typeof e!="function"&&(e=Pg(e));for(var o=this._groups,s=o.length,u=[],l=[],c=0;c<s;++c)for(var d=o[c],f=d.length,h,g=0;g<f;++g)if(h=d[g]){for(var m=e.call(h,h.__data__,g,d),D,C=Ar(h,r),y=0,w=m.length;y<w;++y)(D=m[y])&&$u(D,n,r,y,m,C);u.push(m),l.push(h)}return new ci(u,l,n,r)}var QS=ua.prototype.constructor;function eA(){return new QS(this._groups,this._parents)}function tA(e,n){var r,o,s;return function(){var u=us(this,e),l=(this.style.removeProperty(e),us(this,e));return u===l?null:u===r&&l===o?s:s=n(r=u,o=l)}}function s0(e){return function(){this.style.removeProperty(e)}}function nA(e,n,r){var o,s=r+"",u;return function(){var l=us(this,e);return l===s?null:l===o?u:u=n(o=l,r)}}function rA(e,n,r){var o,s,u;return function(){var l=us(this,e),c=r(this),d=c+"";return c==null&&(d=c=(this.style.removeProperty(e),us(this,e))),l===d?null:l===o&&d===s?u:(s=d,u=n(o=l,c))}}function iA(e,n){var r,o,s,u="style."+n,l="end."+u,c;return function(){var d=jr(this,e),f=d.on,h=d.value[u]==null?c||(c=s0(n)):void 0;(f!==r||s!==h)&&(o=(r=f).copy()).on(l,s=h),d.on=o}}function oA(e,n,r){var o=(e+="")=="transform"?oS:o0;return n==null?this.styleTween(e,tA(e,o)).on("end.style."+e,s0(e)):typeof n=="function"?this.styleTween(e,rA(e,o,_d(this,"style."+e,n))).each(iA(this._id,e)):this.styleTween(e,nA(e,o,n),r).on("end.style."+e,null)}function sA(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function aA(e,n,r){var o,s;function u(){var l=n.apply(this,arguments);return l!==s&&(o=(s=l)&&sA(e,l,r)),o}return u._value=n,u}function uA(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,aA(e,n,r??""))}function cA(e){return function(){this.textContent=e}}function lA(e){return function(){var n=e(this);this.textContent=n??""}}function dA(e){return this.tween("text",typeof e=="function"?lA(_d(this,"text",e)):cA(e==null?"":e+""))}function fA(e){return function(n){this.textContent=e.call(this,n)}}function hA(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&fA(s)),n}return o._value=e,o}function pA(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,hA(e))}function gA(){for(var e=this._name,n=this._id,r=a0(),o=this._groups,s=o.length,u=0;u<s;++u)for(var l=o[u],c=l.length,d,f=0;f<c;++f)if(d=l[f]){var h=Ar(d,n);$u(d,e,r,f,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new ci(o,this._parents,e,r)}function mA(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(u,l){var c={value:l},d={value:function(){--s===0&&u()}};r.each(function(){var f=jr(this,o),h=f.on;h!==e&&(n=(e=h).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(d)),f.on=n}),s===0&&u()})}var yA=0;function ci(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function a0(){return++yA}var ii=ua.prototype;ci.prototype={constructor:ci,select:JS,selectAll:KS,selectChild:ii.selectChild,selectChildren:ii.selectChildren,filter:GS,merge:VS,selection:eA,transition:gA,call:ii.call,nodes:ii.nodes,node:ii.node,size:ii.size,empty:ii.empty,each:ii.each,on:XS,attr:FS,attrTween:OS,style:oA,styleTween:uA,text:dA,textTween:pA,remove:ZS,tween:bS,delay:PS,duration:kS,ease:qS,easeVarying:HS,end:mA,[Symbol.iterator]:ii[Symbol.iterator]};function vA(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var DA={time:null,delay:0,duration:250,ease:vA};function _A(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function bA(e){var n,r;e instanceof ci?(n=e._id,e=e._name):(n=a0(),(r=DA).time=vd(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,u=0;u<s;++u)for(var l=o[u],c=l.length,d,f=0;f<c;++f)(d=l[f])&&$u(d,e,n,f,l,r||_A(d,n));return new ci(o,this._parents,e,n)}ua.prototype.interrupt=vS;ua.prototype.transition=bA;const eu=e=>()=>e;function wA(e,{sourceEvent:n,target:r,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function ai(e,n,r){this.k=e,this.x=n,this.y=r}ai.prototype={constructor:ai,scale:function(e){return e===1?this:new ai(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new ai(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Oi=new ai(1,0,0);ai.prototype;function el(e){e.stopImmediatePropagation()}function Ms(e){e.preventDefault(),e.stopImmediatePropagation()}function xA(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function CA(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function cp(){return this.__zoom||Oi}function EA(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function SA(){return navigator.maxTouchPoints||"ontouchstart"in this}function AA(e,n,r){var o=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],u=e.invertY(n[0][1])-r[0][1],l=e.invertY(n[1][1])-r[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),l>u?(u+l)/2:Math.min(0,u)||Math.max(0,l))}function FA(){var e=xA,n=CA,r=AA,o=EA,s=SA,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=lS,f=zu("start","zoom","end"),h,g,m,D=500,C=150,y=0,w=10;function _(R){R.property("__zoom",cp).on("wheel.zoom",ee,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",V).filter(s).on("touchstart.zoom",Y).on("touchmove.zoom",te).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(R,G,k,J){var se=R.selection?R.selection():R;se.property("__zoom",cp),R!==se?j(R,G,k,J):se.interrupt().each(function(){H(this,arguments).event(J).start().zoom(null,typeof G=="function"?G.apply(this,arguments):G).end()})},_.scaleBy=function(R,G,k,J){_.scaleTo(R,function(){var se=this.__zoom.k,U=typeof G=="function"?G.apply(this,arguments):G;return se*U},k,J)},_.scaleTo=function(R,G,k,J){_.transform(R,function(){var se=n.apply(this,arguments),U=this.__zoom,re=k==null?F(se):typeof k=="function"?k.apply(this,arguments):k,ue=U.invert(re),de=typeof G=="function"?G.apply(this,arguments):G;return r(N(x(U,de),re,ue),se,l)},k,J)},_.translateBy=function(R,G,k,J){_.transform(R,function(){return r(this.__zoom.translate(typeof G=="function"?G.apply(this,arguments):G,typeof k=="function"?k.apply(this,arguments):k),n.apply(this,arguments),l)},null,J)},_.translateTo=function(R,G,k,J,se){_.transform(R,function(){var U=n.apply(this,arguments),re=this.__zoom,ue=J==null?F(U):typeof J=="function"?J.apply(this,arguments):J;return r(Oi.translate(ue[0],ue[1]).scale(re.k).translate(typeof G=="function"?-G.apply(this,arguments):-G,typeof k=="function"?-k.apply(this,arguments):-k),U,l)},J,se)};function x(R,G){return G=Math.max(u[0],Math.min(u[1],G)),G===R.k?R:new ai(G,R.x,R.y)}function N(R,G,k){var J=G[0]-k[0]*R.k,se=G[1]-k[1]*R.k;return J===R.x&&se===R.y?R:new ai(R.k,J,se)}function F(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function j(R,G,k,J){R.on("start.zoom",function(){H(this,arguments).event(J).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(J).end()}).tween("zoom",function(){var se=this,U=arguments,re=H(se,U).event(J),ue=n.apply(se,U),de=k==null?F(ue):typeof k=="function"?k.apply(se,U):k,le=Math.max(ue[1][0]-ue[0][0],ue[1][1]-ue[0][1]),ve=se.__zoom,ge=typeof G=="function"?G.apply(se,U):G,Ee=d(ve.invert(de).concat(le/ve.k),ge.invert(de).concat(le/ge.k));return function(Be){if(Be===1)Be=ge;else{var De=Ee(Be),Se=le/De[2];Be=new ai(Se,de[0]-De[0]*Se,de[1]-De[1]*Se)}re.zoom(null,Be)}})}function H(R,G,k){return!k&&R.__zooming||new K(R,G)}function K(R,G){this.that=R,this.args=G,this.active=0,this.sourceEvent=null,this.extent=n.apply(R,G),this.taps=0}K.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,G){return this.mouse&&R!=="mouse"&&(this.mouse[1]=G.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=G.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=G.invert(this.touch1[0])),this.that.__zoom=G,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var G=br(this.that).datum();f.call(R,this.that,new wA(R,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:f}),G)}};function ee(R,...G){if(!e.apply(this,arguments))return;var k=H(this,G).event(R),J=this.__zoom,se=Math.max(u[0],Math.min(u[1],J.k*Math.pow(2,o.apply(this,arguments)))),U=Mr(R);if(k.wheel)(k.mouse[0][0]!==U[0]||k.mouse[0][1]!==U[1])&&(k.mouse[1]=J.invert(k.mouse[0]=U)),clearTimeout(k.wheel);else{if(J.k===se)return;k.mouse=[U,J.invert(U)],gu(this),k.start()}Ms(R),k.wheel=setTimeout(re,C),k.zoom("mouse",r(N(x(J,se),k.mouse[0],k.mouse[1]),k.extent,l));function re(){k.wheel=null,k.end()}}function B(R,...G){if(m||!e.apply(this,arguments))return;var k=R.currentTarget,J=H(this,G,!0).event(R),se=br(R.view).on("mousemove.zoom",de,!0).on("mouseup.zoom",le,!0),U=Mr(R,k),re=R.clientX,ue=R.clientY;Wg(R.view),el(R),J.mouse=[U,this.__zoom.invert(U)],gu(this),J.start();function de(ve){if(Ms(ve),!J.moved){var ge=ve.clientX-re,Ee=ve.clientY-ue;J.moved=ge*ge+Ee*Ee>y}J.event(ve).zoom("mouse",r(N(J.that.__zoom,J.mouse[0]=Mr(ve,k),J.mouse[1]),J.extent,l))}function le(ve){se.on("mousemove.zoom mouseup.zoom",null),Xg(ve.view,J.moved),Ms(ve),J.event(ve).end()}}function V(R,...G){if(e.apply(this,arguments)){var k=this.__zoom,J=Mr(R.changedTouches?R.changedTouches[0]:R,this),se=k.invert(J),U=k.k*(R.shiftKey?.5:2),re=r(N(x(k,U),J,se),n.apply(this,G),l);Ms(R),c>0?br(this).transition().duration(c).call(j,re,J,R):br(this).call(_.transform,re,J,R)}}function Y(R,...G){if(e.apply(this,arguments)){var k=R.touches,J=k.length,se=H(this,G,R.changedTouches.length===J).event(R),U,re,ue,de;for(el(R),re=0;re<J;++re)ue=k[re],de=Mr(ue,this),de=[de,this.__zoom.invert(de),ue.identifier],se.touch0?!se.touch1&&se.touch0[2]!==de[2]&&(se.touch1=de,se.taps=0):(se.touch0=de,U=!0,se.taps=1+!!h);h&&(h=clearTimeout(h)),U&&(se.taps<2&&(g=de[0],h=setTimeout(function(){h=null},D)),gu(this),se.start())}}function te(R,...G){if(this.__zooming){var k=H(this,G).event(R),J=R.changedTouches,se=J.length,U,re,ue,de;for(Ms(R),U=0;U<se;++U)re=J[U],ue=Mr(re,this),k.touch0&&k.touch0[2]===re.identifier?k.touch0[0]=ue:k.touch1&&k.touch1[2]===re.identifier&&(k.touch1[0]=ue);if(re=k.that.__zoom,k.touch1){var le=k.touch0[0],ve=k.touch0[1],ge=k.touch1[0],Ee=k.touch1[1],Be=(Be=ge[0]-le[0])*Be+(Be=ge[1]-le[1])*Be,De=(De=Ee[0]-ve[0])*De+(De=Ee[1]-ve[1])*De;re=x(re,Math.sqrt(Be/De)),ue=[(le[0]+ge[0])/2,(le[1]+ge[1])/2],de=[(ve[0]+Ee[0])/2,(ve[1]+Ee[1])/2]}else if(k.touch0)ue=k.touch0[0],de=k.touch0[1];else return;k.zoom("touch",r(N(re,ue,de),k.extent,l))}}function Z(R,...G){if(this.__zooming){var k=H(this,G).event(R),J=R.changedTouches,se=J.length,U,re;for(el(R),m&&clearTimeout(m),m=setTimeout(function(){m=null},D),U=0;U<se;++U)re=J[U],k.touch0&&k.touch0[2]===re.identifier?delete k.touch0:k.touch1&&k.touch1[2]===re.identifier&&delete k.touch1;if(k.touch1&&!k.touch0&&(k.touch0=k.touch1,delete k.touch1),k.touch0)k.touch0[1]=this.__zoom.invert(k.touch0[0]);else if(k.end(),k.taps===2&&(re=Mr(re,this),Math.hypot(g[0]-re[0],g[1]-re[1])<w)){var ue=br(this).on("dblclick.zoom");ue&&ue.apply(this,arguments)}}}return _.wheelDelta=function(R){return arguments.length?(o=typeof R=="function"?R:eu(+R),_):o},_.filter=function(R){return arguments.length?(e=typeof R=="function"?R:eu(!!R),_):e},_.touchable=function(R){return arguments.length?(s=typeof R=="function"?R:eu(!!R),_):s},_.extent=function(R){return arguments.length?(n=typeof R=="function"?R:eu([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),_):n},_.scaleExtent=function(R){return arguments.length?(u[0]=+R[0],u[1]=+R[1],_):[u[0],u[1]]},_.translateExtent=function(R){return arguments.length?(l[0][0]=+R[0][0],l[1][0]=+R[1][0],l[0][1]=+R[0][1],l[1][1]=+R[1][1],_):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},_.constrain=function(R){return arguments.length?(r=R,_):r},_.duration=function(R){return arguments.length?(c=+R,_):c},_.interpolate=function(R){return arguments.length?(d=R,_):d},_.on=function(){var R=f.on.apply(f,arguments);return R===f?_:R},_.clickDistance=function(R){return arguments.length?(y=(R=+R)*R,_):Math.sqrt(y)},_.tapDistance=function(R){return arguments.length?(w=+R,_):w},_}const qu=T.createContext(null),NA=qu.Provider,li={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,n)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?n.targetHandle:n.sourceHandle}", edge id: ${n.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},u0=li.error001();function It(e,n){const r=T.useContext(qu);if(r===null)throw new Error(u0);return Bg(r,e,n)}const hn=()=>{const e=T.useContext(qu);if(e===null)throw new Error(u0);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},TA=e=>e.userSelectionActive?"none":"all";function c0({position:e,children:n,className:r,style:o,...s}){const u=It(TA),l=`${e}`.split("-");return W.createElement("div",{className:In(["react-flow__panel",r,...l]),style:{...o,pointerEvents:u},...s},n)}function IA({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:W.createElement(c0,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},W.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const RA=({x:e,y:n,label:r,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:u={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:d,className:f,...h})=>{const g=T.useRef(null),[m,D]=T.useState({x:0,y:0,width:0,height:0}),C=In(["react-flow__edge-textwrapper",f]);return T.useEffect(()=>{if(g.current){const y=g.current.getBBox();D({x:y.x,y:y.y,width:y.width,height:y.height})}},[r]),typeof r>"u"||!r?null:W.createElement("g",{transform:`translate(${e-m.width/2} ${n-m.height/2})`,className:C,visibility:m.width?"visible":"hidden",...h},s&&W.createElement("rect",{width:m.width+2*l[0],x:-l[0],y:-l[1],height:m.height+2*l[1],className:"react-flow__edge-textbg",style:u,rx:c,ry:c}),W.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:g,style:o},r),d)};var OA=T.memo(RA);const bd=e=>({width:e.offsetWidth,height:e.offsetHeight}),ls=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),wd=(e={x:0,y:0},n)=>({x:ls(e.x,n[0][0],n[1][0]),y:ls(e.y,n[0][1],n[1][1])}),lp=(e,n,r)=>e<n?ls(Math.abs(e-n),1,50)/50:e>r?-ls(Math.abs(e-r),1,50)/50:0,l0=(e,n)=>{const r=lp(e.x,35,n.width-35)*20,o=lp(e.y,35,n.height-35)*20;return[r,o]},d0=e=>e.getRootNode?.()||window?.document,BA=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),xd=({x:e,y:n,width:r,height:o})=>({x:e,y:n,x2:e+r,y2:n+o}),MA=({x:e,y:n,x2:r,y2:o})=>({x:e,y:n,width:r-e,height:o-n}),dp=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),Gl=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*o)},PA=e=>dr(e.width)&&dr(e.height)&&dr(e.x)&&dr(e.y),dr=e=>!isNaN(e)&&isFinite(e),jt=Symbol.for("internals"),f0=["Enter"," ","Escape"],zA=(e,n)=>{},jA=e=>"nativeEvent"in e;function Vl(e){const r=(jA(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r?.nodeName)||r?.hasAttribute("contenteditable")||!!r?.closest(".nokey")}const h0=e=>"clientX"in e,Bi=(e,n)=>{const r=h0(e),o=r?e.clientX:e.touches?.[0].clientX,s=r?e.clientY:e.touches?.[0].clientY;return{x:o-(n?.left??0),y:s-(n?.top??0)}},Nu=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,fs=({id:e,path:n,labelX:r,labelY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:m,interactionWidth:D=20})=>W.createElement(W.Fragment,null,W.createElement("path",{id:e,style:h,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:m}),D&&W.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:D,className:"react-flow__edge-interaction"}),s&&dr(r)&&dr(o)?W.createElement(OA,{x:r,y:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f}):null);fs.displayName="BaseEdge";function Ps(e,n,r){return r===void 0?r:o=>{const s=n().edges.find(u=>u.id===e);s&&r(o,{...s})}}function p0({sourceX:e,sourceY:n,targetX:r,targetY:o}){const s=Math.abs(r-e)/2,u=r<e?r+s:r-s,l=Math.abs(o-n)/2,c=o<n?o+l:o-l;return[u,c,s,l]}function g0({sourceX:e,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c}){const d=e*.125+s*.375+l*.375+r*.125,f=n*.125+u*.375+c*.375+o*.125,h=Math.abs(d-e),g=Math.abs(f-n);return[d,f,h,g]}var bo;(function(e){e.Strict="strict",e.Loose="loose"})(bo||(bo={}));var mo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mo||(mo={}));var ds;(function(e){e.Partial="partial",e.Full="full"})(ds||(ds={}));var Ii;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ii||(Ii={}));var ra;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ra||(ra={}));var Ce;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ce||(Ce={}));function fp({pos:e,x1:n,y1:r,x2:o,y2:s}){return e===Ce.Left||e===Ce.Right?[.5*(n+o),r]:[n,.5*(r+s)]}function m0({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top}){const[l,c]=fp({pos:r,x1:e,y1:n,x2:o,y2:s}),[d,f]=fp({pos:u,x1:o,y1:s,x2:e,y2:n}),[h,g,m,D]=g0({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:d,targetControlY:f});return[`M${e},${n} C${l},${c} ${d},${f} ${o},${s}`,h,g,m,D]}const Cd=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=Ce.Bottom,targetPosition:u=Ce.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:D,markerStart:C,interactionWidth:y})=>{const[w,_,x]=m0({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:u});return W.createElement(fs,{path:w,labelX:_,labelY:x,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:D,markerStart:C,interactionWidth:y})});Cd.displayName="SimpleBezierEdge";const hp={[Ce.Left]:{x:-1,y:0},[Ce.Right]:{x:1,y:0},[Ce.Top]:{x:0,y:-1},[Ce.Bottom]:{x:0,y:1}},kA=({source:e,sourcePosition:n=Ce.Bottom,target:r})=>n===Ce.Left||n===Ce.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},pp=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function $A({source:e,sourcePosition:n=Ce.Bottom,target:r,targetPosition:o=Ce.Top,center:s,offset:u}){const l=hp[n],c=hp[o],d={x:e.x+l.x*u,y:e.y+l.y*u},f={x:r.x+c.x*u,y:r.y+c.y*u},h=kA({source:d,sourcePosition:n,target:f}),g=h.x!==0?"x":"y",m=h[g];let D=[],C,y;const w={x:0,y:0},_={x:0,y:0},[x,N,F,j]=p0({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(l[g]*c[g]===-1){C=s.x??x,y=s.y??N;const K=[{x:C,y:d.y},{x:C,y:f.y}],ee=[{x:d.x,y},{x:f.x,y}];l[g]===m?D=g==="x"?K:ee:D=g==="x"?ee:K}else{const K=[{x:d.x,y:f.y}],ee=[{x:f.x,y:d.y}];if(g==="x"?D=l.x===m?ee:K:D=l.y===m?K:ee,n===o){const Z=Math.abs(e[g]-r[g]);if(Z<=u){const R=Math.min(u-1,u-Z);l[g]===m?w[g]=(d[g]>e[g]?-1:1)*R:_[g]=(f[g]>r[g]?-1:1)*R}}if(n!==o){const Z=g==="x"?"y":"x",R=l[g]===c[Z],G=d[Z]>f[Z],k=d[Z]<f[Z];(l[g]===1&&(!R&&G||R&&k)||l[g]!==1&&(!R&&k||R&&G))&&(D=g==="x"?K:ee)}const B={x:d.x+w.x,y:d.y+w.y},V={x:f.x+_.x,y:f.y+_.y},Y=Math.max(Math.abs(B.x-D[0].x),Math.abs(V.x-D[0].x)),te=Math.max(Math.abs(B.y-D[0].y),Math.abs(V.y-D[0].y));Y>=te?(C=(B.x+V.x)/2,y=D[0].y):(C=D[0].x,y=(B.y+V.y)/2)}return[[e,{x:d.x+w.x,y:d.y+w.y},...D,{x:f.x+_.x,y:f.y+_.y},r],C,y,F,j]}function qA(e,n,r,o){const s=Math.min(pp(e,n)/2,pp(n,r)/2,o),{x:u,y:l}=n;if(e.x===u&&u===r.x||e.y===l&&l===r.y)return`L${u} ${l}`;if(e.y===l){const f=e.x<r.x?-1:1,h=e.y<r.y?1:-1;return`L ${u+s*f},${l}Q ${u},${l} ${u},${l+s*h}`}const c=e.x<r.x?1:-1,d=e.y<r.y?-1:1;return`L ${u},${l+s*d}Q ${u},${l} ${u+s*c},${l}`}function Ul({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top,borderRadius:l=5,centerX:c,centerY:d,offset:f=20}){const[h,g,m,D,C]=$A({source:{x:e,y:n},sourcePosition:r,target:{x:o,y:s},targetPosition:u,center:{x:c,y:d},offset:f});return[h.reduce((w,_,x)=>{let N="";return x>0&&x<h.length-1?N=qA(h[x-1],_,h[x+1],l):N=`${x===0?"M":"L"}${_.x} ${_.y}`,w+=N,w},""),g,m,D,C]}const Lu=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,sourcePosition:g=Ce.Bottom,targetPosition:m=Ce.Top,markerEnd:D,markerStart:C,pathOptions:y,interactionWidth:w})=>{const[_,x,N]=Ul({sourceX:e,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:m,borderRadius:y?.borderRadius,offset:y?.offset});return W.createElement(fs,{path:_,labelX:x,labelY:N,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:D,markerStart:C,interactionWidth:w})});Lu.displayName="SmoothStepEdge";const Ed=T.memo(e=>W.createElement(Lu,{...e,pathOptions:T.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));Ed.displayName="StepEdge";function LA({sourceX:e,sourceY:n,targetX:r,targetY:o}){const[s,u,l,c]=p0({sourceX:e,sourceY:n,targetX:r,targetY:o});return[`M ${e},${n}L ${r},${o}`,s,u,l,c]}const Sd=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:m,interactionWidth:D})=>{const[C,y,w]=LA({sourceX:e,sourceY:n,targetX:r,targetY:o});return W.createElement(fs,{path:C,labelX:y,labelY:w,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:g,markerStart:m,interactionWidth:D})});Sd.displayName="StraightEdge";function tu(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function gp({pos:e,x1:n,y1:r,x2:o,y2:s,c:u}){switch(e){case Ce.Left:return[n-tu(n-o,u),r];case Ce.Right:return[n+tu(o-n,u),r];case Ce.Top:return[n,r-tu(r-s,u)];case Ce.Bottom:return[n,r+tu(s-r,u)]}}function Ad({sourceX:e,sourceY:n,sourcePosition:r=Ce.Bottom,targetX:o,targetY:s,targetPosition:u=Ce.Top,curvature:l=.25}){const[c,d]=gp({pos:r,x1:e,y1:n,x2:o,y2:s,c:l}),[f,h]=gp({pos:u,x1:o,y1:s,x2:e,y2:n,c:l}),[g,m,D,C]=g0({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:c,sourceControlY:d,targetControlX:f,targetControlY:h});return[`M${e},${n} C${c},${d} ${f},${h} ${o},${s}`,g,m,D,C]}const Tu=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=Ce.Bottom,targetPosition:u=Ce.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:D,markerStart:C,pathOptions:y,interactionWidth:w})=>{const[_,x,N]=Ad({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:u,curvature:y?.curvature});return W.createElement(fs,{path:_,labelX:x,labelY:N,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:g,style:m,markerEnd:D,markerStart:C,interactionWidth:w})});Tu.displayName="BezierEdge";const Fd=T.createContext(null),HA=Fd.Provider;Fd.Consumer;const GA=()=>T.useContext(Fd),VA=e=>"id"in e&&"source"in e&&"target"in e,y0=e=>"id"in e&&!("source"in e)&&!("target"in e),Iu=(e,n,r)=>{if(!y0(e))return[];const o=r.filter(s=>s.source===e.id).map(s=>s.target);return n.filter(s=>o.includes(s.id))},UA=(e,n,r)=>{if(!y0(e))return[];const o=r.filter(s=>s.target===e.id).map(s=>s.source);return n.filter(s=>o.includes(s.id))},WA=({source:e,sourceHandle:n,target:r,targetHandle:o})=>`reactflow__edge-${e}${n||""}-${r}${o||""}`,Wl=(e,n)=>typeof e>"u"?"":typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,XA=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),YA=(e,n)=>{if(!e.source||!e.target)return n;let r;return VA(e)?r={...e}:r={...e,id:WA(e)},XA(r,n)?n:n.concat(r)},Xl=({x:e,y:n},[r,o,s],u,[l,c])=>{const d={x:(e-r)/s,y:(n-o)/s};return u?{x:l*Math.round(d.x/l),y:c*Math.round(d.y/c)}:d},v0=({x:e,y:n},[r,o,s])=>({x:e*s+r,y:n*s+o}),is=(e,n=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*n[0],o=(e.height??0)*n[1],s={x:e.position.x-r,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-o}:s}},Nd=(e,n=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,s)=>{const{x:u,y:l}=is(s,n).positionAbsolute;return BA(o,xd({x:u,y:l,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return MA(r)},D0=(e,n,[r,o,s]=[0,0,1],u=!1,l=!1,c=[0,0])=>{const d={x:(n.x-r)/s,y:(n.y-o)/s,width:n.width/s,height:n.height/s},f=[];return e.forEach(h=>{const{width:g,height:m,selectable:D=!0,hidden:C=!1}=h;if(l&&!D||C)return!1;const{positionAbsolute:y}=is(h,c),w={x:y.x,y:y.y,width:g||0,height:m||0},_=Gl(d,w),x=typeof g>"u"||typeof m>"u"||g===null||m===null,N=u&&_>0,F=(g||0)*(m||0);(x||N||_>=F||h.dragging)&&f.push(h)}),f},_0=(e,n)=>{const r=e.map(o=>o.id);return n.filter(o=>r.includes(o.source)||r.includes(o.target))},b0=(e,n,r,o,s,u=.1)=>{const l=n/(e.width*(1+u)),c=r/(e.height*(1+u)),d=Math.min(l,c),f=ls(d,o,s),h=e.x+e.width/2,g=e.y+e.height/2,m=n/2-h*f,D=r/2-g*f;return{x:m,y:D,zoom:f}},po=(e,n=0)=>e.transition().duration(n);function mp(e,n,r,o){return(n[r]||[]).reduce((s,u)=>(`${e.id}-${u.id}-${r}`!==o&&s.push({id:u.id||null,type:r,nodeId:e.id,x:(e.positionAbsolute?.x??0)+u.x+u.width/2,y:(e.positionAbsolute?.y??0)+u.y+u.height/2}),s),[])}function ZA(e,n,r,o,s,u){const{x:l,y:c}=Bi(e),f=n.elementsFromPoint(l,c).find(C=>C.classList.contains("react-flow__handle"));if(f){const C=f.getAttribute("data-nodeid");if(C){const y=Td(void 0,f),w=f.getAttribute("data-handleid"),_=u({nodeId:C,id:w,type:y});if(_){const x=s.find(N=>N.nodeId===C&&N.type===y&&N.id===w);return{handle:{id:w,type:y,nodeId:C,x:x?.x||r.x,y:x?.y||r.y},validHandleResult:_}}}}let h=[],g=1/0;if(s.forEach(C=>{const y=Math.sqrt((C.x-r.x)**2+(C.y-r.y)**2);if(y<=o){const w=u(C);y<=g&&(y<g?h=[{handle:C,validHandleResult:w}]:y===g&&h.push({handle:C,validHandleResult:w}),g=y)}}),!h.length)return{handle:null,validHandleResult:w0()};if(h.length===1)return h[0];const m=h.some(({validHandleResult:C})=>C.isValid),D=h.some(({handle:C})=>C.type==="target");return h.find(({handle:C,validHandleResult:y})=>D?C.type==="target":m?y.isValid:!0)||h[0]}const JA={source:null,target:null,sourceHandle:null,targetHandle:null},w0=()=>({handleDomNode:null,isValid:!1,connection:JA,endHandle:null});function x0(e,n,r,o,s,u,l){const c=s==="target",d=l.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),f={...w0(),handleDomNode:d};if(d){const h=Td(void 0,d),g=d.getAttribute("data-nodeid"),m=d.getAttribute("data-handleid"),D=d.classList.contains("connectable"),C=d.classList.contains("connectableend"),y={source:c?g:r,sourceHandle:c?m:o,target:c?r:g,targetHandle:c?o:m};f.connection=y,D&&C&&(n===bo.Strict?c&&h==="source"||!c&&h==="target":g!==r||m!==o)&&(f.endHandle={nodeId:g,handleId:m,type:h},f.isValid=u(y))}return f}function KA({nodes:e,nodeId:n,handleId:r,handleType:o}){return e.reduce((s,u)=>{if(u[jt]){const{handleBounds:l}=u[jt];let c=[],d=[];l&&(c=mp(u,l,"source",`${n}-${r}-${o}`),d=mp(u,l,"target",`${n}-${r}-${o}`)),s.push(...c,...d)}return s},[])}function Td(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function tl(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function QA(e,n){let r=null;return n?r="valid":e&&!n&&(r="invalid"),r}function C0({event:e,handleId:n,nodeId:r,onConnect:o,isTarget:s,getState:u,setState:l,isValidConnection:c,edgeUpdaterType:d,onReconnectEnd:f}){const h=d0(e.target),{connectionMode:g,domNode:m,autoPanOnConnect:D,connectionRadius:C,onConnectStart:y,panBy:w,getNodes:_,cancelConnection:x}=u();let N=0,F;const{x:j,y:H}=Bi(e),K=h?.elementFromPoint(j,H),ee=Td(d,K),B=m?.getBoundingClientRect();if(!B||!ee)return;let V,Y=Bi(e,B),te=!1,Z=null,R=!1,G=null;const k=KA({nodes:_(),nodeId:r,handleId:n,handleType:ee}),J=()=>{if(!D)return;const[re,ue]=l0(Y,B);w({x:re,y:ue}),N=requestAnimationFrame(J)};l({connectionPosition:Y,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:ee,connectionStartHandle:{nodeId:r,handleId:n,type:ee},connectionEndHandle:null}),y?.(e,{nodeId:r,handleId:n,handleType:ee});function se(re){const{transform:ue}=u();Y=Bi(re,B);const{handle:de,validHandleResult:le}=ZA(re,h,Xl(Y,ue,!1,[1,1]),C,k,ve=>x0(ve,g,r,n,s?"target":"source",c,h));if(F=de,te||(J(),te=!0),G=le.handleDomNode,Z=le.connection,R=le.isValid,l({connectionPosition:F&&R?v0({x:F.x,y:F.y},ue):Y,connectionStatus:QA(!!F,R),connectionEndHandle:le.endHandle}),!F&&!R&&!G)return tl(V);Z.source!==Z.target&&G&&(tl(V),V=G,G.classList.add("connecting","react-flow__handle-connecting"),G.classList.toggle("valid",R),G.classList.toggle("react-flow__handle-valid",R))}function U(re){(F||G)&&Z&&R&&o?.(Z),u().onConnectEnd?.(re),d&&f?.(re),tl(V),x(),cancelAnimationFrame(N),te=!1,R=!1,Z=null,G=null,h.removeEventListener("mousemove",se),h.removeEventListener("mouseup",U),h.removeEventListener("touchmove",se),h.removeEventListener("touchend",U)}h.addEventListener("mousemove",se),h.addEventListener("mouseup",U),h.addEventListener("touchmove",se),h.addEventListener("touchend",U)}const yp=()=>!0,e3=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),t3=(e,n,r)=>o=>{const{connectionStartHandle:s,connectionEndHandle:u,connectionClickStartHandle:l}=o;return{connecting:s?.nodeId===e&&s?.handleId===n&&s?.type===r||u?.nodeId===e&&u?.handleId===n&&u?.type===r,clickConnecting:l?.nodeId===e&&l?.handleId===n&&l?.type===r}},E0=T.forwardRef(({type:e="source",position:n=Ce.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:u=!0,id:l,onConnect:c,children:d,className:f,onMouseDown:h,onTouchStart:g,...m},D)=>{const C=l||null,y=e==="target",w=hn(),_=GA(),{connectOnClick:x,noPanClassName:N}=It(e3,bn),{connecting:F,clickConnecting:j}=It(t3(_,C,e),bn);_||w.getState().onError?.("010",li.error010());const H=B=>{const{defaultEdgeOptions:V,onConnect:Y,hasDefaultEdges:te}=w.getState(),Z={...V,...B};if(te){const{edges:R,setEdges:G}=w.getState();G(YA(Z,R))}Y?.(Z),c?.(Z)},K=B=>{if(!_)return;const V=h0(B);s&&(V&&B.button===0||!V)&&C0({event:B,handleId:C,nodeId:_,onConnect:H,isTarget:y,getState:w.getState,setState:w.setState,isValidConnection:r||w.getState().isValidConnection||yp}),V?h?.(B):g?.(B)},ee=B=>{const{onClickConnectStart:V,onClickConnectEnd:Y,connectionClickStartHandle:te,connectionMode:Z,isValidConnection:R}=w.getState();if(!_||!te&&!s)return;if(!te){V?.(B,{nodeId:_,handleId:C,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:_,type:e,handleId:C}});return}const G=d0(B.target),k=r||R||yp,{connection:J,isValid:se}=x0({nodeId:_,id:C,type:e},Z,te.nodeId,te.handleId||null,te.type,k,G);se&&H(J),Y?.(B),w.setState({connectionClickStartHandle:null})};return W.createElement("div",{"data-handleid":C,"data-nodeid":_,"data-handlepos":n,"data-id":`${_}-${C}-${e}`,className:In(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",N,f,{source:!y,target:y,connectable:o,connectablestart:s,connectableend:u,connecting:j,connectionindicator:o&&(s&&!F||u&&F)}]),onMouseDown:K,onTouchStart:K,onClick:x?ee:void 0,ref:D,...m},d)});E0.displayName="Handle";var Pi=T.memo(E0);const S0=({data:e,isConnectable:n,targetPosition:r=Ce.Top,sourcePosition:o=Ce.Bottom})=>W.createElement(W.Fragment,null,W.createElement(Pi,{type:"target",position:r,isConnectable:n}),e?.label,W.createElement(Pi,{type:"source",position:o,isConnectable:n}));S0.displayName="DefaultNode";var Yl=T.memo(S0);const A0=({data:e,isConnectable:n,sourcePosition:r=Ce.Bottom})=>W.createElement(W.Fragment,null,e?.label,W.createElement(Pi,{type:"source",position:r,isConnectable:n}));A0.displayName="InputNode";var F0=T.memo(A0);const N0=({data:e,isConnectable:n,targetPosition:r=Ce.Top})=>W.createElement(W.Fragment,null,W.createElement(Pi,{type:"target",position:r,isConnectable:n}),e?.label);N0.displayName="OutputNode";var T0=T.memo(N0);const Id=()=>null;Id.displayName="GroupNode";const n3=e=>({selectedNodes:e.getNodes().filter(n=>n.selected),selectedEdges:e.edges.filter(n=>n.selected).map(n=>({...n}))}),nu=e=>e.id;function r3(e,n){return bn(e.selectedNodes.map(nu),n.selectedNodes.map(nu))&&bn(e.selectedEdges.map(nu),n.selectedEdges.map(nu))}const I0=T.memo(({onSelectionChange:e})=>{const n=hn(),{selectedNodes:r,selectedEdges:o}=It(n3,r3);return T.useEffect(()=>{const s={nodes:r,edges:o};e?.(s),n.getState().onSelectionChange.forEach(u=>u(s))},[r,o,e]),null});I0.displayName="SelectionListener";const i3=e=>!!e.onSelectionChange;function o3({onSelectionChange:e}){const n=It(i3);return e||n?W.createElement(I0,{onSelectionChange:e}):null}const s3=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Xo(e,n){T.useEffect(()=>{typeof e<"u"&&n(e)},[e])}function Ue(e,n,r){T.useEffect(()=>{typeof n<"u"&&r({[e]:n})},[n])}const a3=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:s,onConnectStart:u,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:d,nodesDraggable:f,nodesConnectable:h,nodesFocusable:g,edgesFocusable:m,edgesUpdatable:D,elevateNodesOnSelect:C,minZoom:y,maxZoom:w,nodeExtent:_,onNodesChange:x,onEdgesChange:N,elementsSelectable:F,connectionMode:j,snapGrid:H,snapToGrid:K,translateExtent:ee,connectOnClick:B,defaultEdgeOptions:V,fitView:Y,fitViewOptions:te,onNodesDelete:Z,onEdgesDelete:R,onNodeDrag:G,onNodeDragStart:k,onNodeDragStop:J,onSelectionDrag:se,onSelectionDragStart:U,onSelectionDragStop:re,noPanClassName:ue,nodeOrigin:de,rfId:le,autoPanOnConnect:ve,autoPanOnNodeDrag:ge,onError:Ee,connectionRadius:Be,isValidConnection:De,nodeDragThreshold:Se})=>{const{setNodes:Oe,setEdges:Et,setDefaultNodesAndEdges:tt,setMinZoom:$t,setMaxZoom:nt,setTranslateExtent:rt,setNodeExtent:on,reset:ke}=It(s3,bn),we=hn();return T.useEffect(()=>{const qt=o?.map(Ot=>({...Ot,...V}));return tt(r,qt),()=>{ke()}},[]),Ue("defaultEdgeOptions",V,we.setState),Ue("connectionMode",j,we.setState),Ue("onConnect",s,we.setState),Ue("onConnectStart",u,we.setState),Ue("onConnectEnd",l,we.setState),Ue("onClickConnectStart",c,we.setState),Ue("onClickConnectEnd",d,we.setState),Ue("nodesDraggable",f,we.setState),Ue("nodesConnectable",h,we.setState),Ue("nodesFocusable",g,we.setState),Ue("edgesFocusable",m,we.setState),Ue("edgesUpdatable",D,we.setState),Ue("elementsSelectable",F,we.setState),Ue("elevateNodesOnSelect",C,we.setState),Ue("snapToGrid",K,we.setState),Ue("snapGrid",H,we.setState),Ue("onNodesChange",x,we.setState),Ue("onEdgesChange",N,we.setState),Ue("connectOnClick",B,we.setState),Ue("fitViewOnInit",Y,we.setState),Ue("fitViewOnInitOptions",te,we.setState),Ue("onNodesDelete",Z,we.setState),Ue("onEdgesDelete",R,we.setState),Ue("onNodeDrag",G,we.setState),Ue("onNodeDragStart",k,we.setState),Ue("onNodeDragStop",J,we.setState),Ue("onSelectionDrag",se,we.setState),Ue("onSelectionDragStart",U,we.setState),Ue("onSelectionDragStop",re,we.setState),Ue("noPanClassName",ue,we.setState),Ue("nodeOrigin",de,we.setState),Ue("rfId",le,we.setState),Ue("autoPanOnConnect",ve,we.setState),Ue("autoPanOnNodeDrag",ge,we.setState),Ue("onError",Ee,we.setState),Ue("connectionRadius",Be,we.setState),Ue("isValidConnection",De,we.setState),Ue("nodeDragThreshold",Se,we.setState),Xo(e,Oe),Xo(n,Et),Xo(y,$t),Xo(w,nt),Xo(ee,rt),Xo(_,on),null},vp={display:"none"},u3={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},R0="react-flow__node-desc",O0="react-flow__edge-desc",c3="react-flow__aria-live",l3=e=>e.ariaLiveMessage;function d3({rfId:e}){const n=It(l3);return W.createElement("div",{id:`${c3}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:u3},n)}function f3({rfId:e,disableKeyboardA11y:n}){return W.createElement(W.Fragment,null,W.createElement("div",{id:`${R0}-${e}`,style:vp},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),W.createElement("div",{id:`${O0}-${e}`,style:vp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&W.createElement(d3,{rfId:e}))}var ia=(e=null,n={actInsideInputWithModifier:!0})=>{const[r,o]=T.useState(!1),s=T.useRef(!1),u=T.useRef(new Set([])),[l,c]=T.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),h=f.reduce((g,m)=>g.concat(...m),[]);return[f,h]}return[[],[]]},[e]);return T.useEffect(()=>{const d=typeof document<"u"?document:null,f=n?.target||d;if(e!==null){const h=D=>{if(s.current=D.ctrlKey||D.metaKey||D.shiftKey,(!s.current||s.current&&!n.actInsideInputWithModifier)&&Vl(D))return!1;const y=_p(D.code,c);u.current.add(D[y]),Dp(l,u.current,!1)&&(D.preventDefault(),o(!0))},g=D=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&Vl(D))return!1;const y=_p(D.code,c);Dp(l,u.current,!0)?(o(!1),u.current.clear()):u.current.delete(D[y]),D.key==="Meta"&&u.current.clear(),s.current=!1},m=()=>{u.current.clear(),o(!1)};return f?.addEventListener("keydown",h),f?.addEventListener("keyup",g),window.addEventListener("blur",m),()=>{f?.removeEventListener("keydown",h),f?.removeEventListener("keyup",g),window.removeEventListener("blur",m)}}},[e,o]),r};function Dp(e,n,r){return e.filter(o=>r||o.length===n.size).some(o=>o.every(s=>n.has(s)))}function _p(e,n){return n.includes(e)?"code":"key"}function B0(e,n,r,o){const s=e.parentNode||e.parentId;if(!s)return r;const u=n.get(s),l=is(u,o);return B0(u,n,{x:(r.x??0)+l.x,y:(r.y??0)+l.y,z:(u[jt]?.z??0)>(r.z??0)?u[jt]?.z??0:r.z??0},o)}function M0(e,n,r){e.forEach(o=>{const s=o.parentNode||o.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||r?.[o.id]){const{x:u,y:l,z:c}=B0(o,e,{...o.position,z:o[jt]?.z??0},n);o.positionAbsolute={x:u,y:l},o[jt].z=c,r?.[o.id]&&(o[jt].isParent=!0)}})}function nl(e,n,r,o){const s=new Map,u={},l=o?1e3:0;return e.forEach(c=>{const d=(dr(c.zIndex)?c.zIndex:0)+(c.selected?l:0),f=n.get(c.id),h={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},g=c.parentNode||c.parentId;g&&(u[g]=!0);const m=f?.type&&f?.type!==c.type;Object.defineProperty(h,jt,{enumerable:!1,value:{handleBounds:m?void 0:f?.[jt]?.handleBounds,z:d}}),s.set(c.id,h)}),M0(s,r,u),s}function P0(e,n={}){const{getNodes:r,width:o,height:s,minZoom:u,maxZoom:l,d3Zoom:c,d3Selection:d,fitViewOnInitDone:f,fitViewOnInit:h,nodeOrigin:g}=e(),m=n.initial&&!f&&h;if(c&&d&&(m||!n.initial)){const C=r().filter(w=>{const _=n.includeHiddenNodes?w.width&&w.height:!w.hidden;return n.nodes?.length?_&&n.nodes.some(x=>x.id===w.id):_}),y=C.every(w=>w.width&&w.height);if(C.length>0&&y){const w=Nd(C,g),{x:_,y:x,zoom:N}=b0(w,o,s,n.minZoom??u,n.maxZoom??l,n.padding??.1),F=Oi.translate(_,x).scale(N);return typeof n.duration=="number"&&n.duration>0?c.transform(po(d,n.duration),F):c.transform(d,F),!0}}return!1}function h3(e,n){return e.forEach(r=>{const o=n.get(r.id);o&&n.set(o.id,{...o,[jt]:o[jt],selected:r.selected})}),new Map(n)}function p3(e,n){return n.map(r=>{const o=e.find(s=>s.id===r.id);return o&&(r.selected=o.selected),r})}function ru({changedNodes:e,changedEdges:n,get:r,set:o}){const{nodeInternals:s,edges:u,onNodesChange:l,onEdgesChange:c,hasDefaultNodes:d,hasDefaultEdges:f}=r();e?.length&&(d&&o({nodeInternals:h3(e,s)}),l?.(e)),n?.length&&(f&&o({edges:p3(n,u)}),c?.(n))}const Yo=()=>{},g3={zoomIn:Yo,zoomOut:Yo,zoomTo:Yo,getZoom:()=>1,setViewport:Yo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Yo,fitBounds:Yo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},m3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),y3=()=>{const e=hn(),{d3Zoom:n,d3Selection:r}=It(m3,bn);return T.useMemo(()=>r&&n?{zoomIn:s=>n.scaleBy(po(r,s?.duration),1.2),zoomOut:s=>n.scaleBy(po(r,s?.duration),1/1.2),zoomTo:(s,u)=>n.scaleTo(po(r,u?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,u)=>{const[l,c,d]=e.getState().transform,f=Oi.translate(s.x??l,s.y??c).scale(s.zoom??d);n.transform(po(r,u?.duration),f)},getViewport:()=>{const[s,u,l]=e.getState().transform;return{x:s,y:u,zoom:l}},fitView:s=>P0(e.getState,s),setCenter:(s,u,l)=>{const{width:c,height:d,maxZoom:f}=e.getState(),h=typeof l?.zoom<"u"?l.zoom:f,g=c/2-s*h,m=d/2-u*h,D=Oi.translate(g,m).scale(h);n.transform(po(r,l?.duration),D)},fitBounds:(s,u)=>{const{width:l,height:c,minZoom:d,maxZoom:f}=e.getState(),{x:h,y:g,zoom:m}=b0(s,l,c,d,f,u?.padding??.1),D=Oi.translate(h,g).scale(m);n.transform(po(r,u?.duration),D)},project:s=>{const{transform:u,snapToGrid:l,snapGrid:c}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Xl(s,u,l,c)},screenToFlowPosition:s=>{const{transform:u,snapToGrid:l,snapGrid:c,domNode:d}=e.getState();if(!d)return s;const{x:f,y:h}=d.getBoundingClientRect(),g={x:s.x-f,y:s.y-h};return Xl(g,u,l,c)},flowToScreenPosition:s=>{const{transform:u,domNode:l}=e.getState();if(!l)return s;const{x:c,y:d}=l.getBoundingClientRect(),f=v0(s,u);return{x:f.x+c,y:f.y+d}},viewportInitialized:!0}:g3,[n,r])};function Rd(){const e=y3(),n=hn(),r=T.useCallback(()=>n.getState().getNodes().map(y=>({...y})),[]),o=T.useCallback(y=>n.getState().nodeInternals.get(y),[]),s=T.useCallback(()=>{const{edges:y=[]}=n.getState();return y.map(w=>({...w}))},[]),u=T.useCallback(y=>{const{edges:w=[]}=n.getState();return w.find(_=>_.id===y)},[]),l=T.useCallback(y=>{const{getNodes:w,setNodes:_,hasDefaultNodes:x,onNodesChange:N}=n.getState(),F=w(),j=typeof y=="function"?y(F):y;if(x)_(j);else if(N){const H=j.length===0?F.map(K=>({type:"remove",id:K.id})):j.map(K=>({item:K,type:"reset"}));N(H)}},[]),c=T.useCallback(y=>{const{edges:w=[],setEdges:_,hasDefaultEdges:x,onEdgesChange:N}=n.getState(),F=typeof y=="function"?y(w):y;if(x)_(F);else if(N){const j=F.length===0?w.map(H=>({type:"remove",id:H.id})):F.map(H=>({item:H,type:"reset"}));N(j)}},[]),d=T.useCallback(y=>{const w=Array.isArray(y)?y:[y],{getNodes:_,setNodes:x,hasDefaultNodes:N,onNodesChange:F}=n.getState();if(N){const H=[..._(),...w];x(H)}else if(F){const j=w.map(H=>({item:H,type:"add"}));F(j)}},[]),f=T.useCallback(y=>{const w=Array.isArray(y)?y:[y],{edges:_=[],setEdges:x,hasDefaultEdges:N,onEdgesChange:F}=n.getState();if(N)x([..._,...w]);else if(F){const j=w.map(H=>({item:H,type:"add"}));F(j)}},[]),h=T.useCallback(()=>{const{getNodes:y,edges:w=[],transform:_}=n.getState(),[x,N,F]=_;return{nodes:y().map(j=>({...j})),edges:w.map(j=>({...j})),viewport:{x,y:N,zoom:F}}},[]),g=T.useCallback(({nodes:y,edges:w})=>{const{nodeInternals:_,getNodes:x,edges:N,hasDefaultNodes:F,hasDefaultEdges:j,onNodesDelete:H,onEdgesDelete:K,onNodesChange:ee,onEdgesChange:B}=n.getState(),V=(y||[]).map(G=>G.id),Y=(w||[]).map(G=>G.id),te=x().reduce((G,k)=>{const J=k.parentNode||k.parentId,se=!V.includes(k.id)&&J&&G.find(re=>re.id===J);return(typeof k.deletable=="boolean"?k.deletable:!0)&&(V.includes(k.id)||se)&&G.push(k),G},[]),Z=N.filter(G=>typeof G.deletable=="boolean"?G.deletable:!0),R=Z.filter(G=>Y.includes(G.id));if(te||R){const G=_0(te,Z),k=[...R,...G],J=k.reduce((se,U)=>(se.includes(U.id)||se.push(U.id),se),[]);if((j||F)&&(j&&n.setState({edges:N.filter(se=>!J.includes(se.id))}),F&&(te.forEach(se=>{_.delete(se.id)}),n.setState({nodeInternals:new Map(_)}))),J.length>0&&(K?.(k),B&&B(J.map(se=>({id:se,type:"remove"})))),te.length>0&&(H?.(te),ee)){const se=te.map(U=>({id:U.id,type:"remove"}));ee(se)}}},[]),m=T.useCallback(y=>{const w=PA(y),_=w?null:n.getState().nodeInternals.get(y.id);return!w&&!_?[null,null,w]:[w?y:dp(_),_,w]},[]),D=T.useCallback((y,w=!0,_)=>{const[x,N,F]=m(y);return x?(_||n.getState().getNodes()).filter(j=>{if(!F&&(j.id===N.id||!j.positionAbsolute))return!1;const H=dp(j),K=Gl(H,x);return w&&K>0||K>=x.width*x.height}):[]},[]),C=T.useCallback((y,w,_=!0)=>{const[x]=m(y);if(!x)return!1;const N=Gl(x,w);return _&&N>0||N>=x.width*x.height},[]);return T.useMemo(()=>({...e,getNodes:r,getNode:o,getEdges:s,getEdge:u,setNodes:l,setEdges:c,addNodes:d,addEdges:f,toObject:h,deleteElements:g,getIntersectingNodes:D,isNodeIntersecting:C}),[e,r,o,s,u,l,c,d,f,h,g,D,C])}const v3={actInsideInputWithModifier:!1};var D3=({deleteKeyCode:e,multiSelectionKeyCode:n})=>{const r=hn(),{deleteElements:o}=Rd(),s=ia(e,v3),u=ia(n);T.useEffect(()=>{if(s){const{edges:l,getNodes:c}=r.getState(),d=c().filter(h=>h.selected),f=l.filter(h=>h.selected);o({nodes:d,edges:f}),r.setState({nodesSelectionActive:!1})}},[s]),T.useEffect(()=>{r.setState({multiSelectionActive:u})},[u])};function _3(e){const n=hn();T.useEffect(()=>{let r;const o=()=>{if(!e.current)return;const s=bd(e.current);(s.height===0||s.width===0)&&n.getState().onError?.("004",li.error004()),n.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(r=new ResizeObserver(()=>o()),r.observe(e.current)),()=>{window.removeEventListener("resize",o),r&&e.current&&r.unobserve(e.current)}},[])}const Od={position:"absolute",width:"100%",height:"100%",top:0,left:0},b3=(e,n)=>e.x!==n.x||e.y!==n.y||e.zoom!==n.k,iu=e=>({x:e.x,y:e.y,zoom:e.k}),Zo=(e,n)=>e.target.closest(`.${n}`),bp=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),wp=e=>{const n=e.ctrlKey&&Nu()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n},w3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),x3=({onMove:e,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:u=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:d=mo.Free,zoomOnDoubleClick:f=!0,elementsSelectable:h,panOnDrag:g=!0,defaultViewport:m,translateExtent:D,minZoom:C,maxZoom:y,zoomActivationKeyCode:w,preventScrolling:_=!0,children:x,noWheelClassName:N,noPanClassName:F})=>{const j=T.useRef(),H=hn(),K=T.useRef(!1),ee=T.useRef(!1),B=T.useRef(null),V=T.useRef({x:0,y:0,zoom:0}),{d3Zoom:Y,d3Selection:te,d3ZoomHandler:Z,userSelectionActive:R}=It(w3,bn),G=ia(w),k=T.useRef(0),J=T.useRef(!1),se=T.useRef();return _3(B),T.useEffect(()=>{if(B.current){const U=B.current.getBoundingClientRect(),re=FA().scaleExtent([C,y]).translateExtent(D),ue=br(B.current).call(re),de=Oi.translate(m.x,m.y).scale(ls(m.zoom,C,y)),le=[[0,0],[U.width,U.height]],ve=re.constrain()(de,le,D);re.transform(ue,ve),re.wheelDelta(wp),H.setState({d3Zoom:re,d3Selection:ue,d3ZoomHandler:ue.on("wheel.zoom"),transform:[ve.x,ve.y,ve.k],domNode:B.current.closest(".react-flow")})}},[]),T.useEffect(()=>{te&&Y&&(l&&!G&&!R?te.on("wheel.zoom",U=>{if(Zo(U,N))return!1;U.preventDefault(),U.stopImmediatePropagation();const re=te.property("__zoom").k||1;if(U.ctrlKey&&u){const De=Mr(U),Se=wp(U),Oe=re*Math.pow(2,Se);Y.scaleTo(te,Oe,De,U);return}const ue=U.deltaMode===1?20:1;let de=d===mo.Vertical?0:U.deltaX*ue,le=d===mo.Horizontal?0:U.deltaY*ue;!Nu()&&U.shiftKey&&d!==mo.Vertical&&(de=U.deltaY*ue,le=0),Y.translateBy(te,-(de/re)*c,-(le/re)*c,{internal:!0});const ve=iu(te.property("__zoom")),{onViewportChangeStart:ge,onViewportChange:Ee,onViewportChangeEnd:Be}=H.getState();clearTimeout(se.current),J.current||(J.current=!0,n?.(U,ve),ge?.(ve)),J.current&&(e?.(U,ve),Ee?.(ve),se.current=setTimeout(()=>{r?.(U,ve),Be?.(ve),J.current=!1},150))},{passive:!1}):typeof Z<"u"&&te.on("wheel.zoom",function(U,re){if(!_&&U.type==="wheel"&&!U.ctrlKey||Zo(U,N))return null;U.preventDefault(),Z.call(this,U,re)},{passive:!1}))},[R,l,d,te,Y,Z,G,u,_,N,n,e,r]),T.useEffect(()=>{Y&&Y.on("start",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;k.current=U.sourceEvent?.button;const{onViewportChangeStart:re}=H.getState(),ue=iu(U.transform);K.current=!0,V.current=ue,U.sourceEvent?.type==="mousedown"&&H.setState({paneDragging:!0}),re?.(ue),n?.(U.sourceEvent,ue)})},[Y,n]),T.useEffect(()=>{Y&&(R&&!K.current?Y.on("zoom",null):R||Y.on("zoom",U=>{const{onViewportChange:re}=H.getState();if(H.setState({transform:[U.transform.x,U.transform.y,U.transform.k]}),ee.current=!!(o&&bp(g,k.current??0)),(e||re)&&!U.sourceEvent?.internal){const ue=iu(U.transform);re?.(ue),e?.(U.sourceEvent,ue)}}))},[R,Y,e,g,o]),T.useEffect(()=>{Y&&Y.on("end",U=>{if(!U.sourceEvent||U.sourceEvent.internal)return null;const{onViewportChangeEnd:re}=H.getState();if(K.current=!1,H.setState({paneDragging:!1}),o&&bp(g,k.current??0)&&!ee.current&&o(U.sourceEvent),ee.current=!1,(r||re)&&b3(V.current,U.transform)){const ue=iu(U.transform);V.current=ue,clearTimeout(j.current),j.current=setTimeout(()=>{re?.(ue),r?.(U.sourceEvent,ue)},l?150:0)}})},[Y,l,g,r,o]),T.useEffect(()=>{Y&&Y.filter(U=>{const re=G||s,ue=u&&U.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&U.button===1&&U.type==="mousedown"&&(Zo(U,"react-flow__node")||Zo(U,"react-flow__edge")))return!0;if(!g&&!re&&!l&&!f&&!u||R||!f&&U.type==="dblclick"||Zo(U,N)&&U.type==="wheel"||Zo(U,F)&&(U.type!=="wheel"||l&&U.type==="wheel"&&!G)||!u&&U.ctrlKey&&U.type==="wheel"||!re&&!l&&!ue&&U.type==="wheel"||!g&&(U.type==="mousedown"||U.type==="touchstart")||Array.isArray(g)&&!g.includes(U.button)&&U.type==="mousedown")return!1;const de=Array.isArray(g)&&g.includes(U.button)||!U.button||U.button<=1;return(!U.ctrlKey||U.type==="wheel")&&de})},[R,Y,s,u,l,f,g,h,G]),W.createElement("div",{className:"react-flow__renderer",ref:B,style:Od},x)},C3=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function E3(){const{userSelectionActive:e,userSelectionRect:n}=It(C3,bn);return e&&n?W.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}function xp(e,n){const r=n.parentNode||n.parentId,o=e.find(s=>s.id===r);if(o){const s=n.position.x+n.width-o.width,u=n.position.y+n.height-o.height;if(s>0||u>0||n.position.x<0||n.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,s>0&&(o.style.width+=s),u>0&&(o.style.height+=u),n.position.x<0){const l=Math.abs(n.position.x);o.position.x=o.position.x-l,o.style.width+=l,n.position.x=0}if(n.position.y<0){const l=Math.abs(n.position.y);o.position.y=o.position.y-l,o.style.height+=l,n.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function z0(e,n){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const r=e.filter(o=>o.type==="add").map(o=>o.item);return n.reduce((o,s)=>{const u=e.filter(c=>c.id===s.id);if(u.length===0)return o.push(s),o;const l={...s};for(const c of u)if(c)switch(c.type){case"select":{l.selected=c.selected;break}case"position":{typeof c.position<"u"&&(l.position=c.position),typeof c.positionAbsolute<"u"&&(l.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(l.dragging=c.dragging),l.expandParent&&xp(o,l);break}case"dimensions":{typeof c.dimensions<"u"&&(l.width=c.dimensions.width,l.height=c.dimensions.height),typeof c.updateStyle<"u"&&(l.style={...l.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(l.resizing=c.resizing),l.expandParent&&xp(o,l);break}case"remove":return o}return o.push(l),o},r)}function j0(e,n){return z0(e,n)}function S3(e,n){return z0(e,n)}const Ti=(e,n)=>({id:e,type:"select",selected:n});function es(e,n){return e.reduce((r,o)=>{const s=n.includes(o.id);return!o.selected&&s?(o.selected=!0,r.push(Ti(o.id,!0))):o.selected&&!s&&(o.selected=!1,r.push(Ti(o.id,!1))),r},[])}const rl=(e,n)=>r=>{r.target===n.current&&e?.(r)},A3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),k0=T.memo(({isSelecting:e,selectionMode:n=ds.Full,panOnDrag:r,onSelectionStart:o,onSelectionEnd:s,onPaneClick:u,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:d,onPaneMouseMove:f,onPaneMouseLeave:h,children:g})=>{const m=T.useRef(null),D=hn(),C=T.useRef(0),y=T.useRef(0),w=T.useRef(),{userSelectionActive:_,elementsSelectable:x,dragging:N}=It(A3,bn),F=()=>{D.setState({userSelectionActive:!1,userSelectionRect:null}),C.current=0,y.current=0},j=Z=>{u?.(Z),D.getState().resetSelectedElements(),D.setState({nodesSelectionActive:!1})},H=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}l?.(Z)},K=c?Z=>c(Z):void 0,ee=Z=>{const{resetSelectedElements:R,domNode:G}=D.getState();if(w.current=G?.getBoundingClientRect(),!x||!e||Z.button!==0||Z.target!==m.current||!w.current)return;const{x:k,y:J}=Bi(Z,w.current);R(),D.setState({userSelectionRect:{width:0,height:0,startX:k,startY:J,x:k,y:J}}),o?.(Z)},B=Z=>{const{userSelectionRect:R,nodeInternals:G,edges:k,transform:J,onNodesChange:se,onEdgesChange:U,nodeOrigin:re,getNodes:ue}=D.getState();if(!e||!w.current||!R)return;D.setState({userSelectionActive:!0,nodesSelectionActive:!1});const de=Bi(Z,w.current),le=R.startX??0,ve=R.startY??0,ge={...R,x:de.x<le?de.x:le,y:de.y<ve?de.y:ve,width:Math.abs(de.x-le),height:Math.abs(de.y-ve)},Ee=ue(),Be=D0(G,ge,J,n===ds.Partial,!0,re),De=_0(Be,k).map(Oe=>Oe.id),Se=Be.map(Oe=>Oe.id);if(C.current!==Se.length){C.current=Se.length;const Oe=es(Ee,Se);Oe.length&&se?.(Oe)}if(y.current!==De.length){y.current=De.length;const Oe=es(k,De);Oe.length&&U?.(Oe)}D.setState({userSelectionRect:ge})},V=Z=>{if(Z.button!==0)return;const{userSelectionRect:R}=D.getState();!_&&R&&Z.target===m.current&&j?.(Z),D.setState({nodesSelectionActive:C.current>0}),F(),s?.(Z)},Y=Z=>{_&&(D.setState({nodesSelectionActive:C.current>0}),s?.(Z)),F()},te=x&&(e||_);return W.createElement("div",{className:In(["react-flow__pane",{dragging:N,selection:e}]),onClick:te?void 0:rl(j,m),onContextMenu:rl(H,m),onWheel:rl(K,m),onMouseEnter:te?void 0:d,onMouseDown:te?ee:void 0,onMouseMove:te?B:f,onMouseUp:te?V:void 0,onMouseLeave:te?Y:h,ref:m,style:Od},g,W.createElement(E3,null))});k0.displayName="Pane";function $0(e,n){const r=e.parentNode||e.parentId;if(!r)return!1;const o=n.get(r);return o?o.selected?!0:$0(o,n):!1}function Cp(e,n,r){let o=e;do{if(o?.matches(n))return!0;if(o===r.current)return!1;o=o.parentElement}while(o);return!1}function F3(e,n,r,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||s.parentId||!$0(s,e))&&(s.draggable||n&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(s.positionAbsolute?.x??0),y:r.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function N3(e,n){return!n||n==="parent"?n:[n[0],[n[1][0]-(e.width||0),n[1][1]-(e.height||0)]]}function q0(e,n,r,o,s=[0,0],u){const l=N3(e,e.extent||o);let c=l;const d=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(d&&e.width&&e.height){const g=r.get(d),{x:m,y:D}=is(g,s).positionAbsolute;c=g&&dr(m)&&dr(D)&&dr(g.width)&&dr(g.height)?[[m+e.width*s[0],D+e.height*s[1]],[m+g.width-e.width+e.width*s[0],D+g.height-e.height+e.height*s[1]]]:c}else u?.("005",li.error005()),c=l;else if(e.extent&&d&&e.extent!=="parent"){const g=r.get(d),{x:m,y:D}=is(g,s).positionAbsolute;c=[[e.extent[0][0]+m,e.extent[0][1]+D],[e.extent[1][0]+m,e.extent[1][1]+D]]}let f={x:0,y:0};if(d){const g=r.get(d);f=is(g,s).positionAbsolute}const h=c&&c!=="parent"?wd(n,c):n;return{position:{x:h.x-f.x,y:h.y-f.y},positionAbsolute:h}}function il({nodeId:e,dragItems:n,nodeInternals:r}){const o=n.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const Ep=(e,n,r,o)=>{const s=n.querySelectorAll(e);if(!s||!s.length)return null;const u=Array.from(s),l=n.getBoundingClientRect(),c={x:l.width*o[0],y:l.height*o[1]};return u.map(d=>{const f=d.getBoundingClientRect();return{id:d.getAttribute("data-handleid"),position:d.getAttribute("data-handlepos"),x:(f.left-l.left-c.x)/r,y:(f.top-l.top-c.y)/r,...bd(d)}})};function zs(e,n,r){return r===void 0?r:o=>{const s=n().nodeInternals.get(e);s&&r(o,{...s})}}function Zl({id:e,store:n,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:u,multiSelectionActive:l,nodeInternals:c,onError:d}=n.getState(),f=c.get(e);if(!f){d?.("012",li.error012(e));return}n.setState({nodesSelectionActive:!1}),f.selected?(r||f.selected&&l)&&(u({nodes:[f],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([e])}function T3(){const e=hn();return T.useCallback(({sourceEvent:r})=>{const{transform:o,snapGrid:s,snapToGrid:u}=e.getState(),l=r.touches?r.touches[0].clientX:r.clientX,c=r.touches?r.touches[0].clientY:r.clientY,d={x:(l-o[0])/o[2],y:(c-o[1])/o[2]};return{xSnapped:u?s[0]*Math.round(d.x/s[0]):d.x,ySnapped:u?s[1]*Math.round(d.y/s[1]):d.y,...d}},[])}function ol(e){return(n,r,o)=>e?.(n,o)}function L0({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:o,nodeId:s,isSelectable:u,selectNodesOnDrag:l}){const c=hn(),[d,f]=T.useState(!1),h=T.useRef([]),g=T.useRef({x:null,y:null}),m=T.useRef(0),D=T.useRef(null),C=T.useRef({x:0,y:0}),y=T.useRef(null),w=T.useRef(!1),_=T.useRef(!1),x=T.useRef(!1),N=T3();return T.useEffect(()=>{if(e?.current){const F=br(e.current),j=({x:ee,y:B})=>{const{nodeInternals:V,onNodeDrag:Y,onSelectionDrag:te,updateNodePositions:Z,nodeExtent:R,snapGrid:G,snapToGrid:k,nodeOrigin:J,onError:se}=c.getState();g.current={x:ee,y:B};let U=!1,re={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&R){const de=Nd(h.current,J);re=xd(de)}if(h.current=h.current.map(de=>{const le={x:ee-de.distance.x,y:B-de.distance.y};k&&(le.x=G[0]*Math.round(le.x/G[0]),le.y=G[1]*Math.round(le.y/G[1]));const ve=[[R[0][0],R[0][1]],[R[1][0],R[1][1]]];h.current.length>1&&R&&!de.extent&&(ve[0][0]=de.positionAbsolute.x-re.x+R[0][0],ve[1][0]=de.positionAbsolute.x+(de.width??0)-re.x2+R[1][0],ve[0][1]=de.positionAbsolute.y-re.y+R[0][1],ve[1][1]=de.positionAbsolute.y+(de.height??0)-re.y2+R[1][1]);const ge=q0(de,le,V,ve,J,se);return U=U||de.position.x!==ge.position.x||de.position.y!==ge.position.y,de.position=ge.position,de.positionAbsolute=ge.positionAbsolute,de}),!U)return;Z(h.current,!0,!0),f(!0);const ue=s?Y:ol(te);if(ue&&y.current){const[de,le]=il({nodeId:s,dragItems:h.current,nodeInternals:V});ue(y.current,de,le)}},H=()=>{if(!D.current)return;const[ee,B]=l0(C.current,D.current);if(ee!==0||B!==0){const{transform:V,panBy:Y}=c.getState();g.current.x=(g.current.x??0)-ee/V[2],g.current.y=(g.current.y??0)-B/V[2],Y({x:ee,y:B})&&j(g.current)}m.current=requestAnimationFrame(H)},K=ee=>{const{nodeInternals:B,multiSelectionActive:V,nodesDraggable:Y,unselectNodesAndEdges:te,onNodeDragStart:Z,onSelectionDragStart:R}=c.getState();_.current=!0;const G=s?Z:ol(R);(!l||!u)&&!V&&s&&(B.get(s)?.selected||te()),s&&u&&l&&Zl({id:s,store:c,nodeRef:e});const k=N(ee);if(g.current=k,h.current=F3(B,Y,k,s),G&&h.current){const[J,se]=il({nodeId:s,dragItems:h.current,nodeInternals:B});G(ee.sourceEvent,J,se)}};if(n)F.on(".drag",null);else{const ee=jE().on("start",B=>{const{domNode:V,nodeDragThreshold:Y}=c.getState();Y===0&&K(B),x.current=!1;const te=N(B);g.current=te,D.current=V?.getBoundingClientRect()||null,C.current=Bi(B.sourceEvent,D.current)}).on("drag",B=>{const V=N(B),{autoPanOnNodeDrag:Y,nodeDragThreshold:te}=c.getState();if(B.sourceEvent.type==="touchmove"&&B.sourceEvent.touches.length>1&&(x.current=!0),!x.current){if(!w.current&&_.current&&Y&&(w.current=!0,H()),!_.current){const Z=V.xSnapped-(g?.current?.x??0),R=V.ySnapped-(g?.current?.y??0);Math.sqrt(Z*Z+R*R)>te&&K(B)}(g.current.x!==V.xSnapped||g.current.y!==V.ySnapped)&&h.current&&_.current&&(y.current=B.sourceEvent,C.current=Bi(B.sourceEvent,D.current),j(V))}}).on("end",B=>{if(!(!_.current||x.current)&&(f(!1),w.current=!1,_.current=!1,cancelAnimationFrame(m.current),h.current)){const{updateNodePositions:V,nodeInternals:Y,onNodeDragStop:te,onSelectionDragStop:Z}=c.getState(),R=s?te:ol(Z);if(V(h.current,!1,!1),R){const[G,k]=il({nodeId:s,dragItems:h.current,nodeInternals:Y});R(B.sourceEvent,G,k)}}}).filter(B=>{const V=B.target;return!B.button&&(!r||!Cp(V,`.${r}`,e))&&(!o||Cp(V,o,e))});return F.call(ee),()=>{F.on(".drag",null)}}}},[e,n,r,o,u,c,s,l,N]),d}function H0(){const e=hn();return T.useCallback(r=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:u,getNodes:l,snapToGrid:c,snapGrid:d,onError:f,nodesDraggable:h}=e.getState(),g=l().filter(x=>x.selected&&(x.draggable||h&&typeof x.draggable>"u")),m=c?d[0]:5,D=c?d[1]:5,C=r.isShiftPressed?4:1,y=r.x*m*C,w=r.y*D*C,_=g.map(x=>{if(x.positionAbsolute){const N={x:x.positionAbsolute.x+y,y:x.positionAbsolute.y+w};c&&(N.x=d[0]*Math.round(N.x/d[0]),N.y=d[1]*Math.round(N.y/d[1]));const{positionAbsolute:F,position:j}=q0(x,N,o,s,void 0,f);x.position=j,x.positionAbsolute=F}return x});u(_,!0,!1)},[])}const os={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var js=e=>{const n=({id:r,type:o,data:s,xPos:u,yPos:l,xPosOrigin:c,yPosOrigin:d,selected:f,onClick:h,onMouseEnter:g,onMouseMove:m,onMouseLeave:D,onContextMenu:C,onDoubleClick:y,style:w,className:_,isDraggable:x,isSelectable:N,isConnectable:F,isFocusable:j,selectNodesOnDrag:H,sourcePosition:K,targetPosition:ee,hidden:B,resizeObserver:V,dragHandle:Y,zIndex:te,isParent:Z,noDragClassName:R,noPanClassName:G,initialized:k,disableKeyboardA11y:J,ariaLabel:se,rfId:U,hasHandleBounds:re})=>{const ue=hn(),de=T.useRef(null),le=T.useRef(null),ve=T.useRef(K),ge=T.useRef(ee),Ee=T.useRef(o),Be=N||x||h||g||m||D,De=H0(),Se=zs(r,ue.getState,g),Oe=zs(r,ue.getState,m),Et=zs(r,ue.getState,D),tt=zs(r,ue.getState,C),$t=zs(r,ue.getState,y),nt=ke=>{const{nodeDragThreshold:we}=ue.getState();if(N&&(!H||!x||we>0)&&Zl({id:r,store:ue,nodeRef:de}),h){const qt=ue.getState().nodeInternals.get(r);qt&&h(ke,{...qt})}},rt=ke=>{if(!Vl(ke)&&!J)if(f0.includes(ke.key)&&N){const we=ke.key==="Escape";Zl({id:r,store:ue,unselect:we,nodeRef:de})}else x&&f&&Object.prototype.hasOwnProperty.call(os,ke.key)&&(ue.setState({ariaLiveMessage:`Moved selected node ${ke.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~l}`}),De({x:os[ke.key].x,y:os[ke.key].y,isShiftPressed:ke.shiftKey}))};T.useEffect(()=>()=>{le.current&&(V?.unobserve(le.current),le.current=null)},[]),T.useEffect(()=>{if(de.current&&!B){const ke=de.current;(!k||!re||le.current!==ke)&&(le.current&&V?.unobserve(le.current),V?.observe(ke),le.current=ke)}},[B,k,re]),T.useEffect(()=>{const ke=Ee.current!==o,we=ve.current!==K,qt=ge.current!==ee;de.current&&(ke||we||qt)&&(ke&&(Ee.current=o),we&&(ve.current=K),qt&&(ge.current=ee),ue.getState().updateNodeDimensions([{id:r,nodeElement:de.current,forceUpdate:!0}]))},[r,o,K,ee]);const on=L0({nodeRef:de,disabled:B||!x,noDragClassName:R,handleSelector:Y,nodeId:r,isSelectable:N,selectNodesOnDrag:H});return B?null:W.createElement("div",{className:In(["react-flow__node",`react-flow__node-${o}`,{[G]:x},_,{selected:f,selectable:N,parent:Z,dragging:on}]),ref:de,style:{zIndex:te,transform:`translate(${c}px,${d}px)`,pointerEvents:Be?"all":"none",visibility:k?"visible":"hidden",...w},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:Se,onMouseMove:Oe,onMouseLeave:Et,onContextMenu:tt,onClick:nt,onDoubleClick:$t,onKeyDown:j?rt:void 0,tabIndex:j?0:void 0,role:j?"button":void 0,"aria-describedby":J?void 0:`${R0}-${U}`,"aria-label":se},W.createElement(HA,{value:r},W.createElement(e,{id:r,data:s,type:o,xPos:u,yPos:l,selected:f,isConnectable:F,sourcePosition:K,targetPosition:ee,dragging:on,dragHandle:Y,zIndex:te})))};return n.displayName="NodeWrapper",T.memo(n)};const I3=e=>{const n=e.getNodes().filter(r=>r.selected);return{...Nd(n,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function R3({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const o=hn(),{width:s,height:u,x:l,y:c,transformString:d,userSelectionActive:f}=It(I3,bn),h=H0(),g=T.useRef(null);if(T.useEffect(()=>{r||g.current?.focus({preventScroll:!0})},[r]),L0({nodeRef:g}),f||!s||!u)return null;const m=e?C=>{const y=o.getState().getNodes().filter(w=>w.selected);e(C,y)}:void 0,D=C=>{Object.prototype.hasOwnProperty.call(os,C.key)&&h({x:os[C.key].x,y:os[C.key].y,isShiftPressed:C.shiftKey})};return W.createElement("div",{className:In(["react-flow__nodesselection","react-flow__container",n]),style:{transform:d}},W.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:D,style:{width:s,height:u,top:c,left:l}}))}var O3=T.memo(R3);const B3=e=>e.nodesSelectionActive,G0=({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:l,deleteKeyCode:c,onMove:d,onMoveStart:f,onMoveEnd:h,selectionKeyCode:g,selectionOnDrag:m,selectionMode:D,onSelectionStart:C,onSelectionEnd:y,multiSelectionKeyCode:w,panActivationKeyCode:_,zoomActivationKeyCode:x,elementsSelectable:N,zoomOnScroll:F,zoomOnPinch:j,panOnScroll:H,panOnScrollSpeed:K,panOnScrollMode:ee,zoomOnDoubleClick:B,panOnDrag:V,defaultViewport:Y,translateExtent:te,minZoom:Z,maxZoom:R,preventScrolling:G,onSelectionContextMenu:k,noWheelClassName:J,noPanClassName:se,disableKeyboardA11y:U})=>{const re=It(B3),ue=ia(g),de=ia(_),le=de||V,ve=de||H,ge=ue||m&&le!==!0;return D3({deleteKeyCode:c,multiSelectionKeyCode:w}),W.createElement(x3,{onMove:d,onMoveStart:f,onMoveEnd:h,onPaneContextMenu:u,elementsSelectable:N,zoomOnScroll:F,zoomOnPinch:j,panOnScroll:ve,panOnScrollSpeed:K,panOnScrollMode:ee,zoomOnDoubleClick:B,panOnDrag:!ue&&le,defaultViewport:Y,translateExtent:te,minZoom:Z,maxZoom:R,zoomActivationKeyCode:x,preventScrolling:G,noWheelClassName:J,noPanClassName:se},W.createElement(k0,{onSelectionStart:C,onSelectionEnd:y,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:l,panOnDrag:le,isSelecting:!!ge,selectionMode:D},e,re&&W.createElement(O3,{onSelectionContextMenu:k,noPanClassName:se,disableKeyboardA11y:U})))};G0.displayName="FlowRenderer";var M3=T.memo(G0);function P3(e){return It(T.useCallback(r=>e?D0(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function z3(e){const n={input:js(e.input||F0),default:js(e.default||Yl),output:js(e.output||T0),group:js(e.group||Id)},r={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,u)=>(s[u]=js(e[u]||Yl),s),r);return{...n,...o}}const j3=({x:e,y:n,width:r,height:o,origin:s})=>!r||!o?{x:e,y:n}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:n}:{x:e-r*s[0],y:n-o*s[1]},k3=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),V0=e=>{const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:u,onError:l}=It(k3,bn),c=P3(e.onlyRenderVisibleElements),d=T.useRef(),f=T.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const h=new ResizeObserver(g=>{const m=g.map(D=>({id:D.target.getAttribute("data-id"),nodeElement:D.target,forceUpdate:!0}));u(m)});return d.current=h,h},[]);return T.useEffect(()=>()=>{d?.current?.disconnect()},[]),W.createElement("div",{className:"react-flow__nodes",style:Od},c.map(h=>{let g=h.type||"default";e.nodeTypes[g]||(l?.("003",li.error003(g)),g="default");const m=e.nodeTypes[g]||e.nodeTypes.default,D=!!(h.draggable||n&&typeof h.draggable>"u"),C=!!(h.selectable||s&&typeof h.selectable>"u"),y=!!(h.connectable||r&&typeof h.connectable>"u"),w=!!(h.focusable||o&&typeof h.focusable>"u"),_=e.nodeExtent?wd(h.positionAbsolute,e.nodeExtent):h.positionAbsolute,x=_?.x??0,N=_?.y??0,F=j3({x,y:N,width:h.width??0,height:h.height??0,origin:e.nodeOrigin});return W.createElement(m,{key:h.id,id:h.id,className:h.className,style:h.style,type:g,data:h.data,sourcePosition:h.sourcePosition||Ce.Bottom,targetPosition:h.targetPosition||Ce.Top,hidden:h.hidden,xPos:x,yPos:N,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!h.selected,isDraggable:D,isSelectable:C,isConnectable:y,isFocusable:w,resizeObserver:f,dragHandle:h.dragHandle,zIndex:h[jt]?.z??0,isParent:!!h[jt]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!h.width&&!!h.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!h[jt]?.handleBounds})}))};V0.displayName="NodeRenderer";var $3=T.memo(V0);const q3=(e,n,r)=>r===Ce.Left?e-n:r===Ce.Right?e+n:e,L3=(e,n,r)=>r===Ce.Top?e-n:r===Ce.Bottom?e+n:e,Sp="react-flow__edgeupdater",Ap=({position:e,centerX:n,centerY:r,radius:o=10,onMouseDown:s,onMouseEnter:u,onMouseOut:l,type:c})=>W.createElement("circle",{onMouseDown:s,onMouseEnter:u,onMouseOut:l,className:In([Sp,`${Sp}-${c}`]),cx:q3(n,o,e),cy:L3(r,o,e),r:o,stroke:"transparent",fill:"transparent"}),H3=()=>!0;var Jo=e=>{const n=({id:r,className:o,type:s,data:u,onClick:l,onEdgeDoubleClick:c,selected:d,animated:f,label:h,labelStyle:g,labelShowBg:m,labelBgStyle:D,labelBgPadding:C,labelBgBorderRadius:y,style:w,source:_,target:x,sourceX:N,sourceY:F,targetX:j,targetY:H,sourcePosition:K,targetPosition:ee,elementsSelectable:B,hidden:V,sourceHandleId:Y,targetHandleId:te,onContextMenu:Z,onMouseEnter:R,onMouseMove:G,onMouseLeave:k,reconnectRadius:J,onReconnect:se,onReconnectStart:U,onReconnectEnd:re,markerEnd:ue,markerStart:de,rfId:le,ariaLabel:ve,isFocusable:ge,isReconnectable:Ee,pathOptions:Be,interactionWidth:De,disableKeyboardA11y:Se})=>{const Oe=T.useRef(null),[Et,tt]=T.useState(!1),[$t,nt]=T.useState(!1),rt=hn(),on=T.useMemo(()=>`url('#${Wl(de,le)}')`,[de,le]),ke=T.useMemo(()=>`url('#${Wl(ue,le)}')`,[ue,le]);if(V)return null;const we=ht=>{const{edges:Pt,addSelectedEdges:pn,unselectNodesAndEdges:an,multiSelectionActive:bt}=rt.getState(),At=Pt.find(en=>en.id===r);At&&(B&&(rt.setState({nodesSelectionActive:!1}),At.selected&&bt?(an({nodes:[],edges:[At]}),Oe.current?.blur()):pn([r])),l&&l(ht,At))},qt=Ps(r,rt.getState,c),Ot=Ps(r,rt.getState,Z),ft=Ps(r,rt.getState,R),Bt=Ps(r,rt.getState,G),St=Ps(r,rt.getState,k),sn=(ht,Pt)=>{if(ht.button!==0)return;const{edges:pn,isValidConnection:an}=rt.getState(),bt=Pt?x:_,At=(Pt?te:Y)||null,en=Pt?"target":"source",Qn=an||H3,un=Pt,xn=pn.find(Q=>Q.id===r);nt(!0),U?.(ht,xn,en);const mn=Q=>{nt(!1),re?.(Q,xn,en)};C0({event:ht,handleId:At,nodeId:bt,onConnect:Q=>se?.(xn,Q),isTarget:un,getState:rt.getState,setState:rt.setState,isValidConnection:Qn,edgeUpdaterType:en,onReconnectEnd:mn})},Qt=ht=>sn(ht,!0),wn=ht=>sn(ht,!1),Mt=()=>tt(!0),mt=()=>tt(!1),Ut=!B&&!l,_t=ht=>{if(!Se&&f0.includes(ht.key)&&B){const{unselectNodesAndEdges:Pt,addSelectedEdges:pn,edges:an}=rt.getState();ht.key==="Escape"?(Oe.current?.blur(),Pt({edges:[an.find(At=>At.id===r)]})):pn([r])}};return W.createElement("g",{className:In(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:d,animated:f,inactive:Ut,updating:Et}]),onClick:we,onDoubleClick:qt,onContextMenu:Ot,onMouseEnter:ft,onMouseMove:Bt,onMouseLeave:St,onKeyDown:ge?_t:void 0,tabIndex:ge?0:void 0,role:ge?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":ve===null?void 0:ve||`Edge from ${_} to ${x}`,"aria-describedby":ge?`${O0}-${le}`:void 0,ref:Oe},!$t&&W.createElement(e,{id:r,source:_,target:x,selected:d,animated:f,label:h,labelStyle:g,labelShowBg:m,labelBgStyle:D,labelBgPadding:C,labelBgBorderRadius:y,data:u,style:w,sourceX:N,sourceY:F,targetX:j,targetY:H,sourcePosition:K,targetPosition:ee,sourceHandleId:Y,targetHandleId:te,markerStart:on,markerEnd:ke,pathOptions:Be,interactionWidth:De}),Ee&&W.createElement(W.Fragment,null,(Ee==="source"||Ee===!0)&&W.createElement(Ap,{position:K,centerX:N,centerY:F,radius:J,onMouseDown:Qt,onMouseEnter:Mt,onMouseOut:mt,type:"source"}),(Ee==="target"||Ee===!0)&&W.createElement(Ap,{position:ee,centerX:j,centerY:H,radius:J,onMouseDown:wn,onMouseEnter:Mt,onMouseOut:mt,type:"target"})))};return n.displayName="EdgeWrapper",T.memo(n)};function G3(e){const n={default:Jo(e.default||Tu),straight:Jo(e.bezier||Sd),step:Jo(e.step||Ed),smoothstep:Jo(e.step||Lu),simplebezier:Jo(e.simplebezier||Cd)},r={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,u)=>(s[u]=Jo(e[u]||Tu),s),r);return{...n,...o}}function Fp(e,n,r=null){const o=(r?.x||0)+n.x,s=(r?.y||0)+n.y,u=r?.width||n.width,l=r?.height||n.height;switch(e){case Ce.Top:return{x:o+u/2,y:s};case Ce.Right:return{x:o+u,y:s+l/2};case Ce.Bottom:return{x:o+u/2,y:s+l};case Ce.Left:return{x:o,y:s+l/2}}}function Np(e,n){return e?e.length===1||!n?e[0]:n&&e.find(r=>r.id===n)||null:null}const V3=(e,n,r,o,s,u)=>{const l=Fp(r,e,n),c=Fp(u,o,s);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y}};function U3({sourcePos:e,targetPos:n,sourceWidth:r,sourceHeight:o,targetWidth:s,targetHeight:u,width:l,height:c,transform:d}){const f={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x+r,n.x+s),y2:Math.max(e.y+o,n.y+u)};f.x===f.x2&&(f.x2+=1),f.y===f.y2&&(f.y2+=1);const h=xd({x:(0-d[0])/d[2],y:(0-d[1])/d[2],width:l/d[2],height:c/d[2]}),g=Math.max(0,Math.min(h.x2,f.x2)-Math.max(h.x,f.x)),m=Math.max(0,Math.min(h.y2,f.y2)-Math.max(h.y,f.y));return Math.ceil(g*m)>0}function Tp(e){const n=e?.[jt]?.handleBounds||null,r=n&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},n,!!r]}const W3=[{level:0,isMaxLevel:!0,edges:[]}];function X3(e,n,r=!1){let o=-1;const s=e.reduce((l,c)=>{const d=dr(c.zIndex);let f=d?c.zIndex:0;if(r){const h=n.get(c.target),g=n.get(c.source),m=c.selected||h?.selected||g?.selected,D=Math.max(g?.[jt]?.z||0,h?.[jt]?.z||0,1e3);f=(d?c.zIndex:0)+(m?D:0)}return l[f]?l[f].push(c):l[f]=[c],o=f>o?f:o,l},{}),u=Object.entries(s).map(([l,c])=>{const d=+l;return{edges:c,level:d,isMaxLevel:d===o}});return u.length===0?W3:u}function Y3(e,n,r){const o=It(T.useCallback(s=>e?s.edges.filter(u=>{const l=n.get(u.source),c=n.get(u.target);return l?.width&&l?.height&&c?.width&&c?.height&&U3({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,n]));return X3(o,n,r)}const Z3=({color:e="none",strokeWidth:n=1})=>W.createElement("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),J3=({color:e="none",strokeWidth:n=1})=>W.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ip={[ra.Arrow]:Z3,[ra.ArrowClosed]:J3};function K3(e){const n=hn();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(Ip,e)?Ip[e]:(n.getState().onError?.("009",li.error009(e)),null),[e])}const Q3=({id:e,type:n,color:r,width:o=12.5,height:s=12.5,markerUnits:u="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const d=K3(n);return d?W.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:c,refX:"0",refY:"0"},W.createElement(d,{color:r,strokeWidth:l})):null},e6=({defaultColor:e,rfId:n})=>r=>{const o=[];return r.edges.reduce((s,u)=>([u.markerStart,u.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const c=Wl(l,n);o.includes(c)||(s.push({id:c,color:l.color||e,...l}),o.push(c))}}),s),[]).sort((s,u)=>s.id.localeCompare(u.id))},U0=({defaultColor:e,rfId:n})=>{const r=It(T.useCallback(e6({defaultColor:e,rfId:n}),[e,n]),(o,s)=>!(o.length!==s.length||o.some((u,l)=>u.id!==s[l].id)));return W.createElement("defs",null,r.map(o=>W.createElement(Q3,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};U0.displayName="MarkerDefinitions";var t6=T.memo(U0);const n6=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),W0=({defaultMarkerColor:e,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:o,edgeTypes:s,noPanClassName:u,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:d,onEdgeMouseLeave:f,onEdgeClick:h,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:D,onReconnectEnd:C,reconnectRadius:y,children:w,disableKeyboardA11y:_})=>{const{edgesFocusable:x,edgesUpdatable:N,elementsSelectable:F,width:j,height:H,connectionMode:K,nodeInternals:ee,onError:B}=It(n6,bn),V=Y3(n,ee,r);return j?W.createElement(W.Fragment,null,V.map(({level:Y,edges:te,isMaxLevel:Z})=>W.createElement("svg",{key:Y,style:{zIndex:Y},width:j,height:H,className:"react-flow__edges react-flow__container"},Z&&W.createElement(t6,{defaultColor:e,rfId:o}),W.createElement("g",null,te.map(R=>{const[G,k,J]=Tp(ee.get(R.source)),[se,U,re]=Tp(ee.get(R.target));if(!J||!re)return null;let ue=R.type||"default";s[ue]||(B?.("011",li.error011(ue)),ue="default");const de=s[ue]||s.default,le=K===bo.Strict?U.target:(U.target??[]).concat(U.source??[]),ve=Np(k.source,R.sourceHandle),ge=Np(le,R.targetHandle),Ee=ve?.position||Ce.Bottom,Be=ge?.position||Ce.Top,De=!!(R.focusable||x&&typeof R.focusable>"u"),Se=R.reconnectable||R.updatable,Oe=typeof m<"u"&&(Se||N&&typeof Se>"u");if(!ve||!ge)return B?.("008",li.error008(ve,R)),null;const{sourceX:Et,sourceY:tt,targetX:$t,targetY:nt}=V3(G,ve,Ee,se,ge,Be);return W.createElement(de,{key:R.id,id:R.id,className:In([R.className,u]),type:ue,data:R.data,selected:!!R.selected,animated:!!R.animated,hidden:!!R.hidden,label:R.label,labelStyle:R.labelStyle,labelShowBg:R.labelShowBg,labelBgStyle:R.labelBgStyle,labelBgPadding:R.labelBgPadding,labelBgBorderRadius:R.labelBgBorderRadius,style:R.style,source:R.source,target:R.target,sourceHandleId:R.sourceHandle,targetHandleId:R.targetHandle,markerEnd:R.markerEnd,markerStart:R.markerStart,sourceX:Et,sourceY:tt,targetX:$t,targetY:nt,sourcePosition:Ee,targetPosition:Be,elementsSelectable:F,onContextMenu:l,onMouseEnter:c,onMouseMove:d,onMouseLeave:f,onClick:h,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:D,onReconnectEnd:C,reconnectRadius:y,rfId:o,ariaLabel:R.ariaLabel,isFocusable:De,isReconnectable:Oe,pathOptions:"pathOptions"in R?R.pathOptions:void 0,interactionWidth:R.interactionWidth,disableKeyboardA11y:_})})))),w):null};W0.displayName="EdgeRenderer";var r6=T.memo(W0);const i6=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function o6({children:e}){const n=It(i6);return W.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},e)}function s6(e){const n=Rd(),r=T.useRef(!1);T.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const a6={[Ce.Left]:Ce.Right,[Ce.Right]:Ce.Left,[Ce.Top]:Ce.Bottom,[Ce.Bottom]:Ce.Top},X0=({nodeId:e,handleType:n,style:r,type:o=Ii.Bezier,CustomComponent:s,connectionStatus:u})=>{const{fromNode:l,handleId:c,toX:d,toY:f,connectionMode:h}=It(T.useCallback(H=>({fromNode:H.nodeInternals.get(e),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2],connectionMode:H.connectionMode}),[e]),bn),g=l?.[jt]?.handleBounds;let m=g?.[n];if(h===bo.Loose&&(m=m||g?.[n==="source"?"target":"source"]),!l||!m)return null;const D=c?m.find(H=>H.id===c):m[0],C=D?D.x+D.width/2:(l.width??0)/2,y=D?D.y+D.height/2:l.height??0,w=(l.positionAbsolute?.x??0)+C,_=(l.positionAbsolute?.y??0)+y,x=D?.position,N=x?a6[x]:null;if(!x||!N)return null;if(s)return W.createElement(s,{connectionLineType:o,connectionLineStyle:r,fromNode:l,fromHandle:D,fromX:w,fromY:_,toX:d,toY:f,fromPosition:x,toPosition:N,connectionStatus:u});let F="";const j={sourceX:w,sourceY:_,sourcePosition:x,targetX:d,targetY:f,targetPosition:N};return o===Ii.Bezier?[F]=Ad(j):o===Ii.Step?[F]=Ul({...j,borderRadius:0}):o===Ii.SmoothStep?[F]=Ul(j):o===Ii.SimpleBezier?[F]=m0(j):F=`M${w},${_} ${d},${f}`,W.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:r})};X0.displayName="ConnectionLine";const u6=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function c6({containerStyle:e,style:n,type:r,component:o}){const{nodeId:s,handleType:u,nodesConnectable:l,width:c,height:d,connectionStatus:f}=It(u6,bn);return!(s&&u&&c&&l)?null:W.createElement("svg",{style:e,width:c,height:d,className:"react-flow__edges react-flow__connectionline react-flow__container"},W.createElement("g",{className:In(["react-flow__connection",f])},W.createElement(X0,{nodeId:s,handleType:u,style:n,type:r,CustomComponent:o,connectionStatus:f})))}function Rp(e,n){return T.useRef(null),hn(),T.useMemo(()=>n(e),[e])}const Y0=({nodeTypes:e,edgeTypes:n,onMove:r,onMoveStart:o,onMoveEnd:s,onInit:u,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:d,onEdgeDoubleClick:f,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:D,onSelectionContextMenu:C,onSelectionStart:y,onSelectionEnd:w,connectionLineType:_,connectionLineStyle:x,connectionLineComponent:N,connectionLineContainerStyle:F,selectionKeyCode:j,selectionOnDrag:H,selectionMode:K,multiSelectionKeyCode:ee,panActivationKeyCode:B,zoomActivationKeyCode:V,deleteKeyCode:Y,onlyRenderVisibleElements:te,elementsSelectable:Z,selectNodesOnDrag:R,defaultViewport:G,translateExtent:k,minZoom:J,maxZoom:se,preventScrolling:U,defaultMarkerColor:re,zoomOnScroll:ue,zoomOnPinch:de,panOnScroll:le,panOnScrollSpeed:ve,panOnScrollMode:ge,zoomOnDoubleClick:Ee,panOnDrag:Be,onPaneClick:De,onPaneMouseEnter:Se,onPaneMouseMove:Oe,onPaneMouseLeave:Et,onPaneScroll:tt,onPaneContextMenu:$t,onEdgeContextMenu:nt,onEdgeMouseEnter:rt,onEdgeMouseMove:on,onEdgeMouseLeave:ke,onReconnect:we,onReconnectStart:qt,onReconnectEnd:Ot,reconnectRadius:ft,noDragClassName:Bt,noWheelClassName:St,noPanClassName:sn,elevateEdgesOnSelect:Qt,disableKeyboardA11y:wn,nodeOrigin:Mt,nodeExtent:mt,rfId:Ut})=>{const _t=Rp(e,z3),ht=Rp(n,G3);return s6(u),W.createElement(M3,{onPaneClick:De,onPaneMouseEnter:Se,onPaneMouseMove:Oe,onPaneMouseLeave:Et,onPaneContextMenu:$t,onPaneScroll:tt,deleteKeyCode:Y,selectionKeyCode:j,selectionOnDrag:H,selectionMode:K,onSelectionStart:y,onSelectionEnd:w,multiSelectionKeyCode:ee,panActivationKeyCode:B,zoomActivationKeyCode:V,elementsSelectable:Z,onMove:r,onMoveStart:o,onMoveEnd:s,zoomOnScroll:ue,zoomOnPinch:de,zoomOnDoubleClick:Ee,panOnScroll:le,panOnScrollSpeed:ve,panOnScrollMode:ge,panOnDrag:Be,defaultViewport:G,translateExtent:k,minZoom:J,maxZoom:se,onSelectionContextMenu:C,preventScrolling:U,noDragClassName:Bt,noWheelClassName:St,noPanClassName:sn,disableKeyboardA11y:wn},W.createElement(o6,null,W.createElement(r6,{edgeTypes:ht,onEdgeClick:c,onEdgeDoubleClick:f,onlyRenderVisibleElements:te,onEdgeContextMenu:nt,onEdgeMouseEnter:rt,onEdgeMouseMove:on,onEdgeMouseLeave:ke,onReconnect:we,onReconnectStart:qt,onReconnectEnd:Ot,reconnectRadius:ft,defaultMarkerColor:re,noPanClassName:sn,elevateEdgesOnSelect:!!Qt,disableKeyboardA11y:wn,rfId:Ut},W.createElement(c6,{style:x,type:_,component:N,containerStyle:F})),W.createElement("div",{className:"react-flow__edgelabel-renderer"}),W.createElement($3,{nodeTypes:_t,onNodeClick:l,onNodeDoubleClick:d,onNodeMouseEnter:h,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:D,selectNodesOnDrag:R,onlyRenderVisibleElements:te,noPanClassName:sn,noDragClassName:Bt,disableKeyboardA11y:wn,nodeOrigin:Mt,nodeExtent:mt,rfId:Ut})))};Y0.displayName="GraphView";var l6=T.memo(Y0);const Jl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Fi={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Jl,nodeExtent:Jl,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:bo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:zA,isValidConnection:void 0},d6=()=>ZC((e,n)=>({...Fi,setNodes:r=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:u}=n();e({nodeInternals:nl(r,o,s,u)})},getNodes:()=>Array.from(n().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:o={}}=n();e({edges:r.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(r,o)=>{const s=typeof r<"u",u=typeof o<"u",l=s?nl(r,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;e({nodeInternals:l,edges:u?o:[],hasDefaultNodes:s,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:u,fitViewOnInitDone:l,fitViewOnInitOptions:c,domNode:d,nodeOrigin:f}=n(),h=d?.querySelector(".react-flow__viewport");if(!h)return;const g=window.getComputedStyle(h),{m22:m}=new window.DOMMatrixReadOnly(g.transform),D=r.reduce((y,w)=>{const _=s.get(w.id);if(_?.hidden)s.set(_.id,{..._,[jt]:{..._[jt],handleBounds:void 0}});else if(_){const x=bd(w.nodeElement);!!(x.width&&x.height&&(_.width!==x.width||_.height!==x.height||w.forceUpdate))&&(s.set(_.id,{..._,[jt]:{..._[jt],handleBounds:{source:Ep(".source",w.nodeElement,m,f),target:Ep(".target",w.nodeElement,m,f)}},...x}),y.push({id:_.id,type:"dimensions",dimensions:x}))}return y},[]);M0(s,f);const C=l||u&&!l&&P0(n,{initial:!0,...c});e({nodeInternals:new Map(s),fitViewOnInitDone:C}),D?.length>0&&o?.(D)},updateNodePositions:(r,o=!0,s=!1)=>{const{triggerNodeChanges:u}=n(),l=r.map(c=>{const d={id:c.id,type:"position",dragging:s};return o&&(d.positionAbsolute=c.positionAbsolute,d.position=c.position),d});u(l)},triggerNodeChanges:r=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:u,nodeOrigin:l,getNodes:c,elevateNodesOnSelect:d}=n();if(r?.length){if(u){const f=j0(r,c()),h=nl(f,s,l,d);e({nodeInternals:h})}o?.(r)}},addSelectedNodes:r=>{const{multiSelectionActive:o,edges:s,getNodes:u}=n();let l,c=null;o?l=r.map(d=>Ti(d,!0)):(l=es(u(),r),c=es(s,[])),ru({changedNodes:l,changedEdges:c,get:n,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:o,edges:s,getNodes:u}=n();let l,c=null;o?l=r.map(d=>Ti(d,!0)):(l=es(s,r),c=es(u(),[])),ru({changedNodes:c,changedEdges:l,get:n,set:e})},unselectNodesAndEdges:({nodes:r,edges:o}={})=>{const{edges:s,getNodes:u}=n(),l=r||u(),c=o||s,d=l.map(h=>(h.selected=!1,Ti(h.id,!1))),f=c.map(h=>Ti(h.id,!1));ru({changedNodes:d,changedEdges:f,get:n,set:e})},setMinZoom:r=>{const{d3Zoom:o,maxZoom:s}=n();o?.scaleExtent([r,s]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:o,minZoom:s}=n();o?.scaleExtent([s,r]),e({maxZoom:r})},setTranslateExtent:r=>{n().d3Zoom?.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:o}=n(),u=o().filter(c=>c.selected).map(c=>Ti(c.id,!1)),l=r.filter(c=>c.selected).map(c=>Ti(c.id,!1));ru({changedNodes:u,changedEdges:l,get:n,set:e})},setNodeExtent:r=>{const{nodeInternals:o}=n();o.forEach(s=>{s.positionAbsolute=wd(s.position,r)}),e({nodeExtent:r,nodeInternals:new Map(o)})},panBy:r=>{const{transform:o,width:s,height:u,d3Zoom:l,d3Selection:c,translateExtent:d}=n();if(!l||!c||!r.x&&!r.y)return!1;const f=Oi.translate(o[0]+r.x,o[1]+r.y).scale(o[2]),h=[[0,0],[s,u]],g=l?.constrain()(f,h,d);return l.transform(c,g),o[0]!==g.x||o[1]!==g.y||o[2]!==g.k},cancelConnection:()=>e({connectionNodeId:Fi.connectionNodeId,connectionHandleId:Fi.connectionHandleId,connectionHandleType:Fi.connectionHandleType,connectionStatus:Fi.connectionStatus,connectionStartHandle:Fi.connectionStartHandle,connectionEndHandle:Fi.connectionEndHandle}),reset:()=>e({...Fi})}),Object.is),Bd=({children:e})=>{const n=T.useRef(null);return n.current||(n.current=d6()),W.createElement(NA,{value:n.current},e)};Bd.displayName="ReactFlowProvider";const Z0=({children:e})=>T.useContext(qu)?W.createElement(W.Fragment,null,e):W.createElement(Bd,null,e);Z0.displayName="ReactFlowWrapper";const f6={input:F0,default:Yl,output:T0,group:Id},h6={default:Tu,straight:Sd,step:Ed,smoothstep:Lu,simplebezier:Cd},p6=[0,0],g6=[15,15],m6={x:0,y:0,zoom:1},y6={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},J0=T.forwardRef(({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,className:s,nodeTypes:u=f6,edgeTypes:l=h6,onNodeClick:c,onEdgeClick:d,onInit:f,onMove:h,onMoveStart:g,onMoveEnd:m,onConnect:D,onConnectStart:C,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:_,onNodeMouseEnter:x,onNodeMouseMove:N,onNodeMouseLeave:F,onNodeContextMenu:j,onNodeDoubleClick:H,onNodeDragStart:K,onNodeDrag:ee,onNodeDragStop:B,onNodesDelete:V,onEdgesDelete:Y,onSelectionChange:te,onSelectionDragStart:Z,onSelectionDrag:R,onSelectionDragStop:G,onSelectionContextMenu:k,onSelectionStart:J,onSelectionEnd:se,connectionMode:U=bo.Strict,connectionLineType:re=Ii.Bezier,connectionLineStyle:ue,connectionLineComponent:de,connectionLineContainerStyle:le,deleteKeyCode:ve="Backspace",selectionKeyCode:ge="Shift",selectionOnDrag:Ee=!1,selectionMode:Be=ds.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Se=Nu()?"Meta":"Control",zoomActivationKeyCode:Oe=Nu()?"Meta":"Control",snapToGrid:Et=!1,snapGrid:tt=g6,onlyRenderVisibleElements:$t=!1,selectNodesOnDrag:nt=!0,nodesDraggable:rt,nodesConnectable:on,nodesFocusable:ke,nodeOrigin:we=p6,edgesFocusable:qt,edgesUpdatable:Ot,elementsSelectable:ft,defaultViewport:Bt=m6,minZoom:St=.5,maxZoom:sn=2,translateExtent:Qt=Jl,preventScrolling:wn=!0,nodeExtent:Mt,defaultMarkerColor:mt="#b1b1b7",zoomOnScroll:Ut=!0,zoomOnPinch:_t=!0,panOnScroll:ht=!1,panOnScrollSpeed:Pt=.5,panOnScrollMode:pn=mo.Free,zoomOnDoubleClick:an=!0,panOnDrag:bt=!0,onPaneClick:At,onPaneMouseEnter:en,onPaneMouseMove:Qn,onPaneMouseLeave:un,onPaneScroll:xn,onPaneContextMenu:mn,children:L,onEdgeContextMenu:Q,onEdgeDoubleClick:pe,onEdgeMouseEnter:Fe,onEdgeMouseMove:pt,onEdgeMouseLeave:Je,onEdgeUpdate:Ft,onEdgeUpdateStart:wt,onEdgeUpdateEnd:Wt,onReconnect:Rn,onReconnectStart:Lt,onReconnectEnd:Xt,reconnectRadius:On=10,edgeUpdaterRadius:Bn=10,onNodesChange:Hn,onEdgesChange:ki,noDragClassName:$i="nodrag",noWheelClassName:qi="nowheel",noPanClassName:hi="nopan",fitView:er=!1,fitViewOptions:yn,connectOnClick:Li=!0,attributionPosition:Hi,proOptions:Gi,defaultEdgeOptions:Vi,elevateNodesOnSelect:Ui=!0,elevateEdgesOnSelect:Cn=!1,disableKeyboardA11y:fr=!1,autoPanOnConnect:Fr=!0,autoPanOnNodeDrag:tr=!0,connectionRadius:Wi=20,isValidConnection:Nr,onError:hr,style:pi,id:kr,nodeDragThreshold:En,...gi},Xi)=>{const $r=kr||"1";return W.createElement("div",{...gi,style:{...pi,...y6},ref:Xi,className:In(["react-flow",s]),"data-testid":"rf__wrapper",id:kr},W.createElement(Z0,null,W.createElement(l6,{onInit:f,onMove:h,onMoveStart:g,onMoveEnd:m,onNodeClick:c,onEdgeClick:d,onNodeMouseEnter:x,onNodeMouseMove:N,onNodeMouseLeave:F,onNodeContextMenu:j,onNodeDoubleClick:H,nodeTypes:u,edgeTypes:l,connectionLineType:re,connectionLineStyle:ue,connectionLineComponent:de,connectionLineContainerStyle:le,selectionKeyCode:ge,selectionOnDrag:Ee,selectionMode:Be,deleteKeyCode:ve,multiSelectionKeyCode:Se,panActivationKeyCode:De,zoomActivationKeyCode:Oe,onlyRenderVisibleElements:$t,selectNodesOnDrag:nt,defaultViewport:Bt,translateExtent:Qt,minZoom:St,maxZoom:sn,preventScrolling:wn,zoomOnScroll:Ut,zoomOnPinch:_t,zoomOnDoubleClick:an,panOnScroll:ht,panOnScrollSpeed:Pt,panOnScrollMode:pn,panOnDrag:bt,onPaneClick:At,onPaneMouseEnter:en,onPaneMouseMove:Qn,onPaneMouseLeave:un,onPaneScroll:xn,onPaneContextMenu:mn,onSelectionContextMenu:k,onSelectionStart:J,onSelectionEnd:se,onEdgeContextMenu:Q,onEdgeDoubleClick:pe,onEdgeMouseEnter:Fe,onEdgeMouseMove:pt,onEdgeMouseLeave:Je,onReconnect:Rn??Ft,onReconnectStart:Lt??wt,onReconnectEnd:Xt??Wt,reconnectRadius:On??Bn,defaultMarkerColor:mt,noDragClassName:$i,noWheelClassName:qi,noPanClassName:hi,elevateEdgesOnSelect:Cn,rfId:$r,disableKeyboardA11y:fr,nodeOrigin:we,nodeExtent:Mt}),W.createElement(a3,{nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:D,onConnectStart:C,onConnectEnd:y,onClickConnectStart:w,onClickConnectEnd:_,nodesDraggable:rt,nodesConnectable:on,nodesFocusable:ke,edgesFocusable:qt,edgesUpdatable:Ot,elementsSelectable:ft,elevateNodesOnSelect:Ui,minZoom:St,maxZoom:sn,nodeExtent:Mt,onNodesChange:Hn,onEdgesChange:ki,snapToGrid:Et,snapGrid:tt,connectionMode:U,translateExtent:Qt,connectOnClick:Li,defaultEdgeOptions:Vi,fitView:er,fitViewOptions:yn,onNodesDelete:V,onEdgesDelete:Y,onNodeDragStart:K,onNodeDrag:ee,onNodeDragStop:B,onSelectionDrag:R,onSelectionDragStart:Z,onSelectionDragStop:G,noPanClassName:hi,nodeOrigin:we,rfId:$r,autoPanOnConnect:Fr,autoPanOnNodeDrag:tr,onError:hr,connectionRadius:Wi,isValidConnection:Nr,nodeDragThreshold:En}),W.createElement(o3,{onSelectionChange:te}),L,W.createElement(IA,{proOptions:Gi,position:Hi}),W.createElement(f3,{rfId:$r,disableKeyboardA11y:fr})))});J0.displayName="ReactFlow";const v6=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function D6({children:e}){const n=It(v6);return n?cg.createPortal(e,n):null}function K0(e){return n=>{const[r,o]=T.useState(n),s=T.useCallback(u=>o(l=>e(u,l)),[]);return[r,o,s]}}const _6=K0(j0),b6=K0(S3);function w6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},W.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function x6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},W.createElement("path",{d:"M0 0h32v4.2H0z"}))}function C6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},W.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function E6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function S6(){return W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},W.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ts=({children:e,className:n,...r})=>W.createElement("button",{type:"button",className:In(["react-flow__controls-button",n]),...r},e);ts.displayName="ControlButton";const A6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Q0=({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:u,onZoomOut:l,onFitView:c,onInteractiveChange:d,className:f,children:h,position:g="bottom-left"})=>{const m=hn(),[D,C]=T.useState(!1),{isInteractive:y,minZoomReached:w,maxZoomReached:_}=It(A6,bn),{zoomIn:x,zoomOut:N,fitView:F}=Rd();if(T.useEffect(()=>{C(!0)},[]),!D)return null;const j=()=>{x(),u?.()},H=()=>{N(),l?.()},K=()=>{F(s),c?.()},ee=()=>{m.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),d?.(!y)};return W.createElement(c0,{className:In(["react-flow__controls",f]),position:g,style:e,"data-testid":"rf__controls"},n&&W.createElement(W.Fragment,null,W.createElement(ts,{onClick:j,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:_},W.createElement(w6,null)),W.createElement(ts,{onClick:H,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:w},W.createElement(x6,null))),r&&W.createElement(ts,{className:"react-flow__controls-fitview",onClick:K,title:"fit view","aria-label":"fit view"},W.createElement(C6,null)),o&&W.createElement(ts,{className:"react-flow__controls-interactive",onClick:ee,title:"toggle interactivity","aria-label":"toggle interactivity"},y?W.createElement(S6,null):W.createElement(E6,null)),h)};Q0.displayName="Controls";var F6=T.memo(Q0),Er;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Er||(Er={}));function N6({color:e,dimensions:n,lineWidth:r}){return W.createElement("path",{stroke:e,strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function T6({color:e,radius:n}){return W.createElement("circle",{cx:n,cy:n,r:n,fill:e})}const I6={[Er.Dots]:"#91919a",[Er.Lines]:"#eee",[Er.Cross]:"#e2e2e2"},R6={[Er.Dots]:1,[Er.Lines]:1,[Er.Cross]:6},O6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function em({id:e,variant:n=Er.Dots,gap:r=20,size:o,lineWidth:s=1,offset:u=2,color:l,style:c,className:d}){const f=T.useRef(null),{transform:h,patternId:g}=It(O6,bn),m=l||I6[n],D=o||R6[n],C=n===Er.Dots,y=n===Er.Cross,w=Array.isArray(r)?r:[r,r],_=[w[0]*h[2]||1,w[1]*h[2]||1],x=D*h[2],N=y?[x,x]:_,F=C?[x/u,x/u]:[N[0]/u,N[1]/u];return W.createElement("svg",{className:In(["react-flow__background",d]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:f,"data-testid":"rf__background"},W.createElement("pattern",{id:g+e,x:h[0]%_[0],y:h[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},C?W.createElement(T6,{color:m,radius:x/u}):W.createElement(N6,{dimensions:N,color:m,lineWidth:s})),W.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}em.displayName="Background";var B6=T.memo(em);const qn=Symbol("private"),M6=e=>({id:e?.id,sourceId:e?.source,type:e?.type,targetId:e?.target,name:e?.label,sourceHandle:e.sourceHandle??void 0,targetHandle:e.targetHandle??void 0}),Kl=e=>({id:e.id,type:e.type,position:e.position,height:e[qn]?.dimensions?.height,width:e[qn]?.dimensions?.width,selected:e[qn]?.selected,data:{name:e.name,kind:e?.content?.kind}}),Gs=e=>e.map(Kl),Ql=e=>({id:e.id,source:e.sourceId,type:e?.type||"edge",target:e.targetId,label:e.name,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,markerEnd:{type:ra.ArrowClosed,width:20,height:20}}),ed=e=>e.filter(n=>n.sourceId&&n.targetId).map(Ql);var Dt=(e=>(e[e.Input=0]="Input",e[e.Output=1]="Output",e[e.InferredInput=2]="InferredInput",e[e.InferredOutput=3]="InferredOutput",e))(Dt||{});const hs=W.createContext({}),tm=e=>{const{children:n}=e,r=T.useMemo(()=>Wc()(()=>({id:void 0,simulate:void 0,decisionGraph:{nodes:[],edges:[]},hoveredEdgeId:null,openTabs:[],activeTab:"graph",name:"graph.json",disabled:!1,components:[],customNodes:[],activePanel:void 0,panels:[],compactMode:localStorage.getItem("jdm-compact-mode")==="true",nodeTypes:{},globalType:{}})),[]),o=T.useMemo(()=>Wc(()=>({onChange:void 0,onPanelsChange:void 0})),[]),s=T.useMemo(()=>Wc(()=>({nodesState:T.createRef(),edgesState:T.createRef(),graphClipboard:T.createRef(),reactFlowInstance:T.createRef()})),[]),u=T.useMemo(()=>({handleNodesChange:(c=[])=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState(),[,,h]=d.current;let g=!1;h?.(c);const m=Tt(f,D=>{c.forEach(C=>qe(C).with({type:"position"},y=>{const w=D.nodes.find(_=>_.id===y.id);w&&y.position&&!Jn(w.position,y.position)&&(g=!0,w.position=y.position)}).with({type:"dimensions"},y=>{const w=D.nodes.find(_=>_.id===y.id);w&&!Jn(w[qn]?.dimensions,y.dimensions)&&(g=!0,w[qn]??={},w[qn].dimensions={height:y.dimensions?.height,width:y.dimensions?.width})}).with({type:"select"},y=>{const w=D.nodes.find(_=>_.id===y.id);w&&w[qn]?.selected!==y.selected&&(g=!0,w[qn]??={},w[qn].selected=y.selected)}).otherwise(()=>{}))});g&&(r.setState({decisionGraph:m}),o.getState().onChange?.(m))},handleEdgesChange:(c=[])=>{const{decisionGraph:d}=r.getState(),{edgesState:f}=s.getState();if(f?.current?.[2](c),c.find(h=>h.type==="remove")){const h=Tt(d,g=>{const m=(g.edges||[]).map(D=>c.find(y=>"id"in y&&y.id===D.id)?.type==="remove"?null:D).filter(D=>!!D);g.edges=m});r.setState({decisionGraph:h}),o.getState().onChange?.(h)}},setNodes:(c=[])=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1](Gs(c));const h=Tt(f,g=>{g.nodes=c});r.setState({decisionGraph:h}),o.getState().onChange?.(h)},addNodes:c=>{const{nodesState:d}=s.getState(),{decisionGraph:f}=r.getState();d.current[0]?.some(m=>m.type===et.Input)&&(c=c.filter(m=>m.type!==et.Input)),d.current[1]?.(m=>m.concat(Gs(c)));const g=Tt(f,m=>{m.nodes=(m.nodes||[]).concat(c)});r.setState({decisionGraph:g}),o.getState().onChange?.(g)},duplicateNodes:c=>{const{nodesState:d,edgesState:f}=s.getState(),{decisionGraph:h}=r.getState();let g=(h?.nodes||[]).filter(x=>c.includes(x.id));if(d.current[0]?.some(x=>x.type===et.Input)&&(g=g.filter(x=>x.type!==et.Input)),g.length===0)return;const D=g.reduce((x,N)=>({...x,[N.id]:crypto.randomUUID()}),{}),C=g.map(x=>({...x,id:D[x.id],position:{x:x.position?.x||0,y:(x.position?.y||0)+140}})),y=Object.keys(D),w=[];C.length>0&&(f.current?.[0]||[]).forEach(x=>{y.includes(x.source)&&y.includes(x.target)&&w.push({id:crypto.randomUUID(),type:x.type,sourceId:D[x.source],targetId:D[x.target],sourceHandle:x.sourceHandle??void 0,targetHandle:x.targetHandle??void 0})}),d.current[1]?.(x=>x.concat(C.map(Kl))),f.current[1]?.(x=>x.concat(w.map(Ql)));const _=Tt(h,x=>{x.nodes.push(...C),x.edges.push(...w)});r.setState({decisionGraph:_}),o.getState().onChange?.(_)},copyNodes:c=>{const{graphClipboard:d,nodesState:f}=s.getState();if(!d.current||!f.current)return;const[h]=f.current,g=h.filter(m=>c.includes(m.id));d.current.copyNodes(g)},pasteNodes:()=>{const{graphClipboard:c}=s.getState();c.current?.pasteNodes?.()},removeNodes:(c=[])=>{const{nodesState:d,edgesState:f}=s.getState(),{decisionGraph:h,nodeTypes:g}=r.getState();d.current[1]?.(C=>C.filter(y=>c.every(w=>y.id!==w))),f.current[1]?.(C=>C.filter(y=>c.every(w=>y.source!==w&&y.target!==w&&y.sourceHandle!==w&&y.targetHandle!==w)));const m=Tt(h,C=>{const y=C.nodes||[],w=C.edges||[];C.nodes=y.filter(_=>c.every(x=>_.id!==x)),C.edges=w.filter(_=>c.every(x=>_.sourceId!==x&&_.targetId!==x&&_.sourceHandle!==x&&_.targetHandle!==x))}),D=Tt(g,C=>{c.forEach(y=>{y in C&&delete C[y]})});r.setState({decisionGraph:m,nodeTypes:D}),o.getState().onChange?.(m)},addEdges:c=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d.current?.[1]?.(g=>g.concat(c.map(Ql)));const h=Tt(f,g=>{g.edges=(g.edges||[]).concat(c)});r.setState({decisionGraph:h}),o.getState().onChange?.(h)},setEdges:(c=[])=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(ed(c));const h=Tt(f,g=>{g.edges=c});r.setState({decisionGraph:h}),o.getState().onChange?.(h)},removeEdges:c=>{const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(g=>g.filter(m=>!c.find(D=>m.id===D)));const h=Tt(f,g=>{g.edges=g.edges.filter(m=>!c.find(D=>m.id===D))});r.setState({decisionGraph:h}),o.getState().onChange?.(h)},removeEdgeByHandleId:c=>{if(!c)return;const{edgesState:d}=s.getState(),{decisionGraph:f}=r.getState();d?.current?.[1]?.(g=>g.filter(m=>m.sourceHandle!==c));const h=Tt(f,g=>{g.edges=g.edges.filter(m=>m.sourceHandle!==c)});r.setState({decisionGraph:h}),o.getState().onChange?.(h)},updateNode:(c,d)=>{const{decisionGraph:f}=r.getState(),{nodesState:h}=s.getState(),[g,m]=h.current,D=Tt(f,_=>{const x=(_.nodes??[]).find(N=>N?.id===c);x&&d(x)}),C=D.nodes.find(_=>_.id===c);if(!C)return;const y=Kl(C),w=g.find(_=>_.id===c);Jn(y,w)||m(_=>_.map(x=>x.id===c?y:x)),r.setState({decisionGraph:D}),o.getState().onChange?.(D)},setDecisionGraph:(c,d={})=>{const{decisionGraph:f}=r.getState(),{edgesState:h,nodesState:g}=s.getState(),{skipOnChangeEvent:m=!1}=d,D=Tt(f,C=>{Object.assign(C,c)});h?.current?.[1](ed(D?.edges??[])),g?.current?.[1](Gs(D?.nodes??[])),r.setState({decisionGraph:D}),m||o.getState().onChange?.(D)},setHoveredEdgeId:c=>r.setState({hoveredEdgeId:c}),goToNode:c=>{if(r.getState().activeTab!=="graph")return;const{reactFlowInstance:d}=s.getState();if(!d.current)return;const f=d.current.getNode(c);f&&d.current.fitView({nodes:[f],duration:1e3,maxZoom:1.25})},openTab:c=>{const{openTabs:d}=r.getState(),f=d.find(h=>h===c);if(c==="graph")return r.setState({activeTab:c});f?r.setState({activeTab:f}):r.setState({openTabs:[...d,c],activeTab:c})},closeTab:(c,d)=>{const{openTabs:f,activeTab:h}=r.getState(),g=f?.findIndex(w=>w===c),m=f?.[g],D=qe(d).with(void 0,()=>f.filter(w=>w!==m)).with("close",()=>f.filter(w=>w!==m)).with("close-all",()=>[]).with("close-other",()=>f.filter(w=>w===m)).with("close-right",()=>f.slice(0,g+1)).with("close-left",()=>f.slice(g)).otherwise(()=>f),C={openTabs:D};D?.find(w=>w===h)||(C.activeTab=D?.[g-1]??"graph"),r.setState(C)},setActivePanel:c=>{const{panels:d}=r.getState(),f={activePanel:c===void 0?void 0:(d||[]).find(h=>h.id===c)?.id};o.getState()?.onPanelsChange?.(c),r.setState(f)},setCompactMode:c=>{const d={compactMode:c};localStorage.setItem("jdm-compact-mode",`${c}`),r.setState(d)},toggleCompactMode:()=>{const{compactMode:c}=r.getState(),d=!c,f={compactMode:d};localStorage.setItem("jdm-compact-mode",`${d}`),r.setState(f)},setNodeType:(c,d,f)=>{const{nodeTypes:h}=r.getState(),g=Tt(h,m=>{m[c]??={},m[c][d]=f});r.setState({nodeTypes:g})},removeNodeType:(c,d)=>{const{nodeTypes:f}=r.getState(),h=Tt(f,g=>{c in g&&(d?d in g[c]&&delete g[c][d]:delete g[c])});r.setState({nodeTypes:h})},triggerNodeSelect:(c,d)=>{const{decisionGraph:f}=r.getState(),{nodesState:h,edgesState:g}=s.getState(),[,m]=h.current,[,D]=g.current,C=Tt(f,y=>{const w=y.nodes.find(_=>_.id===c);w&&(d==="only"&&y.nodes.forEach(_=>{_[qn]&&(_[qn].selected=!1)}),w[qn]??={},w[qn].selected=qe(d).with("only",()=>!0).otherwise(()=>!w[qn]?.selected))});m(Gs(C.nodes)),d=="only"&&D(y=>y.map(w=>({...w,selected:!1}))),r.setState({decisionGraph:C}),o.getState().onChange?.(C)}}),[]),l=T.useMemo(()=>({stateStore:r,referenceStore:s,listenerStore:o,actions:u}),[r,s,o,u]);return E.jsx(hs.Provider,{value:l,children:n})};function st(e,n=Jn){return W.useContext(hs).stateStore(e,n)}function Md(e,n=Jn){return W.useContext(hs).listenerStore(e,n)}function P6(e,n=Jn){return W.useContext(hs).referenceStore(e,n)}function kt(){return W.useContext(hs).actions}function wo(){return W.useContext(hs)}const ps=e=>{const{diff:n,contentDiff:r}=st(o=>{const s=(o?.decisionGraph?.nodes??[]).find(u=>u.id===e);return{diff:s?._diff,contentDiff:s?.content?._diff}});return{diff:n,contentDiff:r}},z6=e=>{const{diff:n}=st(r=>({diff:(r?.decisionGraph?.edges??[]).find(s=>s.id===e)?._diff}));return{diff:n}};tm.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphProvider"};const j6=({id:e,defaultValue:n,value:r,name:o,disabled:s=!1,onChange:u,components:l,customNodes:c,defaultActivePanel:d,panels:f,simulate:h,viewConfigCta:g,viewConfig:m,onViewConfigCta:D,onPanelsChange:C,onReactFlowInit:y,onCodeExtension:w,onFunctionReady:_})=>{const x=T.useRef(!1),N=kt(),{stateStore:F,listenerStore:j}=wo(),{decisionGraph:H,openTabs:K,activeTab:ee}=st(({decisionGraph:V,openTabs:Y,activeTab:te})=>({decisionGraph:V,openTabs:Y,activeTab:te})),B=mw(V=>{u?.(V)},100);return T.useEffect(()=>{if(m?.enabled){const V=K.filter(Y=>!!m?.permissions?.[Y]);F.setState({openTabs:V,activeTab:m?.permissions?.[ee]?ee:"graph"})}},[m]),T.useEffect(()=>{F.setState({id:e,disabled:s,components:Array.isArray(l)?l:[],customNodes:Array.isArray(c)?c:[],panels:f,viewConfig:m,viewConfigCta:g})},[e,s,l,c,f,m,g]),T.useEffect(()=>{F.setState({name:o??"graph.json"})},[o]),T.useEffect(()=>{F.setState({simulate:h})},[h]),T.useEffect(()=>{j.setState({onReactFlowInit:y,onPanelsChange:C,onCodeExtension:w,onFunctionReady:_,onViewConfigCta:D})},[y,C,w,_,D]),T.useEffect(()=>{j.setState({onChange:B})},[B]),T.useEffect(()=>{x.current&&r!==void 0&&!Jn(r,H)&&N.setDecisionGraph(r)},[r]),T.useEffect(()=>{r!==void 0?N.setDecisionGraph(r):n!==void 0&&N.setDecisionGraph(n),F.setState({activePanel:d}),x.current=!0},[]),null},k6=()=>{let e=null;return{walk:function*(n){const r=$6(n);if(e&&Jn(r,e.digest)){yield*L6(n,e.iterator);return}const o=[];for(const s of q6(n))o.push({id:s.node.id,incomers:s.incomers.map(u=>u.id)}),yield s;e={digest:r,iterator:o}}}},$6=e=>{const n=e.nodes.map(o=>o.id),r=e.edges;return{nodes:n,edges:r}};function*q6(e){const n=Gs(e.nodes),r=ed(e.edges),o=e.nodes.find(c=>c.type==="inputNode"),s=n.find(c=>c.id===o?.id);if(!o||!s||H6(s,n,r))return;yield{node:o,incomers:[]};const u=new Set;u.add(o.id);const l=Iu(s,n,r);for(;l.length>0;){const c=l.pop();if(u.has(c.id))continue;const d=UA(c,n,r),f=d.filter(m=>!u.has(m.id));if(f.length>0){l.push(c,...f);continue}u.add(c.id);const h=e.nodes.find(m=>m.id===c.id);if(h){const m=e.nodes.filter(D=>d.some(C=>C.id===D.id));yield{node:h,incomers:m}}const g=Iu(c,n,r);l.push(...g)}}function*L6(e,n){for(const r of n){const o=e.nodes.find(u=>u.id===r.id);if(!o)continue;const s=e.nodes.filter(u=>r.incomers.includes(u.id));yield{node:o,incomers:s}}}const H6=(e,n,r)=>{const o=new Set,s=new Set,u=l=>{o.add(l.id),s.add(l.id);const c=Iu(l,n,r);for(const d of c)if(o.has(d.id)){if(s.has(d.id))return!0}else if(u(d))return!0;return s.delete(l.id),!1};return u(e)};var Vs={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var G6=Vs.exports,Op;function V6(){return Op||(Op=1,function(e,n){(function(){var r,o="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",f=500,h="__lodash_placeholder__",g=1,m=2,D=4,C=1,y=2,w=1,_=2,x=4,N=8,F=16,j=32,H=64,K=128,ee=256,B=512,V=30,Y="...",te=800,Z=16,R=1,G=2,k=3,J=1/0,se=9007199254740991,U=17976931348623157e292,re=NaN,ue=4294967295,de=ue-1,le=ue>>>1,ve=[["ary",K],["bind",w],["bindKey",_],["curry",N],["curryRight",F],["flip",B],["partial",j],["partialRight",H],["rearg",ee]],ge="[object Arguments]",Ee="[object Array]",Be="[object AsyncFunction]",De="[object Boolean]",Se="[object Date]",Oe="[object DOMException]",Et="[object Error]",tt="[object Function]",$t="[object GeneratorFunction]",nt="[object Map]",rt="[object Number]",on="[object Null]",ke="[object Object]",we="[object Promise]",qt="[object Proxy]",Ot="[object RegExp]",ft="[object Set]",Bt="[object String]",St="[object Symbol]",sn="[object Undefined]",Qt="[object WeakMap]",wn="[object WeakSet]",Mt="[object ArrayBuffer]",mt="[object DataView]",Ut="[object Float32Array]",_t="[object Float64Array]",ht="[object Int8Array]",Pt="[object Int16Array]",pn="[object Int32Array]",an="[object Uint8Array]",bt="[object Uint8ClampedArray]",At="[object Uint16Array]",en="[object Uint32Array]",Qn=/\b__p \+= '';/g,un=/\b(__p \+=) '' \+/g,xn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mn=/&(?:amp|lt|gt|quot|#39);/g,L=/[&<>"']/g,Q=RegExp(mn.source),pe=RegExp(L.source),Fe=/<%-([\s\S]+?)%>/g,pt=/<%([\s\S]+?)%>/g,Je=/<%=([\s\S]+?)%>/g,Ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wt=/^\w*$/,Wt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rn=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(Rn.source),Xt=/^\s+/,On=/\s/,Bn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hn=/\{\n\/\* \[wrapped with (.+)\] \*/,ki=/,? & /,$i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qi=/[()=,{}\[\]\/\s]/,hi=/\\(\\)?/g,er=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yn=/\w*$/,Li=/^[-+]0x[0-9a-f]+$/i,Hi=/^0b[01]+$/i,Gi=/^\[object .+?Constructor\]$/,Vi=/^0o[0-7]+$/i,Ui=/^(?:0|[1-9]\d*)$/,Cn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,fr=/($^)/,Fr=/['\n\r\u2028\u2029\\]/g,tr="\\ud800-\\udfff",Wi="\\u0300-\\u036f",Nr="\\ufe20-\\ufe2f",hr="\\u20d0-\\u20ff",pi=Wi+Nr+hr,kr="\\u2700-\\u27bf",En="a-z\\xdf-\\xf6\\xf8-\\xff",gi="\\xac\\xb1\\xd7\\xf7",Xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$r="\\u2000-\\u206f",gs=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",xo="A-Z\\xc0-\\xd6\\xd8-\\xde",Co="\\ufe0e\\ufe0f",qr=gi+Xi+$r+gs,Yi="['’]",Lr="["+tr+"]",Zi="["+qr+"]",Hr="["+pi+"]",Gr="\\d+",Ji="["+kr+"]",Eo="["+En+"]",So="[^"+tr+qr+Gr+kr+En+xo+"]",Vr="\\ud83c[\\udffb-\\udfff]",ms="(?:"+Hr+"|"+Vr+")",Ao="[^"+tr+"]",mi="(?:\\ud83c[\\udde6-\\uddff]){2}",pr="[\\ud800-\\udbff][\\udc00-\\udfff]",Sn="["+xo+"]",Fo="\\u200d",No="(?:"+Eo+"|"+So+")",Mn="(?:"+Sn+"|"+So+")",To="(?:"+Yi+"(?:d|ll|m|re|s|t|ve))?",Io="(?:"+Yi+"(?:D|LL|M|RE|S|T|VE))?",Ro=ms+"?",Ur="["+Co+"]?",Ki="(?:"+Fo+"(?:"+[Ao,mi,pr].join("|")+")"+Ur+Ro+")*",Gn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Oo=Ur+Ro+Ki,Wr="(?:"+[Ji,mi,pr].join("|")+")"+Oo,Qi="(?:"+[Ao+Hr+"?",Hr,mi,pr,Lr].join("|")+")",vi=RegExp(Yi,"g"),gr=RegExp(Hr,"g"),nr=RegExp(Vr+"(?="+Vr+")|"+Qi+Oo,"g"),Bo=RegExp([Sn+"?"+Eo+"+"+To+"(?="+[Zi,Sn,"$"].join("|")+")",Mn+"+"+Io+"(?="+[Zi,Sn+No,"$"].join("|")+")",Sn+"?"+No+"+"+To,Sn+"+"+Io,yi,Gn,Gr,Wr].join("|"),"g"),eo=RegExp("["+Fo+tr+pi+Co+"]"),Xr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,to=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ys=-1,ct={};ct[Ut]=ct[_t]=ct[ht]=ct[Pt]=ct[pn]=ct[an]=ct[bt]=ct[At]=ct[en]=!0,ct[ge]=ct[Ee]=ct[Mt]=ct[De]=ct[mt]=ct[Se]=ct[Et]=ct[tt]=ct[nt]=ct[rt]=ct[ke]=ct[Ot]=ct[ft]=ct[Bt]=ct[Qt]=!1;var it={};it[ge]=it[Ee]=it[Mt]=it[mt]=it[De]=it[Se]=it[Ut]=it[_t]=it[ht]=it[Pt]=it[pn]=it[nt]=it[rt]=it[ke]=it[Ot]=it[ft]=it[Bt]=it[St]=it[an]=it[bt]=it[At]=it[en]=!0,it[Et]=it[tt]=it[Qt]=!1;var O={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},I={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},he=parseFloat,me=parseInt,Ae=typeof _n=="object"&&_n&&_n.Object===Object&&_n,Me=typeof self=="object"&&self&&self.Object===Object&&self,_e=Ae||Me||Function("return this")(),Ne=n&&!n.nodeType&&n,Qe=Ne&&!0&&e&&!e.nodeType&&e,gt=Qe&&Qe.exports===Ne,vt=gt&&Ae.process,lt=function(){try{var $=Qe&&Qe.require&&Qe.require("util").types;return $||vt&&vt.binding&&vt.binding("util")}catch{}}(),tn=lt&&lt.isArrayBuffer,Pn=lt&&lt.isDate,rr=lt&&lt.isMap,Tr=lt&&lt.isRegExp,vs=lt&&lt.isSet,no=lt&&lt.isTypedArray;function cn($,ne,X){switch(X.length){case 0:return $.call(ne);case 1:return $.call(ne,X[0]);case 2:return $.call(ne,X[0],X[1]);case 3:return $.call(ne,X[0],X[1],X[2])}return $.apply(ne,X)}function Sm($,ne,X,be){for(var Pe=-1,ot=$==null?0:$.length;++Pe<ot;){var nn=$[Pe];ne(be,nn,X(nn),$)}return be}function ir($,ne){for(var X=-1,be=$==null?0:$.length;++X<be&&ne($[X],X,$)!==!1;);return $}function Am($,ne){for(var X=$==null?0:$.length;X--&&ne($[X],X,$)!==!1;);return $}function kd($,ne){for(var X=-1,be=$==null?0:$.length;++X<be;)if(!ne($[X],X,$))return!1;return!0}function Di($,ne){for(var X=-1,be=$==null?0:$.length,Pe=0,ot=[];++X<be;){var nn=$[X];ne(nn,X,$)&&(ot[Pe++]=nn)}return ot}function la($,ne){var X=$==null?0:$.length;return!!X&&Mo($,ne,0)>-1}function Gu($,ne,X){for(var be=-1,Pe=$==null?0:$.length;++be<Pe;)if(X(ne,$[be]))return!0;return!1}function Nt($,ne){for(var X=-1,be=$==null?0:$.length,Pe=Array(be);++X<be;)Pe[X]=ne($[X],X,$);return Pe}function _i($,ne){for(var X=-1,be=ne.length,Pe=$.length;++X<be;)$[Pe+X]=ne[X];return $}function Vu($,ne,X,be){var Pe=-1,ot=$==null?0:$.length;for(be&&ot&&(X=$[++Pe]);++Pe<ot;)X=ne(X,$[Pe],Pe,$);return X}function Fm($,ne,X,be){var Pe=$==null?0:$.length;for(be&&Pe&&(X=$[--Pe]);Pe--;)X=ne(X,$[Pe],Pe,$);return X}function Uu($,ne){for(var X=-1,be=$==null?0:$.length;++X<be;)if(ne($[X],X,$))return!0;return!1}var Nm=Wu("length");function Tm($){return $.split("")}function Im($){return $.match($i)||[]}function $d($,ne,X){var be;return X($,function(Pe,ot,nn){if(ne(Pe,ot,nn))return be=ot,!1}),be}function da($,ne,X,be){for(var Pe=$.length,ot=X+(be?1:-1);be?ot--:++ot<Pe;)if(ne($[ot],ot,$))return ot;return-1}function Mo($,ne,X){return ne===ne?Hm($,ne,X):da($,qd,X)}function Rm($,ne,X,be){for(var Pe=X-1,ot=$.length;++Pe<ot;)if(be($[Pe],ne))return Pe;return-1}function qd($){return $!==$}function Ld($,ne){var X=$==null?0:$.length;return X?Yu($,ne)/X:re}function Wu($){return function(ne){return ne==null?r:ne[$]}}function Xu($){return function(ne){return $==null?r:$[ne]}}function Hd($,ne,X,be,Pe){return Pe($,function(ot,nn,yt){X=be?(be=!1,ot):ne(X,ot,nn,yt)}),X}function Om($,ne){var X=$.length;for($.sort(ne);X--;)$[X]=$[X].value;return $}function Yu($,ne){for(var X,be=-1,Pe=$.length;++be<Pe;){var ot=ne($[be]);ot!==r&&(X=X===r?ot:X+ot)}return X}function Zu($,ne){for(var X=-1,be=Array($);++X<$;)be[X]=ne(X);return be}function Bm($,ne){return Nt(ne,function(X){return[X,$[X]]})}function Gd($){return $&&$.slice(0,Xd($)+1).replace(Xt,"")}function Vn($){return function(ne){return $(ne)}}function Ju($,ne){return Nt(ne,function(X){return $[X]})}function Ds($,ne){return $.has(ne)}function Vd($,ne){for(var X=-1,be=$.length;++X<be&&Mo(ne,$[X],0)>-1;);return X}function Ud($,ne){for(var X=$.length;X--&&Mo(ne,$[X],0)>-1;);return X}function Mm($,ne){for(var X=$.length,be=0;X--;)$[X]===ne&&++be;return be}var Pm=Xu(O),zm=Xu(v);function jm($){return"\\"+z[$]}function km($,ne){return $==null?r:$[ne]}function Po($){return eo.test($)}function $m($){return Xr.test($)}function qm($){for(var ne,X=[];!(ne=$.next()).done;)X.push(ne.value);return X}function Ku($){var ne=-1,X=Array($.size);return $.forEach(function(be,Pe){X[++ne]=[Pe,be]}),X}function Wd($,ne){return function(X){return $(ne(X))}}function bi($,ne){for(var X=-1,be=$.length,Pe=0,ot=[];++X<be;){var nn=$[X];(nn===ne||nn===h)&&($[X]=h,ot[Pe++]=X)}return ot}function fa($){var ne=-1,X=Array($.size);return $.forEach(function(be){X[++ne]=be}),X}function Lm($){var ne=-1,X=Array($.size);return $.forEach(function(be){X[++ne]=[be,be]}),X}function Hm($,ne,X){for(var be=X-1,Pe=$.length;++be<Pe;)if($[be]===ne)return be;return-1}function Gm($,ne,X){for(var be=X+1;be--;)if($[be]===ne)return be;return be}function zo($){return Po($)?Um($):Nm($)}function mr($){return Po($)?Wm($):Tm($)}function Xd($){for(var ne=$.length;ne--&&On.test($.charAt(ne)););return ne}var Vm=Xu(I);function Um($){for(var ne=nr.lastIndex=0;nr.test($);)++ne;return ne}function Wm($){return $.match(nr)||[]}function Xm($){return $.match(Bo)||[]}var Ym=function $(ne){ne=ne==null?_e:jo.defaults(_e.Object(),ne,jo.pick(_e,to));var X=ne.Array,be=ne.Date,Pe=ne.Error,ot=ne.Function,nn=ne.Math,yt=ne.Object,Qu=ne.RegExp,Zm=ne.String,or=ne.TypeError,ha=X.prototype,Jm=ot.prototype,ko=yt.prototype,pa=ne["__core-js_shared__"],ga=Jm.toString,dt=ko.hasOwnProperty,Km=0,Yd=function(){var t=/[^.]+$/.exec(pa&&pa.keys&&pa.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ma=ko.toString,Qm=ga.call(yt),ey=_e._,ty=Qu("^"+ga.call(dt).replace(Rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ya=gt?ne.Buffer:r,wi=ne.Symbol,va=ne.Uint8Array,Zd=ya?ya.allocUnsafe:r,Da=Wd(yt.getPrototypeOf,yt),Jd=yt.create,Kd=ko.propertyIsEnumerable,_a=ha.splice,Qd=wi?wi.isConcatSpreadable:r,_s=wi?wi.iterator:r,ro=wi?wi.toStringTag:r,ba=function(){try{var t=uo(yt,"defineProperty");return t({},"",{}),t}catch{}}(),ny=ne.clearTimeout!==_e.clearTimeout&&ne.clearTimeout,ry=be&&be.now!==_e.Date.now&&be.now,iy=ne.setTimeout!==_e.setTimeout&&ne.setTimeout,wa=nn.ceil,xa=nn.floor,ec=yt.getOwnPropertySymbols,oy=ya?ya.isBuffer:r,ef=ne.isFinite,sy=ha.join,ay=Wd(yt.keys,yt),rn=nn.max,vn=nn.min,uy=be.now,cy=ne.parseInt,tf=nn.random,ly=ha.reverse,tc=uo(ne,"DataView"),bs=uo(ne,"Map"),nc=uo(ne,"Promise"),$o=uo(ne,"Set"),ws=uo(ne,"WeakMap"),xs=uo(yt,"create"),Ca=ws&&new ws,qo={},dy=co(tc),fy=co(bs),hy=co(nc),py=co($o),gy=co(ws),Ea=wi?wi.prototype:r,Cs=Ea?Ea.valueOf:r,nf=Ea?Ea.toString:r;function S(t){if(zt(t)&&!ze(t)&&!(t instanceof Xe)){if(t instanceof sr)return t;if(dt.call(t,"__wrapped__"))return ih(t)}return new sr(t)}var Lo=function(){function t(){}return function(i){if(!Rt(i))return{};if(Jd)return Jd(i);t.prototype=i;var a=new t;return t.prototype=r,a}}();function Sa(){}function sr(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}S.templateSettings={escape:Fe,evaluate:pt,interpolate:Je,variable:"",imports:{_:S}},S.prototype=Sa.prototype,S.prototype.constructor=S,sr.prototype=Lo(Sa.prototype),sr.prototype.constructor=sr;function Xe(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ue,this.__views__=[]}function my(){var t=new Xe(this.__wrapped__);return t.__actions__=zn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=zn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=zn(this.__views__),t}function yy(){if(this.__filtered__){var t=new Xe(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function vy(){var t=this.__wrapped__.value(),i=this.__dir__,a=ze(t),p=i<0,b=a?t.length:0,A=T1(0,b,this.__views__),M=A.start,P=A.end,q=P-M,ie=p?P:M-1,oe=this.__iteratees__,ce=oe.length,ye=0,xe=vn(q,this.__takeCount__);if(!a||!p&&b==q&&xe==q)return Af(t,this.__actions__);var Ie=[];e:for(;q--&&ye<xe;){ie+=i;for(var Le=-1,Re=t[ie];++Le<ce;){var We=oe[Le],Ze=We.iteratee,Xn=We.type,Nn=Ze(Re);if(Xn==G)Re=Nn;else if(!Nn){if(Xn==R)continue e;break e}}Ie[ye++]=Re}return Ie}Xe.prototype=Lo(Sa.prototype),Xe.prototype.constructor=Xe;function io(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var p=t[i];this.set(p[0],p[1])}}function Dy(){this.__data__=xs?xs(null):{},this.size=0}function _y(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function by(t){var i=this.__data__;if(xs){var a=i[t];return a===d?r:a}return dt.call(i,t)?i[t]:r}function wy(t){var i=this.__data__;return xs?i[t]!==r:dt.call(i,t)}function xy(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=xs&&i===r?d:i,this}io.prototype.clear=Dy,io.prototype.delete=_y,io.prototype.get=by,io.prototype.has=wy,io.prototype.set=xy;function Yr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var p=t[i];this.set(p[0],p[1])}}function Cy(){this.__data__=[],this.size=0}function Ey(t){var i=this.__data__,a=Aa(i,t);if(a<0)return!1;var p=i.length-1;return a==p?i.pop():_a.call(i,a,1),--this.size,!0}function Sy(t){var i=this.__data__,a=Aa(i,t);return a<0?r:i[a][1]}function Ay(t){return Aa(this.__data__,t)>-1}function Fy(t,i){var a=this.__data__,p=Aa(a,t);return p<0?(++this.size,a.push([t,i])):a[p][1]=i,this}Yr.prototype.clear=Cy,Yr.prototype.delete=Ey,Yr.prototype.get=Sy,Yr.prototype.has=Ay,Yr.prototype.set=Fy;function Zr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var p=t[i];this.set(p[0],p[1])}}function Ny(){this.size=0,this.__data__={hash:new io,map:new(bs||Yr),string:new io}}function Ty(t){var i=ka(this,t).delete(t);return this.size-=i?1:0,i}function Iy(t){return ka(this,t).get(t)}function Ry(t){return ka(this,t).has(t)}function Oy(t,i){var a=ka(this,t),p=a.size;return a.set(t,i),this.size+=a.size==p?0:1,this}Zr.prototype.clear=Ny,Zr.prototype.delete=Ty,Zr.prototype.get=Iy,Zr.prototype.has=Ry,Zr.prototype.set=Oy;function oo(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new Zr;++i<a;)this.add(t[i])}function By(t){return this.__data__.set(t,d),this}function My(t){return this.__data__.has(t)}oo.prototype.add=oo.prototype.push=By,oo.prototype.has=My;function yr(t){var i=this.__data__=new Yr(t);this.size=i.size}function Py(){this.__data__=new Yr,this.size=0}function zy(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}function jy(t){return this.__data__.get(t)}function ky(t){return this.__data__.has(t)}function $y(t,i){var a=this.__data__;if(a instanceof Yr){var p=a.__data__;if(!bs||p.length<s-1)return p.push([t,i]),this.size=++a.size,this;a=this.__data__=new Zr(p)}return a.set(t,i),this.size=a.size,this}yr.prototype.clear=Py,yr.prototype.delete=zy,yr.prototype.get=jy,yr.prototype.has=ky,yr.prototype.set=$y;function rf(t,i){var a=ze(t),p=!a&&lo(t),b=!a&&!p&&Ai(t),A=!a&&!p&&!b&&Uo(t),M=a||p||b||A,P=M?Zu(t.length,Zm):[],q=P.length;for(var ie in t)(i||dt.call(t,ie))&&!(M&&(ie=="length"||b&&(ie=="offset"||ie=="parent")||A&&(ie=="buffer"||ie=="byteLength"||ie=="byteOffset")||ei(ie,q)))&&P.push(ie);return P}function of(t){var i=t.length;return i?t[hc(0,i-1)]:r}function qy(t,i){return $a(zn(t),so(i,0,t.length))}function Ly(t){return $a(zn(t))}function rc(t,i,a){(a!==r&&!vr(t[i],a)||a===r&&!(i in t))&&Jr(t,i,a)}function Es(t,i,a){var p=t[i];(!(dt.call(t,i)&&vr(p,a))||a===r&&!(i in t))&&Jr(t,i,a)}function Aa(t,i){for(var a=t.length;a--;)if(vr(t[a][0],i))return a;return-1}function Hy(t,i,a,p){return xi(t,function(b,A,M){i(p,b,a(b),M)}),p}function sf(t,i){return t&&Rr(i,ln(i),t)}function Gy(t,i){return t&&Rr(i,kn(i),t)}function Jr(t,i,a){i=="__proto__"&&ba?ba(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function ic(t,i){for(var a=-1,p=i.length,b=X(p),A=t==null;++a<p;)b[a]=A?r:jc(t,i[a]);return b}function so(t,i,a){return t===t&&(a!==r&&(t=t<=a?t:a),i!==r&&(t=t>=i?t:i)),t}function ar(t,i,a,p,b,A){var M,P=i&g,q=i&m,ie=i&D;if(a&&(M=b?a(t,p,b,A):a(t)),M!==r)return M;if(!Rt(t))return t;var oe=ze(t);if(oe){if(M=R1(t),!P)return zn(t,M)}else{var ce=Dn(t),ye=ce==tt||ce==$t;if(Ai(t))return Tf(t,P);if(ce==ke||ce==ge||ye&&!b){if(M=q||ye?{}:Yf(t),!P)return q?b1(t,Gy(M,t)):_1(t,sf(M,t))}else{if(!it[ce])return b?t:{};M=O1(t,ce,P)}}A||(A=new yr);var xe=A.get(t);if(xe)return xe;A.set(t,M),Ch(t)?t.forEach(function(Re){M.add(ar(Re,i,a,Re,t,A))}):wh(t)&&t.forEach(function(Re,We){M.set(We,ar(Re,i,a,We,t,A))});var Ie=ie?q?Cc:xc:q?kn:ln,Le=oe?r:Ie(t);return ir(Le||t,function(Re,We){Le&&(We=Re,Re=t[We]),Es(M,We,ar(Re,i,a,We,t,A))}),M}function Vy(t){var i=ln(t);return function(a){return af(a,t,i)}}function af(t,i,a){var p=a.length;if(t==null)return!p;for(t=yt(t);p--;){var b=a[p],A=i[b],M=t[b];if(M===r&&!(b in t)||!A(M))return!1}return!0}function uf(t,i,a){if(typeof t!="function")throw new or(l);return Rs(function(){t.apply(r,a)},i)}function Ss(t,i,a,p){var b=-1,A=la,M=!0,P=t.length,q=[],ie=i.length;if(!P)return q;a&&(i=Nt(i,Vn(a))),p?(A=Gu,M=!1):i.length>=s&&(A=Ds,M=!1,i=new oo(i));e:for(;++b<P;){var oe=t[b],ce=a==null?oe:a(oe);if(oe=p||oe!==0?oe:0,M&&ce===ce){for(var ye=ie;ye--;)if(i[ye]===ce)continue e;q.push(oe)}else A(i,ce,p)||q.push(oe)}return q}var xi=Mf(Ir),cf=Mf(sc,!0);function Uy(t,i){var a=!0;return xi(t,function(p,b,A){return a=!!i(p,b,A),a}),a}function Fa(t,i,a){for(var p=-1,b=t.length;++p<b;){var A=t[p],M=i(A);if(M!=null&&(P===r?M===M&&!Wn(M):a(M,P)))var P=M,q=A}return q}function Wy(t,i,a,p){var b=t.length;for(a=$e(a),a<0&&(a=-a>b?0:b+a),p=p===r||p>b?b:$e(p),p<0&&(p+=b),p=a>p?0:Sh(p);a<p;)t[a++]=i;return t}function lf(t,i){var a=[];return xi(t,function(p,b,A){i(p,b,A)&&a.push(p)}),a}function gn(t,i,a,p,b){var A=-1,M=t.length;for(a||(a=M1),b||(b=[]);++A<M;){var P=t[A];i>0&&a(P)?i>1?gn(P,i-1,a,p,b):_i(b,P):p||(b[b.length]=P)}return b}var oc=Pf(),df=Pf(!0);function Ir(t,i){return t&&oc(t,i,ln)}function sc(t,i){return t&&df(t,i,ln)}function Na(t,i){return Di(i,function(a){return ti(t[a])})}function ao(t,i){i=Ei(i,t);for(var a=0,p=i.length;t!=null&&a<p;)t=t[Or(i[a++])];return a&&a==p?t:r}function ff(t,i,a){var p=i(t);return ze(t)?p:_i(p,a(t))}function An(t){return t==null?t===r?sn:on:ro&&ro in yt(t)?N1(t):L1(t)}function ac(t,i){return t>i}function Xy(t,i){return t!=null&&dt.call(t,i)}function Yy(t,i){return t!=null&&i in yt(t)}function Zy(t,i,a){return t>=vn(i,a)&&t<rn(i,a)}function uc(t,i,a){for(var p=a?Gu:la,b=t[0].length,A=t.length,M=A,P=X(A),q=1/0,ie=[];M--;){var oe=t[M];M&&i&&(oe=Nt(oe,Vn(i))),q=vn(oe.length,q),P[M]=!a&&(i||b>=120&&oe.length>=120)?new oo(M&&oe):r}oe=t[0];var ce=-1,ye=P[0];e:for(;++ce<b&&ie.length<q;){var xe=oe[ce],Ie=i?i(xe):xe;if(xe=a||xe!==0?xe:0,!(ye?Ds(ye,Ie):p(ie,Ie,a))){for(M=A;--M;){var Le=P[M];if(!(Le?Ds(Le,Ie):p(t[M],Ie,a)))continue e}ye&&ye.push(Ie),ie.push(xe)}}return ie}function Jy(t,i,a,p){return Ir(t,function(b,A,M){i(p,a(b),A,M)}),p}function As(t,i,a){i=Ei(i,t),t=Qf(t,i);var p=t==null?t:t[Or(cr(i))];return p==null?r:cn(p,t,a)}function hf(t){return zt(t)&&An(t)==ge}function Ky(t){return zt(t)&&An(t)==Mt}function Qy(t){return zt(t)&&An(t)==Se}function Fs(t,i,a,p,b){return t===i?!0:t==null||i==null||!zt(t)&&!zt(i)?t!==t&&i!==i:e1(t,i,a,p,Fs,b)}function e1(t,i,a,p,b,A){var M=ze(t),P=ze(i),q=M?Ee:Dn(t),ie=P?Ee:Dn(i);q=q==ge?ke:q,ie=ie==ge?ke:ie;var oe=q==ke,ce=ie==ke,ye=q==ie;if(ye&&Ai(t)){if(!Ai(i))return!1;M=!0,oe=!1}if(ye&&!oe)return A||(A=new yr),M||Uo(t)?Uf(t,i,a,p,b,A):A1(t,i,q,a,p,b,A);if(!(a&C)){var xe=oe&&dt.call(t,"__wrapped__"),Ie=ce&&dt.call(i,"__wrapped__");if(xe||Ie){var Le=xe?t.value():t,Re=Ie?i.value():i;return A||(A=new yr),b(Le,Re,a,p,A)}}return ye?(A||(A=new yr),F1(t,i,a,p,b,A)):!1}function t1(t){return zt(t)&&Dn(t)==nt}function cc(t,i,a,p){var b=a.length,A=b,M=!p;if(t==null)return!A;for(t=yt(t);b--;){var P=a[b];if(M&&P[2]?P[1]!==t[P[0]]:!(P[0]in t))return!1}for(;++b<A;){P=a[b];var q=P[0],ie=t[q],oe=P[1];if(M&&P[2]){if(ie===r&&!(q in t))return!1}else{var ce=new yr;if(p)var ye=p(ie,oe,q,t,i,ce);if(!(ye===r?Fs(oe,ie,C|y,p,ce):ye))return!1}}return!0}function pf(t){if(!Rt(t)||z1(t))return!1;var i=ti(t)?ty:Gi;return i.test(co(t))}function n1(t){return zt(t)&&An(t)==Ot}function r1(t){return zt(t)&&Dn(t)==ft}function i1(t){return zt(t)&&Ua(t.length)&&!!ct[An(t)]}function gf(t){return typeof t=="function"?t:t==null?$n:typeof t=="object"?ze(t)?vf(t[0],t[1]):yf(t):zh(t)}function lc(t){if(!Is(t))return ay(t);var i=[];for(var a in yt(t))dt.call(t,a)&&a!="constructor"&&i.push(a);return i}function o1(t){if(!Rt(t))return q1(t);var i=Is(t),a=[];for(var p in t)p=="constructor"&&(i||!dt.call(t,p))||a.push(p);return a}function dc(t,i){return t<i}function mf(t,i){var a=-1,p=jn(t)?X(t.length):[];return xi(t,function(b,A,M){p[++a]=i(b,A,M)}),p}function yf(t){var i=Sc(t);return i.length==1&&i[0][2]?Jf(i[0][0],i[0][1]):function(a){return a===t||cc(a,t,i)}}function vf(t,i){return Fc(t)&&Zf(i)?Jf(Or(t),i):function(a){var p=jc(a,t);return p===r&&p===i?kc(a,t):Fs(i,p,C|y)}}function Ta(t,i,a,p,b){t!==i&&oc(i,function(A,M){if(b||(b=new yr),Rt(A))s1(t,i,M,a,Ta,p,b);else{var P=p?p(Tc(t,M),A,M+"",t,i,b):r;P===r&&(P=A),rc(t,M,P)}},kn)}function s1(t,i,a,p,b,A,M){var P=Tc(t,a),q=Tc(i,a),ie=M.get(q);if(ie){rc(t,a,ie);return}var oe=A?A(P,q,a+"",t,i,M):r,ce=oe===r;if(ce){var ye=ze(q),xe=!ye&&Ai(q),Ie=!ye&&!xe&&Uo(q);oe=q,ye||xe||Ie?ze(P)?oe=P:Ht(P)?oe=zn(P):xe?(ce=!1,oe=Tf(q,!0)):Ie?(ce=!1,oe=If(q,!0)):oe=[]:Os(q)||lo(q)?(oe=P,lo(P)?oe=Ah(P):(!Rt(P)||ti(P))&&(oe=Yf(q))):ce=!1}ce&&(M.set(q,oe),b(oe,q,p,A,M),M.delete(q)),rc(t,a,oe)}function Df(t,i){var a=t.length;if(a)return i+=i<0?a:0,ei(i,a)?t[i]:r}function _f(t,i,a){i.length?i=Nt(i,function(A){return ze(A)?function(M){return ao(M,A.length===1?A[0]:A)}:A}):i=[$n];var p=-1;i=Nt(i,Vn(Te()));var b=mf(t,function(A,M,P){var q=Nt(i,function(ie){return ie(A)});return{criteria:q,index:++p,value:A}});return Om(b,function(A,M){return D1(A,M,a)})}function a1(t,i){return bf(t,i,function(a,p){return kc(t,p)})}function bf(t,i,a){for(var p=-1,b=i.length,A={};++p<b;){var M=i[p],P=ao(t,M);a(P,M)&&Ns(A,Ei(M,t),P)}return A}function u1(t){return function(i){return ao(i,t)}}function fc(t,i,a,p){var b=p?Rm:Mo,A=-1,M=i.length,P=t;for(t===i&&(i=zn(i)),a&&(P=Nt(t,Vn(a)));++A<M;)for(var q=0,ie=i[A],oe=a?a(ie):ie;(q=b(P,oe,q,p))>-1;)P!==t&&_a.call(P,q,1),_a.call(t,q,1);return t}function wf(t,i){for(var a=t?i.length:0,p=a-1;a--;){var b=i[a];if(a==p||b!==A){var A=b;ei(b)?_a.call(t,b,1):mc(t,b)}}return t}function hc(t,i){return t+xa(tf()*(i-t+1))}function c1(t,i,a,p){for(var b=-1,A=rn(wa((i-t)/(a||1)),0),M=X(A);A--;)M[p?A:++b]=t,t+=a;return M}function pc(t,i){var a="";if(!t||i<1||i>se)return a;do i%2&&(a+=t),i=xa(i/2),i&&(t+=t);while(i);return a}function Ve(t,i){return Ic(Kf(t,i,$n),t+"")}function l1(t){return of(Wo(t))}function d1(t,i){var a=Wo(t);return $a(a,so(i,0,a.length))}function Ns(t,i,a,p){if(!Rt(t))return t;i=Ei(i,t);for(var b=-1,A=i.length,M=A-1,P=t;P!=null&&++b<A;){var q=Or(i[b]),ie=a;if(q==="__proto__"||q==="constructor"||q==="prototype")return t;if(b!=M){var oe=P[q];ie=p?p(oe,q,P):r,ie===r&&(ie=Rt(oe)?oe:ei(i[b+1])?[]:{})}Es(P,q,ie),P=P[q]}return t}var xf=Ca?function(t,i){return Ca.set(t,i),t}:$n,f1=ba?function(t,i){return ba(t,"toString",{configurable:!0,enumerable:!1,value:qc(i),writable:!0})}:$n;function h1(t){return $a(Wo(t))}function ur(t,i,a){var p=-1,b=t.length;i<0&&(i=-i>b?0:b+i),a=a>b?b:a,a<0&&(a+=b),b=i>a?0:a-i>>>0,i>>>=0;for(var A=X(b);++p<b;)A[p]=t[p+i];return A}function p1(t,i){var a;return xi(t,function(p,b,A){return a=i(p,b,A),!a}),!!a}function Ia(t,i,a){var p=0,b=t==null?p:t.length;if(typeof i=="number"&&i===i&&b<=le){for(;p<b;){var A=p+b>>>1,M=t[A];M!==null&&!Wn(M)&&(a?M<=i:M<i)?p=A+1:b=A}return b}return gc(t,i,$n,a)}function gc(t,i,a,p){var b=0,A=t==null?0:t.length;if(A===0)return 0;i=a(i);for(var M=i!==i,P=i===null,q=Wn(i),ie=i===r;b<A;){var oe=xa((b+A)/2),ce=a(t[oe]),ye=ce!==r,xe=ce===null,Ie=ce===ce,Le=Wn(ce);if(M)var Re=p||Ie;else ie?Re=Ie&&(p||ye):P?Re=Ie&&ye&&(p||!xe):q?Re=Ie&&ye&&!xe&&(p||!Le):xe||Le?Re=!1:Re=p?ce<=i:ce<i;Re?b=oe+1:A=oe}return vn(A,de)}function Cf(t,i){for(var a=-1,p=t.length,b=0,A=[];++a<p;){var M=t[a],P=i?i(M):M;if(!a||!vr(P,q)){var q=P;A[b++]=M===0?0:M}}return A}function Ef(t){return typeof t=="number"?t:Wn(t)?re:+t}function Un(t){if(typeof t=="string")return t;if(ze(t))return Nt(t,Un)+"";if(Wn(t))return nf?nf.call(t):"";var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}function Ci(t,i,a){var p=-1,b=la,A=t.length,M=!0,P=[],q=P;if(a)M=!1,b=Gu;else if(A>=s){var ie=i?null:E1(t);if(ie)return fa(ie);M=!1,b=Ds,q=new oo}else q=i?[]:P;e:for(;++p<A;){var oe=t[p],ce=i?i(oe):oe;if(oe=a||oe!==0?oe:0,M&&ce===ce){for(var ye=q.length;ye--;)if(q[ye]===ce)continue e;i&&q.push(ce),P.push(oe)}else b(q,ce,a)||(q!==P&&q.push(ce),P.push(oe))}return P}function mc(t,i){return i=Ei(i,t),t=Qf(t,i),t==null||delete t[Or(cr(i))]}function Sf(t,i,a,p){return Ns(t,i,a(ao(t,i)),p)}function Ra(t,i,a,p){for(var b=t.length,A=p?b:-1;(p?A--:++A<b)&&i(t[A],A,t););return a?ur(t,p?0:A,p?A+1:b):ur(t,p?A+1:0,p?b:A)}function Af(t,i){var a=t;return a instanceof Xe&&(a=a.value()),Vu(i,function(p,b){return b.func.apply(b.thisArg,_i([p],b.args))},a)}function yc(t,i,a){var p=t.length;if(p<2)return p?Ci(t[0]):[];for(var b=-1,A=X(p);++b<p;)for(var M=t[b],P=-1;++P<p;)P!=b&&(A[b]=Ss(A[b]||M,t[P],i,a));return Ci(gn(A,1),i,a)}function Ff(t,i,a){for(var p=-1,b=t.length,A=i.length,M={};++p<b;){var P=p<A?i[p]:r;a(M,t[p],P)}return M}function vc(t){return Ht(t)?t:[]}function Dc(t){return typeof t=="function"?t:$n}function Ei(t,i){return ze(t)?t:Fc(t,i)?[t]:rh(at(t))}var g1=Ve;function Si(t,i,a){var p=t.length;return a=a===r?p:a,!i&&a>=p?t:ur(t,i,a)}var Nf=ny||function(t){return _e.clearTimeout(t)};function Tf(t,i){if(i)return t.slice();var a=t.length,p=Zd?Zd(a):new t.constructor(a);return t.copy(p),p}function _c(t){var i=new t.constructor(t.byteLength);return new va(i).set(new va(t)),i}function m1(t,i){var a=i?_c(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function y1(t){var i=new t.constructor(t.source,yn.exec(t));return i.lastIndex=t.lastIndex,i}function v1(t){return Cs?yt(Cs.call(t)):{}}function If(t,i){var a=i?_c(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Rf(t,i){if(t!==i){var a=t!==r,p=t===null,b=t===t,A=Wn(t),M=i!==r,P=i===null,q=i===i,ie=Wn(i);if(!P&&!ie&&!A&&t>i||A&&M&&q&&!P&&!ie||p&&M&&q||!a&&q||!b)return 1;if(!p&&!A&&!ie&&t<i||ie&&a&&b&&!p&&!A||P&&a&&b||!M&&b||!q)return-1}return 0}function D1(t,i,a){for(var p=-1,b=t.criteria,A=i.criteria,M=b.length,P=a.length;++p<M;){var q=Rf(b[p],A[p]);if(q){if(p>=P)return q;var ie=a[p];return q*(ie=="desc"?-1:1)}}return t.index-i.index}function Of(t,i,a,p){for(var b=-1,A=t.length,M=a.length,P=-1,q=i.length,ie=rn(A-M,0),oe=X(q+ie),ce=!p;++P<q;)oe[P]=i[P];for(;++b<M;)(ce||b<A)&&(oe[a[b]]=t[b]);for(;ie--;)oe[P++]=t[b++];return oe}function Bf(t,i,a,p){for(var b=-1,A=t.length,M=-1,P=a.length,q=-1,ie=i.length,oe=rn(A-P,0),ce=X(oe+ie),ye=!p;++b<oe;)ce[b]=t[b];for(var xe=b;++q<ie;)ce[xe+q]=i[q];for(;++M<P;)(ye||b<A)&&(ce[xe+a[M]]=t[b++]);return ce}function zn(t,i){var a=-1,p=t.length;for(i||(i=X(p));++a<p;)i[a]=t[a];return i}function Rr(t,i,a,p){var b=!a;a||(a={});for(var A=-1,M=i.length;++A<M;){var P=i[A],q=p?p(a[P],t[P],P,a,t):r;q===r&&(q=t[P]),b?Jr(a,P,q):Es(a,P,q)}return a}function _1(t,i){return Rr(t,Ac(t),i)}function b1(t,i){return Rr(t,Wf(t),i)}function Oa(t,i){return function(a,p){var b=ze(a)?Sm:Hy,A=i?i():{};return b(a,t,Te(p,2),A)}}function Ho(t){return Ve(function(i,a){var p=-1,b=a.length,A=b>1?a[b-1]:r,M=b>2?a[2]:r;for(A=t.length>3&&typeof A=="function"?(b--,A):r,M&&Fn(a[0],a[1],M)&&(A=b<3?r:A,b=1),i=yt(i);++p<b;){var P=a[p];P&&t(i,P,p,A)}return i})}function Mf(t,i){return function(a,p){if(a==null)return a;if(!jn(a))return t(a,p);for(var b=a.length,A=i?b:-1,M=yt(a);(i?A--:++A<b)&&p(M[A],A,M)!==!1;);return a}}function Pf(t){return function(i,a,p){for(var b=-1,A=yt(i),M=p(i),P=M.length;P--;){var q=M[t?P:++b];if(a(A[q],q,A)===!1)break}return i}}function w1(t,i,a){var p=i&w,b=Ts(t);function A(){var M=this&&this!==_e&&this instanceof A?b:t;return M.apply(p?a:this,arguments)}return A}function zf(t){return function(i){i=at(i);var a=Po(i)?mr(i):r,p=a?a[0]:i.charAt(0),b=a?Si(a,1).join(""):i.slice(1);return p[t]()+b}}function Go(t){return function(i){return Vu(Mh(Bh(i).replace(vi,"")),t,"")}}function Ts(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=Lo(t.prototype),p=t.apply(a,i);return Rt(p)?p:a}}function x1(t,i,a){var p=Ts(t);function b(){for(var A=arguments.length,M=X(A),P=A,q=Vo(b);P--;)M[P]=arguments[P];var ie=A<3&&M[0]!==q&&M[A-1]!==q?[]:bi(M,q);if(A-=ie.length,A<a)return Lf(t,i,Ba,b.placeholder,r,M,ie,r,r,a-A);var oe=this&&this!==_e&&this instanceof b?p:t;return cn(oe,this,M)}return b}function jf(t){return function(i,a,p){var b=yt(i);if(!jn(i)){var A=Te(a,3);i=ln(i),a=function(P){return A(b[P],P,b)}}var M=t(i,a,p);return M>-1?b[A?i[M]:M]:r}}function kf(t){return Qr(function(i){var a=i.length,p=a,b=sr.prototype.thru;for(t&&i.reverse();p--;){var A=i[p];if(typeof A!="function")throw new or(l);if(b&&!M&&ja(A)=="wrapper")var M=new sr([],!0)}for(p=M?p:a;++p<a;){A=i[p];var P=ja(A),q=P=="wrapper"?Ec(A):r;q&&Nc(q[0])&&q[1]==(K|N|j|ee)&&!q[4].length&&q[9]==1?M=M[ja(q[0])].apply(M,q[3]):M=A.length==1&&Nc(A)?M[P]():M.thru(A)}return function(){var ie=arguments,oe=ie[0];if(M&&ie.length==1&&ze(oe))return M.plant(oe).value();for(var ce=0,ye=a?i[ce].apply(this,ie):oe;++ce<a;)ye=i[ce].call(this,ye);return ye}})}function Ba(t,i,a,p,b,A,M,P,q,ie){var oe=i&K,ce=i&w,ye=i&_,xe=i&(N|F),Ie=i&B,Le=ye?r:Ts(t);function Re(){for(var We=arguments.length,Ze=X(We),Xn=We;Xn--;)Ze[Xn]=arguments[Xn];if(xe)var Nn=Vo(Re),Yn=Mm(Ze,Nn);if(p&&(Ze=Of(Ze,p,b,xe)),A&&(Ze=Bf(Ze,A,M,xe)),We-=Yn,xe&&We<ie){var Gt=bi(Ze,Nn);return Lf(t,i,Ba,Re.placeholder,a,Ze,Gt,P,q,ie-We)}var Dr=ce?a:this,ri=ye?Dr[t]:t;return We=Ze.length,P?Ze=H1(Ze,P):Ie&&We>1&&Ze.reverse(),oe&&q<We&&(Ze.length=q),this&&this!==_e&&this instanceof Re&&(ri=Le||Ts(ri)),ri.apply(Dr,Ze)}return Re}function $f(t,i){return function(a,p){return Jy(a,t,i(p),{})}}function Ma(t,i){return function(a,p){var b;if(a===r&&p===r)return i;if(a!==r&&(b=a),p!==r){if(b===r)return p;typeof a=="string"||typeof p=="string"?(a=Un(a),p=Un(p)):(a=Ef(a),p=Ef(p)),b=t(a,p)}return b}}function bc(t){return Qr(function(i){return i=Nt(i,Vn(Te())),Ve(function(a){var p=this;return t(i,function(b){return cn(b,p,a)})})})}function Pa(t,i){i=i===r?" ":Un(i);var a=i.length;if(a<2)return a?pc(i,t):i;var p=pc(i,wa(t/zo(i)));return Po(i)?Si(mr(p),0,t).join(""):p.slice(0,t)}function C1(t,i,a,p){var b=i&w,A=Ts(t);function M(){for(var P=-1,q=arguments.length,ie=-1,oe=p.length,ce=X(oe+q),ye=this&&this!==_e&&this instanceof M?A:t;++ie<oe;)ce[ie]=p[ie];for(;q--;)ce[ie++]=arguments[++P];return cn(ye,b?a:this,ce)}return M}function qf(t){return function(i,a,p){return p&&typeof p!="number"&&Fn(i,a,p)&&(a=p=r),i=ni(i),a===r?(a=i,i=0):a=ni(a),p=p===r?i<a?1:-1:ni(p),c1(i,a,p,t)}}function za(t){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=lr(i),a=lr(a)),t(i,a)}}function Lf(t,i,a,p,b,A,M,P,q,ie){var oe=i&N,ce=oe?M:r,ye=oe?r:M,xe=oe?A:r,Ie=oe?r:A;i|=oe?j:H,i&=~(oe?H:j),i&x||(i&=-4);var Le=[t,i,b,xe,ce,Ie,ye,P,q,ie],Re=a.apply(r,Le);return Nc(t)&&eh(Re,Le),Re.placeholder=p,th(Re,t,i)}function wc(t){var i=nn[t];return function(a,p){if(a=lr(a),p=p==null?0:vn($e(p),292),p&&ef(a)){var b=(at(a)+"e").split("e"),A=i(b[0]+"e"+(+b[1]+p));return b=(at(A)+"e").split("e"),+(b[0]+"e"+(+b[1]-p))}return i(a)}}var E1=$o&&1/fa(new $o([,-0]))[1]==J?function(t){return new $o(t)}:Gc;function Hf(t){return function(i){var a=Dn(i);return a==nt?Ku(i):a==ft?Lm(i):Bm(i,t(i))}}function Kr(t,i,a,p,b,A,M,P){var q=i&_;if(!q&&typeof t!="function")throw new or(l);var ie=p?p.length:0;if(ie||(i&=-97,p=b=r),M=M===r?M:rn($e(M),0),P=P===r?P:$e(P),ie-=b?b.length:0,i&H){var oe=p,ce=b;p=b=r}var ye=q?r:Ec(t),xe=[t,i,a,p,b,oe,ce,A,M,P];if(ye&&$1(xe,ye),t=xe[0],i=xe[1],a=xe[2],p=xe[3],b=xe[4],P=xe[9]=xe[9]===r?q?0:t.length:rn(xe[9]-ie,0),!P&&i&(N|F)&&(i&=-25),!i||i==w)var Ie=w1(t,i,a);else i==N||i==F?Ie=x1(t,i,P):(i==j||i==(w|j))&&!b.length?Ie=C1(t,i,a,p):Ie=Ba.apply(r,xe);var Le=ye?xf:eh;return th(Le(Ie,xe),t,i)}function Gf(t,i,a,p){return t===r||vr(t,ko[a])&&!dt.call(p,a)?i:t}function Vf(t,i,a,p,b,A){return Rt(t)&&Rt(i)&&(A.set(i,t),Ta(t,i,r,Vf,A),A.delete(i)),t}function S1(t){return Os(t)?r:t}function Uf(t,i,a,p,b,A){var M=a&C,P=t.length,q=i.length;if(P!=q&&!(M&&q>P))return!1;var ie=A.get(t),oe=A.get(i);if(ie&&oe)return ie==i&&oe==t;var ce=-1,ye=!0,xe=a&y?new oo:r;for(A.set(t,i),A.set(i,t);++ce<P;){var Ie=t[ce],Le=i[ce];if(p)var Re=M?p(Le,Ie,ce,i,t,A):p(Ie,Le,ce,t,i,A);if(Re!==r){if(Re)continue;ye=!1;break}if(xe){if(!Uu(i,function(We,Ze){if(!Ds(xe,Ze)&&(Ie===We||b(Ie,We,a,p,A)))return xe.push(Ze)})){ye=!1;break}}else if(!(Ie===Le||b(Ie,Le,a,p,A))){ye=!1;break}}return A.delete(t),A.delete(i),ye}function A1(t,i,a,p,b,A,M){switch(a){case mt:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Mt:return!(t.byteLength!=i.byteLength||!A(new va(t),new va(i)));case De:case Se:case rt:return vr(+t,+i);case Et:return t.name==i.name&&t.message==i.message;case Ot:case Bt:return t==i+"";case nt:var P=Ku;case ft:var q=p&C;if(P||(P=fa),t.size!=i.size&&!q)return!1;var ie=M.get(t);if(ie)return ie==i;p|=y,M.set(t,i);var oe=Uf(P(t),P(i),p,b,A,M);return M.delete(t),oe;case St:if(Cs)return Cs.call(t)==Cs.call(i)}return!1}function F1(t,i,a,p,b,A){var M=a&C,P=xc(t),q=P.length,ie=xc(i),oe=ie.length;if(q!=oe&&!M)return!1;for(var ce=q;ce--;){var ye=P[ce];if(!(M?ye in i:dt.call(i,ye)))return!1}var xe=A.get(t),Ie=A.get(i);if(xe&&Ie)return xe==i&&Ie==t;var Le=!0;A.set(t,i),A.set(i,t);for(var Re=M;++ce<q;){ye=P[ce];var We=t[ye],Ze=i[ye];if(p)var Xn=M?p(Ze,We,ye,i,t,A):p(We,Ze,ye,t,i,A);if(!(Xn===r?We===Ze||b(We,Ze,a,p,A):Xn)){Le=!1;break}Re||(Re=ye=="constructor")}if(Le&&!Re){var Nn=t.constructor,Yn=i.constructor;Nn!=Yn&&"constructor"in t&&"constructor"in i&&!(typeof Nn=="function"&&Nn instanceof Nn&&typeof Yn=="function"&&Yn instanceof Yn)&&(Le=!1)}return A.delete(t),A.delete(i),Le}function Qr(t){return Ic(Kf(t,r,ah),t+"")}function xc(t){return ff(t,ln,Ac)}function Cc(t){return ff(t,kn,Wf)}var Ec=Ca?function(t){return Ca.get(t)}:Gc;function ja(t){for(var i=t.name+"",a=qo[i],p=dt.call(qo,i)?a.length:0;p--;){var b=a[p],A=b.func;if(A==null||A==t)return b.name}return i}function Vo(t){var i=dt.call(S,"placeholder")?S:t;return i.placeholder}function Te(){var t=S.iteratee||Lc;return t=t===Lc?gf:t,arguments.length?t(arguments[0],arguments[1]):t}function ka(t,i){var a=t.__data__;return P1(i)?a[typeof i=="string"?"string":"hash"]:a.map}function Sc(t){for(var i=ln(t),a=i.length;a--;){var p=i[a],b=t[p];i[a]=[p,b,Zf(b)]}return i}function uo(t,i){var a=km(t,i);return pf(a)?a:r}function N1(t){var i=dt.call(t,ro),a=t[ro];try{t[ro]=r;var p=!0}catch{}var b=ma.call(t);return p&&(i?t[ro]=a:delete t[ro]),b}var Ac=ec?function(t){return t==null?[]:(t=yt(t),Di(ec(t),function(i){return Kd.call(t,i)}))}:Vc,Wf=ec?function(t){for(var i=[];t;)_i(i,Ac(t)),t=Da(t);return i}:Vc,Dn=An;(tc&&Dn(new tc(new ArrayBuffer(1)))!=mt||bs&&Dn(new bs)!=nt||nc&&Dn(nc.resolve())!=we||$o&&Dn(new $o)!=ft||ws&&Dn(new ws)!=Qt)&&(Dn=function(t){var i=An(t),a=i==ke?t.constructor:r,p=a?co(a):"";if(p)switch(p){case dy:return mt;case fy:return nt;case hy:return we;case py:return ft;case gy:return Qt}return i});function T1(t,i,a){for(var p=-1,b=a.length;++p<b;){var A=a[p],M=A.size;switch(A.type){case"drop":t+=M;break;case"dropRight":i-=M;break;case"take":i=vn(i,t+M);break;case"takeRight":t=rn(t,i-M);break}}return{start:t,end:i}}function I1(t){var i=t.match(Hn);return i?i[1].split(ki):[]}function Xf(t,i,a){i=Ei(i,t);for(var p=-1,b=i.length,A=!1;++p<b;){var M=Or(i[p]);if(!(A=t!=null&&a(t,M)))break;t=t[M]}return A||++p!=b?A:(b=t==null?0:t.length,!!b&&Ua(b)&&ei(M,b)&&(ze(t)||lo(t)))}function R1(t){var i=t.length,a=new t.constructor(i);return i&&typeof t[0]=="string"&&dt.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Yf(t){return typeof t.constructor=="function"&&!Is(t)?Lo(Da(t)):{}}function O1(t,i,a){var p=t.constructor;switch(i){case Mt:return _c(t);case De:case Se:return new p(+t);case mt:return m1(t,a);case Ut:case _t:case ht:case Pt:case pn:case an:case bt:case At:case en:return If(t,a);case nt:return new p;case rt:case Bt:return new p(t);case Ot:return y1(t);case ft:return new p;case St:return v1(t)}}function B1(t,i){var a=i.length;if(!a)return t;var p=a-1;return i[p]=(a>1?"& ":"")+i[p],i=i.join(a>2?", ":" "),t.replace(Bn,`{
/* [wrapped with `+i+`] */
`)}function M1(t){return ze(t)||lo(t)||!!(Qd&&t&&t[Qd])}function ei(t,i){var a=typeof t;return i=i??se,!!i&&(a=="number"||a!="symbol"&&Ui.test(t))&&t>-1&&t%1==0&&t<i}function Fn(t,i,a){if(!Rt(a))return!1;var p=typeof i;return(p=="number"?jn(a)&&ei(i,a.length):p=="string"&&i in a)?vr(a[i],t):!1}function Fc(t,i){if(ze(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Wn(t)?!0:wt.test(t)||!Ft.test(t)||i!=null&&t in yt(i)}function P1(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function Nc(t){var i=ja(t),a=S[i];if(typeof a!="function"||!(i in Xe.prototype))return!1;if(t===a)return!0;var p=Ec(a);return!!p&&t===p[0]}function z1(t){return!!Yd&&Yd in t}var j1=pa?ti:Uc;function Is(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||ko;return t===a}function Zf(t){return t===t&&!Rt(t)}function Jf(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==r||t in yt(a))}}function k1(t){var i=Ga(t,function(p){return a.size===f&&a.clear(),p}),a=i.cache;return i}function $1(t,i){var a=t[1],p=i[1],b=a|p,A=b<(w|_|K),M=p==K&&a==N||p==K&&a==ee&&t[7].length<=i[8]||p==(K|ee)&&i[7].length<=i[8]&&a==N;if(!(A||M))return t;p&w&&(t[2]=i[2],b|=a&w?0:x);var P=i[3];if(P){var q=t[3];t[3]=q?Of(q,P,i[4]):P,t[4]=q?bi(t[3],h):i[4]}return P=i[5],P&&(q=t[5],t[5]=q?Bf(q,P,i[6]):P,t[6]=q?bi(t[5],h):i[6]),P=i[7],P&&(t[7]=P),p&K&&(t[8]=t[8]==null?i[8]:vn(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=b,t}function q1(t){var i=[];if(t!=null)for(var a in yt(t))i.push(a);return i}function L1(t){return ma.call(t)}function Kf(t,i,a){return i=rn(i===r?t.length-1:i,0),function(){for(var p=arguments,b=-1,A=rn(p.length-i,0),M=X(A);++b<A;)M[b]=p[i+b];b=-1;for(var P=X(i+1);++b<i;)P[b]=p[b];return P[i]=a(M),cn(t,this,P)}}function Qf(t,i){return i.length<2?t:ao(t,ur(i,0,-1))}function H1(t,i){for(var a=t.length,p=vn(i.length,a),b=zn(t);p--;){var A=i[p];t[p]=ei(A,a)?b[A]:r}return t}function Tc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var eh=nh(xf),Rs=iy||function(t,i){return _e.setTimeout(t,i)},Ic=nh(f1);function th(t,i,a){var p=i+"";return Ic(t,B1(p,G1(I1(p),a)))}function nh(t){var i=0,a=0;return function(){var p=uy(),b=Z-(p-a);if(a=p,b>0){if(++i>=te)return arguments[0]}else i=0;return t.apply(r,arguments)}}function $a(t,i){var a=-1,p=t.length,b=p-1;for(i=i===r?p:i;++a<i;){var A=hc(a,b),M=t[A];t[A]=t[a],t[a]=M}return t.length=i,t}var rh=k1(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Wt,function(a,p,b,A){i.push(b?A.replace(hi,"$1"):p||a)}),i});function Or(t){if(typeof t=="string"||Wn(t))return t;var i=t+"";return i=="0"&&1/t==-1/0?"-0":i}function co(t){if(t!=null){try{return ga.call(t)}catch{}try{return t+""}catch{}}return""}function G1(t,i){return ir(ve,function(a){var p="_."+a[0];i&a[1]&&!la(t,p)&&t.push(p)}),t.sort()}function ih(t){if(t instanceof Xe)return t.clone();var i=new sr(t.__wrapped__,t.__chain__);return i.__actions__=zn(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function V1(t,i,a){(a?Fn(t,i,a):i===r)?i=1:i=rn($e(i),0);var p=t==null?0:t.length;if(!p||i<1)return[];for(var b=0,A=0,M=X(wa(p/i));b<p;)M[A++]=ur(t,b,b+=i);return M}function U1(t){for(var i=-1,a=t==null?0:t.length,p=0,b=[];++i<a;){var A=t[i];A&&(b[p++]=A)}return b}function W1(){var t=arguments.length;if(!t)return[];for(var i=X(t-1),a=arguments[0],p=t;p--;)i[p-1]=arguments[p];return _i(ze(a)?zn(a):[a],gn(i,1))}var X1=Ve(function(t,i){return Ht(t)?Ss(t,gn(i,1,Ht,!0)):[]}),Y1=Ve(function(t,i){var a=cr(i);return Ht(a)&&(a=r),Ht(t)?Ss(t,gn(i,1,Ht,!0),Te(a,2)):[]}),Z1=Ve(function(t,i){var a=cr(i);return Ht(a)&&(a=r),Ht(t)?Ss(t,gn(i,1,Ht,!0),r,a):[]});function J1(t,i,a){var p=t==null?0:t.length;return p?(i=a||i===r?1:$e(i),ur(t,i<0?0:i,p)):[]}function K1(t,i,a){var p=t==null?0:t.length;return p?(i=a||i===r?1:$e(i),i=p-i,ur(t,0,i<0?0:i)):[]}function Q1(t,i){return t&&t.length?Ra(t,Te(i,3),!0,!0):[]}function ev(t,i){return t&&t.length?Ra(t,Te(i,3),!0):[]}function tv(t,i,a,p){var b=t==null?0:t.length;return b?(a&&typeof a!="number"&&Fn(t,i,a)&&(a=0,p=b),Wy(t,i,a,p)):[]}function oh(t,i,a){var p=t==null?0:t.length;if(!p)return-1;var b=a==null?0:$e(a);return b<0&&(b=rn(p+b,0)),da(t,Te(i,3),b)}function sh(t,i,a){var p=t==null?0:t.length;if(!p)return-1;var b=p-1;return a!==r&&(b=$e(a),b=a<0?rn(p+b,0):vn(b,p-1)),da(t,Te(i,3),b,!0)}function ah(t){var i=t==null?0:t.length;return i?gn(t,1):[]}function nv(t){var i=t==null?0:t.length;return i?gn(t,J):[]}function rv(t,i){var a=t==null?0:t.length;return a?(i=i===r?1:$e(i),gn(t,i)):[]}function iv(t){for(var i=-1,a=t==null?0:t.length,p={};++i<a;){var b=t[i];p[b[0]]=b[1]}return p}function uh(t){return t&&t.length?t[0]:r}function ov(t,i,a){var p=t==null?0:t.length;if(!p)return-1;var b=a==null?0:$e(a);return b<0&&(b=rn(p+b,0)),Mo(t,i,b)}function sv(t){var i=t==null?0:t.length;return i?ur(t,0,-1):[]}var av=Ve(function(t){var i=Nt(t,vc);return i.length&&i[0]===t[0]?uc(i):[]}),uv=Ve(function(t){var i=cr(t),a=Nt(t,vc);return i===cr(a)?i=r:a.pop(),a.length&&a[0]===t[0]?uc(a,Te(i,2)):[]}),cv=Ve(function(t){var i=cr(t),a=Nt(t,vc);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===t[0]?uc(a,r,i):[]});function lv(t,i){return t==null?"":sy.call(t,i)}function cr(t){var i=t==null?0:t.length;return i?t[i-1]:r}function dv(t,i,a){var p=t==null?0:t.length;if(!p)return-1;var b=p;return a!==r&&(b=$e(a),b=b<0?rn(p+b,0):vn(b,p-1)),i===i?Gm(t,i,b):da(t,qd,b,!0)}function fv(t,i){return t&&t.length?Df(t,$e(i)):r}var hv=Ve(ch);function ch(t,i){return t&&t.length&&i&&i.length?fc(t,i):t}function pv(t,i,a){return t&&t.length&&i&&i.length?fc(t,i,Te(a,2)):t}function gv(t,i,a){return t&&t.length&&i&&i.length?fc(t,i,r,a):t}var mv=Qr(function(t,i){var a=t==null?0:t.length,p=ic(t,i);return wf(t,Nt(i,function(b){return ei(b,a)?+b:b}).sort(Rf)),p});function yv(t,i){var a=[];if(!(t&&t.length))return a;var p=-1,b=[],A=t.length;for(i=Te(i,3);++p<A;){var M=t[p];i(M,p,t)&&(a.push(M),b.push(p))}return wf(t,b),a}function Rc(t){return t==null?t:ly.call(t)}function vv(t,i,a){var p=t==null?0:t.length;return p?(a&&typeof a!="number"&&Fn(t,i,a)?(i=0,a=p):(i=i==null?0:$e(i),a=a===r?p:$e(a)),ur(t,i,a)):[]}function Dv(t,i){return Ia(t,i)}function _v(t,i,a){return gc(t,i,Te(a,2))}function bv(t,i){var a=t==null?0:t.length;if(a){var p=Ia(t,i);if(p<a&&vr(t[p],i))return p}return-1}function wv(t,i){return Ia(t,i,!0)}function xv(t,i,a){return gc(t,i,Te(a,2),!0)}function Cv(t,i){var a=t==null?0:t.length;if(a){var p=Ia(t,i,!0)-1;if(vr(t[p],i))return p}return-1}function Ev(t){return t&&t.length?Cf(t):[]}function Sv(t,i){return t&&t.length?Cf(t,Te(i,2)):[]}function Av(t){var i=t==null?0:t.length;return i?ur(t,1,i):[]}function Fv(t,i,a){return t&&t.length?(i=a||i===r?1:$e(i),ur(t,0,i<0?0:i)):[]}function Nv(t,i,a){var p=t==null?0:t.length;return p?(i=a||i===r?1:$e(i),i=p-i,ur(t,i<0?0:i,p)):[]}function Tv(t,i){return t&&t.length?Ra(t,Te(i,3),!1,!0):[]}function Iv(t,i){return t&&t.length?Ra(t,Te(i,3)):[]}var Rv=Ve(function(t){return Ci(gn(t,1,Ht,!0))}),Ov=Ve(function(t){var i=cr(t);return Ht(i)&&(i=r),Ci(gn(t,1,Ht,!0),Te(i,2))}),Bv=Ve(function(t){var i=cr(t);return i=typeof i=="function"?i:r,Ci(gn(t,1,Ht,!0),r,i)});function Mv(t){return t&&t.length?Ci(t):[]}function Pv(t,i){return t&&t.length?Ci(t,Te(i,2)):[]}function zv(t,i){return i=typeof i=="function"?i:r,t&&t.length?Ci(t,r,i):[]}function Oc(t){if(!(t&&t.length))return[];var i=0;return t=Di(t,function(a){if(Ht(a))return i=rn(a.length,i),!0}),Zu(i,function(a){return Nt(t,Wu(a))})}function lh(t,i){if(!(t&&t.length))return[];var a=Oc(t);return i==null?a:Nt(a,function(p){return cn(i,r,p)})}var jv=Ve(function(t,i){return Ht(t)?Ss(t,i):[]}),kv=Ve(function(t){return yc(Di(t,Ht))}),$v=Ve(function(t){var i=cr(t);return Ht(i)&&(i=r),yc(Di(t,Ht),Te(i,2))}),qv=Ve(function(t){var i=cr(t);return i=typeof i=="function"?i:r,yc(Di(t,Ht),r,i)}),Lv=Ve(Oc);function Hv(t,i){return Ff(t||[],i||[],Es)}function Gv(t,i){return Ff(t||[],i||[],Ns)}var Vv=Ve(function(t){var i=t.length,a=i>1?t[i-1]:r;return a=typeof a=="function"?(t.pop(),a):r,lh(t,a)});function dh(t){var i=S(t);return i.__chain__=!0,i}function Uv(t,i){return i(t),t}function qa(t,i){return i(t)}var Wv=Qr(function(t){var i=t.length,a=i?t[0]:0,p=this.__wrapped__,b=function(A){return ic(A,t)};return i>1||this.__actions__.length||!(p instanceof Xe)||!ei(a)?this.thru(b):(p=p.slice(a,+a+(i?1:0)),p.__actions__.push({func:qa,args:[b],thisArg:r}),new sr(p,this.__chain__).thru(function(A){return i&&!A.length&&A.push(r),A}))});function Xv(){return dh(this)}function Yv(){return new sr(this.value(),this.__chain__)}function Zv(){this.__values__===r&&(this.__values__=Eh(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function Jv(){return this}function Kv(t){for(var i,a=this;a instanceof Sa;){var p=ih(a);p.__index__=0,p.__values__=r,i?b.__wrapped__=p:i=p;var b=p;a=a.__wrapped__}return b.__wrapped__=t,i}function Qv(){var t=this.__wrapped__;if(t instanceof Xe){var i=t;return this.__actions__.length&&(i=new Xe(this)),i=i.reverse(),i.__actions__.push({func:qa,args:[Rc],thisArg:r}),new sr(i,this.__chain__)}return this.thru(Rc)}function eD(){return Af(this.__wrapped__,this.__actions__)}var tD=Oa(function(t,i,a){dt.call(t,a)?++t[a]:Jr(t,a,1)});function nD(t,i,a){var p=ze(t)?kd:Uy;return a&&Fn(t,i,a)&&(i=r),p(t,Te(i,3))}function rD(t,i){var a=ze(t)?Di:lf;return a(t,Te(i,3))}var iD=jf(oh),oD=jf(sh);function sD(t,i){return gn(La(t,i),1)}function aD(t,i){return gn(La(t,i),J)}function uD(t,i,a){return a=a===r?1:$e(a),gn(La(t,i),a)}function fh(t,i){var a=ze(t)?ir:xi;return a(t,Te(i,3))}function hh(t,i){var a=ze(t)?Am:cf;return a(t,Te(i,3))}var cD=Oa(function(t,i,a){dt.call(t,a)?t[a].push(i):Jr(t,a,[i])});function lD(t,i,a,p){t=jn(t)?t:Wo(t),a=a&&!p?$e(a):0;var b=t.length;return a<0&&(a=rn(b+a,0)),Wa(t)?a<=b&&t.indexOf(i,a)>-1:!!b&&Mo(t,i,a)>-1}var dD=Ve(function(t,i,a){var p=-1,b=typeof i=="function",A=jn(t)?X(t.length):[];return xi(t,function(M){A[++p]=b?cn(i,M,a):As(M,i,a)}),A}),fD=Oa(function(t,i,a){Jr(t,a,i)});function La(t,i){var a=ze(t)?Nt:mf;return a(t,Te(i,3))}function hD(t,i,a,p){return t==null?[]:(ze(i)||(i=i==null?[]:[i]),a=p?r:a,ze(a)||(a=a==null?[]:[a]),_f(t,i,a))}var pD=Oa(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]});function gD(t,i,a){var p=ze(t)?Vu:Hd,b=arguments.length<3;return p(t,Te(i,4),a,b,xi)}function mD(t,i,a){var p=ze(t)?Fm:Hd,b=arguments.length<3;return p(t,Te(i,4),a,b,cf)}function yD(t,i){var a=ze(t)?Di:lf;return a(t,Va(Te(i,3)))}function vD(t){var i=ze(t)?of:l1;return i(t)}function DD(t,i,a){(a?Fn(t,i,a):i===r)?i=1:i=$e(i);var p=ze(t)?qy:d1;return p(t,i)}function _D(t){var i=ze(t)?Ly:h1;return i(t)}function bD(t){if(t==null)return 0;if(jn(t))return Wa(t)?zo(t):t.length;var i=Dn(t);return i==nt||i==ft?t.size:lc(t).length}function wD(t,i,a){var p=ze(t)?Uu:p1;return a&&Fn(t,i,a)&&(i=r),p(t,Te(i,3))}var xD=Ve(function(t,i){if(t==null)return[];var a=i.length;return a>1&&Fn(t,i[0],i[1])?i=[]:a>2&&Fn(i[0],i[1],i[2])&&(i=[i[0]]),_f(t,gn(i,1),[])}),Ha=ry||function(){return _e.Date.now()};function CD(t,i){if(typeof i!="function")throw new or(l);return t=$e(t),function(){if(--t<1)return i.apply(this,arguments)}}function ph(t,i,a){return i=a?r:i,i=t&&i==null?t.length:i,Kr(t,K,r,r,r,r,i)}function gh(t,i){var a;if(typeof i!="function")throw new or(l);return t=$e(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=r),a}}var Bc=Ve(function(t,i,a){var p=w;if(a.length){var b=bi(a,Vo(Bc));p|=j}return Kr(t,p,i,a,b)}),mh=Ve(function(t,i,a){var p=w|_;if(a.length){var b=bi(a,Vo(mh));p|=j}return Kr(i,p,t,a,b)});function yh(t,i,a){i=a?r:i;var p=Kr(t,N,r,r,r,r,r,i);return p.placeholder=yh.placeholder,p}function vh(t,i,a){i=a?r:i;var p=Kr(t,F,r,r,r,r,r,i);return p.placeholder=vh.placeholder,p}function Dh(t,i,a){var p,b,A,M,P,q,ie=0,oe=!1,ce=!1,ye=!0;if(typeof t!="function")throw new or(l);i=lr(i)||0,Rt(a)&&(oe=!!a.leading,ce="maxWait"in a,A=ce?rn(lr(a.maxWait)||0,i):A,ye="trailing"in a?!!a.trailing:ye);function xe(Gt){var Dr=p,ri=b;return p=b=r,ie=Gt,M=t.apply(ri,Dr),M}function Ie(Gt){return ie=Gt,P=Rs(We,i),oe?xe(Gt):M}function Le(Gt){var Dr=Gt-q,ri=Gt-ie,jh=i-Dr;return ce?vn(jh,A-ri):jh}function Re(Gt){var Dr=Gt-q,ri=Gt-ie;return q===r||Dr>=i||Dr<0||ce&&ri>=A}function We(){var Gt=Ha();if(Re(Gt))return Ze(Gt);P=Rs(We,Le(Gt))}function Ze(Gt){return P=r,ye&&p?xe(Gt):(p=b=r,M)}function Xn(){P!==r&&Nf(P),ie=0,p=q=b=P=r}function Nn(){return P===r?M:Ze(Ha())}function Yn(){var Gt=Ha(),Dr=Re(Gt);if(p=arguments,b=this,q=Gt,Dr){if(P===r)return Ie(q);if(ce)return Nf(P),P=Rs(We,i),xe(q)}return P===r&&(P=Rs(We,i)),M}return Yn.cancel=Xn,Yn.flush=Nn,Yn}var ED=Ve(function(t,i){return uf(t,1,i)}),SD=Ve(function(t,i,a){return uf(t,lr(i)||0,a)});function AD(t){return Kr(t,B)}function Ga(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new or(l);var a=function(){var p=arguments,b=i?i.apply(this,p):p[0],A=a.cache;if(A.has(b))return A.get(b);var M=t.apply(this,p);return a.cache=A.set(b,M)||A,M};return a.cache=new(Ga.Cache||Zr),a}Ga.Cache=Zr;function Va(t){if(typeof t!="function")throw new or(l);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function FD(t){return gh(2,t)}var ND=g1(function(t,i){i=i.length==1&&ze(i[0])?Nt(i[0],Vn(Te())):Nt(gn(i,1),Vn(Te()));var a=i.length;return Ve(function(p){for(var b=-1,A=vn(p.length,a);++b<A;)p[b]=i[b].call(this,p[b]);return cn(t,this,p)})}),Mc=Ve(function(t,i){var a=bi(i,Vo(Mc));return Kr(t,j,r,i,a)}),_h=Ve(function(t,i){var a=bi(i,Vo(_h));return Kr(t,H,r,i,a)}),TD=Qr(function(t,i){return Kr(t,ee,r,r,r,i)});function ID(t,i){if(typeof t!="function")throw new or(l);return i=i===r?i:$e(i),Ve(t,i)}function RD(t,i){if(typeof t!="function")throw new or(l);return i=i==null?0:rn($e(i),0),Ve(function(a){var p=a[i],b=Si(a,0,i);return p&&_i(b,p),cn(t,this,b)})}function OD(t,i,a){var p=!0,b=!0;if(typeof t!="function")throw new or(l);return Rt(a)&&(p="leading"in a?!!a.leading:p,b="trailing"in a?!!a.trailing:b),Dh(t,i,{leading:p,maxWait:i,trailing:b})}function BD(t){return ph(t,1)}function MD(t,i){return Mc(Dc(i),t)}function PD(){if(!arguments.length)return[];var t=arguments[0];return ze(t)?t:[t]}function zD(t){return ar(t,D)}function jD(t,i){return i=typeof i=="function"?i:r,ar(t,D,i)}function kD(t){return ar(t,g|D)}function $D(t,i){return i=typeof i=="function"?i:r,ar(t,g|D,i)}function qD(t,i){return i==null||af(t,i,ln(i))}function vr(t,i){return t===i||t!==t&&i!==i}var LD=za(ac),HD=za(function(t,i){return t>=i}),lo=hf(function(){return arguments}())?hf:function(t){return zt(t)&&dt.call(t,"callee")&&!Kd.call(t,"callee")},ze=X.isArray,GD=tn?Vn(tn):Ky;function jn(t){return t!=null&&Ua(t.length)&&!ti(t)}function Ht(t){return zt(t)&&jn(t)}function VD(t){return t===!0||t===!1||zt(t)&&An(t)==De}var Ai=oy||Uc,UD=Pn?Vn(Pn):Qy;function WD(t){return zt(t)&&t.nodeType===1&&!Os(t)}function XD(t){if(t==null)return!0;if(jn(t)&&(ze(t)||typeof t=="string"||typeof t.splice=="function"||Ai(t)||Uo(t)||lo(t)))return!t.length;var i=Dn(t);if(i==nt||i==ft)return!t.size;if(Is(t))return!lc(t).length;for(var a in t)if(dt.call(t,a))return!1;return!0}function YD(t,i){return Fs(t,i)}function ZD(t,i,a){a=typeof a=="function"?a:r;var p=a?a(t,i):r;return p===r?Fs(t,i,r,a):!!p}function Pc(t){if(!zt(t))return!1;var i=An(t);return i==Et||i==Oe||typeof t.message=="string"&&typeof t.name=="string"&&!Os(t)}function JD(t){return typeof t=="number"&&ef(t)}function ti(t){if(!Rt(t))return!1;var i=An(t);return i==tt||i==$t||i==Be||i==qt}function bh(t){return typeof t=="number"&&t==$e(t)}function Ua(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=se}function Rt(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function zt(t){return t!=null&&typeof t=="object"}var wh=rr?Vn(rr):t1;function KD(t,i){return t===i||cc(t,i,Sc(i))}function QD(t,i,a){return a=typeof a=="function"?a:r,cc(t,i,Sc(i),a)}function e_(t){return xh(t)&&t!=+t}function t_(t){if(j1(t))throw new Pe(u);return pf(t)}function n_(t){return t===null}function r_(t){return t==null}function xh(t){return typeof t=="number"||zt(t)&&An(t)==rt}function Os(t){if(!zt(t)||An(t)!=ke)return!1;var i=Da(t);if(i===null)return!0;var a=dt.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&ga.call(a)==Qm}var zc=Tr?Vn(Tr):n1;function i_(t){return bh(t)&&t>=-9007199254740991&&t<=se}var Ch=vs?Vn(vs):r1;function Wa(t){return typeof t=="string"||!ze(t)&&zt(t)&&An(t)==Bt}function Wn(t){return typeof t=="symbol"||zt(t)&&An(t)==St}var Uo=no?Vn(no):i1;function o_(t){return t===r}function s_(t){return zt(t)&&Dn(t)==Qt}function a_(t){return zt(t)&&An(t)==wn}var u_=za(dc),c_=za(function(t,i){return t<=i});function Eh(t){if(!t)return[];if(jn(t))return Wa(t)?mr(t):zn(t);if(_s&&t[_s])return qm(t[_s]());var i=Dn(t),a=i==nt?Ku:i==ft?fa:Wo;return a(t)}function ni(t){if(!t)return t===0?t:0;if(t=lr(t),t===J||t===-1/0){var i=t<0?-1:1;return i*U}return t===t?t:0}function $e(t){var i=ni(t),a=i%1;return i===i?a?i-a:i:0}function Sh(t){return t?so($e(t),0,ue):0}function lr(t){if(typeof t=="number")return t;if(Wn(t))return re;if(Rt(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=Rt(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Gd(t);var a=Hi.test(t);return a||Vi.test(t)?me(t.slice(2),a?2:8):Li.test(t)?re:+t}function Ah(t){return Rr(t,kn(t))}function l_(t){return t?so($e(t),-9007199254740991,se):t===0?t:0}function at(t){return t==null?"":Un(t)}var d_=Ho(function(t,i){if(Is(i)||jn(i)){Rr(i,ln(i),t);return}for(var a in i)dt.call(i,a)&&Es(t,a,i[a])}),Fh=Ho(function(t,i){Rr(i,kn(i),t)}),Xa=Ho(function(t,i,a,p){Rr(i,kn(i),t,p)}),f_=Ho(function(t,i,a,p){Rr(i,ln(i),t,p)}),h_=Qr(ic);function p_(t,i){var a=Lo(t);return i==null?a:sf(a,i)}var g_=Ve(function(t,i){t=yt(t);var a=-1,p=i.length,b=p>2?i[2]:r;for(b&&Fn(i[0],i[1],b)&&(p=1);++a<p;)for(var A=i[a],M=kn(A),P=-1,q=M.length;++P<q;){var ie=M[P],oe=t[ie];(oe===r||vr(oe,ko[ie])&&!dt.call(t,ie))&&(t[ie]=A[ie])}return t}),m_=Ve(function(t){return t.push(r,Vf),cn(Nh,r,t)});function y_(t,i){return $d(t,Te(i,3),Ir)}function v_(t,i){return $d(t,Te(i,3),sc)}function D_(t,i){return t==null?t:oc(t,Te(i,3),kn)}function __(t,i){return t==null?t:df(t,Te(i,3),kn)}function b_(t,i){return t&&Ir(t,Te(i,3))}function w_(t,i){return t&&sc(t,Te(i,3))}function x_(t){return t==null?[]:Na(t,ln(t))}function C_(t){return t==null?[]:Na(t,kn(t))}function jc(t,i,a){var p=t==null?r:ao(t,i);return p===r?a:p}function E_(t,i){return t!=null&&Xf(t,i,Xy)}function kc(t,i){return t!=null&&Xf(t,i,Yy)}var S_=$f(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=ma.call(i)),t[i]=a},qc($n)),A_=$f(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=ma.call(i)),dt.call(t,i)?t[i].push(a):t[i]=[a]},Te),F_=Ve(As);function ln(t){return jn(t)?rf(t):lc(t)}function kn(t){return jn(t)?rf(t,!0):o1(t)}function N_(t,i){var a={};return i=Te(i,3),Ir(t,function(p,b,A){Jr(a,i(p,b,A),p)}),a}function T_(t,i){var a={};return i=Te(i,3),Ir(t,function(p,b,A){Jr(a,b,i(p,b,A))}),a}var I_=Ho(function(t,i,a){Ta(t,i,a)}),Nh=Ho(function(t,i,a,p){Ta(t,i,a,p)}),R_=Qr(function(t,i){var a={};if(t==null)return a;var p=!1;i=Nt(i,function(A){return A=Ei(A,t),p||(p=A.length>1),A}),Rr(t,Cc(t),a),p&&(a=ar(a,g|m|D,S1));for(var b=i.length;b--;)mc(a,i[b]);return a});function O_(t,i){return Th(t,Va(Te(i)))}var B_=Qr(function(t,i){return t==null?{}:a1(t,i)});function Th(t,i){if(t==null)return{};var a=Nt(Cc(t),function(p){return[p]});return i=Te(i),bf(t,a,function(p,b){return i(p,b[0])})}function M_(t,i,a){i=Ei(i,t);var p=-1,b=i.length;for(b||(b=1,t=r);++p<b;){var A=t==null?r:t[Or(i[p])];A===r&&(p=b,A=a),t=ti(A)?A.call(t):A}return t}function P_(t,i,a){return t==null?t:Ns(t,i,a)}function z_(t,i,a,p){return p=typeof p=="function"?p:r,t==null?t:Ns(t,i,a,p)}var Ih=Hf(ln),Rh=Hf(kn);function j_(t,i,a){var p=ze(t),b=p||Ai(t)||Uo(t);if(i=Te(i,4),a==null){var A=t&&t.constructor;b?a=p?new A:[]:Rt(t)?a=ti(A)?Lo(Da(t)):{}:a={}}return(b?ir:Ir)(t,function(M,P,q){return i(a,M,P,q)}),a}function k_(t,i){return t==null?!0:mc(t,i)}function $_(t,i,a){return t==null?t:Sf(t,i,Dc(a))}function q_(t,i,a,p){return p=typeof p=="function"?p:r,t==null?t:Sf(t,i,Dc(a),p)}function Wo(t){return t==null?[]:Ju(t,ln(t))}function L_(t){return t==null?[]:Ju(t,kn(t))}function H_(t,i,a){return a===r&&(a=i,i=r),a!==r&&(a=lr(a),a=a===a?a:0),i!==r&&(i=lr(i),i=i===i?i:0),so(lr(t),i,a)}function G_(t,i,a){return i=ni(i),a===r?(a=i,i=0):a=ni(a),t=lr(t),Zy(t,i,a)}function V_(t,i,a){if(a&&typeof a!="boolean"&&Fn(t,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&i===r?(t=0,i=1):(t=ni(t),i===r?(i=t,t=0):i=ni(i)),t>i){var p=t;t=i,i=p}if(a||t%1||i%1){var b=tf();return vn(t+b*(i-t+he("1e-"+((b+"").length-1))),i)}return hc(t,i)}var U_=Go(function(t,i,a){return i=i.toLowerCase(),t+(a?Oh(i):i)});function Oh(t){return $c(at(t).toLowerCase())}function Bh(t){return t=at(t),t&&t.replace(Cn,Pm).replace(gr,"")}function W_(t,i,a){t=at(t),i=Un(i);var p=t.length;a=a===r?p:so($e(a),0,p);var b=a;return a-=i.length,a>=0&&t.slice(a,b)==i}function X_(t){return t=at(t),t&&pe.test(t)?t.replace(L,zm):t}function Y_(t){return t=at(t),t&&Lt.test(t)?t.replace(Rn,"\\$&"):t}var Z_=Go(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),J_=Go(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),K_=zf("toLowerCase");function Q_(t,i,a){t=at(t),i=$e(i);var p=i?zo(t):0;if(!i||p>=i)return t;var b=(i-p)/2;return Pa(xa(b),a)+t+Pa(wa(b),a)}function eb(t,i,a){t=at(t),i=$e(i);var p=i?zo(t):0;return i&&p<i?t+Pa(i-p,a):t}function tb(t,i,a){t=at(t),i=$e(i);var p=i?zo(t):0;return i&&p<i?Pa(i-p,a)+t:t}function nb(t,i,a){return a||i==null?i=0:i&&(i=+i),cy(at(t).replace(Xt,""),i||0)}function rb(t,i,a){return(a?Fn(t,i,a):i===r)?i=1:i=$e(i),pc(at(t),i)}function ib(){var t=arguments,i=at(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var ob=Go(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()});function sb(t,i,a){return a&&typeof a!="number"&&Fn(t,i,a)&&(i=a=r),a=a===r?ue:a>>>0,a?(t=at(t),t&&(typeof i=="string"||i!=null&&!zc(i))&&(i=Un(i),!i&&Po(t))?Si(mr(t),0,a):t.split(i,a)):[]}var ab=Go(function(t,i,a){return t+(a?" ":"")+$c(i)});function ub(t,i,a){return t=at(t),a=a==null?0:so($e(a),0,t.length),i=Un(i),t.slice(a,a+i.length)==i}function cb(t,i,a){var p=S.templateSettings;a&&Fn(t,i,a)&&(i=r),t=at(t),i=Xa({},i,p,Gf);var b=Xa({},i.imports,p.imports,Gf),A=ln(b),M=Ju(b,A),P,q,ie=0,oe=i.interpolate||fr,ce="__p += '",ye=Qu((i.escape||fr).source+"|"+oe.source+"|"+(oe===Je?er:fr).source+"|"+(i.evaluate||fr).source+"|$","g"),xe="//# sourceURL="+(dt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ys+"]")+`
`;t.replace(ye,function(Re,We,Ze,Xn,Nn,Yn){return Ze||(Ze=Xn),ce+=t.slice(ie,Yn).replace(Fr,jm),We&&(P=!0,ce+=`' +
__e(`+We+`) +
'`),Nn&&(q=!0,ce+=`';
`+Nn+`;
__p += '`),Ze&&(ce+=`' +
((__t = (`+Ze+`)) == null ? '' : __t) +
'`),ie=Yn+Re.length,Re}),ce+=`';
`;var Ie=dt.call(i,"variable")&&i.variable;if(!Ie)ce=`with (obj) {
`+ce+`
}
`;else if(qi.test(Ie))throw new Pe(c);ce=(q?ce.replace(Qn,""):ce).replace(un,"$1").replace(xn,"$1;"),ce="function("+(Ie||"obj")+`) {
`+(Ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ce+`return __p
}`;var Le=Ph(function(){return ot(A,xe+"return "+ce).apply(r,M)});if(Le.source=ce,Pc(Le))throw Le;return Le}function lb(t){return at(t).toLowerCase()}function db(t){return at(t).toUpperCase()}function fb(t,i,a){if(t=at(t),t&&(a||i===r))return Gd(t);if(!t||!(i=Un(i)))return t;var p=mr(t),b=mr(i),A=Vd(p,b),M=Ud(p,b)+1;return Si(p,A,M).join("")}function hb(t,i,a){if(t=at(t),t&&(a||i===r))return t.slice(0,Xd(t)+1);if(!t||!(i=Un(i)))return t;var p=mr(t),b=Ud(p,mr(i))+1;return Si(p,0,b).join("")}function pb(t,i,a){if(t=at(t),t&&(a||i===r))return t.replace(Xt,"");if(!t||!(i=Un(i)))return t;var p=mr(t),b=Vd(p,mr(i));return Si(p,b).join("")}function gb(t,i){var a=V,p=Y;if(Rt(i)){var b="separator"in i?i.separator:b;a="length"in i?$e(i.length):a,p="omission"in i?Un(i.omission):p}t=at(t);var A=t.length;if(Po(t)){var M=mr(t);A=M.length}if(a>=A)return t;var P=a-zo(p);if(P<1)return p;var q=M?Si(M,0,P).join(""):t.slice(0,P);if(b===r)return q+p;if(M&&(P+=q.length-P),zc(b)){if(t.slice(P).search(b)){var ie,oe=q;for(b.global||(b=Qu(b.source,at(yn.exec(b))+"g")),b.lastIndex=0;ie=b.exec(oe);)var ce=ie.index;q=q.slice(0,ce===r?P:ce)}}else if(t.indexOf(Un(b),P)!=P){var ye=q.lastIndexOf(b);ye>-1&&(q=q.slice(0,ye))}return q+p}function mb(t){return t=at(t),t&&Q.test(t)?t.replace(mn,Vm):t}var yb=Go(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),$c=zf("toUpperCase");function Mh(t,i,a){return t=at(t),i=a?r:i,i===r?$m(t)?Xm(t):Im(t):t.match(i)||[]}var Ph=Ve(function(t,i){try{return cn(t,r,i)}catch(a){return Pc(a)?a:new Pe(a)}}),vb=Qr(function(t,i){return ir(i,function(a){a=Or(a),Jr(t,a,Bc(t[a],t))}),t});function Db(t){var i=t==null?0:t.length,a=Te();return t=i?Nt(t,function(p){if(typeof p[1]!="function")throw new or(l);return[a(p[0]),p[1]]}):[],Ve(function(p){for(var b=-1;++b<i;){var A=t[b];if(cn(A[0],this,p))return cn(A[1],this,p)}})}function _b(t){return Vy(ar(t,g))}function qc(t){return function(){return t}}function bb(t,i){return t==null||t!==t?i:t}var wb=kf(),xb=kf(!0);function $n(t){return t}function Lc(t){return gf(typeof t=="function"?t:ar(t,g))}function Cb(t){return yf(ar(t,g))}function Eb(t,i){return vf(t,ar(i,g))}var Sb=Ve(function(t,i){return function(a){return As(a,t,i)}}),Ab=Ve(function(t,i){return function(a){return As(t,a,i)}});function Hc(t,i,a){var p=ln(i),b=Na(i,p);a==null&&!(Rt(i)&&(b.length||!p.length))&&(a=i,i=t,t=this,b=Na(i,ln(i)));var A=!(Rt(a)&&"chain"in a)||!!a.chain,M=ti(t);return ir(b,function(P){var q=i[P];t[P]=q,M&&(t.prototype[P]=function(){var ie=this.__chain__;if(A||ie){var oe=t(this.__wrapped__),ce=oe.__actions__=zn(this.__actions__);return ce.push({func:q,args:arguments,thisArg:t}),oe.__chain__=ie,oe}return q.apply(t,_i([this.value()],arguments))})}),t}function Fb(){return _e._===this&&(_e._=ey),this}function Gc(){}function Nb(t){return t=$e(t),Ve(function(i){return Df(i,t)})}var Tb=bc(Nt),Ib=bc(kd),Rb=bc(Uu);function zh(t){return Fc(t)?Wu(Or(t)):u1(t)}function Ob(t){return function(i){return t==null?r:ao(t,i)}}var Bb=qf(),Mb=qf(!0);function Vc(){return[]}function Uc(){return!1}function Pb(){return{}}function zb(){return""}function jb(){return!0}function kb(t,i){if(t=$e(t),t<1||t>se)return[];var a=ue,p=vn(t,ue);i=Te(i),t-=ue;for(var b=Zu(p,i);++a<t;)i(a);return b}function $b(t){return ze(t)?Nt(t,Or):Wn(t)?[t]:zn(rh(at(t)))}function qb(t){var i=++Km;return at(t)+i}var Lb=Ma(function(t,i){return t+i},0),Hb=wc("ceil"),Gb=Ma(function(t,i){return t/i},1),Vb=wc("floor");function Ub(t){return t&&t.length?Fa(t,$n,ac):r}function Wb(t,i){return t&&t.length?Fa(t,Te(i,2),ac):r}function Xb(t){return Ld(t,$n)}function Yb(t,i){return Ld(t,Te(i,2))}function Zb(t){return t&&t.length?Fa(t,$n,dc):r}function Jb(t,i){return t&&t.length?Fa(t,Te(i,2),dc):r}var Kb=Ma(function(t,i){return t*i},1),Qb=wc("round"),ew=Ma(function(t,i){return t-i},0);function tw(t){return t&&t.length?Yu(t,$n):0}function nw(t,i){return t&&t.length?Yu(t,Te(i,2)):0}return S.after=CD,S.ary=ph,S.assign=d_,S.assignIn=Fh,S.assignInWith=Xa,S.assignWith=f_,S.at=h_,S.before=gh,S.bind=Bc,S.bindAll=vb,S.bindKey=mh,S.castArray=PD,S.chain=dh,S.chunk=V1,S.compact=U1,S.concat=W1,S.cond=Db,S.conforms=_b,S.constant=qc,S.countBy=tD,S.create=p_,S.curry=yh,S.curryRight=vh,S.debounce=Dh,S.defaults=g_,S.defaultsDeep=m_,S.defer=ED,S.delay=SD,S.difference=X1,S.differenceBy=Y1,S.differenceWith=Z1,S.drop=J1,S.dropRight=K1,S.dropRightWhile=Q1,S.dropWhile=ev,S.fill=tv,S.filter=rD,S.flatMap=sD,S.flatMapDeep=aD,S.flatMapDepth=uD,S.flatten=ah,S.flattenDeep=nv,S.flattenDepth=rv,S.flip=AD,S.flow=wb,S.flowRight=xb,S.fromPairs=iv,S.functions=x_,S.functionsIn=C_,S.groupBy=cD,S.initial=sv,S.intersection=av,S.intersectionBy=uv,S.intersectionWith=cv,S.invert=S_,S.invertBy=A_,S.invokeMap=dD,S.iteratee=Lc,S.keyBy=fD,S.keys=ln,S.keysIn=kn,S.map=La,S.mapKeys=N_,S.mapValues=T_,S.matches=Cb,S.matchesProperty=Eb,S.memoize=Ga,S.merge=I_,S.mergeWith=Nh,S.method=Sb,S.methodOf=Ab,S.mixin=Hc,S.negate=Va,S.nthArg=Nb,S.omit=R_,S.omitBy=O_,S.once=FD,S.orderBy=hD,S.over=Tb,S.overArgs=ND,S.overEvery=Ib,S.overSome=Rb,S.partial=Mc,S.partialRight=_h,S.partition=pD,S.pick=B_,S.pickBy=Th,S.property=zh,S.propertyOf=Ob,S.pull=hv,S.pullAll=ch,S.pullAllBy=pv,S.pullAllWith=gv,S.pullAt=mv,S.range=Bb,S.rangeRight=Mb,S.rearg=TD,S.reject=yD,S.remove=yv,S.rest=ID,S.reverse=Rc,S.sampleSize=DD,S.set=P_,S.setWith=z_,S.shuffle=_D,S.slice=vv,S.sortBy=xD,S.sortedUniq=Ev,S.sortedUniqBy=Sv,S.split=sb,S.spread=RD,S.tail=Av,S.take=Fv,S.takeRight=Nv,S.takeRightWhile=Tv,S.takeWhile=Iv,S.tap=Uv,S.throttle=OD,S.thru=qa,S.toArray=Eh,S.toPairs=Ih,S.toPairsIn=Rh,S.toPath=$b,S.toPlainObject=Ah,S.transform=j_,S.unary=BD,S.union=Rv,S.unionBy=Ov,S.unionWith=Bv,S.uniq=Mv,S.uniqBy=Pv,S.uniqWith=zv,S.unset=k_,S.unzip=Oc,S.unzipWith=lh,S.update=$_,S.updateWith=q_,S.values=Wo,S.valuesIn=L_,S.without=jv,S.words=Mh,S.wrap=MD,S.xor=kv,S.xorBy=$v,S.xorWith=qv,S.zip=Lv,S.zipObject=Hv,S.zipObjectDeep=Gv,S.zipWith=Vv,S.entries=Ih,S.entriesIn=Rh,S.extend=Fh,S.extendWith=Xa,Hc(S,S),S.add=Lb,S.attempt=Ph,S.camelCase=U_,S.capitalize=Oh,S.ceil=Hb,S.clamp=H_,S.clone=zD,S.cloneDeep=kD,S.cloneDeepWith=$D,S.cloneWith=jD,S.conformsTo=qD,S.deburr=Bh,S.defaultTo=bb,S.divide=Gb,S.endsWith=W_,S.eq=vr,S.escape=X_,S.escapeRegExp=Y_,S.every=nD,S.find=iD,S.findIndex=oh,S.findKey=y_,S.findLast=oD,S.findLastIndex=sh,S.findLastKey=v_,S.floor=Vb,S.forEach=fh,S.forEachRight=hh,S.forIn=D_,S.forInRight=__,S.forOwn=b_,S.forOwnRight=w_,S.get=jc,S.gt=LD,S.gte=HD,S.has=E_,S.hasIn=kc,S.head=uh,S.identity=$n,S.includes=lD,S.indexOf=ov,S.inRange=G_,S.invoke=F_,S.isArguments=lo,S.isArray=ze,S.isArrayBuffer=GD,S.isArrayLike=jn,S.isArrayLikeObject=Ht,S.isBoolean=VD,S.isBuffer=Ai,S.isDate=UD,S.isElement=WD,S.isEmpty=XD,S.isEqual=YD,S.isEqualWith=ZD,S.isError=Pc,S.isFinite=JD,S.isFunction=ti,S.isInteger=bh,S.isLength=Ua,S.isMap=wh,S.isMatch=KD,S.isMatchWith=QD,S.isNaN=e_,S.isNative=t_,S.isNil=r_,S.isNull=n_,S.isNumber=xh,S.isObject=Rt,S.isObjectLike=zt,S.isPlainObject=Os,S.isRegExp=zc,S.isSafeInteger=i_,S.isSet=Ch,S.isString=Wa,S.isSymbol=Wn,S.isTypedArray=Uo,S.isUndefined=o_,S.isWeakMap=s_,S.isWeakSet=a_,S.join=lv,S.kebabCase=Z_,S.last=cr,S.lastIndexOf=dv,S.lowerCase=J_,S.lowerFirst=K_,S.lt=u_,S.lte=c_,S.max=Ub,S.maxBy=Wb,S.mean=Xb,S.meanBy=Yb,S.min=Zb,S.minBy=Jb,S.stubArray=Vc,S.stubFalse=Uc,S.stubObject=Pb,S.stubString=zb,S.stubTrue=jb,S.multiply=Kb,S.nth=fv,S.noConflict=Fb,S.noop=Gc,S.now=Ha,S.pad=Q_,S.padEnd=eb,S.padStart=tb,S.parseInt=nb,S.random=V_,S.reduce=gD,S.reduceRight=mD,S.repeat=rb,S.replace=ib,S.result=M_,S.round=Qb,S.runInContext=$,S.sample=vD,S.size=bD,S.snakeCase=ob,S.some=wD,S.sortedIndex=Dv,S.sortedIndexBy=_v,S.sortedIndexOf=bv,S.sortedLastIndex=wv,S.sortedLastIndexBy=xv,S.sortedLastIndexOf=Cv,S.startCase=ab,S.startsWith=ub,S.subtract=ew,S.sum=tw,S.sumBy=nw,S.template=cb,S.times=kb,S.toFinite=ni,S.toInteger=$e,S.toLength=Sh,S.toLower=lb,S.toNumber=lr,S.toSafeInteger=l_,S.toString=at,S.toUpper=db,S.trim=fb,S.trimEnd=hb,S.trimStart=pb,S.truncate=gb,S.unescape=mb,S.uniqueId=qb,S.upperCase=yb,S.upperFirst=$c,S.each=fh,S.eachRight=hh,S.first=uh,Hc(S,function(){var t={};return Ir(S,function(i,a){dt.call(S.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),S.VERSION=o,ir(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){S[t].placeholder=S}),ir(["drop","take"],function(t,i){Xe.prototype[t]=function(a){a=a===r?1:rn($e(a),0);var p=this.__filtered__&&!i?new Xe(this):this.clone();return p.__filtered__?p.__takeCount__=vn(a,p.__takeCount__):p.__views__.push({size:vn(a,ue),type:t+(p.__dir__<0?"Right":"")}),p},Xe.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),ir(["filter","map","takeWhile"],function(t,i){var a=i+1,p=a==R||a==k;Xe.prototype[t]=function(b){var A=this.clone();return A.__iteratees__.push({iteratee:Te(b,3),type:a}),A.__filtered__=A.__filtered__||p,A}}),ir(["head","last"],function(t,i){var a="take"+(i?"Right":"");Xe.prototype[t]=function(){return this[a](1).value()[0]}}),ir(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");Xe.prototype[t]=function(){return this.__filtered__?new Xe(this):this[a](1)}}),Xe.prototype.compact=function(){return this.filter($n)},Xe.prototype.find=function(t){return this.filter(t).head()},Xe.prototype.findLast=function(t){return this.reverse().find(t)},Xe.prototype.invokeMap=Ve(function(t,i){return typeof t=="function"?new Xe(this):this.map(function(a){return As(a,t,i)})}),Xe.prototype.reject=function(t){return this.filter(Va(Te(t)))},Xe.prototype.slice=function(t,i){t=$e(t);var a=this;return a.__filtered__&&(t>0||i<0)?new Xe(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==r&&(i=$e(i),a=i<0?a.dropRight(-i):a.take(i-t)),a)},Xe.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Xe.prototype.toArray=function(){return this.take(ue)},Ir(Xe.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),p=/^(?:head|last)$/.test(i),b=S[p?"take"+(i=="last"?"Right":""):i],A=p||/^find/.test(i);b&&(S.prototype[i]=function(){var M=this.__wrapped__,P=p?[1]:arguments,q=M instanceof Xe,ie=P[0],oe=q||ze(M),ce=function(We){var Ze=b.apply(S,_i([We],P));return p&&ye?Ze[0]:Ze};oe&&a&&typeof ie=="function"&&ie.length!=1&&(q=oe=!1);var ye=this.__chain__,xe=!!this.__actions__.length,Ie=A&&!ye,Le=q&&!xe;if(!A&&oe){M=Le?M:new Xe(this);var Re=t.apply(M,P);return Re.__actions__.push({func:qa,args:[ce],thisArg:r}),new sr(Re,ye)}return Ie&&Le?t.apply(this,P):(Re=this.thru(ce),Ie?p?Re.value()[0]:Re.value():Re)})}),ir(["pop","push","shift","sort","splice","unshift"],function(t){var i=ha[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",p=/^(?:pop|shift)$/.test(t);S.prototype[t]=function(){var b=arguments;if(p&&!this.__chain__){var A=this.value();return i.apply(ze(A)?A:[],b)}return this[a](function(M){return i.apply(ze(M)?M:[],b)})}}),Ir(Xe.prototype,function(t,i){var a=S[i];if(a){var p=a.name+"";dt.call(qo,p)||(qo[p]=[]),qo[p].push({name:i,func:a})}}),qo[Ba(r,_).name]=[{name:"wrapper",func:r}],Xe.prototype.clone=my,Xe.prototype.reverse=yy,Xe.prototype.value=vy,S.prototype.at=Wv,S.prototype.chain=Xv,S.prototype.commit=Yv,S.prototype.next=Zv,S.prototype.plant=Kv,S.prototype.reverse=Qv,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=eD,S.prototype.first=S.prototype.head,_s&&(S.prototype[_s]=Jv),S},jo=Ym();Qe?((Qe.exports=jo)._=jo,Ne._=jo):_e._=jo}).call(G6)}(Vs,Vs.exports)),Vs.exports}var U6=V6();const Jt=lg(U6),W6=(e,n)=>e[n]?.[Dt.Input]??e[n]?.[Dt.InferredInput]??Zn.fromJson({Object:{}}),Hu=(e,{attachGlobals:n=!0,disabled:r=!1}={})=>{const o=st(({nodeTypes:s,globalType:u})=>{if(!(!yo()||r))return{nodeTypes:s,globalType:u}});return T.useMemo(()=>{if(!o?.nodeTypes)return;const s=W6(o.nodeTypes,e);return n&&Object.entries(o?.globalType??{}).forEach(([u,l])=>s.set(u,l)),s},[o?.globalType,o?.nodeTypes,n])},ou=(e,n)=>{const r=(e??"").trim(),o=(n??"").trim();return r===o},Ys=(e,n,r={})=>{const{idField:o="id",compareFields:s}=r,u=m=>m[o]||m._id,l=new Map(n.map((m,D)=>[u(m),{...m,index:D}])),c=new Map(e.map((m,D)=>[u(m),{...m,index:D}])),d=[],f=new Set,h=new Set;e.forEach((m,D)=>{l.has(u(m))||f.add(D)}),n.forEach((m,D)=>{c.has(u(m))||h.add(D)});const g=(m,D)=>{const C=Array.from(f).filter(x=>x<D).length,y=Array.from(h).filter(x=>x<m).length,w=D-C;return m-y!==w};return e.forEach((m,D)=>{const C=l.get(u(m));if(!C)d.push({...m,originalIndex:D,_diff:{status:"added",newIndex:D}});else{const y=g(C.index,D),w=s?s(m,C):{hasChanges:!1};w.hasChanges||y?d.push({...m,originalIndex:D,_diff:{status:"modified",positionChanged:y,previousIndex:C.index,newIndex:D,...w.fields?{fields:w.fields}:{}}}):d.push({...m,originalIndex:D,_diff:{status:"unchanged"}})}}),n.forEach((m,D)=>{if(!c.has(u(m))){let C=D;for(;C<d.length&&l.get(u(d[C]))?.index<D;)C++;d.splice(C,0,{...m,originalIndex:D,isRemoved:!0,_diff:{status:"removed",previousIndex:D}})}}),d.map(({originalIndex:m,isRemoved:D,...C})=>C)},nm=(e,{trace:n,decisionGraph:r})=>{const o=Object.values(n).find(u=>u.id===e)?.input,s=Object.fromEntries(Object.values(n).map(u=>{const l=r.nodes.find(c=>c.id===u.id);return!l||l.type==="outputNode"?null:[u.name,u.output]}).filter(u=>!!u));return{data:o,$nodes:s}},rm=({id:e,manager:n})=>{const r=kt(),{nodeName:o,nodeTrace:s,inputData:u,nodeSnapshot:l,viewConfig:c}=st(({simulate:g,decisionGraph:m,viewConfig:D})=>({nodeName:m.nodes.find(C=>C.id===e)?.name,nodeTrace:qe(g).with({result:Ge.nonNullable},({result:C})=>C.trace[e]).otherwise(()=>null),inputData:qe(g).with({result:Ge.nonNullable},({result:C})=>nm(e,{trace:C.trace,decisionGraph:m})).otherwise(()=>null),nodeSnapshot:qe(g).with({result:Ge.nonNullable},({result:C})=>C.snapshot.nodes.find(y=>y.id===e)?.content).otherwise(()=>null),viewConfig:D})),{disabled:d,content:f}=st(({disabled:g,decisionGraph:m})=>({disabled:g,content:(m?.nodes??[]).find(D=>D.id===e)?.content})),h=T.useMemo(()=>{if(!s||!u||!l)return;if(!yo())return{trace:s,snapshot:l};const g={...u};return f?.inputField&&(g.data=yg(g.data,f.inputField,{})),{trace:s,inputData:g,snapshot:l}},[s,l,u]);return E.jsx(kw,{id:e,name:o,tableHeight:"100%",value:f,manager:n,disabled:d,permission:c?.enabled?c?.permissions?.[e]:"edit:full",debug:h,onChange:g=>{r.updateNode(e,m=>(Object.assign(m.content,g),m))}})};rm.__docgenInfo={description:"",methods:[],displayName:"TabDecisionTable",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const X6=navigator.platform.includes("Mac"),Bp={Ctrl:"⌘",Backspace:"⌫",Alt:"⌥"},mu={shortcut:e=>X6?Object.keys(Bp).reduce((n,r)=>n.replaceAll(r,Bp[r]),e):e},Mp={},Ru=(e,n)=>{const[r,o]=T.useState(()=>Mp?.[e]??n);return T.useEffect(()=>{Mp[e]=r},[r]),[r,o]};function Pp(e,n=0){const r=performance.now(),o={};function s(){o.id=requestAnimationFrame(u=>{u-r>n?e():s()})}return s(),o}function zp(e){e.id&&cancelAnimationFrame(e.id)}function Y6(e,n){const[r,o]=T.useState(e?"enter":"from"),s=T.useRef({}),[u,l]=T.useState(e);return T.useEffect(function(){return zp(s.current),e?(o("from"),l(!0),Pp(()=>{o("enter")})):(o("leave"),s.current=Pp(()=>{l(!1)},n)),()=>{zp(s.current)}},[e,n]),{stage:r,shouldMount:u}}function Z6({state:e,timeout:n,children:r}){const{stage:o,shouldMount:s}=Y6(e,n);return r(o,s)}const td=({className:e,...n})=>E.jsx("div",{className:Ke("grl-dn__graphCard",e),...n});td.__docgenInfo={description:"",methods:[],displayName:"GraphCard"};var zi=(e=>(e.Blue="var(--node-color-blue)",e.Purple="var(--node-color-purple)",e.Orange="var(--node-color-orange)",e.Green="var(--node-color-green)",e))(zi||{});const Pd=({icon:e,name:n,children:r,actions:o=[],disabled:s=!1,isSelected:u=!1,noBodyPadding:l=!1,color:c="primary",onNameChange:d,menuItems:f=[],status:h,diffStatus:g,compactMode:m,listMode:D,helper:C,details:y,detailsOpen:w=!1,detailsTitle:_="Details",onDetailsClose:x})=>{const N=qe(c).with("primary",()=>zi.Blue).otherwise(F=>F);return E.jsxs("div",{className:Ke("grl-dn",m&&"grl-dn--compact",D&&"grl-dn--list",!g&&u&&"grl-dn--selected",h&&`grl-dn--${h}`,g&&`grl-dn--diff-${g}`),style:{"--node-color":N},onKeyDown:F=>F.stopPropagation(),children:[E.jsxs(td,{children:[E.jsxs("div",{className:"grl-dn__status-bar",children:[Array.isArray(C)&&C.filter(F=>!!F).map((F,j)=>E.jsx("div",{className:Ke("grl-dn__status-icon"),children:F},j)),h==="error"&&E.jsx("div",{className:Ke("grl-dn__status-icon",`grl-dn__status-icon--${h}`),children:E.jsx(Do,{})}),E.jsx(dg,{status:g,style:{fontSize:16}})]}),E.jsxs("div",{className:Ke("grl-dn__header",m&&"compact"),children:[E.jsx("div",{className:Ke("grl-dn__header__icon",m&&"compact"),children:e}),E.jsx($w,{onChange:d,disabled:s,value:n}),f.length>0&&E.jsx("div",{className:Ke("grl-dn__header__actions","nodrag"),children:E.jsx(Zs,{trigger:["click"],overlayStyle:{minWidth:250},menu:{items:f},children:E.jsx(ut,{type:"text",size:"small",icon:E.jsx(CC,{})})})})]}),r&&E.jsx("div",{className:Ke("grl-dn__body",o.length===0&&"grl-dn__body--no-footer",l&&"grl-dn__body--no-padding"),children:r}),o.length>0&&E.jsx("div",{className:Ke("grl-dn__footer","nodrag"),children:E.jsx("div",{className:"grl-dn__footer__actions",children:o})})]}),E.jsx(Z6,{state:w,timeout:100,children:(F,j)=>j&&E.jsx(td,{className:"nodrag",style:{transition:"0.1s ease-in-out",transform:F==="enter"?"translateY(0)":"translateY(-10px)",opacity:F==="enter"?1:0},children:E.jsxs("div",{className:"grl-dn__details",children:[E.jsxs("div",{className:"grl-dn__details__header",children:[E.jsx(Kt.Text,{className:"grl-dn__details__header__text",children:_}),E.jsx(ut,{type:"text",size:"small",className:"grl-dn__details__header__close",icon:E.jsx(Do,{style:{fontSize:8}}),onClick:x})]}),E.jsx("div",{className:"grl-dn__details__body",children:y})]})})})]})};Pd.__docgenInfo={description:"",methods:[],displayName:"DecisionNode",props:{name:{required:!1,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},type:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},helper:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(React.ReactNode | false)[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:"",defaultValue:{value:"[]",computed:!1}},status:{required:!1,tsType:{name:"union",raw:"'error' | 'success' | 'warning'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'success'"},{name:"literal",value:"'warning'"}]},description:""},diffStatus:{required:!1,tsType:{name:"union",raw:"'removed' | 'added' | 'modified' | 'moved'",elements:[{name:"literal",value:"'removed'"},{name:"literal",value:"'added'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'moved'"}]},description:""},noBodyPadding:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | string",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"string"}]},description:"",defaultValue:{value:"'primary'",computed:!1}},menuItems:{required:!1,tsType:{name:"MenuProps['items']",raw:"MenuProps['items']"},description:"",defaultValue:{value:"[]",computed:!1}},onNameChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},compactMode:{required:!1,tsType:{name:"boolean"},description:""},listMode:{required:!1,tsType:{name:"boolean"},description:""},details:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},detailsOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},detailsTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Details'",computed:!1}},onDetailsClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const ji=W.forwardRef(({id:e,handleLeft:n=!0,handleRight:r=!0,className:o,specification:s,name:u,displayError:l,helper:c,actions:d,...f},h)=>{const[g,m]=Ru(`node:details:${e}`,0),[D,C]=Ru(`node:detailsOpen:${e}`,!1),y=kt(),{nodeError:w,nodeTrace:_,disabled:x,compactMode:N}=st(({simulate:K,disabled:ee,compactMode:B})=>({disabled:ee,nodeTrace:qe(K).with({result:Ge._},({result:V})=>V?.trace?.[e]).otherwise(()=>null),nodeError:qe(K).with({error:{data:{nodeId:e}}},({error:V})=>V).otherwise(()=>null),compactMode:B})),{diff:F}=ps(e),j=s.renderSettings,H=[s.documentationUrl?{key:"documentation",label:E.jsx(ks,{left:"Documentation",right:E.jsx(Ng,{})}),onClick:()=>window.open(s.documentationUrl,"_href")}:null,s.documentationUrl?{key:"divider-1",type:"divider"}:null,!l&&{key:"copy-clipboard",label:E.jsx(ks,{left:"Copy to clipboard",right:mu.shortcut("Ctrl + C")}),onClick:()=>{}},!l&&{key:"duplicate",disabled:x,label:E.jsx(ks,{left:"Duplicate",right:mu.shortcut("Ctrl + D")}),onClick:()=>y.duplicateNodes([e])},!l&&{key:"divider-2",type:"divider"},{key:"delete",danger:!0,label:E.jsx(ks,{left:"Delete",right:mu.shortcut("Backspace")}),disabled:x,onClick:()=>Mu.confirm({icon:null,title:"Delete node",content:E.jsxs(Kt.Text,{children:["Are you sure you want to delete ",E.jsx(Kt.Text,{strong:!0,children:u})," node."]}),okButtonProps:{danger:!0},onOk:()=>y.removeNodes([e])})}].filter(K=>K!==!1);return E.jsxs("div",{className:Ke("grl-graph-node",o),style:{minWidth:220,maxWidth:220},ref:h,onClick:K=>{const ee=qe(navigator.platform.includes("Mac")).with(!0,()=>K.metaKey).otherwise(()=>K.ctrlKey);y.triggerNodeSelect(e,ee?"toggle":"only")},children:[n&&E.jsx(Pi,{className:Ke("grl-graph-node__handle-left",N&&"compact"),type:"target",position:Ce.Left,...typeof n!="boolean"?n:{}}),E.jsx(Pd,{menuItems:H,...f,disabled:x,icon:s.icon,color:s.color,type:s.displayName,helper:c,name:u,details:j?E.jsx(j,{id:e}):void 0,detailsOpen:D,detailsTitle:qe(g).with(0,()=>"Settings").otherwise(()=>{}),onDetailsClose:()=>C(!1),actions:j?[...d??[],E.jsx(ut,{type:"text",style:{marginLeft:"auto"},onClick:()=>{C(g===0?!D:!0),m(0)},children:"Settings"},"settings")]:d,status:qe([_,w,l]).with([Ge._,Ge._,!0],()=>"error").with([Ge._,Ge.not(Ge.nullish),Ge._],()=>"error").with([Ge.not(Ge.nullish),Ge._,Ge._],()=>"success").otherwise(()=>{}),diffStatus:qe([F]).with([{status:"added"}],()=>"added").with([{status:"modified"}],()=>"modified").with([{status:"removed"}],()=>"removed").with([{status:"moved"}],()=>"moved").otherwise(()=>{}),onNameChange:K=>{y.updateNode(e,ee=>(ee.name=K,ee))},compactMode:N}),r&&E.jsx(Pi,{className:Ke("grl-graph-node__handle-right",N&&"compact"),type:"source",position:Ce.Right,...typeof r!="boolean"?r:{}})]})});ji.__docgenInfo={description:"",methods:[],displayName:"GraphNode",props:{id:{required:!0,tsType:{name:"string"},description:""},handleLeft:{required:!1,tsType:{name:"union",raw:"boolean | Partial<HandleProps>",elements:[{name:"boolean"},{name:"Partial",elements:[{name:"HandleProps"}],raw:"Partial<HandleProps>"}]},description:"",defaultValue:{value:"true",computed:!1}},handleRight:{required:!1,tsType:{name:"union",raw:"boolean | Partial<HandleProps>",elements:[{name:"boolean"},{name:"Partial",elements:[{name:"HandleProps"}],raw:"Partial<HandleProps>"}]},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},specification:{required:!0,tsType:{name:"Pick",elements:[{name:"signature",type:"object",raw:`{
  icon?: React.ReactNode;
  type: string;
  color?: DecisionNodeProps['color'];
  group?: string;
  displayName: string | React.ReactNode;
  documentationUrl?: string;
  shortDescription?: string;
  helper?: string | React.ReactNode;
  renderTab?: (props: { id: string; manager?: DragDropManager }) => React.ReactNode;
  getDiffContent?: (current: T, previous: T) => T;
  generateNode: (params: GenerateNodeParams) => Omit<DecisionNode<T>, 'position' | 'id' | 'type'>;
  renderNode: React.FC<MinimalNodeProps & { specification: MinimalNodeSpecification }>;
  renderSettings?: React.FC<{ id: string }>;
  inferTypes?: {
    needsUpdate: (content: T, prevContent: T) => boolean;
    determineOutputType: (state: InferTypeData<T>) => VariableType;
  };

  onNodeAdd?: (node: DecisionNode<T>) => Promise<DecisionNode<T>>;
}`,signature:{properties:[{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"type",value:{name:"string",required:!0}},{key:"color",value:{name:"union",raw:"DecisionNodeProps['color']",required:!1}},{key:"group",value:{name:"string",required:!1}},{key:"displayName",value:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}],required:!0}},{key:"documentationUrl",value:{name:"string",required:!1}},{key:"shortDescription",value:{name:"string",required:!1}},{key:"helper",value:{name:"union",raw:"string | React.ReactNode",elements:[{name:"string"},{name:"ReactReactNode",raw:"React.ReactNode"}],required:!1}},{key:"renderTab",value:{name:"signature",type:"function",raw:"(props: { id: string; manager?: DragDropManager }) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ id: string; manager?: DragDropManager }",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"manager",value:{name:"DragDropManager",required:!1}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}},required:!1}},{key:"getDiffContent",value:{name:"signature",type:"function",raw:"(current: T, previous: T) => T",signature:{arguments:[{type:{name:"T"},name:"current"},{type:{name:"T"},name:"previous"}],return:{name:"T"}},required:!1}},{key:"generateNode",value:{name:"signature",type:"function",raw:"(params: GenerateNodeParams) => Omit<DecisionNode<T>, 'position' | 'id' | 'type'>",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  index: number;
}`,signature:{properties:[{key:"index",value:{name:"number",required:!0}}]}},name:"params"}],return:{name:"Omit",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}},{name:"union",raw:"'position' | 'id' | 'type'",elements:[{name:"literal",value:"'position'"},{name:"literal",value:"'id'"},{name:"literal",value:"'type'"}]}],raw:"Omit<DecisionNode<T>, 'position' | 'id' | 'type'>"}},required:!0}},{key:"renderNode",value:{name:"ReactFC",raw:"React.FC<MinimalNodeProps & { specification: MinimalNodeSpecification }>",elements:[{name:"intersection",raw:"MinimalNodeProps & { specification: MinimalNodeSpecification }",elements:[{name:"Pick",elements:[{name:"NodeProps"},{name:"union",raw:"'id' | 'data' | 'selected'",elements:[{name:"literal",value:"'id'"},{name:"literal",value:"'data'"},{name:"literal",value:"'selected'"}]}],raw:"Pick<NodeProps, 'id' | 'data' | 'selected'>"},{name:"signature",type:"object",raw:"{ specification: MinimalNodeSpecification }",signature:{properties:[{key:"specification",value:{name:"MinimalNodeSpecification",required:!0}}]}}]}],required:!0}},{key:"renderSettings",value:{name:"ReactFC",raw:"React.FC<{ id: string }>",elements:[{name:"signature",type:"object",raw:"{ id: string }",signature:{properties:[{key:"id",value:{name:"string",required:!0}}]}}],required:!1}},{key:"inferTypes",value:{name:"signature",type:"object",raw:`{
  needsUpdate: (content: T, prevContent: T) => boolean;
  determineOutputType: (state: InferTypeData<T>) => VariableType;
}`,signature:{properties:[{key:"needsUpdate",value:{name:"signature",type:"function",raw:"(content: T, prevContent: T) => boolean",signature:{arguments:[{type:{name:"T"},name:"content"},{type:{name:"T"},name:"prevContent"}],return:{name:"boolean"}},required:!0}},{key:"determineOutputType",value:{name:"signature",type:"function",raw:"(state: InferTypeData<T>) => VariableType",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  input: VariableType;
  content: T;
}`,signature:{properties:[{key:"input",value:{name:"VariableType",required:!0}},{key:"content",value:{name:"T",required:!0}}]}},name:"state"}],return:{name:"VariableType"}},required:!0}}]},required:!1}},{key:"onNodeAdd",value:{name:"signature",type:"function",raw:"(node: DecisionNode<T>) => Promise<DecisionNode<T>>",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}},name:"node"}],return:{name:"Promise",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!1}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"Promise<DecisionNode<T>>"}},required:!1}}]}},{name:"union",raw:"'color' | 'icon' | 'displayName' | 'documentationUrl' | 'helper' | 'renderSettings'",elements:[{name:"literal",value:"'color'"},{name:"literal",value:"'icon'"},{name:"literal",value:"'displayName'"},{name:"literal",value:"'documentationUrl'"},{name:"literal",value:"'helper'"},{name:"literal",value:"'renderSettings'"}]}],raw:`Pick<
  NodeSpecification,
  'color' | 'icon' | 'displayName' | 'documentationUrl' | 'helper' | 'renderSettings'
>`},description:""},displayError:{required:!1,tsType:{name:"boolean"},description:""}}};const im={type:et.DecisionTable,icon:E.jsx(Kx,{size:"1em"}),displayName:"Decision table",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/decision-tables",shortDescription:"Rules spreadsheet",renderTab:({id:e,manager:n})=>E.jsx(rm,{id:e,manager:n}),getDiffContent:(e,n)=>Tt(e,r=>{const o={};(e.executionMode??"single")!==(n.executionMode??"single")&&Jt.set(o,"executionMode",{status:"modified",previousValue:n.executionMode}),(e.hitPolicy??"first")!==(n.hitPolicy??"first")&&Jt.set(o,"hitPolicy",{status:"modified",previousValue:n.hitPolicy}),(e.inputField??"")!==(n.inputField??"")&&Jt.set(o,"inputField",{status:"modified",previousValue:n.inputField}),(e.outputPath??"")!==(n.outputPath??"")&&Jt.set(o,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough??!1)!==(n.passThrough??!1)&&Jt.set(o,"passThrough",{status:"modified",previousValue:n.passThrough});const s=Ys(e?.inputs||[],n?.inputs||[],{compareFields:(c,d)=>{const f=(c.name??"")!==(d.name??""),h=(c.field??"")!==(d.field??""),g=(c.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:f||h||g,fields:{...f&&{name:{status:"modified",previousValue:d.name}},...h&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),u=Ys(e?.outputs||[],n?.outputs||[],{compareFields:(c,d)=>{const f=(c.name??"")!==(d.name??""),h=(c.field??"")!==(d.field??""),g=(c.defaultValue??"")!==(d.defaultValue??"");return{hasChanges:f||h||g,fields:{...f&&{name:{status:"modified",previousValue:d.name}},...h&&{field:{status:"modified",previousValue:d.field}},...g&&{defaultValue:{status:"modified",previousValue:d.defaultValue}}}}}}),l=Ys(e?.rules||[],n?.rules||[],{idField:"_id",compareFields:(c,d)=>{const f=(c._description??"")!==(d._description??""),h={};s.forEach(m=>{m._diff?.status==="added"?h[m.id]={status:"added"}:m._diff?.status==="removed"?h[m.id]={status:"removed"}:(c?.[m.id]??"")!==(d?.[m.id]??"")&&(h[m.id]={status:"modified",previousValue:d?.[m.id]})});const g={};return u.forEach(m=>{m?._diff?.status==="added"?g[m.id]={status:"added"}:m?._diff?.status==="removed"?g[m.id]={status:"removed"}:(c?.[m.id]??"")!==(d?.[m.id]??"")&&(g[m.id]={status:"modified",previousValue:d?.[m.id]})}),{hasChanges:f||Object.keys(h).length>0||Object.keys(g).length>0,fields:{...f&&{_description:{status:"modified",previousValue:d._description}},...h,...g}}}});return r.inputs=s,r.outputs=u,r.rules=l,s.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&Jt.set(o,"inputs",{status:"modified"}),u.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&Jt.set(o,"outputs",{status:"modified"}),l.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&Jt.set(o,"rules",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:(e,n)=>!Jn(e,n),determineOutputType:({content:e,input:n})=>{let r=n.clone(),o=Zn.fromJson({Object:{}});if(e.inputField&&(r=n.calculateType(e.inputField)),e.executionMode==="loop"&&(r=r.arrayItem()),(e?.outputs||[]).filter(u=>!!u.field).forEach(u=>{for(const l of e.rules){if(!l[u.id])continue;const c=r.calculateType(l[u.id]),d=c.toJson();if(d!=="Any"&&d!=="Null"){o.set(u.field,c);return}}o.setJson(u.field,"Any")}),e.hitPolicy==="collect"&&(o=o.toArray()),e.executionMode==="loop"&&(o=o.toArray()),e.outputPath){const u=Zn.fromJson({Object:{}});u.set(e.outputPath,o),o=u}return e.passThrough&&(o=n.merge(o)),o}},generateNode:({index:e})=>({name:`decisionTable${e}`,content:{hitPolicy:"first",inputs:[{id:crypto.randomUUID(),name:"Input"}],outputs:[{id:crypto.randomUUID(),field:"output",name:"Output"}],rules:[],inputField:null,outputPath:null,passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=kt(),{passThrough:u,executionMode:l}=st(({decisionGraph:c})=>{const d=(c?.nodes??[]).find(f=>f.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return E.jsx(ji,{id:e,specification:o,name:n.name,isSelected:r,helper:[l==="loop"&&E.jsx(Ig,{}),u&&E.jsx(od,{})],actions:[E.jsx(ut,{type:"text",onClick:()=>s.openTab(e),children:"Edit Table"},"edit-table")]})},renderSettings:({id:e})=>{const n=kt(),r=Hu(e),{contentDiff:o}=ps(e),{fields:s,disabled:u}=st(({decisionGraph:c,disabled:d})=>{const f=(c?.nodes??[]).find(h=>h.id===e)?.content;return{disabled:d,fields:{passThrough:f?.passThrough||!1,inputField:f?.inputField,outputPath:f?.outputPath,executionMode:f?.executionMode||"single",hitPolicy:f?.hitPolicy||"first"}}}),l=c=>{n.updateNode(e,d=>(Object.assign(d.content,c),d))};return E.jsxs("div",{className:"settings-form",children:[E.jsx(Pr.Item,{label:"Hit Policy",children:E.jsx(cd,{direction:"vertical",size:2,children:E.jsx(fl,{size:"small",previousValue:o?.fields?.hitPolicy?.previousValue,displayDiff:o?.fields?.hitPolicy?.status==="modified",disabled:u,value:s?.hitPolicy,onChange:c=>l({hitPolicy:c?.target?.value}),options:[{value:"first",label:"First"},{value:"collect",label:"Collect"}]})})}),E.jsx(Pr.Item,{label:"Passthrough",children:E.jsx(id,{disabled:u,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:c=>l({passThrough:c})})}),E.jsx(Pr.Item,{label:"Input field",children:E.jsx(Ou,{variableType:r,disabled:u,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:c=>l({inputField:c?.trim()||null})})}),E.jsx(Pr.Item,{label:"Output path",children:E.jsx(fg,{size:"small",readOnly:u,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:c=>l({outputPath:c?.target?.value?.trim()||null})})}),E.jsx(Pr.Item,{label:"Execution mode",children:E.jsx(fl,{size:"small",disabled:u,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:c=>l({executionMode:c?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},om=({id:e,manager:n})=>{const r=kt(),{disabled:o,content:s}=st(({disabled:h,decisionGraph:g})=>({disabled:h,content:(g?.nodes??[]).find(m=>m.id===e)?.content})),{nodeTrace:u,inputData:l,nodeSnapshot:c,viewConfig:d}=st(({simulate:h,decisionGraph:g,viewConfig:m})=>({nodeTrace:qe(h).with({result:Ge.nonNullable},({result:D})=>D.trace[e]).otherwise(()=>null),inputData:qe(h).with({result:Ge.nonNullable},({result:D})=>nm(e,{trace:D.trace,decisionGraph:g})).otherwise(()=>null),nodeSnapshot:qe(h).with({result:Ge.nonNullable},({result:D})=>D.snapshot.nodes.find(C=>C.id===e)?.content).otherwise(()=>null),viewConfig:m})),f=T.useMemo(()=>{if(!u||!l||!c)return;if(!yo())return{trace:u,snapshot:c};const h=Object.fromEntries(Object.entries(u.traceData).map(([m,D])=>[m,J6(D.result)])),g={...l,$:h};return s?.inputField&&(g.data=yg(g.data,s.inputField,{})),{trace:u,inputData:g,snapshot:c}},[u,c,l]);return E.jsx("div",{style:{height:"100%",overflowY:"auto",boxSizing:"border-box"},children:E.jsx(Yw,{value:s?.expressions,disabled:o,permission:d?.enabled?d?.permissions?.[e]:"edit:full",manager:n,debug:f,onChange:h=>{r.updateNode(e,g=>(g.content.expressions=h,g))}})})},J6=e=>{try{return JSON.parse(e)}catch{return null}};om.__docgenInfo={description:"",methods:[],displayName:"TabExpression",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const sm={type:et.Expression,icon:E.jsx(eC,{size:"1em"}),displayName:"Expression",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/expression",shortDescription:"Mapping utility",renderTab:({id:e,manager:n})=>E.jsx(om,{id:e,manager:n}),getDiffContent:(e,n)=>Tt(e,o=>{const s={};(e.executionMode||!1)!==(n.executionMode||!1)&&Jt.set(s,"executionMode",{status:"modified",previousValue:n.executionMode}),ou(e.inputField,n.inputField)||Jt.set(s,"inputField",{status:"modified",previousValue:n.inputField}),ou(e.outputPath,n.outputPath)||Jt.set(s,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough||!1)!==(n.passThrough||!1)&&Jt.set(s,"passThrough",{status:"modified",previousValue:n.passThrough});const u=Ys(e?.expressions||[],n?.expressions||[],{compareFields:(l,c)=>{const d=!ou(l.key,c.key),f=!ou(l.value,c.value);return{hasChanges:d||f,fields:{...d&&{key:{status:"modified",previousValue:c.key}},...f&&{value:{status:"modified",previousValue:c.value}}}}}});return o.expressions=u,u.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&Jt.set(s,"expressions",{status:"modified"}),Object.keys(s).length>0&&(o._diff={status:"modified",fields:s}),o}),inferTypes:{needsUpdate:(e,n)=>!Jn(e,n),determineOutputType:({input:e,content:n})=>{let r=e.clone(),o=Zn.fromJson({Object:{}});if(n.inputField&&(r=e.calculateType(n.inputField)),n.executionMode==="loop"&&(r=r.arrayItem()),(n.expressions||[]).forEach(s=>{if(!s.key||!s.value)return;const u=r.calculateType(s.value);r.set(`$.${s.key}`,u),o.set(s.key,u)}),n.executionMode==="loop"&&(o=o.toArray()),n.outputPath){const s=Zn.fromJson({Object:{}});s.set(n.outputPath,o),o=s}return n.passThrough&&(o=e.merge(o)),o}},generateNode:({index:e})=>({name:`expression${e}`,content:{inputField:null,outputPath:null,expressions:[],passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=kt(),{passThrough:u,executionMode:l}=st(({decisionGraph:c})=>{const d=(c?.nodes??[]).find(f=>f.id===e)?.content;return{passThrough:d?.passThrough||!1,executionMode:d?.executionMode}});return E.jsx(ji,{id:e,specification:o,name:n.name,isSelected:r,actions:[E.jsx(ut,{type:"text",onClick:()=>s.openTab(e),children:"Edit Expression"},"edit-table")],helper:[l==="loop"&&E.jsx(Ig,{}),u&&E.jsx(od,{})]})},renderSettings:({id:e})=>{const n=kt(),r=Hu(e),{contentDiff:o}=ps(e),{fields:s,disabled:u}=st(({decisionGraph:c,disabled:d})=>{const f=(c?.nodes??[]).find(h=>h.id===e)?.content;return{disabled:d,fields:{passThrough:f?.passThrough||!1,inputField:f?.inputField,outputPath:f?.outputPath,executionMode:f?.executionMode||"single"}}}),l=c=>{n.updateNode(e,d=>(Object.assign(d.content,c),d))};return E.jsxs("div",{className:"settings-form",children:[E.jsx(Pr.Item,{label:"Passthrough",children:E.jsx(id,{disabled:u,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:c=>l({passThrough:c})})}),E.jsx(Pr.Item,{label:"Input field",children:E.jsx(Ou,{variableType:r,disabled:u,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:c=>{l({inputField:c?.trim()||null})}})}),E.jsx(Pr.Item,{label:"Output path",children:E.jsx(fg,{size:"small",readOnly:u,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:c=>l({outputPath:c?.target?.value?.trim()||null})})}),E.jsx(Pr.Item,{label:"Execution mode",children:E.jsx(fl,{size:"small",disabled:u,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:c=>l({executionMode:c?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},K6=W.lazy(async()=>({default:(await Zw(()=>import("./index-ZlP2Eigh.js").then(n=>n.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]),import.meta.url)).Function})),am=({id:e})=>{const n=cm(e),r=kt(),o=Md(y=>y.onFunctionReady),[s,u]=T.useState(),l=Hu(e),{nodeTrace:c,disabled:d,content:f,nodeError:h,viewConfig:g}=st(({simulate:y,disabled:w,decisionGraph:_,viewConfig:x})=>({nodeTrace:qe(y).with({result:Ge._},({result:N})=>N?.trace?.[e]).otherwise(()=>null),nodeError:qe(y).with({error:{data:{nodeId:e}}},({error:N})=>N).otherwise(()=>null),disabled:w,content:(_?.nodes??[]).find(N=>N.id===e)?.content,viewConfig:x})),{diff:m,contentDiff:D}=ps(e),C=T.useMemo(()=>n===yu.Stable?D?.fields?.source?.previousValue:m?.fields?.content?.previousValue,[m,D]);return T.useEffect(()=>{if(!s)return;const y=s.languages.typescript.javascriptDefaults.getExtraLibs(),w=Object.entries(y).map(([_,x])=>({filePath:_,content:x.content}));s.languages.typescript.javascriptDefaults.setExtraLibs(w),o?.(s)},[s,o]),E.jsx(T.Suspense,{fallback:E.jsx(as,{}),children:E.jsx(K6,{onMonacoReady:y=>u(y),value:n===yu.Stable?f.source:f,previousValue:typeof C=="string"?C:void 0,error:h??void 0,inputData:l,permission:g?.enabled?g?.permissions?.[e]:"edit:full",onChange:y=>{r.updateNode(e,w=>(n===yu.Stable?w.content={source:y}:w.content=y,w))},disabled:d,trace:c})})};am.__docgenInfo={description:"",methods:[],displayName:"TabFunction",props:{id:{required:!0,tsType:{name:"string"},description:""}}};const um={type:et.Function,icon:E.jsx(Kt.Text,{style:{color:"white",fontSize:"inherit"},children:"JS"}),displayName:"Function",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/functions",shortDescription:"Javascript lambda",color:zi.Orange,renderTab:({id:e})=>E.jsx(am,{id:e}),renderSettings:({id:e})=>{const n=kt(),{contentDiff:r}=ps(e),o=st(({decisionGraph:c,disabled:d})=>{const f=(c?.nodes??[]).find(h=>h.id===e)?.content;return typeof f=="string"?{version:"v1"}:{version:"v2",disabled:d,fields:{omitNodes:f?.omitNodes||null}}});if(o.version==="v1")return E.jsx("div",{className:"settings-form",children:"Settings not available for function v1."});const{disabled:s,fields:u}=o,l=c=>{n.updateNode(e,d=>(Object.assign(d.content,c),d))};return E.jsx("div",{className:"settings-form",children:E.jsx(Pr.Item,{label:"Omit $nodes",children:E.jsx(id,{disabled:s,size:"small",displayDiff:r?.fields?.omitNodes?.status==="modified",checked:!!u?.omitNodes,previousChecked:r?.fields?.omitNodes?.previousValue,onChange:c=>l({omitNodes:c})})})})},getDiffContent:(e,n)=>{const r={},o=qe(e).with(Ge.string,()=>0).otherwise(()=>1);qe([e,n]).with([Ge.string,Ge.string],([u,l])=>{u!==l&&Jt.set(r,"source",{previousValue:l,status:"modified"})}).with([{source:Ge.string},{source:Ge.string}],([u,l])=>{u?.source!==l?.source&&Jt.set(r,"source",{previousValue:l.source,status:"modified"}),(u?.omitNodes||!1)!==(l?.omitNodes||!1)&&Jt.set(r,"omitNodes",{status:"modified",previousValue:l.omitNodes})}).otherwise(()=>{});const s=Object.keys(r).length>0;return{...o===0?{source:e}:e,...s&&{_diff:{status:"modified",fields:r}}}},generateNode:({index:e})=>({name:`function${e}`,content:{source:Iw}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=kt(),u=cm(e);return E.jsx(ji,{id:e,specification:{...o,displayName:u===1?"Function":E.jsxs("span",{children:["Function v1 ",E.jsx(jp,{})]})},name:n.name,isSelected:r,helper:[u===0&&E.jsx(jp,{size:16})],actions:[E.jsx(ut,{type:"text",onClick:()=>s.openTab(e),children:"Edit Function"},"edit-function")]})}};var yu=(e=>(e[e.Deprecated=0]="Deprecated",e[e.Stable=1]="Stable",e))(yu||{});const cm=e=>{const{kind:n}=st(r=>({kind:qe(r.decisionGraph.nodes.find(o=>o.id===e)?.content).with(Ge.string,()=>0).otherwise(()=>1)}));return n},jp=({size:e})=>E.jsx(xr,{placement:"top",title:'Function v1 will be deprecated in one of the upcoming releases. To use a new Function, drag and drop a new Function Node and copy your logic. For more information click "Documentation". ',children:E.jsx(OC,{style:{color:"var(--grl-color-warning-text)",fontSize:e}})});var Us={exports:{}};Us.exports;var kp;function Q6(){return kp||(kp=1,function(e,n){var r=200,o="__lodash_hash_undefined__",s=800,u=16,l=9007199254740991,c="[object Arguments]",d="[object Array]",f="[object AsyncFunction]",h="[object Boolean]",g="[object Date]",m="[object Error]",D="[object Function]",C="[object GeneratorFunction]",y="[object Map]",w="[object Number]",_="[object Null]",x="[object Object]",N="[object Proxy]",F="[object RegExp]",j="[object Set]",H="[object String]",K="[object Undefined]",ee="[object WeakMap]",B="[object ArrayBuffer]",V="[object DataView]",Y="[object Float32Array]",te="[object Float64Array]",Z="[object Int8Array]",R="[object Int16Array]",G="[object Int32Array]",k="[object Uint8Array]",J="[object Uint8ClampedArray]",se="[object Uint16Array]",U="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,ue=/^\[object .+?Constructor\]$/,de=/^(?:0|[1-9]\d*)$/,le={};le[Y]=le[te]=le[Z]=le[R]=le[G]=le[k]=le[J]=le[se]=le[U]=!0,le[c]=le[d]=le[B]=le[h]=le[V]=le[g]=le[m]=le[D]=le[y]=le[w]=le[x]=le[F]=le[j]=le[H]=le[ee]=!1;var ve=typeof _n=="object"&&_n&&_n.Object===Object&&_n,ge=typeof self=="object"&&self&&self.Object===Object&&self,Ee=ve||ge||Function("return this")(),Be=n&&!n.nodeType&&n,De=Be&&!0&&e&&!e.nodeType&&e,Se=De&&De.exports===Be,Oe=Se&&ve.process,Et=function(){try{var v=De&&De.require&&De.require("util").types;return v||Oe&&Oe.binding&&Oe.binding("util")}catch{}}(),tt=Et&&Et.isTypedArray;function $t(v,I,z){switch(z.length){case 0:return v.call(I);case 1:return v.call(I,z[0]);case 2:return v.call(I,z[0],z[1]);case 3:return v.call(I,z[0],z[1],z[2])}return v.apply(I,z)}function nt(v,I){for(var z=-1,he=Array(v);++z<v;)he[z]=I(z);return he}function rt(v){return function(I){return v(I)}}function on(v,I){return v?.[I]}function ke(v,I){return function(z){return v(I(z))}}var we=Array.prototype,qt=Function.prototype,Ot=Object.prototype,ft=Ee["__core-js_shared__"],Bt=qt.toString,St=Ot.hasOwnProperty,sn=function(){var v=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),Qt=Ot.toString,wn=Bt.call(Object),Mt=RegExp("^"+Bt.call(St).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),mt=Se?Ee.Buffer:void 0,Ut=Ee.Symbol,_t=Ee.Uint8Array;mt&&mt.allocUnsafe;var ht=ke(Object.getPrototypeOf,Object),Pt=Object.create,pn=Ot.propertyIsEnumerable,an=we.splice,bt=Ut?Ut.toStringTag:void 0,At=function(){try{var v=Ji(Object,"defineProperty");return v({},"",{}),v}catch{}}(),en=mt?mt.isBuffer:void 0,Qn=Math.max,un=Date.now,xn=Ji(Ee,"Map"),mn=Ji(Object,"create"),L=function(){function v(){}return function(I){if(!gr(I))return{};if(Pt)return Pt(I);v.prototype=I;var z=new v;return v.prototype=void 0,z}}();function Q(v){var I=-1,z=v==null?0:v.length;for(this.clear();++I<z;){var he=v[I];this.set(he[0],he[1])}}function pe(){this.__data__=mn?mn(null):{},this.size=0}function Fe(v){var I=this.has(v)&&delete this.__data__[v];return this.size-=I?1:0,I}function pt(v){var I=this.__data__;if(mn){var z=I[v];return z===o?void 0:z}return St.call(I,v)?I[v]:void 0}function Je(v){var I=this.__data__;return mn?I[v]!==void 0:St.call(I,v)}function Ft(v,I){var z=this.__data__;return this.size+=this.has(v)?0:1,z[v]=mn&&I===void 0?o:I,this}Q.prototype.clear=pe,Q.prototype.delete=Fe,Q.prototype.get=pt,Q.prototype.has=Je,Q.prototype.set=Ft;function wt(v){var I=-1,z=v==null?0:v.length;for(this.clear();++I<z;){var he=v[I];this.set(he[0],he[1])}}function Wt(){this.__data__=[],this.size=0}function Rn(v){var I=this.__data__,z=Fr(I,v);if(z<0)return!1;var he=I.length-1;return z==he?I.pop():an.call(I,z,1),--this.size,!0}function Lt(v){var I=this.__data__,z=Fr(I,v);return z<0?void 0:I[z][1]}function Xt(v){return Fr(this.__data__,v)>-1}function On(v,I){var z=this.__data__,he=Fr(z,v);return he<0?(++this.size,z.push([v,I])):z[he][1]=I,this}wt.prototype.clear=Wt,wt.prototype.delete=Rn,wt.prototype.get=Lt,wt.prototype.has=Xt,wt.prototype.set=On;function Bn(v){var I=-1,z=v==null?0:v.length;for(this.clear();++I<z;){var he=v[I];this.set(he[0],he[1])}}function Hn(){this.size=0,this.__data__={hash:new Q,map:new(xn||wt),string:new Q}}function ki(v){var I=Gr(this,v).delete(v);return this.size-=I?1:0,I}function $i(v){return Gr(this,v).get(v)}function qi(v){return Gr(this,v).has(v)}function hi(v,I){var z=Gr(this,v),he=z.size;return z.set(v,I),this.size+=z.size==he?0:1,this}Bn.prototype.clear=Hn,Bn.prototype.delete=ki,Bn.prototype.get=$i,Bn.prototype.has=qi,Bn.prototype.set=hi;function er(v){var I=this.__data__=new wt(v);this.size=I.size}function yn(){this.__data__=new wt,this.size=0}function Li(v){var I=this.__data__,z=I.delete(v);return this.size=I.size,z}function Hi(v){return this.__data__.get(v)}function Gi(v){return this.__data__.has(v)}function Vi(v,I){var z=this.__data__;if(z instanceof wt){var he=z.__data__;if(!xn||he.length<r-1)return he.push([v,I]),this.size=++z.size,this;z=this.__data__=new Bn(he)}return z.set(v,I),this.size=z.size,this}er.prototype.clear=yn,er.prototype.delete=Li,er.prototype.get=Hi,er.prototype.has=Gi,er.prototype.set=Vi;function Ui(v,I){var z=Gn(v),he=!z&&Ki(v),me=!z&&!he&&Wr(v),Ae=!z&&!he&&!me&&eo(v),Me=z||he||me||Ae,_e=Me?nt(v.length,String):[],Ne=_e.length;for(var Qe in v)Me&&(Qe=="length"||me&&(Qe=="offset"||Qe=="parent")||Ae&&(Qe=="buffer"||Qe=="byteLength"||Qe=="byteOffset")||Vr(Qe,Ne))||_e.push(Qe);return _e}function Cn(v,I,z){(z!==void 0&&!Ur(v[I],z)||z===void 0&&!(I in v))&&tr(v,I,z)}function fr(v,I,z){var he=v[I];(!(St.call(v,I)&&Ur(he,z))||z===void 0&&!(I in v))&&tr(v,I,z)}function Fr(v,I){for(var z=v.length;z--;)if(Ur(v[z][0],I))return z;return-1}function tr(v,I,z){I=="__proto__"&&At?At(v,I,{configurable:!0,enumerable:!0,value:z,writable:!0}):v[I]=z}var Wi=Hr();function Nr(v){return v==null?v===void 0?K:_:bt&&bt in Object(v)?Eo(v):Fo(v)}function hr(v){return nr(v)&&Nr(v)==c}function pi(v){if(!gr(v)||mi(v))return!1;var I=Qi(v)?Mt:ue;return I.test(Ro(v))}function kr(v){return nr(v)&&vi(v.length)&&!!le[Nr(v)]}function En(v){if(!gr(v))return Sn(v);var I=pr(v),z=[];for(var he in v)he=="constructor"&&(I||!St.call(v,he))||z.push(he);return z}function gi(v,I,z,he,me){v!==I&&Wi(I,function(Ae,Me){if(me||(me=new er),gr(Ae))Xi(v,I,Me,z,gi,he,me);else{var _e=he?he(Mn(v,Me),Ae,Me+"",v,I,me):void 0;_e===void 0&&(_e=Ae),Cn(v,Me,_e)}},to)}function Xi(v,I,z,he,me,Ae,Me){var _e=Mn(v,z),Ne=Mn(I,z),Qe=Me.get(Ne);if(Qe){Cn(v,z,Qe);return}var gt=Ae?Ae(_e,Ne,z+"",v,I,Me):void 0,vt=gt===void 0;if(vt){var lt=Gn(Ne),tn=!lt&&Wr(Ne),Pn=!lt&&!tn&&eo(Ne);gt=Ne,lt||tn||Pn?Gn(_e)?gt=_e:Oo(_e)?gt=Yi(_e):tn?(vt=!1,gt=xo(Ne)):Pn?(vt=!1,gt=qr(Ne)):gt=[]:Bo(Ne)||Ki(Ne)?(gt=_e,Ki(_e)?gt=Xr(_e):(!gr(_e)||Qi(_e))&&(gt=So(Ne))):vt=!1}vt&&(Me.set(Ne,gt),me(gt,Ne,he,Ae,Me),Me.delete(Ne)),Cn(v,z,gt)}function $r(v,I){return To(No(v,I,it),v+"")}var gs=At?function(v,I){return At(v,"toString",{configurable:!0,enumerable:!1,value:ct(I),writable:!0})}:it;function xo(v,I){return v.slice()}function Co(v){var I=new v.constructor(v.byteLength);return new _t(I).set(new _t(v)),I}function qr(v,I){var z=Co(v.buffer);return new v.constructor(z,v.byteOffset,v.length)}function Yi(v,I){var z=-1,he=v.length;for(I||(I=Array(he));++z<he;)I[z]=v[z];return I}function Lr(v,I,z,he){var me=!z;z||(z={});for(var Ae=-1,Me=I.length;++Ae<Me;){var _e=I[Ae],Ne=void 0;Ne===void 0&&(Ne=v[_e]),me?tr(z,_e,Ne):fr(z,_e,Ne)}return z}function Zi(v){return $r(function(I,z){var he=-1,me=z.length,Ae=me>1?z[me-1]:void 0,Me=me>2?z[2]:void 0;for(Ae=v.length>3&&typeof Ae=="function"?(me--,Ae):void 0,Me&&ms(z[0],z[1],Me)&&(Ae=me<3?void 0:Ae,me=1),I=Object(I);++he<me;){var _e=z[he];_e&&v(I,_e,he,Ae)}return I})}function Hr(v){return function(I,z,he){for(var me=-1,Ae=Object(I),Me=he(I),_e=Me.length;_e--;){var Ne=Me[++me];if(z(Ae[Ne],Ne,Ae)===!1)break}return I}}function Gr(v,I){var z=v.__data__;return Ao(I)?z[typeof I=="string"?"string":"hash"]:z.map}function Ji(v,I){var z=on(v,I);return pi(z)?z:void 0}function Eo(v){var I=St.call(v,bt),z=v[bt];try{v[bt]=void 0;var he=!0}catch{}var me=Qt.call(v);return he&&(I?v[bt]=z:delete v[bt]),me}function So(v){return typeof v.constructor=="function"&&!pr(v)?L(ht(v)):{}}function Vr(v,I){var z=typeof v;return I=I??l,!!I&&(z=="number"||z!="symbol"&&de.test(v))&&v>-1&&v%1==0&&v<I}function ms(v,I,z){if(!gr(z))return!1;var he=typeof I;return(he=="number"?yi(z)&&Vr(I,z.length):he=="string"&&I in z)?Ur(z[I],v):!1}function Ao(v){var I=typeof v;return I=="string"||I=="number"||I=="symbol"||I=="boolean"?v!=="__proto__":v===null}function mi(v){return!!sn&&sn in v}function pr(v){var I=v&&v.constructor,z=typeof I=="function"&&I.prototype||Ot;return v===z}function Sn(v){var I=[];if(v!=null)for(var z in Object(v))I.push(z);return I}function Fo(v){return Qt.call(v)}function No(v,I,z){return I=Qn(I===void 0?v.length-1:I,0),function(){for(var he=arguments,me=-1,Ae=Qn(he.length-I,0),Me=Array(Ae);++me<Ae;)Me[me]=he[I+me];me=-1;for(var _e=Array(I+1);++me<I;)_e[me]=he[me];return _e[I]=z(Me),$t(v,this,_e)}}function Mn(v,I){if(!(I==="constructor"&&typeof v[I]=="function")&&I!="__proto__")return v[I]}var To=Io(gs);function Io(v){var I=0,z=0;return function(){var he=un(),me=u-(he-z);if(z=he,me>0){if(++I>=s)return arguments[0]}else I=0;return v.apply(void 0,arguments)}}function Ro(v){if(v!=null){try{return Bt.call(v)}catch{}try{return v+""}catch{}}return""}function Ur(v,I){return v===I||v!==v&&I!==I}var Ki=hr(function(){return arguments}())?hr:function(v){return nr(v)&&St.call(v,"callee")&&!pn.call(v,"callee")},Gn=Array.isArray;function yi(v){return v!=null&&vi(v.length)&&!Qi(v)}function Oo(v){return nr(v)&&yi(v)}var Wr=en||O;function Qi(v){if(!gr(v))return!1;var I=Nr(v);return I==D||I==C||I==f||I==N}function vi(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=l}function gr(v){var I=typeof v;return v!=null&&(I=="object"||I=="function")}function nr(v){return v!=null&&typeof v=="object"}function Bo(v){if(!nr(v)||Nr(v)!=x)return!1;var I=ht(v);if(I===null)return!0;var z=St.call(I,"constructor")&&I.constructor;return typeof z=="function"&&z instanceof z&&Bt.call(z)==wn}var eo=tt?rt(tt):kr;function Xr(v){return Lr(v,to(v))}function to(v){return yi(v)?Ui(v):En(v)}var ys=Zi(function(v,I,z){gi(v,I,z)});function ct(v){return function(){return v}}function it(v){return v}function O(){return!1}e.exports=ys}(Us,Us.exports)),Us.exports}var Ws={exports:{}};Ws.exports;var $p;function lm(){return $p||($p=1,function(e,n){var r=200,o="__lodash_hash_undefined__",s=1,u=2,l=9007199254740991,c="[object Arguments]",d="[object Array]",f="[object AsyncFunction]",h="[object Boolean]",g="[object Date]",m="[object Error]",D="[object Function]",C="[object GeneratorFunction]",y="[object Map]",w="[object Number]",_="[object Null]",x="[object Object]",N="[object Promise]",F="[object Proxy]",j="[object RegExp]",H="[object Set]",K="[object String]",ee="[object Symbol]",B="[object Undefined]",V="[object WeakMap]",Y="[object ArrayBuffer]",te="[object DataView]",Z="[object Float32Array]",R="[object Float64Array]",G="[object Int8Array]",k="[object Int16Array]",J="[object Int32Array]",se="[object Uint8Array]",U="[object Uint8ClampedArray]",re="[object Uint16Array]",ue="[object Uint32Array]",de=/[\\^$.*+?()[\]{}|]/g,le=/^\[object .+?Constructor\]$/,ve=/^(?:0|[1-9]\d*)$/,ge={};ge[Z]=ge[R]=ge[G]=ge[k]=ge[J]=ge[se]=ge[U]=ge[re]=ge[ue]=!0,ge[c]=ge[d]=ge[Y]=ge[h]=ge[te]=ge[g]=ge[m]=ge[D]=ge[y]=ge[w]=ge[x]=ge[j]=ge[H]=ge[K]=ge[V]=!1;var Ee=typeof _n=="object"&&_n&&_n.Object===Object&&_n,Be=typeof self=="object"&&self&&self.Object===Object&&self,De=Ee||Be||Function("return this")(),Se=n&&!n.nodeType&&n,Oe=Se&&!0&&e&&!e.nodeType&&e,Et=Oe&&Oe.exports===Se,tt=Et&&Ee.process,$t=function(){try{return tt&&tt.binding&&tt.binding("util")}catch{}}(),nt=$t&&$t.isTypedArray;function rt(O,v){for(var I=-1,z=O==null?0:O.length,he=0,me=[];++I<z;){var Ae=O[I];v(Ae,I,O)&&(me[he++]=Ae)}return me}function on(O,v){for(var I=-1,z=v.length,he=O.length;++I<z;)O[he+I]=v[I];return O}function ke(O,v){for(var I=-1,z=O==null?0:O.length;++I<z;)if(v(O[I],I,O))return!0;return!1}function we(O,v){for(var I=-1,z=Array(O);++I<O;)z[I]=v(I);return z}function qt(O){return function(v){return O(v)}}function Ot(O,v){return O.has(v)}function ft(O,v){return O?.[v]}function Bt(O){var v=-1,I=Array(O.size);return O.forEach(function(z,he){I[++v]=[he,z]}),I}function St(O,v){return function(I){return O(v(I))}}function sn(O){var v=-1,I=Array(O.size);return O.forEach(function(z){I[++v]=z}),I}var Qt=Array.prototype,wn=Function.prototype,Mt=Object.prototype,mt=De["__core-js_shared__"],Ut=wn.toString,_t=Mt.hasOwnProperty,ht=function(){var O=/[^.]+$/.exec(mt&&mt.keys&&mt.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""}(),Pt=Mt.toString,pn=RegExp("^"+Ut.call(_t).replace(de,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),an=Et?De.Buffer:void 0,bt=De.Symbol,At=De.Uint8Array,en=Mt.propertyIsEnumerable,Qn=Qt.splice,un=bt?bt.toStringTag:void 0,xn=Object.getOwnPropertySymbols,mn=an?an.isBuffer:void 0,L=St(Object.keys,Object),Q=Sn(De,"DataView"),pe=Sn(De,"Map"),Fe=Sn(De,"Promise"),pt=Sn(De,"Set"),Je=Sn(De,"WeakMap"),Ft=Sn(Object,"create"),wt=Gn(Q),Wt=Gn(pe),Rn=Gn(Fe),Lt=Gn(pt),Xt=Gn(Je),On=bt?bt.prototype:void 0,Bn=On?On.valueOf:void 0;function Hn(O){var v=-1,I=O==null?0:O.length;for(this.clear();++v<I;){var z=O[v];this.set(z[0],z[1])}}function ki(){this.__data__=Ft?Ft(null):{},this.size=0}function $i(O){var v=this.has(O)&&delete this.__data__[O];return this.size-=v?1:0,v}function qi(O){var v=this.__data__;if(Ft){var I=v[O];return I===o?void 0:I}return _t.call(v,O)?v[O]:void 0}function hi(O){var v=this.__data__;return Ft?v[O]!==void 0:_t.call(v,O)}function er(O,v){var I=this.__data__;return this.size+=this.has(O)?0:1,I[O]=Ft&&v===void 0?o:v,this}Hn.prototype.clear=ki,Hn.prototype.delete=$i,Hn.prototype.get=qi,Hn.prototype.has=hi,Hn.prototype.set=er;function yn(O){var v=-1,I=O==null?0:O.length;for(this.clear();++v<I;){var z=O[v];this.set(z[0],z[1])}}function Li(){this.__data__=[],this.size=0}function Hi(O){var v=this.__data__,I=qr(v,O);if(I<0)return!1;var z=v.length-1;return I==z?v.pop():Qn.call(v,I,1),--this.size,!0}function Gi(O){var v=this.__data__,I=qr(v,O);return I<0?void 0:v[I][1]}function Vi(O){return qr(this.__data__,O)>-1}function Ui(O,v){var I=this.__data__,z=qr(I,O);return z<0?(++this.size,I.push([O,v])):I[z][1]=v,this}yn.prototype.clear=Li,yn.prototype.delete=Hi,yn.prototype.get=Gi,yn.prototype.has=Vi,yn.prototype.set=Ui;function Cn(O){var v=-1,I=O==null?0:O.length;for(this.clear();++v<I;){var z=O[v];this.set(z[0],z[1])}}function fr(){this.size=0,this.__data__={hash:new Hn,map:new(pe||yn),string:new Hn}}function Fr(O){var v=pr(this,O).delete(O);return this.size-=v?1:0,v}function tr(O){return pr(this,O).get(O)}function Wi(O){return pr(this,O).has(O)}function Nr(O,v){var I=pr(this,O),z=I.size;return I.set(O,v),this.size+=I.size==z?0:1,this}Cn.prototype.clear=fr,Cn.prototype.delete=Fr,Cn.prototype.get=tr,Cn.prototype.has=Wi,Cn.prototype.set=Nr;function hr(O){var v=-1,I=O==null?0:O.length;for(this.__data__=new Cn;++v<I;)this.add(O[v])}function pi(O){return this.__data__.set(O,o),this}function kr(O){return this.__data__.has(O)}hr.prototype.add=hr.prototype.push=pi,hr.prototype.has=kr;function En(O){var v=this.__data__=new yn(O);this.size=v.size}function gi(){this.__data__=new yn,this.size=0}function Xi(O){var v=this.__data__,I=v.delete(O);return this.size=v.size,I}function $r(O){return this.__data__.get(O)}function gs(O){return this.__data__.has(O)}function xo(O,v){var I=this.__data__;if(I instanceof yn){var z=I.__data__;if(!pe||z.length<r-1)return z.push([O,v]),this.size=++I.size,this;I=this.__data__=new Cn(z)}return I.set(O,v),this.size=I.size,this}En.prototype.clear=gi,En.prototype.delete=Xi,En.prototype.get=$r,En.prototype.has=gs,En.prototype.set=xo;function Co(O,v){var I=Wr(O),z=!I&&Oo(O),he=!I&&!z&&vi(O),me=!I&&!z&&!he&&to(O),Ae=I||z||he||me,Me=Ae?we(O.length,String):[],_e=Me.length;for(var Ne in O)_t.call(O,Ne)&&!(Ae&&(Ne=="length"||he&&(Ne=="offset"||Ne=="parent")||me&&(Ne=="buffer"||Ne=="byteLength"||Ne=="byteOffset")||To(Ne,_e)))&&Me.push(Ne);return Me}function qr(O,v){for(var I=O.length;I--;)if(yi(O[I][0],v))return I;return-1}function Yi(O,v,I){var z=v(O);return Wr(O)?z:on(z,I(O))}function Lr(O){return O==null?O===void 0?B:_:un&&un in Object(O)?Fo(O):Ki(O)}function Zi(O){return Xr(O)&&Lr(O)==c}function Hr(O,v,I,z,he){return O===v?!0:O==null||v==null||!Xr(O)&&!Xr(v)?O!==O&&v!==v:Gr(O,v,I,z,Hr,he)}function Gr(O,v,I,z,he,me){var Ae=Wr(O),Me=Wr(v),_e=Ae?d:Mn(O),Ne=Me?d:Mn(v);_e=_e==c?x:_e,Ne=Ne==c?x:Ne;var Qe=_e==x,gt=Ne==x,vt=_e==Ne;if(vt&&vi(O)){if(!vi(v))return!1;Ae=!0,Qe=!1}if(vt&&!Qe)return me||(me=new En),Ae||to(O)?Vr(O,v,I,z,he,me):ms(O,v,_e,I,z,he,me);if(!(I&s)){var lt=Qe&&_t.call(O,"__wrapped__"),tn=gt&&_t.call(v,"__wrapped__");if(lt||tn){var Pn=lt?O.value():O,rr=tn?v.value():v;return me||(me=new En),he(Pn,rr,I,z,me)}}return vt?(me||(me=new En),Ao(O,v,I,z,he,me)):!1}function Ji(O){if(!eo(O)||Ro(O))return!1;var v=nr(O)?pn:le;return v.test(Gn(O))}function Eo(O){return Xr(O)&&Bo(O.length)&&!!ge[Lr(O)]}function So(O){if(!Ur(O))return L(O);var v=[];for(var I in Object(O))_t.call(O,I)&&I!="constructor"&&v.push(I);return v}function Vr(O,v,I,z,he,me){var Ae=I&s,Me=O.length,_e=v.length;if(Me!=_e&&!(Ae&&_e>Me))return!1;var Ne=me.get(O);if(Ne&&me.get(v))return Ne==v;var Qe=-1,gt=!0,vt=I&u?new hr:void 0;for(me.set(O,v),me.set(v,O);++Qe<Me;){var lt=O[Qe],tn=v[Qe];if(z)var Pn=Ae?z(tn,lt,Qe,v,O,me):z(lt,tn,Qe,O,v,me);if(Pn!==void 0){if(Pn)continue;gt=!1;break}if(vt){if(!ke(v,function(rr,Tr){if(!Ot(vt,Tr)&&(lt===rr||he(lt,rr,I,z,me)))return vt.push(Tr)})){gt=!1;break}}else if(!(lt===tn||he(lt,tn,I,z,me))){gt=!1;break}}return me.delete(O),me.delete(v),gt}function ms(O,v,I,z,he,me,Ae){switch(I){case te:if(O.byteLength!=v.byteLength||O.byteOffset!=v.byteOffset)return!1;O=O.buffer,v=v.buffer;case Y:return!(O.byteLength!=v.byteLength||!me(new At(O),new At(v)));case h:case g:case w:return yi(+O,+v);case m:return O.name==v.name&&O.message==v.message;case j:case K:return O==v+"";case y:var Me=Bt;case H:var _e=z&s;if(Me||(Me=sn),O.size!=v.size&&!_e)return!1;var Ne=Ae.get(O);if(Ne)return Ne==v;z|=u,Ae.set(O,v);var Qe=Vr(Me(O),Me(v),z,he,me,Ae);return Ae.delete(O),Qe;case ee:if(Bn)return Bn.call(O)==Bn.call(v)}return!1}function Ao(O,v,I,z,he,me){var Ae=I&s,Me=mi(O),_e=Me.length,Ne=mi(v),Qe=Ne.length;if(_e!=Qe&&!Ae)return!1;for(var gt=_e;gt--;){var vt=Me[gt];if(!(Ae?vt in v:_t.call(v,vt)))return!1}var lt=me.get(O);if(lt&&me.get(v))return lt==v;var tn=!0;me.set(O,v),me.set(v,O);for(var Pn=Ae;++gt<_e;){vt=Me[gt];var rr=O[vt],Tr=v[vt];if(z)var vs=Ae?z(Tr,rr,vt,v,O,me):z(rr,Tr,vt,O,v,me);if(!(vs===void 0?rr===Tr||he(rr,Tr,I,z,me):vs)){tn=!1;break}Pn||(Pn=vt=="constructor")}if(tn&&!Pn){var no=O.constructor,cn=v.constructor;no!=cn&&"constructor"in O&&"constructor"in v&&!(typeof no=="function"&&no instanceof no&&typeof cn=="function"&&cn instanceof cn)&&(tn=!1)}return me.delete(O),me.delete(v),tn}function mi(O){return Yi(O,ys,No)}function pr(O,v){var I=O.__data__;return Io(v)?I[typeof v=="string"?"string":"hash"]:I.map}function Sn(O,v){var I=ft(O,v);return Ji(I)?I:void 0}function Fo(O){var v=_t.call(O,un),I=O[un];try{O[un]=void 0;var z=!0}catch{}var he=Pt.call(O);return z&&(v?O[un]=I:delete O[un]),he}var No=xn?function(O){return O==null?[]:(O=Object(O),rt(xn(O),function(v){return en.call(O,v)}))}:ct,Mn=Lr;(Q&&Mn(new Q(new ArrayBuffer(1)))!=te||pe&&Mn(new pe)!=y||Fe&&Mn(Fe.resolve())!=N||pt&&Mn(new pt)!=H||Je&&Mn(new Je)!=V)&&(Mn=function(O){var v=Lr(O),I=v==x?O.constructor:void 0,z=I?Gn(I):"";if(z)switch(z){case wt:return te;case Wt:return y;case Rn:return N;case Lt:return H;case Xt:return V}return v});function To(O,v){return v=v??l,!!v&&(typeof O=="number"||ve.test(O))&&O>-1&&O%1==0&&O<v}function Io(O){var v=typeof O;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?O!=="__proto__":O===null}function Ro(O){return!!ht&&ht in O}function Ur(O){var v=O&&O.constructor,I=typeof v=="function"&&v.prototype||Mt;return O===I}function Ki(O){return Pt.call(O)}function Gn(O){if(O!=null){try{return Ut.call(O)}catch{}try{return O+""}catch{}}return""}function yi(O,v){return O===v||O!==O&&v!==v}var Oo=Zi(function(){return arguments}())?Zi:function(O){return Xr(O)&&_t.call(O,"callee")&&!en.call(O,"callee")},Wr=Array.isArray;function Qi(O){return O!=null&&Bo(O.length)&&!nr(O)}var vi=mn||it;function gr(O,v){return Hr(O,v)}function nr(O){if(!eo(O))return!1;var v=Lr(O);return v==D||v==C||v==f||v==F}function Bo(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=l}function eo(O){var v=typeof O;return O!=null&&(v=="object"||v=="function")}function Xr(O){return O!=null&&typeof O=="object"}var to=nt?qt(nt):Eo;function ys(O){return Qi(O)?Co(O):So(O)}function ct(){return[]}function it(){return!1}e.exports=gr}(Ws,Ws.exports)),Ws.exports}var sl,qp;function e8(){if(qp)return sl;qp=1;var e=200,n="__lodash_hash_undefined__",r=1/0,o=9007199254740991,s="[object Function]",u="[object GeneratorFunction]",l=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,d=typeof _n=="object"&&_n&&_n.Object===Object&&_n,f=typeof self=="object"&&self&&self.Object===Object&&self,h=d||f||Function("return this")();function g(L,Q,pe){switch(pe.length){case 0:return L.call(Q);case 1:return L.call(Q,pe[0]);case 2:return L.call(Q,pe[0],pe[1]);case 3:return L.call(Q,pe[0],pe[1],pe[2])}return L.apply(Q,pe)}function m(L,Q){for(var pe=-1,Fe=L?L.length:0,pt=0,Je=[];++pe<Fe;){var Ft=L[pe];Q(Ft,pe,L)&&(Je[pt++]=Ft)}return Je}function D(L,Q){var pe=L?L.length:0;return!!pe&&w(L,Q,0)>-1}function C(L,Q){for(var pe=-1,Fe=Q.length,pt=L.length;++pe<Fe;)L[pt+pe]=Q[pe];return L}function y(L,Q,pe,Fe){for(var pt=L.length,Je=pe+-1;++Je<pt;)if(Q(L[Je],Je,L))return Je;return-1}function w(L,Q,pe){if(Q!==Q)return y(L,_,pe);for(var Fe=pe-1,pt=L.length;++Fe<pt;)if(L[Fe]===Q)return Fe;return-1}function _(L){return L!==L}function x(L,Q){return L.has(Q)}function N(L,Q){return L?.[Q]}function F(L){var Q=!1;if(L!=null&&typeof L.toString!="function")try{Q=!!(L+"")}catch{}return Q}function j(L){var Q=-1,pe=Array(L.size);return L.forEach(function(Fe){pe[++Q]=Fe}),pe}var H=Array.prototype,K=Function.prototype,ee=Object.prototype,B=h["__core-js_shared__"],V=function(){var L=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""}(),Y=K.toString,te=ee.hasOwnProperty,Z=ee.toString,R=RegExp("^"+Y.call(te).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),G=H.splice,k=Math.max,J=Ut(h,"Map"),se=Ut(h,"Set"),U=Ut(Object,"create");function re(L){var Q=-1,pe=L?L.length:0;for(this.clear();++Q<pe;){var Fe=L[Q];this.set(Fe[0],Fe[1])}}function ue(){this.__data__=U?U(null):{}}function de(L){return this.has(L)&&delete this.__data__[L]}function le(L){var Q=this.__data__;if(U){var pe=Q[L];return pe===n?void 0:pe}return te.call(Q,L)?Q[L]:void 0}function ve(L){var Q=this.__data__;return U?Q[L]!==void 0:te.call(Q,L)}function ge(L,Q){var pe=this.__data__;return pe[L]=U&&Q===void 0?n:Q,this}re.prototype.clear=ue,re.prototype.delete=de,re.prototype.get=le,re.prototype.has=ve,re.prototype.set=ge;function Ee(L){var Q=-1,pe=L?L.length:0;for(this.clear();++Q<pe;){var Fe=L[Q];this.set(Fe[0],Fe[1])}}function Be(){this.__data__=[]}function De(L){var Q=this.__data__,pe=ft(Q,L);if(pe<0)return!1;var Fe=Q.length-1;return pe==Fe?Q.pop():G.call(Q,pe,1),!0}function Se(L){var Q=this.__data__,pe=ft(Q,L);return pe<0?void 0:Q[pe][1]}function Oe(L){return ft(this.__data__,L)>-1}function Et(L,Q){var pe=this.__data__,Fe=ft(pe,L);return Fe<0?pe.push([L,Q]):pe[Fe][1]=Q,this}Ee.prototype.clear=Be,Ee.prototype.delete=De,Ee.prototype.get=Se,Ee.prototype.has=Oe,Ee.prototype.set=Et;function tt(L){var Q=-1,pe=L?L.length:0;for(this.clear();++Q<pe;){var Fe=L[Q];this.set(Fe[0],Fe[1])}}function $t(){this.__data__={hash:new re,map:new(J||Ee),string:new re}}function nt(L){return mt(this,L).delete(L)}function rt(L){return mt(this,L).get(L)}function on(L){return mt(this,L).has(L)}function ke(L,Q){return mt(this,L).set(L,Q),this}tt.prototype.clear=$t,tt.prototype.delete=nt,tt.prototype.get=rt,tt.prototype.has=on,tt.prototype.set=ke;function we(L){var Q=-1,pe=L?L.length:0;for(this.__data__=new tt;++Q<pe;)this.add(L[Q])}function qt(L){return this.__data__.set(L,n),this}function Ot(L){return this.__data__.has(L)}we.prototype.add=we.prototype.push=qt,we.prototype.has=Ot;function ft(L,Q){for(var pe=L.length;pe--;)if(an(L[pe][0],Q))return pe;return-1}function Bt(L,Q,pe,Fe){var pt=-1,Je=D,Ft=!0,wt=L.length,Wt=[],Rn=Q.length;if(!wt)return Wt;Q.length>=e&&(Je=x,Ft=!1,Q=new we(Q));e:for(;++pt<wt;){var Lt=L[pt],Xt=Lt;if(Lt=Lt!==0?Lt:0,Ft&&Xt===Xt){for(var On=Rn;On--;)if(Q[On]===Xt)continue e;Wt.push(Lt)}else Je(Q,Xt,Fe)||Wt.push(Lt)}return Wt}function St(L){if(!un(L)||ht(L))return!1;var Q=en(L)||F(L)?R:c;return Q.test(Pt(L))}function sn(L,Q){return Q=k(Q===void 0?L.length-1:Q,0),function(){for(var pe=arguments,Fe=-1,pt=k(pe.length-Q,0),Je=Array(pt);++Fe<pt;)Je[Fe]=pe[Q+Fe];Fe=-1;for(var Ft=Array(Q+1);++Fe<Q;)Ft[Fe]=pe[Fe];return Ft[Q]=Je,g(L,this,Ft)}}function Qt(L,Q,pe){var Fe=-1,pt=D,Je=L.length,Ft=!0,wt=[],Wt=wt;if(Je>=e){var Rn=Mt(L);if(Rn)return j(Rn);Ft=!1,pt=x,Wt=new we}else Wt=wt;e:for(;++Fe<Je;){var Lt=L[Fe],Xt=Lt;if(Lt=Lt!==0?Lt:0,Ft&&Xt===Xt){for(var On=Wt.length;On--;)if(Wt[On]===Xt)continue e;wt.push(Lt)}else pt(Wt,Xt,pe)||(Wt!==wt&&Wt.push(Xt),wt.push(Lt))}return wt}function wn(L,Q,pe){for(var Fe=-1,pt=L.length;++Fe<pt;)var Je=Je?C(Bt(Je,L[Fe],Q,pe),Bt(L[Fe],Je,Q,pe)):L[Fe];return Je&&Je.length?Qt(Je,Q,pe):[]}var Mt=se&&1/j(new se([,-0]))[1]==r?function(L){return new se(L)}:mn;function mt(L,Q){var pe=L.__data__;return _t(Q)?pe[typeof Q=="string"?"string":"hash"]:pe.map}function Ut(L,Q){var pe=N(L,Q);return St(pe)?pe:void 0}function _t(L){var Q=typeof L;return Q=="string"||Q=="number"||Q=="symbol"||Q=="boolean"?L!=="__proto__":L===null}function ht(L){return!!V&&V in L}function Pt(L){if(L!=null){try{return Y.call(L)}catch{}try{return L+""}catch{}}return""}var pn=sn(function(L){return wn(m(L,At))});function an(L,Q){return L===Q||L!==L&&Q!==Q}function bt(L){return L!=null&&Qn(L.length)&&!en(L)}function At(L){return xn(L)&&bt(L)}function en(L){var Q=un(L)?Z.call(L):"";return Q==s||Q==u}function Qn(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=o}function un(L){var Q=typeof L;return!!L&&(Q=="object"||Q=="function")}function xn(L){return!!L&&typeof L=="object"}function mn(){}return sl=pn,sl}var al,Lp;function t8(){if(Lp)return al;Lp=1;var e=9007199254740991,n="[object Arguments]",r="[object Function]",o="[object GeneratorFunction]",s=/^(?:0|[1-9]\d*)$/;function u(B,V){for(var Y=-1,te=Array(B);++Y<B;)te[Y]=V(Y);return te}function l(B,V){return function(Y){return B(V(Y))}}var c=Object.prototype,d=c.hasOwnProperty,f=c.toString,h=c.propertyIsEnumerable,g=l(Object.keys,Object);function m(B,V){var Y=_(B)||w(B)?u(B.length,String):[],te=Y.length,Z=!!te;for(var R in B)d.call(B,R)&&!(Z&&(R=="length"||C(R,te)))&&Y.push(R);return Y}function D(B){if(!y(B))return g(B);var V=[];for(var Y in Object(B))d.call(B,Y)&&Y!="constructor"&&V.push(Y);return V}function C(B,V){return V=V??e,!!V&&(typeof B=="number"||s.test(B))&&B>-1&&B%1==0&&B<V}function y(B){var V=B&&B.constructor,Y=typeof V=="function"&&V.prototype||c;return B===Y}function w(B){return N(B)&&d.call(B,"callee")&&(!h.call(B,"callee")||f.call(B)==n)}var _=Array.isArray;function x(B){return B!=null&&j(B.length)&&!F(B)}function N(B){return K(B)&&x(B)}function F(B){var V=H(B)?f.call(B):"";return V==r||V==o}function j(B){return typeof B=="number"&&B>-1&&B%1==0&&B<=e}function H(B){var V=typeof B;return!!B&&(V=="object"||V=="function")}function K(B){return!!B&&typeof B=="object"}function ee(B){return x(B)?m(B):D(B)}return al=ee,al}var ul,Hp;function n8(){if(Hp)return ul;Hp=1;function e(s){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(l){return typeof l}:e=function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},e(s)}var n={string:function(u){return typeof u=="string"},number:function(u){return typeof u=="number"&&isFinite(u)},integer:function(u){return typeof u=="number"&&u%1===0},boolean:function(u){return typeof u=="boolean"},array:function(u){return u instanceof Array},null:function(u){return u===null},date:function(u){return u instanceof Date},any:function(u){return!0},object:function(u){return u&&e(u)==="object"&&!(u instanceof Array)&&!(u instanceof Date)}},r={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w!#$%&'*+-/=?^`{|}~]+\.)*[\w!#$%&'*+-/=?^`{|}~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(u){return typeof u=="string"&&parseFloat(u)===parseInt(u,10)&&!isNaN(u)},regex:function(u){var l=!0;try{new RegExp(u)}catch{l=!1}return l},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};r.regexp=r.regex,r.pattern=r.regex,r.ipv4=r["ip-address"];var o=function(u,l){if(typeof u=="string"&&r[l]!==void 0){if(r[l]instanceof RegExp)return r[l].test(u);if(typeof r[l]=="function")return r[l](u)}return!0};return ul={types:n,isFormat:o,FORMAT_REGEXPS:r},ul}var cl,Gp;function r8(){if(Gp)return cl;Gp=1;var e=lm(),n=e8(),r=t8(),o=n8(),s=o.types,u=o.FORMAT_REGEXPS,l=o.isFormat,c={stringFormats:r(u),isFormat:l,typeNames:["integer","number","string","array","object","boolean","null","date"],getType:function(f){return c.typeNames.find(function(h){return s[h](f)})},mergeSchemaObjs:function(f,h){var g=r(f),m=r(h);if(!e(g,m)){if(f.type==="array"&&h.type==="array"&&e(n(g,m),["items"])){var D=g.length>m.length?h:f,C=g.length>m.length?f:h,y=r(D).reduce(function(j,H){return e(D[H],C[H])&&j},!0);if(y)return D}if(f.type!=="object"||h.type!=="object")return null}for(var w={},_=0,x=g.length;_<x;_++){var N=g[_];if(c.getType(f[N])==="object"){var F=c.mergeSchemaObjs(f[N],h[N]);if(F)w[N]=F;else{if(f.type==="object"||h.type==="object")return{type:"object"};if(N!=="items"||f.type!=="array"||h.type!=="array")return null}}else if(N==="type")if(f[N]!==h[N])if(f[N]==="integer"&&h[N]==="number"||f[N]==="number"&&h[N]==="integer")w[N]="number";else return null;else w[N]=f[N];else{if(!e(f[N],h[N]))return null;w[N]=f[N]}}return w}};return cl=c,cl}var ll,Vp;function i8(){if(Vp)return ll;Vp=1;function e(D,C){if(!(D instanceof C))throw new TypeError("Cannot call a class as a function")}function n(D,C){for(var y=0;y<C.length;y++){var w=C[y];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(D,w.key,w)}}function r(D,C,y){return C&&n(D.prototype,C),D}var o=Q6(),s=lm(),u=r8(),l={required:!1,postProcessFnc:null,strings:{detectFormat:!0,preProcessFnc:null},arrays:{mode:"all"},objects:{preProcessFnc:null,postProcessFnc:null,additionalProperties:!0}},c=["hostname","host-name","alpha","alphanumeric","regex","regexp","pattern"],d=u.stringFormats.filter(function(D){return c.indexOf(D)<0});function f(D){for(var C,y=0,w=D.length;y<w;y++){var _=D[y];if(y>0&&(_==="integer"&&C==="number"?_="number":_==="number"&&C==="integer"&&(C="number"),C!==_))return null;C=_}return C}function h(D){return f(D.map(function(C){return u.getType(C)}))}var g=function(){function D(C){e(this,D),this.options=o({},l,C),this.getObjectSchemaDefault=this.getObjectSchemaDefault.bind(this),this.getStringSchemaDefault=this.getStringSchemaDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this),this.commmonPostProcessDefault=this.commmonPostProcessDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this)}return r(D,[{key:"getCommonArrayItemSchema",value:function(y){var w=this,_=y.map(function(x){return w.getSchema(x)});return _.reduce(function(x,N){return u.mergeSchemaObjs(x,N)},_.pop())}},{key:"getObjectSchemaDefault",value:function(y){var w=this,_={type:"object"},x=Object.keys(y);return x.length>0&&(_.properties=x.reduce(function(N,F){return N[F]=w.getSchema(y[F]),N},{})),_}},{key:"getObjectSchema",value:function(y){return this.options.objects.preProcessFnc?this.options.objects.preProcessFnc(y,this.getObjectSchemaDefault):this.getObjectSchemaDefault(y)}},{key:"getArraySchemaMerging",value:function(y){var w={type:"array"},_=h(y);if(_)if(w.items={type:_},_!=="integer"&&_!=="number"){var x=this.getCommonArrayItemSchema(y);x&&(w.items=x)}else this.options.required&&(w.items.required=!0);return w}},{key:"getArraySchemaNoMerging",value:function(y){var w={type:"array"};return y.length>0&&(w.items=this.getSchema(y[0])),w}},{key:"getArraySchemaTuple",value:function(y){var w=this,_={type:"array"};return y.length>0&&(_.items=y.map(function(x){return w.getSchema(x)})),_}},{key:"getArraySchemaUniform",value:function(y){var w=this.getArraySchemaNoMerging(y);if(y.length>1){for(var _=1;_<y.length;_++)if(!s(w.items,this.getSchema(y[_])))throw new Error("Invalid schema, incompatible array items")}return w}},{key:"getArraySchema",value:function(y){if(y.length===0)return{type:"array"};switch(this.options.arrays.mode){case"all":return this.getArraySchemaMerging(y);case"first":return this.getArraySchemaNoMerging(y);case"uniform":return this.getArraySchemaUniform(y);case"tuple":return this.getArraySchemaTuple(y);default:throw new Error("Unknown array mode option '".concat(this.options.arrays.mode,"'"))}}},{key:"getStringSchemaDefault",value:function(y){var w={type:"string"};if(!this.options.strings.detectFormat)return w;var _=d.findIndex(function(x){return u.isFormat(y,x)});return _>=0&&(w.format=d[_]),w}},{key:"getStringSchema",value:function(y){return this.options.strings.preProcessFnc?this.options.strings.preProcessFnc(y,this.getStringSchemaDefault):this.getStringSchemaDefault(y)}},{key:"commmonPostProcessDefault",value:function(y,w,_){return this.options.required?o({},w,{required:!0}):w}},{key:"objectPostProcessDefault",value:function(y,w){return this.options.objects.additionalProperties===!1&&Object.getOwnPropertyNames(w).length>0?o({},y,{additionalProperties:!1}):y}},{key:"getSchema",value:function(y){var w=u.getType(y);if(!w)throw new Error("Type of value couldn't be determined");var _;switch(w){case"object":_=this.getObjectSchema(y);break;case"array":_=this.getArraySchema(y);break;case"string":_=this.getStringSchema(y);break;default:_={type:w}}return this.options.postProcessFnc?_=this.options.postProcessFnc(w,_,y,this.commmonPostProcessDefault):_=this.commmonPostProcessDefault(w,_,y),w==="object"&&(this.options.objects.postProcessFnc?_=this.options.objects.postProcessFnc(_,y,this.objectPostProcessDefault):_=this.objectPostProcessDefault(_,y)),_}}]),D}();function m(D,C){var y=new g(C);return y.getSchema(D)}return ll=m,ll}var o8=i8();const s8=lg(o8),dm=e=>{const{isOpen:n,onDismiss:r,onSuccess:o,model:s}=e,{token:u}=ad.useToken(),[l,c]=T.useState("");return T.useEffect(()=>{n&&s&&c(s)},[n]),E.jsxs(Mu,{title:"Convert to JSON Schema",open:n,destroyOnClose:!0,onCancel:r,width:540,okText:"Convert",onOk:()=>{try{o?.({schema:JSON.stringify(s8(Ri.parse(l)),null,2),model:l})}catch(d){Zt.error(d?.message)}},children:[E.jsx(Kt.Text,{children:"Type or paste JSON or JSON5 model here and covert it to JSON Schema"}),E.jsx(ud,{loading:E.jsx(as,{size:"large"}),language:"javascript",theme:u.mode==="dark"?"vs-dark":"light",height:"400px",onChange:d=>c(d||""),value:l||"",onMount:(d,f)=>{f.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),f.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),d.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async h=>{try{await Du(JSON.stringify(Ri.parse(h.getValue()))),Zt.success("Copied to clipboard!")}catch{Zt.error("Failed to copy to clipboard.")}}}),d.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:h=>{const g=JSON.stringify(Ri.parse(h.getValue()),null,2);h.setValue(g)}})},options:{automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})]})};dm.__docgenInfo={description:"",methods:[],displayName:"JsonToJsonSchemaDialog",props:{id:{required:!1,tsType:{name:"string"},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { schema: string; model: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ schema: string; model: string }",signature:{properties:[{key:"schema",value:{name:"string",required:!0}},{key:"model",value:{name:"string",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""},onDismiss:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""},model:{required:!1,tsType:{name:"string"},description:""}}};const a8="Provide JSON Schema format. If no JSON Schema is provided, validation will be skipped.",Up={automaticLayout:!0,contextmenu:!1,fontSize:13,fontFamily:"var(--mono-font-family)",tabSize:2,minimap:{enabled:!1},overviewRulerBorder:!1,scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4}};var fm=(e=>(e.Schema="Schema",e))(fm||{});const zd=({id:e,type:n="input"})=>{const r=kt(),o="json",{token:s}=ad.useToken(),[u,l]=T.useState(!1),[c,d]=T.useState("Schema"),[f,h]=T.useState(),[g,m]=T.useState(),D=kh(()=>f?.layout(),100,{trailing:!0}),C=kh(()=>g?.layout(),100,{trailing:!0}),{disabled:y,content:w}=st(({simulate:N,disabled:F,decisionGraph:j})=>({nodeError:qe(N).with({error:{data:{nodeId:e}}},({error:H})=>H).otherwise(()=>null),disabled:F,content:(j?.nodes??[]).find(H=>H.id===e)?.content})),{contentDiff:_}=ps(e),x=T.useMemo(()=>_?.fields?.schema?.previousValue,[_]);return T.useEffect(()=>(window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)),[D,f]),T.useEffect(()=>(window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)),[C,g]),E.jsx("div",{className:"grl-node-content","data-theme":s.mode,style:{height:"100%","--color-text":s.colorTextBase,"--color-background-elevated":s.colorBgElevated,"--color-border":s.colorBorder,"--line-height":s.lineHeight},children:E.jsx(vg,{className:"grl-node-content-main",direction:"horizontal",autoSaveId:`jdm-editor:${n}:schema:layout`,children:E.jsx("div",{className:"grl-node-content-side",children:E.jsxs("div",{className:"grl-node-content-side__panel",children:[E.jsx("div",{className:"grl-node-content-side__header",children:E.jsx(sd,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},items:Object.values(fm).map(N=>({key:N,label:E.jsxs("span",{children:[N," ",E.jsx(xr,{title:a8,children:E.jsx(Tg,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})})]})})),activeKey:c,onChange:N=>d(N),tabBarExtraContent:E.jsxs(cd,{style:{marginRight:8},size:"small",children:[E.jsx(xr,{title:"Format code",placement:"bottomRight",children:E.jsx(ut,{size:"small",type:"text",disabled:y,icon:E.jsx(Rw,{}),onClick:()=>f?.getAction?.("editor.action.formatDocument")?.run?.()})}),E.jsx(xr,{title:"Import from JSON",placement:"bottomRight",children:E.jsx(ut,{type:"text",size:"small",disabled:y,icon:E.jsx(qw,{}),onClick:()=>{l(!0)}})})]})})}),E.jsx("div",{className:"grl-node-content-side__body",children:qe(c).with("Schema",()=>x!==void 0?E.jsx(Ow,{loading:E.jsx(as,{size:"large"}),language:o,original:x,modified:w?.schema,onMount:N=>m(N),theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...Up,readOnly:!0}}):E.jsx(ud,{loading:E.jsx(as,{size:"large"}),language:o,value:w?.schema||"",onMount:N=>h(N),onChange:N=>{r.updateNode(e,F=>(F.content={schema:N},F))},theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...Up,readOnly:y}})).exhaustive()}),E.jsx(dm,{isOpen:u,onDismiss:()=>l(!1),onSuccess:({schema:N,model:F})=>{localStorage.setItem(`${e}-model`,F),r.updateNode(e,j=>(j.content={schema:N},j)),l(!1)},model:localStorage.getItem(`${e}-model`)||void 0})]})})})})};zd.__docgenInfo={description:"",methods:[],displayName:"TabJsonSchema",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""},type:{required:!1,tsType:{name:"union",raw:"'input' | 'output'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'output'"}]},description:"",defaultValue:{value:"'input'",computed:!1}}}};const hm={type:et.Input,icon:E.jsx(Zx,{size:"1em"}),displayName:"Request",color:zi.Green,documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Provides input context",generateNode:()=>({name:"request",content:{schema:""}}),renderTab:({id:e,manager:n})=>E.jsx(zd,{id:e,manager:n,type:"input"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=kt(),{disabled:u}=st(({disabled:l})=>({disabled:l}));return E.jsx(ji,{id:e,specification:o,name:n.name,isSelected:r,handleLeft:!1,actions:[E.jsx(ut,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")],menuItems:[{key:"documentation",icon:E.jsx(Ng,{}),label:"Documentation",onClick:()=>window.open(o.documentationUrl,"_href")},{key:"delete",icon:E.jsx(Pu,{}),danger:!0,label:E.jsx(ks,{left:"Delete",right:mu.shortcut("Backspace")}),disabled:u,onClick:()=>Mu.confirm({icon:null,title:"Delete node",content:E.jsxs(Kt.Text,{children:["Are you sure you want to delete ",E.jsx(Kt.Text,{strong:!0,children:n.name})," node."]}),okButtonProps:{danger:!0},onOk:()=>s.removeNodes([e])})}]})},getDiffContent:(e,n)=>{const r={};return Tt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&Jt.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}},pm={type:et.Output,icon:E.jsx(Xx,{size:"1em"}),color:zi.Green,displayName:"Response",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Outputs the context",generateNode:()=>({name:"response",content:{schema:""}}),renderTab:({id:e,manager:n})=>E.jsx(zd,{id:e,manager:n,type:"output"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=kt();return E.jsx(ji,{id:e,specification:o,name:n.name,isSelected:r,handleRight:!1,actions:[E.jsx(ut,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")]})},getDiffContent:(e,n)=>{const r={};return Tt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&Jt.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}};var nd=new Map,su=new WeakMap,Wp=0,u8=void 0;function c8(e){return e?(su.has(e)||(Wp+=1,su.set(e,Wp.toString())),su.get(e)):"0"}function l8(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?c8(e.root):e[n]}`).toString()}function d8(e){const n=l8(e);let r=nd.get(n);if(!r){const o=new Map;let s;const u=new IntersectionObserver(l=>{l.forEach(c=>{var d;const f=c.isIntersecting&&s.some(h=>c.intersectionRatio>=h);e.trackVisibility&&typeof c.isVisible>"u"&&(c.isVisible=f),(d=o.get(c.target))==null||d.forEach(h=>{h(f,c)})})},e);s=u.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:n,observer:u,elements:o},nd.set(n,r)}return r}function f8(e,n,r={},o=u8){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const d=e.getBoundingClientRect();return n(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:s,observer:u,elements:l}=d8(r),c=l.get(e)||[];return l.has(e)||l.set(e,c),c.push(n),u.observe(e),function(){c.splice(c.indexOf(n),1),c.length===0&&(l.delete(e),u.unobserve(e)),l.size===0&&(u.disconnect(),nd.delete(s))}}function h8({threshold:e,delay:n,trackVisibility:r,rootMargin:o,root:s,triggerOnce:u,skip:l,initialInView:c,fallbackInView:d,onChange:f}={}){var h;const[g,m]=T.useState(null),D=T.useRef(f),[C,y]=T.useState({inView:!!c,entry:void 0});D.current=f,T.useEffect(()=>{if(l||!g)return;let N;return N=f8(g,(F,j)=>{y({inView:F,entry:j}),D.current&&D.current(F,j),j.isIntersecting&&u&&N&&(N(),N=void 0)},{root:s,rootMargin:o,threshold:e,trackVisibility:r,delay:n},d),()=>{N&&N()}},[Array.isArray(e)?e.toString():e,g,s,o,u,l,r,d,n]);const w=(h=C.entry)==null?void 0:h.target,_=T.useRef(void 0);!g&&w&&!u&&!l&&_.current!==w&&(_.current=w,y({inView:!!c,entry:void 0}));const x=[m,C.inView,C.entry];return x.ref=x[0],x.inView=x[1],x.entry=x[2],x}const p8={type:et.Switch,icon:E.jsx(nC,{size:"1em"}),displayName:"Switch",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/switch",shortDescription:"Conditional branching",color:zi.Purple,getDiffContent:(e,n)=>Tt(e,r=>{const o={};(e.hitPolicy??"")!==(n.hitPolicy??"")&&Jt.set(o,"hitPolicy",{status:"modified",previousValue:e.hitPolicy});const s=Ys(e?.statements||[],n?.statements||[],{compareFields:(u,l)=>{const c=(u.condition??"")!==l.condition;return{hasChanges:c,fields:{...c&&{condition:{status:"modified",previousValue:l.condition}}}}}});return r.statements=s,s.find(u=>u?._diff?.status==="modified"||u?._diff?.status==="added"||u?._diff?.status==="removed")&&Jt.set(o,"statements",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:()=>!1,determineOutputType:e=>e.input},generateNode:({index:e})=>({name:`switch${e}`,content:{hitPolicy:"first",statements:[{id:crypto.randomUUID(),condition:"",isDefault:!1}]}}),renderNode:({specification:e,...n})=>E.jsx(g8,{specification:e,...n})},g8=({id:e,data:n,selected:r,specification:o})=>{const s=kt(),{ref:u,inView:l}=h8({delay:1e3}),{content:c,disabled:d,nodeTrace:f,compactMode:h,isGraphActive:g}=st(({decisionGraph:_,disabled:x,simulate:N,compactMode:F,activeTab:j})=>({nodeTrace:qe(N).with({result:Ge._},({result:H})=>H?.trace?.[e]).otherwise(()=>null),content:(_?.nodes||[]).find(H=>H?.id===e)?.content,disabled:x,compactMode:F,isGraphActive:j==="graph"})),m=Hu(e,{disabled:!g||!l}),D=c?.statements||[],C=c?.hitPolicy||"first",y=_=>{s.updateNode(e,x=>(x.content.hitPolicy=_,x))},w=T.useMemo(()=>h?y8:m8,[h]);return E.jsx(ji,{id:e,ref:u,className:Ke(["switch"]),specification:o,name:n.name,handleRight:!1,helper:[E.jsx(od,{},"arrow-right")],noBodyPadding:!0,isSelected:r,actions:[E.jsx(ut,{type:"text",disabled:d,onClick:()=>{C==="first"&&D?.length>0?s.updateNode(e,_=>(_.content.statements=(_.content.statements||[]).map(x=>(x.isDefault&&(x.isDefault=!1),x)),_.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!0}),_)):s.updateNode(e,_=>(_.content.statements=(_.content.statements||[]).map(x=>(x.isDefault&&(x.isDefault=!1),x)),_.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!1}),_))},children:"Add Condition"},"add condition"),E.jsx(Zs,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>y("first"),disabled:d},{key:"collect",label:"Collect",disabled:d,onClick:()=>{s.updateNode(e,_=>(_.content.statements=(_.content.statements||[]).map(x=>(x.isDefault&&(x.isDefault=!1),x)),_)),y("collect")}}]},children:E.jsxs(ut,{type:"text",style:{textTransform:"capitalize",marginLeft:"auto"},children:[C," ",E.jsx(DC,{})]})},"hitPolicy")],children:E.jsx("div",{className:"switchNode",children:E.jsxs("div",{className:"switchNode__body edit nodrag",children:[!(D?.length>0)&&E.jsx(Kt.Text,{type:"secondary",className:"no-conditions",children:"No conditions"}),D.map((_,x)=>E.jsx(w,{index:x,value:_.condition,diff:_?._diff,id:_.id,isDefault:_.isDefault,totalStatements:D.length,disabled:d,hitPolicy:C,variableType:m,onSetIsDefault:N=>{s.updateNode(e,F=>{const j=F.content.statements.find(H=>H.id===_.id);return N&&(j.condition=""),j.isDefault=N,F})},isActive:qe(f?.traceData).with({statements:Ge.array(Ge._)},({statements:N})=>N.some(F=>typeof F=="object"&&F&&"id"in F&&F.id===_?.id)).otherwise(()=>!1),onDelete:()=>{s.updateNode(e,N=>(N.content.statements=N.content.statements.filter(F=>F?.id!==_?.id),(N.content.statements||[]).length===1&&(N.content.statements=(N.content.statements||[]).map(F=>(F.isDefault&&(F.isDefault=!1),F))),N)),s.removeEdgeByHandleId(_?.id)},onChange:N=>{s.updateNode(e,F=>{const j=F.content.statements.find(H=>H.id===_.id);return j.condition=N,F})}},_.id))]})})})},m8=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:u=!0,onDelete:l,isActive:c,index:d=0,isDefault:f=!1,onSetIsDefault:h,totalStatements:g,hitPolicy:m,variableType:D})=>{const[C,y]=T.useState(n);T.useLayoutEffect(()=>{C!==n&&y(n)},[n]);const w=N=>{y(N),o?.(N)},_=d===g-1,x=f&&m==="first"&&_&&d>0&&(n||"")?.trim?.()?.length===0;return E.jsxs("div",{className:Ke("switchNode__statement",c&&"active",r?.status&&`diff-${r?.status}`),children:[E.jsxs("div",{className:Ke("switchNode__statement__heading",x&&"switchNode__statement__heading--without-input"),children:[(d===0||m==="collect")&&E.jsx(ut,{disabled:s,className:Ke("switchNode__statement__heading__action"),size:"small",type:"text",children:"If"}),m!=="collect"&&d>0&&E.jsx(ut,{className:Ke("switchNode__statement__heading__action",x&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{_&&m==="first"&&h?.(!1)},children:"Else If"}),m!=="collect"&&d>0&&_&&E.jsx(ut,{className:Ke("switchNode__statement__heading__action",!x&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{_&&m==="first"&&h?.(!0)},children:"Else"}),E.jsx("div",{style:{flexGrow:1}}),!s&&u&&E.jsx(Dg,{title:"Remove condition?",okText:"Remove",onConfirm:()=>l?.(),children:E.jsx(ut,{className:"switchNode__statement__delete",size:"small",type:"text",icon:E.jsx(Pu,{})})}),E.jsx(Pi,{id:e,type:"source",position:Ce.Right,className:Ke(c&&"switchNode__activeHandle")})]}),!x&&E.jsx("div",{className:"switchNode__statement__inputArea",children:E.jsx(Ou,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:C,maxRows:4,disabled:s,onChange:w,variableType:D})})]})},y8=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:u=!0,onDelete:l,isActive:c,variableType:d})=>{const[f,h]=T.useState(n);T.useLayoutEffect(()=>{f!==n&&h(n)},[n]);const g=m=>{h(m),o?.(m)};return E.jsxs("div",{className:Ke("switchNode__statement","compact",c&&"active",r?.status&&`diff-${r?.status}`),children:[E.jsx("div",{className:Ke("switchNode__statement__inputArea"),children:E.jsx(Ou,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:f,maxRows:4,disabled:s,onChange:g,variableType:d})}),!s&&u&&E.jsx("div",{className:"switchNode__statement__button",children:E.jsx(Dg,{title:"Remove condition?",okText:"Remove",onConfirm:()=>l?.(),children:E.jsx(ut,{className:"switchNode__statement__delete",size:"small",type:"text",icon:E.jsx(Pu,{})})})}),E.jsx(Pi,{id:e,type:"source",position:Ce.Right,className:Ke(c&&"switchNode__activeHandle")})]})};const di={[et.Input]:hm,[et.Output]:pm,[et.DecisionTable]:im,[et.Expression]:sm,[et.Function]:um,[et.Switch]:p8},v8=()=>{const{stateStore:e}=wo();return T.useEffect(()=>{if(yo())return e.subscribe(({simulate:n,nodeTypes:r,decisionGraph:o},s)=>{try{if(Jn(n,s?.simulate))return;const u=qe(n).with({result:Ge.nonNullable},({result:d})=>d.trace).otherwise(()=>null);if(u===null){const d=Tt(r,f=>{Object.values(f).forEach(h=>{delete h[Dt.Input],delete h[Dt.Output]})});e.setState({nodeTypes:d});return}const l=Object.values(u);if(l.length===0)return;const c=Tt(r,d=>{l.forEach(f=>{o.nodes.find(g=>g.id===f.id)?.type!=="inputNode"&&(d[f.id]??={},d[f.id][Dt.Output]=new Zn(f.output??{}),d[f.id][Dt.Input]=new Zn(f.input??{}))})});e.setState({nodeTypes:c})}catch(u){console.error("error occurred while setting up variable types from trace",u)}})},[]),T.useEffect(()=>{if(!yo())return;const n=k6();return e.subscribe((r,o)=>{try{const s=Xp(r),u=Xp(o),l=_8(r,o);if(Jn(s,u)&&!l)return;const c=D8(r,o,n);c.isModified&&e.setState({nodeTypes:c.nodeTypes})}catch(s){console.error("error occurred during node type inference",s)}})},[]),T.useEffect(()=>{if(yo())return e.subscribe((n,r)=>{try{const o=Yp(n),s=Yp(r);if(Jn(o,s))return;const u=Zn.fromJson({Object:{}});n.decisionGraph.nodes.forEach(l=>{const c=n.nodeTypes[l.id],d=c?.[Dt.Output]??c?.[Dt.InferredOutput]??Zn.fromJson({Object:{}});u.set(l.name,d)}),e.setState({globalType:{$nodes:u}})}catch(o){console.error("error occurred while global node types",o)}})},[]),null},D8=({decisionGraph:e,nodeTypes:n,customNodes:r},o,s)=>{let u=!1;const l=Tt(n,c=>{s.walk(e).forEach(({node:d,incomers:f})=>{if(d.type==="inputNode")return;const h=f.map(F=>{const j=c[F.id]??{};return j[Dt.Output]??j[Dt.InferredOutput]}).filter(F=>!!F).map(F=>F.clone()),g=qe(h.length).with(1,()=>h[0]).otherwise(()=>Zn.fromIncoming(h));c?.[d.id]?.[Dt.InferredInput]?.equal(g)||(u=!0,c[d.id]??={},c[d.id][Dt.InferredInput]=g);const D=di[d.type]?.inferTypes??r.find(F=>F.kind===d.type)?.inferTypes;if(!D)return;const C=c?.[d.id]?.[Dt.Input]??c?.[d.id]?.[Dt.InferredInput]??Zn.fromJson("Any"),y=o.nodeTypes?.[d.id]?.[Dt.Input]??o.nodeTypes?.[d.id]?.[Dt.InferredInput]??Zn.fromJson("Any"),w=o.decisionGraph.nodes.find(F=>F.id===d.id)?.content;if(!(D.needsUpdate(d.content,w)||!C.equal(y))&&c?.[d.id]?.[Dt.InferredOutput])return;const x=D.determineOutputType({input:C,content:d.content});c?.[d.id]?.[Dt.InferredOutput]?.equal(x)||(u=!0,c[d.id]??={},c[d.id][Dt.InferredOutput]=x)})});return{isModified:u,nodeTypes:l}},Xp=({decisionGraph:e,nodeTypes:n,customNodes:r})=>{const o=e.edges,s=e.nodes.map(({id:f,type:h})=>({id:f,type:h})),u=r.map(f=>f.kind),l=Object.entries(n).map(([f,h])=>({id:f,input:rd(h[Dt.Input]),output:rd(h[Dt.Output])})),c=e.nodes.find(f=>f.type==="inputNode")?.id,d=qe(n?.[c??""]?.[Dt.InferredOutput]).with(Ge.nonNullable,f=>f.hash()).otherwise(()=>null);return{edgesData:o,nodesData:s,typesData:l,customNodesData:u,inputNodeType:d}},_8=({decisionGraph:e,customNodes:n},r)=>e.nodes.map(s=>{const u=di[s.type]?.inferTypes??n.find(c=>c.kind===s.type)?.inferTypes;if(!u)return!1;const l=r.decisionGraph.nodes.find(c=>c.id===s.id);return l?u.needsUpdate(s.content,l.content):!0}).some(s=>s),rd=e=>{if(e)return e.__hash||(e.__hash=e.hash()),e.__hash},Yp=e=>({nodeInfo:e.decisionGraph.nodes.map(r=>{const o=e.nodeTypes[r.id],s=o?.[Dt.Output]??o?.[Dt.InferredOutput];return{id:r.id,type:rd(s),name:r.name}})});var Yt=function(){return Yt=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yt.apply(this,arguments)},Zp={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},Jp={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},au={width:"20px",height:"20px",position:"absolute",zIndex:1},b8={top:Yt(Yt({},Zp),{top:"-5px"}),right:Yt(Yt({},Jp),{left:void 0,right:"-5px"}),bottom:Yt(Yt({},Zp),{top:void 0,bottom:"-5px"}),left:Yt(Yt({},Jp),{left:"-5px"}),topRight:Yt(Yt({},au),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Yt(Yt({},au),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Yt(Yt({},au),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Yt(Yt({},au),{left:"-10px",top:"-10px",cursor:"nw-resize"})},w8=T.memo(function(e){var n=e.onResizeStart,r=e.direction,o=e.children,s=e.replaceStyles,u=e.className,l=T.useCallback(function(f){n(f,r)},[n,r]),c=T.useCallback(function(f){n(f,r)},[n,r]),d=T.useMemo(function(){return Yt(Yt({position:"absolute",userSelect:"none"},b8[r]),s??{})},[s,r]);return E.jsx("div",{className:u||void 0,style:d,onMouseDown:l,onTouchStart:c,children:o})}),x8=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])},e(n,r)};return function(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Br=function(){return Br=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Br.apply(this,arguments)},C8={width:"auto",height:"auto"},uu=function(e,n,r){return Math.max(Math.min(e,r),n)},Kp=function(e,n,r){var o=Math.round(e/n);return o*n+r*(o-1)},Ko=function(e,n){return new RegExp(e,"i").test(n)},cu=function(e){return!!(e.touches&&e.touches.length)},E8=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},Qp=function(e,n,r){r===void 0&&(r=0);var o=n.reduce(function(u,l,c){return Math.abs(l-e)<Math.abs(n[u]-e)?c:u},0),s=Math.abs(n[o]-e);return r===0||s<r?n[o]:e},dl=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},lu=function(e,n,r,o){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var s=Number(e.replace("%",""))/100;return n*s}if(e.endsWith("vw")){var s=Number(e.replace("vw",""))/100;return r*s}if(e.endsWith("vh")){var s=Number(e.replace("vh",""))/100;return o*s}}return e},S8=function(e,n,r,o,s,u,l){return o=lu(o,e.width,n,r),s=lu(s,e.height,n,r),u=lu(u,e.width,n,r),l=lu(l,e.height,n,r),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof u>"u"?void 0:Number(u),minHeight:typeof l>"u"?void 0:Number(l)}},A8=function(e){return Array.isArray(e)?e:[e,e]},F8=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],eg="__resizable_base__",N8=function(e){x8(n,e);function n(r){var o,s,u,l,c=e.call(this,r)||this;return c.ratio=1,c.resizable=null,c.parentLeft=0,c.parentTop=0,c.resizableLeft=0,c.resizableRight=0,c.resizableTop=0,c.resizableBottom=0,c.targetLeft=0,c.targetTop=0,c.delta={width:0,height:0},c.appendBase=function(){if(!c.resizable||!c.window)return null;var d=c.parentNode;if(!d)return null;var f=c.window.document.createElement("div");return f.style.width="100%",f.style.height="100%",f.style.position="absolute",f.style.transform="scale(0, 0)",f.style.left="0",f.style.flex="0 0 100%",f.classList?f.classList.add(eg):f.className+=eg,d.appendChild(f),f},c.removeBase=function(d){var f=c.parentNode;f&&f.removeChild(d)},c.state={isResizing:!1,width:(s=(o=c.propsSize)===null||o===void 0?void 0:o.width)!==null&&s!==void 0?s:"auto",height:(l=(u=c.propsSize)===null||u===void 0?void 0:u.height)!==null&&l!==void 0?l:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},c.onResizeStart=c.onResizeStart.bind(c),c.onMouseMove=c.onMouseMove.bind(c),c.onMouseUp=c.onMouseUp.bind(c),c}return Object.defineProperty(n.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||C8},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){var r=0,o=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,u=this.resizable.offsetHeight,l=this.resizable.style.position;l!=="relative"&&(this.resizable.style.position="relative"),r=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:u,this.resizable.style.position=l}return{width:r,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sizeStyle",{get:function(){var r=this,o=this.props.size,s=function(c){var d;if(typeof r.state[c]>"u"||r.state[c]==="auto")return"auto";if(r.propsSize&&r.propsSize[c]&&(!((d=r.propsSize[c])===null||d===void 0)&&d.toString().endsWith("%"))){if(r.state[c].toString().endsWith("%"))return r.state[c].toString();var f=r.getParentSize(),h=Number(r.state[c].toString().replace("px","")),g=h/f[c]*100;return"".concat(g,"%")}return dl(r.state[c])},u=o&&typeof o.width<"u"&&!this.state.isResizing?dl(o.width):s("width"),l=o&&typeof o.height<"u"&&!this.state.isResizing?dl(o.height):s("height");return{width:u,height:l}},enumerable:!1,configurable:!0}),n.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var r=this.appendBase();if(!r)return{width:0,height:0};var o=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),r.style.position="relative",r.style.minWidth="100%",r.style.minHeight="100%";var u={width:r.offsetWidth,height:r.offsetHeight};return o&&(this.parentNode.style.flexWrap=s),this.removeBase(r),u},n.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},n.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},n.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var r=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:r.flexBasis!=="auto"?r.flexBasis:void 0})}},n.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},n.prototype.createSizeForCssProperty=function(r,o){var s=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===r&&(typeof s>"u"||s==="auto")?"auto":r},n.prototype.calculateNewMaxFromBoundary=function(r,o){var s=this.props.boundsByDirection,u=this.state.direction,l=s&&Ko("left",u),c=s&&Ko("top",u),d,f;if(this.props.bounds==="parent"){var h=this.parentNode;h&&(d=l?this.resizableRight-this.parentLeft:h.offsetWidth+(this.parentLeft-this.resizableLeft),f=c?this.resizableBottom-this.parentTop:h.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(d=l?this.resizableRight:this.window.innerWidth-this.resizableLeft,f=c?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(d=l?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),f=c?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return d&&Number.isFinite(d)&&(r=r&&r<d?r:d),f&&Number.isFinite(f)&&(o=o&&o<f?o:f),{maxWidth:r,maxHeight:o}},n.prototype.calculateNewSizeFromDirection=function(r,o){var s=this.props.scale||1,u=A8(this.props.resizeRatio||1),l=u[0],c=u[1],d=this.state,f=d.direction,h=d.original,g=this.props,m=g.lockAspectRatio,D=g.lockAspectRatioExtraHeight,C=g.lockAspectRatioExtraWidth,y=h.width,w=h.height,_=D||0,x=C||0;return Ko("right",f)&&(y=h.width+(r-h.x)*l/s,m&&(w=(y-x)/this.ratio+_)),Ko("left",f)&&(y=h.width-(r-h.x)*l/s,m&&(w=(y-x)/this.ratio+_)),Ko("bottom",f)&&(w=h.height+(o-h.y)*c/s,m&&(y=(w-_)*this.ratio+x)),Ko("top",f)&&(w=h.height-(o-h.y)*c/s,m&&(y=(w-_)*this.ratio+x)),{newWidth:y,newHeight:w}},n.prototype.calculateNewSizeFromAspectRatio=function(r,o,s,u){var l=this.props,c=l.lockAspectRatio,d=l.lockAspectRatioExtraHeight,f=l.lockAspectRatioExtraWidth,h=typeof u.width>"u"?10:u.width,g=typeof s.width>"u"||s.width<0?r:s.width,m=typeof u.height>"u"?10:u.height,D=typeof s.height>"u"||s.height<0?o:s.height,C=d||0,y=f||0;if(c){var w=(m-C)*this.ratio+y,_=(D-C)*this.ratio+y,x=(h-y)/this.ratio+C,N=(g-y)/this.ratio+C,F=Math.max(h,w),j=Math.min(g,_),H=Math.max(m,x),K=Math.min(D,N);r=uu(r,F,j),o=uu(o,H,K)}else r=uu(r,h,g),o=uu(o,m,D);return{newWidth:r,newHeight:o}},n.prototype.setBoundingClientRect=function(){var r=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var s=o.getBoundingClientRect();this.parentLeft=s.left*r,this.parentTop=s.top*r}}if(this.props.bounds&&typeof this.props.bounds!="string"){var u=this.props.bounds.getBoundingClientRect();this.targetLeft=u.left*r,this.targetTop=u.top*r}if(this.resizable){var l=this.resizable.getBoundingClientRect(),c=l.left,d=l.top,f=l.right,h=l.bottom;this.resizableLeft=c*r,this.resizableRight=f*r,this.resizableTop=d*r,this.resizableBottom=h*r}},n.prototype.onResizeStart=function(r,o){if(!(!this.resizable||!this.window)){var s=0,u=0;if(r.nativeEvent&&E8(r.nativeEvent)?(s=r.nativeEvent.clientX,u=r.nativeEvent.clientY):r.nativeEvent&&cu(r.nativeEvent)&&(s=r.nativeEvent.touches[0].clientX,u=r.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var l=this.props.onResizeStart(r,o,this.resizable);if(l===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var c,d=this.window.getComputedStyle(this.resizable);if(d.flexBasis!=="auto"){var f=this.parentNode;if(f){var h=this.window.getComputedStyle(f).flexDirection;this.flexDir=h.startsWith("row")?"row":"column",c=d.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var g={original:{x:s,y:u,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Br(Br({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(r.target).cursor||"auto"}),direction:o,flexBasis:c};this.setState(g)}},n.prototype.onMouseMove=function(r){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&cu(r))try{r.preventDefault(),r.stopPropagation()}catch{}var s=this.props,u=s.maxWidth,l=s.maxHeight,c=s.minWidth,d=s.minHeight,f=cu(r)?r.touches[0].clientX:r.clientX,h=cu(r)?r.touches[0].clientY:r.clientY,g=this.state,m=g.direction,D=g.original,C=g.width,y=g.height,w=this.getParentSize(),_=S8(w,this.window.innerWidth,this.window.innerHeight,u,l,c,d);u=_.maxWidth,l=_.maxHeight,c=_.minWidth,d=_.minHeight;var x=this.calculateNewSizeFromDirection(f,h),N=x.newHeight,F=x.newWidth,j=this.calculateNewMaxFromBoundary(u,l);this.props.snap&&this.props.snap.x&&(F=Qp(F,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(N=Qp(N,this.props.snap.y,this.props.snapGap));var H=this.calculateNewSizeFromAspectRatio(F,N,{width:j.maxWidth,height:j.maxHeight},{width:c,height:d});if(F=H.newWidth,N=H.newHeight,this.props.grid){var K=Kp(F,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),ee=Kp(N,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),B=this.props.snapGap||0,V=B===0||Math.abs(K-F)<=B?K:F,Y=B===0||Math.abs(ee-N)<=B?ee:N;F=V,N=Y}var te={width:F-D.width,height:N-D.height};if(this.delta=te,C&&typeof C=="string"){if(C.endsWith("%")){var Z=F/w.width*100;F="".concat(Z,"%")}else if(C.endsWith("vw")){var R=F/this.window.innerWidth*100;F="".concat(R,"vw")}else if(C.endsWith("vh")){var G=F/this.window.innerHeight*100;F="".concat(G,"vh")}}if(y&&typeof y=="string"){if(y.endsWith("%")){var Z=N/w.height*100;N="".concat(Z,"%")}else if(y.endsWith("vw")){var R=N/this.window.innerWidth*100;N="".concat(R,"vw")}else if(y.endsWith("vh")){var G=N/this.window.innerHeight*100;N="".concat(G,"vh")}}var k={width:this.createSizeForCssProperty(F,"width"),height:this.createSizeForCssProperty(N,"height")};this.flexDir==="row"?k.flexBasis=k.width:this.flexDir==="column"&&(k.flexBasis=k.height);var J=this.state.width!==k.width,se=this.state.height!==k.height,U=this.state.flexBasis!==k.flexBasis,re=J||se||U;re&&cg.flushSync(function(){o.setState(k)}),this.props.onResize&&re&&this.props.onResize(r,m,this.resizable,te)}},n.prototype.onMouseUp=function(r){var o,s,u=this.state,l=u.isResizing,c=u.direction;u.original,!(!l||!this.resizable)&&(this.props.onResizeStop&&this.props.onResizeStop(r,c,this.resizable,this.delta),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Br(Br({},this.state.backgroundStyle),{cursor:"auto"})}))},n.prototype.updateSize=function(r){var o,s;this.setState({width:(o=r.width)!==null&&o!==void 0?o:"auto",height:(s=r.height)!==null&&s!==void 0?s:"auto"})},n.prototype.renderResizer=function(){var r=this,o=this.props,s=o.enable,u=o.handleStyles,l=o.handleClasses,c=o.handleWrapperStyle,d=o.handleWrapperClass,f=o.handleComponent;if(!s)return null;var h=Object.keys(s).map(function(g){return s[g]!==!1?E.jsx(w8,{direction:g,onResizeStart:r.onResizeStart,replaceStyles:u&&u[g],className:l&&l[g],children:f&&f[g]?f[g]:null},g):null});return E.jsx("div",{className:d,style:c,children:h})},n.prototype.render=function(){var r=this,o=Object.keys(this.props).reduce(function(l,c){return F8.indexOf(c)!==-1||(l[c]=r.props[c]),l},{}),s=Br(Br(Br({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var u=this.props.as||"div";return E.jsxs(u,Br({style:s,className:this.props.className},o,{ref:function(l){l&&(r.resizable=l)},children:[this.state.isResizing&&E.jsx("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},n.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},n}(T.PureComponent);const tg="jdmEditor:graphPanel:height",gm=()=>{const e=kt(),{panels:n,activePanel:r}=st(({panels:u,activePanel:l})=>({panels:u,activePanel:l})),o=T.useMemo(()=>r===void 0?void 0:(n||[]).find(u=>u.id===r),[r,n]),s=T.useMemo(()=>Number.parseFloat(localStorage.getItem(tg)??"")??300,[o]);return o?E.jsxs(N8,{className:"grl-dg__panel",defaultSize:{height:s},handleStyles:{bottom:{display:"none"},left:{display:"none"},topLeft:{display:"none"},topRight:{display:"none"},right:{display:"none"},bottomLeft:{display:"none"},bottomRight:{display:"none"}},maxHeight:500,minHeight:150,onResize:(u,l,c)=>{localStorage.setItem(tg,c.clientHeight.toString())},children:[!o.hideHeader&&E.jsxs("div",{className:"grl-dg__panel__toolbar",children:[E.jsx("div",{className:"grl-dg__panel__toolbar__content",children:E.jsx(Kt.Text,{style:{fontSize:13},children:o.title})}),E.jsx("div",{className:"grl-dg__panel__toolbar__actions",children:E.jsx(xr,{placement:"topLeft",title:"Close panel",children:E.jsx(ut,{size:"small",type:"text",icon:E.jsx(Do,{style:{fontSize:12}}),onClick:()=>e.setActivePanel(void 0)})})})]}),E.jsx("div",{className:"grl-dg__panel__content",children:o?.renderPanel?.({})})]}):null};gm.__docgenInfo={description:"",methods:[],displayName:"GraphPanel"};const oa=fe.string().default(()=>crypto.randomUUID());var mm=(e=>(e.Input="inputNode",e.Output="outputNode",e.DecisionTable="decisionTableNode",e.Function="functionNode",e.Expression="expressionNode",e.Switch="switchNode",e.Decision="decisionNode",e))(mm||{});const T8="customNode",fi=fe.object({id:oa,name:fe.string(),position:fe.object({x:fe.number(),y:fe.number()}).default({x:0,y:0})}),I8=fe.object({type:fe.literal("inputNode"),content:fe.object({schema:fe.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(fi),R8=fe.object({type:fe.literal("outputNode"),content:fe.object({schema:fe.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(fi),O8=fe.object({type:fe.literal("decisionTableNode"),content:fe.object({hitPolicy:fe.enum(["first","collect"]).nullish().transform(e=>e??"first"),rules:fe.array(fe.record(fe.string(),fe.string().nullish().transform(e=>e??""))).default([]),inputs:fe.array(fe.object({id:oa,name:fe.string().nullish(),field:fe.string().nullish(),defaultValue:fe.string().nullish()})),outputs:fe.array(fe.object({id:oa,name:fe.string(),field:fe.string(),defaultValue:fe.string().nullish()})),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(fi),B8=fe.object({type:fe.literal("functionNode"),content:fe.string().or(fe.object({source:fe.string().default(""),omitNodes:fe.boolean().nullish().transform(e=>e??!1)})).nullish()}).merge(fi),M8=fe.object({type:fe.literal("expressionNode"),content:fe.object({expressions:fe.array(fe.object({id:oa,key:fe.string().default(""),value:fe.string().default("")})),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(fi),P8=fe.object({type:fe.literal("decisionNode"),content:fe.object({key:fe.string(),passThrough:fe.boolean().nullish().transform(e=>e??!1),inputField:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:fe.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:fe.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(fi),z8=fe.object({type:fe.literal("switchNode"),content:fe.object({hitPolicy:fe.enum(["first","collect"]).nullish().transform(e=>e??"first"),statements:fe.array(fe.object({id:oa,condition:fe.string().nullish().transform(e=>e??""),isDefault:fe.boolean().nullish().transform(e=>e??!1)}))})}).merge(fi),j8=fe.object({type:fe.literal(T8),content:fe.object({kind:fe.string(),config:fe.any()})}).merge(fi),k8=fe.object({type:fe.string().refine(e=>!Object.values(mm).includes(e),{message:"Invalid type"}),content:fe.any().nullish()}).merge(fi),vu=fe.discriminatedUnion("type",[P8,M8,B8,O8,z8,j8,I8,R8]).or(k8),$8=fe.object({id:fe.string(),sourceId:fe.string(),targetId:fe.string(),sourceHandle:fe.string().nullish(),type:fe.enum(["edge"])});fe.object({inputSchema:fe.any().nullish().default(null),outputSchema:fe.any().nullish().default(null)});const ng=fe.object({nodes:fe.array(vu).default([]),edges:fe.array($8).default([])}),ym=e=>{const n=kt(),{id:r,sourceX:o,sourceY:s,targetX:u,targetY:l,sourcePosition:c,targetPosition:d,style:f={},markerEnd:h}=e,{isHovered:g,disabled:m}=st(({hoveredEdgeId:_,disabled:x})=>({isHovered:_===r,disabled:x})),{diff:D}=z6(r),[C,y,w]=Ad({sourceX:o,sourceY:s,sourcePosition:c,targetX:u,targetY:l,targetPosition:d});return E.jsxs(E.Fragment,{children:[E.jsx(fs,{path:C,markerEnd:h,style:{...f||{},stroke:qe(D).with({status:"added"},()=>"var(--grl-color-success)").with({status:"removed"},()=>"var(--grl-color-error)").otherwise(()=>{})}}),E.jsx(D6,{children:E.jsx("div",{className:"nodrag nopan edge-renderer",style:{transform:`translate(-50%, -50%) translate(${y}px,${w}px)`},children:!m&&E.jsx(ut,{type:"primary",shape:"round",icon:E.jsx(Pu,{}),danger:!0,className:Ke("grl-edge-delete-button"),"data-visible":g,onClick:()=>n.removeEdges([r])})})})]})},q8=e=>n=>E.jsx(ym,{...n,...e});ym.__docgenInfo={description:"",methods:[],displayName:"CustomEdge"};const L8=e=>typeof e!="object"?!1:Array.isArray(e?.nodes),H8=(e,n)=>{const r=wo(),o=kt(),s=T.useCallback(async l=>{try{if(!e.current)return;const c=(r.stateStore.getState()?.decisionGraph?.nodes||[]).filter(g=>l.some(m=>m.id===g.id)),d=c.map(g=>g.id),f=[];c.length>0&&e.current.getEdges().forEach(m=>{d.includes(m.source)&&d.includes(m.target)&&f.push({id:m.id,type:m.type,sourceId:m.source,targetId:m.target,sourceHandle:m.sourceHandle??void 0,targetHandle:m.targetHandle??void 0})}),await Du(JSON.stringify({nodes:c,edges:f})),Zt.success("Copied to clipboard!")}catch(c){Zt.error(c.message)}},[r]),u=T.useCallback(async()=>{try{if(!e?.current)return;const l=await Bw();if(!l)return;const c=JSON.parse(l);if(!L8(c))throw new Error("invalid clipboard");const d=c.nodes.reduce((y,w)=>({...y,[w.id]:crypto.randomUUID()}),{}),f=Object.keys(d),h=e.current.getNodes().find(y=>f.includes(y.id)),g=c.nodes.find(y=>y.id===h?.id),m={x:c.nodes.reduce((y,w)=>y+w.position.x,0)/c.nodes.length,y:c.nodes.reduce((y,w)=>y+w.position.y,0)/c.nodes.length},D=c.nodes.map(y=>{const w={x:y?.position?.x||0,y:y?.position?.y||0};if(h&&g)y.id===h.id?(w.x=h.position.x,w.y=h.position.y-20):(w.x=h.position.x-g.position.x+y.position.x,w.y=h.position.y-g.position.y+y.position.y-20);else if(n.current){const _=n.current.getBoundingClientRect(),x={x:_.width/2,y:_.height/2},N=e.current.project(x);w.x=y.position.x+N.x-m.x/2,w.y=y.position.y+N.y-m.y/2}return{...y,position:w,id:d[y.id]}}),C=(c.edges||[]).map(y=>({id:crypto.randomUUID(),type:y.type,sourceId:d[y.sourceId],targetId:d[y.targetId],sourceHandle:y.sourceHandle??void 0,targetHandle:y.targetHandle??void 0}));if(o.addNodes(D),o.addEdges(C),Zt.success("Pasted from clipboard!"),h)try{await Du(JSON.stringify({nodes:D}))}catch{}}catch{Zt.error("Failed to paste from clipboard")}},[e,n]);return T.useMemo(()=>({copyNodes:s,pasteNodes:u}),[s,u])},vm=W.memo(({inputDisabled:e,disabled:n})=>{const r=st(h=>h.components||[]),o=st(h=>h.customNodes||[]),[s,u]=T.useState(""),l=T.useCallback((h,g,m)=>{const D=h.target;if(!D)return;const{offsetX:C,offsetY:y}=h.nativeEvent,{height:w,width:_}=D.getBoundingClientRect(),x={x:C/_,y:y/w};h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("nodeType",g),h.dataTransfer.setData("relativePosition",JSON.stringify(x)),m&&h.dataTransfer.setData("customNodeComponent",m)},[]),c=T.useMemo(()=>{const h={core:Object.values(di)};return r?.length>0&&(h.extended=r),(o||[]).forEach(g=>{const m=g.group?.trim?.()||"";m.length>0&&(h?.[m]?h[m].push({...g,type:"customNode"}):h[m]=[{...g,type:"customNode"}])}),(o||[]).forEach(g=>{g?.group||(h?.custom?h.custom.push({...g,type:"customNode"}):h.custom=[{...g,type:"customNode"}])}),h},[r,o]),d=T.useMemo(()=>Object.keys(c).reduce((h,g)=>({...h,[g]:(c[g]||[]).filter(m=>!(s?.trim?.().length>0)||(m.type||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.displayName||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.shortDescription||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.group||"").toLowerCase().indexOf(s.toLowerCase())>-1)}),{}),[c,s]),f=r.length+o.length;return E.jsxs("div",{children:[f>5&&E.jsx(hg,{placeholder:"Search components...",value:s,onChange:h=>u(h.target.value||""),allowClear:!0,className:"grl-dg__aside__menu__components__search"}),E.jsx("div",{className:"grl-dg__aside__menu__components",children:Object.keys(d).map(h=>qe(h).with("core",()=>d.core?.length>0&&E.jsx(W.Fragment,{children:(d.core||[]).map(g=>E.jsx(W.Fragment,{children:E.jsx(rg,{disabled:qe(g.type).with(et.Input,()=>n||e).otherwise(()=>n),specification:g,onDragStart:m=>di[g.type]!==void 0?l(m,g.type):l(m,"customNode","kind"in g?g.kind:"")})},"kind"in g?g.kind:g.type))},h)).otherwise(g=>d[g]?.length>0&&E.jsx(W.Fragment,{children:(d?.[g]||[]).map(m=>E.jsx(rg,{disabled:n,specification:m,onDragStart:D=>g==="extended"?l(D,m.type):l(D,"customNode","kind"in m?m.kind:"")},"kind"in m?m.kind:m.type))},g)))})]})}),rg=({specification:e,disabled:n=!1,...r})=>E.jsx("div",{className:Ke("draggable-component"),draggable:!n,...r,children:E.jsx("div",{style:{pointerEvents:"none"},children:E.jsx(Pd,{listMode:!0,compactMode:!0,color:e.color,icon:e.icon,name:e.displayName,type:e.shortDescription})})});vm.__docgenInfo={description:"",methods:[],displayName:"GraphComponents",props:{inputDisabled:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const G8=Object.entries(di).reduce((e,[n,r])=>({...e,[n]:W.memo(o=>r.renderNode({specification:r,...o}),(o,s)=>o.id===s.id&&o.selected===s.selected&&hl(o.data,s.data))}),{}),V8={edge:W.memo(q8(null))},Dm=T.forwardRef(function({reactFlowProOptions:n,className:r},o){const s=T.useRef(null),u=T.useRef(null),l=_6([]),c=b6([]),[d,f]=T.useState(!0),h=wo(),g=kt(),m=P6(B=>B),{onReactFlowInit:D}=Md(({onReactFlowInit:B})=>({onReactFlowInit:B})),{disabled:C,hasInputNode:y,components:w,customNodes:_}=st(({disabled:B,components:V,customNodes:Y,decisionGraph:te})=>({disabled:B,components:V,customNodes:Y,hasInputNode:(te?.nodes||[]).some(Z=>Z.type===et.Input)}));m.nodesState.current=l,m.edgesState.current=c,m.graphClipboard.current=H8(u,s),m.reactFlowInstance.current=u.current;const x=T.useMemo(()=>W.memo(B=>{const V=_.find(Y=>Y.kind===B?.data?.kind);return V?V.renderNode({specification:V,...B}):(console.warn("node not found",B,_),E.jsx(ji,{id:B.id,specification:{displayName:`${B.data?.kind}`,color:"var(--grl-color-error)",icon:E.jsx(MC,{})},name:B?.data?.name,isSelected:B.selected,displayError:!0,noBodyPadding:!0,handleLeft:!0,handleRight:!0}))},(B,V)=>B.id===V.id&&B.selected===V.selected&&hl(B.data,V.data)),[_]),N=T.useMemo(()=>w.reduce((B,V)=>({...B,[V.type]:W.memo(Y=>V.renderNode({specification:V,...Y}),(Y,te)=>Y.id===te.id&&Y.selected===te.selected&&hl(Y.data,te.data))}),{...G8,customNode:x}),[w,x]),F=async(B,V,Y)=>{if(!s.current||!u.current)return;if(!V){const G=s.current.getBoundingClientRect(),k={x:G.width/2,y:G.height/2};V=u.current.project(k)}const te=qe(B).with("customNode",()=>_.find(G=>G.kind===Y)).otherwise(()=>[...Object.values(di),...w].find(k=>k.type===B));if(!te){Zt.error(`Unknown node type ${B} - ${Y}.`);return}let Z=qe(te).with({kind:Ge.string},G=>{const k=(u.current?.getNodes()||[]).filter(se=>se.data?.kind===G.kind).length+1,J=G.generateNode({index:k});return{id:crypto.randomUUID(),type:"customNode",name:J.name,position:V,content:{kind:G.kind,config:J?.config}}}).with({type:Ge.string},G=>{const k=(u.current?.getNodes()||[]).filter(se=>se.type===G.type).length+1,J=G.generateNode({index:k});return{id:crypto.randomUUID(),type:G.type,position:V,...J}}).otherwise(()=>null);if(!Z){Zt.error(`Unknown node type ${B} - ${Y}.`);return}if(te.onNodeAdd)try{Z=await te.onNodeAdd(Z)}catch{return}const R=vu.safeParse(Z);if(R.success)return g.addNodes([vu.parse(Z)]);Zt.error(R.error?.message)},j=B=>{if(B.source===B.target||C)return!1;const[V]=l,[Y]=c,te=Y.some(G=>G.source===B.source&&G.target===B.target&&(G.sourceHandle??null)===(B.sourceHandle??null)&&(G.targetHandle??null)===(B.targetHandle??null)),Z=V.find(G=>G.id===B.target);if(!Z||Z.id===B.source)return!1;const R=(G,k=new Set)=>{if(k.has(G.id))return!1;k.add(G.id);for(const J of Iu(G,V,Y))if(J.id===B.source||R(J,k))return!0};return!te&&!R(Z)},H=B=>{if(B.preventDefault(),B.stopPropagation(),!s.current||!u.current)return;const V=s.current.getBoundingClientRect();let Y;try{Y=JSON.parse(B.dataTransfer.getData("relativePosition"))}catch{return}const te=u.current.project({x:B.clientX-V.left,y:B.clientY-V.top});te.x-=Math.round(Y.x*226/10)*10,te.y-=Math.round(Y.y*60/10)*10;const Z=B.dataTransfer.getData("nodeData");if(Z){try{const k=JSON.parse(Z);g.addNodes([vu.parse({...k,position:te})])}catch(k){hd.error({message:"Failed to create a node"}),console.error(k)}return}const R=B.dataTransfer.getData("nodeType"),G=qe(B.dataTransfer.getData("customNodeComponent")).with(Ge.string,k=>k).otherwise(()=>{});F(R,te,G)},K=B=>{B.preventDefault(),B.dataTransfer.dropEffect="move"},ee=B=>{const V={...B,type:"edge",id:crypto.randomUUID()};C||g.addEdges([M6(V)])};return T.useImperativeHandle(o,()=>({...g,stateStore:h.stateStore})),E.jsx("div",{className:Ke(["tab-content",r]),tabIndex:0,onKeyDown:B=>{B.key==="v"&&B.metaKey&&!C&&g.pasteNodes()},children:E.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex"},children:[!C&&!d&&E.jsx("div",{className:"grl-dg__components__floating",style:{position:"absolute",top:8,right:8,zIndex:1},children:E.jsx(xr,{placement:"right",title:"Components",children:E.jsx(ut,{icon:E.jsx(wC,{style:{fontSize:12}}),onClick:()=>f(!0)})})}),E.jsx("div",{tabIndex:0,className:"content-wrapper",onKeyDown:B=>{const[V]=l,[Y]=c;if(B.key==="c"&&B.metaKey){const te=l[0].filter(Z=>Z.selected).map(({id:Z})=>Z);if(te.length===0)return;g.copyNodes(te),B.preventDefault()}else if(B.key==="d"&&B.metaKey){if(!C){const te=V.filter(Z=>Z.selected).map(({id:Z})=>Z);if(te.length===0)return;g.duplicateNodes(te)}B.preventDefault()}else if(B.key==="Backspace"){if(!C){const te=V.filter(R=>R.selected),Z=Y.filter(R=>R.selected);if(te.length>0){const R=te.length,G=R>1?"nodes":"node";Mu.confirm({icon:null,title:`Delete ${G}`,content:E.jsxs(Kt.Text,{children:["Are you sure you want to delete ",R>1?`${R} ${G}`:G,"?"]}),okButtonProps:{danger:!0},onOk:()=>{Z.length>0&&g.removeEdges(Z.map(k=>k.id)),g.removeNodes(te.map(k=>k.id))}})}else Z.length>0&&g.removeEdges(Z.map(R=>R.id))}B.stopPropagation(),B.preventDefault()}},children:E.jsx("div",{className:Ke(["react-flow"]),ref:s,children:E.jsxs(J0,{deleteKeyCode:null,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,zoomOnDoubleClick:!1,connectionRadius:35,nodes:l[0],edges:c[0],onInit:B=>{u.current=B,D?.(B)},snapToGrid:!0,snapGrid:[5,5],minZoom:.25,selectionMode:ds.Partial,nodeTypes:N,edgeTypes:V8,onDrop:H,onDragOver:K,onConnect:ee,isValidConnection:j,proOptions:n,nodesConnectable:!C,nodesDraggable:!C,edgesUpdatable:!C,onNodesChange:g.handleNodesChange,onEdgesChange:g.handleEdgesChange,onNodesDelete:B=>{B.forEach(V=>{g.closeTab(V?.id)})},onEdgeMouseEnter:(B,V)=>g.setHoveredEdgeId(V.id),onEdgeMouseLeave:()=>g.setHoveredEdgeId(null),children:[E.jsx(F6,{showInteractive:!1,children:E.jsx(ts,{onClick:()=>g.toggleCompactMode(),children:E.jsx(gC,{})})}),E.jsx(B6,{color:"var(--grl-color-border)",gap:20})]})})}),!C&&d&&E.jsxs("div",{className:"grl-dg__aside__menu",children:[E.jsxs("div",{className:"grl-dg__aside__menu__heading",children:[E.jsxs("div",{className:"grl-dg__aside__menu__heading__text",children:[E.jsx(Kt.Text,{strong:!0,style:{marginBottom:0},children:"Components"})," ",E.jsx(Kt.Text,{type:"secondary",style:{fontSize:10,marginLeft:5},children:"(Drag-and-drop)"})]}),E.jsx(ut,{type:"text",size:"small",icon:E.jsx(Do,{style:{fontSize:12}}),onClick:()=>f(!1)})]}),E.jsx("div",{className:"grl-dg__aside__menu__content",children:E.jsx(vm,{inputDisabled:y,disabled:C})})]})]})})});Dm.__docgenInfo={description:"",methods:[],displayName:"Graph",props:{className:{required:!1,tsType:{name:"string"},description:""},onDisableTabs:{required:!1,tsType:{name:"signature",type:"function",raw:"(val: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"val"}],return:{name:"void"}}},description:""},reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""}}};const{Title:ig,Text:Qo}=Kt,_m=W.memo(({className:e})=>{const{decisionGraph:n,customComponents:r,viewConfig:o,viewConfigCta:s}=st(D=>({decisionGraph:D.decisionGraph||[],customComponents:D.components,activeTabId:D.activeTab,viewConfig:D.viewConfig,viewConfigCta:D.viewConfigCta})),{openTab:u}=kt(),l=Md(D=>D.onViewConfigCta),c=T.useMemo(()=>(n?.nodes||[]).filter(D=>o?.enabled?!!o?.permissions?.[D.id]:!0).map(D=>{const C=D.type,y=di[D.type]||(r||[]).find(w=>w.type===D.type);return{id:D.id,type:D.type,name:D.name,disabled:qe(C).with(et.Function,()=>!1).with(et.DecisionTable,()=>!1).with(et.Expression,()=>!1).otherwise(()=>!0),position:D.position,icon:y?.icon,_diff:D?._diff}}),[n,o]),[d,f]=T.useState(""),h=({node:D})=>{const C=di?.[D?.type];return E.jsx(Gw,{hoverable:!0,className:Ke(["config-item-card",D?._diff?.status]),styles:{body:{padding:16}},onClick:()=>u(D.id),children:E.jsxs("div",{className:"config-item-card__content",children:[E.jsx(dd,{size:"large",shape:"square",style:{background:C?.color||zi.Blue,fontSize:16,width:24,height:24,lineHeight:"22px",borderRadius:3},icon:C?.icon}),E.jsxs("div",{style:{flex:1},children:[E.jsx(Qo,{style:{margin:0,fontSize:14,marginBottom:D?.description?"4px":0},children:D.name}),D?.description&&E.jsx(Qo,{type:"secondary",style:{fontSize:"14px"},children:D?.description})]})]})})},g=T.useMemo(()=>{const D=c.filter(C=>d.trim()?.length>0?C.name?.toLowerCase?.()?.indexOf?.(d?.trim?.()?.toLowerCase?.())>-1:!0);return[{title:"Decision Tables",nodes:D.filter(C=>C.type===et.DecisionTable)},{title:"Expressions",nodes:D.filter(C=>C.type===et.Expression)},{title:"Functions",nodes:D.filter(C=>C.type===et.Function)}]},[d,c]),m=(c?.length||0)===0;return E.jsx("div",{className:Ke(["grl-dg__view",e]),children:E.jsxs("div",{className:"grl-dg__view__content",children:[E.jsxs("div",{className:"grl-dg__view__content__heading",children:[E.jsxs("div",{className:"grl-dg__view__content__heading__first-row",children:[E.jsx(ig,{level:4,style:{margin:0,marginBottom:"8px"},children:m?"Decision View Not Configured":"Decision View"}),s&&E.jsx(ut,{type:"primary",onClick:()=>{l?.()},children:s})]}),m?E.jsx(E.Fragment,{children:n?.nodes?.length>0?E.jsx(Qo,{type:"secondary",children:"This decision model contains multiple components, but no view has been configured yet."}):E.jsx(Qo,{type:"secondary",children:"This decision model doesn't contain any component."})}):E.jsx(Qo,{type:"secondary",children:o?.description||"Configure business rules for your decision model"})]}),!m&&E.jsxs("div",{className:"grl-dg__view__content__search",children:[E.jsxs(cd,{children:[E.jsx(hg,{placeholder:"Search nodes",prefix:E.jsx(FC,{}),style:{width:350},onChange:D=>f(D.target.value),value:d}),d?.trim()?.length>0&&E.jsx(ut,{type:"text",size:"small",icon:E.jsx(Do,{}),onClick:()=>f(""),children:"Clear"})]}),E.jsxs(Qo,{type:"secondary",style:{whiteSpace:"nowrap"},children:[c?.length||0," configurable items"]})]}),g.filter(D=>D?.nodes?.length>0).map(D=>E.jsxs("div",{className:"grl-dg__view__content__node-groups",children:[E.jsx(ig,{level:5,style:{marginBottom:"16px"},children:D.title}),E.jsx(Lw,{gutter:[16,16],children:D.nodes.map(C=>E.jsx(Hw,{xxl:8,md:8,sm:12,xs:24,children:E.jsx(h,{node:C},C.id)},C.id))})]},D.title))]})})});_m.__docgenInfo={description:"",methods:[],displayName:"GraphNodes",props:{className:{required:!1,tsType:{name:"string"},description:""}}};const og="application/vnd.gorules.decision",bm=()=>{const e=wo(),n=T.useRef(null),r=T.useRef(null),{setDecisionGraph:o,setActivePanel:s}=kt(),{disabled:u,panels:l,activePanel:c,viewConfig:d}=st(({disabled:y,panels:w,activePanel:_,viewConfig:x})=>({disabled:y,panels:w,activePanel:_,viewConfig:x})),f=async y=>{const w=y?.target?.files,_=new FileReader;_.onload=function(x){try{const N=JSON.parse(x?.target?.result);if(N?.contentType!==og)throw new Error("Invalid content type");const F=Array.isArray(N?.nodes)?N.nodes:[],j=F.map(ee=>ee.id),H=N.edges.filter(ee=>j.includes(ee?.targetId)&&j.includes(ee?.sourceId)),K=ng.safeParse({nodes:F,edges:H,settings:N?.settings});if(!K.success){console.log(K.error?.message),Zt.error(K.error?.message);return}o(K.data)}catch(N){Zt.error(N.message)}},_.readAsText(Array.from(w)?.[0],"UTF-8")},h=y=>{const w=y?.target?.files[0],_=new FileReader;try{_.readAsArrayBuffer(w),_.onload=async()=>{const x=_.result;if(!x)return;const{decisionGraph:N}=e.stateStore.getState(),F=await Uw(x,N),j=N.nodes.map(ee=>{let B=ee;return F.forEach(V=>{V.id===ee.id&&(B={...ee,content:V.content})}),B}),H=F.filter(ee=>!j.some(B=>B.id===ee.id)).map((ee,B)=>({...ee,position:{x:B*250,y:0}})),K=ng.safeParse({nodes:[...j,...H],edges:N.edges});if(!K.success){console.log(K.error?.message),Zt.error(K.error?.message);return}o(K.data),Zt.success("Excel file has been uploaded successfully!")}}catch{Zt.error("Failed to upload Excel!")}},g=async()=>{try{const{name:y,decisionGraph:w}=e.stateStore.getState(),_=`${y.replaceAll(".json","")}.json`,x=JSON.stringify({contentType:og,nodes:w.nodes,edges:w.edges},null,2),N=new Blob([x],{type:"application/json"}),F=URL.createObjectURL(N),j=window.document.createElement("a");j.href=F,j.download=_,window.document.body.appendChild(j),j.click(),window.document.body.removeChild(j),URL.revokeObjectURL(F)}catch(y){Zt.error(y.message)}},m=async()=>{try{const{name:y,decisionGraph:w,viewConfig:_}=e.stateStore.getState(),x=y.replaceAll(".json",""),N=w.nodes.filter(F=>F.type===et.DecisionTable).filter(F=>_?.enabled?!!_?.permissions?.[F.id]:!0).map(F=>({...F.content,id:F.id,name:F.name}));await Vw(x,N),Zt.success("Excel file has been downloaded successfully!")}catch{Zt.error("Failed to download Excel file!")}},D=[!d?.enabled&&{key:"upload-json",label:"Upload JSON",onClick:()=>n?.current?.click?.()},{key:"upload-excel",label:"Upload Excel",onClick:()=>r?.current?.click?.()}].filter(y=>!!y),C=[!d?.enabled&&{key:"download-json",label:"Download JSON",onClick:()=>g()},{key:"download-excel",label:"Download Excel",onClick:()=>m()}].filter(y=>!!y);return E.jsxs("div",{className:"grl-dg__aside",children:[E.jsx("input",{hidden:!0,accept:"application/json",type:"file",ref:n,onChange:f,onClick:y=>{y.target.value=null}}),E.jsx("input",{hidden:!0,accept:".xlsx",type:"file",ref:r,onChange:h,onClick:y=>{y.target.value=null}}),E.jsxs("div",{className:"grl-dg__aside__side-bar",children:[E.jsxs("div",{className:"grl-dg__aside__side-bar__top",children:[!u&&E.jsx(Zs,{menu:{items:D},placement:"bottomRight",trigger:["click"],arrow:!0,children:E.jsx(ut,{type:"text",disabled:u,icon:E.jsx(hC,{})})}),E.jsx(Zs,{menu:{items:C},placement:"bottomRight",trigger:["click"],arrow:!0,children:E.jsx(ut,{type:"text",icon:E.jsx(dC,{})})})]}),E.jsx("div",{className:"grl-dg__aside__side-bar__bottom",children:(l||[]).map(y=>{const w=c===y.id;return E.jsx(xr,{title:`${w?"Close":"Open"} ${y.title.toLowerCase()} panel`,placement:"right",children:E.jsx(ut,{type:"text",icon:y.icon,style:{background:w?"rgba(0, 0, 0, 0.1)":void 0},onClick:()=>{if(y?.onClick)return y.onClick();y?.renderPanel&&s(w?void 0:y.id)}},y.id)},y.id)})})]})]})};bm.__docgenInfo={description:"",methods:[],displayName:"GraphSideToolbar"};const wm=({disabled:e,tabBarExtraContent:n})=>{const r=kt(),{openNodes:o,activeNodeId:s,viewConfig:u}=st(({decisionGraph:c,activeTab:d,openTabs:f,viewConfig:h})=>({activeNodeId:(c?.nodes??[]).find(g=>g.id===d)?.id,openNodes:(f||[]).map(g=>{const m=(c?.nodes??[]).find(D=>D.id===g);if(m)return{id:m?.id,name:m.name,type:m.type,diff:m?._diff}}).filter(g=>!!g),viewConfig:h})),l=T.useMemo(()=>[{closable:!1,key:"graph",label:E.jsx(sg,{total:o?.length,icon:u?.enabled?E.jsx(IC,{}):E.jsx(yC,{}),name:u?.enabled?"Nodes":"Graph",active:!s||s==="graph",onContextClick:c=>{r.closeTab("graph",c)}})}],[u]);return E.jsx("div",{children:E.jsx(sd,{type:"line",size:"small",className:Ke("grl-graph-tabs"),activeKey:s||"graph",onChange:c=>r.openTab(c),tabBarExtraContent:n,items:[...l,...o.map((c,d)=>{const f=di[c.type];return{disabled:e,key:c.id,label:E.jsx(sg,{onContextClick:h=>{r.closeTab(c.id,h)},icon:f?.icon,name:c?.name??c?.type,diffStatus:c?.diff?.status,color:f?.color,index:d,active:c.id===s,total:o?.length,onClose:()=>r.closeTab(c.id)}),closable:!0}})]})})},sg=({total:e=0,index:n=-1,icon:r,name:o,active:s,diffStatus:u,color:l=zi.Blue,onClose:c,onContextClick:d})=>{const f=[e>0&&n!==-1&&{key:"close",label:"Close",onClick:()=>d?.("close")},e>0&&n!==-1&&{key:"close-all",label:"Close all Tabs",onClick:()=>d?.("close-all")},e>0&&n!==-1&&{key:"close-other",label:"Close other Tabs",onClick:()=>d?.("close-other")},e>0&&n+1<e&&{key:"close-right",label:"Close Tabs to the right",onClick:()=>d?.("close-right")},e>0&&n>0&&n>0&&{key:"close-left",label:"Close Tabs to the left",onClick:()=>d?.("close-left")}].filter(h=>!!h);return E.jsx(Zs,{menu:{items:f},trigger:["contextMenu"],children:E.jsxs("div",{className:"grl-graph-tabs__tab","data-active":s,children:[E.jsx(dd,{size:"small",shape:"square",style:{background:l,fontSize:11,width:18,height:18,lineHeight:"18px",borderRadius:3},icon:r}),o,E.jsx(dg,{status:u,style:{fontSize:16}}),c&&E.jsx(ut,{className:"grl-graph-tabs__closeIcon",type:"text",size:"small",style:{height:20,width:20,color:"black",borderRadius:"50%",lineHeight:0},icon:E.jsx(Do,{style:{fontSize:10}}),onClick:h=>{h.stopPropagation(),c?.()}})]})})};wm.__docgenInfo={description:"",methods:[],displayName:"GraphTabs",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"TabsProps['tabBarExtraContent']"},description:""}}};const xm=W.memo(T.forwardRef(function({reactFlowProOptions:n,tabBarExtraContent:r},o){const[s,u]=T.useState(!1),{hasActiveNode:l,viewConfig:c}=st(({decisionGraph:d,activeTab:f,viewConfig:h})=>({hasActiveNode:(d?.nodes??[]).some(g=>g.id===f),viewConfig:h}));return E.jsxs(E.Fragment,{children:[E.jsx(bm,{}),E.jsxs("div",{className:"grl-dg__graph",children:[E.jsx(wm,{disabled:s,tabBarExtraContent:r}),E.jsx(Dm,{ref:o,className:Ke([!l&&!c?.enabled&&"active"]),reactFlowProOptions:n,onDisableTabs:u}),E.jsx(_m,{className:Ke([!l&&c?.enabled&&"active"])}),E.jsx(U8,{})]}),E.jsx(gm,{})]})})),U8=W.memo(()=>{const{openNodes:e,activeNodeId:n,components:r}=st(({decisionGraph:u,openTabs:l,activeTab:c,components:d})=>{const f=(u?.nodes??[]).find(g=>g.id===c)?.id;return{openNodes:(u?.nodes??[]).filter(g=>l.includes(g.id)).map(({id:g,type:m})=>({id:g,type:m})),activeNodeId:f,components:d}}),o=T.useRef(null),s=T.useMemo(()=>aw(uw,void 0,{rootElement:o.current}),[o.current]);return E.jsx("div",{style:{display:"contents"},ref:o,children:e.map(u=>E.jsx("div",{className:Ke(["tab-content",n===u?.id&&"active"]),children:qe(u?.type).with(et.DecisionTable,()=>im?.renderTab?.({id:u?.id,manager:s})).with(et.Function,()=>um?.renderTab?.({id:u?.id,manager:s})).with(et.Expression,()=>sm?.renderTab?.({id:u?.id,manager:s})).with(et.Input,()=>hm?.renderTab?.({id:u?.id,manager:s})).with(et.Output,()=>pm?.renderTab?.({id:u?.id,manager:s})).otherwise(()=>{const l=r.find(c=>c.type===u.type);return l?l?.renderTab?.({id:u.id,manager:s}):null})},u?.id))})});xm.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphWrapper",props:{reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"GraphTabsProps['tabBarExtraContent']"},description:""}}};const W8=T.forwardRef(({manager:e,reactFlowProOptions:n,tabBarExtraContent:r,...o},s)=>E.jsx("div",{className:"grl-dg",children:E.jsx(Bd,{children:E.jsxs(tm,{children:[E.jsx(xm,{ref:s,reactFlowProOptions:n,tabBarExtraContent:r}),E.jsx(v8,{}),E.jsx(j6,{...o})]})})}));W8.__docgenInfo={description:"",methods:[],displayName:"DecisionGraph",props:{manager:{required:!1,tsType:{name:"DragDropManager"},description:""},reactFlowProOptions:{required:!1,tsType:{name:"ProOptions"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"GraphTabsProps['tabBarExtraContent']"},description:""},id:{required:!1,tsType:{name:"string"},description:""},defaultValue:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]}},description:""},value:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]}},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"signature['components']",raw:"DecisionGraphStoreType['state']['components']"},description:""},customNodes:{required:!1,tsType:{name:"signature['customNodes']",raw:"DecisionGraphStoreType['state']['customNodes']"},description:""},name:{required:!1,tsType:{name:"signature['name']",raw:"DecisionGraphStoreType['state']['name']"},description:""},viewConfigCta:{required:!1,tsType:{name:"signature['viewConfigCta']",raw:"DecisionGraphStoreType['state']['viewConfigCta']"},description:""},viewConfig:{required:!1,tsType:{name:"signature['viewConfig']",raw:"DecisionGraphStoreType['state']['viewConfig']"},description:""},onViewConfigCta:{required:!1,tsType:{name:"signature['onViewConfigCta']",raw:"DecisionGraphStoreType['listeners']['onViewConfigCta']"},description:""},defaultActivePanel:{required:!1,tsType:{name:"string"},description:""},panels:{required:!1,tsType:{name:"signature['panels']",raw:"DecisionGraphStoreType['state']['panels']"},description:""},onPanelsChange:{required:!1,tsType:{name:"signature['onPanelsChange']",raw:"DecisionGraphStoreType['listeners']['onPanelsChange']"},description:""},simulate:{required:!1,tsType:{name:"signature['simulate']",raw:"DecisionGraphStoreType['state']['simulate']"},description:""},onChange:{required:!1,tsType:{name:"signature['onChange']",raw:"DecisionGraphStoreType['listeners']['onChange']"},description:""},onReactFlowInit:{required:!1,tsType:{name:"signature['onReactFlowInit']",raw:"DecisionGraphStoreType['listeners']['onReactFlowInit']"},description:""},onCodeExtension:{required:!1,tsType:{name:"signature['onCodeExtension']",raw:"DecisionGraphStoreType['listeners']['onCodeExtension']"},description:""},onFunctionReady:{required:!1,tsType:{name:"signature['onFunctionReady']",raw:"DecisionGraphStoreType['listeners']['onFunctionReady']"},description:""}}};const jd=({value:e,onChange:n,readOnly:r})=>{const{token:o}=ad.useToken();return E.jsx(ud,{loading:E.jsx(as,{size:"large"}),language:"javascript",value:e,onChange:n,theme:o.mode==="dark"?"vs-dark":"light",height:"100%",onMount:(s,u)=>{u.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),u.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),s.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async l=>{try{await Du(JSON.stringify(Ri.parse(l.getValue()))),Zt.success("Copied to clipboard!")}catch{Zt.error("Failed to copy to clipboard.")}}}),s.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:l=>{const c=JSON.stringify(Ri.parse(l.getValue()),null,2);l.setValue(c)}})},options:{readOnly:r,automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})};jd.__docgenInfo={description:"",methods:[],displayName:"SimulatorEditor",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};const X8="Your business context that enters through the Request node, starting the decision process. Supply JSON or JSON5 format.",Cm=({onChange:e,hasInputNode:n,loading:r,onRun:o,defaultRequest:s})=>{const[u,l]=T.useState(s),{stateStore:c,actions:d}=wo();return T.useEffect(()=>{if(!yo())return;const{decisionGraph:f}=c.getState(),h=f.nodes.find(g=>g.type==="inputNode");if(h)try{const g=u?Ri.parse(u):"Any";d.setNodeType(h.id,Dt.InferredOutput,new Zn(g))}catch{}},[u]),E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request",children:[E.jsx(xr,{title:X8,children:E.jsxs(Kt.Text,{style:{fontSize:13,cursor:"help"},children:["Request",E.jsx(Tg,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})]})}),E.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&E.jsx(xr,{title:n?void 0:"Request node is required to run the graph. Drag-and-drop it from the Components panel.",children:E.jsx(ut,{size:"small",type:"primary",loading:r,icon:E.jsx(SC,{}),disabled:!n,onClick:()=>{try{const f=(u||"").trim().length===0?null:Ri.parse(u||"");o?.({graph:c.getState().decisionGraph,context:f})}catch{hd.error({message:"Invalid format",description:"Unable to format request, invalid JSON format",placement:"top"})}},children:"Run"})})})]}),E.jsx("div",{className:"grl-dg__simulator__section__content",children:E.jsx(jd,{value:u,onChange:f=>{l(f),e?.(f??"")}})})]})};Cm.__docgenInfo={description:"",methods:[],displayName:"SimulatorRequestPanel",props:{defaultRequest:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}}},description:""},hasInputNode:{required:!1,tsType:{name:"boolean"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onRun:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""}}};var Em=(e=>(e.Output="Output",e.Input="Input",e.Trace="Trace",e))(Em||{});const Y8=({defaultRequest:e,onChange:n,onRun:r,onClear:o,loading:s=!1,leftPanel:u=Cm})=>{const[l,c]=Ru("simulation.search",""),[d,f]=Ru("simulation.segment","Output"),{viewConfig:h}=st(x=>({viewConfig:x.viewConfig})),{actions:g}=wo(),{nodeTypes:m,simulate:D,hasInputNode:C}=st(({decisionGraph:x,simulate:N})=>({simulate:N,hasInputNode:x.nodes.some(F=>F.type===et.Input),nodeTypes:(x.nodes??[]).reduce((F,j)=>({...F,[j.id]:j.type}),{})})),[y,w]=T.useState("graph"),_=T.useMemo(()=>D?"result"in D?Object.entries(D.result?.trace??{}).filter(([x])=>h?.enabled?!!h?.permissions?.[x]:!0).map(([x,N])=>({...N,nodeId:x})).filter(x=>![et.Input].includes(m?.[x.nodeId])).filter(x=>x.name.toLowerCase().includes(l?.toLowerCase()??"")).sort((x,N)=>(x.order??0)-(N.order??0)):[]:[],[D,l]);return E.jsxs(vg,{className:"grl-dg__simulator",direction:"horizontal",autoSaveId:"jdm-editor:simulator:layout",children:[E.jsx(Xc,{minSize:20,defaultSize:30,className:"grl-dg__simulator__section grl-dg__simulator__request",children:E.jsx(u,{defaultRequest:e,loading:s,hasInputNode:C,onRun:r,onChange:n})}),E.jsx($h,{}),E.jsxs(Xc,{minSize:20,maxSize:20,className:"grl-dg__simulator__section grl-dg__simulator__nodes",children:[E.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--nodes",children:[E.jsx("input",{className:"grl-dg__simulator__search",type:"text",placeholder:"Search nodes...",value:l,onChange:x=>c(x.target.value)}),E.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&E.jsx(xr,{title:"Clear",children:E.jsx(ut,{size:"small",type:"text",icon:E.jsx(aC,{}),onClick:()=>{o?.(),w("graph"),c("")}})})})]}),E.jsx("div",{className:"grl-dg__simulator__section__content",children:E.jsx(as,{spinning:s,children:E.jsxs("div",{className:"grl-dg__simulator__nodes-list",children:[!D&&E.jsxs(Kt.Text,{type:"secondary",style:{textAlign:"center",marginTop:60,fontSize:13},children:["Ready to simulate!",E.jsx("br",{}),"Run a request to see the node trace in action.",E.jsx("br",{}),E.jsx(Kt.Link,{href:"https://docs.gorules.io/docs/simulator",target:"_blank",style:{fontSize:13,marginTop:4,display:"inline-block"},children:"Learn more"})]}),"graph".includes(l?.toLowerCase()??"")&&D&&E.jsxs("div",{className:Ke("grl-dg__simulator__nodes-list__node",y==="graph"&&"active"),onClick:()=>w("graph"),children:[E.jsxs(Kt.Text,{"data-role":"name",ellipsis:!0,children:[E.jsx(ug,{status:qe(D).with({error:Ge.nonNullable},()=>"error").with({result:Ge.nonNullable},()=>"success").otherwise(()=>"not-run")}),"Graph"]}),E.jsx(Kt.Text,{type:"secondary","data-role":"performance",children:qe(D).with({result:Ge._},({result:x})=>x?.performance).otherwise(()=>{})})]}),_.map(x=>E.jsxs("div",{className:Ke("grl-dg__simulator__nodes-list__node",x.nodeId===y&&"active"),onClick:()=>w(x.nodeId),onDoubleClick:()=>g.goToNode(x.nodeId),children:[E.jsxs(Kt.Text,{"data-role":"name",ellipsis:{tooltip:x.name},children:[E.jsx(ug,{status:x.nodeId===D?.error?.data?.nodeId?"error":"success"}),x.name]}),E.jsx(Kt.Text,{type:"secondary","data-role":"performance",children:x.performance})]},x.nodeId))]})})})]}),E.jsx($h,{}),E.jsxs(Xc,{minSize:30,defaultSize:50,className:"grl-dg__simulator__section grl-dg__simulator__response",children:[E.jsx("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--response",children:E.jsx(sd,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},onChange:x=>f(x),items:Object.values(Em).map(x=>({key:x,label:x})),tabBarExtraContent:E.jsx(xr,{title:"Close panel",children:E.jsx(ut,{type:"text",icon:E.jsx(Do,{style:{fontSize:12}}),onClick:()=>g.setActivePanel(void 0)})})})}),E.jsx("div",{className:"grl-dg__simulator__section__content",children:E.jsx(jd,{readOnly:!0,value:qe(D).with({result:Ge._},({result:x})=>qe(y).with("graph",()=>ag({traceData:x?.trace,output:x?.result},d??"Output")).otherwise(()=>ag(x?.trace[y],d??"Output"))).otherwise(()=>"")})})]})]})},ag=(e,n)=>{const r=qe([n,e]).with(["Output",{output:Ge._}],([,{output:o}])=>o).with(["Input",{input:Ge._}],([,{input:o}])=>o).with(["Trace",{trace:Ge._}],([,{trace:o}])=>o).with(["Trace",{traceData:Ge._}],([,{traceData:o}])=>o).otherwise(()=>({}));return Ri.stringify(r,void 0,2)},ug=({status:e})=>e==="not-run"?null:e==="success"?E.jsx(oC,{twoToneColor:["var(--grl-color-success)","var(--grl-color-success-bg)"],style:{marginRight:6,fontSize:12,opacity:.5}}):E.jsx(cC,{twoToneColor:["var(--grl-color-error)","var(--grl-color-error-bg)"],style:{marginRight:5,fontSize:12}});Y8.__docgenInfo={description:"",methods:[],displayName:"GraphSimulator",props:{onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultRequest:{required:!1,tsType:{name:"string",raw:"SimulatorRequestPanelProps['defaultRequest']"},description:""},onChange:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onChange']"},description:""},onRun:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onRun']"},description:""},leftPanel:{required:!1,tsType:{name:"ReactFC",raw:"React.FC<SimulatorRequestPanelProps>",elements:[{name:"signature",type:"object",raw:`{
  defaultRequest?: string;
  onChange?: (contextJson: string) => void;
  hasInputNode?: boolean;
  loading?: boolean;
  onRun?: (payload: { graph: DecisionGraphType; context: unknown }) => void;
}`,signature:{properties:[{key:"defaultRequest",value:{name:"string",required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}},required:!1}},{key:"hasInputNode",value:{name:"boolean",required:!1}},{key:"loading",value:{name:"boolean",required:!1}},{key:"onRun",value:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}},required:!1}}]}}]},description:"",defaultValue:{value:`({
  onChange,
  hasInputNode,
  loading,
  onRun,
  defaultRequest,
}) => {
  const [requestValue, setRequestValue] = useState(defaultRequest);
  const { stateStore, actions } = useDecisionGraphRaw();

  useEffect(() => {
    if (!isWasmAvailable()) {
      return;
    }

    const { decisionGraph } = stateStore.getState();
    const requestNode = decisionGraph.nodes.find((n) => n.type === 'inputNode');
    if (!requestNode) {
      return;
    }

    try {
      const value = requestValue ? json5.parse(requestValue) : 'Any';
      actions.setNodeType(requestNode.id, NodeTypeKind.InferredOutput, new VariableType(value));
    } catch {
      // Skip
    }
  }, [requestValue]);

  return (
    <>
      <div className={'grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request'}>
        <Tooltip title={requestTooltip}>
          <Typography.Text style={{ fontSize: 13, cursor: 'help' }}>
            Request
            <InfoCircleOutlined style={{ fontSize: 10, marginLeft: 4, opacity: 0.5, verticalAlign: 'text-top' }} />
          </Typography.Text>
        </Tooltip>
        <div className={'grl-dg__simulator__section__bar__actions'}>
          {onRun && (
            <Tooltip
              title={
                !hasInputNode
                  ? 'Request node is required to run the graph. Drag-and-drop it from the Components panel.'
                  : undefined
              }
            >
              <Button
                size={'small'}
                type={'primary'}
                loading={loading}
                icon={<PlayCircleOutlined />}
                disabled={!hasInputNode}
                onClick={() => {
                  try {
                    const parsed = (requestValue || '').trim().length === 0 ? null : json5.parse(requestValue || '');
                    onRun?.({ graph: stateStore.getState().decisionGraph, context: parsed });
                  } catch {
                    notification.error({
                      message: 'Invalid format',
                      description: 'Unable to format request, invalid JSON format',
                      placement: 'top',
                    });
                  }
                }}
              >
                Run
              </Button>
            </Tooltip>
          )}
        </div>
      </div>
      <div className={'grl-dg__simulator__section__content'}>
        <SimulatorEditor
          value={requestValue}
          onChange={(text) => {
            setRequestValue(text);
            onChange?.(text ?? '');
          }}
        />
      </div>
    </>
  );
}`,computed:!1}}}};export{W8 as D,ji as G,DC as R,Jt as _,st as a,Y8 as b,SC as c,im as d,sm as e,um as f,wC as g,hm as i,Ri as l,pm as o,p8 as s,kt as u};
