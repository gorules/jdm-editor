const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-Bl_it64D.js","./function-CAy4iguo.js","./wrapNativeSuper-CEh6UYuW.js","./index-CTjT7uj6.js","./monaco-DnbjSuiY.js","./wasm-DSB3Eh-p.js","./index-BuEDxqVA.js","./iframe-Cp72JKWs.js","./index.module-BlUlgRCo.js","./button-DEUXPxaj.js","./index-DsiOjm5Y.js","./function-CiyI429m.css"])))=>i.map(i=>d[i]);
import{_ as Nn,j as S}from"./wrapNativeSuper-CEh6UYuW.js";import{r as T,R as G,c as Kt,g as e0}from"./index-CTjT7uj6.js";import{j as ow,k as sw,b as al,p as gt,d as Ln,a as la,D as t0,h as Vu,g as n0,I as aw,e as Cl,c as uw,H as cw}from"./confirm-action-CQ04zjDJ.js";import{N as lw,a as vo,b as fw,c as dw,d as hw,u as pw,e as gw,A as mw,f as yw,D as Js,S as r0,s as Mt,g as Mh,T as Jl}from"./index.module-BlUlgRCo.js";import{Y as qs,K as i0,L as us,M as vw,Z as o0,a2 as Dw,H as s0,O as _w,C as fa,u as Uu,c as vr,a3 as xw,a4 as ww,n as bw,X as Cw,m as Ew,S as Aw,a7 as Sw,ad as Fw,q as Nw,a as Tw,az as Iw,I as Tn,z as He,i as rs,V as kn,N as Le,aH as Bw,T as Gt,ae as gr,t as Ql}from"./wasm-DSB3Eh-p.js";import{b as Rw,r as Ow,P as Mw,N as lt,D as zw,T as Pw,c as Gs,M as Wu,d as ef,F as ii,e as El,f as a0,g as $w,h as Xu,R as jw,i as u0,z as ce,a as kw,j as Lw,k as Hw}from"./dt-iHXKUi-L.js";import{c as Ze}from"./ce-CGifztA2.js";import{r as qw,B as it}from"./button-DEUXPxaj.js";import{E as Gw}from"./expression-a7gsyasp.js";import{S as cs,d as Vw,a as tf,c as Fu,P as c0,R as Uw,w as Ww,p as Xw,b as ul,e as zh}from"./monaco-DnbjSuiY.js";import{_ as Yw}from"./iframe-Cp72JKWs.js";import{r as l0}from"./index-BuEDxqVA.js";const Zw=e=>{const{componentCls:n,notificationMarginEdge:r,animationMaxHeight:o}=e,s=`${n}-notice`,u=new qs("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),l=new qs("antNotificationTopFadeIn",{"0%":{top:-o,opacity:0},"100%":{top:0,opacity:1}}),c=new qs("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(o).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),f=new qs("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[n]:{[`&${n}-top, &${n}-bottom`]:{marginInline:0,[s]:{marginInline:"auto auto"}},[`&${n}-top`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:l}},[`&${n}-bottom`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:c}},[`&${n}-topRight, &${n}-bottomRight`]:{[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:u}},[`&${n}-topLeft, &${n}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:r,_skip_check_:!0},[s]:{marginInlineEnd:"auto",marginInlineStart:0},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationName:f}}}}},Kw=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Jw={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},Qw=(e,n)=>{const{componentCls:r}=e;return{[`${r}-${n}`]:{[`&${r}-stack > ${r}-notice-wrapper`]:{[n.startsWith("top")?"top":"bottom"]:0,[Jw[n]]:{value:0,_skip_check_:!0}}}}},eb=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},n)},tb=e=>{const n={};for(let r=1;r<e.notificationStackLayer;r++)n[`&:nth-last-child(${r+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},n)},nb=e=>{const{componentCls:n}=e;return Object.assign({[`${n}-stack`]:{[`& > ${n}-notice-wrapper`]:Object.assign({transition:`all ${e.motionDurationSlow}, backdrop-filter 0s`,position:"absolute"},eb(e))},[`${n}-stack:not(${n}-stack-expanded)`]:{[`& > ${n}-notice-wrapper`]:Object.assign({},tb(e))},[`${n}-stack${n}-stack-expanded`]:{[`& > ${n}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Kw.map(r=>Qw(e,r)).reduce((r,o)=>Object.assign(Object.assign({},r),o),{}))},f0=e=>{const{iconCls:n,componentCls:r,boxShadow:o,fontSizeLG:s,notificationMarginBottom:u,borderRadiusLG:l,colorSuccess:c,colorInfo:f,colorWarning:h,colorError:p,colorTextHeading:g,notificationBg:m,notificationPadding:x,notificationMarginEdge:b,notificationProgressBg:_,notificationProgressHeight:C,fontSize:D,lineHeight:E,width:R,notificationIconSize:N,colorText:P}=e,H=`${r}-notice`;return{position:"relative",marginBottom:u,marginInlineStart:"auto",background:m,borderRadius:l,boxShadow:o,[H]:{padding:x,width:R,maxWidth:`calc(100vw - ${us(e.calc(b).mul(2).equal())})`,overflow:"hidden",lineHeight:E,wordWrap:"break-word"},[`${H}-message`]:{marginBottom:e.marginXS,color:g,fontSize:s,lineHeight:e.lineHeightLG},[`${H}-description`]:{fontSize:D,color:P},[`${H}-closable ${H}-message`]:{paddingInlineEnd:e.paddingLG},[`${H}-with-icon ${H}-message`]:{marginBottom:e.marginXS,marginInlineStart:e.calc(e.marginSM).add(N).equal(),fontSize:s},[`${H}-with-icon ${H}-description`]:{marginInlineStart:e.calc(e.marginSM).add(N).equal(),fontSize:D},[`${H}-icon`]:{position:"absolute",fontSize:N,lineHeight:1,[`&-success${n}`]:{color:c},[`&-info${n}`]:{color:f},[`&-warning${n}`]:{color:h},[`&-error${n}`]:{color:p}},[`${H}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},vw(e)),[`${H}-progress`]:{position:"absolute",display:"block",appearance:"none",WebkitAppearance:"none",inlineSize:`calc(100% - ${us(l)} * 2)`,left:{_skip_check_:!0,value:l},right:{_skip_check_:!0,value:l},bottom:0,blockSize:C,border:0,"&, &::-webkit-progress-bar":{borderRadius:l,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:_},"&::-webkit-progress-value":{borderRadius:l,background:_}},[`${H}-btn`]:{float:"right",marginTop:e.marginSM}}},rb=e=>{const{componentCls:n,notificationMarginBottom:r,notificationMarginEdge:o,motionDurationMid:s,motionEaseInOut:u}=e,l=`${n}-notice`,c=new qs("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:r},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[n]:Object.assign(Object.assign({},o0(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:o,_skip_check_:!0},[`${n}-hook-holder`]:{position:"relative"},[`${n}-fade-appear-prepare`]:{opacity:"0 !important"},[`${n}-fade-enter, ${n}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:u,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${n}-fade-leave`]:{animationTimingFunction:u,animationFillMode:"both",animationDuration:s,animationPlayState:"paused"},[`${n}-fade-enter${n}-fade-enter-active, ${n}-fade-appear${n}-fade-appear-active`]:{animationPlayState:"running"},[`${n}-fade-leave${n}-fade-leave-active`]:{animationName:c,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${l}-btn`]:{float:"left"}}})},{[n]:{[`${l}-wrapper`]:Object.assign({},f0(e))}}]},d0=e=>({zIndexPopup:e.zIndexPopupBase+Dw+50,width:384}),h0=e=>{const n=e.paddingMD,r=e.paddingLG;return s0(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:n,notificationPaddingHorizontal:r,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${us(e.paddingMD)} ${us(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},p0=i0("Notification",e=>{const n=h0(e);return[rb(n),Zw(n),nb(n)]},d0),ib=_w(["Notification","PurePanel"],e=>{const n=`${e.componentCls}-notice`,r=h0(e);return{[`${n}-pure-panel`]:Object.assign(Object.assign({},f0(r)),{width:r.width,maxWidth:`calc(100vw - ${us(e.calc(r.notificationMarginEdge).mul(2).equal())})`,margin:0})}},d0);var ob=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};function nf(e,n){return n===null||n===!1?null:n||T.createElement(vo,{className:`${e}-close-icon`})}const sb={success:fw,info:dw,error:xw,warning:hw},g0=e=>{const{prefixCls:n,icon:r,type:o,message:s,description:u,btn:l,role:c="alert"}=e;let f=null;return r?f=T.createElement("span",{className:`${n}-icon`},r):o&&(f=T.createElement(sb[o]||null,{className:vr(`${n}-icon`,`${n}-icon-${o}`)})),T.createElement("div",{className:vr({[`${n}-with-icon`]:f}),role:c},f,T.createElement("div",{className:`${n}-message`},s),T.createElement("div",{className:`${n}-description`},u),l&&T.createElement("div",{className:`${n}-btn`},l))},ab=e=>{const{prefixCls:n,className:r,icon:o,type:s,message:u,description:l,btn:c,closable:f=!0,closeIcon:h,className:p}=e,g=ob(e,["prefixCls","className","icon","type","message","description","btn","closable","closeIcon","className"]),{getPrefixCls:m}=T.useContext(fa),x=n||m("notification"),b=`${x}-notice`,_=Uu(x),[C,D,E]=p0(x,_);return C(T.createElement("div",{className:vr(`${b}-pure-panel`,D,r,E,_)},T.createElement(ib,{prefixCls:x}),T.createElement(lw,Object.assign({},g,{prefixCls:x,eventKey:"pure",duration:null,closable:f,className:vr({notificationClassName:p}),closeIcon:nf(x,h),content:T.createElement(g0,{prefixCls:b,icon:o,type:s,message:u,description:l,btn:c})}))))};function ub(e,n,r){let o;switch(e){case"top":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:n,bottom:"auto"};break;case"topLeft":o={left:0,top:n,bottom:"auto"};break;case"topRight":o={right:0,top:n,bottom:"auto"};break;case"bottom":o={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:r};break;case"bottomLeft":o={left:0,top:"auto",bottom:r};break;default:o={right:0,top:"auto",bottom:r};break}return o}function cb(e){return{motionName:`${e}-fade`}}var lb=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const Ph=24,fb=4.5,db="topRight",hb=e=>{let{children:n,prefixCls:r}=e;const o=Uu(r),[s,u,l]=p0(r,o);return s(G.createElement(gw,{classNames:{list:vr(u,l,o)}},n))},pb=(e,n)=>{let{prefixCls:r,key:o}=n;return G.createElement(hb,{prefixCls:r,key:o},e)},gb=G.forwardRef((e,n)=>{const{top:r,bottom:o,prefixCls:s,getContainer:u,maxCount:l,rtl:c,onAllRemoved:f,stack:h,duration:p,pauseOnHover:g=!0,showProgress:m}=e,{getPrefixCls:x,getPopupContainer:b,notification:_,direction:C}=T.useContext(fa),[,D]=bw(),E=s||x("notification"),R=Q=>ub(Q,r??Ph,o??Ph),N=()=>vr({[`${E}-rtl`]:c??C==="rtl"}),P=()=>cb(E),[H,Y]=pw({prefixCls:E,style:R,className:N,motion:P,closable:!0,closeIcon:nf(E),duration:p??fb,getContainer:()=>u?.()||b?.()||document.body,maxCount:l,pauseOnHover:g,showProgress:m,onAllRemoved:f,renderNotifications:pb,stack:h===!1?!1:{threshold:typeof h=="object"?h?.threshold:void 0,offset:8,gap:D.margin}});return G.useImperativeHandle(n,()=>Object.assign(Object.assign({},H),{prefixCls:E,notification:_})),Y});function m0(e){const n=G.useRef(null);return ww(),[G.useMemo(()=>{const o=c=>{var f;if(!n.current)return;const{open:h,prefixCls:p,notification:g}=n.current,m=`${p}-notice`,{message:x,description:b,icon:_,type:C,btn:D,className:E,style:R,role:N="alert",closeIcon:P,closable:H}=c,Y=lb(c,["message","description","icon","type","btn","className","style","role","closeIcon","closable"]),Q=nf(m,typeof P<"u"?P:g?.closeIcon);return h(Object.assign(Object.assign({placement:(f=e?.placement)!==null&&f!==void 0?f:db},Y),{content:G.createElement(g0,{prefixCls:m,icon:_,type:C,message:x,description:b,btn:D,role:N}),className:vr(C&&`${m}-${C}`,E,g?.className),style:Object.assign(Object.assign({},g?.style),R),closeIcon:Q,closable:H??!!Q}))},u={open:o,destroy:c=>{var f,h;c!==void 0?(f=n.current)===null||f===void 0||f.close(c):(h=n.current)===null||h===void 0||h.destroy()}};return["success","info","warning","error"].forEach(c=>{u[c]=f=>o(Object.assign(Object.assign({},f),{type:c}))}),u},[]),G.createElement(gb,Object.assign({key:"notification-holder"},e,{ref:n}))]}function mb(e){return m0(e)}function yb(){const[,e]=T.useReducer(n=>n+1,0);return e}function vb(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=T.useRef({}),r=yb(),o=Rw();return Cw(()=>{const s=o.subscribe(u=>{n.current=u,e&&r()});return()=>o.unsubscribe(s)},[]),n.current}const Al=T.createContext({}),Db=e=>{const{antCls:n,componentCls:r,iconCls:o,avatarBg:s,avatarColor:u,containerSize:l,containerSizeLG:c,containerSizeSM:f,textFontSize:h,textFontSizeLG:p,textFontSizeSM:g,borderRadius:m,borderRadiusLG:x,borderRadiusSM:b,lineWidth:_,lineType:C}=e,D=(E,R,N)=>({width:E,height:E,borderRadius:"50%",[`&${r}-square`]:{borderRadius:N},[`&${r}-icon`]:{fontSize:R,[`> ${o}`]:{margin:0}}});return{[r]:Object.assign(Object.assign(Object.assign(Object.assign({},o0(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:u,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${us(_)} ${C} transparent`,"&-image":{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),D(l,h,m)),{"&-lg":Object.assign({},D(c,p,x)),"&-sm":Object.assign({},D(f,g,b)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},_b=e=>{const{componentCls:n,groupBorderColor:r,groupOverlapping:o,groupSpace:s}=e;return{[`${n}-group`]:{display:"inline-flex",[n]:{borderColor:r},"> *:not(:first-child)":{marginInlineStart:o}},[`${n}-group-popover`]:{[`${n} + ${n}`]:{marginInlineStart:s}}}},xb=e=>{const{controlHeight:n,controlHeightLG:r,controlHeightSM:o,fontSize:s,fontSizeLG:u,fontSizeXL:l,fontSizeHeading3:c,marginXS:f,marginXXS:h,colorBorderBg:p}=e;return{containerSize:n,containerSizeLG:r,containerSizeSM:o,textFontSize:Math.round((u+l)/2),textFontSizeLG:c,textFontSizeSM:s,groupSpace:h,groupOverlapping:-f,groupBorderColor:p}},y0=i0("Avatar",e=>{const{colorTextLightSolid:n,colorTextPlaceholder:r}=e,o=s0(e,{avatarBg:r,avatarColor:n});return[Db(o),_b(o)]},xb);var wb=function(e,n){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&n.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(e);s<o.length;s++)n.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(r[o[s]]=e[o[s]]);return r};const bb=(e,n)=>{const[r,o]=T.useState(1),[s,u]=T.useState(!1),[l,c]=T.useState(!0),f=T.useRef(null),h=T.useRef(null),p=Ew(n,f),{getPrefixCls:g,avatar:m}=T.useContext(fa),x=T.useContext(Al),b=()=>{if(!h.current||!f.current)return;const me=h.current.offsetWidth,be=f.current.offsetWidth;if(me!==0&&be!==0){const{gap:Te=4}=e;Te*2<be&&o(be-Te*2<me?(be-Te*2)/me:1)}};T.useEffect(()=>{u(!0)},[]),T.useEffect(()=>{c(!0),o(1)},[e.src]),T.useEffect(b,[e.gap]);const _=()=>{const{onError:me}=e;me?.()!==!1&&c(!1)},{prefixCls:C,shape:D,size:E,src:R,srcSet:N,icon:P,className:H,rootClassName:Y,alt:Q,draggable:$,children:X,crossOrigin:te}=e,J=wb(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),Z=Aw(me=>{var be,Te;return(Te=(be=E??x?.size)!==null&&be!==void 0?be:me)!==null&&Te!==void 0?Te:"default"}),B=Object.keys(typeof Z=="object"?Z||{}:{}).some(me=>["xs","sm","md","lg","xl","xxl"].includes(me)),q=vb(B),j=T.useMemo(()=>{if(typeof Z!="object")return{};const me=Ow.find(Te=>q[Te]),be=Z[me];return be?{width:be,height:be,fontSize:be&&(P||X)?be/2:18}:{}},[q,Z]),W=g("avatar",C),ie=Uu(W),[V,oe,se]=y0(W,ie),le=vr({[`${W}-lg`]:Z==="large",[`${W}-sm`]:Z==="small"}),ue=T.isValidElement(R),ge=D||x?.shape||"circle",de=vr(W,le,m?.className,`${W}-${ge}`,{[`${W}-image`]:ue||R&&l,[`${W}-icon`]:!!P},se,ie,H,Y,oe),Fe=typeof Z=="number"?{width:Z,height:Z,fontSize:P?Z/2:18}:{};let Be;if(typeof R=="string"&&l)Be=T.createElement("img",{src:R,draggable:$,srcSet:N,onError:_,alt:Q,crossOrigin:te});else if(ue)Be=R;else if(P)Be=P;else if(s||r!==1){const me=`scale(${r})`,be={msTransform:me,WebkitTransform:me,transform:me};Be=T.createElement(Sw,{onResize:b},T.createElement("span",{className:`${W}-string`,ref:h,style:Object.assign({},be)},X))}else Be=T.createElement("span",{className:`${W}-string`,style:{opacity:0},ref:h},X);return delete J.onError,delete J.gap,V(T.createElement("span",Object.assign({},J,{style:Object.assign(Object.assign(Object.assign(Object.assign({},Fe),j),m?.style),J.style),className:de,ref:p}),Be))},v0=T.forwardRef(bb),$h=e=>{const{size:n,shape:r}=T.useContext(Al),o=T.useMemo(()=>({size:e.size||n,shape:e.shape||r}),[e.size,e.shape,n,r]);return T.createElement(Al.Provider,{value:o},e.children)},Cb=e=>{var n,r,o;const{getPrefixCls:s,direction:u}=T.useContext(fa),{prefixCls:l,className:c,rootClassName:f,style:h,maxCount:p,maxStyle:g,size:m,shape:x,maxPopoverPlacement:b,maxPopoverTrigger:_,children:C,max:D}=e,E=s("avatar",l),R=`${E}-group`,N=Uu(E),[P,H,Y]=y0(E,N),Q=vr(R,{[`${R}-rtl`]:u==="rtl"},Y,N,c,f,H),$=Fw(C).map((J,Z)=>Nw(J,{key:`avatar-key-${Z}`})),X=D?.count||p,te=$.length;if(X&&X<te){const J=$.slice(0,X),Z=$.slice(X,te),B=D?.style||g,q=((n=D?.popover)===null||n===void 0?void 0:n.trigger)||_||"hover",j=((r=D?.popover)===null||r===void 0?void 0:r.placement)||b||"top",W=Object.assign(Object.assign({content:Z},D?.popover),{overlayClassName:vr(`${R}-popover`,(o=D?.popover)===null||o===void 0?void 0:o.overlayClassName),placement:j,trigger:q});return J.push(T.createElement(Mw,Object.assign({key:"avatar-popover-key",destroyTooltipOnHide:!0},W),T.createElement(v0,{style:B},`+${te-X}`))),P(T.createElement($h,{shape:x,size:m},T.createElement("div",{className:Q,style:h},J)))}return P(T.createElement($h,{shape:x,size:m},T.createElement("div",{className:Q,style:h},$)))},D0=v0;D0.Group=Cb;let dr=null,vu=e=>e(),Nu=[],Qs={};function jh(){const{getContainer:e,rtl:n,maxCount:r,top:o,bottom:s,showProgress:u,pauseOnHover:l}=Qs,c=e?.()||document.body;return{getContainer:()=>c,rtl:n,maxCount:r,top:o,bottom:s,showProgress:u,pauseOnHover:l}}const Eb=G.forwardRef((e,n)=>{const{notificationConfig:r,sync:o}=e,{getPrefixCls:s}=T.useContext(fa),u=Qs.prefixCls||s("notification"),l=T.useContext(mw),[c,f]=m0(Object.assign(Object.assign(Object.assign({},r),{prefixCls:u}),l.notification));return G.useEffect(o,[]),G.useImperativeHandle(n,()=>{const h=Object.assign({},c);return Object.keys(h).forEach(p=>{h[p]=function(){return o(),c[p].apply(c,arguments)}}),{instance:h,sync:o}}),f}),Ab=G.forwardRef((e,n)=>{const[r,o]=G.useState(jh),s=()=>{o(jh)};G.useEffect(s,[]);const u=Iw(),l=u.getRootPrefixCls(),c=u.getIconPrefixCls(),f=u.getTheme(),h=G.createElement(Eb,{ref:n,sync:s,notificationConfig:r});return G.createElement(Tw,{prefixCls:l,iconPrefixCls:c,theme:f},u.holderRender?u.holderRender(h):h)});function rf(){if(!dr){const e=document.createDocumentFragment(),n={fragment:e};dr=n,vu(()=>{qw(G.createElement(Ab,{ref:r=>{const{instance:o,sync:s}=r||{};Promise.resolve().then(()=>{!n.instance&&o&&(n.instance=o,n.sync=s,rf())})}}),e)});return}dr.instance&&(Nu.forEach(e=>{switch(e.type){case"open":{vu(()=>{dr.instance.open(Object.assign(Object.assign({},Qs),e.config))});break}case"destroy":vu(()=>{dr?.instance.destroy(e.key)});break}}),Nu=[])}function Sb(e){Qs=Object.assign(Object.assign({},Qs),e),vu(()=>{var n;(n=dr?.sync)===null||n===void 0||n.call(dr)})}function _0(e){Nu.push({type:"open",config:e}),rf()}const Fb=e=>{Nu.push({type:"destroy",key:e}),rf()},Nb=["success","info","warning","error"],Tb={open:_0,destroy:Fb,config:Sb,useNotification:mb,_InternalPanelDoNotUseOrYouWillBeFired:ab},of=Tb;Nb.forEach(e=>{of[e]=n=>_0(Object.assign(Object.assign({},n),{type:e}))});var Ib={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-260 72h96v209.9L621.5 312 572 347.4V136zm220 752H232V136h280v296.9c0 3.3 1 6.6 3 9.3a15.9 15.9 0 0022.3 3.7l83.8-59.9 81.4 59.4c2.7 2 6 3.1 9.4 3.1 8.8 0 16-7.2 16-16V136h64v752z"}}]},name:"book",theme:"outlined"},Bb=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:Ib}))},x0=T.forwardRef(Bb),Rb={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm193.4 225.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.3 0 19.9 5 25.9 13.3l71.2 98.8 157.2-218c6-8.4 15.7-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.4 12.7z",fill:r}},{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z",fill:n}}]}},name:"check-circle",theme:"twotone"},Ob=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:Rb}))},Mb=T.forwardRef(Ob),zb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"}}]},name:"clear",theme:"outlined"},Pb=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:zb}))},$b=T.forwardRef(Pb),jb={icon:function(n,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z",fill:n}},{tag:"path",attrs:{d:"M512 140c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm171.8 527.1c1.2 1.5 1.9 3.3 1.9 5.2 0 4.5-3.6 8-8 8l-66-.3-99.3-118.4-99.3 118.5-66.1.3c-4.4 0-8-3.6-8-8 0-1.9.7-3.7 1.9-5.2L471 512.3l-130.1-155a8.32 8.32 0 01-1.9-5.2c0-4.5 3.6-8 8-8l66.1.3 99.3 118.4 99.4-118.5 66-.3c4.4 0 8 3.6 8 8 0 1.9-.6 3.8-1.8 5.2l-130.1 155 129.9 154.9z",fill:r}},{tag:"path",attrs:{d:"M685.8 352c0-4.4-3.6-8-8-8l-66 .3-99.4 118.5-99.3-118.4-66.1-.3c-4.4 0-8 3.5-8 8 0 1.9.7 3.7 1.9 5.2l130.1 155-130.1 154.9a8.32 8.32 0 00-1.9 5.2c0 4.4 3.6 8 8 8l66.1-.3 99.3-118.5L611.7 680l66 .3c4.4 0 8-3.5 8-8 0-1.9-.7-3.7-1.9-5.2L553.9 512.2l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z",fill:n}}]}},name:"close-circle",theme:"twotone"},kb=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:jb}))},Lb=T.forwardRef(kb),Hb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M624 706.3h-74.1V464c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v242.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.7a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-download",theme:"outlined"},qb=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:Hb}))},Gb=T.forwardRef(qb),Vb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M518.3 459a8 8 0 00-12.6 0l-112 141.7a7.98 7.98 0 006.3 12.9h73.9V856c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V613.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 459z"}},{tag:"path",attrs:{d:"M811.4 366.7C765.6 245.9 648.9 160 512.2 160S258.8 245.8 213 366.6C127.3 389.1 64 467.2 64 560c0 110.5 89.5 200 199.9 200H304c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8h-40.1c-33.7 0-65.4-13.4-89-37.7-23.5-24.2-36-56.8-34.9-90.6.9-26.4 9.9-51.2 26.2-72.1 16.7-21.3 40.1-36.8 66.1-43.7l37.9-9.9 13.9-36.6c8.6-22.8 20.6-44.1 35.7-63.4a245.6 245.6 0 0152.4-49.9c41.1-28.9 89.5-44.2 140-44.2s98.9 15.3 140 44.2c19.9 14 37.5 30.8 52.4 49.9 15.1 19.3 27.1 40.7 35.7 63.4l13.8 36.5 37.8 10C846.1 454.5 884 503.8 884 560c0 33.1-12.9 64.3-36.3 87.7a123.07 123.07 0 01-87.6 36.3H720c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h40.1C870.5 760 960 670.5 960 560c0-92.7-63.1-170.7-148.6-193.3z"}}]},name:"cloud-upload",theme:"outlined"},Ub=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:Vb}))},Wb=T.forwardRef(Ub),Xb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zm16-576h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zm578 576H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zm0-384H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z"}}]},name:"compress",theme:"outlined"},Yb=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:Xb}))},Zb=T.forwardRef(Yb),Kb={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M888.3 693.2c-42.5-24.6-94.3-18-129.2 12.8l-53-30.7V523.6c0-15.7-8.4-30.3-22-38.1l-136-78.3v-67.1c44.2-15 76-56.8 76-106.1 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 49.3 31.8 91.1 76 106.1v67.1l-136 78.3c-13.6 7.8-22 22.4-22 38.1v151.6l-53 30.7c-34.9-30.8-86.8-37.4-129.2-12.8-53.5 31-71.7 99.4-41 152.9 30.8 53.5 98.9 71.9 152.2 41 42.5-24.6 62.7-73 53.6-118.8l48.7-28.3 140.6 81c6.8 3.9 14.4 5.9 22 5.9s15.2-2 22-5.9L674.5 740l48.7 28.3c-9.1 45.7 11.2 94.2 53.6 118.8 53.3 30.9 121.5 12.6 152.2-41 30.8-53.6 12.6-122-40.7-152.9zm-673 138.4a47.6 47.6 0 01-65.2-17.6c-13.2-22.9-5.4-52.3 17.5-65.5a47.6 47.6 0 0165.2 17.6c13.2 22.9 5.4 52.3-17.5 65.5zM522 463.8zM464 234a48.01 48.01 0 0196 0 48.01 48.01 0 01-96 0zm170 446.2l-122 70.3-122-70.3V539.8l122-70.3 122 70.3v140.4zm239.9 133.9c-13.2 22.9-42.4 30.8-65.2 17.6-22.8-13.2-30.7-42.6-17.5-65.5s42.4-30.8 65.2-17.6c22.9 13.2 30.7 42.5 17.5 65.5z"}}]},name:"deployment-unit",theme:"outlined"},Jb=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:Kb}))},Qb=T.forwardRef(Jb),eC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},tC=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:eC}))},w0=T.forwardRef(tC),nC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},rC=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:nC}))},iC=T.forwardRef(rC),oC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},sC=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:oC}))},aC=T.forwardRef(sC),uC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},cC=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:uC}))},b0=T.forwardRef(cC),lC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M955.7 856l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zM480 416c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v184c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V416zm32 352a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"warning",theme:"filled"},fC=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:lC}))},dC=T.forwardRef(fC),hC={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},pC=function(n,r){return T.createElement(Tn,Nn({},n,{ref:r,icon:hC}))},gC=T.forwardRef(pC),mC=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,yC=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,vC=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,cl={Space_Separator:mC,ID_Start:yC,ID_Continue:vC},Tt={isSpaceSeparator(e){return typeof e=="string"&&cl.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||cl.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e==="‌"||e==="‍"||cl.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let Sl,yn,oi,Tu,Oi,mr,Wt,sf,Ys;var DC=function(n,r){Sl=String(n),yn="start",oi=[],Tu=0,Oi=1,mr=0,Wt=void 0,sf=void 0,Ys=void 0;do Wt=_C(),bC[yn]();while(Wt.type!=="eof");return typeof r=="function"?Fl({"":Ys},"",r):Ys};function Fl(e,n,r){const o=e[n];if(o!=null&&typeof o=="object")if(Array.isArray(o))for(let s=0;s<o.length;s++){const u=String(s),l=Fl(o,u,r);l===void 0?delete o[u]:Object.defineProperty(o,u,{value:l,writable:!0,enumerable:!0,configurable:!0})}else for(const s in o){const u=Fl(o,s,r);u===void 0?delete o[s]:Object.defineProperty(o,s,{value:u,writable:!0,enumerable:!0,configurable:!0})}return r.call(e,n,o)}let Pe,Oe,Vs,ri,Ve;function _C(){for(Pe="default",Oe="",Vs=!1,ri=1;;){Ve=ai();const e=C0[Pe]();if(e)return e}}function ai(){if(Sl[Tu])return String.fromCodePoint(Sl.codePointAt(Tu))}function re(){const e=ai();return e===`
`?(Oi++,mr=0):e?mr+=e.length:mr++,e&&(Tu+=e.length),e}const C0={default(){switch(Ve){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":re();return;case"/":re(),Pe="comment";return;case void 0:return re(),ft("eof")}if(Tt.isSpaceSeparator(Ve)){re();return}return C0[yn]()},comment(){switch(Ve){case"*":re(),Pe="multiLineComment";return;case"/":re(),Pe="singleLineComment";return}throw dt(re())},multiLineComment(){switch(Ve){case"*":re(),Pe="multiLineCommentAsterisk";return;case void 0:throw dt(re())}re()},multiLineCommentAsterisk(){switch(Ve){case"*":re();return;case"/":re(),Pe="default";return;case void 0:throw dt(re())}re(),Pe="multiLineComment"},singleLineComment(){switch(Ve){case`
`:case"\r":case"\u2028":case"\u2029":re(),Pe="default";return;case void 0:return re(),ft("eof")}re()},value(){switch(Ve){case"{":case"[":return ft("punctuator",re());case"n":return re(),fo("ull"),ft("null",null);case"t":return re(),fo("rue"),ft("boolean",!0);case"f":return re(),fo("alse"),ft("boolean",!1);case"-":case"+":re()==="-"&&(ri=-1),Pe="sign";return;case".":Oe=re(),Pe="decimalPointLeading";return;case"0":Oe=re(),Pe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Oe=re(),Pe="decimalInteger";return;case"I":return re(),fo("nfinity"),ft("numeric",1/0);case"N":return re(),fo("aN"),ft("numeric",NaN);case'"':case"'":Vs=re()==='"',Oe="",Pe="string";return}throw dt(re())},identifierNameStartEscape(){if(Ve!=="u")throw dt(re());re();const e=Nl();switch(e){case"$":case"_":break;default:if(!Tt.isIdStartChar(e))throw kh();break}Oe+=e,Pe="identifierName"},identifierName(){switch(Ve){case"$":case"_":case"‌":case"‍":Oe+=re();return;case"\\":re(),Pe="identifierNameEscape";return}if(Tt.isIdContinueChar(Ve)){Oe+=re();return}return ft("identifier",Oe)},identifierNameEscape(){if(Ve!=="u")throw dt(re());re();const e=Nl();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!Tt.isIdContinueChar(e))throw kh();break}Oe+=e,Pe="identifierName"},sign(){switch(Ve){case".":Oe=re(),Pe="decimalPointLeading";return;case"0":Oe=re(),Pe="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":Oe=re(),Pe="decimalInteger";return;case"I":return re(),fo("nfinity"),ft("numeric",ri*(1/0));case"N":return re(),fo("aN"),ft("numeric",NaN)}throw dt(re())},zero(){switch(Ve){case".":Oe+=re(),Pe="decimalPoint";return;case"e":case"E":Oe+=re(),Pe="decimalExponent";return;case"x":case"X":Oe+=re(),Pe="hexadecimal";return}return ft("numeric",ri*0)},decimalInteger(){switch(Ve){case".":Oe+=re(),Pe="decimalPoint";return;case"e":case"E":Oe+=re(),Pe="decimalExponent";return}if(Tt.isDigit(Ve)){Oe+=re();return}return ft("numeric",ri*Number(Oe))},decimalPointLeading(){if(Tt.isDigit(Ve)){Oe+=re(),Pe="decimalFraction";return}throw dt(re())},decimalPoint(){switch(Ve){case"e":case"E":Oe+=re(),Pe="decimalExponent";return}if(Tt.isDigit(Ve)){Oe+=re(),Pe="decimalFraction";return}return ft("numeric",ri*Number(Oe))},decimalFraction(){switch(Ve){case"e":case"E":Oe+=re(),Pe="decimalExponent";return}if(Tt.isDigit(Ve)){Oe+=re();return}return ft("numeric",ri*Number(Oe))},decimalExponent(){switch(Ve){case"+":case"-":Oe+=re(),Pe="decimalExponentSign";return}if(Tt.isDigit(Ve)){Oe+=re(),Pe="decimalExponentInteger";return}throw dt(re())},decimalExponentSign(){if(Tt.isDigit(Ve)){Oe+=re(),Pe="decimalExponentInteger";return}throw dt(re())},decimalExponentInteger(){if(Tt.isDigit(Ve)){Oe+=re();return}return ft("numeric",ri*Number(Oe))},hexadecimal(){if(Tt.isHexDigit(Ve)){Oe+=re(),Pe="hexadecimalInteger";return}throw dt(re())},hexadecimalInteger(){if(Tt.isHexDigit(Ve)){Oe+=re();return}return ft("numeric",ri*Number(Oe))},string(){switch(Ve){case"\\":re(),Oe+=xC();return;case'"':if(Vs)return re(),ft("string",Oe);Oe+=re();return;case"'":if(!Vs)return re(),ft("string",Oe);Oe+=re();return;case`
`:case"\r":throw dt(re());case"\u2028":case"\u2029":CC(Ve);break;case void 0:throw dt(re())}Oe+=re()},start(){switch(Ve){case"{":case"[":return ft("punctuator",re())}Pe="value"},beforePropertyName(){switch(Ve){case"$":case"_":Oe=re(),Pe="identifierName";return;case"\\":re(),Pe="identifierNameStartEscape";return;case"}":return ft("punctuator",re());case'"':case"'":Vs=re()==='"',Pe="string";return}if(Tt.isIdStartChar(Ve)){Oe+=re(),Pe="identifierName";return}throw dt(re())},afterPropertyName(){if(Ve===":")return ft("punctuator",re());throw dt(re())},beforePropertyValue(){Pe="value"},afterPropertyValue(){switch(Ve){case",":case"}":return ft("punctuator",re())}throw dt(re())},beforeArrayValue(){if(Ve==="]")return ft("punctuator",re());Pe="value"},afterArrayValue(){switch(Ve){case",":case"]":return ft("punctuator",re())}throw dt(re())},end(){throw dt(re())}};function ft(e,n){return{type:e,value:n,line:Oi,column:mr}}function fo(e){for(const n of e){if(ai()!==n)throw dt(re());re()}}function xC(){switch(ai()){case"b":return re(),"\b";case"f":return re(),"\f";case"n":return re(),`
`;case"r":return re(),"\r";case"t":return re(),"	";case"v":return re(),"\v";case"0":if(re(),Tt.isDigit(ai()))throw dt(re());return"\0";case"x":return re(),wC();case"u":return re(),Nl();case`
`:case"\u2028":case"\u2029":return re(),"";case"\r":return re(),ai()===`
`&&re(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw dt(re());case void 0:throw dt(re())}return re()}function wC(){let e="",n=ai();if(!Tt.isHexDigit(n)||(e+=re(),n=ai(),!Tt.isHexDigit(n)))throw dt(re());return e+=re(),String.fromCodePoint(parseInt(e,16))}function Nl(){let e="",n=4;for(;n-- >0;){const r=ai();if(!Tt.isHexDigit(r))throw dt(re());e+=re()}return String.fromCodePoint(parseInt(e,16))}const bC={start(){if(Wt.type==="eof")throw ho();ll()},beforePropertyName(){switch(Wt.type){case"identifier":case"string":sf=Wt.value,yn="afterPropertyName";return;case"punctuator":eu();return;case"eof":throw ho()}},afterPropertyName(){if(Wt.type==="eof")throw ho();yn="beforePropertyValue"},beforePropertyValue(){if(Wt.type==="eof")throw ho();ll()},beforeArrayValue(){if(Wt.type==="eof")throw ho();if(Wt.type==="punctuator"&&Wt.value==="]"){eu();return}ll()},afterPropertyValue(){if(Wt.type==="eof")throw ho();switch(Wt.value){case",":yn="beforePropertyName";return;case"}":eu()}},afterArrayValue(){if(Wt.type==="eof")throw ho();switch(Wt.value){case",":yn="beforeArrayValue";return;case"]":eu()}},end(){}};function ll(){let e;switch(Wt.type){case"punctuator":switch(Wt.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=Wt.value;break}if(Ys===void 0)Ys=e;else{const n=oi[oi.length-1];Array.isArray(n)?n.push(e):Object.defineProperty(n,sf,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")oi.push(e),Array.isArray(e)?yn="beforeArrayValue":yn="beforePropertyName";else{const n=oi[oi.length-1];n==null?yn="end":Array.isArray(n)?yn="afterArrayValue":yn="afterPropertyValue"}}function eu(){oi.pop();const e=oi[oi.length-1];e==null?yn="end":Array.isArray(e)?yn="afterArrayValue":yn="afterPropertyValue"}function dt(e){return Iu(e===void 0?`JSON5: invalid end of input at ${Oi}:${mr}`:`JSON5: invalid character '${E0(e)}' at ${Oi}:${mr}`)}function ho(){return Iu(`JSON5: invalid end of input at ${Oi}:${mr}`)}function kh(){return mr-=5,Iu(`JSON5: invalid identifier character at ${Oi}:${mr}`)}function CC(e){console.warn(`JSON5: '${E0(e)}' in strings is not valid ECMAScript; consider escaping`)}function E0(e){const n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(n[e])return n[e];if(e<" "){const r=e.charCodeAt(0).toString(16);return"\\x"+("00"+r).substring(r.length)}return e}function Iu(e){const n=new SyntaxError(e);return n.lineNumber=Oi,n.columnNumber=mr,n}var EC=function(n,r,o){const s=[];let u="",l,c,f="",h;if(r!=null&&typeof r=="object"&&!Array.isArray(r)&&(o=r.space,h=r.quote,r=r.replacer),typeof r=="function")c=r;else if(Array.isArray(r)){l=[];for(const _ of r){let C;typeof _=="string"?C=_:(typeof _=="number"||_ instanceof String||_ instanceof Number)&&(C=String(_)),C!==void 0&&l.indexOf(C)<0&&l.push(C)}}return o instanceof Number?o=Number(o):o instanceof String&&(o=String(o)),typeof o=="number"?o>0&&(o=Math.min(10,Math.floor(o)),f="          ".substr(0,o)):typeof o=="string"&&(f=o.substr(0,10)),p("",{"":n});function p(_,C){let D=C[_];switch(D!=null&&(typeof D.toJSON5=="function"?D=D.toJSON5(_):typeof D.toJSON=="function"&&(D=D.toJSON(_))),c&&(D=c.call(C,_,D)),D instanceof Number?D=Number(D):D instanceof String?D=String(D):D instanceof Boolean&&(D=D.valueOf()),D){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof D=="string")return g(D);if(typeof D=="number")return String(D);if(typeof D=="object")return Array.isArray(D)?b(D):m(D)}function g(_){const C={"'":.1,'"':.2},D={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let E="";for(let N=0;N<_.length;N++){const P=_[N];switch(P){case"'":case'"':C[P]++,E+=P;continue;case"\0":if(Tt.isDigit(_[N+1])){E+="\\x00";continue}}if(D[P]){E+=D[P];continue}if(P<" "){let H=P.charCodeAt(0).toString(16);E+="\\x"+("00"+H).substring(H.length);continue}E+=P}const R=h||Object.keys(C).reduce((N,P)=>C[N]<C[P]?N:P);return E=E.replace(new RegExp(R,"g"),D[R]),R+E+R}function m(_){if(s.indexOf(_)>=0)throw TypeError("Converting circular structure to JSON5");s.push(_);let C=u;u=u+f;let D=l||Object.keys(_),E=[];for(const N of D){const P=p(N,_);if(P!==void 0){let H=x(N)+":";f!==""&&(H+=" "),H+=P,E.push(H)}}let R;if(E.length===0)R="{}";else{let N;if(f==="")N=E.join(","),R="{"+N+"}";else{let P=`,
`+u;N=E.join(P),R=`{
`+u+N+`,
`+C+"}"}}return s.pop(),u=C,R}function x(_){if(_.length===0)return g(_);const C=String.fromCodePoint(_.codePointAt(0));if(!Tt.isIdStartChar(C))return g(_);for(let D=C.length;D<_.length;D++)if(!Tt.isIdContinueChar(String.fromCodePoint(_.codePointAt(D))))return g(_);return _}function b(_){if(s.indexOf(_)>=0)throw TypeError("Converting circular structure to JSON5");s.push(_);let C=u;u=u+f;let D=[];for(let R=0;R<_.length;R++){const N=p(String(R),_);D.push(N!==void 0?N:"null")}let E;if(D.length===0)E="[]";else if(f==="")E="["+D.join(",")+"]";else{let R=`,
`+u,N=D.join(R);E=`[
`+u+N+`,
`+C+"]"}return s.pop(),u=C,E}};const AC={parse:DC,stringify:EC};var Ii=AC;function vn(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,o;r<e.length;r++)(o=vn(e[r]))!==""&&(n+=(n&&" ")+o);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}const{useDebugValue:SC}=G,{useSyncExternalStoreWithSelector:FC}=ow,NC=e=>e;function A0(e,n=NC,r){const o=FC(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return SC(o),o}const Lh=(e,n)=>{const r=sw(e),o=(s,u=n)=>A0(r,s,u);return Object.assign(o,r),o},TC=(e,n)=>e?Lh(e,n):Lh;function an(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[o,s]of e)if(!Object.is(s,n.get(o)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const o of e)if(!n.has(o))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(n,o)||!Object.is(e[o],n[o]))return!1;return!0}var IC={value:()=>{}};function Yu(){for(var e=0,n=arguments.length,r={},o;e<n;++e){if(!(o=arguments[e]+"")||o in r||/[\s.]/.test(o))throw new Error("illegal type: "+o);r[o]=[]}return new Du(r)}function Du(e){this._=e}function BC(e,n){return e.trim().split(/^|\s+/).map(function(r){var o="",s=r.indexOf(".");if(s>=0&&(o=r.slice(s+1),r=r.slice(0,s)),r&&!n.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:o}})}Du.prototype=Yu.prototype={constructor:Du,on:function(e,n){var r=this._,o=BC(e+"",r),s,u=-1,l=o.length;if(arguments.length<2){for(;++u<l;)if((s=(e=o[u]).type)&&(s=RC(r[s],e.name)))return s;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++u<l;)if(s=(e=o[u]).type)r[s]=Hh(r[s],e.name,n);else if(n==null)for(s in r)r[s]=Hh(r[s],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new Du(e)},call:function(e,n){if((s=arguments.length-2)>0)for(var r=new Array(s),o=0,s,u;o<s;++o)r[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],o=0,s=u.length;o<s;++o)u[o].value.apply(n,r)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],s=0,u=o.length;s<u;++s)o[s].value.apply(n,r)}};function RC(e,n){for(var r=0,o=e.length,s;r<o;++r)if((s=e[r]).name===n)return s.value}function Hh(e,n,r){for(var o=0,s=e.length;o<s;++o)if(e[o].name===n){e[o]=IC,e=e.slice(0,o).concat(e.slice(o+1));break}return r!=null&&e.push({name:n,value:r}),e}var Tl="http://www.w3.org/1999/xhtml";const qh={svg:"http://www.w3.org/2000/svg",xhtml:Tl,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Zu(e){var n=e+="",r=n.indexOf(":");return r>=0&&(n=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),qh.hasOwnProperty(n)?{space:qh[n],local:e}:e}function OC(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===Tl&&n.documentElement.namespaceURI===Tl?n.createElement(e):n.createElementNS(r,e)}}function MC(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function S0(e){var n=Zu(e);return(n.local?MC:OC)(n)}function zC(){}function af(e){return e==null?zC:function(){return this.querySelector(e)}}function PC(e){typeof e!="function"&&(e=af(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=new Array(l),f,h,p=0;p<l;++p)(f=u[p])&&(h=e.call(f,f.__data__,p,u))&&("__data__"in f&&(h.__data__=f.__data__),c[p]=h);return new Hn(o,this._parents)}function $C(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function jC(){return[]}function F0(e){return e==null?jC:function(){return this.querySelectorAll(e)}}function kC(e){return function(){return $C(e.apply(this,arguments))}}function LC(e){typeof e=="function"?e=kC(e):e=F0(e);for(var n=this._groups,r=n.length,o=[],s=[],u=0;u<r;++u)for(var l=n[u],c=l.length,f,h=0;h<c;++h)(f=l[h])&&(o.push(e.call(f,f.__data__,h,l)),s.push(f));return new Hn(o,s)}function N0(e){return function(){return this.matches(e)}}function T0(e){return function(n){return n.matches(e)}}var HC=Array.prototype.find;function qC(e){return function(){return HC.call(this.children,e)}}function GC(){return this.firstElementChild}function VC(e){return this.select(e==null?GC:qC(typeof e=="function"?e:T0(e)))}var UC=Array.prototype.filter;function WC(){return Array.from(this.children)}function XC(e){return function(){return UC.call(this.children,e)}}function YC(e){return this.selectAll(e==null?WC:XC(typeof e=="function"?e:T0(e)))}function ZC(e){typeof e!="function"&&(e=N0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=[],f,h=0;h<l;++h)(f=u[h])&&e.call(f,f.__data__,h,u)&&c.push(f);return new Hn(o,this._parents)}function I0(e){return new Array(e.length)}function KC(){return new Hn(this._enter||this._groups.map(I0),this._parents)}function Bu(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Bu.prototype={constructor:Bu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function JC(e){return function(){return e}}function QC(e,n,r,o,s,u){for(var l=0,c,f=n.length,h=u.length;l<h;++l)(c=n[l])?(c.__data__=u[l],o[l]=c):r[l]=new Bu(e,u[l]);for(;l<f;++l)(c=n[l])&&(s[l]=c)}function e2(e,n,r,o,s,u,l){var c,f,h=new Map,p=n.length,g=u.length,m=new Array(p),x;for(c=0;c<p;++c)(f=n[c])&&(m[c]=x=l.call(f,f.__data__,c,n)+"",h.has(x)?s[c]=f:h.set(x,f));for(c=0;c<g;++c)x=l.call(e,u[c],c,u)+"",(f=h.get(x))?(o[c]=f,f.__data__=u[c],h.delete(x)):r[c]=new Bu(e,u[c]);for(c=0;c<p;++c)(f=n[c])&&h.get(m[c])===f&&(s[c]=f)}function t2(e){return e.__data__}function n2(e,n){if(!arguments.length)return Array.from(this,t2);var r=n?e2:QC,o=this._parents,s=this._groups;typeof e!="function"&&(e=JC(e));for(var u=s.length,l=new Array(u),c=new Array(u),f=new Array(u),h=0;h<u;++h){var p=o[h],g=s[h],m=g.length,x=r2(e.call(p,p&&p.__data__,h,o)),b=x.length,_=c[h]=new Array(b),C=l[h]=new Array(b),D=f[h]=new Array(m);r(p,g,_,C,D,x,n);for(var E=0,R=0,N,P;E<b;++E)if(N=_[E]){for(E>=R&&(R=E+1);!(P=C[R])&&++R<b;);N._next=P||null}}return l=new Hn(l,o),l._enter=c,l._exit=f,l}function r2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function i2(){return new Hn(this._exit||this._groups.map(I0),this._parents)}function o2(e,n,r){var o=this.enter(),s=this,u=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(s=n(s),s&&(s=s.selection())),r==null?u.remove():r(u),o&&s?o.merge(s).order():s}function s2(e){for(var n=e.selection?e.selection():e,r=this._groups,o=n._groups,s=r.length,u=o.length,l=Math.min(s,u),c=new Array(s),f=0;f<l;++f)for(var h=r[f],p=o[f],g=h.length,m=c[f]=new Array(g),x,b=0;b<g;++b)(x=h[b]||p[b])&&(m[b]=x);for(;f<s;++f)c[f]=r[f];return new Hn(c,this._parents)}function a2(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var o=e[n],s=o.length-1,u=o[s],l;--s>=0;)(l=o[s])&&(u&&l.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(l,u),u=l);return this}function u2(e){e||(e=c2);function n(g,m){return g&&m?e(g.__data__,m.__data__):!g-!m}for(var r=this._groups,o=r.length,s=new Array(o),u=0;u<o;++u){for(var l=r[u],c=l.length,f=s[u]=new Array(c),h,p=0;p<c;++p)(h=l[p])&&(f[p]=h);f.sort(n)}return new Hn(s,this._parents).order()}function c2(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function l2(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function f2(){return Array.from(this)}function d2(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length;s<u;++s){var l=o[s];if(l)return l}return null}function h2(){let e=0;for(const n of this)++e;return e}function p2(){return!this.node()}function g2(e){for(var n=this._groups,r=0,o=n.length;r<o;++r)for(var s=n[r],u=0,l=s.length,c;u<l;++u)(c=s[u])&&e.call(c,c.__data__,u,s);return this}function m2(e){return function(){this.removeAttribute(e)}}function y2(e){return function(){this.removeAttributeNS(e.space,e.local)}}function v2(e,n){return function(){this.setAttribute(e,n)}}function D2(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function _2(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function x2(e,n){return function(){var r=n.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function w2(e,n){var r=Zu(e);if(arguments.length<2){var o=this.node();return r.local?o.getAttributeNS(r.space,r.local):o.getAttribute(r)}return this.each((n==null?r.local?y2:m2:typeof n=="function"?r.local?x2:_2:r.local?D2:v2)(r,n))}function B0(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function b2(e){return function(){this.style.removeProperty(e)}}function C2(e,n,r){return function(){this.style.setProperty(e,n,r)}}function E2(e,n,r){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,r)}}function A2(e,n,r){return arguments.length>1?this.each((n==null?b2:typeof n=="function"?E2:C2)(e,n,r??"")):ls(this.node(),e)}function ls(e,n){return e.style.getPropertyValue(n)||B0(e).getComputedStyle(e,null).getPropertyValue(n)}function S2(e){return function(){delete this[e]}}function F2(e,n){return function(){this[e]=n}}function N2(e,n){return function(){var r=n.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function T2(e,n){return arguments.length>1?this.each((n==null?S2:typeof n=="function"?N2:F2)(e,n)):this.node()[e]}function R0(e){return e.trim().split(/^|\s+/)}function uf(e){return e.classList||new O0(e)}function O0(e){this._node=e,this._names=R0(e.getAttribute("class")||"")}O0.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function M0(e,n){for(var r=uf(e),o=-1,s=n.length;++o<s;)r.add(n[o])}function z0(e,n){for(var r=uf(e),o=-1,s=n.length;++o<s;)r.remove(n[o])}function I2(e){return function(){M0(this,e)}}function B2(e){return function(){z0(this,e)}}function R2(e,n){return function(){(n.apply(this,arguments)?M0:z0)(this,e)}}function O2(e,n){var r=R0(e+"");if(arguments.length<2){for(var o=uf(this.node()),s=-1,u=r.length;++s<u;)if(!o.contains(r[s]))return!1;return!0}return this.each((typeof n=="function"?R2:n?I2:B2)(r,n))}function M2(){this.textContent=""}function z2(e){return function(){this.textContent=e}}function P2(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function $2(e){return arguments.length?this.each(e==null?M2:(typeof e=="function"?P2:z2)(e)):this.node().textContent}function j2(){this.innerHTML=""}function k2(e){return function(){this.innerHTML=e}}function L2(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function H2(e){return arguments.length?this.each(e==null?j2:(typeof e=="function"?L2:k2)(e)):this.node().innerHTML}function q2(){this.nextSibling&&this.parentNode.appendChild(this)}function G2(){return this.each(q2)}function V2(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function U2(){return this.each(V2)}function W2(e){var n=typeof e=="function"?e:S0(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function X2(){return null}function Y2(e,n){var r=typeof e=="function"?e:S0(e),o=n==null?X2:typeof n=="function"?n:af(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),o.apply(this,arguments)||null)})}function Z2(){var e=this.parentNode;e&&e.removeChild(this)}function K2(){return this.each(Z2)}function J2(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Q2(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function eE(e){return this.select(e?Q2:J2)}function tE(e){return arguments.length?this.property("__data__",e):this.node().__data__}function nE(e){return function(n){e.call(this,n,this.__data__)}}function rE(e){return e.trim().split(/^|\s+/).map(function(n){var r="",o=n.indexOf(".");return o>=0&&(r=n.slice(o+1),n=n.slice(0,o)),{type:n,name:r}})}function iE(e){return function(){var n=this.__on;if(n){for(var r=0,o=-1,s=n.length,u;r<s;++r)u=n[r],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):n[++o]=u;++o?n.length=o:delete this.__on}}}function oE(e,n,r){return function(){var o=this.__on,s,u=nE(n);if(o){for(var l=0,c=o.length;l<c;++l)if((s=o[l]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=u,s.options=r),s.value=n;return}}this.addEventListener(e.type,u,r),s={type:e.type,name:e.name,value:n,listener:u,options:r},o?o.push(s):this.__on=[s]}}function sE(e,n,r){var o=rE(e+""),s,u=o.length,l;if(arguments.length<2){var c=this.node().__on;if(c){for(var f=0,h=c.length,p;f<h;++f)for(s=0,p=c[f];s<u;++s)if((l=o[s]).type===p.type&&l.name===p.name)return p.value}return}for(c=n?oE:iE,s=0;s<u;++s)this.each(c(o[s],n,r));return this}function P0(e,n,r){var o=B0(e),s=o.CustomEvent;typeof s=="function"?s=new s(n,r):(s=o.document.createEvent("Event"),r?(s.initEvent(n,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(n,!1,!1)),e.dispatchEvent(s)}function aE(e,n){return function(){return P0(this,e,n)}}function uE(e,n){return function(){return P0(this,e,n.apply(this,arguments))}}function cE(e,n){return this.each((typeof n=="function"?uE:aE)(e,n))}function*lE(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var o=e[n],s=0,u=o.length,l;s<u;++s)(l=o[s])&&(yield l)}var $0=[null];function Hn(e,n){this._groups=e,this._parents=n}function da(){return new Hn([[document.documentElement]],$0)}function fE(){return this}Hn.prototype=da.prototype={constructor:Hn,select:PC,selectAll:LC,selectChild:VC,selectChildren:YC,filter:ZC,data:n2,enter:KC,exit:i2,join:o2,merge:s2,selection:fE,order:a2,sort:u2,call:l2,nodes:f2,node:d2,size:h2,empty:p2,each:g2,attr:w2,style:A2,property:T2,classed:O2,text:$2,html:H2,raise:G2,lower:U2,append:W2,insert:Y2,remove:K2,clone:eE,datum:tE,on:sE,dispatch:cE,[Symbol.iterator]:lE};function hr(e){return typeof e=="string"?new Hn([[document.querySelector(e)]],[document.documentElement]):new Hn([[e]],$0)}function dE(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Nr(e,n){if(e=dE(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var o=r.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var s=n.getBoundingClientRect();return[e.clientX-s.left-n.clientLeft,e.clientY-s.top-n.clientTop]}}return[e.pageX,e.pageY]}const hE={passive:!1},ea={capture:!0,passive:!1};function fl(e){e.stopImmediatePropagation()}function is(e){e.preventDefault(),e.stopImmediatePropagation()}function j0(e){var n=e.document.documentElement,r=hr(e).on("dragstart.drag",is,ea);"onselectstart"in n?r.on("selectstart.drag",is,ea):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function k0(e,n){var r=e.document.documentElement,o=hr(e).on("dragstart.drag",null);n&&(o.on("click.drag",is,ea),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in r?o.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const tu=e=>()=>e;function Il(e,{sourceEvent:n,subject:r,target:o,identifier:s,active:u,x:l,y:c,dx:f,dy:h,dispatch:p}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:l,enumerable:!0,configurable:!0},y:{value:c,enumerable:!0,configurable:!0},dx:{value:f,enumerable:!0,configurable:!0},dy:{value:h,enumerable:!0,configurable:!0},_:{value:p}})}Il.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function pE(e){return!e.ctrlKey&&!e.button}function gE(){return this.parentNode}function mE(e,n){return n??{x:e.x,y:e.y}}function yE(){return navigator.maxTouchPoints||"ontouchstart"in this}function vE(){var e=pE,n=gE,r=mE,o=yE,s={},u=Yu("start","drag","end"),l=0,c,f,h,p,g=0;function m(N){N.on("mousedown.drag",x).filter(o).on("touchstart.drag",C).on("touchmove.drag",D,hE).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function x(N,P){if(!(p||!e.call(this,N,P))){var H=R(this,n.call(this,N,P),N,P,"mouse");H&&(hr(N.view).on("mousemove.drag",b,ea).on("mouseup.drag",_,ea),j0(N.view),fl(N),h=!1,c=N.clientX,f=N.clientY,H("start",N))}}function b(N){if(is(N),!h){var P=N.clientX-c,H=N.clientY-f;h=P*P+H*H>g}s.mouse("drag",N)}function _(N){hr(N.view).on("mousemove.drag mouseup.drag",null),k0(N.view,h),is(N),s.mouse("end",N)}function C(N,P){if(e.call(this,N,P)){var H=N.changedTouches,Y=n.call(this,N,P),Q=H.length,$,X;for($=0;$<Q;++$)(X=R(this,Y,N,P,H[$].identifier,H[$]))&&(fl(N),X("start",N,H[$]))}}function D(N){var P=N.changedTouches,H=P.length,Y,Q;for(Y=0;Y<H;++Y)(Q=s[P[Y].identifier])&&(is(N),Q("drag",N,P[Y]))}function E(N){var P=N.changedTouches,H=P.length,Y,Q;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),Y=0;Y<H;++Y)(Q=s[P[Y].identifier])&&(fl(N),Q("end",N,P[Y]))}function R(N,P,H,Y,Q,$){var X=u.copy(),te=Nr($||H,P),J,Z,B;if((B=r.call(N,new Il("beforestart",{sourceEvent:H,target:m,identifier:Q,active:l,x:te[0],y:te[1],dx:0,dy:0,dispatch:X}),Y))!=null)return J=B.x-te[0]||0,Z=B.y-te[1]||0,function q(j,W,ie){var V=te,oe;switch(j){case"start":s[Q]=q,oe=l++;break;case"end":delete s[Q],--l;case"drag":te=Nr(ie||W,P),oe=l;break}X.call(j,N,new Il(j,{sourceEvent:W,subject:B,target:m,identifier:Q,active:oe,x:te[0]+J,y:te[1]+Z,dx:te[0]-V[0],dy:te[1]-V[1],dispatch:X}),Y)}}return m.filter=function(N){return arguments.length?(e=typeof N=="function"?N:tu(!!N),m):e},m.container=function(N){return arguments.length?(n=typeof N=="function"?N:tu(N),m):n},m.subject=function(N){return arguments.length?(r=typeof N=="function"?N:tu(N),m):r},m.touchable=function(N){return arguments.length?(o=typeof N=="function"?N:tu(!!N),m):o},m.on=function(){var N=u.on.apply(u,arguments);return N===u?m:N},m.clickDistance=function(N){return arguments.length?(g=(N=+N)*N,m):Math.sqrt(g)},m}function cf(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function L0(e,n){var r=Object.create(e.prototype);for(var o in n)r[o]=n[o];return r}function ha(){}var ta=.7,Ru=1/ta,os="\\s*([+-]?\\d+)\\s*",na="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DE=/^#([0-9a-f]{3,8})$/,_E=new RegExp(`^rgb\\(${os},${os},${os}\\)$`),xE=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),wE=new RegExp(`^rgba\\(${os},${os},${os},${na}\\)$`),bE=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${na}\\)$`),CE=new RegExp(`^hsl\\(${na},${Tr},${Tr}\\)$`),EE=new RegExp(`^hsla\\(${na},${Tr},${Tr},${na}\\)$`),Gh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};cf(ha,ra,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vh,formatHex:Vh,formatHex8:AE,formatHsl:SE,formatRgb:Uh,toString:Uh});function Vh(){return this.rgb().formatHex()}function AE(){return this.rgb().formatHex8()}function SE(){return H0(this).formatHsl()}function Uh(){return this.rgb().formatRgb()}function ra(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=DE.exec(e))?(r=n[1].length,n=parseInt(n[1],16),r===6?Wh(n):r===3?new Fn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):r===8?nu(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):r===4?nu(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=_E.exec(e))?new Fn(n[1],n[2],n[3],1):(n=xE.exec(e))?new Fn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=wE.exec(e))?nu(n[1],n[2],n[3],n[4]):(n=bE.exec(e))?nu(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=CE.exec(e))?Zh(n[1],n[2]/100,n[3]/100,1):(n=EE.exec(e))?Zh(n[1],n[2]/100,n[3]/100,n[4]):Gh.hasOwnProperty(e)?Wh(Gh[e]):e==="transparent"?new Fn(NaN,NaN,NaN,0):null}function Wh(e){return new Fn(e>>16&255,e>>8&255,e&255,1)}function nu(e,n,r,o){return o<=0&&(e=n=r=NaN),new Fn(e,n,r,o)}function FE(e){return e instanceof ha||(e=ra(e)),e?(e=e.rgb(),new Fn(e.r,e.g,e.b,e.opacity)):new Fn}function Bl(e,n,r,o){return arguments.length===1?FE(e):new Fn(e,n,r,o??1)}function Fn(e,n,r,o){this.r=+e,this.g=+n,this.b=+r,this.opacity=+o}cf(Fn,Bl,L0(ha,{brighter(e){return e=e==null?Ru:Math.pow(Ru,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ta:Math.pow(ta,e),new Fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fn(yo(this.r),yo(this.g),yo(this.b),Ou(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Xh,formatHex:Xh,formatHex8:NE,formatRgb:Yh,toString:Yh}));function Xh(){return`#${go(this.r)}${go(this.g)}${go(this.b)}`}function NE(){return`#${go(this.r)}${go(this.g)}${go(this.b)}${go((isNaN(this.opacity)?1:this.opacity)*255)}`}function Yh(){const e=Ou(this.opacity);return`${e===1?"rgb(":"rgba("}${yo(this.r)}, ${yo(this.g)}, ${yo(this.b)}${e===1?")":`, ${e})`}`}function Ou(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function yo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function go(e){return e=yo(e),(e<16?"0":"")+e.toString(16)}function Zh(e,n,r,o){return o<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new pr(e,n,r,o)}function H0(e){if(e instanceof pr)return new pr(e.h,e.s,e.l,e.opacity);if(e instanceof ha||(e=ra(e)),!e)return new pr;if(e instanceof pr)return e;e=e.rgb();var n=e.r/255,r=e.g/255,o=e.b/255,s=Math.min(n,r,o),u=Math.max(n,r,o),l=NaN,c=u-s,f=(u+s)/2;return c?(n===u?l=(r-o)/c+(r<o)*6:r===u?l=(o-n)/c+2:l=(n-r)/c+4,c/=f<.5?u+s:2-u-s,l*=60):c=f>0&&f<1?0:l,new pr(l,c,f,e.opacity)}function TE(e,n,r,o){return arguments.length===1?H0(e):new pr(e,n,r,o??1)}function pr(e,n,r,o){this.h=+e,this.s=+n,this.l=+r,this.opacity=+o}cf(pr,TE,L0(ha,{brighter(e){return e=e==null?Ru:Math.pow(Ru,e),new pr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ta:Math.pow(ta,e),new pr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,o=r+(r<.5?r:1-r)*n,s=2*r-o;return new Fn(dl(e>=240?e-240:e+120,s,o),dl(e,s,o),dl(e<120?e+240:e-120,s,o),this.opacity)},clamp(){return new pr(Kh(this.h),ru(this.s),ru(this.l),Ou(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Ou(this.opacity);return`${e===1?"hsl(":"hsla("}${Kh(this.h)}, ${ru(this.s)*100}%, ${ru(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Kh(e){return e=(e||0)%360,e<0?e+360:e}function ru(e){return Math.max(0,Math.min(1,e||0))}function dl(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}const q0=e=>()=>e;function IE(e,n){return function(r){return e+r*n}}function BE(e,n,r){return e=Math.pow(e,r),n=Math.pow(n,r)-e,r=1/r,function(o){return Math.pow(e+o*n,r)}}function RE(e){return(e=+e)==1?G0:function(n,r){return r-n?BE(n,r,e):q0(isNaN(n)?r:n)}}function G0(e,n){var r=n-e;return r?IE(e,r):q0(isNaN(e)?n:e)}const Jh=function e(n){var r=RE(n);function o(s,u){var l=r((s=Bl(s)).r,(u=Bl(u)).r),c=r(s.g,u.g),f=r(s.b,u.b),h=G0(s.opacity,u.opacity);return function(p){return s.r=l(p),s.g=c(p),s.b=f(p),s.opacity=h(p),s+""}}return o.gamma=e,o}(1);function Fi(e,n){return e=+e,n=+n,function(r){return e*(1-r)+n*r}}var Rl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hl=new RegExp(Rl.source,"g");function OE(e){return function(){return e}}function ME(e){return function(n){return e(n)+""}}function zE(e,n){var r=Rl.lastIndex=hl.lastIndex=0,o,s,u,l=-1,c=[],f=[];for(e=e+"",n=n+"";(o=Rl.exec(e))&&(s=hl.exec(n));)(u=s.index)>r&&(u=n.slice(r,u),c[l]?c[l]+=u:c[++l]=u),(o=o[0])===(s=s[0])?c[l]?c[l]+=s:c[++l]=s:(c[++l]=null,f.push({i:l,x:Fi(o,s)})),r=hl.lastIndex;return r<n.length&&(u=n.slice(r),c[l]?c[l]+=u:c[++l]=u),c.length<2?f[0]?ME(f[0].x):OE(n):(n=f.length,function(h){for(var p=0,g;p<n;++p)c[(g=f[p]).i]=g.x(h);return c.join("")})}var Qh=180/Math.PI,Ol={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function V0(e,n,r,o,s,u){var l,c,f;return(l=Math.sqrt(e*e+n*n))&&(e/=l,n/=l),(f=e*r+n*o)&&(r-=e*f,o-=n*f),(c=Math.sqrt(r*r+o*o))&&(r/=c,o/=c,f/=c),e*o<n*r&&(e=-e,n=-n,f=-f,l=-l),{translateX:s,translateY:u,rotate:Math.atan2(n,e)*Qh,skewX:Math.atan(f)*Qh,scaleX:l,scaleY:c}}var iu;function PE(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Ol:V0(n.a,n.b,n.c,n.d,n.e,n.f)}function $E(e){return e==null||(iu||(iu=document.createElementNS("http://www.w3.org/2000/svg","g")),iu.setAttribute("transform",e),!(e=iu.transform.baseVal.consolidate()))?Ol:(e=e.matrix,V0(e.a,e.b,e.c,e.d,e.e,e.f))}function U0(e,n,r,o){function s(h){return h.length?h.pop()+" ":""}function u(h,p,g,m,x,b){if(h!==g||p!==m){var _=x.push("translate(",null,n,null,r);b.push({i:_-4,x:Fi(h,g)},{i:_-2,x:Fi(p,m)})}else(g||m)&&x.push("translate("+g+n+m+r)}function l(h,p,g,m){h!==p?(h-p>180?p+=360:p-h>180&&(h+=360),m.push({i:g.push(s(g)+"rotate(",null,o)-2,x:Fi(h,p)})):p&&g.push(s(g)+"rotate("+p+o)}function c(h,p,g,m){h!==p?m.push({i:g.push(s(g)+"skewX(",null,o)-2,x:Fi(h,p)}):p&&g.push(s(g)+"skewX("+p+o)}function f(h,p,g,m,x,b){if(h!==g||p!==m){var _=x.push(s(x)+"scale(",null,",",null,")");b.push({i:_-4,x:Fi(h,g)},{i:_-2,x:Fi(p,m)})}else(g!==1||m!==1)&&x.push(s(x)+"scale("+g+","+m+")")}return function(h,p){var g=[],m=[];return h=e(h),p=e(p),u(h.translateX,h.translateY,p.translateX,p.translateY,g,m),l(h.rotate,p.rotate,g,m),c(h.skewX,p.skewX,g,m),f(h.scaleX,h.scaleY,p.scaleX,p.scaleY,g,m),h=p=null,function(x){for(var b=-1,_=m.length,C;++b<_;)g[(C=m[b]).i]=C.x(x);return g.join("")}}}var jE=U0(PE,"px, ","px)","deg)"),kE=U0($E,", ",")",")"),LE=1e-12;function ep(e){return((e=Math.exp(e))+1/e)/2}function HE(e){return((e=Math.exp(e))-1/e)/2}function qE(e){return((e=Math.exp(2*e))-1)/(e+1)}const GE=function e(n,r,o){function s(u,l){var c=u[0],f=u[1],h=u[2],p=l[0],g=l[1],m=l[2],x=p-c,b=g-f,_=x*x+b*b,C,D;if(_<LE)D=Math.log(m/h)/n,C=function(Y){return[c+Y*x,f+Y*b,h*Math.exp(n*Y*D)]};else{var E=Math.sqrt(_),R=(m*m-h*h+o*_)/(2*h*r*E),N=(m*m-h*h-o*_)/(2*m*r*E),P=Math.log(Math.sqrt(R*R+1)-R),H=Math.log(Math.sqrt(N*N+1)-N);D=(H-P)/n,C=function(Y){var Q=Y*D,$=ep(P),X=h/(r*E)*($*qE(n*Q+P)-HE(P));return[c+X*x,f+X*b,h*$/ep(n*Q+P)]}}return C.duration=D*1e3*n/Math.SQRT2,C}return s.rho=function(u){var l=Math.max(.001,+u),c=l*l,f=c*c;return e(l,c,f)},s}(Math.SQRT2,2,4);var fs=0,Us=0,$s=0,W0=1e3,Mu,Ws,zu=0,Do=0,Ku=0,ia=typeof performance=="object"&&performance.now?performance:Date,X0=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lf(){return Do||(X0(VE),Do=ia.now()+Ku)}function VE(){Do=0}function Pu(){this._call=this._time=this._next=null}Pu.prototype=Y0.prototype={constructor:Pu,restart:function(e,n,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?lf():+r)+(n==null?0:+n),!this._next&&Ws!==this&&(Ws?Ws._next=this:Mu=this,Ws=this),this._call=e,this._time=r,Ml()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ml())}};function Y0(e,n,r){var o=new Pu;return o.restart(e,n,r),o}function UE(){lf(),++fs;for(var e=Mu,n;e;)(n=Do-e._time)>=0&&e._call.call(void 0,n),e=e._next;--fs}function tp(){Do=(zu=ia.now())+Ku,fs=Us=0;try{UE()}finally{fs=0,XE(),Do=0}}function WE(){var e=ia.now(),n=e-zu;n>W0&&(Ku-=n,zu=e)}function XE(){for(var e,n=Mu,r,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(r=n._next,n._next=null,n=e?e._next=r:Mu=r);Ws=e,Ml(o)}function Ml(e){if(!fs){Us&&(Us=clearTimeout(Us));var n=e-Do;n>24?(e<1/0&&(Us=setTimeout(tp,e-ia.now()-Ku)),$s&&($s=clearInterval($s))):($s||(zu=ia.now(),$s=setInterval(WE,W0)),fs=1,X0(tp))}}function np(e,n,r){var o=new Pu;return n=n==null?0:+n,o.restart(s=>{o.stop(),e(s+n)},n,r),o}var YE=Yu("start","end","cancel","interrupt"),ZE=[],Z0=0,rp=1,zl=2,_u=3,ip=4,Pl=5,xu=6;function Ju(e,n,r,o,s,u){var l=e.__transition;if(!l)e.__transition={};else if(r in l)return;KE(e,r,{name:n,index:o,group:s,on:YE,tween:ZE,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Z0})}function ff(e,n){var r=Dr(e,n);if(r.state>Z0)throw new Error("too late; already scheduled");return r}function Ir(e,n){var r=Dr(e,n);if(r.state>_u)throw new Error("too late; already running");return r}function Dr(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw new Error("transition not found");return r}function KE(e,n,r){var o=e.__transition,s;o[n]=r,r.timer=Y0(u,0,r.time);function u(h){r.state=rp,r.timer.restart(l,r.delay,r.time),r.delay<=h&&l(h-r.delay)}function l(h){var p,g,m,x;if(r.state!==rp)return f();for(p in o)if(x=o[p],x.name===r.name){if(x.state===_u)return np(l);x.state===ip?(x.state=xu,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete o[p]):+p<n&&(x.state=xu,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete o[p])}if(np(function(){r.state===_u&&(r.state=ip,r.timer.restart(c,r.delay,r.time),c(h))}),r.state=zl,r.on.call("start",e,e.__data__,r.index,r.group),r.state===zl){for(r.state=_u,s=new Array(m=r.tween.length),p=0,g=-1;p<m;++p)(x=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(s[++g]=x);s.length=g+1}}function c(h){for(var p=h<r.duration?r.ease.call(null,h/r.duration):(r.timer.restart(f),r.state=Pl,1),g=-1,m=s.length;++g<m;)s[g].call(e,p);r.state===Pl&&(r.on.call("end",e,e.__data__,r.index,r.group),f())}function f(){r.state=xu,r.timer.stop(),delete o[n];for(var h in o)return;delete e.__transition}}function wu(e,n){var r=e.__transition,o,s,u=!0,l;if(r){n=n==null?null:n+"";for(l in r){if((o=r[l]).name!==n){u=!1;continue}s=o.state>zl&&o.state<Pl,o.state=xu,o.timer.stop(),o.on.call(s?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete r[l]}u&&delete e.__transition}}function JE(e){return this.each(function(){wu(this,e)})}function QE(e,n){var r,o;return function(){var s=Ir(this,e),u=s.tween;if(u!==r){o=r=u;for(var l=0,c=o.length;l<c;++l)if(o[l].name===n){o=o.slice(),o.splice(l,1);break}}s.tween=o}}function eA(e,n,r){var o,s;if(typeof r!="function")throw new Error;return function(){var u=Ir(this,e),l=u.tween;if(l!==o){s=(o=l).slice();for(var c={name:n,value:r},f=0,h=s.length;f<h;++f)if(s[f].name===n){s[f]=c;break}f===h&&s.push(c)}u.tween=s}}function tA(e,n){var r=this._id;if(e+="",arguments.length<2){for(var o=Dr(this.node(),r).tween,s=0,u=o.length,l;s<u;++s)if((l=o[s]).name===e)return l.value;return null}return this.each((n==null?QE:eA)(r,e,n))}function df(e,n,r){var o=e._id;return e.each(function(){var s=Ir(this,o);(s.value||(s.value={}))[n]=r.apply(this,arguments)}),function(s){return Dr(s,o).value[n]}}function K0(e,n){var r;return(typeof n=="number"?Fi:n instanceof ra?Jh:(r=ra(n))?(n=r,Jh):zE)(e,n)}function nA(e){return function(){this.removeAttribute(e)}}function rA(e){return function(){this.removeAttributeNS(e.space,e.local)}}function iA(e,n,r){var o,s=r+"",u;return function(){var l=this.getAttribute(e);return l===s?null:l===o?u:u=n(o=l,r)}}function oA(e,n,r){var o,s=r+"",u;return function(){var l=this.getAttributeNS(e.space,e.local);return l===s?null:l===o?u:u=n(o=l,r)}}function sA(e,n,r){var o,s,u;return function(){var l,c=r(this),f;return c==null?void this.removeAttribute(e):(l=this.getAttribute(e),f=c+"",l===f?null:l===o&&f===s?u:(s=f,u=n(o=l,c)))}}function aA(e,n,r){var o,s,u;return function(){var l,c=r(this),f;return c==null?void this.removeAttributeNS(e.space,e.local):(l=this.getAttributeNS(e.space,e.local),f=c+"",l===f?null:l===o&&f===s?u:(s=f,u=n(o=l,c)))}}function uA(e,n){var r=Zu(e),o=r==="transform"?kE:K0;return this.attrTween(e,typeof n=="function"?(r.local?aA:sA)(r,o,df(this,"attr."+e,n)):n==null?(r.local?rA:nA)(r):(r.local?oA:iA)(r,o,n))}function cA(e,n){return function(r){this.setAttribute(e,n.call(this,r))}}function lA(e,n){return function(r){this.setAttributeNS(e.space,e.local,n.call(this,r))}}function fA(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&lA(e,u)),r}return s._value=n,s}function dA(e,n){var r,o;function s(){var u=n.apply(this,arguments);return u!==o&&(r=(o=u)&&cA(e,u)),r}return s._value=n,s}function hA(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(n==null)return this.tween(r,null);if(typeof n!="function")throw new Error;var o=Zu(e);return this.tween(r,(o.local?fA:dA)(o,n))}function pA(e,n){return function(){ff(this,e).delay=+n.apply(this,arguments)}}function gA(e,n){return n=+n,function(){ff(this,e).delay=n}}function mA(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?pA:gA)(n,e)):Dr(this.node(),n).delay}function yA(e,n){return function(){Ir(this,e).duration=+n.apply(this,arguments)}}function vA(e,n){return n=+n,function(){Ir(this,e).duration=n}}function DA(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?yA:vA)(n,e)):Dr(this.node(),n).duration}function _A(e,n){if(typeof n!="function")throw new Error;return function(){Ir(this,e).ease=n}}function xA(e){var n=this._id;return arguments.length?this.each(_A(n,e)):Dr(this.node(),n).ease}function wA(e,n){return function(){var r=n.apply(this,arguments);if(typeof r!="function")throw new Error;Ir(this,e).ease=r}}function bA(e){if(typeof e!="function")throw new Error;return this.each(wA(this._id,e))}function CA(e){typeof e!="function"&&(e=N0(e));for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s)for(var u=n[s],l=u.length,c=o[s]=[],f,h=0;h<l;++h)(f=u[h])&&e.call(f,f.__data__,h,u)&&c.push(f);return new ui(o,this._parents,this._name,this._id)}function EA(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,r=e._groups,o=n.length,s=r.length,u=Math.min(o,s),l=new Array(o),c=0;c<u;++c)for(var f=n[c],h=r[c],p=f.length,g=l[c]=new Array(p),m,x=0;x<p;++x)(m=f[x]||h[x])&&(g[x]=m);for(;c<o;++c)l[c]=n[c];return new ui(l,this._parents,this._name,this._id)}function AA(e){return(e+"").trim().split(/^|\s+/).every(function(n){var r=n.indexOf(".");return r>=0&&(n=n.slice(0,r)),!n||n==="start"})}function SA(e,n,r){var o,s,u=AA(n)?ff:Ir;return function(){var l=u(this,e),c=l.on;c!==o&&(s=(o=c).copy()).on(n,r),l.on=s}}function FA(e,n){var r=this._id;return arguments.length<2?Dr(this.node(),r).on.on(e):this.each(SA(r,e,n))}function NA(e){return function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}}function TA(){return this.on("end.remove",NA(this._id))}function IA(e){var n=this._name,r=this._id;typeof e!="function"&&(e=af(e));for(var o=this._groups,s=o.length,u=new Array(s),l=0;l<s;++l)for(var c=o[l],f=c.length,h=u[l]=new Array(f),p,g,m=0;m<f;++m)(p=c[m])&&(g=e.call(p,p.__data__,m,c))&&("__data__"in p&&(g.__data__=p.__data__),h[m]=g,Ju(h[m],n,r,m,h,Dr(p,r)));return new ui(u,this._parents,n,r)}function BA(e){var n=this._name,r=this._id;typeof e!="function"&&(e=F0(e));for(var o=this._groups,s=o.length,u=[],l=[],c=0;c<s;++c)for(var f=o[c],h=f.length,p,g=0;g<h;++g)if(p=f[g]){for(var m=e.call(p,p.__data__,g,f),x,b=Dr(p,r),_=0,C=m.length;_<C;++_)(x=m[_])&&Ju(x,n,r,_,m,b);u.push(m),l.push(p)}return new ui(u,l,n,r)}var RA=da.prototype.constructor;function OA(){return new RA(this._groups,this._parents)}function MA(e,n){var r,o,s;return function(){var u=ls(this,e),l=(this.style.removeProperty(e),ls(this,e));return u===l?null:u===r&&l===o?s:s=n(r=u,o=l)}}function J0(e){return function(){this.style.removeProperty(e)}}function zA(e,n,r){var o,s=r+"",u;return function(){var l=ls(this,e);return l===s?null:l===o?u:u=n(o=l,r)}}function PA(e,n,r){var o,s,u;return function(){var l=ls(this,e),c=r(this),f=c+"";return c==null&&(f=c=(this.style.removeProperty(e),ls(this,e))),l===f?null:l===o&&f===s?u:(s=f,u=n(o=l,c))}}function $A(e,n){var r,o,s,u="style."+n,l="end."+u,c;return function(){var f=Ir(this,e),h=f.on,p=f.value[u]==null?c||(c=J0(n)):void 0;(h!==r||s!==p)&&(o=(r=h).copy()).on(l,s=p),f.on=o}}function jA(e,n,r){var o=(e+="")=="transform"?jE:K0;return n==null?this.styleTween(e,MA(e,o)).on("end.style."+e,J0(e)):typeof n=="function"?this.styleTween(e,PA(e,o,df(this,"style."+e,n))).each($A(this._id,e)):this.styleTween(e,zA(e,o,n),r).on("end.style."+e,null)}function kA(e,n,r){return function(o){this.style.setProperty(e,n.call(this,o),r)}}function LA(e,n,r){var o,s;function u(){var l=n.apply(this,arguments);return l!==s&&(o=(s=l)&&kA(e,l,r)),o}return u._value=n,u}function HA(e,n,r){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,LA(e,n,r??""))}function qA(e){return function(){this.textContent=e}}function GA(e){return function(){var n=e(this);this.textContent=n??""}}function VA(e){return this.tween("text",typeof e=="function"?GA(df(this,"text",e)):qA(e==null?"":e+""))}function UA(e){return function(n){this.textContent=e.call(this,n)}}function WA(e){var n,r;function o(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&UA(s)),n}return o._value=e,o}function XA(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,WA(e))}function YA(){for(var e=this._name,n=this._id,r=Q0(),o=this._groups,s=o.length,u=0;u<s;++u)for(var l=o[u],c=l.length,f,h=0;h<c;++h)if(f=l[h]){var p=Dr(f,n);Ju(f,e,r,h,l,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new ui(o,this._parents,e,r)}function ZA(){var e,n,r=this,o=r._id,s=r.size();return new Promise(function(u,l){var c={value:l},f={value:function(){--s===0&&u()}};r.each(function(){var h=Ir(this,o),p=h.on;p!==e&&(n=(e=p).copy(),n._.cancel.push(c),n._.interrupt.push(c),n._.end.push(f)),h.on=n}),s===0&&u()})}var KA=0;function ui(e,n,r,o){this._groups=e,this._parents=n,this._name=r,this._id=o}function Q0(){return++KA}var ni=da.prototype;ui.prototype={constructor:ui,select:IA,selectAll:BA,selectChild:ni.selectChild,selectChildren:ni.selectChildren,filter:CA,merge:EA,selection:OA,transition:YA,call:ni.call,nodes:ni.nodes,node:ni.node,size:ni.size,empty:ni.empty,each:ni.each,on:FA,attr:uA,attrTween:hA,style:jA,styleTween:HA,text:VA,textTween:XA,remove:TA,tween:tA,delay:mA,duration:DA,ease:xA,easeVarying:bA,end:ZA,[Symbol.iterator]:ni[Symbol.iterator]};function JA(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var QA={time:null,delay:0,duration:250,ease:JA};function eS(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return r}function tS(e){var n,r;e instanceof ui?(n=e._id,e=e._name):(n=Q0(),(r=QA).time=lf(),e=e==null?null:e+"");for(var o=this._groups,s=o.length,u=0;u<s;++u)for(var l=o[u],c=l.length,f,h=0;h<c;++h)(f=l[h])&&Ju(f,e,n,h,l,r||eS(f,n));return new ui(o,this._parents,e,n)}da.prototype.interrupt=JE;da.prototype.transition=tS;const ou=e=>()=>e;function nS(e,{sourceEvent:n,target:r,transform:o,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:s}})}function si(e,n,r){this.k=e,this.x=n,this.y=r}si.prototype={constructor:si,scale:function(e){return e===1?this:new si(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new si(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Bi=new si(1,0,0);si.prototype;function pl(e){e.stopImmediatePropagation()}function js(e){e.preventDefault(),e.stopImmediatePropagation()}function rS(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function iS(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function op(){return this.__zoom||Bi}function oS(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function sS(){return navigator.maxTouchPoints||"ontouchstart"in this}function aS(e,n,r){var o=e.invertX(n[0][0])-r[0][0],s=e.invertX(n[1][0])-r[1][0],u=e.invertY(n[0][1])-r[0][1],l=e.invertY(n[1][1])-r[1][1];return e.translate(s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s),l>u?(u+l)/2:Math.min(0,u)||Math.max(0,l))}function uS(){var e=rS,n=iS,r=aS,o=oS,s=sS,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,f=GE,h=Yu("start","zoom","end"),p,g,m,x=500,b=150,_=0,C=10;function D(B){B.property("__zoom",op).on("wheel.zoom",Q,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",X).filter(s).on("touchstart.zoom",te).on("touchmove.zoom",J).on("touchend.zoom touchcancel.zoom",Z).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}D.transform=function(B,q,j,W){var ie=B.selection?B.selection():B;ie.property("__zoom",op),B!==ie?P(B,q,j,W):ie.interrupt().each(function(){H(this,arguments).event(W).start().zoom(null,typeof q=="function"?q.apply(this,arguments):q).end()})},D.scaleBy=function(B,q,j,W){D.scaleTo(B,function(){var ie=this.__zoom.k,V=typeof q=="function"?q.apply(this,arguments):q;return ie*V},j,W)},D.scaleTo=function(B,q,j,W){D.transform(B,function(){var ie=n.apply(this,arguments),V=this.__zoom,oe=j==null?N(ie):typeof j=="function"?j.apply(this,arguments):j,se=V.invert(oe),le=typeof q=="function"?q.apply(this,arguments):q;return r(R(E(V,le),oe,se),ie,l)},j,W)},D.translateBy=function(B,q,j,W){D.transform(B,function(){return r(this.__zoom.translate(typeof q=="function"?q.apply(this,arguments):q,typeof j=="function"?j.apply(this,arguments):j),n.apply(this,arguments),l)},null,W)},D.translateTo=function(B,q,j,W,ie){D.transform(B,function(){var V=n.apply(this,arguments),oe=this.__zoom,se=W==null?N(V):typeof W=="function"?W.apply(this,arguments):W;return r(Bi.translate(se[0],se[1]).scale(oe.k).translate(typeof q=="function"?-q.apply(this,arguments):-q,typeof j=="function"?-j.apply(this,arguments):-j),V,l)},W,ie)};function E(B,q){return q=Math.max(u[0],Math.min(u[1],q)),q===B.k?B:new si(q,B.x,B.y)}function R(B,q,j){var W=q[0]-j[0]*B.k,ie=q[1]-j[1]*B.k;return W===B.x&&ie===B.y?B:new si(B.k,W,ie)}function N(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function P(B,q,j,W){B.on("start.zoom",function(){H(this,arguments).event(W).start()}).on("interrupt.zoom end.zoom",function(){H(this,arguments).event(W).end()}).tween("zoom",function(){var ie=this,V=arguments,oe=H(ie,V).event(W),se=n.apply(ie,V),le=j==null?N(se):typeof j=="function"?j.apply(ie,V):j,ue=Math.max(se[1][0]-se[0][0],se[1][1]-se[0][1]),ge=ie.__zoom,de=typeof q=="function"?q.apply(ie,V):q,Fe=f(ge.invert(le).concat(ue/ge.k),de.invert(le).concat(ue/de.k));return function(Be){if(Be===1)Be=de;else{var me=Fe(Be),be=ue/me[2];Be=new si(be,le[0]-me[0]*be,le[1]-me[1]*be)}oe.zoom(null,Be)}})}function H(B,q,j){return!j&&B.__zooming||new Y(B,q)}function Y(B,q){this.that=B,this.args=q,this.active=0,this.sourceEvent=null,this.extent=n.apply(B,q),this.taps=0}Y.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,q){return this.mouse&&B!=="mouse"&&(this.mouse[1]=q.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=q.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=q.invert(this.touch1[0])),this.that.__zoom=q,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var q=hr(this.that).datum();h.call(B,this.that,new nS(B,{sourceEvent:this.sourceEvent,target:D,type:B,transform:this.that.__zoom,dispatch:h}),q)}};function Q(B,...q){if(!e.apply(this,arguments))return;var j=H(this,q).event(B),W=this.__zoom,ie=Math.max(u[0],Math.min(u[1],W.k*Math.pow(2,o.apply(this,arguments)))),V=Nr(B);if(j.wheel)(j.mouse[0][0]!==V[0]||j.mouse[0][1]!==V[1])&&(j.mouse[1]=W.invert(j.mouse[0]=V)),clearTimeout(j.wheel);else{if(W.k===ie)return;j.mouse=[V,W.invert(V)],wu(this),j.start()}js(B),j.wheel=setTimeout(oe,b),j.zoom("mouse",r(R(E(W,ie),j.mouse[0],j.mouse[1]),j.extent,l));function oe(){j.wheel=null,j.end()}}function $(B,...q){if(m||!e.apply(this,arguments))return;var j=B.currentTarget,W=H(this,q,!0).event(B),ie=hr(B.view).on("mousemove.zoom",le,!0).on("mouseup.zoom",ue,!0),V=Nr(B,j),oe=B.clientX,se=B.clientY;j0(B.view),pl(B),W.mouse=[V,this.__zoom.invert(V)],wu(this),W.start();function le(ge){if(js(ge),!W.moved){var de=ge.clientX-oe,Fe=ge.clientY-se;W.moved=de*de+Fe*Fe>_}W.event(ge).zoom("mouse",r(R(W.that.__zoom,W.mouse[0]=Nr(ge,j),W.mouse[1]),W.extent,l))}function ue(ge){ie.on("mousemove.zoom mouseup.zoom",null),k0(ge.view,W.moved),js(ge),W.event(ge).end()}}function X(B,...q){if(e.apply(this,arguments)){var j=this.__zoom,W=Nr(B.changedTouches?B.changedTouches[0]:B,this),ie=j.invert(W),V=j.k*(B.shiftKey?.5:2),oe=r(R(E(j,V),W,ie),n.apply(this,q),l);js(B),c>0?hr(this).transition().duration(c).call(P,oe,W,B):hr(this).call(D.transform,oe,W,B)}}function te(B,...q){if(e.apply(this,arguments)){var j=B.touches,W=j.length,ie=H(this,q,B.changedTouches.length===W).event(B),V,oe,se,le;for(pl(B),oe=0;oe<W;++oe)se=j[oe],le=Nr(se,this),le=[le,this.__zoom.invert(le),se.identifier],ie.touch0?!ie.touch1&&ie.touch0[2]!==le[2]&&(ie.touch1=le,ie.taps=0):(ie.touch0=le,V=!0,ie.taps=1+!!p);p&&(p=clearTimeout(p)),V&&(ie.taps<2&&(g=le[0],p=setTimeout(function(){p=null},x)),wu(this),ie.start())}}function J(B,...q){if(this.__zooming){var j=H(this,q).event(B),W=B.changedTouches,ie=W.length,V,oe,se,le;for(js(B),V=0;V<ie;++V)oe=W[V],se=Nr(oe,this),j.touch0&&j.touch0[2]===oe.identifier?j.touch0[0]=se:j.touch1&&j.touch1[2]===oe.identifier&&(j.touch1[0]=se);if(oe=j.that.__zoom,j.touch1){var ue=j.touch0[0],ge=j.touch0[1],de=j.touch1[0],Fe=j.touch1[1],Be=(Be=de[0]-ue[0])*Be+(Be=de[1]-ue[1])*Be,me=(me=Fe[0]-ge[0])*me+(me=Fe[1]-ge[1])*me;oe=E(oe,Math.sqrt(Be/me)),se=[(ue[0]+de[0])/2,(ue[1]+de[1])/2],le=[(ge[0]+Fe[0])/2,(ge[1]+Fe[1])/2]}else if(j.touch0)se=j.touch0[0],le=j.touch0[1];else return;j.zoom("touch",r(R(oe,se,le),j.extent,l))}}function Z(B,...q){if(this.__zooming){var j=H(this,q).event(B),W=B.changedTouches,ie=W.length,V,oe;for(pl(B),m&&clearTimeout(m),m=setTimeout(function(){m=null},x),V=0;V<ie;++V)oe=W[V],j.touch0&&j.touch0[2]===oe.identifier?delete j.touch0:j.touch1&&j.touch1[2]===oe.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(oe=Nr(oe,this),Math.hypot(g[0]-oe[0],g[1]-oe[1])<C)){var se=hr(this).on("dblclick.zoom");se&&se.apply(this,arguments)}}}return D.wheelDelta=function(B){return arguments.length?(o=typeof B=="function"?B:ou(+B),D):o},D.filter=function(B){return arguments.length?(e=typeof B=="function"?B:ou(!!B),D):e},D.touchable=function(B){return arguments.length?(s=typeof B=="function"?B:ou(!!B),D):s},D.extent=function(B){return arguments.length?(n=typeof B=="function"?B:ou([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),D):n},D.scaleExtent=function(B){return arguments.length?(u[0]=+B[0],u[1]=+B[1],D):[u[0],u[1]]},D.translateExtent=function(B){return arguments.length?(l[0][0]=+B[0][0],l[1][0]=+B[1][0],l[0][1]=+B[0][1],l[1][1]=+B[1][1],D):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},D.constrain=function(B){return arguments.length?(r=B,D):r},D.duration=function(B){return arguments.length?(c=+B,D):c},D.interpolate=function(B){return arguments.length?(f=B,D):f},D.on=function(){var B=h.on.apply(h,arguments);return B===h?D:B},D.clickDistance=function(B){return arguments.length?(_=(B=+B)*B,D):Math.sqrt(_)},D.tapDistance=function(B){return arguments.length?(C=+B,D):C},D}const Qu=T.createContext(null),cS=Qu.Provider,ci={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,n)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?n.targetHandle:n.sourceHandle}", edge id: ${n.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},eg=ci.error001();function mt(e,n){const r=T.useContext(Qu);if(r===null)throw new Error(eg);return A0(r,e,n)}const Xt=()=>{const e=T.useContext(Qu);if(e===null)throw new Error(eg);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},lS=e=>e.userSelectionActive?"none":"all";function tg({position:e,children:n,className:r,style:o,...s}){const u=mt(lS),l=`${e}`.split("-");return G.createElement("div",{className:vn(["react-flow__panel",r,...l]),style:{...o,pointerEvents:u},...s},n)}function fS({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:G.createElement(tg,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},G.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const dS=({x:e,y:n,label:r,labelStyle:o={},labelShowBg:s=!0,labelBgStyle:u={},labelBgPadding:l=[2,4],labelBgBorderRadius:c=2,children:f,className:h,...p})=>{const g=T.useRef(null),[m,x]=T.useState({x:0,y:0,width:0,height:0}),b=vn(["react-flow__edge-textwrapper",h]);return T.useEffect(()=>{if(g.current){const _=g.current.getBBox();x({x:_.x,y:_.y,width:_.width,height:_.height})}},[r]),typeof r>"u"||!r?null:G.createElement("g",{transform:`translate(${e-m.width/2} ${n-m.height/2})`,className:b,visibility:m.width?"visible":"hidden",...p},s&&G.createElement("rect",{width:m.width+2*l[0],x:-l[0],y:-l[1],height:m.height+2*l[1],className:"react-flow__edge-textbg",style:u,rx:c,ry:c}),G.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:g,style:o},r),f)};var hS=T.memo(dS);const hf=e=>({width:e.offsetWidth,height:e.offsetHeight}),ds=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),pf=(e={x:0,y:0},n)=>({x:ds(e.x,n[0][0],n[1][0]),y:ds(e.y,n[0][1],n[1][1])}),sp=(e,n,r)=>e<n?ds(Math.abs(e-n),1,50)/50:e>r?-ds(Math.abs(e-r),1,50)/50:0,ng=(e,n)=>{const r=sp(e.x,35,n.width-35)*20,o=sp(e.y,35,n.height-35)*20;return[r,o]},rg=e=>e.getRootNode?.()||window?.document,pS=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),gf=({x:e,y:n,width:r,height:o})=>({x:e,y:n,x2:e+r,y2:n+o}),gS=({x:e,y:n,x2:r,y2:o})=>({x:e,y:n,width:r-e,height:o-n}),ap=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),$l=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),o=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*o)},mS=e=>tr(e.width)&&tr(e.height)&&tr(e.x)&&tr(e.y),tr=e=>!isNaN(e)&&isFinite(e),At=Symbol.for("internals"),ig=["Enter"," ","Escape"],yS=(e,n)=>{},vS=e=>"nativeEvent"in e;function jl(e){const r=(vS(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(r?.nodeName)||r?.hasAttribute("contenteditable")||!!r?.closest(".nokey")}const og=e=>"clientX"in e,Ri=(e,n)=>{const r=og(e),o=r?e.clientX:e.touches?.[0].clientX,s=r?e.clientY:e.touches?.[0].clientY;return{x:o-(n?.left??0),y:s-(n?.top??0)}},$u=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,ps=({id:e,path:n,labelX:r,labelY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:x=20})=>G.createElement(G.Fragment,null,G.createElement("path",{id:e,style:p,d:n,fill:"none",className:"react-flow__edge-path",markerEnd:g,markerStart:m}),x&&G.createElement("path",{d:n,fill:"none",strokeOpacity:0,strokeWidth:x,className:"react-flow__edge-interaction"}),s&&tr(r)&&tr(o)?G.createElement(hS,{x:r,y:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h}):null);ps.displayName="BaseEdge";function ks(e,n,r){return r===void 0?r:o=>{const s=n().edges.find(u=>u.id===e);s&&r(o,{...s})}}function sg({sourceX:e,sourceY:n,targetX:r,targetY:o}){const s=Math.abs(r-e)/2,u=r<e?r+s:r-s,l=Math.abs(o-n)/2,c=o<n?o+l:o-l;return[u,c,s,l]}function ag({sourceX:e,sourceY:n,targetX:r,targetY:o,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c}){const f=e*.125+s*.375+l*.375+r*.125,h=n*.125+u*.375+c*.375+o*.125,p=Math.abs(f-e),g=Math.abs(h-n);return[f,h,p,g]}var _o;(function(e){e.Strict="strict",e.Loose="loose"})(_o||(_o={}));var mo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mo||(mo={}));var hs;(function(e){e.Partial="partial",e.Full="full"})(hs||(hs={}));var Ti;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ti||(Ti={}));var oa;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(oa||(oa={}));var xe;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(xe||(xe={}));function up({pos:e,x1:n,y1:r,x2:o,y2:s}){return e===xe.Left||e===xe.Right?[.5*(n+o),r]:[n,.5*(r+s)]}function ug({sourceX:e,sourceY:n,sourcePosition:r=xe.Bottom,targetX:o,targetY:s,targetPosition:u=xe.Top}){const[l,c]=up({pos:r,x1:e,y1:n,x2:o,y2:s}),[f,h]=up({pos:u,x1:o,y1:s,x2:e,y2:n}),[p,g,m,x]=ag({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:l,sourceControlY:c,targetControlX:f,targetControlY:h});return[`M${e},${n} C${l},${c} ${f},${h} ${o},${s}`,p,g,m,x]}const mf=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=xe.Bottom,targetPosition:u=xe.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:b,interactionWidth:_})=>{const[C,D,E]=ug({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:u});return G.createElement(ps,{path:C,labelX:D,labelY:E,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:b,interactionWidth:_})});mf.displayName="SimpleBezierEdge";const cp={[xe.Left]:{x:-1,y:0},[xe.Right]:{x:1,y:0},[xe.Top]:{x:0,y:-1},[xe.Bottom]:{x:0,y:1}},DS=({source:e,sourcePosition:n=xe.Bottom,target:r})=>n===xe.Left||n===xe.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},lp=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function _S({source:e,sourcePosition:n=xe.Bottom,target:r,targetPosition:o=xe.Top,center:s,offset:u}){const l=cp[n],c=cp[o],f={x:e.x+l.x*u,y:e.y+l.y*u},h={x:r.x+c.x*u,y:r.y+c.y*u},p=DS({source:f,sourcePosition:n,target:h}),g=p.x!==0?"x":"y",m=p[g];let x=[],b,_;const C={x:0,y:0},D={x:0,y:0},[E,R,N,P]=sg({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(l[g]*c[g]===-1){b=s.x??E,_=s.y??R;const Y=[{x:b,y:f.y},{x:b,y:h.y}],Q=[{x:f.x,y:_},{x:h.x,y:_}];l[g]===m?x=g==="x"?Y:Q:x=g==="x"?Q:Y}else{const Y=[{x:f.x,y:h.y}],Q=[{x:h.x,y:f.y}];if(g==="x"?x=l.x===m?Q:Y:x=l.y===m?Y:Q,n===o){const Z=Math.abs(e[g]-r[g]);if(Z<=u){const B=Math.min(u-1,u-Z);l[g]===m?C[g]=(f[g]>e[g]?-1:1)*B:D[g]=(h[g]>r[g]?-1:1)*B}}if(n!==o){const Z=g==="x"?"y":"x",B=l[g]===c[Z],q=f[Z]>h[Z],j=f[Z]<h[Z];(l[g]===1&&(!B&&q||B&&j)||l[g]!==1&&(!B&&j||B&&q))&&(x=g==="x"?Y:Q)}const $={x:f.x+C.x,y:f.y+C.y},X={x:h.x+D.x,y:h.y+D.y},te=Math.max(Math.abs($.x-x[0].x),Math.abs(X.x-x[0].x)),J=Math.max(Math.abs($.y-x[0].y),Math.abs(X.y-x[0].y));te>=J?(b=($.x+X.x)/2,_=x[0].y):(b=x[0].x,_=($.y+X.y)/2)}return[[e,{x:f.x+C.x,y:f.y+C.y},...x,{x:h.x+D.x,y:h.y+D.y},r],b,_,N,P]}function xS(e,n,r,o){const s=Math.min(lp(e,n)/2,lp(n,r)/2,o),{x:u,y:l}=n;if(e.x===u&&u===r.x||e.y===l&&l===r.y)return`L${u} ${l}`;if(e.y===l){const h=e.x<r.x?-1:1,p=e.y<r.y?1:-1;return`L ${u+s*h},${l}Q ${u},${l} ${u},${l+s*p}`}const c=e.x<r.x?1:-1,f=e.y<r.y?-1:1;return`L ${u},${l+s*f}Q ${u},${l} ${u+s*c},${l}`}function kl({sourceX:e,sourceY:n,sourcePosition:r=xe.Bottom,targetX:o,targetY:s,targetPosition:u=xe.Top,borderRadius:l=5,centerX:c,centerY:f,offset:h=20}){const[p,g,m,x,b]=_S({source:{x:e,y:n},sourcePosition:r,target:{x:o,y:s},targetPosition:u,center:{x:c,y:f},offset:h});return[p.reduce((C,D,E)=>{let R="";return E>0&&E<p.length-1?R=xS(p[E-1],D,p[E+1],l):R=`${E===0?"M":"L"}${D.x} ${D.y}`,C+=R,C},""),g,m,x,b]}const ec=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,sourcePosition:g=xe.Bottom,targetPosition:m=xe.Top,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:C})=>{const[D,E,R]=kl({sourceX:e,sourceY:n,sourcePosition:g,targetX:r,targetY:o,targetPosition:m,borderRadius:_?.borderRadius,offset:_?.offset});return G.createElement(ps,{path:D,labelX:E,labelY:R,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:x,markerStart:b,interactionWidth:C})});ec.displayName="SmoothStepEdge";const yf=T.memo(e=>G.createElement(ec,{...e,pathOptions:T.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));yf.displayName="StepEdge";function wS({sourceX:e,sourceY:n,targetX:r,targetY:o}){const[s,u,l,c]=sg({sourceX:e,sourceY:n,targetX:r,targetY:o});return[`M ${e},${n}L ${r},${o}`,s,u,l,c]}const vf=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:x})=>{const[b,_,C]=wS({sourceX:e,sourceY:n,targetX:r,targetY:o});return G.createElement(ps,{path:b,labelX:_,labelY:C,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:f,labelBgBorderRadius:h,style:p,markerEnd:g,markerStart:m,interactionWidth:x})});vf.displayName="StraightEdge";function su(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function fp({pos:e,x1:n,y1:r,x2:o,y2:s,c:u}){switch(e){case xe.Left:return[n-su(n-o,u),r];case xe.Right:return[n+su(o-n,u),r];case xe.Top:return[n,r-su(r-s,u)];case xe.Bottom:return[n,r+su(s-r,u)]}}function Df({sourceX:e,sourceY:n,sourcePosition:r=xe.Bottom,targetX:o,targetY:s,targetPosition:u=xe.Top,curvature:l=.25}){const[c,f]=fp({pos:r,x1:e,y1:n,x2:o,y2:s,c:l}),[h,p]=fp({pos:u,x1:o,y1:s,x2:e,y2:n,c:l}),[g,m,x,b]=ag({sourceX:e,sourceY:n,targetX:o,targetY:s,sourceControlX:c,sourceControlY:f,targetControlX:h,targetControlY:p});return[`M${e},${n} C${c},${f} ${h},${p} ${o},${s}`,g,m,x,b]}const ju=T.memo(({sourceX:e,sourceY:n,targetX:r,targetY:o,sourcePosition:s=xe.Bottom,targetPosition:u=xe.Top,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:b,pathOptions:_,interactionWidth:C})=>{const[D,E,R]=Df({sourceX:e,sourceY:n,sourcePosition:s,targetX:r,targetY:o,targetPosition:u,curvature:_?.curvature});return G.createElement(ps,{path:D,labelX:E,labelY:R,label:l,labelStyle:c,labelShowBg:f,labelBgStyle:h,labelBgPadding:p,labelBgBorderRadius:g,style:m,markerEnd:x,markerStart:b,interactionWidth:C})});ju.displayName="BezierEdge";const _f=T.createContext(null),bS=_f.Provider;_f.Consumer;const CS=()=>T.useContext(_f),ES=e=>"id"in e&&"source"in e&&"target"in e,cg=e=>"id"in e&&!("source"in e)&&!("target"in e),ku=(e,n,r)=>{if(!cg(e))return[];const o=r.filter(s=>s.source===e.id).map(s=>s.target);return n.filter(s=>o.includes(s.id))},AS=(e,n,r)=>{if(!cg(e))return[];const o=r.filter(s=>s.target===e.id).map(s=>s.source);return n.filter(s=>o.includes(s.id))},SS=({source:e,sourceHandle:n,target:r,targetHandle:o})=>`reactflow__edge-${e}${n||""}-${r}${o||""}`,Ll=(e,n)=>typeof e>"u"?"":typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,FS=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),NS=(e,n)=>{if(!e.source||!e.target)return n;let r;return ES(e)?r={...e}:r={...e,id:SS(e)},FS(r,n)?n:n.concat(r)},Hl=({x:e,y:n},[r,o,s],u,[l,c])=>{const f={x:(e-r)/s,y:(n-o)/s};return u?{x:l*Math.round(f.x/l),y:c*Math.round(f.y/c)}:f},lg=({x:e,y:n},[r,o,s])=>({x:e*s+r,y:n*s+o}),ss=(e,n=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(e.width??0)*n[0],o=(e.height??0)*n[1],s={x:e.position.x-r,y:e.position.y-o};return{...s,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-r,y:e.positionAbsolute.y-o}:s}},xf=(e,n=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((o,s)=>{const{x:u,y:l}=ss(s,n).positionAbsolute;return pS(o,gf({x:u,y:l,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return gS(r)},fg=(e,n,[r,o,s]=[0,0,1],u=!1,l=!1,c=[0,0])=>{const f={x:(n.x-r)/s,y:(n.y-o)/s,width:n.width/s,height:n.height/s},h=[];return e.forEach(p=>{const{width:g,height:m,selectable:x=!0,hidden:b=!1}=p;if(l&&!x||b)return!1;const{positionAbsolute:_}=ss(p,c),C={x:_.x,y:_.y,width:g||0,height:m||0},D=$l(f,C),E=typeof g>"u"||typeof m>"u"||g===null||m===null,R=u&&D>0,N=(g||0)*(m||0);(E||R||D>=N||p.dragging)&&h.push(p)}),h},dg=(e,n)=>{const r=e.map(o=>o.id);return n.filter(o=>r.includes(o.source)||r.includes(o.target))},hg=(e,n,r,o,s,u=.1)=>{const l=n/(e.width*(1+u)),c=r/(e.height*(1+u)),f=Math.min(l,c),h=ds(f,o,s),p=e.x+e.width/2,g=e.y+e.height/2,m=n/2-p*h,x=r/2-g*h;return{x:m,y:x,zoom:h}},po=(e,n=0)=>e.transition().duration(n);function dp(e,n,r,o){return(n[r]||[]).reduce((s,u)=>(`${e.id}-${u.id}-${r}`!==o&&s.push({id:u.id||null,type:r,nodeId:e.id,x:(e.positionAbsolute?.x??0)+u.x+u.width/2,y:(e.positionAbsolute?.y??0)+u.y+u.height/2}),s),[])}function TS(e,n,r,o,s,u){const{x:l,y:c}=Ri(e),h=n.elementsFromPoint(l,c).find(b=>b.classList.contains("react-flow__handle"));if(h){const b=h.getAttribute("data-nodeid");if(b){const _=wf(void 0,h),C=h.getAttribute("data-handleid"),D=u({nodeId:b,id:C,type:_});if(D){const E=s.find(R=>R.nodeId===b&&R.type===_&&R.id===C);return{handle:{id:C,type:_,nodeId:b,x:E?.x||r.x,y:E?.y||r.y},validHandleResult:D}}}}let p=[],g=1/0;if(s.forEach(b=>{const _=Math.sqrt((b.x-r.x)**2+(b.y-r.y)**2);if(_<=o){const C=u(b);_<=g&&(_<g?p=[{handle:b,validHandleResult:C}]:_===g&&p.push({handle:b,validHandleResult:C}),g=_)}}),!p.length)return{handle:null,validHandleResult:pg()};if(p.length===1)return p[0];const m=p.some(({validHandleResult:b})=>b.isValid),x=p.some(({handle:b})=>b.type==="target");return p.find(({handle:b,validHandleResult:_})=>x?b.type==="target":m?_.isValid:!0)||p[0]}const IS={source:null,target:null,sourceHandle:null,targetHandle:null},pg=()=>({handleDomNode:null,isValid:!1,connection:IS,endHandle:null});function gg(e,n,r,o,s,u,l){const c=s==="target",f=l.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),h={...pg(),handleDomNode:f};if(f){const p=wf(void 0,f),g=f.getAttribute("data-nodeid"),m=f.getAttribute("data-handleid"),x=f.classList.contains("connectable"),b=f.classList.contains("connectableend"),_={source:c?g:r,sourceHandle:c?m:o,target:c?r:g,targetHandle:c?o:m};h.connection=_,x&&b&&(n===_o.Strict?c&&p==="source"||!c&&p==="target":g!==r||m!==o)&&(h.endHandle={nodeId:g,handleId:m,type:p},h.isValid=u(_))}return h}function BS({nodes:e,nodeId:n,handleId:r,handleType:o}){return e.reduce((s,u)=>{if(u[At]){const{handleBounds:l}=u[At];let c=[],f=[];l&&(c=dp(u,l,"source",`${n}-${r}-${o}`),f=dp(u,l,"target",`${n}-${r}-${o}`)),s.push(...c,...f)}return s},[])}function wf(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function gl(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function RS(e,n){let r=null;return n?r="valid":e&&!n&&(r="invalid"),r}function mg({event:e,handleId:n,nodeId:r,onConnect:o,isTarget:s,getState:u,setState:l,isValidConnection:c,edgeUpdaterType:f,onReconnectEnd:h}){const p=rg(e.target),{connectionMode:g,domNode:m,autoPanOnConnect:x,connectionRadius:b,onConnectStart:_,panBy:C,getNodes:D,cancelConnection:E}=u();let R=0,N;const{x:P,y:H}=Ri(e),Y=p?.elementFromPoint(P,H),Q=wf(f,Y),$=m?.getBoundingClientRect();if(!$||!Q)return;let X,te=Ri(e,$),J=!1,Z=null,B=!1,q=null;const j=BS({nodes:D(),nodeId:r,handleId:n,handleType:Q}),W=()=>{if(!x)return;const[oe,se]=ng(te,$);C({x:oe,y:se}),R=requestAnimationFrame(W)};l({connectionPosition:te,connectionStatus:null,connectionNodeId:r,connectionHandleId:n,connectionHandleType:Q,connectionStartHandle:{nodeId:r,handleId:n,type:Q},connectionEndHandle:null}),_?.(e,{nodeId:r,handleId:n,handleType:Q});function ie(oe){const{transform:se}=u();te=Ri(oe,$);const{handle:le,validHandleResult:ue}=TS(oe,p,Hl(te,se,!1,[1,1]),b,j,ge=>gg(ge,g,r,n,s?"target":"source",c,p));if(N=le,J||(W(),J=!0),q=ue.handleDomNode,Z=ue.connection,B=ue.isValid,l({connectionPosition:N&&B?lg({x:N.x,y:N.y},se):te,connectionStatus:RS(!!N,B),connectionEndHandle:ue.endHandle}),!N&&!B&&!q)return gl(X);Z.source!==Z.target&&q&&(gl(X),X=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",B),q.classList.toggle("react-flow__handle-valid",B))}function V(oe){(N||q)&&Z&&B&&o?.(Z),u().onConnectEnd?.(oe),f&&h?.(oe),gl(X),E(),cancelAnimationFrame(R),J=!1,B=!1,Z=null,q=null,p.removeEventListener("mousemove",ie),p.removeEventListener("mouseup",V),p.removeEventListener("touchmove",ie),p.removeEventListener("touchend",V)}p.addEventListener("mousemove",ie),p.addEventListener("mouseup",V),p.addEventListener("touchmove",ie),p.addEventListener("touchend",V)}const hp=()=>!0,OS=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),MS=(e,n,r)=>o=>{const{connectionStartHandle:s,connectionEndHandle:u,connectionClickStartHandle:l}=o;return{connecting:s?.nodeId===e&&s?.handleId===n&&s?.type===r||u?.nodeId===e&&u?.handleId===n&&u?.type===r,clickConnecting:l?.nodeId===e&&l?.handleId===n&&l?.type===r}},yg=T.forwardRef(({type:e="source",position:n=xe.Top,isValidConnection:r,isConnectable:o=!0,isConnectableStart:s=!0,isConnectableEnd:u=!0,id:l,onConnect:c,children:f,className:h,onMouseDown:p,onTouchStart:g,...m},x)=>{const b=l||null,_=e==="target",C=Xt(),D=CS(),{connectOnClick:E,noPanClassName:R}=mt(OS,an),{connecting:N,clickConnecting:P}=mt(MS(D,b,e),an);D||C.getState().onError?.("010",ci.error010());const H=$=>{const{defaultEdgeOptions:X,onConnect:te,hasDefaultEdges:J}=C.getState(),Z={...X,...$};if(J){const{edges:B,setEdges:q}=C.getState();q(NS(Z,B))}te?.(Z),c?.(Z)},Y=$=>{if(!D)return;const X=og($);s&&(X&&$.button===0||!X)&&mg({event:$,handleId:b,nodeId:D,onConnect:H,isTarget:_,getState:C.getState,setState:C.setState,isValidConnection:r||C.getState().isValidConnection||hp}),X?p?.($):g?.($)},Q=$=>{const{onClickConnectStart:X,onClickConnectEnd:te,connectionClickStartHandle:J,connectionMode:Z,isValidConnection:B}=C.getState();if(!D||!J&&!s)return;if(!J){X?.($,{nodeId:D,handleId:b,handleType:e}),C.setState({connectionClickStartHandle:{nodeId:D,type:e,handleId:b}});return}const q=rg($.target),j=r||B||hp,{connection:W,isValid:ie}=gg({nodeId:D,id:b,type:e},Z,J.nodeId,J.handleId||null,J.type,j,q);ie&&H(W),te?.($),C.setState({connectionClickStartHandle:null})};return G.createElement("div",{"data-handleid":b,"data-nodeid":D,"data-handlepos":n,"data-id":`${D}-${b}-${e}`,className:vn(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",R,h,{source:!_,target:_,connectable:o,connectablestart:s,connectableend:u,connecting:P,connectionindicator:o&&(s&&!N||u&&N)}]),onMouseDown:Y,onTouchStart:Y,onClick:E?Q:void 0,ref:x,...m},f)});yg.displayName="Handle";var Mi=T.memo(yg);const vg=({data:e,isConnectable:n,targetPosition:r=xe.Top,sourcePosition:o=xe.Bottom})=>G.createElement(G.Fragment,null,G.createElement(Mi,{type:"target",position:r,isConnectable:n}),e?.label,G.createElement(Mi,{type:"source",position:o,isConnectable:n}));vg.displayName="DefaultNode";var ql=T.memo(vg);const Dg=({data:e,isConnectable:n,sourcePosition:r=xe.Bottom})=>G.createElement(G.Fragment,null,e?.label,G.createElement(Mi,{type:"source",position:r,isConnectable:n}));Dg.displayName="InputNode";var _g=T.memo(Dg);const xg=({data:e,isConnectable:n,targetPosition:r=xe.Top})=>G.createElement(G.Fragment,null,G.createElement(Mi,{type:"target",position:r,isConnectable:n}),e?.label);xg.displayName="OutputNode";var wg=T.memo(xg);const bf=()=>null;bf.displayName="GroupNode";const zS=e=>({selectedNodes:e.getNodes().filter(n=>n.selected),selectedEdges:e.edges.filter(n=>n.selected).map(n=>({...n}))}),au=e=>e.id;function PS(e,n){return an(e.selectedNodes.map(au),n.selectedNodes.map(au))&&an(e.selectedEdges.map(au),n.selectedEdges.map(au))}const bg=T.memo(({onSelectionChange:e})=>{const n=Xt(),{selectedNodes:r,selectedEdges:o}=mt(zS,PS);return T.useEffect(()=>{const s={nodes:r,edges:o};e?.(s),n.getState().onSelectionChange.forEach(u=>u(s))},[r,o,e]),null});bg.displayName="SelectionListener";const $S=e=>!!e.onSelectionChange;function jS({onSelectionChange:e}){const n=mt($S);return e||n?G.createElement(bg,{onSelectionChange:e}):null}const kS=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Zo(e,n){T.useEffect(()=>{typeof e<"u"&&n(e)},[e])}function ke(e,n,r){T.useEffect(()=>{typeof n<"u"&&r({[e]:n})},[n])}const LS=({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:s,onConnectStart:u,onConnectEnd:l,onClickConnectStart:c,onClickConnectEnd:f,nodesDraggable:h,nodesConnectable:p,nodesFocusable:g,edgesFocusable:m,edgesUpdatable:x,elevateNodesOnSelect:b,minZoom:_,maxZoom:C,nodeExtent:D,onNodesChange:E,onEdgesChange:R,elementsSelectable:N,connectionMode:P,snapGrid:H,snapToGrid:Y,translateExtent:Q,connectOnClick:$,defaultEdgeOptions:X,fitView:te,fitViewOptions:J,onNodesDelete:Z,onEdgesDelete:B,onNodeDrag:q,onNodeDragStart:j,onNodeDragStop:W,onSelectionDrag:ie,onSelectionDragStart:V,onSelectionDragStop:oe,noPanClassName:se,nodeOrigin:le,rfId:ue,autoPanOnConnect:ge,autoPanOnNodeDrag:de,onError:Fe,connectionRadius:Be,isValidConnection:me,nodeDragThreshold:be})=>{const{setNodes:Te,setEdges:xt,setDefaultNodesAndEdges:ht,setMinZoom:Pt,setMaxZoom:Je,setTranslateExtent:Qe,setNodeExtent:Jt,reset:$e}=mt(kS,an),_e=Xt();return T.useEffect(()=>{const $t=o?.map(It=>({...It,...X}));return ht(r,$t),()=>{$e()}},[]),ke("defaultEdgeOptions",X,_e.setState),ke("connectionMode",P,_e.setState),ke("onConnect",s,_e.setState),ke("onConnectStart",u,_e.setState),ke("onConnectEnd",l,_e.setState),ke("onClickConnectStart",c,_e.setState),ke("onClickConnectEnd",f,_e.setState),ke("nodesDraggable",h,_e.setState),ke("nodesConnectable",p,_e.setState),ke("nodesFocusable",g,_e.setState),ke("edgesFocusable",m,_e.setState),ke("edgesUpdatable",x,_e.setState),ke("elementsSelectable",N,_e.setState),ke("elevateNodesOnSelect",b,_e.setState),ke("snapToGrid",Y,_e.setState),ke("snapGrid",H,_e.setState),ke("onNodesChange",E,_e.setState),ke("onEdgesChange",R,_e.setState),ke("connectOnClick",$,_e.setState),ke("fitViewOnInit",te,_e.setState),ke("fitViewOnInitOptions",J,_e.setState),ke("onNodesDelete",Z,_e.setState),ke("onEdgesDelete",B,_e.setState),ke("onNodeDrag",q,_e.setState),ke("onNodeDragStart",j,_e.setState),ke("onNodeDragStop",W,_e.setState),ke("onSelectionDrag",ie,_e.setState),ke("onSelectionDragStart",V,_e.setState),ke("onSelectionDragStop",oe,_e.setState),ke("noPanClassName",se,_e.setState),ke("nodeOrigin",le,_e.setState),ke("rfId",ue,_e.setState),ke("autoPanOnConnect",ge,_e.setState),ke("autoPanOnNodeDrag",de,_e.setState),ke("onError",Fe,_e.setState),ke("connectionRadius",Be,_e.setState),ke("isValidConnection",me,_e.setState),ke("nodeDragThreshold",be,_e.setState),Zo(e,Te),Zo(n,xt),Zo(_,Pt),Zo(C,Je),Zo(Q,Qe),Zo(D,Jt),null},pp={display:"none"},HS={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Cg="react-flow__node-desc",Eg="react-flow__edge-desc",qS="react-flow__aria-live",GS=e=>e.ariaLiveMessage;function VS({rfId:e}){const n=mt(GS);return G.createElement("div",{id:`${qS}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:HS},n)}function US({rfId:e,disableKeyboardA11y:n}){return G.createElement(G.Fragment,null,G.createElement("div",{id:`${Cg}-${e}`,style:pp},"Press enter or space to select a node.",!n&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),G.createElement("div",{id:`${Eg}-${e}`,style:pp},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!n&&G.createElement(VS,{rfId:e}))}var sa=(e=null,n={actInsideInputWithModifier:!0})=>{const[r,o]=T.useState(!1),s=T.useRef(!1),u=T.useRef(new Set([])),[l,c]=T.useMemo(()=>{if(e!==null){const h=(Array.isArray(e)?e:[e]).filter(g=>typeof g=="string").map(g=>g.split("+")),p=h.reduce((g,m)=>g.concat(...m),[]);return[h,p]}return[[],[]]},[e]);return T.useEffect(()=>{const f=typeof document<"u"?document:null,h=n?.target||f;if(e!==null){const p=x=>{if(s.current=x.ctrlKey||x.metaKey||x.shiftKey,(!s.current||s.current&&!n.actInsideInputWithModifier)&&jl(x))return!1;const _=mp(x.code,c);u.current.add(x[_]),gp(l,u.current,!1)&&(x.preventDefault(),o(!0))},g=x=>{if((!s.current||s.current&&!n.actInsideInputWithModifier)&&jl(x))return!1;const _=mp(x.code,c);gp(l,u.current,!0)?(o(!1),u.current.clear()):u.current.delete(x[_]),x.key==="Meta"&&u.current.clear(),s.current=!1},m=()=>{u.current.clear(),o(!1)};return h?.addEventListener("keydown",p),h?.addEventListener("keyup",g),window.addEventListener("blur",m),()=>{h?.removeEventListener("keydown",p),h?.removeEventListener("keyup",g),window.removeEventListener("blur",m)}}},[e,o]),r};function gp(e,n,r){return e.filter(o=>r||o.length===n.size).some(o=>o.every(s=>n.has(s)))}function mp(e,n){return n.includes(e)?"code":"key"}function Ag(e,n,r,o){const s=e.parentNode||e.parentId;if(!s)return r;const u=n.get(s),l=ss(u,o);return Ag(u,n,{x:(r.x??0)+l.x,y:(r.y??0)+l.y,z:(u[At]?.z??0)>(r.z??0)?u[At]?.z??0:r.z??0},o)}function Sg(e,n,r){e.forEach(o=>{const s=o.parentNode||o.parentId;if(s&&!e.has(s))throw new Error(`Parent node ${s} not found`);if(s||r?.[o.id]){const{x:u,y:l,z:c}=Ag(o,e,{...o.position,z:o[At]?.z??0},n);o.positionAbsolute={x:u,y:l},o[At].z=c,r?.[o.id]&&(o[At].isParent=!0)}})}function ml(e,n,r,o){const s=new Map,u={},l=o?1e3:0;return e.forEach(c=>{const f=(tr(c.zIndex)?c.zIndex:0)+(c.selected?l:0),h=n.get(c.id),p={...c,positionAbsolute:{x:c.position.x,y:c.position.y}},g=c.parentNode||c.parentId;g&&(u[g]=!0);const m=h?.type&&h?.type!==c.type;Object.defineProperty(p,At,{enumerable:!1,value:{handleBounds:m?void 0:h?.[At]?.handleBounds,z:f}}),s.set(c.id,p)}),Sg(s,r,u),s}function Fg(e,n={}){const{getNodes:r,width:o,height:s,minZoom:u,maxZoom:l,d3Zoom:c,d3Selection:f,fitViewOnInitDone:h,fitViewOnInit:p,nodeOrigin:g}=e(),m=n.initial&&!h&&p;if(c&&f&&(m||!n.initial)){const b=r().filter(C=>{const D=n.includeHiddenNodes?C.width&&C.height:!C.hidden;return n.nodes?.length?D&&n.nodes.some(E=>E.id===C.id):D}),_=b.every(C=>C.width&&C.height);if(b.length>0&&_){const C=xf(b,g),{x:D,y:E,zoom:R}=hg(C,o,s,n.minZoom??u,n.maxZoom??l,n.padding??.1),N=Bi.translate(D,E).scale(R);return typeof n.duration=="number"&&n.duration>0?c.transform(po(f,n.duration),N):c.transform(f,N),!0}}return!1}function WS(e,n){return e.forEach(r=>{const o=n.get(r.id);o&&n.set(o.id,{...o,[At]:o[At],selected:r.selected})}),new Map(n)}function XS(e,n){return n.map(r=>{const o=e.find(s=>s.id===r.id);return o&&(r.selected=o.selected),r})}function uu({changedNodes:e,changedEdges:n,get:r,set:o}){const{nodeInternals:s,edges:u,onNodesChange:l,onEdgesChange:c,hasDefaultNodes:f,hasDefaultEdges:h}=r();e?.length&&(f&&o({nodeInternals:WS(e,s)}),l?.(e)),n?.length&&(h&&o({edges:XS(n,u)}),c?.(n))}const Ko=()=>{},YS={zoomIn:Ko,zoomOut:Ko,zoomTo:Ko,getZoom:()=>1,setViewport:Ko,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Ko,fitBounds:Ko,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},ZS=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),KS=()=>{const e=Xt(),{d3Zoom:n,d3Selection:r}=mt(ZS,an);return T.useMemo(()=>r&&n?{zoomIn:s=>n.scaleBy(po(r,s?.duration),1.2),zoomOut:s=>n.scaleBy(po(r,s?.duration),1/1.2),zoomTo:(s,u)=>n.scaleTo(po(r,u?.duration),s),getZoom:()=>e.getState().transform[2],setViewport:(s,u)=>{const[l,c,f]=e.getState().transform,h=Bi.translate(s.x??l,s.y??c).scale(s.zoom??f);n.transform(po(r,u?.duration),h)},getViewport:()=>{const[s,u,l]=e.getState().transform;return{x:s,y:u,zoom:l}},fitView:s=>Fg(e.getState,s),setCenter:(s,u,l)=>{const{width:c,height:f,maxZoom:h}=e.getState(),p=typeof l?.zoom<"u"?l.zoom:h,g=c/2-s*p,m=f/2-u*p,x=Bi.translate(g,m).scale(p);n.transform(po(r,l?.duration),x)},fitBounds:(s,u)=>{const{width:l,height:c,minZoom:f,maxZoom:h}=e.getState(),{x:p,y:g,zoom:m}=hg(s,l,c,f,h,u?.padding??.1),x=Bi.translate(p,g).scale(m);n.transform(po(r,u?.duration),x)},project:s=>{const{transform:u,snapToGrid:l,snapGrid:c}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Hl(s,u,l,c)},screenToFlowPosition:s=>{const{transform:u,snapToGrid:l,snapGrid:c,domNode:f}=e.getState();if(!f)return s;const{x:h,y:p}=f.getBoundingClientRect(),g={x:s.x-h,y:s.y-p};return Hl(g,u,l,c)},flowToScreenPosition:s=>{const{transform:u,domNode:l}=e.getState();if(!l)return s;const{x:c,y:f}=l.getBoundingClientRect(),h=lg(s,u);return{x:h.x+c,y:h.y+f}},viewportInitialized:!0}:YS,[n,r])};function Cf(){const e=KS(),n=Xt(),r=T.useCallback(()=>n.getState().getNodes().map(_=>({..._})),[]),o=T.useCallback(_=>n.getState().nodeInternals.get(_),[]),s=T.useCallback(()=>{const{edges:_=[]}=n.getState();return _.map(C=>({...C}))},[]),u=T.useCallback(_=>{const{edges:C=[]}=n.getState();return C.find(D=>D.id===_)},[]),l=T.useCallback(_=>{const{getNodes:C,setNodes:D,hasDefaultNodes:E,onNodesChange:R}=n.getState(),N=C(),P=typeof _=="function"?_(N):_;if(E)D(P);else if(R){const H=P.length===0?N.map(Y=>({type:"remove",id:Y.id})):P.map(Y=>({item:Y,type:"reset"}));R(H)}},[]),c=T.useCallback(_=>{const{edges:C=[],setEdges:D,hasDefaultEdges:E,onEdgesChange:R}=n.getState(),N=typeof _=="function"?_(C):_;if(E)D(N);else if(R){const P=N.length===0?C.map(H=>({type:"remove",id:H.id})):N.map(H=>({item:H,type:"reset"}));R(P)}},[]),f=T.useCallback(_=>{const C=Array.isArray(_)?_:[_],{getNodes:D,setNodes:E,hasDefaultNodes:R,onNodesChange:N}=n.getState();if(R){const H=[...D(),...C];E(H)}else if(N){const P=C.map(H=>({item:H,type:"add"}));N(P)}},[]),h=T.useCallback(_=>{const C=Array.isArray(_)?_:[_],{edges:D=[],setEdges:E,hasDefaultEdges:R,onEdgesChange:N}=n.getState();if(R)E([...D,...C]);else if(N){const P=C.map(H=>({item:H,type:"add"}));N(P)}},[]),p=T.useCallback(()=>{const{getNodes:_,edges:C=[],transform:D}=n.getState(),[E,R,N]=D;return{nodes:_().map(P=>({...P})),edges:C.map(P=>({...P})),viewport:{x:E,y:R,zoom:N}}},[]),g=T.useCallback(({nodes:_,edges:C})=>{const{nodeInternals:D,getNodes:E,edges:R,hasDefaultNodes:N,hasDefaultEdges:P,onNodesDelete:H,onEdgesDelete:Y,onNodesChange:Q,onEdgesChange:$}=n.getState(),X=(_||[]).map(q=>q.id),te=(C||[]).map(q=>q.id),J=E().reduce((q,j)=>{const W=j.parentNode||j.parentId,ie=!X.includes(j.id)&&W&&q.find(oe=>oe.id===W);return(typeof j.deletable=="boolean"?j.deletable:!0)&&(X.includes(j.id)||ie)&&q.push(j),q},[]),Z=R.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),B=Z.filter(q=>te.includes(q.id));if(J||B){const q=dg(J,Z),j=[...B,...q],W=j.reduce((ie,V)=>(ie.includes(V.id)||ie.push(V.id),ie),[]);if((P||N)&&(P&&n.setState({edges:R.filter(ie=>!W.includes(ie.id))}),N&&(J.forEach(ie=>{D.delete(ie.id)}),n.setState({nodeInternals:new Map(D)}))),W.length>0&&(Y?.(j),$&&$(W.map(ie=>({id:ie,type:"remove"})))),J.length>0&&(H?.(J),Q)){const ie=J.map(V=>({id:V.id,type:"remove"}));Q(ie)}}},[]),m=T.useCallback(_=>{const C=mS(_),D=C?null:n.getState().nodeInternals.get(_.id);return!C&&!D?[null,null,C]:[C?_:ap(D),D,C]},[]),x=T.useCallback((_,C=!0,D)=>{const[E,R,N]=m(_);return E?(D||n.getState().getNodes()).filter(P=>{if(!N&&(P.id===R.id||!P.positionAbsolute))return!1;const H=ap(P),Y=$l(H,E);return C&&Y>0||Y>=E.width*E.height}):[]},[]),b=T.useCallback((_,C,D=!0)=>{const[E]=m(_);if(!E)return!1;const R=$l(E,C);return D&&R>0||R>=E.width*E.height},[]);return T.useMemo(()=>({...e,getNodes:r,getNode:o,getEdges:s,getEdge:u,setNodes:l,setEdges:c,addNodes:f,addEdges:h,toObject:p,deleteElements:g,getIntersectingNodes:x,isNodeIntersecting:b}),[e,r,o,s,u,l,c,f,h,p,g,x,b])}const JS={actInsideInputWithModifier:!1};var QS=({deleteKeyCode:e,multiSelectionKeyCode:n})=>{const r=Xt(),{deleteElements:o}=Cf(),s=sa(e,JS),u=sa(n);T.useEffect(()=>{if(s){const{edges:l,getNodes:c}=r.getState(),f=c().filter(p=>p.selected),h=l.filter(p=>p.selected);o({nodes:f,edges:h}),r.setState({nodesSelectionActive:!1})}},[s]),T.useEffect(()=>{r.setState({multiSelectionActive:u})},[u])};function e3(e){const n=Xt();T.useEffect(()=>{let r;const o=()=>{if(!e.current)return;const s=hf(e.current);(s.height===0||s.width===0)&&n.getState().onError?.("004",ci.error004()),n.setState({width:s.width||500,height:s.height||500})};return o(),window.addEventListener("resize",o),e.current&&(r=new ResizeObserver(()=>o()),r.observe(e.current)),()=>{window.removeEventListener("resize",o),r&&e.current&&r.unobserve(e.current)}},[])}const Ef={position:"absolute",width:"100%",height:"100%",top:0,left:0},t3=(e,n)=>e.x!==n.x||e.y!==n.y||e.zoom!==n.k,cu=e=>({x:e.x,y:e.y,zoom:e.k}),Jo=(e,n)=>e.target.closest(`.${n}`),yp=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),vp=e=>{const n=e.ctrlKey&&$u()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n},n3=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),r3=({onMove:e,onMoveStart:n,onMoveEnd:r,onPaneContextMenu:o,zoomOnScroll:s=!0,zoomOnPinch:u=!0,panOnScroll:l=!1,panOnScrollSpeed:c=.5,panOnScrollMode:f=mo.Free,zoomOnDoubleClick:h=!0,elementsSelectable:p,panOnDrag:g=!0,defaultViewport:m,translateExtent:x,minZoom:b,maxZoom:_,zoomActivationKeyCode:C,preventScrolling:D=!0,children:E,noWheelClassName:R,noPanClassName:N})=>{const P=T.useRef(),H=Xt(),Y=T.useRef(!1),Q=T.useRef(!1),$=T.useRef(null),X=T.useRef({x:0,y:0,zoom:0}),{d3Zoom:te,d3Selection:J,d3ZoomHandler:Z,userSelectionActive:B}=mt(n3,an),q=sa(C),j=T.useRef(0),W=T.useRef(!1),ie=T.useRef();return e3($),T.useEffect(()=>{if($.current){const V=$.current.getBoundingClientRect(),oe=uS().scaleExtent([b,_]).translateExtent(x),se=hr($.current).call(oe),le=Bi.translate(m.x,m.y).scale(ds(m.zoom,b,_)),ue=[[0,0],[V.width,V.height]],ge=oe.constrain()(le,ue,x);oe.transform(se,ge),oe.wheelDelta(vp),H.setState({d3Zoom:oe,d3Selection:se,d3ZoomHandler:se.on("wheel.zoom"),transform:[ge.x,ge.y,ge.k],domNode:$.current.closest(".react-flow")})}},[]),T.useEffect(()=>{J&&te&&(l&&!q&&!B?J.on("wheel.zoom",V=>{if(Jo(V,R))return!1;V.preventDefault(),V.stopImmediatePropagation();const oe=J.property("__zoom").k||1;if(V.ctrlKey&&u){const me=Nr(V),be=vp(V),Te=oe*Math.pow(2,be);te.scaleTo(J,Te,me,V);return}const se=V.deltaMode===1?20:1;let le=f===mo.Vertical?0:V.deltaX*se,ue=f===mo.Horizontal?0:V.deltaY*se;!$u()&&V.shiftKey&&f!==mo.Vertical&&(le=V.deltaY*se,ue=0),te.translateBy(J,-(le/oe)*c,-(ue/oe)*c,{internal:!0});const ge=cu(J.property("__zoom")),{onViewportChangeStart:de,onViewportChange:Fe,onViewportChangeEnd:Be}=H.getState();clearTimeout(ie.current),W.current||(W.current=!0,n?.(V,ge),de?.(ge)),W.current&&(e?.(V,ge),Fe?.(ge),ie.current=setTimeout(()=>{r?.(V,ge),Be?.(ge),W.current=!1},150))},{passive:!1}):typeof Z<"u"&&J.on("wheel.zoom",function(V,oe){if(!D&&V.type==="wheel"&&!V.ctrlKey||Jo(V,R))return null;V.preventDefault(),Z.call(this,V,oe)},{passive:!1}))},[B,l,f,J,te,Z,q,u,D,R,n,e,r]),T.useEffect(()=>{te&&te.on("start",V=>{if(!V.sourceEvent||V.sourceEvent.internal)return null;j.current=V.sourceEvent?.button;const{onViewportChangeStart:oe}=H.getState(),se=cu(V.transform);Y.current=!0,X.current=se,V.sourceEvent?.type==="mousedown"&&H.setState({paneDragging:!0}),oe?.(se),n?.(V.sourceEvent,se)})},[te,n]),T.useEffect(()=>{te&&(B&&!Y.current?te.on("zoom",null):B||te.on("zoom",V=>{const{onViewportChange:oe}=H.getState();if(H.setState({transform:[V.transform.x,V.transform.y,V.transform.k]}),Q.current=!!(o&&yp(g,j.current??0)),(e||oe)&&!V.sourceEvent?.internal){const se=cu(V.transform);oe?.(se),e?.(V.sourceEvent,se)}}))},[B,te,e,g,o]),T.useEffect(()=>{te&&te.on("end",V=>{if(!V.sourceEvent||V.sourceEvent.internal)return null;const{onViewportChangeEnd:oe}=H.getState();if(Y.current=!1,H.setState({paneDragging:!1}),o&&yp(g,j.current??0)&&!Q.current&&o(V.sourceEvent),Q.current=!1,(r||oe)&&t3(X.current,V.transform)){const se=cu(V.transform);X.current=se,clearTimeout(P.current),P.current=setTimeout(()=>{oe?.(se),r?.(V.sourceEvent,se)},l?150:0)}})},[te,l,g,r,o]),T.useEffect(()=>{te&&te.filter(V=>{const oe=q||s,se=u&&V.ctrlKey;if((g===!0||Array.isArray(g)&&g.includes(1))&&V.button===1&&V.type==="mousedown"&&(Jo(V,"react-flow__node")||Jo(V,"react-flow__edge")))return!0;if(!g&&!oe&&!l&&!h&&!u||B||!h&&V.type==="dblclick"||Jo(V,R)&&V.type==="wheel"||Jo(V,N)&&(V.type!=="wheel"||l&&V.type==="wheel"&&!q)||!u&&V.ctrlKey&&V.type==="wheel"||!oe&&!l&&!se&&V.type==="wheel"||!g&&(V.type==="mousedown"||V.type==="touchstart")||Array.isArray(g)&&!g.includes(V.button)&&V.type==="mousedown")return!1;const le=Array.isArray(g)&&g.includes(V.button)||!V.button||V.button<=1;return(!V.ctrlKey||V.type==="wheel")&&le})},[B,te,s,u,l,h,g,p,q]),G.createElement("div",{className:"react-flow__renderer",ref:$,style:Ef},E)},i3=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function o3(){const{userSelectionActive:e,userSelectionRect:n}=mt(i3,an);return e&&n?G.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}function Dp(e,n){const r=n.parentNode||n.parentId,o=e.find(s=>s.id===r);if(o){const s=n.position.x+n.width-o.width,u=n.position.y+n.height-o.height;if(s>0||u>0||n.position.x<0||n.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,s>0&&(o.style.width+=s),u>0&&(o.style.height+=u),n.position.x<0){const l=Math.abs(n.position.x);o.position.x=o.position.x-l,o.style.width+=l,n.position.x=0}if(n.position.y<0){const l=Math.abs(n.position.y);o.position.y=o.position.y-l,o.style.height+=l,n.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function Ng(e,n){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const r=e.filter(o=>o.type==="add").map(o=>o.item);return n.reduce((o,s)=>{const u=e.filter(c=>c.id===s.id);if(u.length===0)return o.push(s),o;const l={...s};for(const c of u)if(c)switch(c.type){case"select":{l.selected=c.selected;break}case"position":{typeof c.position<"u"&&(l.position=c.position),typeof c.positionAbsolute<"u"&&(l.positionAbsolute=c.positionAbsolute),typeof c.dragging<"u"&&(l.dragging=c.dragging),l.expandParent&&Dp(o,l);break}case"dimensions":{typeof c.dimensions<"u"&&(l.width=c.dimensions.width,l.height=c.dimensions.height),typeof c.updateStyle<"u"&&(l.style={...l.style||{},...c.dimensions}),typeof c.resizing=="boolean"&&(l.resizing=c.resizing),l.expandParent&&Dp(o,l);break}case"remove":return o}return o.push(l),o},r)}function Tg(e,n){return Ng(e,n)}function s3(e,n){return Ng(e,n)}const Ni=(e,n)=>({id:e,type:"select",selected:n});function ts(e,n){return e.reduce((r,o)=>{const s=n.includes(o.id);return!o.selected&&s?(o.selected=!0,r.push(Ni(o.id,!0))):o.selected&&!s&&(o.selected=!1,r.push(Ni(o.id,!1))),r},[])}const yl=(e,n)=>r=>{r.target===n.current&&e?.(r)},a3=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Ig=T.memo(({isSelecting:e,selectionMode:n=hs.Full,panOnDrag:r,onSelectionStart:o,onSelectionEnd:s,onPaneClick:u,onPaneContextMenu:l,onPaneScroll:c,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:p,children:g})=>{const m=T.useRef(null),x=Xt(),b=T.useRef(0),_=T.useRef(0),C=T.useRef(),{userSelectionActive:D,elementsSelectable:E,dragging:R}=mt(a3,an),N=()=>{x.setState({userSelectionActive:!1,userSelectionRect:null}),b.current=0,_.current=0},P=Z=>{u?.(Z),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},H=Z=>{if(Array.isArray(r)&&r?.includes(2)){Z.preventDefault();return}l?.(Z)},Y=c?Z=>c(Z):void 0,Q=Z=>{const{resetSelectedElements:B,domNode:q}=x.getState();if(C.current=q?.getBoundingClientRect(),!E||!e||Z.button!==0||Z.target!==m.current||!C.current)return;const{x:j,y:W}=Ri(Z,C.current);B(),x.setState({userSelectionRect:{width:0,height:0,startX:j,startY:W,x:j,y:W}}),o?.(Z)},$=Z=>{const{userSelectionRect:B,nodeInternals:q,edges:j,transform:W,onNodesChange:ie,onEdgesChange:V,nodeOrigin:oe,getNodes:se}=x.getState();if(!e||!C.current||!B)return;x.setState({userSelectionActive:!0,nodesSelectionActive:!1});const le=Ri(Z,C.current),ue=B.startX??0,ge=B.startY??0,de={...B,x:le.x<ue?le.x:ue,y:le.y<ge?le.y:ge,width:Math.abs(le.x-ue),height:Math.abs(le.y-ge)},Fe=se(),Be=fg(q,de,W,n===hs.Partial,!0,oe),me=dg(Be,j).map(Te=>Te.id),be=Be.map(Te=>Te.id);if(b.current!==be.length){b.current=be.length;const Te=ts(Fe,be);Te.length&&ie?.(Te)}if(_.current!==me.length){_.current=me.length;const Te=ts(j,me);Te.length&&V?.(Te)}x.setState({userSelectionRect:de})},X=Z=>{if(Z.button!==0)return;const{userSelectionRect:B}=x.getState();!D&&B&&Z.target===m.current&&P?.(Z),x.setState({nodesSelectionActive:b.current>0}),N(),s?.(Z)},te=Z=>{D&&(x.setState({nodesSelectionActive:b.current>0}),s?.(Z)),N()},J=E&&(e||D);return G.createElement("div",{className:vn(["react-flow__pane",{dragging:R,selection:e}]),onClick:J?void 0:yl(P,m),onContextMenu:yl(H,m),onWheel:yl(Y,m),onMouseEnter:J?void 0:f,onMouseDown:J?Q:void 0,onMouseMove:J?$:h,onMouseUp:J?X:void 0,onMouseLeave:J?te:p,ref:m,style:Ef},g,G.createElement(o3,null))});Ig.displayName="Pane";function Bg(e,n){const r=e.parentNode||e.parentId;if(!r)return!1;const o=n.get(r);return o?o.selected?!0:Bg(o,n):!1}function _p(e,n,r){let o=e;do{if(o?.matches(n))return!0;if(o===r.current)return!1;o=o.parentElement}while(o);return!1}function u3(e,n,r,o){return Array.from(e.values()).filter(s=>(s.selected||s.id===o)&&(!s.parentNode||s.parentId||!Bg(s,e))&&(s.draggable||n&&typeof s.draggable>"u")).map(s=>({id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(s.positionAbsolute?.x??0),y:r.y-(s.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}))}function c3(e,n){return!n||n==="parent"?n:[n[0],[n[1][0]-(e.width||0),n[1][1]-(e.height||0)]]}function Rg(e,n,r,o,s=[0,0],u){const l=c3(e,e.extent||o);let c=l;const f=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(f&&e.width&&e.height){const g=r.get(f),{x:m,y:x}=ss(g,s).positionAbsolute;c=g&&tr(m)&&tr(x)&&tr(g.width)&&tr(g.height)?[[m+e.width*s[0],x+e.height*s[1]],[m+g.width-e.width+e.width*s[0],x+g.height-e.height+e.height*s[1]]]:c}else u?.("005",ci.error005()),c=l;else if(e.extent&&f&&e.extent!=="parent"){const g=r.get(f),{x:m,y:x}=ss(g,s).positionAbsolute;c=[[e.extent[0][0]+m,e.extent[0][1]+x],[e.extent[1][0]+m,e.extent[1][1]+x]]}let h={x:0,y:0};if(f){const g=r.get(f);h=ss(g,s).positionAbsolute}const p=c&&c!=="parent"?pf(n,c):n;return{position:{x:p.x-h.x,y:p.y-h.y},positionAbsolute:p}}function vl({nodeId:e,dragItems:n,nodeInternals:r}){const o=n.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[e?o.find(s=>s.id===e):o[0],o]}const xp=(e,n,r,o)=>{const s=n.querySelectorAll(e);if(!s||!s.length)return null;const u=Array.from(s),l=n.getBoundingClientRect(),c={x:l.width*o[0],y:l.height*o[1]};return u.map(f=>{const h=f.getBoundingClientRect();return{id:f.getAttribute("data-handleid"),position:f.getAttribute("data-handlepos"),x:(h.left-l.left-c.x)/r,y:(h.top-l.top-c.y)/r,...hf(f)}})};function Ls(e,n,r){return r===void 0?r:o=>{const s=n().nodeInternals.get(e);s&&r(o,{...s})}}function Gl({id:e,store:n,unselect:r=!1,nodeRef:o}){const{addSelectedNodes:s,unselectNodesAndEdges:u,multiSelectionActive:l,nodeInternals:c,onError:f}=n.getState(),h=c.get(e);if(!h){f?.("012",ci.error012(e));return}n.setState({nodesSelectionActive:!1}),h.selected?(r||h.selected&&l)&&(u({nodes:[h],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):s([e])}function l3(){const e=Xt();return T.useCallback(({sourceEvent:r})=>{const{transform:o,snapGrid:s,snapToGrid:u}=e.getState(),l=r.touches?r.touches[0].clientX:r.clientX,c=r.touches?r.touches[0].clientY:r.clientY,f={x:(l-o[0])/o[2],y:(c-o[1])/o[2]};return{xSnapped:u?s[0]*Math.round(f.x/s[0]):f.x,ySnapped:u?s[1]*Math.round(f.y/s[1]):f.y,...f}},[])}function Dl(e){return(n,r,o)=>e?.(n,o)}function Og({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:o,nodeId:s,isSelectable:u,selectNodesOnDrag:l}){const c=Xt(),[f,h]=T.useState(!1),p=T.useRef([]),g=T.useRef({x:null,y:null}),m=T.useRef(0),x=T.useRef(null),b=T.useRef({x:0,y:0}),_=T.useRef(null),C=T.useRef(!1),D=T.useRef(!1),E=T.useRef(!1),R=l3();return T.useEffect(()=>{if(e?.current){const N=hr(e.current),P=({x:Q,y:$})=>{const{nodeInternals:X,onNodeDrag:te,onSelectionDrag:J,updateNodePositions:Z,nodeExtent:B,snapGrid:q,snapToGrid:j,nodeOrigin:W,onError:ie}=c.getState();g.current={x:Q,y:$};let V=!1,oe={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&B){const le=xf(p.current,W);oe=gf(le)}if(p.current=p.current.map(le=>{const ue={x:Q-le.distance.x,y:$-le.distance.y};j&&(ue.x=q[0]*Math.round(ue.x/q[0]),ue.y=q[1]*Math.round(ue.y/q[1]));const ge=[[B[0][0],B[0][1]],[B[1][0],B[1][1]]];p.current.length>1&&B&&!le.extent&&(ge[0][0]=le.positionAbsolute.x-oe.x+B[0][0],ge[1][0]=le.positionAbsolute.x+(le.width??0)-oe.x2+B[1][0],ge[0][1]=le.positionAbsolute.y-oe.y+B[0][1],ge[1][1]=le.positionAbsolute.y+(le.height??0)-oe.y2+B[1][1]);const de=Rg(le,ue,X,ge,W,ie);return V=V||le.position.x!==de.position.x||le.position.y!==de.position.y,le.position=de.position,le.positionAbsolute=de.positionAbsolute,le}),!V)return;Z(p.current,!0,!0),h(!0);const se=s?te:Dl(J);if(se&&_.current){const[le,ue]=vl({nodeId:s,dragItems:p.current,nodeInternals:X});se(_.current,le,ue)}},H=()=>{if(!x.current)return;const[Q,$]=ng(b.current,x.current);if(Q!==0||$!==0){const{transform:X,panBy:te}=c.getState();g.current.x=(g.current.x??0)-Q/X[2],g.current.y=(g.current.y??0)-$/X[2],te({x:Q,y:$})&&P(g.current)}m.current=requestAnimationFrame(H)},Y=Q=>{const{nodeInternals:$,multiSelectionActive:X,nodesDraggable:te,unselectNodesAndEdges:J,onNodeDragStart:Z,onSelectionDragStart:B}=c.getState();D.current=!0;const q=s?Z:Dl(B);(!l||!u)&&!X&&s&&($.get(s)?.selected||J()),s&&u&&l&&Gl({id:s,store:c,nodeRef:e});const j=R(Q);if(g.current=j,p.current=u3($,te,j,s),q&&p.current){const[W,ie]=vl({nodeId:s,dragItems:p.current,nodeInternals:$});q(Q.sourceEvent,W,ie)}};if(n)N.on(".drag",null);else{const Q=vE().on("start",$=>{const{domNode:X,nodeDragThreshold:te}=c.getState();te===0&&Y($),E.current=!1;const J=R($);g.current=J,x.current=X?.getBoundingClientRect()||null,b.current=Ri($.sourceEvent,x.current)}).on("drag",$=>{const X=R($),{autoPanOnNodeDrag:te,nodeDragThreshold:J}=c.getState();if($.sourceEvent.type==="touchmove"&&$.sourceEvent.touches.length>1&&(E.current=!0),!E.current){if(!C.current&&D.current&&te&&(C.current=!0,H()),!D.current){const Z=X.xSnapped-(g?.current?.x??0),B=X.ySnapped-(g?.current?.y??0);Math.sqrt(Z*Z+B*B)>J&&Y($)}(g.current.x!==X.xSnapped||g.current.y!==X.ySnapped)&&p.current&&D.current&&(_.current=$.sourceEvent,b.current=Ri($.sourceEvent,x.current),P(X))}}).on("end",$=>{if(!(!D.current||E.current)&&(h(!1),C.current=!1,D.current=!1,cancelAnimationFrame(m.current),p.current)){const{updateNodePositions:X,nodeInternals:te,onNodeDragStop:J,onSelectionDragStop:Z}=c.getState(),B=s?J:Dl(Z);if(X(p.current,!1,!1),B){const[q,j]=vl({nodeId:s,dragItems:p.current,nodeInternals:te});B($.sourceEvent,q,j)}}}).filter($=>{const X=$.target;return!$.button&&(!r||!_p(X,`.${r}`,e))&&(!o||_p(X,o,e))});return N.call(Q),()=>{N.on(".drag",null)}}}},[e,n,r,o,u,c,s,l,R]),f}function Mg(){const e=Xt();return T.useCallback(r=>{const{nodeInternals:o,nodeExtent:s,updateNodePositions:u,getNodes:l,snapToGrid:c,snapGrid:f,onError:h,nodesDraggable:p}=e.getState(),g=l().filter(E=>E.selected&&(E.draggable||p&&typeof E.draggable>"u")),m=c?f[0]:5,x=c?f[1]:5,b=r.isShiftPressed?4:1,_=r.x*m*b,C=r.y*x*b,D=g.map(E=>{if(E.positionAbsolute){const R={x:E.positionAbsolute.x+_,y:E.positionAbsolute.y+C};c&&(R.x=f[0]*Math.round(R.x/f[0]),R.y=f[1]*Math.round(R.y/f[1]));const{positionAbsolute:N,position:P}=Rg(E,R,o,s,void 0,h);E.position=P,E.positionAbsolute=N}return E});u(D,!0,!1)},[])}const as={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Hs=e=>{const n=({id:r,type:o,data:s,xPos:u,yPos:l,xPosOrigin:c,yPosOrigin:f,selected:h,onClick:p,onMouseEnter:g,onMouseMove:m,onMouseLeave:x,onContextMenu:b,onDoubleClick:_,style:C,className:D,isDraggable:E,isSelectable:R,isConnectable:N,isFocusable:P,selectNodesOnDrag:H,sourcePosition:Y,targetPosition:Q,hidden:$,resizeObserver:X,dragHandle:te,zIndex:J,isParent:Z,noDragClassName:B,noPanClassName:q,initialized:j,disableKeyboardA11y:W,ariaLabel:ie,rfId:V,hasHandleBounds:oe})=>{const se=Xt(),le=T.useRef(null),ue=T.useRef(null),ge=T.useRef(Y),de=T.useRef(Q),Fe=T.useRef(o),Be=R||E||p||g||m||x,me=Mg(),be=Ls(r,se.getState,g),Te=Ls(r,se.getState,m),xt=Ls(r,se.getState,x),ht=Ls(r,se.getState,b),Pt=Ls(r,se.getState,_),Je=$e=>{const{nodeDragThreshold:_e}=se.getState();if(R&&(!H||!E||_e>0)&&Gl({id:r,store:se,nodeRef:le}),p){const $t=se.getState().nodeInternals.get(r);$t&&p($e,{...$t})}},Qe=$e=>{if(!jl($e)&&!W)if(ig.includes($e.key)&&R){const _e=$e.key==="Escape";Gl({id:r,store:se,unselect:_e,nodeRef:le})}else E&&h&&Object.prototype.hasOwnProperty.call(as,$e.key)&&(se.setState({ariaLiveMessage:`Moved selected node ${$e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~l}`}),me({x:as[$e.key].x,y:as[$e.key].y,isShiftPressed:$e.shiftKey}))};T.useEffect(()=>()=>{ue.current&&(X?.unobserve(ue.current),ue.current=null)},[]),T.useEffect(()=>{if(le.current&&!$){const $e=le.current;(!j||!oe||ue.current!==$e)&&(ue.current&&X?.unobserve(ue.current),X?.observe($e),ue.current=$e)}},[$,j,oe]),T.useEffect(()=>{const $e=Fe.current!==o,_e=ge.current!==Y,$t=de.current!==Q;le.current&&($e||_e||$t)&&($e&&(Fe.current=o),_e&&(ge.current=Y),$t&&(de.current=Q),se.getState().updateNodeDimensions([{id:r,nodeElement:le.current,forceUpdate:!0}]))},[r,o,Y,Q]);const Jt=Og({nodeRef:le,disabled:$||!E,noDragClassName:B,handleSelector:te,nodeId:r,isSelectable:R,selectNodesOnDrag:H});return $?null:G.createElement("div",{className:vn(["react-flow__node",`react-flow__node-${o}`,{[q]:E},D,{selected:h,selectable:R,parent:Z,dragging:Jt}]),ref:le,style:{zIndex:J,transform:`translate(${c}px,${f}px)`,pointerEvents:Be?"all":"none",visibility:j?"visible":"hidden",...C},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:be,onMouseMove:Te,onMouseLeave:xt,onContextMenu:ht,onClick:Je,onDoubleClick:Pt,onKeyDown:P?Qe:void 0,tabIndex:P?0:void 0,role:P?"button":void 0,"aria-describedby":W?void 0:`${Cg}-${V}`,"aria-label":ie},G.createElement(bS,{value:r},G.createElement(e,{id:r,data:s,type:o,xPos:u,yPos:l,selected:h,isConnectable:N,sourcePosition:Y,targetPosition:Q,dragging:Jt,dragHandle:te,zIndex:J})))};return n.displayName="NodeWrapper",T.memo(n)};const f3=e=>{const n=e.getNodes().filter(r=>r.selected);return{...xf(n,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function d3({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const o=Xt(),{width:s,height:u,x:l,y:c,transformString:f,userSelectionActive:h}=mt(f3,an),p=Mg(),g=T.useRef(null);if(T.useEffect(()=>{r||g.current?.focus({preventScroll:!0})},[r]),Og({nodeRef:g}),h||!s||!u)return null;const m=e?b=>{const _=o.getState().getNodes().filter(C=>C.selected);e(b,_)}:void 0,x=b=>{Object.prototype.hasOwnProperty.call(as,b.key)&&p({x:as[b.key].x,y:as[b.key].y,isShiftPressed:b.shiftKey})};return G.createElement("div",{className:vn(["react-flow__nodesselection","react-flow__container",n]),style:{transform:f}},G.createElement("div",{ref:g,className:"react-flow__nodesselection-rect",onContextMenu:m,tabIndex:r?void 0:-1,onKeyDown:r?void 0:x,style:{width:s,height:u,top:c,left:l}}))}var h3=T.memo(d3);const p3=e=>e.nodesSelectionActive,zg=({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:l,deleteKeyCode:c,onMove:f,onMoveStart:h,onMoveEnd:p,selectionKeyCode:g,selectionOnDrag:m,selectionMode:x,onSelectionStart:b,onSelectionEnd:_,multiSelectionKeyCode:C,panActivationKeyCode:D,zoomActivationKeyCode:E,elementsSelectable:R,zoomOnScroll:N,zoomOnPinch:P,panOnScroll:H,panOnScrollSpeed:Y,panOnScrollMode:Q,zoomOnDoubleClick:$,panOnDrag:X,defaultViewport:te,translateExtent:J,minZoom:Z,maxZoom:B,preventScrolling:q,onSelectionContextMenu:j,noWheelClassName:W,noPanClassName:ie,disableKeyboardA11y:V})=>{const oe=mt(p3),se=sa(g),le=sa(D),ue=le||X,ge=le||H,de=se||m&&ue!==!0;return QS({deleteKeyCode:c,multiSelectionKeyCode:C}),G.createElement(r3,{onMove:f,onMoveStart:h,onMoveEnd:p,onPaneContextMenu:u,elementsSelectable:R,zoomOnScroll:N,zoomOnPinch:P,panOnScroll:ge,panOnScrollSpeed:Y,panOnScrollMode:Q,zoomOnDoubleClick:$,panOnDrag:!se&&ue,defaultViewport:te,translateExtent:J,minZoom:Z,maxZoom:B,zoomActivationKeyCode:E,preventScrolling:q,noWheelClassName:W,noPanClassName:ie},G.createElement(Ig,{onSelectionStart:b,onSelectionEnd:_,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:o,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:l,panOnDrag:ue,isSelecting:!!de,selectionMode:x},e,oe&&G.createElement(h3,{onSelectionContextMenu:j,noPanClassName:ie,disableKeyboardA11y:V})))};zg.displayName="FlowRenderer";var g3=T.memo(zg);function m3(e){return mt(T.useCallback(r=>e?fg(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[e]))}function y3(e){const n={input:Hs(e.input||_g),default:Hs(e.default||ql),output:Hs(e.output||wg),group:Hs(e.group||bf)},r={},o=Object.keys(e).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,u)=>(s[u]=Hs(e[u]||ql),s),r);return{...n,...o}}const v3=({x:e,y:n,width:r,height:o,origin:s})=>!r||!o?{x:e,y:n}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:e,y:n}:{x:e-r*s[0],y:n-o*s[1]},D3=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Pg=e=>{const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:o,elementsSelectable:s,updateNodeDimensions:u,onError:l}=mt(D3,an),c=m3(e.onlyRenderVisibleElements),f=T.useRef(),h=T.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const p=new ResizeObserver(g=>{const m=g.map(x=>({id:x.target.getAttribute("data-id"),nodeElement:x.target,forceUpdate:!0}));u(m)});return f.current=p,p},[]);return T.useEffect(()=>()=>{f?.current?.disconnect()},[]),G.createElement("div",{className:"react-flow__nodes",style:Ef},c.map(p=>{let g=p.type||"default";e.nodeTypes[g]||(l?.("003",ci.error003(g)),g="default");const m=e.nodeTypes[g]||e.nodeTypes.default,x=!!(p.draggable||n&&typeof p.draggable>"u"),b=!!(p.selectable||s&&typeof p.selectable>"u"),_=!!(p.connectable||r&&typeof p.connectable>"u"),C=!!(p.focusable||o&&typeof p.focusable>"u"),D=e.nodeExtent?pf(p.positionAbsolute,e.nodeExtent):p.positionAbsolute,E=D?.x??0,R=D?.y??0,N=v3({x:E,y:R,width:p.width??0,height:p.height??0,origin:e.nodeOrigin});return G.createElement(m,{key:p.id,id:p.id,className:p.className,style:p.style,type:g,data:p.data,sourcePosition:p.sourcePosition||xe.Bottom,targetPosition:p.targetPosition||xe.Top,hidden:p.hidden,xPos:E,yPos:R,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!p.selected,isDraggable:x,isSelectable:b,isConnectable:_,isFocusable:C,resizeObserver:h,dragHandle:p.dragHandle,zIndex:p[At]?.z??0,isParent:!!p[At]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!p.width&&!!p.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!p[At]?.handleBounds})}))};Pg.displayName="NodeRenderer";var _3=T.memo(Pg);const x3=(e,n,r)=>r===xe.Left?e-n:r===xe.Right?e+n:e,w3=(e,n,r)=>r===xe.Top?e-n:r===xe.Bottom?e+n:e,wp="react-flow__edgeupdater",bp=({position:e,centerX:n,centerY:r,radius:o=10,onMouseDown:s,onMouseEnter:u,onMouseOut:l,type:c})=>G.createElement("circle",{onMouseDown:s,onMouseEnter:u,onMouseOut:l,className:vn([wp,`${wp}-${c}`]),cx:x3(n,o,e),cy:w3(r,o,e),r:o,stroke:"transparent",fill:"transparent"}),b3=()=>!0;var Qo=e=>{const n=({id:r,className:o,type:s,data:u,onClick:l,onEdgeDoubleClick:c,selected:f,animated:h,label:p,labelStyle:g,labelShowBg:m,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:_,style:C,source:D,target:E,sourceX:R,sourceY:N,targetX:P,targetY:H,sourcePosition:Y,targetPosition:Q,elementsSelectable:$,hidden:X,sourceHandleId:te,targetHandleId:J,onContextMenu:Z,onMouseEnter:B,onMouseMove:q,onMouseLeave:j,reconnectRadius:W,onReconnect:ie,onReconnectStart:V,onReconnectEnd:oe,markerEnd:se,markerStart:le,rfId:ue,ariaLabel:ge,isFocusable:de,isReconnectable:Fe,pathOptions:Be,interactionWidth:me,disableKeyboardA11y:be})=>{const Te=T.useRef(null),[xt,ht]=T.useState(!1),[Pt,Je]=T.useState(!1),Qe=Xt(),Jt=T.useMemo(()=>`url('#${Ll(le,ue)}')`,[le,ue]),$e=T.useMemo(()=>`url('#${Ll(se,ue)}')`,[se,ue]);if(X)return null;const _e=at=>{const{edges:Rt,addSelectedEdges:un,unselectNodesAndEdges:tn,multiSelectionActive:Dt}=Qe.getState(),Ct=Rt.find(nn=>nn.id===r);Ct&&($&&(Qe.setState({nodesSelectionActive:!1}),Ct.selected&&Dt?(tn({nodes:[],edges:[Ct]}),Te.current?.blur()):un([r])),l&&l(at,Ct))},$t=ks(r,Qe.getState,c),It=ks(r,Qe.getState,Z),yt=ks(r,Qe.getState,B),jt=ks(r,Qe.getState,q),wt=ks(r,Qe.getState,j),Qt=(at,Rt)=>{if(at.button!==0)return;const{edges:un,isValidConnection:tn}=Qe.getState(),Dt=Rt?E:D,Ct=(Rt?J:te)||null,nn=Rt?"target":"source",_r=tn||b3,cn=Rt,Bn=un.find(St=>St.id===r);Je(!0),V?.(at,Bn,nn);const Dn=St=>{Je(!1),oe?.(St,Bn,nn)};mg({event:at,handleId:Ct,nodeId:Dt,onConnect:St=>ie?.(Bn,St),isTarget:cn,getState:Qe.getState,setState:Qe.setState,isValidConnection:_r,edgeUpdaterType:nn,onReconnectEnd:Dn})},Yt=at=>Qt(at,!0),In=at=>Qt(at,!1),Bt=()=>ht(!0),bt=()=>ht(!1),en=!$&&!l,vt=at=>{if(!be&&ig.includes(at.key)&&$){const{unselectNodesAndEdges:Rt,addSelectedEdges:un,edges:tn}=Qe.getState();at.key==="Escape"?(Te.current?.blur(),Rt({edges:[tn.find(Ct=>Ct.id===r)]})):un([r])}};return G.createElement("g",{className:vn(["react-flow__edge",`react-flow__edge-${s}`,o,{selected:f,animated:h,inactive:en,updating:xt}]),onClick:_e,onDoubleClick:$t,onContextMenu:It,onMouseEnter:yt,onMouseMove:jt,onMouseLeave:wt,onKeyDown:de?vt:void 0,tabIndex:de?0:void 0,role:de?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":ge===null?void 0:ge||`Edge from ${D} to ${E}`,"aria-describedby":de?`${Eg}-${ue}`:void 0,ref:Te},!Pt&&G.createElement(e,{id:r,source:D,target:E,selected:f,animated:h,label:p,labelStyle:g,labelShowBg:m,labelBgStyle:x,labelBgPadding:b,labelBgBorderRadius:_,data:u,style:C,sourceX:R,sourceY:N,targetX:P,targetY:H,sourcePosition:Y,targetPosition:Q,sourceHandleId:te,targetHandleId:J,markerStart:Jt,markerEnd:$e,pathOptions:Be,interactionWidth:me}),Fe&&G.createElement(G.Fragment,null,(Fe==="source"||Fe===!0)&&G.createElement(bp,{position:Y,centerX:R,centerY:N,radius:W,onMouseDown:Yt,onMouseEnter:Bt,onMouseOut:bt,type:"source"}),(Fe==="target"||Fe===!0)&&G.createElement(bp,{position:Q,centerX:P,centerY:H,radius:W,onMouseDown:In,onMouseEnter:Bt,onMouseOut:bt,type:"target"})))};return n.displayName="EdgeWrapper",T.memo(n)};function C3(e){const n={default:Qo(e.default||ju),straight:Qo(e.bezier||vf),step:Qo(e.step||yf),smoothstep:Qo(e.step||ec),simplebezier:Qo(e.simplebezier||mf)},r={},o=Object.keys(e).filter(s=>!["default","bezier"].includes(s)).reduce((s,u)=>(s[u]=Qo(e[u]||ju),s),r);return{...n,...o}}function Cp(e,n,r=null){const o=(r?.x||0)+n.x,s=(r?.y||0)+n.y,u=r?.width||n.width,l=r?.height||n.height;switch(e){case xe.Top:return{x:o+u/2,y:s};case xe.Right:return{x:o+u,y:s+l/2};case xe.Bottom:return{x:o+u/2,y:s+l};case xe.Left:return{x:o,y:s+l/2}}}function Ep(e,n){return e?e.length===1||!n?e[0]:n&&e.find(r=>r.id===n)||null:null}const E3=(e,n,r,o,s,u)=>{const l=Cp(r,e,n),c=Cp(u,o,s);return{sourceX:l.x,sourceY:l.y,targetX:c.x,targetY:c.y}};function A3({sourcePos:e,targetPos:n,sourceWidth:r,sourceHeight:o,targetWidth:s,targetHeight:u,width:l,height:c,transform:f}){const h={x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x+r,n.x+s),y2:Math.max(e.y+o,n.y+u)};h.x===h.x2&&(h.x2+=1),h.y===h.y2&&(h.y2+=1);const p=gf({x:(0-f[0])/f[2],y:(0-f[1])/f[2],width:l/f[2],height:c/f[2]}),g=Math.max(0,Math.min(p.x2,h.x2)-Math.max(p.x,h.x)),m=Math.max(0,Math.min(p.y2,h.y2)-Math.max(p.y,h.y));return Math.ceil(g*m)>0}function Ap(e){const n=e?.[At]?.handleBounds||null,r=n&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},n,!!r]}const S3=[{level:0,isMaxLevel:!0,edges:[]}];function F3(e,n,r=!1){let o=-1;const s=e.reduce((l,c)=>{const f=tr(c.zIndex);let h=f?c.zIndex:0;if(r){const p=n.get(c.target),g=n.get(c.source),m=c.selected||p?.selected||g?.selected,x=Math.max(g?.[At]?.z||0,p?.[At]?.z||0,1e3);h=(f?c.zIndex:0)+(m?x:0)}return l[h]?l[h].push(c):l[h]=[c],o=h>o?h:o,l},{}),u=Object.entries(s).map(([l,c])=>{const f=+l;return{edges:c,level:f,isMaxLevel:f===o}});return u.length===0?S3:u}function N3(e,n,r){const o=mt(T.useCallback(s=>e?s.edges.filter(u=>{const l=n.get(u.source),c=n.get(u.target);return l?.width&&l?.height&&c?.width&&c?.height&&A3({sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:c.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:c.width,targetHeight:c.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[e,n]));return F3(o,n,r)}const T3=({color:e="none",strokeWidth:n=1})=>G.createElement("polyline",{style:{stroke:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),I3=({color:e="none",strokeWidth:n=1})=>G.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:n},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Sp={[oa.Arrow]:T3,[oa.ArrowClosed]:I3};function B3(e){const n=Xt();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(Sp,e)?Sp[e]:(n.getState().onError?.("009",ci.error009(e)),null),[e])}const R3=({id:e,type:n,color:r,width:o=12.5,height:s=12.5,markerUnits:u="strokeWidth",strokeWidth:l,orient:c="auto-start-reverse"})=>{const f=B3(n);return f?G.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:c,refX:"0",refY:"0"},G.createElement(f,{color:r,strokeWidth:l})):null},O3=({defaultColor:e,rfId:n})=>r=>{const o=[];return r.edges.reduce((s,u)=>([u.markerStart,u.markerEnd].forEach(l=>{if(l&&typeof l=="object"){const c=Ll(l,n);o.includes(c)||(s.push({id:c,color:l.color||e,...l}),o.push(c))}}),s),[]).sort((s,u)=>s.id.localeCompare(u.id))},$g=({defaultColor:e,rfId:n})=>{const r=mt(T.useCallback(O3({defaultColor:e,rfId:n}),[e,n]),(o,s)=>!(o.length!==s.length||o.some((u,l)=>u.id!==s[l].id)));return G.createElement("defs",null,r.map(o=>G.createElement(R3,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};$g.displayName="MarkerDefinitions";var M3=T.memo($g);const z3=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),jg=({defaultMarkerColor:e,onlyRenderVisibleElements:n,elevateEdgesOnSelect:r,rfId:o,edgeTypes:s,noPanClassName:u,onEdgeContextMenu:l,onEdgeMouseEnter:c,onEdgeMouseMove:f,onEdgeMouseLeave:h,onEdgeClick:p,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:x,onReconnectEnd:b,reconnectRadius:_,children:C,disableKeyboardA11y:D})=>{const{edgesFocusable:E,edgesUpdatable:R,elementsSelectable:N,width:P,height:H,connectionMode:Y,nodeInternals:Q,onError:$}=mt(z3,an),X=N3(n,Q,r);return P?G.createElement(G.Fragment,null,X.map(({level:te,edges:J,isMaxLevel:Z})=>G.createElement("svg",{key:te,style:{zIndex:te},width:P,height:H,className:"react-flow__edges react-flow__container"},Z&&G.createElement(M3,{defaultColor:e,rfId:o}),G.createElement("g",null,J.map(B=>{const[q,j,W]=Ap(Q.get(B.source)),[ie,V,oe]=Ap(Q.get(B.target));if(!W||!oe)return null;let se=B.type||"default";s[se]||($?.("011",ci.error011(se)),se="default");const le=s[se]||s.default,ue=Y===_o.Strict?V.target:(V.target??[]).concat(V.source??[]),ge=Ep(j.source,B.sourceHandle),de=Ep(ue,B.targetHandle),Fe=ge?.position||xe.Bottom,Be=de?.position||xe.Top,me=!!(B.focusable||E&&typeof B.focusable>"u"),be=B.reconnectable||B.updatable,Te=typeof m<"u"&&(be||R&&typeof be>"u");if(!ge||!de)return $?.("008",ci.error008(ge,B)),null;const{sourceX:xt,sourceY:ht,targetX:Pt,targetY:Je}=E3(q,ge,Fe,ie,de,Be);return G.createElement(le,{key:B.id,id:B.id,className:vn([B.className,u]),type:se,data:B.data,selected:!!B.selected,animated:!!B.animated,hidden:!!B.hidden,label:B.label,labelStyle:B.labelStyle,labelShowBg:B.labelShowBg,labelBgStyle:B.labelBgStyle,labelBgPadding:B.labelBgPadding,labelBgBorderRadius:B.labelBgBorderRadius,style:B.style,source:B.source,target:B.target,sourceHandleId:B.sourceHandle,targetHandleId:B.targetHandle,markerEnd:B.markerEnd,markerStart:B.markerStart,sourceX:xt,sourceY:ht,targetX:Pt,targetY:Je,sourcePosition:Fe,targetPosition:Be,elementsSelectable:N,onContextMenu:l,onMouseEnter:c,onMouseMove:f,onMouseLeave:h,onClick:p,onEdgeDoubleClick:g,onReconnect:m,onReconnectStart:x,onReconnectEnd:b,reconnectRadius:_,rfId:o,ariaLabel:B.ariaLabel,isFocusable:me,isReconnectable:Te,pathOptions:"pathOptions"in B?B.pathOptions:void 0,interactionWidth:B.interactionWidth,disableKeyboardA11y:D})})))),C):null};jg.displayName="EdgeRenderer";var P3=T.memo(jg);const $3=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function j3({children:e}){const n=mt($3);return G.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:n}},e)}function k3(e){const n=Cf(),r=T.useRef(!1);T.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const L3={[xe.Left]:xe.Right,[xe.Right]:xe.Left,[xe.Top]:xe.Bottom,[xe.Bottom]:xe.Top},kg=({nodeId:e,handleType:n,style:r,type:o=Ti.Bezier,CustomComponent:s,connectionStatus:u})=>{const{fromNode:l,handleId:c,toX:f,toY:h,connectionMode:p}=mt(T.useCallback(H=>({fromNode:H.nodeInternals.get(e),handleId:H.connectionHandleId,toX:(H.connectionPosition.x-H.transform[0])/H.transform[2],toY:(H.connectionPosition.y-H.transform[1])/H.transform[2],connectionMode:H.connectionMode}),[e]),an),g=l?.[At]?.handleBounds;let m=g?.[n];if(p===_o.Loose&&(m=m||g?.[n==="source"?"target":"source"]),!l||!m)return null;const x=c?m.find(H=>H.id===c):m[0],b=x?x.x+x.width/2:(l.width??0)/2,_=x?x.y+x.height/2:l.height??0,C=(l.positionAbsolute?.x??0)+b,D=(l.positionAbsolute?.y??0)+_,E=x?.position,R=E?L3[E]:null;if(!E||!R)return null;if(s)return G.createElement(s,{connectionLineType:o,connectionLineStyle:r,fromNode:l,fromHandle:x,fromX:C,fromY:D,toX:f,toY:h,fromPosition:E,toPosition:R,connectionStatus:u});let N="";const P={sourceX:C,sourceY:D,sourcePosition:E,targetX:f,targetY:h,targetPosition:R};return o===Ti.Bezier?[N]=Df(P):o===Ti.Step?[N]=kl({...P,borderRadius:0}):o===Ti.SmoothStep?[N]=kl(P):o===Ti.SimpleBezier?[N]=ug(P):N=`M${C},${D} ${f},${h}`,G.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:r})};kg.displayName="ConnectionLine";const H3=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function q3({containerStyle:e,style:n,type:r,component:o}){const{nodeId:s,handleType:u,nodesConnectable:l,width:c,height:f,connectionStatus:h}=mt(H3,an);return!(s&&u&&c&&l)?null:G.createElement("svg",{style:e,width:c,height:f,className:"react-flow__edges react-flow__connectionline react-flow__container"},G.createElement("g",{className:vn(["react-flow__connection",h])},G.createElement(kg,{nodeId:s,handleType:u,style:n,type:r,CustomComponent:o,connectionStatus:h})))}function Fp(e,n){return T.useRef(null),Xt(),T.useMemo(()=>n(e),[e])}const Lg=({nodeTypes:e,edgeTypes:n,onMove:r,onMoveStart:o,onMoveEnd:s,onInit:u,onNodeClick:l,onEdgeClick:c,onNodeDoubleClick:f,onEdgeDoubleClick:h,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:x,onSelectionContextMenu:b,onSelectionStart:_,onSelectionEnd:C,connectionLineType:D,connectionLineStyle:E,connectionLineComponent:R,connectionLineContainerStyle:N,selectionKeyCode:P,selectionOnDrag:H,selectionMode:Y,multiSelectionKeyCode:Q,panActivationKeyCode:$,zoomActivationKeyCode:X,deleteKeyCode:te,onlyRenderVisibleElements:J,elementsSelectable:Z,selectNodesOnDrag:B,defaultViewport:q,translateExtent:j,minZoom:W,maxZoom:ie,preventScrolling:V,defaultMarkerColor:oe,zoomOnScroll:se,zoomOnPinch:le,panOnScroll:ue,panOnScrollSpeed:ge,panOnScrollMode:de,zoomOnDoubleClick:Fe,panOnDrag:Be,onPaneClick:me,onPaneMouseEnter:be,onPaneMouseMove:Te,onPaneMouseLeave:xt,onPaneScroll:ht,onPaneContextMenu:Pt,onEdgeContextMenu:Je,onEdgeMouseEnter:Qe,onEdgeMouseMove:Jt,onEdgeMouseLeave:$e,onReconnect:_e,onReconnectStart:$t,onReconnectEnd:It,reconnectRadius:yt,noDragClassName:jt,noWheelClassName:wt,noPanClassName:Qt,elevateEdgesOnSelect:Yt,disableKeyboardA11y:In,nodeOrigin:Bt,nodeExtent:bt,rfId:en})=>{const vt=Fp(e,y3),at=Fp(n,C3);return k3(u),G.createElement(g3,{onPaneClick:me,onPaneMouseEnter:be,onPaneMouseMove:Te,onPaneMouseLeave:xt,onPaneContextMenu:Pt,onPaneScroll:ht,deleteKeyCode:te,selectionKeyCode:P,selectionOnDrag:H,selectionMode:Y,onSelectionStart:_,onSelectionEnd:C,multiSelectionKeyCode:Q,panActivationKeyCode:$,zoomActivationKeyCode:X,elementsSelectable:Z,onMove:r,onMoveStart:o,onMoveEnd:s,zoomOnScroll:se,zoomOnPinch:le,zoomOnDoubleClick:Fe,panOnScroll:ue,panOnScrollSpeed:ge,panOnScrollMode:de,panOnDrag:Be,defaultViewport:q,translateExtent:j,minZoom:W,maxZoom:ie,onSelectionContextMenu:b,preventScrolling:V,noDragClassName:jt,noWheelClassName:wt,noPanClassName:Qt,disableKeyboardA11y:In},G.createElement(j3,null,G.createElement(P3,{edgeTypes:at,onEdgeClick:c,onEdgeDoubleClick:h,onlyRenderVisibleElements:J,onEdgeContextMenu:Je,onEdgeMouseEnter:Qe,onEdgeMouseMove:Jt,onEdgeMouseLeave:$e,onReconnect:_e,onReconnectStart:$t,onReconnectEnd:It,reconnectRadius:yt,defaultMarkerColor:oe,noPanClassName:Qt,elevateEdgesOnSelect:!!Yt,disableKeyboardA11y:In,rfId:en},G.createElement(q3,{style:E,type:D,component:R,containerStyle:N})),G.createElement("div",{className:"react-flow__edgelabel-renderer"}),G.createElement(_3,{nodeTypes:vt,onNodeClick:l,onNodeDoubleClick:f,onNodeMouseEnter:p,onNodeMouseMove:g,onNodeMouseLeave:m,onNodeContextMenu:x,selectNodesOnDrag:B,onlyRenderVisibleElements:J,noPanClassName:Qt,noDragClassName:jt,disableKeyboardA11y:In,nodeOrigin:Bt,nodeExtent:bt,rfId:en})))};Lg.displayName="GraphView";var G3=T.memo(Lg);const Vl=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Si={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Vl,nodeExtent:Vl,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:_o.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:yS,isValidConnection:void 0},V3=()=>TC((e,n)=>({...Si,setNodes:r=>{const{nodeInternals:o,nodeOrigin:s,elevateNodesOnSelect:u}=n();e({nodeInternals:ml(r,o,s,u)})},getNodes:()=>Array.from(n().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:o={}}=n();e({edges:r.map(s=>({...o,...s}))})},setDefaultNodesAndEdges:(r,o)=>{const s=typeof r<"u",u=typeof o<"u",l=s?ml(r,new Map,n().nodeOrigin,n().elevateNodesOnSelect):new Map;e({nodeInternals:l,edges:u?o:[],hasDefaultNodes:s,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:o,nodeInternals:s,fitViewOnInit:u,fitViewOnInitDone:l,fitViewOnInitOptions:c,domNode:f,nodeOrigin:h}=n(),p=f?.querySelector(".react-flow__viewport");if(!p)return;const g=window.getComputedStyle(p),{m22:m}=new window.DOMMatrixReadOnly(g.transform),x=r.reduce((_,C)=>{const D=s.get(C.id);if(D?.hidden)s.set(D.id,{...D,[At]:{...D[At],handleBounds:void 0}});else if(D){const E=hf(C.nodeElement);!!(E.width&&E.height&&(D.width!==E.width||D.height!==E.height||C.forceUpdate))&&(s.set(D.id,{...D,[At]:{...D[At],handleBounds:{source:xp(".source",C.nodeElement,m,h),target:xp(".target",C.nodeElement,m,h)}},...E}),_.push({id:D.id,type:"dimensions",dimensions:E}))}return _},[]);Sg(s,h);const b=l||u&&!l&&Fg(n,{initial:!0,...c});e({nodeInternals:new Map(s),fitViewOnInitDone:b}),x?.length>0&&o?.(x)},updateNodePositions:(r,o=!0,s=!1)=>{const{triggerNodeChanges:u}=n(),l=r.map(c=>{const f={id:c.id,type:"position",dragging:s};return o&&(f.positionAbsolute=c.positionAbsolute,f.position=c.position),f});u(l)},triggerNodeChanges:r=>{const{onNodesChange:o,nodeInternals:s,hasDefaultNodes:u,nodeOrigin:l,getNodes:c,elevateNodesOnSelect:f}=n();if(r?.length){if(u){const h=Tg(r,c()),p=ml(h,s,l,f);e({nodeInternals:p})}o?.(r)}},addSelectedNodes:r=>{const{multiSelectionActive:o,edges:s,getNodes:u}=n();let l,c=null;o?l=r.map(f=>Ni(f,!0)):(l=ts(u(),r),c=ts(s,[])),uu({changedNodes:l,changedEdges:c,get:n,set:e})},addSelectedEdges:r=>{const{multiSelectionActive:o,edges:s,getNodes:u}=n();let l,c=null;o?l=r.map(f=>Ni(f,!0)):(l=ts(s,r),c=ts(u(),[])),uu({changedNodes:c,changedEdges:l,get:n,set:e})},unselectNodesAndEdges:({nodes:r,edges:o}={})=>{const{edges:s,getNodes:u}=n(),l=r||u(),c=o||s,f=l.map(p=>(p.selected=!1,Ni(p.id,!1))),h=c.map(p=>Ni(p.id,!1));uu({changedNodes:f,changedEdges:h,get:n,set:e})},setMinZoom:r=>{const{d3Zoom:o,maxZoom:s}=n();o?.scaleExtent([r,s]),e({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:o,minZoom:s}=n();o?.scaleExtent([s,r]),e({maxZoom:r})},setTranslateExtent:r=>{n().d3Zoom?.translateExtent(r),e({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:o}=n(),u=o().filter(c=>c.selected).map(c=>Ni(c.id,!1)),l=r.filter(c=>c.selected).map(c=>Ni(c.id,!1));uu({changedNodes:u,changedEdges:l,get:n,set:e})},setNodeExtent:r=>{const{nodeInternals:o}=n();o.forEach(s=>{s.positionAbsolute=pf(s.position,r)}),e({nodeExtent:r,nodeInternals:new Map(o)})},panBy:r=>{const{transform:o,width:s,height:u,d3Zoom:l,d3Selection:c,translateExtent:f}=n();if(!l||!c||!r.x&&!r.y)return!1;const h=Bi.translate(o[0]+r.x,o[1]+r.y).scale(o[2]),p=[[0,0],[s,u]],g=l?.constrain()(h,p,f);return l.transform(c,g),o[0]!==g.x||o[1]!==g.y||o[2]!==g.k},cancelConnection:()=>e({connectionNodeId:Si.connectionNodeId,connectionHandleId:Si.connectionHandleId,connectionHandleType:Si.connectionHandleType,connectionStatus:Si.connectionStatus,connectionStartHandle:Si.connectionStartHandle,connectionEndHandle:Si.connectionEndHandle}),reset:()=>e({...Si})}),Object.is),Af=({children:e})=>{const n=T.useRef(null);return n.current||(n.current=V3()),G.createElement(cS,{value:n.current},e)};Af.displayName="ReactFlowProvider";const Hg=({children:e})=>T.useContext(Qu)?G.createElement(G.Fragment,null,e):G.createElement(Af,null,e);Hg.displayName="ReactFlowWrapper";const U3={input:_g,default:ql,output:wg,group:bf},W3={default:ju,straight:vf,step:yf,smoothstep:ec,simplebezier:mf},X3=[0,0],Y3=[15,15],Z3={x:0,y:0,zoom:1},K3={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},qg=T.forwardRef(({nodes:e,edges:n,defaultNodes:r,defaultEdges:o,className:s,nodeTypes:u=U3,edgeTypes:l=W3,onNodeClick:c,onEdgeClick:f,onInit:h,onMove:p,onMoveStart:g,onMoveEnd:m,onConnect:x,onConnectStart:b,onConnectEnd:_,onClickConnectStart:C,onClickConnectEnd:D,onNodeMouseEnter:E,onNodeMouseMove:R,onNodeMouseLeave:N,onNodeContextMenu:P,onNodeDoubleClick:H,onNodeDragStart:Y,onNodeDrag:Q,onNodeDragStop:$,onNodesDelete:X,onEdgesDelete:te,onSelectionChange:J,onSelectionDragStart:Z,onSelectionDrag:B,onSelectionDragStop:q,onSelectionContextMenu:j,onSelectionStart:W,onSelectionEnd:ie,connectionMode:V=_o.Strict,connectionLineType:oe=Ti.Bezier,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:ue,deleteKeyCode:ge="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:Fe=!1,selectionMode:Be=hs.Full,panActivationKeyCode:me="Space",multiSelectionKeyCode:be=$u()?"Meta":"Control",zoomActivationKeyCode:Te=$u()?"Meta":"Control",snapToGrid:xt=!1,snapGrid:ht=Y3,onlyRenderVisibleElements:Pt=!1,selectNodesOnDrag:Je=!0,nodesDraggable:Qe,nodesConnectable:Jt,nodesFocusable:$e,nodeOrigin:_e=X3,edgesFocusable:$t,edgesUpdatable:It,elementsSelectable:yt,defaultViewport:jt=Z3,minZoom:wt=.5,maxZoom:Qt=2,translateExtent:Yt=Vl,preventScrolling:In=!0,nodeExtent:Bt,defaultMarkerColor:bt="#b1b1b7",zoomOnScroll:en=!0,zoomOnPinch:vt=!0,panOnScroll:at=!1,panOnScrollSpeed:Rt=.5,panOnScrollMode:un=mo.Free,zoomOnDoubleClick:tn=!0,panOnDrag:Dt=!0,onPaneClick:Ct,onPaneMouseEnter:nn,onPaneMouseMove:_r,onPaneMouseLeave:cn,onPaneScroll:Bn,onPaneContextMenu:Dn,children:Br,onEdgeContextMenu:St,onEdgeDoubleClick:nr,onEdgeMouseEnter:Rr,onEdgeMouseMove:Or,onEdgeMouseLeave:xr,onEdgeUpdate:rr,onEdgeUpdateStart:ln,onEdgeUpdateEnd:Pi,onReconnect:Mr,onReconnectStart:$i,onReconnectEnd:zr,reconnectRadius:fi=10,edgeUpdaterRadius:_n=10,onNodesChange:Rn,onEdgesChange:ji,noDragClassName:ki="nodrag",noWheelClassName:Li="nowheel",noPanClassName:di="nopan",fitView:qn=!1,fitViewOptions:rn,connectOnClick:Hi=!0,attributionPosition:qi,proOptions:Gi,defaultEdgeOptions:Vi,elevateNodesOnSelect:Ui=!0,elevateEdgesOnSelect:fn=!1,disableKeyboardA11y:ir=!1,autoPanOnConnect:wr=!0,autoPanOnNodeDrag:Gn=!0,connectionRadius:Wi=20,isValidConnection:br,onError:or,style:hi,id:Pr,nodeDragThreshold:dn,...pi},Xi)=>{const $r=Pr||"1";return G.createElement("div",{...pi,style:{...hi,...K3},ref:Xi,className:vn(["react-flow",s]),"data-testid":"rf__wrapper",id:Pr},G.createElement(Hg,null,G.createElement(G3,{onInit:h,onMove:p,onMoveStart:g,onMoveEnd:m,onNodeClick:c,onEdgeClick:f,onNodeMouseEnter:E,onNodeMouseMove:R,onNodeMouseLeave:N,onNodeContextMenu:P,onNodeDoubleClick:H,nodeTypes:u,edgeTypes:l,connectionLineType:oe,connectionLineStyle:se,connectionLineComponent:le,connectionLineContainerStyle:ue,selectionKeyCode:de,selectionOnDrag:Fe,selectionMode:Be,deleteKeyCode:ge,multiSelectionKeyCode:be,panActivationKeyCode:me,zoomActivationKeyCode:Te,onlyRenderVisibleElements:Pt,selectNodesOnDrag:Je,defaultViewport:jt,translateExtent:Yt,minZoom:wt,maxZoom:Qt,preventScrolling:In,zoomOnScroll:en,zoomOnPinch:vt,zoomOnDoubleClick:tn,panOnScroll:at,panOnScrollSpeed:Rt,panOnScrollMode:un,panOnDrag:Dt,onPaneClick:Ct,onPaneMouseEnter:nn,onPaneMouseMove:_r,onPaneMouseLeave:cn,onPaneScroll:Bn,onPaneContextMenu:Dn,onSelectionContextMenu:j,onSelectionStart:W,onSelectionEnd:ie,onEdgeContextMenu:St,onEdgeDoubleClick:nr,onEdgeMouseEnter:Rr,onEdgeMouseMove:Or,onEdgeMouseLeave:xr,onReconnect:Mr??rr,onReconnectStart:$i??ln,onReconnectEnd:zr??Pi,reconnectRadius:fi??_n,defaultMarkerColor:bt,noDragClassName:ki,noWheelClassName:Li,noPanClassName:di,elevateEdgesOnSelect:fn,rfId:$r,disableKeyboardA11y:ir,nodeOrigin:_e,nodeExtent:Bt}),G.createElement(LS,{nodes:e,edges:n,defaultNodes:r,defaultEdges:o,onConnect:x,onConnectStart:b,onConnectEnd:_,onClickConnectStart:C,onClickConnectEnd:D,nodesDraggable:Qe,nodesConnectable:Jt,nodesFocusable:$e,edgesFocusable:$t,edgesUpdatable:It,elementsSelectable:yt,elevateNodesOnSelect:Ui,minZoom:wt,maxZoom:Qt,nodeExtent:Bt,onNodesChange:Rn,onEdgesChange:ji,snapToGrid:xt,snapGrid:ht,connectionMode:V,translateExtent:Yt,connectOnClick:Hi,defaultEdgeOptions:Vi,fitView:qn,fitViewOptions:rn,onNodesDelete:X,onEdgesDelete:te,onNodeDragStart:Y,onNodeDrag:Q,onNodeDragStop:$,onSelectionDrag:B,onSelectionDragStart:Z,onSelectionDragStop:q,noPanClassName:di,nodeOrigin:_e,rfId:$r,autoPanOnConnect:wr,autoPanOnNodeDrag:Gn,onError:or,connectionRadius:Wi,isValidConnection:br,nodeDragThreshold:dn}),G.createElement(jS,{onSelectionChange:J}),Br,G.createElement(fS,{proOptions:Gi,position:qi}),G.createElement(US,{rfId:$r,disableKeyboardA11y:ir})))});qg.displayName="ReactFlow";const J3=e=>e.domNode?.querySelector(".react-flow__edgelabel-renderer");function Q3({children:e}){const n=mt(J3);return n?l0.createPortal(e,n):null}function Gg(e){return n=>{const[r,o]=T.useState(n),s=T.useCallback(u=>o(l=>e(u,l)),[]);return[r,o,s]}}const e6=Gg(Tg),t6=Gg(s3);function n6(){return G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},G.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function r6(){return G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},G.createElement("path",{d:"M0 0h32v4.2H0z"}))}function i6(){return G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},G.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function o6(){return G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},G.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function s6(){return G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},G.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const ns=({children:e,className:n,...r})=>G.createElement("button",{type:"button",className:vn(["react-flow__controls-button",n]),...r},e);ns.displayName="ControlButton";const a6=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Vg=({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:o=!0,fitViewOptions:s,onZoomIn:u,onZoomOut:l,onFitView:c,onInteractiveChange:f,className:h,children:p,position:g="bottom-left"})=>{const m=Xt(),[x,b]=T.useState(!1),{isInteractive:_,minZoomReached:C,maxZoomReached:D}=mt(a6,an),{zoomIn:E,zoomOut:R,fitView:N}=Cf();if(T.useEffect(()=>{b(!0)},[]),!x)return null;const P=()=>{E(),u?.()},H=()=>{R(),l?.()},Y=()=>{N(s),c?.()},Q=()=>{m.setState({nodesDraggable:!_,nodesConnectable:!_,elementsSelectable:!_}),f?.(!_)};return G.createElement(tg,{className:vn(["react-flow__controls",h]),position:g,style:e,"data-testid":"rf__controls"},n&&G.createElement(G.Fragment,null,G.createElement(ns,{onClick:P,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:D},G.createElement(n6,null)),G.createElement(ns,{onClick:H,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:C},G.createElement(r6,null))),r&&G.createElement(ns,{className:"react-flow__controls-fitview",onClick:Y,title:"fit view","aria-label":"fit view"},G.createElement(i6,null)),o&&G.createElement(ns,{className:"react-flow__controls-interactive",onClick:Q,title:"toggle interactivity","aria-label":"toggle interactivity"},_?G.createElement(s6,null):G.createElement(o6,null)),p)};Vg.displayName="Controls";var u6=T.memo(Vg),yr;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(yr||(yr={}));function c6({color:e,dimensions:n,lineWidth:r}){return G.createElement("path",{stroke:e,strokeWidth:r,d:`M${n[0]/2} 0 V${n[1]} M0 ${n[1]/2} H${n[0]}`})}function l6({color:e,radius:n}){return G.createElement("circle",{cx:n,cy:n,r:n,fill:e})}const f6={[yr.Dots]:"#91919a",[yr.Lines]:"#eee",[yr.Cross]:"#e2e2e2"},d6={[yr.Dots]:1,[yr.Lines]:1,[yr.Cross]:6},h6=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Ug({id:e,variant:n=yr.Dots,gap:r=20,size:o,lineWidth:s=1,offset:u=2,color:l,style:c,className:f}){const h=T.useRef(null),{transform:p,patternId:g}=mt(h6,an),m=l||f6[n],x=o||d6[n],b=n===yr.Dots,_=n===yr.Cross,C=Array.isArray(r)?r:[r,r],D=[C[0]*p[2]||1,C[1]*p[2]||1],E=x*p[2],R=_?[E,E]:D,N=b?[E/u,E/u]:[R[0]/u,R[1]/u];return G.createElement("svg",{className:vn(["react-flow__background",f]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:h,"data-testid":"rf__background"},G.createElement("pattern",{id:g+e,x:p[0]%D[0],y:p[1]%D[1],width:D[0],height:D[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},b?G.createElement(l6,{color:m,radius:E/u}):G.createElement(c6,{dimensions:R,color:m,lineWidth:s})),G.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${g+e})`}))}Ug.displayName="Background";var p6=T.memo(Ug);const Sn=Symbol("private"),g6=e=>({id:e?.id,sourceId:e?.source,type:e?.type,targetId:e?.target,name:e?.label,sourceHandle:e.sourceHandle??void 0,targetHandle:e.targetHandle??void 0}),Ul=e=>({id:e.id,type:e.type,position:e.position,height:e[Sn]?.dimensions?.height,width:e[Sn]?.dimensions?.width,selected:e[Sn]?.selected,data:{name:e.name,kind:e?.content?.kind}}),Xs=e=>e.map(Ul),Wl=e=>({id:e.id,source:e.sourceId,type:e?.type||"edge",target:e.targetId,label:e.name,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle,markerEnd:{type:oa.ArrowClosed,width:20,height:20}}),Xl=e=>e.filter(n=>n.sourceId&&n.targetId).map(Wl);var ct=(e=>(e[e.Input=0]="Input",e[e.Output=1]="Output",e[e.InferredInput=2]="InferredInput",e[e.InferredOutput=3]="InferredOutput",e))(ct||{});const gs=G.createContext({}),Wg=e=>{const{children:n}=e,r=T.useMemo(()=>al()(()=>({id:void 0,simulate:void 0,decisionGraph:{nodes:[],edges:[]},hoveredEdgeId:null,openTabs:[],activeTab:"graph",name:"graph.json",disabled:!1,configurable:!0,components:[],customNodes:[],activePanel:void 0,panels:[],compactMode:localStorage.getItem("jdm-compact-mode")==="true",nodeTypes:{},globalType:{}})),[]),o=T.useMemo(()=>al(()=>({onChange:void 0,onPanelsChange:void 0})),[]),s=T.useMemo(()=>al(()=>({nodesState:T.createRef(),edgesState:T.createRef(),graphClipboard:T.createRef(),reactFlowInstance:T.createRef()})),[]),u=T.useMemo(()=>({handleNodesChange:(c=[])=>{const{nodesState:f}=s.getState(),{decisionGraph:h}=r.getState(),[,,p]=f.current;let g=!1;p?.(c);const m=gt(h,x=>{c.forEach(b=>He(b).with({type:"position"},_=>{const C=x.nodes.find(D=>D.id===_.id);C&&_.position&&!Ln(C.position,_.position)&&(g=!0,C.position=_.position)}).with({type:"dimensions"},_=>{const C=x.nodes.find(D=>D.id===_.id);C&&!Ln(C[Sn]?.dimensions,_.dimensions)&&(g=!0,C[Sn]??={},C[Sn].dimensions={height:_.dimensions?.height,width:_.dimensions?.width})}).with({type:"select"},_=>{const C=x.nodes.find(D=>D.id===_.id);C&&C[Sn]?.selected!==_.selected&&(g=!0,C[Sn]??={},C[Sn].selected=_.selected)}).otherwise(()=>{}))});g&&(r.setState({decisionGraph:m}),o.getState().onChange?.(m))},handleEdgesChange:(c=[])=>{const{decisionGraph:f}=r.getState(),{edgesState:h}=s.getState();if(h?.current?.[2](c),c.find(p=>p.type==="remove")){const p=gt(f,g=>{const m=(g.edges||[]).map(x=>c.find(_=>"id"in _&&_.id===x.id)?.type==="remove"?null:x).filter(x=>!!x);g.edges=m});r.setState({decisionGraph:p}),o.getState().onChange?.(p)}},setNodes:(c=[])=>{const{nodesState:f}=s.getState(),{decisionGraph:h}=r.getState();f?.current?.[1](Xs(c));const p=gt(h,g=>{g.nodes=c});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},addNodes:c=>{const{nodesState:f}=s.getState(),{decisionGraph:h}=r.getState();f.current[0]?.some(m=>m.type===lt.Input)&&(c=c.filter(m=>m.type!==lt.Input)),f.current[1]?.(m=>m.concat(Xs(c)));const g=gt(h,m=>{m.nodes=(m.nodes||[]).concat(c)});r.setState({decisionGraph:g}),o.getState().onChange?.(g)},duplicateNodes:c=>{const{nodesState:f,edgesState:h}=s.getState(),{decisionGraph:p}=r.getState();let g=(p?.nodes||[]).filter(E=>c.includes(E.id));if(f.current[0]?.some(E=>E.type===lt.Input)&&(g=g.filter(E=>E.type!==lt.Input)),g.length===0)return;const x=g.reduce((E,R)=>({...E,[R.id]:crypto.randomUUID()}),{}),b=g.map(E=>({...E,id:x[E.id],position:{x:E.position?.x||0,y:(E.position?.y||0)+140}})),_=Object.keys(x),C=[];b.length>0&&(h.current?.[0]||[]).forEach(E=>{_.includes(E.source)&&_.includes(E.target)&&C.push({id:crypto.randomUUID(),type:E.type,sourceId:x[E.source],targetId:x[E.target],sourceHandle:E.sourceHandle??void 0,targetHandle:E.targetHandle??void 0})}),f.current[1]?.(E=>E.concat(b.map(Ul))),h.current[1]?.(E=>E.concat(C.map(Wl)));const D=gt(p,E=>{E.nodes.push(...b),E.edges.push(...C)});r.setState({decisionGraph:D}),o.getState().onChange?.(D)},copyNodes:c=>{const{graphClipboard:f,nodesState:h}=s.getState();if(!f.current||!h.current)return;const[p]=h.current,g=p.filter(m=>c.includes(m.id));f.current.copyNodes(g)},pasteNodes:()=>{const{graphClipboard:c}=s.getState();c.current?.pasteNodes?.()},removeNodes:(c=[])=>{const{nodesState:f,edgesState:h}=s.getState(),{decisionGraph:p,nodeTypes:g}=r.getState();f.current[1]?.(b=>b.filter(_=>c.every(C=>_.id!==C))),h.current[1]?.(b=>b.filter(_=>c.every(C=>_.source!==C&&_.target!==C&&_.sourceHandle!==C&&_.targetHandle!==C)));const m=gt(p,b=>{const _=b.nodes||[],C=b.edges||[];b.nodes=_.filter(D=>c.every(E=>D.id!==E)),b.edges=C.filter(D=>c.every(E=>D.sourceId!==E&&D.targetId!==E&&D.sourceHandle!==E&&D.targetHandle!==E))}),x=gt(g,b=>{c.forEach(_=>{_ in b&&delete b[_]})});r.setState({decisionGraph:m,nodeTypes:x}),o.getState().onChange?.(m)},addEdges:c=>{const{edgesState:f}=s.getState(),{decisionGraph:h}=r.getState();f.current?.[1]?.(g=>g.concat(c.map(Wl)));const p=gt(h,g=>{g.edges=(g.edges||[]).concat(c)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},setEdges:(c=[])=>{const{edgesState:f}=s.getState(),{decisionGraph:h}=r.getState();f?.current?.[1]?.(Xl(c));const p=gt(h,g=>{g.edges=c});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdges:c=>{const{edgesState:f}=s.getState(),{decisionGraph:h}=r.getState();f?.current?.[1]?.(g=>g.filter(m=>!c.find(x=>m.id===x)));const p=gt(h,g=>{g.edges=g.edges.filter(m=>!c.find(x=>m.id===x))});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},removeEdgeByHandleId:c=>{if(!c)return;const{edgesState:f}=s.getState(),{decisionGraph:h}=r.getState();f?.current?.[1]?.(g=>g.filter(m=>m.sourceHandle!==c));const p=gt(h,g=>{g.edges=g.edges.filter(m=>m.sourceHandle!==c)});r.setState({decisionGraph:p}),o.getState().onChange?.(p)},updateNode:(c,f)=>{const{decisionGraph:h}=r.getState(),{nodesState:p}=s.getState(),[g,m]=p.current,x=gt(h,D=>{const E=(D.nodes??[]).find(R=>R?.id===c);E&&f(E)}),b=x.nodes.find(D=>D.id===c);if(!b)return;const _=Ul(b),C=g.find(D=>D.id===c);Ln(_,C)||m(D=>D.map(E=>E.id===c?_:E)),r.setState({decisionGraph:x}),o.getState().onChange?.(x)},setDecisionGraph:(c,f={})=>{const{decisionGraph:h}=r.getState(),{edgesState:p,nodesState:g}=s.getState(),{skipOnChangeEvent:m=!1}=f,x=gt(h,b=>{Object.assign(b,c)});p?.current?.[1](Xl(x?.edges??[])),g?.current?.[1](Xs(x?.nodes??[])),r.setState({decisionGraph:x}),m||o.getState().onChange?.(x)},setHoveredEdgeId:c=>r.setState({hoveredEdgeId:c}),goToNode:c=>{if(r.getState().activeTab!=="graph")return;const{reactFlowInstance:f}=s.getState();if(!f.current)return;const h=f.current.getNode(c);h&&f.current.fitView({nodes:[h],duration:1e3,maxZoom:1.25})},openTab:c=>{const{openTabs:f}=r.getState(),h=f.find(p=>p===c);if(c==="graph")return r.setState({activeTab:c});h?r.setState({activeTab:h}):r.setState({openTabs:[...f,c],activeTab:c})},closeTab:(c,f)=>{const{openTabs:h,activeTab:p}=r.getState(),g=h?.findIndex(C=>C===c),m=h?.[g],x=He(f).with(void 0,()=>h.filter(C=>C!==m)).with("close",()=>h.filter(C=>C!==m)).with("close-all",()=>[]).with("close-other",()=>h.filter(C=>C===m)).with("close-right",()=>h.slice(0,g+1)).with("close-left",()=>h.slice(g)).otherwise(()=>h),b={openTabs:x};x?.find(C=>C===p)||(b.activeTab=x?.[g-1]??"graph"),r.setState(b)},setActivePanel:c=>{const{panels:f}=r.getState(),h={activePanel:c===void 0?void 0:(f||[]).find(p=>p.id===c)?.id};o.getState()?.onPanelsChange?.(c),r.setState(h)},setCompactMode:c=>{const f={compactMode:c};localStorage.setItem("jdm-compact-mode",`${c}`),r.setState(f)},toggleCompactMode:()=>{const{compactMode:c}=r.getState(),f=!c,h={compactMode:f};localStorage.setItem("jdm-compact-mode",`${f}`),r.setState(h)},setNodeType:(c,f,h)=>{const{nodeTypes:p}=r.getState(),g=gt(p,m=>{m[c]??={},m[c][f]=h});r.setState({nodeTypes:g})},removeNodeType:(c,f)=>{const{nodeTypes:h}=r.getState(),p=gt(h,g=>{c in g&&(f?f in g[c]&&delete g[c][f]:delete g[c])});r.setState({nodeTypes:p})},triggerNodeSelect:(c,f)=>{const{decisionGraph:h}=r.getState(),{nodesState:p,edgesState:g}=s.getState(),[,m]=p.current,[,x]=g.current,b=gt(h,_=>{const C=_.nodes.find(D=>D.id===c);C&&(f==="only"&&_.nodes.forEach(D=>{D[Sn]&&(D[Sn].selected=!1)}),C[Sn]??={},C[Sn].selected=He(f).with("only",()=>!0).otherwise(()=>!C[Sn]?.selected))});m(Xs(b.nodes)),f=="only"&&x(_=>_.map(C=>({...C,selected:!1}))),r.setState({decisionGraph:b}),o.getState().onChange?.(b)}}),[]),l=T.useMemo(()=>({stateStore:r,referenceStore:s,listenerStore:o,actions:u}),[r,s,o,u]);return S.jsx(gs.Provider,{value:l,children:n})};function st(e,n=Ln){return G.useContext(gs).stateStore(e,n)}function Xg(e,n=Ln){return G.useContext(gs).listenerStore(e,n)}function m6(e,n=Ln){return G.useContext(gs).referenceStore(e,n)}function zt(){return G.useContext(gs).actions}function bo(){return G.useContext(gs)}const pa=e=>{const{diff:n,contentDiff:r}=st(o=>{const s=(o?.decisionGraph?.nodes??[]).find(u=>u.id===e);return{diff:s?._diff,contentDiff:s?.content?._diff}});return{diff:n,contentDiff:r}},y6=e=>{const{diff:n}=st(r=>({diff:(r?.decisionGraph?.edges??[]).find(s=>s.id===e)?._diff}));return{diff:n}};Wg.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphProvider"};const v6=({id:e,defaultValue:n,value:r,name:o,disabled:s=!1,configurable:u=!0,onChange:l,components:c,customNodes:f,defaultActivePanel:h,panels:p,simulate:g,onPanelsChange:m,onReactFlowInit:x,onCodeExtension:b,onFunctionReady:_})=>{const C=T.useRef(!1),D=zt(),{stateStore:E,listenerStore:R}=bo(),{decisionGraph:N}=st(({decisionGraph:H})=>({decisionGraph:H})),P=yw(H=>{l?.(H)},100);return T.useEffect(()=>{E.setState({id:e,disabled:s,configurable:u,components:Array.isArray(c)?c:[],customNodes:Array.isArray(f)?f:[],panels:p})},[e,s,u,c,f,p]),T.useEffect(()=>{E.setState({name:o??"graph.json"})},[o]),T.useEffect(()=>{E.setState({simulate:g})},[g]),T.useEffect(()=>{R.setState({onReactFlowInit:x,onPanelsChange:m,onCodeExtension:b,onFunctionReady:_})},[x,m,b,_]),T.useEffect(()=>{R.setState({onChange:P})},[P]),T.useEffect(()=>{C.current&&r!==void 0&&!Ln(r,N)&&D.setDecisionGraph(r)},[r]),T.useEffect(()=>{r!==void 0?D.setDecisionGraph(r):n!==void 0&&D.setDecisionGraph(n),E.setState({activePanel:h}),C.current=!0},[]),null},D6=()=>{let e=null;return{walk:function*(n){const r=_6(n);if(e&&Ln(r,e.digest)){yield*w6(n,e.iterator);return}const o=[];for(const s of x6(n))o.push({id:s.node.id,incomers:s.incomers.map(u=>u.id)}),yield s;e={digest:r,iterator:o}}}},_6=e=>{const n=e.nodes.map(o=>o.id),r=e.edges;return{nodes:n,edges:r}};function*x6(e){const n=Xs(e.nodes),r=Xl(e.edges),o=e.nodes.find(c=>c.type==="inputNode"),s=n.find(c=>c.id===o?.id);if(!o||!s||b6(s,n,r))return;yield{node:o,incomers:[]};const u=new Set;u.add(o.id);const l=ku(s,n,r);for(;l.length>0;){const c=l.pop();if(u.has(c.id))continue;const f=AS(c,n,r),h=f.filter(m=>!u.has(m.id));if(h.length>0){l.push(c,...h);continue}u.add(c.id);const p=e.nodes.find(m=>m.id===c.id);if(p){const m=e.nodes.filter(x=>f.some(b=>b.id===x.id));yield{node:p,incomers:m}}const g=ku(c,n,r);l.push(...g)}}function*w6(e,n){for(const r of n){const o=e.nodes.find(u=>u.id===r.id);if(!o)continue;const s=e.nodes.filter(u=>r.incomers.includes(u.id));yield{node:o,incomers:s}}}const b6=(e,n,r)=>{const o=new Set,s=new Set,u=l=>{o.add(l.id),s.add(l.id);const c=ku(l,n,r);for(const f of c)if(o.has(f.id)){if(s.has(f.id))return!0}else if(u(f))return!0;return s.delete(l.id),!1};return u(e)};var Lu={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Lu.exports;(function(e,n){(function(){var r,o="4.17.21",s=200,u="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",h=500,p="__lodash_placeholder__",g=1,m=2,x=4,b=1,_=2,C=1,D=2,E=4,R=8,N=16,P=32,H=64,Y=128,Q=256,$=512,X=30,te="...",J=800,Z=16,B=1,q=2,j=3,W=1/0,ie=9007199254740991,V=17976931348623157e292,oe=NaN,se=4294967295,le=se-1,ue=se>>>1,ge=[["ary",Y],["bind",C],["bindKey",D],["curry",R],["curryRight",N],["flip",$],["partial",P],["partialRight",H],["rearg",Q]],de="[object Arguments]",Fe="[object Array]",Be="[object AsyncFunction]",me="[object Boolean]",be="[object Date]",Te="[object DOMException]",xt="[object Error]",ht="[object Function]",Pt="[object GeneratorFunction]",Je="[object Map]",Qe="[object Number]",Jt="[object Null]",$e="[object Object]",_e="[object Promise]",$t="[object Proxy]",It="[object RegExp]",yt="[object Set]",jt="[object String]",wt="[object Symbol]",Qt="[object Undefined]",Yt="[object WeakMap]",In="[object WeakSet]",Bt="[object ArrayBuffer]",bt="[object DataView]",en="[object Float32Array]",vt="[object Float64Array]",at="[object Int8Array]",Rt="[object Int16Array]",un="[object Int32Array]",tn="[object Uint8Array]",Dt="[object Uint8ClampedArray]",Ct="[object Uint16Array]",nn="[object Uint32Array]",_r=/\b__p \+= '';/g,cn=/\b(__p \+=) '' \+/g,Bn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Dn=/&(?:amp|lt|gt|quot|#39);/g,Br=/[&<>"']/g,St=RegExp(Dn.source),nr=RegExp(Br.source),Rr=/<%-([\s\S]+?)%>/g,Or=/<%([\s\S]+?)%>/g,xr=/<%=([\s\S]+?)%>/g,rr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ln=/^\w*$/,Pi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mr=/[\\^$.*+?()[\]{}|]/g,$i=RegExp(Mr.source),zr=/^\s+/,fi=/\s/,_n=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Rn=/\{\n\/\* \[wrapped with (.+)\] \*/,ji=/,? & /,ki=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Li=/[()=,{}\[\]\/\s]/,di=/\\(\\)?/g,qn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,rn=/\w*$/,Hi=/^[-+]0x[0-9a-f]+$/i,qi=/^0b[01]+$/i,Gi=/^\[object .+?Constructor\]$/,Vi=/^0o[0-7]+$/i,Ui=/^(?:0|[1-9]\d*)$/,fn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ir=/($^)/,wr=/['\n\r\u2028\u2029\\]/g,Gn="\\ud800-\\udfff",Wi="\\u0300-\\u036f",br="\\ufe20-\\ufe2f",or="\\u20d0-\\u20ff",hi=Wi+br+or,Pr="\\u2700-\\u27bf",dn="a-z\\xdf-\\xf6\\xf8-\\xff",pi="\\xac\\xb1\\xd7\\xf7",Xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",$r="\\u2000-\\u206f",Ds=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Eo="A-Z\\xc0-\\xd6\\xd8-\\xde",Ao="\\ufe0e\\ufe0f",jr=pi+Xi+$r+Ds,Yi="['’]",kr="["+Gn+"]",Zi="["+jr+"]",Lr="["+hi+"]",Hr="\\d+",Ki="["+Pr+"]",So="["+dn+"]",Fo="[^"+Gn+jr+Hr+Pr+dn+Eo+"]",qr="\\ud83c[\\udffb-\\udfff]",_s="(?:"+Lr+"|"+qr+")",No="[^"+Gn+"]",gi="(?:\\ud83c[\\udde6-\\uddff]){2}",sr="[\\ud800-\\udbff][\\udc00-\\udfff]",hn="["+Eo+"]",To="\\u200d",Io="(?:"+So+"|"+Fo+")",xn="(?:"+hn+"|"+Fo+")",Bo="(?:"+Yi+"(?:d|ll|m|re|s|t|ve))?",Ro="(?:"+Yi+"(?:D|LL|M|RE|S|T|VE))?",Oo=_s+"?",Gr="["+Ao+"]?",Ji="(?:"+To+"(?:"+[No,gi,sr].join("|")+")"+Gr+Oo+")*",On="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mi="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mo=Gr+Oo+Ji,Vr="(?:"+[Ki,gi,sr].join("|")+")"+Mo,Qi="(?:"+[No+Lr+"?",Lr,gi,sr,kr].join("|")+")",yi=RegExp(Yi,"g"),ar=RegExp(Lr,"g"),Vn=RegExp(qr+"(?="+qr+")|"+Qi+Mo,"g"),zo=RegExp([hn+"?"+So+"+"+Bo+"(?="+[Zi,hn,"$"].join("|")+")",xn+"+"+Ro+"(?="+[Zi,hn+Io,"$"].join("|")+")",hn+"?"+Io+"+"+Bo,hn+"+"+Ro,mi,On,Hr,Vr].join("|"),"g"),eo=RegExp("["+To+Gn+hi+Ao+"]"),Ur=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,to=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xs=-1,et={};et[en]=et[vt]=et[at]=et[Rt]=et[un]=et[tn]=et[Dt]=et[Ct]=et[nn]=!0,et[de]=et[Fe]=et[Bt]=et[me]=et[bt]=et[be]=et[xt]=et[ht]=et[Je]=et[Qe]=et[$e]=et[It]=et[yt]=et[jt]=et[Yt]=!1;var Xe={};Xe[de]=Xe[Fe]=Xe[Bt]=Xe[bt]=Xe[me]=Xe[be]=Xe[en]=Xe[vt]=Xe[at]=Xe[Rt]=Xe[un]=Xe[Je]=Xe[Qe]=Xe[$e]=Xe[It]=Xe[yt]=Xe[jt]=Xe[wt]=Xe[tn]=Xe[Dt]=Xe[Ct]=Xe[nn]=!0,Xe[xt]=Xe[ht]=Xe[Yt]=!1;var I={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},F={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fe=parseFloat,he=parseInt,we=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,Ne=typeof self=="object"&&self&&self.Object===Object&&self,ye=we||Ne||Function("return this")(),Ce=n&&!n.nodeType&&n,We=Ce&&!0&&e&&!e.nodeType&&e,rt=We&&We.exports===Ce,ut=rt&&we.process,tt=function(){try{var k=We&&We.require&&We.require("util").types;return k||ut&&ut.binding&&ut.binding("util")}catch{}}(),kt=tt&&tt.isArrayBuffer,wn=tt&&tt.isDate,Un=tt&&tt.isMap,Cr=tt&&tt.isRegExp,ws=tt&&tt.isSet,no=tt&&tt.isTypedArray;function Vt(k,K,U){switch(U.length){case 0:return k.call(K);case 1:return k.call(K,U[0]);case 2:return k.call(K,U[0],U[1]);case 3:return k.call(K,U[0],U[1],U[2])}return k.apply(K,U)}function Fm(k,K,U,ve){for(var Ie=-1,Ye=k==null?0:k.length;++Ie<Ye;){var Lt=k[Ie];K(ve,Lt,U(Lt),k)}return ve}function Wn(k,K){for(var U=-1,ve=k==null?0:k.length;++U<ve&&K(k[U],U,k)!==!1;);return k}function Nm(k,K){for(var U=k==null?0:k.length;U--&&K(k[U],U,k)!==!1;);return k}function zf(k,K){for(var U=-1,ve=k==null?0:k.length;++U<ve;)if(!K(k[U],U,k))return!1;return!0}function vi(k,K){for(var U=-1,ve=k==null?0:k.length,Ie=0,Ye=[];++U<ve;){var Lt=k[U];K(Lt,U,k)&&(Ye[Ie++]=Lt)}return Ye}function ga(k,K){var U=k==null?0:k.length;return!!U&&Po(k,K,0)>-1}function ic(k,K,U){for(var ve=-1,Ie=k==null?0:k.length;++ve<Ie;)if(U(K,k[ve]))return!0;return!1}function pt(k,K){for(var U=-1,ve=k==null?0:k.length,Ie=Array(ve);++U<ve;)Ie[U]=K(k[U],U,k);return Ie}function Di(k,K){for(var U=-1,ve=K.length,Ie=k.length;++U<ve;)k[Ie+U]=K[U];return k}function oc(k,K,U,ve){var Ie=-1,Ye=k==null?0:k.length;for(ve&&Ye&&(U=k[++Ie]);++Ie<Ye;)U=K(U,k[Ie],Ie,k);return U}function Tm(k,K,U,ve){var Ie=k==null?0:k.length;for(ve&&Ie&&(U=k[--Ie]);Ie--;)U=K(U,k[Ie],Ie,k);return U}function sc(k,K){for(var U=-1,ve=k==null?0:k.length;++U<ve;)if(K(k[U],U,k))return!0;return!1}var Im=ac("length");function Bm(k){return k.split("")}function Rm(k){return k.match(ki)||[]}function Pf(k,K,U){var ve;return U(k,function(Ie,Ye,Lt){if(K(Ie,Ye,Lt))return ve=Ye,!1}),ve}function ma(k,K,U,ve){for(var Ie=k.length,Ye=U+(ve?1:-1);ve?Ye--:++Ye<Ie;)if(K(k[Ye],Ye,k))return Ye;return-1}function Po(k,K,U){return K===K?Vm(k,K,U):ma(k,$f,U)}function Om(k,K,U,ve){for(var Ie=U-1,Ye=k.length;++Ie<Ye;)if(ve(k[Ie],K))return Ie;return-1}function $f(k){return k!==k}function jf(k,K){var U=k==null?0:k.length;return U?cc(k,K)/U:oe}function ac(k){return function(K){return K==null?r:K[k]}}function uc(k){return function(K){return k==null?r:k[K]}}function kf(k,K,U,ve,Ie){return Ie(k,function(Ye,Lt,ot){U=ve?(ve=!1,Ye):K(U,Ye,Lt,ot)}),U}function Mm(k,K){var U=k.length;for(k.sort(K);U--;)k[U]=k[U].value;return k}function cc(k,K){for(var U,ve=-1,Ie=k.length;++ve<Ie;){var Ye=K(k[ve]);Ye!==r&&(U=U===r?Ye:U+Ye)}return U}function lc(k,K){for(var U=-1,ve=Array(k);++U<k;)ve[U]=K(U);return ve}function zm(k,K){return pt(K,function(U){return[U,k[U]]})}function Lf(k){return k&&k.slice(0,Vf(k)+1).replace(zr,"")}function Mn(k){return function(K){return k(K)}}function fc(k,K){return pt(K,function(U){return k[U]})}function bs(k,K){return k.has(K)}function Hf(k,K){for(var U=-1,ve=k.length;++U<ve&&Po(K,k[U],0)>-1;);return U}function qf(k,K){for(var U=k.length;U--&&Po(K,k[U],0)>-1;);return U}function Pm(k,K){for(var U=k.length,ve=0;U--;)k[U]===K&&++ve;return ve}var $m=uc(I),jm=uc(y);function km(k){return"\\"+z[k]}function Lm(k,K){return k==null?r:k[K]}function $o(k){return eo.test(k)}function Hm(k){return Ur.test(k)}function qm(k){for(var K,U=[];!(K=k.next()).done;)U.push(K.value);return U}function dc(k){var K=-1,U=Array(k.size);return k.forEach(function(ve,Ie){U[++K]=[Ie,ve]}),U}function Gf(k,K){return function(U){return k(K(U))}}function _i(k,K){for(var U=-1,ve=k.length,Ie=0,Ye=[];++U<ve;){var Lt=k[U];(Lt===K||Lt===p)&&(k[U]=p,Ye[Ie++]=U)}return Ye}function ya(k){var K=-1,U=Array(k.size);return k.forEach(function(ve){U[++K]=ve}),U}function Gm(k){var K=-1,U=Array(k.size);return k.forEach(function(ve){U[++K]=[ve,ve]}),U}function Vm(k,K,U){for(var ve=U-1,Ie=k.length;++ve<Ie;)if(k[ve]===K)return ve;return-1}function Um(k,K,U){for(var ve=U+1;ve--;)if(k[ve]===K)return ve;return ve}function jo(k){return $o(k)?Xm(k):Im(k)}function ur(k){return $o(k)?Ym(k):Bm(k)}function Vf(k){for(var K=k.length;K--&&fi.test(k.charAt(K)););return K}var Wm=uc(F);function Xm(k){for(var K=Vn.lastIndex=0;Vn.test(k);)++K;return K}function Ym(k){return k.match(Vn)||[]}function Zm(k){return k.match(zo)||[]}var Km=function k(K){K=K==null?ye:ko.defaults(ye.Object(),K,ko.pick(ye,to));var U=K.Array,ve=K.Date,Ie=K.Error,Ye=K.Function,Lt=K.Math,ot=K.Object,hc=K.RegExp,Jm=K.String,Xn=K.TypeError,va=U.prototype,Qm=Ye.prototype,Lo=ot.prototype,Da=K["__core-js_shared__"],_a=Qm.toString,nt=Lo.hasOwnProperty,e1=0,Uf=function(){var t=/[^.]+$/.exec(Da&&Da.keys&&Da.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),xa=Lo.toString,t1=_a.call(ot),n1=ye._,r1=hc("^"+_a.call(nt).replace(Mr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wa=rt?K.Buffer:r,xi=K.Symbol,ba=K.Uint8Array,Wf=wa?wa.allocUnsafe:r,Ca=Gf(ot.getPrototypeOf,ot),Xf=ot.create,Yf=Lo.propertyIsEnumerable,Ea=va.splice,Zf=xi?xi.isConcatSpreadable:r,Cs=xi?xi.iterator:r,ro=xi?xi.toStringTag:r,Aa=function(){try{var t=uo(ot,"defineProperty");return t({},"",{}),t}catch{}}(),i1=K.clearTimeout!==ye.clearTimeout&&K.clearTimeout,o1=ve&&ve.now!==ye.Date.now&&ve.now,s1=K.setTimeout!==ye.setTimeout&&K.setTimeout,Sa=Lt.ceil,Fa=Lt.floor,pc=ot.getOwnPropertySymbols,a1=wa?wa.isBuffer:r,Kf=K.isFinite,u1=va.join,c1=Gf(ot.keys,ot),Ht=Lt.max,on=Lt.min,l1=ve.now,f1=K.parseInt,Jf=Lt.random,d1=va.reverse,gc=uo(K,"DataView"),Es=uo(K,"Map"),mc=uo(K,"Promise"),Ho=uo(K,"Set"),As=uo(K,"WeakMap"),Ss=uo(ot,"create"),Na=As&&new As,qo={},h1=co(gc),p1=co(Es),g1=co(mc),m1=co(Ho),y1=co(As),Ta=xi?xi.prototype:r,Fs=Ta?Ta.valueOf:r,Qf=Ta?Ta.toString:r;function w(t){if(Et(t)&&!Re(t)&&!(t instanceof Ge)){if(t instanceof Yn)return t;if(nt.call(t,"__wrapped__"))return eh(t)}return new Yn(t)}var Go=function(){function t(){}return function(i){if(!_t(i))return{};if(Xf)return Xf(i);t.prototype=i;var a=new t;return t.prototype=r,a}}();function Ia(){}function Yn(t,i){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}w.templateSettings={escape:Rr,evaluate:Or,interpolate:xr,variable:"",imports:{_:w}},w.prototype=Ia.prototype,w.prototype.constructor=w,Yn.prototype=Go(Ia.prototype),Yn.prototype.constructor=Yn;function Ge(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=se,this.__views__=[]}function v1(){var t=new Ge(this.__wrapped__);return t.__actions__=bn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=bn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=bn(this.__views__),t}function D1(){if(this.__filtered__){var t=new Ge(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function _1(){var t=this.__wrapped__.value(),i=this.__dir__,a=Re(t),d=i<0,v=a?t.length:0,A=By(0,v,this.__views__),O=A.start,M=A.end,L=M-O,ee=d?M:O-1,ne=this.__iteratees__,ae=ne.length,pe=0,De=on(L,this.__takeCount__);if(!a||!d&&v==L&&De==L)return bd(t,this.__actions__);var Ae=[];e:for(;L--&&pe<De;){ee+=i;for(var ze=-1,Se=t[ee];++ze<ae;){var qe=ne[ze],Ue=qe.iteratee,$n=qe.type,mn=Ue(Se);if($n==q)Se=mn;else if(!mn){if($n==B)continue e;break e}}Ae[pe++]=Se}return Ae}Ge.prototype=Go(Ia.prototype),Ge.prototype.constructor=Ge;function io(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var d=t[i];this.set(d[0],d[1])}}function x1(){this.__data__=Ss?Ss(null):{},this.size=0}function w1(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}function b1(t){var i=this.__data__;if(Ss){var a=i[t];return a===f?r:a}return nt.call(i,t)?i[t]:r}function C1(t){var i=this.__data__;return Ss?i[t]!==r:nt.call(i,t)}function E1(t,i){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Ss&&i===r?f:i,this}io.prototype.clear=x1,io.prototype.delete=w1,io.prototype.get=b1,io.prototype.has=C1,io.prototype.set=E1;function Wr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var d=t[i];this.set(d[0],d[1])}}function A1(){this.__data__=[],this.size=0}function S1(t){var i=this.__data__,a=Ba(i,t);if(a<0)return!1;var d=i.length-1;return a==d?i.pop():Ea.call(i,a,1),--this.size,!0}function F1(t){var i=this.__data__,a=Ba(i,t);return a<0?r:i[a][1]}function N1(t){return Ba(this.__data__,t)>-1}function T1(t,i){var a=this.__data__,d=Ba(a,t);return d<0?(++this.size,a.push([t,i])):a[d][1]=i,this}Wr.prototype.clear=A1,Wr.prototype.delete=S1,Wr.prototype.get=F1,Wr.prototype.has=N1,Wr.prototype.set=T1;function Xr(t){var i=-1,a=t==null?0:t.length;for(this.clear();++i<a;){var d=t[i];this.set(d[0],d[1])}}function I1(){this.size=0,this.__data__={hash:new io,map:new(Es||Wr),string:new io}}function B1(t){var i=Ga(this,t).delete(t);return this.size-=i?1:0,i}function R1(t){return Ga(this,t).get(t)}function O1(t){return Ga(this,t).has(t)}function M1(t,i){var a=Ga(this,t),d=a.size;return a.set(t,i),this.size+=a.size==d?0:1,this}Xr.prototype.clear=I1,Xr.prototype.delete=B1,Xr.prototype.get=R1,Xr.prototype.has=O1,Xr.prototype.set=M1;function oo(t){var i=-1,a=t==null?0:t.length;for(this.__data__=new Xr;++i<a;)this.add(t[i])}function z1(t){return this.__data__.set(t,f),this}function P1(t){return this.__data__.has(t)}oo.prototype.add=oo.prototype.push=z1,oo.prototype.has=P1;function cr(t){var i=this.__data__=new Wr(t);this.size=i.size}function $1(){this.__data__=new Wr,this.size=0}function j1(t){var i=this.__data__,a=i.delete(t);return this.size=i.size,a}function k1(t){return this.__data__.get(t)}function L1(t){return this.__data__.has(t)}function H1(t,i){var a=this.__data__;if(a instanceof Wr){var d=a.__data__;if(!Es||d.length<s-1)return d.push([t,i]),this.size=++a.size,this;a=this.__data__=new Xr(d)}return a.set(t,i),this.size=a.size,this}cr.prototype.clear=$1,cr.prototype.delete=j1,cr.prototype.get=k1,cr.prototype.has=L1,cr.prototype.set=H1;function ed(t,i){var a=Re(t),d=!a&&lo(t),v=!a&&!d&&Ai(t),A=!a&&!d&&!v&&Xo(t),O=a||d||v||A,M=O?lc(t.length,Jm):[],L=M.length;for(var ee in t)(i||nt.call(t,ee))&&!(O&&(ee=="length"||v&&(ee=="offset"||ee=="parent")||A&&(ee=="buffer"||ee=="byteLength"||ee=="byteOffset")||Jr(ee,L)))&&M.push(ee);return M}function td(t){var i=t.length;return i?t[Sc(0,i-1)]:r}function q1(t,i){return Va(bn(t),so(i,0,t.length))}function G1(t){return Va(bn(t))}function yc(t,i,a){(a!==r&&!lr(t[i],a)||a===r&&!(i in t))&&Yr(t,i,a)}function Ns(t,i,a){var d=t[i];(!(nt.call(t,i)&&lr(d,a))||a===r&&!(i in t))&&Yr(t,i,a)}function Ba(t,i){for(var a=t.length;a--;)if(lr(t[a][0],i))return a;return-1}function V1(t,i,a,d){return wi(t,function(v,A,O){i(d,v,a(v),O)}),d}function nd(t,i){return t&&Ar(i,Ut(i),t)}function U1(t,i){return t&&Ar(i,En(i),t)}function Yr(t,i,a){i=="__proto__"&&Aa?Aa(t,i,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[i]=a}function vc(t,i){for(var a=-1,d=i.length,v=U(d),A=t==null;++a<d;)v[a]=A?r:Jc(t,i[a]);return v}function so(t,i,a){return t===t&&(a!==r&&(t=t<=a?t:a),i!==r&&(t=t>=i?t:i)),t}function Zn(t,i,a,d,v,A){var O,M=i&g,L=i&m,ee=i&x;if(a&&(O=v?a(t,d,v,A):a(t)),O!==r)return O;if(!_t(t))return t;var ne=Re(t);if(ne){if(O=Oy(t),!M)return bn(t,O)}else{var ae=sn(t),pe=ae==ht||ae==Pt;if(Ai(t))return Ad(t,M);if(ae==$e||ae==de||pe&&!v){if(O=L||pe?{}:Vd(t),!M)return L?by(t,U1(O,t)):wy(t,nd(O,t))}else{if(!Xe[ae])return v?t:{};O=My(t,ae,M)}}A||(A=new cr);var De=A.get(t);if(De)return De;A.set(t,O),_h(t)?t.forEach(function(Se){O.add(Zn(Se,i,a,Se,t,A))}):vh(t)&&t.forEach(function(Se,qe){O.set(qe,Zn(Se,i,a,qe,t,A))});var Ae=ee?L?$c:Pc:L?En:Ut,ze=ne?r:Ae(t);return Wn(ze||t,function(Se,qe){ze&&(qe=Se,Se=t[qe]),Ns(O,qe,Zn(Se,i,a,qe,t,A))}),O}function W1(t){var i=Ut(t);return function(a){return rd(a,t,i)}}function rd(t,i,a){var d=a.length;if(t==null)return!d;for(t=ot(t);d--;){var v=a[d],A=i[v],O=t[v];if(O===r&&!(v in t)||!A(O))return!1}return!0}function id(t,i,a){if(typeof t!="function")throw new Xn(l);return zs(function(){t.apply(r,a)},i)}function Ts(t,i,a,d){var v=-1,A=ga,O=!0,M=t.length,L=[],ee=i.length;if(!M)return L;a&&(i=pt(i,Mn(a))),d?(A=ic,O=!1):i.length>=s&&(A=bs,O=!1,i=new oo(i));e:for(;++v<M;){var ne=t[v],ae=a==null?ne:a(ne);if(ne=d||ne!==0?ne:0,O&&ae===ae){for(var pe=ee;pe--;)if(i[pe]===ae)continue e;L.push(ne)}else A(i,ae,d)||L.push(ne)}return L}var wi=Id(Er),od=Id(_c,!0);function X1(t,i){var a=!0;return wi(t,function(d,v,A){return a=!!i(d,v,A),a}),a}function Ra(t,i,a){for(var d=-1,v=t.length;++d<v;){var A=t[d],O=i(A);if(O!=null&&(M===r?O===O&&!Pn(O):a(O,M)))var M=O,L=A}return L}function Y1(t,i,a,d){var v=t.length;for(a=Me(a),a<0&&(a=-a>v?0:v+a),d=d===r||d>v?v:Me(d),d<0&&(d+=v),d=a>d?0:wh(d);a<d;)t[a++]=i;return t}function sd(t,i){var a=[];return wi(t,function(d,v,A){i(d,v,A)&&a.push(d)}),a}function Zt(t,i,a,d,v){var A=-1,O=t.length;for(a||(a=Py),v||(v=[]);++A<O;){var M=t[A];i>0&&a(M)?i>1?Zt(M,i-1,a,d,v):Di(v,M):d||(v[v.length]=M)}return v}var Dc=Bd(),ad=Bd(!0);function Er(t,i){return t&&Dc(t,i,Ut)}function _c(t,i){return t&&ad(t,i,Ut)}function Oa(t,i){return vi(i,function(a){return Qr(t[a])})}function ao(t,i){i=Ci(i,t);for(var a=0,d=i.length;t!=null&&a<d;)t=t[Sr(i[a++])];return a&&a==d?t:r}function ud(t,i,a){var d=i(t);return Re(t)?d:Di(d,a(t))}function pn(t){return t==null?t===r?Qt:Jt:ro&&ro in ot(t)?Iy(t):Gy(t)}function xc(t,i){return t>i}function Z1(t,i){return t!=null&&nt.call(t,i)}function K1(t,i){return t!=null&&i in ot(t)}function J1(t,i,a){return t>=on(i,a)&&t<Ht(i,a)}function wc(t,i,a){for(var d=a?ic:ga,v=t[0].length,A=t.length,O=A,M=U(A),L=1/0,ee=[];O--;){var ne=t[O];O&&i&&(ne=pt(ne,Mn(i))),L=on(ne.length,L),M[O]=!a&&(i||v>=120&&ne.length>=120)?new oo(O&&ne):r}ne=t[0];var ae=-1,pe=M[0];e:for(;++ae<v&&ee.length<L;){var De=ne[ae],Ae=i?i(De):De;if(De=a||De!==0?De:0,!(pe?bs(pe,Ae):d(ee,Ae,a))){for(O=A;--O;){var ze=M[O];if(!(ze?bs(ze,Ae):d(t[O],Ae,a)))continue e}pe&&pe.push(Ae),ee.push(De)}}return ee}function Q1(t,i,a,d){return Er(t,function(v,A,O){i(d,a(v),A,O)}),d}function Is(t,i,a){i=Ci(i,t),t=Yd(t,i);var d=t==null?t:t[Sr(Jn(i))];return d==null?r:Vt(d,t,a)}function cd(t){return Et(t)&&pn(t)==de}function ey(t){return Et(t)&&pn(t)==Bt}function ty(t){return Et(t)&&pn(t)==be}function Bs(t,i,a,d,v){return t===i?!0:t==null||i==null||!Et(t)&&!Et(i)?t!==t&&i!==i:ny(t,i,a,d,Bs,v)}function ny(t,i,a,d,v,A){var O=Re(t),M=Re(i),L=O?Fe:sn(t),ee=M?Fe:sn(i);L=L==de?$e:L,ee=ee==de?$e:ee;var ne=L==$e,ae=ee==$e,pe=L==ee;if(pe&&Ai(t)){if(!Ai(i))return!1;O=!0,ne=!1}if(pe&&!ne)return A||(A=new cr),O||Xo(t)?Hd(t,i,a,d,v,A):Ny(t,i,L,a,d,v,A);if(!(a&b)){var De=ne&&nt.call(t,"__wrapped__"),Ae=ae&&nt.call(i,"__wrapped__");if(De||Ae){var ze=De?t.value():t,Se=Ae?i.value():i;return A||(A=new cr),v(ze,Se,a,d,A)}}return pe?(A||(A=new cr),Ty(t,i,a,d,v,A)):!1}function ry(t){return Et(t)&&sn(t)==Je}function bc(t,i,a,d){var v=a.length,A=v,O=!d;if(t==null)return!A;for(t=ot(t);v--;){var M=a[v];if(O&&M[2]?M[1]!==t[M[0]]:!(M[0]in t))return!1}for(;++v<A;){M=a[v];var L=M[0],ee=t[L],ne=M[1];if(O&&M[2]){if(ee===r&&!(L in t))return!1}else{var ae=new cr;if(d)var pe=d(ee,ne,L,t,i,ae);if(!(pe===r?Bs(ne,ee,b|_,d,ae):pe))return!1}}return!0}function ld(t){if(!_t(t)||jy(t))return!1;var i=Qr(t)?r1:Gi;return i.test(co(t))}function iy(t){return Et(t)&&pn(t)==It}function oy(t){return Et(t)&&sn(t)==yt}function sy(t){return Et(t)&&Ka(t.length)&&!!et[pn(t)]}function fd(t){return typeof t=="function"?t:t==null?An:typeof t=="object"?Re(t)?pd(t[0],t[1]):hd(t):Rh(t)}function Cc(t){if(!Ms(t))return c1(t);var i=[];for(var a in ot(t))nt.call(t,a)&&a!="constructor"&&i.push(a);return i}function ay(t){if(!_t(t))return qy(t);var i=Ms(t),a=[];for(var d in t)d=="constructor"&&(i||!nt.call(t,d))||a.push(d);return a}function Ec(t,i){return t<i}function dd(t,i){var a=-1,d=Cn(t)?U(t.length):[];return wi(t,function(v,A,O){d[++a]=i(v,A,O)}),d}function hd(t){var i=kc(t);return i.length==1&&i[0][2]?Wd(i[0][0],i[0][1]):function(a){return a===t||bc(a,t,i)}}function pd(t,i){return Hc(t)&&Ud(i)?Wd(Sr(t),i):function(a){var d=Jc(a,t);return d===r&&d===i?Qc(a,t):Bs(i,d,b|_)}}function Ma(t,i,a,d,v){t!==i&&Dc(i,function(A,O){if(v||(v=new cr),_t(A))uy(t,i,O,a,Ma,d,v);else{var M=d?d(Gc(t,O),A,O+"",t,i,v):r;M===r&&(M=A),yc(t,O,M)}},En)}function uy(t,i,a,d,v,A,O){var M=Gc(t,a),L=Gc(i,a),ee=O.get(L);if(ee){yc(t,a,ee);return}var ne=A?A(M,L,a+"",t,i,O):r,ae=ne===r;if(ae){var pe=Re(L),De=!pe&&Ai(L),Ae=!pe&&!De&&Xo(L);ne=L,pe||De||Ae?Re(M)?ne=M:Ft(M)?ne=bn(M):De?(ae=!1,ne=Ad(L,!0)):Ae?(ae=!1,ne=Sd(L,!0)):ne=[]:Ps(L)||lo(L)?(ne=M,lo(M)?ne=bh(M):(!_t(M)||Qr(M))&&(ne=Vd(L))):ae=!1}ae&&(O.set(L,ne),v(ne,L,d,A,O),O.delete(L)),yc(t,a,ne)}function gd(t,i){var a=t.length;if(a)return i+=i<0?a:0,Jr(i,a)?t[i]:r}function md(t,i,a){i.length?i=pt(i,function(A){return Re(A)?function(O){return ao(O,A.length===1?A[0]:A)}:A}):i=[An];var d=-1;i=pt(i,Mn(Ee()));var v=dd(t,function(A,O,M){var L=pt(i,function(ee){return ee(A)});return{criteria:L,index:++d,value:A}});return Mm(v,function(A,O){return xy(A,O,a)})}function cy(t,i){return yd(t,i,function(a,d){return Qc(t,d)})}function yd(t,i,a){for(var d=-1,v=i.length,A={};++d<v;){var O=i[d],M=ao(t,O);a(M,O)&&Rs(A,Ci(O,t),M)}return A}function ly(t){return function(i){return ao(i,t)}}function Ac(t,i,a,d){var v=d?Om:Po,A=-1,O=i.length,M=t;for(t===i&&(i=bn(i)),a&&(M=pt(t,Mn(a)));++A<O;)for(var L=0,ee=i[A],ne=a?a(ee):ee;(L=v(M,ne,L,d))>-1;)M!==t&&Ea.call(M,L,1),Ea.call(t,L,1);return t}function vd(t,i){for(var a=t?i.length:0,d=a-1;a--;){var v=i[a];if(a==d||v!==A){var A=v;Jr(v)?Ea.call(t,v,1):Tc(t,v)}}return t}function Sc(t,i){return t+Fa(Jf()*(i-t+1))}function fy(t,i,a,d){for(var v=-1,A=Ht(Sa((i-t)/(a||1)),0),O=U(A);A--;)O[d?A:++v]=t,t+=a;return O}function Fc(t,i){var a="";if(!t||i<1||i>ie)return a;do i%2&&(a+=t),i=Fa(i/2),i&&(t+=t);while(i);return a}function je(t,i){return Vc(Xd(t,i,An),t+"")}function dy(t){return td(Yo(t))}function hy(t,i){var a=Yo(t);return Va(a,so(i,0,a.length))}function Rs(t,i,a,d){if(!_t(t))return t;i=Ci(i,t);for(var v=-1,A=i.length,O=A-1,M=t;M!=null&&++v<A;){var L=Sr(i[v]),ee=a;if(L==="__proto__"||L==="constructor"||L==="prototype")return t;if(v!=O){var ne=M[L];ee=d?d(ne,L,M):r,ee===r&&(ee=_t(ne)?ne:Jr(i[v+1])?[]:{})}Ns(M,L,ee),M=M[L]}return t}var Dd=Na?function(t,i){return Na.set(t,i),t}:An,py=Aa?function(t,i){return Aa(t,"toString",{configurable:!0,enumerable:!1,value:tl(i),writable:!0})}:An;function gy(t){return Va(Yo(t))}function Kn(t,i,a){var d=-1,v=t.length;i<0&&(i=-i>v?0:v+i),a=a>v?v:a,a<0&&(a+=v),v=i>a?0:a-i>>>0,i>>>=0;for(var A=U(v);++d<v;)A[d]=t[d+i];return A}function my(t,i){var a;return wi(t,function(d,v,A){return a=i(d,v,A),!a}),!!a}function za(t,i,a){var d=0,v=t==null?d:t.length;if(typeof i=="number"&&i===i&&v<=ue){for(;d<v;){var A=d+v>>>1,O=t[A];O!==null&&!Pn(O)&&(a?O<=i:O<i)?d=A+1:v=A}return v}return Nc(t,i,An,a)}function Nc(t,i,a,d){var v=0,A=t==null?0:t.length;if(A===0)return 0;i=a(i);for(var O=i!==i,M=i===null,L=Pn(i),ee=i===r;v<A;){var ne=Fa((v+A)/2),ae=a(t[ne]),pe=ae!==r,De=ae===null,Ae=ae===ae,ze=Pn(ae);if(O)var Se=d||Ae;else ee?Se=Ae&&(d||pe):M?Se=Ae&&pe&&(d||!De):L?Se=Ae&&pe&&!De&&(d||!ze):De||ze?Se=!1:Se=d?ae<=i:ae<i;Se?v=ne+1:A=ne}return on(A,le)}function _d(t,i){for(var a=-1,d=t.length,v=0,A=[];++a<d;){var O=t[a],M=i?i(O):O;if(!a||!lr(M,L)){var L=M;A[v++]=O===0?0:O}}return A}function xd(t){return typeof t=="number"?t:Pn(t)?oe:+t}function zn(t){if(typeof t=="string")return t;if(Re(t))return pt(t,zn)+"";if(Pn(t))return Qf?Qf.call(t):"";var i=t+"";return i=="0"&&1/t==-W?"-0":i}function bi(t,i,a){var d=-1,v=ga,A=t.length,O=!0,M=[],L=M;if(a)O=!1,v=ic;else if(A>=s){var ee=i?null:Sy(t);if(ee)return ya(ee);O=!1,v=bs,L=new oo}else L=i?[]:M;e:for(;++d<A;){var ne=t[d],ae=i?i(ne):ne;if(ne=a||ne!==0?ne:0,O&&ae===ae){for(var pe=L.length;pe--;)if(L[pe]===ae)continue e;i&&L.push(ae),M.push(ne)}else v(L,ae,a)||(L!==M&&L.push(ae),M.push(ne))}return M}function Tc(t,i){return i=Ci(i,t),t=Yd(t,i),t==null||delete t[Sr(Jn(i))]}function wd(t,i,a,d){return Rs(t,i,a(ao(t,i)),d)}function Pa(t,i,a,d){for(var v=t.length,A=d?v:-1;(d?A--:++A<v)&&i(t[A],A,t););return a?Kn(t,d?0:A,d?A+1:v):Kn(t,d?A+1:0,d?v:A)}function bd(t,i){var a=t;return a instanceof Ge&&(a=a.value()),oc(i,function(d,v){return v.func.apply(v.thisArg,Di([d],v.args))},a)}function Ic(t,i,a){var d=t.length;if(d<2)return d?bi(t[0]):[];for(var v=-1,A=U(d);++v<d;)for(var O=t[v],M=-1;++M<d;)M!=v&&(A[v]=Ts(A[v]||O,t[M],i,a));return bi(Zt(A,1),i,a)}function Cd(t,i,a){for(var d=-1,v=t.length,A=i.length,O={};++d<v;){var M=d<A?i[d]:r;a(O,t[d],M)}return O}function Bc(t){return Ft(t)?t:[]}function Rc(t){return typeof t=="function"?t:An}function Ci(t,i){return Re(t)?t:Hc(t,i)?[t]:Qd(Ke(t))}var yy=je;function Ei(t,i,a){var d=t.length;return a=a===r?d:a,!i&&a>=d?t:Kn(t,i,a)}var Ed=i1||function(t){return ye.clearTimeout(t)};function Ad(t,i){if(i)return t.slice();var a=t.length,d=Wf?Wf(a):new t.constructor(a);return t.copy(d),d}function Oc(t){var i=new t.constructor(t.byteLength);return new ba(i).set(new ba(t)),i}function vy(t,i){var a=i?Oc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function Dy(t){var i=new t.constructor(t.source,rn.exec(t));return i.lastIndex=t.lastIndex,i}function _y(t){return Fs?ot(Fs.call(t)):{}}function Sd(t,i){var a=i?Oc(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Fd(t,i){if(t!==i){var a=t!==r,d=t===null,v=t===t,A=Pn(t),O=i!==r,M=i===null,L=i===i,ee=Pn(i);if(!M&&!ee&&!A&&t>i||A&&O&&L&&!M&&!ee||d&&O&&L||!a&&L||!v)return 1;if(!d&&!A&&!ee&&t<i||ee&&a&&v&&!d&&!A||M&&a&&v||!O&&v||!L)return-1}return 0}function xy(t,i,a){for(var d=-1,v=t.criteria,A=i.criteria,O=v.length,M=a.length;++d<O;){var L=Fd(v[d],A[d]);if(L){if(d>=M)return L;var ee=a[d];return L*(ee=="desc"?-1:1)}}return t.index-i.index}function Nd(t,i,a,d){for(var v=-1,A=t.length,O=a.length,M=-1,L=i.length,ee=Ht(A-O,0),ne=U(L+ee),ae=!d;++M<L;)ne[M]=i[M];for(;++v<O;)(ae||v<A)&&(ne[a[v]]=t[v]);for(;ee--;)ne[M++]=t[v++];return ne}function Td(t,i,a,d){for(var v=-1,A=t.length,O=-1,M=a.length,L=-1,ee=i.length,ne=Ht(A-M,0),ae=U(ne+ee),pe=!d;++v<ne;)ae[v]=t[v];for(var De=v;++L<ee;)ae[De+L]=i[L];for(;++O<M;)(pe||v<A)&&(ae[De+a[O]]=t[v++]);return ae}function bn(t,i){var a=-1,d=t.length;for(i||(i=U(d));++a<d;)i[a]=t[a];return i}function Ar(t,i,a,d){var v=!a;a||(a={});for(var A=-1,O=i.length;++A<O;){var M=i[A],L=d?d(a[M],t[M],M,a,t):r;L===r&&(L=t[M]),v?Yr(a,M,L):Ns(a,M,L)}return a}function wy(t,i){return Ar(t,Lc(t),i)}function by(t,i){return Ar(t,qd(t),i)}function $a(t,i){return function(a,d){var v=Re(a)?Fm:V1,A=i?i():{};return v(a,t,Ee(d,2),A)}}function Vo(t){return je(function(i,a){var d=-1,v=a.length,A=v>1?a[v-1]:r,O=v>2?a[2]:r;for(A=t.length>3&&typeof A=="function"?(v--,A):r,O&&gn(a[0],a[1],O)&&(A=v<3?r:A,v=1),i=ot(i);++d<v;){var M=a[d];M&&t(i,M,d,A)}return i})}function Id(t,i){return function(a,d){if(a==null)return a;if(!Cn(a))return t(a,d);for(var v=a.length,A=i?v:-1,O=ot(a);(i?A--:++A<v)&&d(O[A],A,O)!==!1;);return a}}function Bd(t){return function(i,a,d){for(var v=-1,A=ot(i),O=d(i),M=O.length;M--;){var L=O[t?M:++v];if(a(A[L],L,A)===!1)break}return i}}function Cy(t,i,a){var d=i&C,v=Os(t);function A(){var O=this&&this!==ye&&this instanceof A?v:t;return O.apply(d?a:this,arguments)}return A}function Rd(t){return function(i){i=Ke(i);var a=$o(i)?ur(i):r,d=a?a[0]:i.charAt(0),v=a?Ei(a,1).join(""):i.slice(1);return d[t]()+v}}function Uo(t){return function(i){return oc(Ih(Th(i).replace(yi,"")),t,"")}}function Os(t){return function(){var i=arguments;switch(i.length){case 0:return new t;case 1:return new t(i[0]);case 2:return new t(i[0],i[1]);case 3:return new t(i[0],i[1],i[2]);case 4:return new t(i[0],i[1],i[2],i[3]);case 5:return new t(i[0],i[1],i[2],i[3],i[4]);case 6:return new t(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new t(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var a=Go(t.prototype),d=t.apply(a,i);return _t(d)?d:a}}function Ey(t,i,a){var d=Os(t);function v(){for(var A=arguments.length,O=U(A),M=A,L=Wo(v);M--;)O[M]=arguments[M];var ee=A<3&&O[0]!==L&&O[A-1]!==L?[]:_i(O,L);if(A-=ee.length,A<a)return $d(t,i,ja,v.placeholder,r,O,ee,r,r,a-A);var ne=this&&this!==ye&&this instanceof v?d:t;return Vt(ne,this,O)}return v}function Od(t){return function(i,a,d){var v=ot(i);if(!Cn(i)){var A=Ee(a,3);i=Ut(i),a=function(M){return A(v[M],M,v)}}var O=t(i,a,d);return O>-1?v[A?i[O]:O]:r}}function Md(t){return Kr(function(i){var a=i.length,d=a,v=Yn.prototype.thru;for(t&&i.reverse();d--;){var A=i[d];if(typeof A!="function")throw new Xn(l);if(v&&!O&&qa(A)=="wrapper")var O=new Yn([],!0)}for(d=O?d:a;++d<a;){A=i[d];var M=qa(A),L=M=="wrapper"?jc(A):r;L&&qc(L[0])&&L[1]==(Y|R|P|Q)&&!L[4].length&&L[9]==1?O=O[qa(L[0])].apply(O,L[3]):O=A.length==1&&qc(A)?O[M]():O.thru(A)}return function(){var ee=arguments,ne=ee[0];if(O&&ee.length==1&&Re(ne))return O.plant(ne).value();for(var ae=0,pe=a?i[ae].apply(this,ee):ne;++ae<a;)pe=i[ae].call(this,pe);return pe}})}function ja(t,i,a,d,v,A,O,M,L,ee){var ne=i&Y,ae=i&C,pe=i&D,De=i&(R|N),Ae=i&$,ze=pe?r:Os(t);function Se(){for(var qe=arguments.length,Ue=U(qe),$n=qe;$n--;)Ue[$n]=arguments[$n];if(De)var mn=Wo(Se),jn=Pm(Ue,mn);if(d&&(Ue=Nd(Ue,d,v,De)),A&&(Ue=Td(Ue,A,O,De)),qe-=jn,De&&qe<ee){var Nt=_i(Ue,mn);return $d(t,i,ja,Se.placeholder,a,Ue,Nt,M,L,ee-qe)}var fr=ae?a:this,ti=pe?fr[t]:t;return qe=Ue.length,M?Ue=Vy(Ue,M):Ae&&qe>1&&Ue.reverse(),ne&&L<qe&&(Ue.length=L),this&&this!==ye&&this instanceof Se&&(ti=ze||Os(ti)),ti.apply(fr,Ue)}return Se}function zd(t,i){return function(a,d){return Q1(a,t,i(d),{})}}function ka(t,i){return function(a,d){var v;if(a===r&&d===r)return i;if(a!==r&&(v=a),d!==r){if(v===r)return d;typeof a=="string"||typeof d=="string"?(a=zn(a),d=zn(d)):(a=xd(a),d=xd(d)),v=t(a,d)}return v}}function Mc(t){return Kr(function(i){return i=pt(i,Mn(Ee())),je(function(a){var d=this;return t(i,function(v){return Vt(v,d,a)})})})}function La(t,i){i=i===r?" ":zn(i);var a=i.length;if(a<2)return a?Fc(i,t):i;var d=Fc(i,Sa(t/jo(i)));return $o(i)?Ei(ur(d),0,t).join(""):d.slice(0,t)}function Ay(t,i,a,d){var v=i&C,A=Os(t);function O(){for(var M=-1,L=arguments.length,ee=-1,ne=d.length,ae=U(ne+L),pe=this&&this!==ye&&this instanceof O?A:t;++ee<ne;)ae[ee]=d[ee];for(;L--;)ae[ee++]=arguments[++M];return Vt(pe,v?a:this,ae)}return O}function Pd(t){return function(i,a,d){return d&&typeof d!="number"&&gn(i,a,d)&&(a=d=r),i=ei(i),a===r?(a=i,i=0):a=ei(a),d=d===r?i<a?1:-1:ei(d),fy(i,a,d,t)}}function Ha(t){return function(i,a){return typeof i=="string"&&typeof a=="string"||(i=Qn(i),a=Qn(a)),t(i,a)}}function $d(t,i,a,d,v,A,O,M,L,ee){var ne=i&R,ae=ne?O:r,pe=ne?r:O,De=ne?A:r,Ae=ne?r:A;i|=ne?P:H,i&=~(ne?H:P),i&E||(i&=~(C|D));var ze=[t,i,v,De,ae,Ae,pe,M,L,ee],Se=a.apply(r,ze);return qc(t)&&Zd(Se,ze),Se.placeholder=d,Kd(Se,t,i)}function zc(t){var i=Lt[t];return function(a,d){if(a=Qn(a),d=d==null?0:on(Me(d),292),d&&Kf(a)){var v=(Ke(a)+"e").split("e"),A=i(v[0]+"e"+(+v[1]+d));return v=(Ke(A)+"e").split("e"),+(v[0]+"e"+(+v[1]-d))}return i(a)}}var Sy=Ho&&1/ya(new Ho([,-0]))[1]==W?function(t){return new Ho(t)}:il;function jd(t){return function(i){var a=sn(i);return a==Je?dc(i):a==yt?Gm(i):zm(i,t(i))}}function Zr(t,i,a,d,v,A,O,M){var L=i&D;if(!L&&typeof t!="function")throw new Xn(l);var ee=d?d.length:0;if(ee||(i&=~(P|H),d=v=r),O=O===r?O:Ht(Me(O),0),M=M===r?M:Me(M),ee-=v?v.length:0,i&H){var ne=d,ae=v;d=v=r}var pe=L?r:jc(t),De=[t,i,a,d,v,ne,ae,A,O,M];if(pe&&Hy(De,pe),t=De[0],i=De[1],a=De[2],d=De[3],v=De[4],M=De[9]=De[9]===r?L?0:t.length:Ht(De[9]-ee,0),!M&&i&(R|N)&&(i&=~(R|N)),!i||i==C)var Ae=Cy(t,i,a);else i==R||i==N?Ae=Ey(t,i,M):(i==P||i==(C|P))&&!v.length?Ae=Ay(t,i,a,d):Ae=ja.apply(r,De);var ze=pe?Dd:Zd;return Kd(ze(Ae,De),t,i)}function kd(t,i,a,d){return t===r||lr(t,Lo[a])&&!nt.call(d,a)?i:t}function Ld(t,i,a,d,v,A){return _t(t)&&_t(i)&&(A.set(i,t),Ma(t,i,r,Ld,A),A.delete(i)),t}function Fy(t){return Ps(t)?r:t}function Hd(t,i,a,d,v,A){var O=a&b,M=t.length,L=i.length;if(M!=L&&!(O&&L>M))return!1;var ee=A.get(t),ne=A.get(i);if(ee&&ne)return ee==i&&ne==t;var ae=-1,pe=!0,De=a&_?new oo:r;for(A.set(t,i),A.set(i,t);++ae<M;){var Ae=t[ae],ze=i[ae];if(d)var Se=O?d(ze,Ae,ae,i,t,A):d(Ae,ze,ae,t,i,A);if(Se!==r){if(Se)continue;pe=!1;break}if(De){if(!sc(i,function(qe,Ue){if(!bs(De,Ue)&&(Ae===qe||v(Ae,qe,a,d,A)))return De.push(Ue)})){pe=!1;break}}else if(!(Ae===ze||v(Ae,ze,a,d,A))){pe=!1;break}}return A.delete(t),A.delete(i),pe}function Ny(t,i,a,d,v,A,O){switch(a){case bt:if(t.byteLength!=i.byteLength||t.byteOffset!=i.byteOffset)return!1;t=t.buffer,i=i.buffer;case Bt:return!(t.byteLength!=i.byteLength||!A(new ba(t),new ba(i)));case me:case be:case Qe:return lr(+t,+i);case xt:return t.name==i.name&&t.message==i.message;case It:case jt:return t==i+"";case Je:var M=dc;case yt:var L=d&b;if(M||(M=ya),t.size!=i.size&&!L)return!1;var ee=O.get(t);if(ee)return ee==i;d|=_,O.set(t,i);var ne=Hd(M(t),M(i),d,v,A,O);return O.delete(t),ne;case wt:if(Fs)return Fs.call(t)==Fs.call(i)}return!1}function Ty(t,i,a,d,v,A){var O=a&b,M=Pc(t),L=M.length,ee=Pc(i),ne=ee.length;if(L!=ne&&!O)return!1;for(var ae=L;ae--;){var pe=M[ae];if(!(O?pe in i:nt.call(i,pe)))return!1}var De=A.get(t),Ae=A.get(i);if(De&&Ae)return De==i&&Ae==t;var ze=!0;A.set(t,i),A.set(i,t);for(var Se=O;++ae<L;){pe=M[ae];var qe=t[pe],Ue=i[pe];if(d)var $n=O?d(Ue,qe,pe,i,t,A):d(qe,Ue,pe,t,i,A);if(!($n===r?qe===Ue||v(qe,Ue,a,d,A):$n)){ze=!1;break}Se||(Se=pe=="constructor")}if(ze&&!Se){var mn=t.constructor,jn=i.constructor;mn!=jn&&"constructor"in t&&"constructor"in i&&!(typeof mn=="function"&&mn instanceof mn&&typeof jn=="function"&&jn instanceof jn)&&(ze=!1)}return A.delete(t),A.delete(i),ze}function Kr(t){return Vc(Xd(t,r,rh),t+"")}function Pc(t){return ud(t,Ut,Lc)}function $c(t){return ud(t,En,qd)}var jc=Na?function(t){return Na.get(t)}:il;function qa(t){for(var i=t.name+"",a=qo[i],d=nt.call(qo,i)?a.length:0;d--;){var v=a[d],A=v.func;if(A==null||A==t)return v.name}return i}function Wo(t){var i=nt.call(w,"placeholder")?w:t;return i.placeholder}function Ee(){var t=w.iteratee||nl;return t=t===nl?fd:t,arguments.length?t(arguments[0],arguments[1]):t}function Ga(t,i){var a=t.__data__;return $y(i)?a[typeof i=="string"?"string":"hash"]:a.map}function kc(t){for(var i=Ut(t),a=i.length;a--;){var d=i[a],v=t[d];i[a]=[d,v,Ud(v)]}return i}function uo(t,i){var a=Lm(t,i);return ld(a)?a:r}function Iy(t){var i=nt.call(t,ro),a=t[ro];try{t[ro]=r;var d=!0}catch{}var v=xa.call(t);return d&&(i?t[ro]=a:delete t[ro]),v}var Lc=pc?function(t){return t==null?[]:(t=ot(t),vi(pc(t),function(i){return Yf.call(t,i)}))}:ol,qd=pc?function(t){for(var i=[];t;)Di(i,Lc(t)),t=Ca(t);return i}:ol,sn=pn;(gc&&sn(new gc(new ArrayBuffer(1)))!=bt||Es&&sn(new Es)!=Je||mc&&sn(mc.resolve())!=_e||Ho&&sn(new Ho)!=yt||As&&sn(new As)!=Yt)&&(sn=function(t){var i=pn(t),a=i==$e?t.constructor:r,d=a?co(a):"";if(d)switch(d){case h1:return bt;case p1:return Je;case g1:return _e;case m1:return yt;case y1:return Yt}return i});function By(t,i,a){for(var d=-1,v=a.length;++d<v;){var A=a[d],O=A.size;switch(A.type){case"drop":t+=O;break;case"dropRight":i-=O;break;case"take":i=on(i,t+O);break;case"takeRight":t=Ht(t,i-O);break}}return{start:t,end:i}}function Ry(t){var i=t.match(Rn);return i?i[1].split(ji):[]}function Gd(t,i,a){i=Ci(i,t);for(var d=-1,v=i.length,A=!1;++d<v;){var O=Sr(i[d]);if(!(A=t!=null&&a(t,O)))break;t=t[O]}return A||++d!=v?A:(v=t==null?0:t.length,!!v&&Ka(v)&&Jr(O,v)&&(Re(t)||lo(t)))}function Oy(t){var i=t.length,a=new t.constructor(i);return i&&typeof t[0]=="string"&&nt.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Vd(t){return typeof t.constructor=="function"&&!Ms(t)?Go(Ca(t)):{}}function My(t,i,a){var d=t.constructor;switch(i){case Bt:return Oc(t);case me:case be:return new d(+t);case bt:return vy(t,a);case en:case vt:case at:case Rt:case un:case tn:case Dt:case Ct:case nn:return Sd(t,a);case Je:return new d;case Qe:case jt:return new d(t);case It:return Dy(t);case yt:return new d;case wt:return _y(t)}}function zy(t,i){var a=i.length;if(!a)return t;var d=a-1;return i[d]=(a>1?"& ":"")+i[d],i=i.join(a>2?", ":" "),t.replace(_n,`{
/* [wrapped with `+i+`] */
`)}function Py(t){return Re(t)||lo(t)||!!(Zf&&t&&t[Zf])}function Jr(t,i){var a=typeof t;return i=i??ie,!!i&&(a=="number"||a!="symbol"&&Ui.test(t))&&t>-1&&t%1==0&&t<i}function gn(t,i,a){if(!_t(a))return!1;var d=typeof i;return(d=="number"?Cn(a)&&Jr(i,a.length):d=="string"&&i in a)?lr(a[i],t):!1}function Hc(t,i){if(Re(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Pn(t)?!0:ln.test(t)||!rr.test(t)||i!=null&&t in ot(i)}function $y(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}function qc(t){var i=qa(t),a=w[i];if(typeof a!="function"||!(i in Ge.prototype))return!1;if(t===a)return!0;var d=jc(a);return!!d&&t===d[0]}function jy(t){return!!Uf&&Uf in t}var ky=Da?Qr:sl;function Ms(t){var i=t&&t.constructor,a=typeof i=="function"&&i.prototype||Lo;return t===a}function Ud(t){return t===t&&!_t(t)}function Wd(t,i){return function(a){return a==null?!1:a[t]===i&&(i!==r||t in ot(a))}}function Ly(t){var i=Ya(t,function(d){return a.size===h&&a.clear(),d}),a=i.cache;return i}function Hy(t,i){var a=t[1],d=i[1],v=a|d,A=v<(C|D|Y),O=d==Y&&a==R||d==Y&&a==Q&&t[7].length<=i[8]||d==(Y|Q)&&i[7].length<=i[8]&&a==R;if(!(A||O))return t;d&C&&(t[2]=i[2],v|=a&C?0:E);var M=i[3];if(M){var L=t[3];t[3]=L?Nd(L,M,i[4]):M,t[4]=L?_i(t[3],p):i[4]}return M=i[5],M&&(L=t[5],t[5]=L?Td(L,M,i[6]):M,t[6]=L?_i(t[5],p):i[6]),M=i[7],M&&(t[7]=M),d&Y&&(t[8]=t[8]==null?i[8]:on(t[8],i[8])),t[9]==null&&(t[9]=i[9]),t[0]=i[0],t[1]=v,t}function qy(t){var i=[];if(t!=null)for(var a in ot(t))i.push(a);return i}function Gy(t){return xa.call(t)}function Xd(t,i,a){return i=Ht(i===r?t.length-1:i,0),function(){for(var d=arguments,v=-1,A=Ht(d.length-i,0),O=U(A);++v<A;)O[v]=d[i+v];v=-1;for(var M=U(i+1);++v<i;)M[v]=d[v];return M[i]=a(O),Vt(t,this,M)}}function Yd(t,i){return i.length<2?t:ao(t,Kn(i,0,-1))}function Vy(t,i){for(var a=t.length,d=on(i.length,a),v=bn(t);d--;){var A=i[d];t[d]=Jr(A,a)?v[A]:r}return t}function Gc(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var Zd=Jd(Dd),zs=s1||function(t,i){return ye.setTimeout(t,i)},Vc=Jd(py);function Kd(t,i,a){var d=i+"";return Vc(t,zy(d,Uy(Ry(d),a)))}function Jd(t){var i=0,a=0;return function(){var d=l1(),v=Z-(d-a);if(a=d,v>0){if(++i>=J)return arguments[0]}else i=0;return t.apply(r,arguments)}}function Va(t,i){var a=-1,d=t.length,v=d-1;for(i=i===r?d:i;++a<i;){var A=Sc(a,v),O=t[A];t[A]=t[a],t[a]=O}return t.length=i,t}var Qd=Ly(function(t){var i=[];return t.charCodeAt(0)===46&&i.push(""),t.replace(Pi,function(a,d,v,A){i.push(v?A.replace(di,"$1"):d||a)}),i});function Sr(t){if(typeof t=="string"||Pn(t))return t;var i=t+"";return i=="0"&&1/t==-W?"-0":i}function co(t){if(t!=null){try{return _a.call(t)}catch{}try{return t+""}catch{}}return""}function Uy(t,i){return Wn(ge,function(a){var d="_."+a[0];i&a[1]&&!ga(t,d)&&t.push(d)}),t.sort()}function eh(t){if(t instanceof Ge)return t.clone();var i=new Yn(t.__wrapped__,t.__chain__);return i.__actions__=bn(t.__actions__),i.__index__=t.__index__,i.__values__=t.__values__,i}function Wy(t,i,a){(a?gn(t,i,a):i===r)?i=1:i=Ht(Me(i),0);var d=t==null?0:t.length;if(!d||i<1)return[];for(var v=0,A=0,O=U(Sa(d/i));v<d;)O[A++]=Kn(t,v,v+=i);return O}function Xy(t){for(var i=-1,a=t==null?0:t.length,d=0,v=[];++i<a;){var A=t[i];A&&(v[d++]=A)}return v}function Yy(){var t=arguments.length;if(!t)return[];for(var i=U(t-1),a=arguments[0],d=t;d--;)i[d-1]=arguments[d];return Di(Re(a)?bn(a):[a],Zt(i,1))}var Zy=je(function(t,i){return Ft(t)?Ts(t,Zt(i,1,Ft,!0)):[]}),Ky=je(function(t,i){var a=Jn(i);return Ft(a)&&(a=r),Ft(t)?Ts(t,Zt(i,1,Ft,!0),Ee(a,2)):[]}),Jy=je(function(t,i){var a=Jn(i);return Ft(a)&&(a=r),Ft(t)?Ts(t,Zt(i,1,Ft,!0),r,a):[]});function Qy(t,i,a){var d=t==null?0:t.length;return d?(i=a||i===r?1:Me(i),Kn(t,i<0?0:i,d)):[]}function ev(t,i,a){var d=t==null?0:t.length;return d?(i=a||i===r?1:Me(i),i=d-i,Kn(t,0,i<0?0:i)):[]}function tv(t,i){return t&&t.length?Pa(t,Ee(i,3),!0,!0):[]}function nv(t,i){return t&&t.length?Pa(t,Ee(i,3),!0):[]}function rv(t,i,a,d){var v=t==null?0:t.length;return v?(a&&typeof a!="number"&&gn(t,i,a)&&(a=0,d=v),Y1(t,i,a,d)):[]}function th(t,i,a){var d=t==null?0:t.length;if(!d)return-1;var v=a==null?0:Me(a);return v<0&&(v=Ht(d+v,0)),ma(t,Ee(i,3),v)}function nh(t,i,a){var d=t==null?0:t.length;if(!d)return-1;var v=d-1;return a!==r&&(v=Me(a),v=a<0?Ht(d+v,0):on(v,d-1)),ma(t,Ee(i,3),v,!0)}function rh(t){var i=t==null?0:t.length;return i?Zt(t,1):[]}function iv(t){var i=t==null?0:t.length;return i?Zt(t,W):[]}function ov(t,i){var a=t==null?0:t.length;return a?(i=i===r?1:Me(i),Zt(t,i)):[]}function sv(t){for(var i=-1,a=t==null?0:t.length,d={};++i<a;){var v=t[i];d[v[0]]=v[1]}return d}function ih(t){return t&&t.length?t[0]:r}function av(t,i,a){var d=t==null?0:t.length;if(!d)return-1;var v=a==null?0:Me(a);return v<0&&(v=Ht(d+v,0)),Po(t,i,v)}function uv(t){var i=t==null?0:t.length;return i?Kn(t,0,-1):[]}var cv=je(function(t){var i=pt(t,Bc);return i.length&&i[0]===t[0]?wc(i):[]}),lv=je(function(t){var i=Jn(t),a=pt(t,Bc);return i===Jn(a)?i=r:a.pop(),a.length&&a[0]===t[0]?wc(a,Ee(i,2)):[]}),fv=je(function(t){var i=Jn(t),a=pt(t,Bc);return i=typeof i=="function"?i:r,i&&a.pop(),a.length&&a[0]===t[0]?wc(a,r,i):[]});function dv(t,i){return t==null?"":u1.call(t,i)}function Jn(t){var i=t==null?0:t.length;return i?t[i-1]:r}function hv(t,i,a){var d=t==null?0:t.length;if(!d)return-1;var v=d;return a!==r&&(v=Me(a),v=v<0?Ht(d+v,0):on(v,d-1)),i===i?Um(t,i,v):ma(t,$f,v,!0)}function pv(t,i){return t&&t.length?gd(t,Me(i)):r}var gv=je(oh);function oh(t,i){return t&&t.length&&i&&i.length?Ac(t,i):t}function mv(t,i,a){return t&&t.length&&i&&i.length?Ac(t,i,Ee(a,2)):t}function yv(t,i,a){return t&&t.length&&i&&i.length?Ac(t,i,r,a):t}var vv=Kr(function(t,i){var a=t==null?0:t.length,d=vc(t,i);return vd(t,pt(i,function(v){return Jr(v,a)?+v:v}).sort(Fd)),d});function Dv(t,i){var a=[];if(!(t&&t.length))return a;var d=-1,v=[],A=t.length;for(i=Ee(i,3);++d<A;){var O=t[d];i(O,d,t)&&(a.push(O),v.push(d))}return vd(t,v),a}function Uc(t){return t==null?t:d1.call(t)}function _v(t,i,a){var d=t==null?0:t.length;return d?(a&&typeof a!="number"&&gn(t,i,a)?(i=0,a=d):(i=i==null?0:Me(i),a=a===r?d:Me(a)),Kn(t,i,a)):[]}function xv(t,i){return za(t,i)}function wv(t,i,a){return Nc(t,i,Ee(a,2))}function bv(t,i){var a=t==null?0:t.length;if(a){var d=za(t,i);if(d<a&&lr(t[d],i))return d}return-1}function Cv(t,i){return za(t,i,!0)}function Ev(t,i,a){return Nc(t,i,Ee(a,2),!0)}function Av(t,i){var a=t==null?0:t.length;if(a){var d=za(t,i,!0)-1;if(lr(t[d],i))return d}return-1}function Sv(t){return t&&t.length?_d(t):[]}function Fv(t,i){return t&&t.length?_d(t,Ee(i,2)):[]}function Nv(t){var i=t==null?0:t.length;return i?Kn(t,1,i):[]}function Tv(t,i,a){return t&&t.length?(i=a||i===r?1:Me(i),Kn(t,0,i<0?0:i)):[]}function Iv(t,i,a){var d=t==null?0:t.length;return d?(i=a||i===r?1:Me(i),i=d-i,Kn(t,i<0?0:i,d)):[]}function Bv(t,i){return t&&t.length?Pa(t,Ee(i,3),!1,!0):[]}function Rv(t,i){return t&&t.length?Pa(t,Ee(i,3)):[]}var Ov=je(function(t){return bi(Zt(t,1,Ft,!0))}),Mv=je(function(t){var i=Jn(t);return Ft(i)&&(i=r),bi(Zt(t,1,Ft,!0),Ee(i,2))}),zv=je(function(t){var i=Jn(t);return i=typeof i=="function"?i:r,bi(Zt(t,1,Ft,!0),r,i)});function Pv(t){return t&&t.length?bi(t):[]}function $v(t,i){return t&&t.length?bi(t,Ee(i,2)):[]}function jv(t,i){return i=typeof i=="function"?i:r,t&&t.length?bi(t,r,i):[]}function Wc(t){if(!(t&&t.length))return[];var i=0;return t=vi(t,function(a){if(Ft(a))return i=Ht(a.length,i),!0}),lc(i,function(a){return pt(t,ac(a))})}function sh(t,i){if(!(t&&t.length))return[];var a=Wc(t);return i==null?a:pt(a,function(d){return Vt(i,r,d)})}var kv=je(function(t,i){return Ft(t)?Ts(t,i):[]}),Lv=je(function(t){return Ic(vi(t,Ft))}),Hv=je(function(t){var i=Jn(t);return Ft(i)&&(i=r),Ic(vi(t,Ft),Ee(i,2))}),qv=je(function(t){var i=Jn(t);return i=typeof i=="function"?i:r,Ic(vi(t,Ft),r,i)}),Gv=je(Wc);function Vv(t,i){return Cd(t||[],i||[],Ns)}function Uv(t,i){return Cd(t||[],i||[],Rs)}var Wv=je(function(t){var i=t.length,a=i>1?t[i-1]:r;return a=typeof a=="function"?(t.pop(),a):r,sh(t,a)});function ah(t){var i=w(t);return i.__chain__=!0,i}function Xv(t,i){return i(t),t}function Ua(t,i){return i(t)}var Yv=Kr(function(t){var i=t.length,a=i?t[0]:0,d=this.__wrapped__,v=function(A){return vc(A,t)};return i>1||this.__actions__.length||!(d instanceof Ge)||!Jr(a)?this.thru(v):(d=d.slice(a,+a+(i?1:0)),d.__actions__.push({func:Ua,args:[v],thisArg:r}),new Yn(d,this.__chain__).thru(function(A){return i&&!A.length&&A.push(r),A}))});function Zv(){return ah(this)}function Kv(){return new Yn(this.value(),this.__chain__)}function Jv(){this.__values__===r&&(this.__values__=xh(this.value()));var t=this.__index__>=this.__values__.length,i=t?r:this.__values__[this.__index__++];return{done:t,value:i}}function Qv(){return this}function eD(t){for(var i,a=this;a instanceof Ia;){var d=eh(a);d.__index__=0,d.__values__=r,i?v.__wrapped__=d:i=d;var v=d;a=a.__wrapped__}return v.__wrapped__=t,i}function tD(){var t=this.__wrapped__;if(t instanceof Ge){var i=t;return this.__actions__.length&&(i=new Ge(this)),i=i.reverse(),i.__actions__.push({func:Ua,args:[Uc],thisArg:r}),new Yn(i,this.__chain__)}return this.thru(Uc)}function nD(){return bd(this.__wrapped__,this.__actions__)}var rD=$a(function(t,i,a){nt.call(t,a)?++t[a]:Yr(t,a,1)});function iD(t,i,a){var d=Re(t)?zf:X1;return a&&gn(t,i,a)&&(i=r),d(t,Ee(i,3))}function oD(t,i){var a=Re(t)?vi:sd;return a(t,Ee(i,3))}var sD=Od(th),aD=Od(nh);function uD(t,i){return Zt(Wa(t,i),1)}function cD(t,i){return Zt(Wa(t,i),W)}function lD(t,i,a){return a=a===r?1:Me(a),Zt(Wa(t,i),a)}function uh(t,i){var a=Re(t)?Wn:wi;return a(t,Ee(i,3))}function ch(t,i){var a=Re(t)?Nm:od;return a(t,Ee(i,3))}var fD=$a(function(t,i,a){nt.call(t,a)?t[a].push(i):Yr(t,a,[i])});function dD(t,i,a,d){t=Cn(t)?t:Yo(t),a=a&&!d?Me(a):0;var v=t.length;return a<0&&(a=Ht(v+a,0)),Ja(t)?a<=v&&t.indexOf(i,a)>-1:!!v&&Po(t,i,a)>-1}var hD=je(function(t,i,a){var d=-1,v=typeof i=="function",A=Cn(t)?U(t.length):[];return wi(t,function(O){A[++d]=v?Vt(i,O,a):Is(O,i,a)}),A}),pD=$a(function(t,i,a){Yr(t,a,i)});function Wa(t,i){var a=Re(t)?pt:dd;return a(t,Ee(i,3))}function gD(t,i,a,d){return t==null?[]:(Re(i)||(i=i==null?[]:[i]),a=d?r:a,Re(a)||(a=a==null?[]:[a]),md(t,i,a))}var mD=$a(function(t,i,a){t[a?0:1].push(i)},function(){return[[],[]]});function yD(t,i,a){var d=Re(t)?oc:kf,v=arguments.length<3;return d(t,Ee(i,4),a,v,wi)}function vD(t,i,a){var d=Re(t)?Tm:kf,v=arguments.length<3;return d(t,Ee(i,4),a,v,od)}function DD(t,i){var a=Re(t)?vi:sd;return a(t,Za(Ee(i,3)))}function _D(t){var i=Re(t)?td:dy;return i(t)}function xD(t,i,a){(a?gn(t,i,a):i===r)?i=1:i=Me(i);var d=Re(t)?q1:hy;return d(t,i)}function wD(t){var i=Re(t)?G1:gy;return i(t)}function bD(t){if(t==null)return 0;if(Cn(t))return Ja(t)?jo(t):t.length;var i=sn(t);return i==Je||i==yt?t.size:Cc(t).length}function CD(t,i,a){var d=Re(t)?sc:my;return a&&gn(t,i,a)&&(i=r),d(t,Ee(i,3))}var ED=je(function(t,i){if(t==null)return[];var a=i.length;return a>1&&gn(t,i[0],i[1])?i=[]:a>2&&gn(i[0],i[1],i[2])&&(i=[i[0]]),md(t,Zt(i,1),[])}),Xa=o1||function(){return ye.Date.now()};function AD(t,i){if(typeof i!="function")throw new Xn(l);return t=Me(t),function(){if(--t<1)return i.apply(this,arguments)}}function lh(t,i,a){return i=a?r:i,i=t&&i==null?t.length:i,Zr(t,Y,r,r,r,r,i)}function fh(t,i){var a;if(typeof i!="function")throw new Xn(l);return t=Me(t),function(){return--t>0&&(a=i.apply(this,arguments)),t<=1&&(i=r),a}}var Xc=je(function(t,i,a){var d=C;if(a.length){var v=_i(a,Wo(Xc));d|=P}return Zr(t,d,i,a,v)}),dh=je(function(t,i,a){var d=C|D;if(a.length){var v=_i(a,Wo(dh));d|=P}return Zr(i,d,t,a,v)});function hh(t,i,a){i=a?r:i;var d=Zr(t,R,r,r,r,r,r,i);return d.placeholder=hh.placeholder,d}function ph(t,i,a){i=a?r:i;var d=Zr(t,N,r,r,r,r,r,i);return d.placeholder=ph.placeholder,d}function gh(t,i,a){var d,v,A,O,M,L,ee=0,ne=!1,ae=!1,pe=!0;if(typeof t!="function")throw new Xn(l);i=Qn(i)||0,_t(a)&&(ne=!!a.leading,ae="maxWait"in a,A=ae?Ht(Qn(a.maxWait)||0,i):A,pe="trailing"in a?!!a.trailing:pe);function De(Nt){var fr=d,ti=v;return d=v=r,ee=Nt,O=t.apply(ti,fr),O}function Ae(Nt){return ee=Nt,M=zs(qe,i),ne?De(Nt):O}function ze(Nt){var fr=Nt-L,ti=Nt-ee,Oh=i-fr;return ae?on(Oh,A-ti):Oh}function Se(Nt){var fr=Nt-L,ti=Nt-ee;return L===r||fr>=i||fr<0||ae&&ti>=A}function qe(){var Nt=Xa();if(Se(Nt))return Ue(Nt);M=zs(qe,ze(Nt))}function Ue(Nt){return M=r,pe&&d?De(Nt):(d=v=r,O)}function $n(){M!==r&&Ed(M),ee=0,d=L=v=M=r}function mn(){return M===r?O:Ue(Xa())}function jn(){var Nt=Xa(),fr=Se(Nt);if(d=arguments,v=this,L=Nt,fr){if(M===r)return Ae(L);if(ae)return Ed(M),M=zs(qe,i),De(L)}return M===r&&(M=zs(qe,i)),O}return jn.cancel=$n,jn.flush=mn,jn}var SD=je(function(t,i){return id(t,1,i)}),FD=je(function(t,i,a){return id(t,Qn(i)||0,a)});function ND(t){return Zr(t,$)}function Ya(t,i){if(typeof t!="function"||i!=null&&typeof i!="function")throw new Xn(l);var a=function(){var d=arguments,v=i?i.apply(this,d):d[0],A=a.cache;if(A.has(v))return A.get(v);var O=t.apply(this,d);return a.cache=A.set(v,O)||A,O};return a.cache=new(Ya.Cache||Xr),a}Ya.Cache=Xr;function Za(t){if(typeof t!="function")throw new Xn(l);return function(){var i=arguments;switch(i.length){case 0:return!t.call(this);case 1:return!t.call(this,i[0]);case 2:return!t.call(this,i[0],i[1]);case 3:return!t.call(this,i[0],i[1],i[2])}return!t.apply(this,i)}}function TD(t){return fh(2,t)}var ID=yy(function(t,i){i=i.length==1&&Re(i[0])?pt(i[0],Mn(Ee())):pt(Zt(i,1),Mn(Ee()));var a=i.length;return je(function(d){for(var v=-1,A=on(d.length,a);++v<A;)d[v]=i[v].call(this,d[v]);return Vt(t,this,d)})}),Yc=je(function(t,i){var a=_i(i,Wo(Yc));return Zr(t,P,r,i,a)}),mh=je(function(t,i){var a=_i(i,Wo(mh));return Zr(t,H,r,i,a)}),BD=Kr(function(t,i){return Zr(t,Q,r,r,r,i)});function RD(t,i){if(typeof t!="function")throw new Xn(l);return i=i===r?i:Me(i),je(t,i)}function OD(t,i){if(typeof t!="function")throw new Xn(l);return i=i==null?0:Ht(Me(i),0),je(function(a){var d=a[i],v=Ei(a,0,i);return d&&Di(v,d),Vt(t,this,v)})}function MD(t,i,a){var d=!0,v=!0;if(typeof t!="function")throw new Xn(l);return _t(a)&&(d="leading"in a?!!a.leading:d,v="trailing"in a?!!a.trailing:v),gh(t,i,{leading:d,maxWait:i,trailing:v})}function zD(t){return lh(t,1)}function PD(t,i){return Yc(Rc(i),t)}function $D(){if(!arguments.length)return[];var t=arguments[0];return Re(t)?t:[t]}function jD(t){return Zn(t,x)}function kD(t,i){return i=typeof i=="function"?i:r,Zn(t,x,i)}function LD(t){return Zn(t,g|x)}function HD(t,i){return i=typeof i=="function"?i:r,Zn(t,g|x,i)}function qD(t,i){return i==null||rd(t,i,Ut(i))}function lr(t,i){return t===i||t!==t&&i!==i}var GD=Ha(xc),VD=Ha(function(t,i){return t>=i}),lo=cd(function(){return arguments}())?cd:function(t){return Et(t)&&nt.call(t,"callee")&&!Yf.call(t,"callee")},Re=U.isArray,UD=kt?Mn(kt):ey;function Cn(t){return t!=null&&Ka(t.length)&&!Qr(t)}function Ft(t){return Et(t)&&Cn(t)}function WD(t){return t===!0||t===!1||Et(t)&&pn(t)==me}var Ai=a1||sl,XD=wn?Mn(wn):ty;function YD(t){return Et(t)&&t.nodeType===1&&!Ps(t)}function ZD(t){if(t==null)return!0;if(Cn(t)&&(Re(t)||typeof t=="string"||typeof t.splice=="function"||Ai(t)||Xo(t)||lo(t)))return!t.length;var i=sn(t);if(i==Je||i==yt)return!t.size;if(Ms(t))return!Cc(t).length;for(var a in t)if(nt.call(t,a))return!1;return!0}function KD(t,i){return Bs(t,i)}function JD(t,i,a){a=typeof a=="function"?a:r;var d=a?a(t,i):r;return d===r?Bs(t,i,r,a):!!d}function Zc(t){if(!Et(t))return!1;var i=pn(t);return i==xt||i==Te||typeof t.message=="string"&&typeof t.name=="string"&&!Ps(t)}function QD(t){return typeof t=="number"&&Kf(t)}function Qr(t){if(!_t(t))return!1;var i=pn(t);return i==ht||i==Pt||i==Be||i==$t}function yh(t){return typeof t=="number"&&t==Me(t)}function Ka(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ie}function _t(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}function Et(t){return t!=null&&typeof t=="object"}var vh=Un?Mn(Un):ry;function e_(t,i){return t===i||bc(t,i,kc(i))}function t_(t,i,a){return a=typeof a=="function"?a:r,bc(t,i,kc(i),a)}function n_(t){return Dh(t)&&t!=+t}function r_(t){if(ky(t))throw new Ie(u);return ld(t)}function i_(t){return t===null}function o_(t){return t==null}function Dh(t){return typeof t=="number"||Et(t)&&pn(t)==Qe}function Ps(t){if(!Et(t)||pn(t)!=$e)return!1;var i=Ca(t);if(i===null)return!0;var a=nt.call(i,"constructor")&&i.constructor;return typeof a=="function"&&a instanceof a&&_a.call(a)==t1}var Kc=Cr?Mn(Cr):iy;function s_(t){return yh(t)&&t>=-ie&&t<=ie}var _h=ws?Mn(ws):oy;function Ja(t){return typeof t=="string"||!Re(t)&&Et(t)&&pn(t)==jt}function Pn(t){return typeof t=="symbol"||Et(t)&&pn(t)==wt}var Xo=no?Mn(no):sy;function a_(t){return t===r}function u_(t){return Et(t)&&sn(t)==Yt}function c_(t){return Et(t)&&pn(t)==In}var l_=Ha(Ec),f_=Ha(function(t,i){return t<=i});function xh(t){if(!t)return[];if(Cn(t))return Ja(t)?ur(t):bn(t);if(Cs&&t[Cs])return qm(t[Cs]());var i=sn(t),a=i==Je?dc:i==yt?ya:Yo;return a(t)}function ei(t){if(!t)return t===0?t:0;if(t=Qn(t),t===W||t===-W){var i=t<0?-1:1;return i*V}return t===t?t:0}function Me(t){var i=ei(t),a=i%1;return i===i?a?i-a:i:0}function wh(t){return t?so(Me(t),0,se):0}function Qn(t){if(typeof t=="number")return t;if(Pn(t))return oe;if(_t(t)){var i=typeof t.valueOf=="function"?t.valueOf():t;t=_t(i)?i+"":i}if(typeof t!="string")return t===0?t:+t;t=Lf(t);var a=qi.test(t);return a||Vi.test(t)?he(t.slice(2),a?2:8):Hi.test(t)?oe:+t}function bh(t){return Ar(t,En(t))}function d_(t){return t?so(Me(t),-ie,ie):t===0?t:0}function Ke(t){return t==null?"":zn(t)}var h_=Vo(function(t,i){if(Ms(i)||Cn(i)){Ar(i,Ut(i),t);return}for(var a in i)nt.call(i,a)&&Ns(t,a,i[a])}),Ch=Vo(function(t,i){Ar(i,En(i),t)}),Qa=Vo(function(t,i,a,d){Ar(i,En(i),t,d)}),p_=Vo(function(t,i,a,d){Ar(i,Ut(i),t,d)}),g_=Kr(vc);function m_(t,i){var a=Go(t);return i==null?a:nd(a,i)}var y_=je(function(t,i){t=ot(t);var a=-1,d=i.length,v=d>2?i[2]:r;for(v&&gn(i[0],i[1],v)&&(d=1);++a<d;)for(var A=i[a],O=En(A),M=-1,L=O.length;++M<L;){var ee=O[M],ne=t[ee];(ne===r||lr(ne,Lo[ee])&&!nt.call(t,ee))&&(t[ee]=A[ee])}return t}),v_=je(function(t){return t.push(r,Ld),Vt(Eh,r,t)});function D_(t,i){return Pf(t,Ee(i,3),Er)}function __(t,i){return Pf(t,Ee(i,3),_c)}function x_(t,i){return t==null?t:Dc(t,Ee(i,3),En)}function w_(t,i){return t==null?t:ad(t,Ee(i,3),En)}function b_(t,i){return t&&Er(t,Ee(i,3))}function C_(t,i){return t&&_c(t,Ee(i,3))}function E_(t){return t==null?[]:Oa(t,Ut(t))}function A_(t){return t==null?[]:Oa(t,En(t))}function Jc(t,i,a){var d=t==null?r:ao(t,i);return d===r?a:d}function S_(t,i){return t!=null&&Gd(t,i,Z1)}function Qc(t,i){return t!=null&&Gd(t,i,K1)}var F_=zd(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=xa.call(i)),t[i]=a},tl(An)),N_=zd(function(t,i,a){i!=null&&typeof i.toString!="function"&&(i=xa.call(i)),nt.call(t,i)?t[i].push(a):t[i]=[a]},Ee),T_=je(Is);function Ut(t){return Cn(t)?ed(t):Cc(t)}function En(t){return Cn(t)?ed(t,!0):ay(t)}function I_(t,i){var a={};return i=Ee(i,3),Er(t,function(d,v,A){Yr(a,i(d,v,A),d)}),a}function B_(t,i){var a={};return i=Ee(i,3),Er(t,function(d,v,A){Yr(a,v,i(d,v,A))}),a}var R_=Vo(function(t,i,a){Ma(t,i,a)}),Eh=Vo(function(t,i,a,d){Ma(t,i,a,d)}),O_=Kr(function(t,i){var a={};if(t==null)return a;var d=!1;i=pt(i,function(A){return A=Ci(A,t),d||(d=A.length>1),A}),Ar(t,$c(t),a),d&&(a=Zn(a,g|m|x,Fy));for(var v=i.length;v--;)Tc(a,i[v]);return a});function M_(t,i){return Ah(t,Za(Ee(i)))}var z_=Kr(function(t,i){return t==null?{}:cy(t,i)});function Ah(t,i){if(t==null)return{};var a=pt($c(t),function(d){return[d]});return i=Ee(i),yd(t,a,function(d,v){return i(d,v[0])})}function P_(t,i,a){i=Ci(i,t);var d=-1,v=i.length;for(v||(v=1,t=r);++d<v;){var A=t==null?r:t[Sr(i[d])];A===r&&(d=v,A=a),t=Qr(A)?A.call(t):A}return t}function $_(t,i,a){return t==null?t:Rs(t,i,a)}function j_(t,i,a,d){return d=typeof d=="function"?d:r,t==null?t:Rs(t,i,a,d)}var Sh=jd(Ut),Fh=jd(En);function k_(t,i,a){var d=Re(t),v=d||Ai(t)||Xo(t);if(i=Ee(i,4),a==null){var A=t&&t.constructor;v?a=d?new A:[]:_t(t)?a=Qr(A)?Go(Ca(t)):{}:a={}}return(v?Wn:Er)(t,function(O,M,L){return i(a,O,M,L)}),a}function L_(t,i){return t==null?!0:Tc(t,i)}function H_(t,i,a){return t==null?t:wd(t,i,Rc(a))}function q_(t,i,a,d){return d=typeof d=="function"?d:r,t==null?t:wd(t,i,Rc(a),d)}function Yo(t){return t==null?[]:fc(t,Ut(t))}function G_(t){return t==null?[]:fc(t,En(t))}function V_(t,i,a){return a===r&&(a=i,i=r),a!==r&&(a=Qn(a),a=a===a?a:0),i!==r&&(i=Qn(i),i=i===i?i:0),so(Qn(t),i,a)}function U_(t,i,a){return i=ei(i),a===r?(a=i,i=0):a=ei(a),t=Qn(t),J1(t,i,a)}function W_(t,i,a){if(a&&typeof a!="boolean"&&gn(t,i,a)&&(i=a=r),a===r&&(typeof i=="boolean"?(a=i,i=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&i===r?(t=0,i=1):(t=ei(t),i===r?(i=t,t=0):i=ei(i)),t>i){var d=t;t=i,i=d}if(a||t%1||i%1){var v=Jf();return on(t+v*(i-t+fe("1e-"+((v+"").length-1))),i)}return Sc(t,i)}var X_=Uo(function(t,i,a){return i=i.toLowerCase(),t+(a?Nh(i):i)});function Nh(t){return el(Ke(t).toLowerCase())}function Th(t){return t=Ke(t),t&&t.replace(fn,$m).replace(ar,"")}function Y_(t,i,a){t=Ke(t),i=zn(i);var d=t.length;a=a===r?d:so(Me(a),0,d);var v=a;return a-=i.length,a>=0&&t.slice(a,v)==i}function Z_(t){return t=Ke(t),t&&nr.test(t)?t.replace(Br,jm):t}function K_(t){return t=Ke(t),t&&$i.test(t)?t.replace(Mr,"\\$&"):t}var J_=Uo(function(t,i,a){return t+(a?"-":"")+i.toLowerCase()}),Q_=Uo(function(t,i,a){return t+(a?" ":"")+i.toLowerCase()}),ex=Rd("toLowerCase");function tx(t,i,a){t=Ke(t),i=Me(i);var d=i?jo(t):0;if(!i||d>=i)return t;var v=(i-d)/2;return La(Fa(v),a)+t+La(Sa(v),a)}function nx(t,i,a){t=Ke(t),i=Me(i);var d=i?jo(t):0;return i&&d<i?t+La(i-d,a):t}function rx(t,i,a){t=Ke(t),i=Me(i);var d=i?jo(t):0;return i&&d<i?La(i-d,a)+t:t}function ix(t,i,a){return a||i==null?i=0:i&&(i=+i),f1(Ke(t).replace(zr,""),i||0)}function ox(t,i,a){return(a?gn(t,i,a):i===r)?i=1:i=Me(i),Fc(Ke(t),i)}function sx(){var t=arguments,i=Ke(t[0]);return t.length<3?i:i.replace(t[1],t[2])}var ax=Uo(function(t,i,a){return t+(a?"_":"")+i.toLowerCase()});function ux(t,i,a){return a&&typeof a!="number"&&gn(t,i,a)&&(i=a=r),a=a===r?se:a>>>0,a?(t=Ke(t),t&&(typeof i=="string"||i!=null&&!Kc(i))&&(i=zn(i),!i&&$o(t))?Ei(ur(t),0,a):t.split(i,a)):[]}var cx=Uo(function(t,i,a){return t+(a?" ":"")+el(i)});function lx(t,i,a){return t=Ke(t),a=a==null?0:so(Me(a),0,t.length),i=zn(i),t.slice(a,a+i.length)==i}function fx(t,i,a){var d=w.templateSettings;a&&gn(t,i,a)&&(i=r),t=Ke(t),i=Qa({},i,d,kd);var v=Qa({},i.imports,d.imports,kd),A=Ut(v),O=fc(v,A),M,L,ee=0,ne=i.interpolate||ir,ae="__p += '",pe=hc((i.escape||ir).source+"|"+ne.source+"|"+(ne===xr?qn:ir).source+"|"+(i.evaluate||ir).source+"|$","g"),De="//# sourceURL="+(nt.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xs+"]")+`
`;t.replace(pe,function(Se,qe,Ue,$n,mn,jn){return Ue||(Ue=$n),ae+=t.slice(ee,jn).replace(wr,km),qe&&(M=!0,ae+=`' +
__e(`+qe+`) +
'`),mn&&(L=!0,ae+=`';
`+mn+`;
__p += '`),Ue&&(ae+=`' +
((__t = (`+Ue+`)) == null ? '' : __t) +
'`),ee=jn+Se.length,Se}),ae+=`';
`;var Ae=nt.call(i,"variable")&&i.variable;if(!Ae)ae=`with (obj) {
`+ae+`
}
`;else if(Li.test(Ae))throw new Ie(c);ae=(L?ae.replace(_r,""):ae).replace(cn,"$1").replace(Bn,"$1;"),ae="function("+(Ae||"obj")+`) {
`+(Ae?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(M?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ae+`return __p
}`;var ze=Bh(function(){return Ye(A,De+"return "+ae).apply(r,O)});if(ze.source=ae,Zc(ze))throw ze;return ze}function dx(t){return Ke(t).toLowerCase()}function hx(t){return Ke(t).toUpperCase()}function px(t,i,a){if(t=Ke(t),t&&(a||i===r))return Lf(t);if(!t||!(i=zn(i)))return t;var d=ur(t),v=ur(i),A=Hf(d,v),O=qf(d,v)+1;return Ei(d,A,O).join("")}function gx(t,i,a){if(t=Ke(t),t&&(a||i===r))return t.slice(0,Vf(t)+1);if(!t||!(i=zn(i)))return t;var d=ur(t),v=qf(d,ur(i))+1;return Ei(d,0,v).join("")}function mx(t,i,a){if(t=Ke(t),t&&(a||i===r))return t.replace(zr,"");if(!t||!(i=zn(i)))return t;var d=ur(t),v=Hf(d,ur(i));return Ei(d,v).join("")}function yx(t,i){var a=X,d=te;if(_t(i)){var v="separator"in i?i.separator:v;a="length"in i?Me(i.length):a,d="omission"in i?zn(i.omission):d}t=Ke(t);var A=t.length;if($o(t)){var O=ur(t);A=O.length}if(a>=A)return t;var M=a-jo(d);if(M<1)return d;var L=O?Ei(O,0,M).join(""):t.slice(0,M);if(v===r)return L+d;if(O&&(M+=L.length-M),Kc(v)){if(t.slice(M).search(v)){var ee,ne=L;for(v.global||(v=hc(v.source,Ke(rn.exec(v))+"g")),v.lastIndex=0;ee=v.exec(ne);)var ae=ee.index;L=L.slice(0,ae===r?M:ae)}}else if(t.indexOf(zn(v),M)!=M){var pe=L.lastIndexOf(v);pe>-1&&(L=L.slice(0,pe))}return L+d}function vx(t){return t=Ke(t),t&&St.test(t)?t.replace(Dn,Wm):t}var Dx=Uo(function(t,i,a){return t+(a?" ":"")+i.toUpperCase()}),el=Rd("toUpperCase");function Ih(t,i,a){return t=Ke(t),i=a?r:i,i===r?Hm(t)?Zm(t):Rm(t):t.match(i)||[]}var Bh=je(function(t,i){try{return Vt(t,r,i)}catch(a){return Zc(a)?a:new Ie(a)}}),_x=Kr(function(t,i){return Wn(i,function(a){a=Sr(a),Yr(t,a,Xc(t[a],t))}),t});function xx(t){var i=t==null?0:t.length,a=Ee();return t=i?pt(t,function(d){if(typeof d[1]!="function")throw new Xn(l);return[a(d[0]),d[1]]}):[],je(function(d){for(var v=-1;++v<i;){var A=t[v];if(Vt(A[0],this,d))return Vt(A[1],this,d)}})}function wx(t){return W1(Zn(t,g))}function tl(t){return function(){return t}}function bx(t,i){return t==null||t!==t?i:t}var Cx=Md(),Ex=Md(!0);function An(t){return t}function nl(t){return fd(typeof t=="function"?t:Zn(t,g))}function Ax(t){return hd(Zn(t,g))}function Sx(t,i){return pd(t,Zn(i,g))}var Fx=je(function(t,i){return function(a){return Is(a,t,i)}}),Nx=je(function(t,i){return function(a){return Is(t,a,i)}});function rl(t,i,a){var d=Ut(i),v=Oa(i,d);a==null&&!(_t(i)&&(v.length||!d.length))&&(a=i,i=t,t=this,v=Oa(i,Ut(i)));var A=!(_t(a)&&"chain"in a)||!!a.chain,O=Qr(t);return Wn(v,function(M){var L=i[M];t[M]=L,O&&(t.prototype[M]=function(){var ee=this.__chain__;if(A||ee){var ne=t(this.__wrapped__),ae=ne.__actions__=bn(this.__actions__);return ae.push({func:L,args:arguments,thisArg:t}),ne.__chain__=ee,ne}return L.apply(t,Di([this.value()],arguments))})}),t}function Tx(){return ye._===this&&(ye._=n1),this}function il(){}function Ix(t){return t=Me(t),je(function(i){return gd(i,t)})}var Bx=Mc(pt),Rx=Mc(zf),Ox=Mc(sc);function Rh(t){return Hc(t)?ac(Sr(t)):ly(t)}function Mx(t){return function(i){return t==null?r:ao(t,i)}}var zx=Pd(),Px=Pd(!0);function ol(){return[]}function sl(){return!1}function $x(){return{}}function jx(){return""}function kx(){return!0}function Lx(t,i){if(t=Me(t),t<1||t>ie)return[];var a=se,d=on(t,se);i=Ee(i),t-=se;for(var v=lc(d,i);++a<t;)i(a);return v}function Hx(t){return Re(t)?pt(t,Sr):Pn(t)?[t]:bn(Qd(Ke(t)))}function qx(t){var i=++e1;return Ke(t)+i}var Gx=ka(function(t,i){return t+i},0),Vx=zc("ceil"),Ux=ka(function(t,i){return t/i},1),Wx=zc("floor");function Xx(t){return t&&t.length?Ra(t,An,xc):r}function Yx(t,i){return t&&t.length?Ra(t,Ee(i,2),xc):r}function Zx(t){return jf(t,An)}function Kx(t,i){return jf(t,Ee(i,2))}function Jx(t){return t&&t.length?Ra(t,An,Ec):r}function Qx(t,i){return t&&t.length?Ra(t,Ee(i,2),Ec):r}var ew=ka(function(t,i){return t*i},1),tw=zc("round"),nw=ka(function(t,i){return t-i},0);function rw(t){return t&&t.length?cc(t,An):0}function iw(t,i){return t&&t.length?cc(t,Ee(i,2)):0}return w.after=AD,w.ary=lh,w.assign=h_,w.assignIn=Ch,w.assignInWith=Qa,w.assignWith=p_,w.at=g_,w.before=fh,w.bind=Xc,w.bindAll=_x,w.bindKey=dh,w.castArray=$D,w.chain=ah,w.chunk=Wy,w.compact=Xy,w.concat=Yy,w.cond=xx,w.conforms=wx,w.constant=tl,w.countBy=rD,w.create=m_,w.curry=hh,w.curryRight=ph,w.debounce=gh,w.defaults=y_,w.defaultsDeep=v_,w.defer=SD,w.delay=FD,w.difference=Zy,w.differenceBy=Ky,w.differenceWith=Jy,w.drop=Qy,w.dropRight=ev,w.dropRightWhile=tv,w.dropWhile=nv,w.fill=rv,w.filter=oD,w.flatMap=uD,w.flatMapDeep=cD,w.flatMapDepth=lD,w.flatten=rh,w.flattenDeep=iv,w.flattenDepth=ov,w.flip=ND,w.flow=Cx,w.flowRight=Ex,w.fromPairs=sv,w.functions=E_,w.functionsIn=A_,w.groupBy=fD,w.initial=uv,w.intersection=cv,w.intersectionBy=lv,w.intersectionWith=fv,w.invert=F_,w.invertBy=N_,w.invokeMap=hD,w.iteratee=nl,w.keyBy=pD,w.keys=Ut,w.keysIn=En,w.map=Wa,w.mapKeys=I_,w.mapValues=B_,w.matches=Ax,w.matchesProperty=Sx,w.memoize=Ya,w.merge=R_,w.mergeWith=Eh,w.method=Fx,w.methodOf=Nx,w.mixin=rl,w.negate=Za,w.nthArg=Ix,w.omit=O_,w.omitBy=M_,w.once=TD,w.orderBy=gD,w.over=Bx,w.overArgs=ID,w.overEvery=Rx,w.overSome=Ox,w.partial=Yc,w.partialRight=mh,w.partition=mD,w.pick=z_,w.pickBy=Ah,w.property=Rh,w.propertyOf=Mx,w.pull=gv,w.pullAll=oh,w.pullAllBy=mv,w.pullAllWith=yv,w.pullAt=vv,w.range=zx,w.rangeRight=Px,w.rearg=BD,w.reject=DD,w.remove=Dv,w.rest=RD,w.reverse=Uc,w.sampleSize=xD,w.set=$_,w.setWith=j_,w.shuffle=wD,w.slice=_v,w.sortBy=ED,w.sortedUniq=Sv,w.sortedUniqBy=Fv,w.split=ux,w.spread=OD,w.tail=Nv,w.take=Tv,w.takeRight=Iv,w.takeRightWhile=Bv,w.takeWhile=Rv,w.tap=Xv,w.throttle=MD,w.thru=Ua,w.toArray=xh,w.toPairs=Sh,w.toPairsIn=Fh,w.toPath=Hx,w.toPlainObject=bh,w.transform=k_,w.unary=zD,w.union=Ov,w.unionBy=Mv,w.unionWith=zv,w.uniq=Pv,w.uniqBy=$v,w.uniqWith=jv,w.unset=L_,w.unzip=Wc,w.unzipWith=sh,w.update=H_,w.updateWith=q_,w.values=Yo,w.valuesIn=G_,w.without=kv,w.words=Ih,w.wrap=PD,w.xor=Lv,w.xorBy=Hv,w.xorWith=qv,w.zip=Gv,w.zipObject=Vv,w.zipObjectDeep=Uv,w.zipWith=Wv,w.entries=Sh,w.entriesIn=Fh,w.extend=Ch,w.extendWith=Qa,rl(w,w),w.add=Gx,w.attempt=Bh,w.camelCase=X_,w.capitalize=Nh,w.ceil=Vx,w.clamp=V_,w.clone=jD,w.cloneDeep=LD,w.cloneDeepWith=HD,w.cloneWith=kD,w.conformsTo=qD,w.deburr=Th,w.defaultTo=bx,w.divide=Ux,w.endsWith=Y_,w.eq=lr,w.escape=Z_,w.escapeRegExp=K_,w.every=iD,w.find=sD,w.findIndex=th,w.findKey=D_,w.findLast=aD,w.findLastIndex=nh,w.findLastKey=__,w.floor=Wx,w.forEach=uh,w.forEachRight=ch,w.forIn=x_,w.forInRight=w_,w.forOwn=b_,w.forOwnRight=C_,w.get=Jc,w.gt=GD,w.gte=VD,w.has=S_,w.hasIn=Qc,w.head=ih,w.identity=An,w.includes=dD,w.indexOf=av,w.inRange=U_,w.invoke=T_,w.isArguments=lo,w.isArray=Re,w.isArrayBuffer=UD,w.isArrayLike=Cn,w.isArrayLikeObject=Ft,w.isBoolean=WD,w.isBuffer=Ai,w.isDate=XD,w.isElement=YD,w.isEmpty=ZD,w.isEqual=KD,w.isEqualWith=JD,w.isError=Zc,w.isFinite=QD,w.isFunction=Qr,w.isInteger=yh,w.isLength=Ka,w.isMap=vh,w.isMatch=e_,w.isMatchWith=t_,w.isNaN=n_,w.isNative=r_,w.isNil=o_,w.isNull=i_,w.isNumber=Dh,w.isObject=_t,w.isObjectLike=Et,w.isPlainObject=Ps,w.isRegExp=Kc,w.isSafeInteger=s_,w.isSet=_h,w.isString=Ja,w.isSymbol=Pn,w.isTypedArray=Xo,w.isUndefined=a_,w.isWeakMap=u_,w.isWeakSet=c_,w.join=dv,w.kebabCase=J_,w.last=Jn,w.lastIndexOf=hv,w.lowerCase=Q_,w.lowerFirst=ex,w.lt=l_,w.lte=f_,w.max=Xx,w.maxBy=Yx,w.mean=Zx,w.meanBy=Kx,w.min=Jx,w.minBy=Qx,w.stubArray=ol,w.stubFalse=sl,w.stubObject=$x,w.stubString=jx,w.stubTrue=kx,w.multiply=ew,w.nth=pv,w.noConflict=Tx,w.noop=il,w.now=Xa,w.pad=tx,w.padEnd=nx,w.padStart=rx,w.parseInt=ix,w.random=W_,w.reduce=yD,w.reduceRight=vD,w.repeat=ox,w.replace=sx,w.result=P_,w.round=tw,w.runInContext=k,w.sample=_D,w.size=bD,w.snakeCase=ax,w.some=CD,w.sortedIndex=xv,w.sortedIndexBy=wv,w.sortedIndexOf=bv,w.sortedLastIndex=Cv,w.sortedLastIndexBy=Ev,w.sortedLastIndexOf=Av,w.startCase=cx,w.startsWith=lx,w.subtract=nw,w.sum=rw,w.sumBy=iw,w.template=fx,w.times=Lx,w.toFinite=ei,w.toInteger=Me,w.toLength=wh,w.toLower=dx,w.toNumber=Qn,w.toSafeInteger=d_,w.toString=Ke,w.toUpper=hx,w.trim=px,w.trimEnd=gx,w.trimStart=mx,w.truncate=yx,w.unescape=vx,w.uniqueId=qx,w.upperCase=Dx,w.upperFirst=el,w.each=uh,w.eachRight=ch,w.first=ih,rl(w,function(){var t={};return Er(w,function(i,a){nt.call(w.prototype,a)||(t[a]=i)}),t}(),{chain:!1}),w.VERSION=o,Wn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){w[t].placeholder=w}),Wn(["drop","take"],function(t,i){Ge.prototype[t]=function(a){a=a===r?1:Ht(Me(a),0);var d=this.__filtered__&&!i?new Ge(this):this.clone();return d.__filtered__?d.__takeCount__=on(a,d.__takeCount__):d.__views__.push({size:on(a,se),type:t+(d.__dir__<0?"Right":"")}),d},Ge.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),Wn(["filter","map","takeWhile"],function(t,i){var a=i+1,d=a==B||a==j;Ge.prototype[t]=function(v){var A=this.clone();return A.__iteratees__.push({iteratee:Ee(v,3),type:a}),A.__filtered__=A.__filtered__||d,A}}),Wn(["head","last"],function(t,i){var a="take"+(i?"Right":"");Ge.prototype[t]=function(){return this[a](1).value()[0]}}),Wn(["initial","tail"],function(t,i){var a="drop"+(i?"":"Right");Ge.prototype[t]=function(){return this.__filtered__?new Ge(this):this[a](1)}}),Ge.prototype.compact=function(){return this.filter(An)},Ge.prototype.find=function(t){return this.filter(t).head()},Ge.prototype.findLast=function(t){return this.reverse().find(t)},Ge.prototype.invokeMap=je(function(t,i){return typeof t=="function"?new Ge(this):this.map(function(a){return Is(a,t,i)})}),Ge.prototype.reject=function(t){return this.filter(Za(Ee(t)))},Ge.prototype.slice=function(t,i){t=Me(t);var a=this;return a.__filtered__&&(t>0||i<0)?new Ge(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),i!==r&&(i=Me(i),a=i<0?a.dropRight(-i):a.take(i-t)),a)},Ge.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ge.prototype.toArray=function(){return this.take(se)},Er(Ge.prototype,function(t,i){var a=/^(?:filter|find|map|reject)|While$/.test(i),d=/^(?:head|last)$/.test(i),v=w[d?"take"+(i=="last"?"Right":""):i],A=d||/^find/.test(i);v&&(w.prototype[i]=function(){var O=this.__wrapped__,M=d?[1]:arguments,L=O instanceof Ge,ee=M[0],ne=L||Re(O),ae=function(qe){var Ue=v.apply(w,Di([qe],M));return d&&pe?Ue[0]:Ue};ne&&a&&typeof ee=="function"&&ee.length!=1&&(L=ne=!1);var pe=this.__chain__,De=!!this.__actions__.length,Ae=A&&!pe,ze=L&&!De;if(!A&&ne){O=ze?O:new Ge(this);var Se=t.apply(O,M);return Se.__actions__.push({func:Ua,args:[ae],thisArg:r}),new Yn(Se,pe)}return Ae&&ze?t.apply(this,M):(Se=this.thru(ae),Ae?d?Se.value()[0]:Se.value():Se)})}),Wn(["pop","push","shift","sort","splice","unshift"],function(t){var i=va[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",d=/^(?:pop|shift)$/.test(t);w.prototype[t]=function(){var v=arguments;if(d&&!this.__chain__){var A=this.value();return i.apply(Re(A)?A:[],v)}return this[a](function(O){return i.apply(Re(O)?O:[],v)})}}),Er(Ge.prototype,function(t,i){var a=w[i];if(a){var d=a.name+"";nt.call(qo,d)||(qo[d]=[]),qo[d].push({name:i,func:a})}}),qo[ja(r,D).name]=[{name:"wrapper",func:r}],Ge.prototype.clone=v1,Ge.prototype.reverse=D1,Ge.prototype.value=_1,w.prototype.at=Yv,w.prototype.chain=Zv,w.prototype.commit=Kv,w.prototype.next=Jv,w.prototype.plant=eD,w.prototype.reverse=tD,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=nD,w.prototype.first=w.prototype.head,Cs&&(w.prototype[Cs]=Qv),w},ko=Km();We?((We.exports=ko)._=ko,Ce._=ko):ye._=ko}).call(Kt)})(Lu,Lu.exports);var C6=Lu.exports;const qt=e0(C6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]],A6=la("arrow-right-from-line",E6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M17 12H3",key:"8awo09"}],["path",{d:"m11 18 6-6-6-6",key:"8c2y43"}],["path",{d:"M21 5v14",key:"nzette"}]],F6=la("arrow-right-to-line",S6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],T6=la("grid-3x3",N6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],B6=la("hash",I6);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M16 3h5v5",key:"1806ms"}],["path",{d:"M8 3H3v5",key:"15dfkv"}],["path",{d:"M12 22v-8.3a4 4 0 0 0-1.172-2.872L3 3",key:"1qrqzj"}],["path",{d:"m15 9 6-6",key:"ko1vev"}]],O6=la("split",R6),M6=(e,n)=>e[n]?.[ct.Input]??e[n]?.[ct.InferredInput]??kn.fromJson({Object:{}}),ms=(e,{attachGlobals:n=!0,disabled:r=!1}={})=>{const o=st(({nodeTypes:s,globalType:u})=>{if(!(!rs()||r))return{nodeTypes:s,globalType:u}});return T.useMemo(()=>{if(!o?.nodeTypes)return;const s=M6(o.nodeTypes,e);return n&&Object.entries(o?.globalType??{}).forEach(([u,l])=>s.set(u,l)),s},[o?.globalType,o?.nodeTypes,n])},lu=(e,n)=>{const r=(e??"").trim(),o=(n??"").trim();return r===o},Zs=(e,n,r={})=>{const{idField:o="id",compareFields:s}=r,u=m=>m[o]||m._id,l=new Map(n.map((m,x)=>[u(m),{...m,index:x}])),c=new Map(e.map((m,x)=>[u(m),{...m,index:x}])),f=[],h=new Set,p=new Set;e.forEach((m,x)=>{l.has(u(m))||h.add(x)}),n.forEach((m,x)=>{c.has(u(m))||p.add(x)});const g=(m,x)=>{const b=Array.from(h).filter(E=>E<x).length,_=Array.from(p).filter(E=>E<m).length,C=x-b;return m-_!==C};return e.forEach((m,x)=>{const b=l.get(u(m));if(!b)f.push({...m,originalIndex:x,_diff:{status:"added",newIndex:x}});else{const _=g(b.index,x),C=s?s(m,b):{hasChanges:!1};C.hasChanges||_?f.push({...m,originalIndex:x,_diff:{status:"modified",positionChanged:_,previousIndex:b.index,newIndex:x,...C.fields?{fields:C.fields}:{}}}):f.push({...m,originalIndex:x,_diff:{status:"unchanged"}})}}),n.forEach((m,x)=>{if(!c.has(u(m))){let b=x;for(;b<f.length&&l.get(u(f[b]))?.index<x;)b++;f.splice(b,0,{...m,originalIndex:x,isRemoved:!0,_diff:{status:"removed",previousIndex:x}})}}),f.map(({originalIndex:m,isRemoved:x,...b})=>b)},z6=(e,{trace:n,decisionGraph:r})=>{const o=Object.values(n).find(u=>u.id===e)?.input;if(typeof o!="object"||Array.isArray(o))return o;const s=Object.fromEntries(Object.values(n).map(u=>{const l=r.nodes.find(c=>c.id===u.id);return!l||l.type==="outputNode"?null:[u.name,u.output]}).filter(u=>!!u));return{...o,$nodes:s}},Yg=({id:e,manager:n})=>{const r=zt(),o=ms(e,{attachGlobals:!1}),{nodeTrace:s,inputData:u}=st(({simulate:m,decisionGraph:x})=>({nodeTrace:He(m).with({result:Le.nonNullable},({result:b})=>b.trace[e]).otherwise(()=>null),inputData:He(m).with({result:Le.nonNullable},({result:b})=>z6(e,{trace:b.trace,decisionGraph:x})).otherwise(()=>null)})),{disabled:l,configurable:c,content:f,globalType:h}=st(({disabled:m,configurable:x,decisionGraph:b,globalType:_})=>({disabled:m,configurable:x,content:(b?.nodes??[]).find(C=>C.id===e)?.content,globalType:_})),p=T.useMemo(()=>{if(!o)return;const m=He(f?.inputField).with(Le.string,b=>o.get(b)).otherwise(()=>o),x=f?.executionMode==="loop"?m.arrayItem():m;return Object.entries(h).forEach(([b,_])=>x.set(b,_)),x},[o,h,f?.inputField,f?.executionMode]),g=T.useMemo(()=>{if(!(!s||!u))return rs()?{trace:s,inputData:new Bw(u)}:{trace:s}},[s,u]);return S.jsx(zw,{id:e,tableHeight:"100%",value:f,manager:n,disabled:l,configurable:c,inputData:p,debug:g,onChange:m=>{r.updateNode(e,x=>(Object.assign(x.content,m),x))}})};Yg.__docgenInfo={description:"",methods:[],displayName:"TabDecisionTable",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const P6=navigator.platform.includes("Mac"),Np={Ctrl:"⌘",Backspace:"⌫",Alt:"⌥"},bu={shortcut:e=>P6?Object.keys(Np).reduce((n,r)=>n.replaceAll(r,Np[r]),e):e},Tp={},Hu=(e,n)=>{const[r,o]=T.useState(()=>Tp?.[e]??n);return T.useEffect(()=>{Tp[e]=r},[r]),[r,o]};function Ip(e,n=0){const r=performance.now(),o={};function s(){o.id=requestAnimationFrame(u=>{u-r>n?e():s()})}return s(),o}function Bp(e){e.id&&cancelAnimationFrame(e.id)}function $6(e,n){const[r,o]=T.useState(e?"enter":"from"),s=T.useRef({}),[u,l]=T.useState(e);return T.useEffect(function(){return Bp(s.current),e?(o("from"),l(!0),Ip(()=>{o("enter")})):(o("leave"),s.current=Ip(()=>{l(!1)},n)),()=>{Bp(s.current)}},[e,n]),{stage:r,shouldMount:u}}function j6({state:e,timeout:n,children:r}){const{stage:o,shouldMount:s}=$6(e,n);return r(o,s)}const Yl=({className:e,...n})=>S.jsx("div",{className:Ze("grl-dn__graphCard",e),...n});Yl.__docgenInfo={description:"",methods:[],displayName:"GraphCard"};var Co=(e=>(e.Blue="var(--node-color-blue)",e.Purple="var(--node-color-purple)",e.Orange="var(--node-color-orange)",e.Green="var(--node-color-green)",e))(Co||{});const Sf=({icon:e,name:n,children:r,actions:o=[],disabled:s=!1,isSelected:u=!1,noBodyPadding:l=!1,color:c="primary",onNameChange:f,menuItems:h=[],status:p,diffStatus:g,compactMode:m,listMode:x,helper:b,details:_,detailsOpen:C=!1,detailsTitle:D="Details",onDetailsClose:E})=>{const R=He(c).with("primary",()=>Co.Blue).otherwise(N=>N);return S.jsxs("div",{className:Ze("grl-dn",m&&"grl-dn--compact",x&&"grl-dn--list",!g&&u&&"grl-dn--selected",p&&`grl-dn--${p}`,g&&`grl-dn--diff-${g}`),style:{"--node-color":R},onKeyDown:N=>N.stopPropagation(),children:[S.jsxs(Yl,{children:[S.jsxs("div",{className:"grl-dn__status-bar",children:[Array.isArray(b)&&b.filter(N=>!!N).map((N,P)=>S.jsx("div",{className:Ze("grl-dn__status-icon"),children:N},P)),p==="error"&&S.jsx("div",{className:Ze("grl-dn__status-icon",`grl-dn__status-icon--${p}`),children:S.jsx(vo,{})}),S.jsx(t0,{status:g,style:{fontSize:16}})]}),S.jsxs("div",{className:Ze("grl-dn__header",m&&"compact"),children:[S.jsx("div",{className:Ze("grl-dn__header__icon",m&&"compact"),children:e}),S.jsx(Pw,{onChange:f,disabled:s,value:n}),h.length>0&&S.jsx("div",{className:Ze("grl-dn__header__actions","nodrag"),children:S.jsx(Js,{trigger:["click"],overlayStyle:{minWidth:250},menu:{items:h},children:S.jsx(it,{type:"text",size:"small",icon:S.jsx(iC,{})})})})]}),r&&S.jsx("div",{className:Ze("grl-dn__body",o.length===0&&"grl-dn__body--no-footer",l&&"grl-dn__body--no-padding"),children:r}),o.length>0&&S.jsx("div",{className:Ze("grl-dn__footer","nodrag"),children:S.jsx("div",{className:"grl-dn__footer__actions",children:o})})]}),S.jsx(j6,{state:C,timeout:100,children:(N,P)=>P&&S.jsx(Yl,{className:"nodrag",style:{transition:"0.1s ease-in-out",transform:N==="enter"?"translateY(0)":"translateY(-10px)",opacity:N==="enter"?1:0},children:S.jsxs("div",{className:"grl-dn__details",children:[S.jsxs("div",{className:"grl-dn__details__header",children:[S.jsx(Gt.Text,{className:"grl-dn__details__header__text",children:D}),S.jsx(it,{type:"text",size:"small",className:"grl-dn__details__header__close",icon:S.jsx(vo,{style:{fontSize:8}}),onClick:E})]}),S.jsx("div",{className:"grl-dn__details__body",children:_})]})})})]})};Sf.__docgenInfo={description:"",methods:[],displayName:"DecisionNode",props:{name:{required:!1,tsType:{name:"string"},description:""},icon:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},type:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},helper:{required:!1,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(React.ReactNode | false)[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},isSelected:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},actions:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:"",defaultValue:{value:"[]",computed:!1}},status:{required:!1,tsType:{name:"union",raw:"'error' | 'success' | 'warning'",elements:[{name:"literal",value:"'error'"},{name:"literal",value:"'success'"},{name:"literal",value:"'warning'"}]},description:""},diffStatus:{required:!1,tsType:{name:"union",raw:"'removed' | 'added' | 'modified' | 'moved'",elements:[{name:"literal",value:"'removed'"},{name:"literal",value:"'added'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'moved'"}]},description:""},noBodyPadding:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"'primary' | 'secondary' | string",elements:[{name:"literal",value:"'primary'"},{name:"literal",value:"'secondary'"},{name:"string"}]},description:"",defaultValue:{value:"'primary'",computed:!1}},menuItems:{required:!1,tsType:{name:"MenuProps['items']",raw:"MenuProps['items']"},description:"",defaultValue:{value:"[]",computed:!1}},onNameChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(name: string) => void",signature:{arguments:[{type:{name:"string"},name:"name"}],return:{name:"void"}}},description:""},compactMode:{required:!1,tsType:{name:"boolean"},description:""},listMode:{required:!1,tsType:{name:"boolean"},description:""},details:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},detailsOpen:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},detailsTitle:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'Details'",computed:!1}},onDetailsClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""}}};const zi=G.forwardRef(({id:e,handleLeft:n=!0,handleRight:r=!0,className:o,specification:s,name:u,displayError:l,helper:c,actions:f,...h},p)=>{const[g,m]=Hu(`node:details:${e}`,0),[x,b]=Hu(`node:detailsOpen:${e}`,!1),_=zt(),{nodeError:C,nodeTrace:D,disabled:E,compactMode:R}=st(({simulate:Y,disabled:Q,compactMode:$})=>({disabled:Q,nodeTrace:He(Y).with({result:Le._},({result:X})=>X?.trace?.[e]).otherwise(()=>null),nodeError:He(Y).with({error:{data:{nodeId:e}}},({error:X})=>X).otherwise(()=>null),compactMode:$})),{diff:N}=pa(e),P=s.renderSettings,H=[s.documentationUrl?{key:"documentation",label:S.jsx(Gs,{left:"Documentation",right:S.jsx(x0,{})}),onClick:()=>window.open(s.documentationUrl,"_href")}:null,s.documentationUrl?{key:"divider-1",type:"divider"}:null,!l&&{key:"copy-clipboard",label:S.jsx(Gs,{left:"Copy to clipboard",right:bu.shortcut("Ctrl + C")}),onClick:()=>{}},!l&&{key:"duplicate",disabled:E,label:S.jsx(Gs,{left:"Duplicate",right:bu.shortcut("Ctrl + D")}),onClick:()=>_.duplicateNodes([e])},!l&&{key:"divider-2",type:"divider"},{key:"delete",danger:!0,label:S.jsx(Gs,{left:"Delete",right:bu.shortcut("Backspace")}),disabled:E,onClick:()=>Wu.confirm({icon:null,title:"Delete node",content:S.jsxs(Gt.Text,{children:["Are you sure you want to delete ",S.jsx(Gt.Text,{strong:!0,children:u})," node."]}),okButtonProps:{danger:!0},onOk:()=>_.removeNodes([e])})}].filter(Y=>Y!==!1);return S.jsxs("div",{className:Ze("grl-graph-node",o),style:{minWidth:220,maxWidth:220},ref:p,onClick:Y=>{const Q=He(navigator.platform.includes("Mac")).with(!0,()=>Y.metaKey).otherwise(()=>Y.ctrlKey);_.triggerNodeSelect(e,Q?"toggle":"only")},children:[n&&S.jsx(Mi,{className:Ze("grl-graph-node__handle-left",R&&"compact"),type:"target",position:xe.Left,...typeof n!="boolean"?n:{}}),S.jsx(Sf,{menuItems:H,...h,disabled:E,icon:s.icon,color:s.color,type:s.displayName,helper:c,name:u,details:P?S.jsx(P,{id:e}):void 0,detailsOpen:x,detailsTitle:He(g).with(0,()=>"Settings").otherwise(()=>{}),onDetailsClose:()=>b(!1),actions:P?[...f??[],S.jsx(it,{type:"text",style:{marginLeft:"auto"},onClick:()=>{b(g===0?!x:!0),m(0)},children:"Settings"},"settings")]:f,status:He([D,C,l]).with([Le._,Le._,!0],()=>"error").with([Le._,Le.not(Le.nullish),Le._],()=>"error").with([Le.not(Le.nullish),Le._,Le._],()=>"success").otherwise(()=>{}),diffStatus:He([N]).with([{status:"added"}],()=>"added").with([{status:"modified"}],()=>"modified").with([{status:"removed"}],()=>"removed").with([{status:"moved"}],()=>"moved").otherwise(()=>{}),onNameChange:Y=>{_.updateNode(e,Q=>(Q.name=Y,Q))},compactMode:R}),r&&S.jsx(Mi,{className:Ze("grl-graph-node__handle-right",R&&"compact"),type:"source",position:xe.Right,...typeof r!="boolean"?r:{}})]})});zi.__docgenInfo={description:"",methods:[],displayName:"GraphNode",props:{handleLeft:{defaultValue:{value:"true",computed:!1},required:!1},handleRight:{defaultValue:{value:"true",computed:!1},required:!1}}};const Zg={type:lt.DecisionTable,icon:S.jsx(T6,{size:"1em"}),displayName:"Decision table",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/decision-tables",shortDescription:"Rules spreadsheet",renderTab:({id:e,manager:n})=>S.jsx(Yg,{id:e,manager:n}),getDiffContent:(e,n)=>gt(e,r=>{const o={};(e.executionMode??"single")!==(n.executionMode??"single")&&qt.set(o,"executionMode",{status:"modified",previousValue:n.executionMode}),(e.hitPolicy??"first")!==(n.hitPolicy??"first")&&qt.set(o,"hitPolicy",{status:"modified",previousValue:n.hitPolicy}),(e.inputField??"")!==(n.inputField??"")&&qt.set(o,"inputField",{status:"modified",previousValue:n.inputField}),(e.outputPath??"")!==(n.outputPath??"")&&qt.set(o,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough??!1)!==(n.passThrough??!1)&&qt.set(o,"passThrough",{status:"modified",previousValue:n.passThrough});const s=Zs(e?.inputs||[],n?.inputs||[],{compareFields:(c,f)=>{const h=(c.name??"")!==(f.name??""),p=(c.field??"")!==(f.field??""),g=(c.defaultValue??"")!==(f.defaultValue??"");return{hasChanges:h||p||g,fields:{...h&&{name:{status:"modified",previousValue:f.name}},...p&&{field:{status:"modified",previousValue:f.field}},...g&&{defaultValue:{status:"modified",previousValue:f.defaultValue}}}}}}),u=Zs(e?.outputs||[],n?.outputs||[],{compareFields:(c,f)=>{const h=(c.name??"")!==(f.name??""),p=(c.field??"")!==(f.field??""),g=(c.defaultValue??"")!==(f.defaultValue??"");return{hasChanges:h||p||g,fields:{...h&&{name:{status:"modified",previousValue:f.name}},...p&&{field:{status:"modified",previousValue:f.field}},...g&&{defaultValue:{status:"modified",previousValue:f.defaultValue}}}}}}),l=Zs(e?.rules||[],n?.rules||[],{idField:"_id",compareFields:(c,f)=>{const h=(c._description??"")!==(f._description??""),p={};s.forEach(m=>{m._diff?.status==="added"?p[m.id]={status:"added"}:m._diff?.status==="removed"?p[m.id]={status:"removed"}:(c?.[m.id]??"")!==(f?.[m.id]??"")&&(p[m.id]={status:"modified",previousValue:f?.[m.id]})});const g={};return u.forEach(m=>{m?._diff?.status==="added"?g[m.id]={status:"added"}:m?._diff?.status==="removed"?g[m.id]={status:"removed"}:(c?.[m.id]??"")!==(f?.[m.id]??"")&&(g[m.id]={status:"modified",previousValue:f?.[m.id]})}),{hasChanges:h||Object.keys(p).length>0||Object.keys(g).length>0,fields:{...h&&{_description:{status:"modified",previousValue:f._description}},...p,...g}}}});return r.inputs=s,r.outputs=u,r.rules=l,s.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&qt.set(o,"inputs",{status:"modified"}),u.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&qt.set(o,"outputs",{status:"modified"}),l.find(c=>c?._diff?.status==="modified"||c?._diff?.status==="added"||c?._diff?.status==="removed")&&qt.set(o,"rules",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:(e,n)=>!Ln(e,n),determineOutputType:({content:e,input:n})=>{let r=n.clone(),o=kn.fromJson({Object:{}});if(e.inputField&&(r=n.calculateType(e.inputField)),e.executionMode==="loop"&&(r=r.arrayItem()),(e?.outputs||[]).filter(u=>!!u.field).forEach(u=>{for(const l of e.rules){if(!l[u.id])continue;const c=r.calculateType(l[u.id]),f=c.toJson();if(f!=="Any"&&f!=="Null"){o.set(u.field,c);return}}o.setJson(u.field,"Any")}),e.hitPolicy==="collect"&&(o=o.toArray()),e.executionMode==="loop"&&(o=o.toArray()),e.outputPath){const u=kn.fromJson({Object:{}});u.set(e.outputPath,o),o=u}return e.passThrough&&(o=n.merge(o)),o}},generateNode:({index:e})=>({name:`decisionTable${e}`,content:{hitPolicy:"first",inputs:[{id:crypto.randomUUID(),name:"Input"}],outputs:[{id:crypto.randomUUID(),field:"output",name:"Output"}],rules:[],inputField:null,outputPath:null,passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=zt(),{passThrough:u,executionMode:l}=st(({decisionGraph:c})=>{const f=(c?.nodes??[]).find(h=>h.id===e)?.content;return{passThrough:f?.passThrough||!1,executionMode:f?.executionMode}});return S.jsx(zi,{id:e,specification:o,name:n.name,isSelected:r,helper:[l==="loop"&&S.jsx(b0,{}),u&&S.jsx(ef,{})],actions:[S.jsx(it,{type:"text",onClick:()=>s.openTab(e),children:"Edit Table"},"edit-table")]})},renderSettings:({id:e})=>{const n=zt(),r=ms(e),{contentDiff:o}=pa(e),{fields:s,disabled:u}=st(({decisionGraph:c,disabled:f})=>{const h=(c?.nodes??[]).find(p=>p.id===e)?.content;return{disabled:f,fields:{passThrough:h?.passThrough||!1,inputField:h?.inputField,outputPath:h?.outputPath,executionMode:h?.executionMode||"single",hitPolicy:h?.hitPolicy||"first"}}}),l=c=>{n.updateNode(e,f=>(Object.assign(f.content,c),f))};return S.jsxs("div",{className:"settings-form",children:[S.jsx(ii.Item,{label:"Hit Policy",children:S.jsx(r0,{direction:"vertical",size:2,children:S.jsx(El,{size:"small",previousValue:o?.fields?.hitPolicy?.previousValue,displayDiff:o?.fields?.hitPolicy?.status==="modified",disabled:u,value:s?.hitPolicy,onChange:c=>l({hitPolicy:c?.target?.value}),options:[{value:"first",label:"First"},{value:"collect",label:"Collect"}]})})}),S.jsx(ii.Item,{label:"Passthrough",children:S.jsx(a0,{disabled:u,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:c=>l({passThrough:c})})}),S.jsx(ii.Item,{label:"Input field",children:S.jsx(Vu,{variableType:r,disabled:u,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:c=>l({inputField:c?.trim()||null})})}),S.jsx(ii.Item,{label:"Output path",children:S.jsx(n0,{size:"small",readOnly:u,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:c=>l({outputPath:c?.target?.value?.trim()||null})})}),S.jsx(ii.Item,{label:"Execution mode",children:S.jsx(El,{size:"small",disabled:u,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:c=>l({executionMode:c?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},Kg=({id:e,manager:n})=>{const r=zt(),o=ms(e,{attachGlobals:!1}),{disabled:s,configurable:u,content:l,trace:c,globalType:f}=st(({disabled:p,configurable:g,decisionGraph:m,simulate:x,globalType:b})=>({disabled:p,configurable:g,content:(m?.nodes??[]).find(_=>_.id===e)?.content,trace:x&&"result"in x?x.result?.trace[e]:void 0,globalType:b})),h=T.useMemo(()=>{if(!o)return;const p=He(l?.inputField).with(Le.string,m=>o.get(m)).otherwise(()=>o),g=l?.executionMode==="loop"?p.arrayItem():p;return Object.entries(f).forEach(([m,x])=>g.set(m,x)),g},[o,f,l?.inputField,l?.executionMode]);return S.jsx("div",{style:{height:"100%",overflowY:"auto",boxSizing:"border-box"},children:S.jsx(Gw,{traceData:c?.traceData,value:l?.expressions,disabled:s,configurable:u,manager:n,inputData:h,onChange:p=>{r.updateNode(e,g=>(g.content.expressions=p,g))}})})};Kg.__docgenInfo={description:"",methods:[],displayName:"TabExpression",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""}}};const Jg={type:lt.Expression,icon:S.jsx(B6,{size:"1em"}),displayName:"Expression",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/expression",shortDescription:"Mapping utility",renderTab:({id:e,manager:n})=>S.jsx(Kg,{id:e,manager:n}),getDiffContent:(e,n)=>gt(e,o=>{const s={};(e.executionMode||!1)!==(n.executionMode||!1)&&qt.set(s,"executionMode",{status:"modified",previousValue:n.executionMode}),lu(e.inputField,n.inputField)||qt.set(s,"inputField",{status:"modified",previousValue:n.inputField}),lu(e.outputPath,n.outputPath)||qt.set(s,"outputPath",{status:"modified",previousValue:n.outputPath}),(e.passThrough||!1)!==(n.passThrough||!1)&&qt.set(s,"passThrough",{status:"modified",previousValue:n.passThrough});const u=Zs(e?.expressions||[],n?.expressions||[],{compareFields:(l,c)=>{const f=!lu(l.key,c.key),h=!lu(l.value,c.value);return{hasChanges:f||h,fields:{...f&&{key:{status:"modified",previousValue:c.key}},...h&&{value:{status:"modified",previousValue:c.value}}}}}});return o.expressions=u,u.find(l=>l?._diff?.status==="modified"||l?._diff?.status==="added"||l?._diff?.status==="removed")&&qt.set(s,"expressions",{status:"modified"}),Object.keys(s).length>0&&(o._diff={status:"modified",fields:s}),o}),inferTypes:{needsUpdate:(e,n)=>!Ln(e,n),determineOutputType:({input:e,content:n})=>{let r=e.clone(),o=kn.fromJson({Object:{}});if(n.inputField&&(r=e.calculateType(n.inputField)),n.executionMode==="loop"&&(r=r.arrayItem()),(n.expressions||[]).forEach(s=>{if(!s.key||!s.value)return;const u=r.calculateType(s.value);r.set(`$.${s.key}`,u),o.set(s.key,u)}),n.executionMode==="loop"&&(o=o.toArray()),n.outputPath){const s=kn.fromJson({Object:{}});s.set(n.outputPath,o),o=s}return n.passThrough&&(o=e.merge(o)),o}},generateNode:({index:e})=>({name:`expression${e}`,content:{inputField:null,outputPath:null,expressions:[],passThrough:!0,executionMode:"single"}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=zt(),{passThrough:u,executionMode:l}=st(({decisionGraph:c})=>{const f=(c?.nodes??[]).find(h=>h.id===e)?.content;return{passThrough:f?.passThrough||!1,executionMode:f?.executionMode}});return S.jsx(zi,{id:e,specification:o,name:n.name,isSelected:r,actions:[S.jsx(it,{type:"text",onClick:()=>s.openTab(e),children:"Edit Expression"},"edit-table")],helper:[l==="loop"&&S.jsx(b0,{}),u&&S.jsx(ef,{})]})},renderSettings:({id:e})=>{const n=zt(),r=ms(e),{contentDiff:o}=pa(e),{fields:s,disabled:u}=st(({decisionGraph:c,disabled:f})=>{const h=(c?.nodes??[]).find(p=>p.id===e)?.content;return{disabled:f,fields:{passThrough:h?.passThrough||!1,inputField:h?.inputField,outputPath:h?.outputPath,executionMode:h?.executionMode||"single"}}}),l=c=>{n.updateNode(e,f=>(Object.assign(f.content,c),f))};return S.jsxs("div",{className:"settings-form",children:[S.jsx(ii.Item,{label:"Passthrough",children:S.jsx(a0,{disabled:u,size:"small",displayDiff:o?.fields?.passThrough?.status==="modified",checked:s?.passThrough,previousChecked:o?.fields?.passThrough?.previousValue,onChange:c=>l({passThrough:c})})}),S.jsx(ii.Item,{label:"Input field",children:S.jsx(Vu,{variableType:r,disabled:u,displayDiff:o?.fields?.inputField?.status==="modified",previousValue:o?.fields?.inputField?.previousValue,style:{fontSize:12,lineHeight:"20px",width:"100%"},expectedVariableType:s?.executionMode==="loop"?{Array:"Any"}:void 0,maxRows:4,value:s?.inputField??"",onChange:c=>{l({inputField:c?.trim()||null})}})}),S.jsx(ii.Item,{label:"Output path",children:S.jsx(n0,{size:"small",readOnly:u,displayDiff:o?.fields?.outputPath?.status==="modified",previousValue:o?.fields?.outputPath?.previousValue,value:s?.outputPath??"",onChange:c=>l({outputPath:c?.target?.value?.trim()||null})})}),S.jsx(ii.Item,{label:"Execution mode",children:S.jsx(El,{size:"small",disabled:u,displayDiff:o?.fields?.executionMode?.status==="modified",previousValue:o?.fields?.executionMode?.previousValue,value:s?.executionMode,onChange:c=>l({executionMode:c?.target?.value}),options:[{value:"single",label:"Single"},{value:"loop",label:"Loop"}]})})]})}},k6=G.lazy(async()=>({default:(await Yw(()=>import("./index-Bl_it64D.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url)).Function})),Qg=({id:e})=>{const n=tm(e),r=zt(),o=Xg(b=>b.onFunctionReady),[s,u]=T.useState(),l=ms(e),{nodeTrace:c,disabled:f,content:h,nodeError:p}=st(({simulate:b,disabled:_,configurable:C,decisionGraph:D})=>({nodeTrace:He(b).with({result:Le._},({result:E})=>E?.trace?.[e]).otherwise(()=>null),nodeError:He(b).with({error:{data:{nodeId:e}}},({error:E})=>E).otherwise(()=>null),disabled:_,configurable:C,content:(D?.nodes??[]).find(E=>E.id===e)?.content})),{diff:g,contentDiff:m}=pa(e),x=T.useMemo(()=>n===Cu.Stable?m?.fields?.source?.previousValue:g?.fields?.content?.previousValue,[g,m]);return T.useEffect(()=>{if(!s)return;const b=s.languages.typescript.javascriptDefaults.getExtraLibs(),_=Object.entries(b).map(([C,D])=>({filePath:C,content:D.content}));s.languages.typescript.javascriptDefaults.setExtraLibs(_),o?.(s)},[s,o]),S.jsx(T.Suspense,{fallback:S.jsx(cs,{}),children:S.jsx(k6,{onMonacoReady:b=>u(b),value:n===Cu.Stable?h.source:h,previousValue:typeof x=="string"?x:void 0,error:p??void 0,inputData:l,onChange:b=>{r.updateNode(e,_=>(n===Cu.Stable?_.content={source:b}:_.content=b,_))},disabled:f,trace:c})})};Qg.__docgenInfo={description:"",methods:[],displayName:"TabFunction",props:{id:{required:!0,tsType:{name:"string"},description:""}}};const em={type:lt.Function,icon:S.jsx(Gt.Text,{style:{color:"white",fontSize:"inherit"},children:"JS"}),displayName:"Function",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/functions",shortDescription:"Javascript lambda",color:Co.Orange,renderTab:({id:e})=>S.jsx(Qg,{id:e}),getDiffContent:(e,n)=>{const r={},o=He(e).with(Le.string,()=>0).otherwise(()=>1);He([e,n]).with([Le.string,Le.string],([u,l])=>{u!==l&&qt.set(r,"source",{previousValue:l,status:"modified"})}).with([{source:Le.string},{source:Le.string}],([u,l])=>{u?.source!==l?.source&&qt.set(r,"source",{previousValue:l.source,status:"modified"})}).otherwise(()=>{});const s=Object.keys(r).length>0;return{...o===0?{source:e}:e,...s&&{_diff:{status:"modified",fields:r}}}},generateNode:({index:e})=>({name:`function${e}`,content:{source:Vw}}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=zt(),u=tm(e);return S.jsx(zi,{id:e,specification:{...o,displayName:u===1?"Function":S.jsxs("span",{children:["Function v1 ",S.jsx(Rp,{})]})},name:n.name,isSelected:r,helper:[u===0&&S.jsx(Rp,{size:16})],actions:[S.jsx(it,{type:"text",onClick:()=>s.openTab(e),children:"Edit Function"},"edit-function")]})}};var Cu=(e=>(e[e.Deprecated=0]="Deprecated",e[e.Stable=1]="Stable",e))(Cu||{});const tm=e=>{const{kind:n}=st(r=>({kind:He(r.decisionGraph.nodes.find(o=>o.id===e)?.content).with(Le.string,()=>0).otherwise(()=>1)}));return n},Rp=({size:e})=>S.jsx(gr,{placement:"top",title:'Function v1 will be deprecated in one of the upcoming releases. To use a new Function, drag and drop a new Function Node and copy your logic. For more information click "Documentation". ',children:S.jsx(dC,{style:{color:"var(--grl-color-warning-text)",fontSize:e}})});var qu={exports:{}};qu.exports;(function(e,n){var r=200,o="__lodash_hash_undefined__",s=800,u=16,l=9007199254740991,c="[object Arguments]",f="[object Array]",h="[object AsyncFunction]",p="[object Boolean]",g="[object Date]",m="[object Error]",x="[object Function]",b="[object GeneratorFunction]",_="[object Map]",C="[object Number]",D="[object Null]",E="[object Object]",R="[object Proxy]",N="[object RegExp]",P="[object Set]",H="[object String]",Y="[object Undefined]",Q="[object WeakMap]",$="[object ArrayBuffer]",X="[object DataView]",te="[object Float32Array]",J="[object Float64Array]",Z="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",j="[object Uint8Array]",W="[object Uint8ClampedArray]",ie="[object Uint16Array]",V="[object Uint32Array]",oe=/[\\^$.*+?()[\]{}|]/g,se=/^\[object .+?Constructor\]$/,le=/^(?:0|[1-9]\d*)$/,ue={};ue[te]=ue[J]=ue[Z]=ue[B]=ue[q]=ue[j]=ue[W]=ue[ie]=ue[V]=!0,ue[c]=ue[f]=ue[$]=ue[p]=ue[X]=ue[g]=ue[m]=ue[x]=ue[_]=ue[C]=ue[E]=ue[N]=ue[P]=ue[H]=ue[Q]=!1;var ge=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,de=typeof self=="object"&&self&&self.Object===Object&&self,Fe=ge||de||Function("return this")(),Be=n&&!n.nodeType&&n,me=Be&&!0&&e&&!e.nodeType&&e,be=me&&me.exports===Be,Te=be&&ge.process,xt=function(){try{var y=me&&me.require&&me.require("util").types;return y||Te&&Te.binding&&Te.binding("util")}catch{}}(),ht=xt&&xt.isTypedArray;function Pt(y,F,z){switch(z.length){case 0:return y.call(F);case 1:return y.call(F,z[0]);case 2:return y.call(F,z[0],z[1]);case 3:return y.call(F,z[0],z[1],z[2])}return y.apply(F,z)}function Je(y,F){for(var z=-1,fe=Array(y);++z<y;)fe[z]=F(z);return fe}function Qe(y){return function(F){return y(F)}}function Jt(y,F){return y?.[F]}function $e(y,F){return function(z){return y(F(z))}}var _e=Array.prototype,$t=Function.prototype,It=Object.prototype,yt=Fe["__core-js_shared__"],jt=$t.toString,wt=It.hasOwnProperty,Qt=function(){var y=/[^.]+$/.exec(yt&&yt.keys&&yt.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}(),Yt=It.toString,In=jt.call(Object),Bt=RegExp("^"+jt.call(wt).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),bt=be?Fe.Buffer:void 0,en=Fe.Symbol,vt=Fe.Uint8Array;bt&&bt.allocUnsafe;var at=$e(Object.getPrototypeOf,Object),Rt=Object.create,un=It.propertyIsEnumerable,tn=_e.splice,Dt=en?en.toStringTag:void 0,Ct=function(){try{var y=Ki(Object,"defineProperty");return y({},"",{}),y}catch{}}(),nn=bt?bt.isBuffer:void 0,_r=Math.max,cn=Date.now,Bn=Ki(Fe,"Map"),Dn=Ki(Object,"create"),Br=function(){function y(){}return function(F){if(!ar(F))return{};if(Rt)return Rt(F);y.prototype=F;var z=new y;return y.prototype=void 0,z}}();function St(y){var F=-1,z=y==null?0:y.length;for(this.clear();++F<z;){var fe=y[F];this.set(fe[0],fe[1])}}function nr(){this.__data__=Dn?Dn(null):{},this.size=0}function Rr(y){var F=this.has(y)&&delete this.__data__[y];return this.size-=F?1:0,F}function Or(y){var F=this.__data__;if(Dn){var z=F[y];return z===o?void 0:z}return wt.call(F,y)?F[y]:void 0}function xr(y){var F=this.__data__;return Dn?F[y]!==void 0:wt.call(F,y)}function rr(y,F){var z=this.__data__;return this.size+=this.has(y)?0:1,z[y]=Dn&&F===void 0?o:F,this}St.prototype.clear=nr,St.prototype.delete=Rr,St.prototype.get=Or,St.prototype.has=xr,St.prototype.set=rr;function ln(y){var F=-1,z=y==null?0:y.length;for(this.clear();++F<z;){var fe=y[F];this.set(fe[0],fe[1])}}function Pi(){this.__data__=[],this.size=0}function Mr(y){var F=this.__data__,z=wr(F,y);if(z<0)return!1;var fe=F.length-1;return z==fe?F.pop():tn.call(F,z,1),--this.size,!0}function $i(y){var F=this.__data__,z=wr(F,y);return z<0?void 0:F[z][1]}function zr(y){return wr(this.__data__,y)>-1}function fi(y,F){var z=this.__data__,fe=wr(z,y);return fe<0?(++this.size,z.push([y,F])):z[fe][1]=F,this}ln.prototype.clear=Pi,ln.prototype.delete=Mr,ln.prototype.get=$i,ln.prototype.has=zr,ln.prototype.set=fi;function _n(y){var F=-1,z=y==null?0:y.length;for(this.clear();++F<z;){var fe=y[F];this.set(fe[0],fe[1])}}function Rn(){this.size=0,this.__data__={hash:new St,map:new(Bn||ln),string:new St}}function ji(y){var F=Hr(this,y).delete(y);return this.size-=F?1:0,F}function ki(y){return Hr(this,y).get(y)}function Li(y){return Hr(this,y).has(y)}function di(y,F){var z=Hr(this,y),fe=z.size;return z.set(y,F),this.size+=z.size==fe?0:1,this}_n.prototype.clear=Rn,_n.prototype.delete=ji,_n.prototype.get=ki,_n.prototype.has=Li,_n.prototype.set=di;function qn(y){var F=this.__data__=new ln(y);this.size=F.size}function rn(){this.__data__=new ln,this.size=0}function Hi(y){var F=this.__data__,z=F.delete(y);return this.size=F.size,z}function qi(y){return this.__data__.get(y)}function Gi(y){return this.__data__.has(y)}function Vi(y,F){var z=this.__data__;if(z instanceof ln){var fe=z.__data__;if(!Bn||fe.length<r-1)return fe.push([y,F]),this.size=++z.size,this;z=this.__data__=new _n(fe)}return z.set(y,F),this.size=z.size,this}qn.prototype.clear=rn,qn.prototype.delete=Hi,qn.prototype.get=qi,qn.prototype.has=Gi,qn.prototype.set=Vi;function Ui(y,F){var z=On(y),fe=!z&&Ji(y),he=!z&&!fe&&Vr(y),we=!z&&!fe&&!he&&eo(y),Ne=z||fe||he||we,ye=Ne?Je(y.length,String):[],Ce=ye.length;for(var We in y)Ne&&(We=="length"||he&&(We=="offset"||We=="parent")||we&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||qr(We,Ce))||ye.push(We);return ye}function fn(y,F,z){(z!==void 0&&!Gr(y[F],z)||z===void 0&&!(F in y))&&Gn(y,F,z)}function ir(y,F,z){var fe=y[F];(!(wt.call(y,F)&&Gr(fe,z))||z===void 0&&!(F in y))&&Gn(y,F,z)}function wr(y,F){for(var z=y.length;z--;)if(Gr(y[z][0],F))return z;return-1}function Gn(y,F,z){F=="__proto__"&&Ct?Ct(y,F,{configurable:!0,enumerable:!0,value:z,writable:!0}):y[F]=z}var Wi=Lr();function br(y){return y==null?y===void 0?Y:D:Dt&&Dt in Object(y)?So(y):To(y)}function or(y){return Vn(y)&&br(y)==c}function hi(y){if(!ar(y)||gi(y))return!1;var F=Qi(y)?Bt:se;return F.test(Oo(y))}function Pr(y){return Vn(y)&&yi(y.length)&&!!ue[br(y)]}function dn(y){if(!ar(y))return hn(y);var F=sr(y),z=[];for(var fe in y)fe=="constructor"&&(F||!wt.call(y,fe))||z.push(fe);return z}function pi(y,F,z,fe,he){y!==F&&Wi(F,function(we,Ne){if(he||(he=new qn),ar(we))Xi(y,F,Ne,z,pi,fe,he);else{var ye=fe?fe(xn(y,Ne),we,Ne+"",y,F,he):void 0;ye===void 0&&(ye=we),fn(y,Ne,ye)}},to)}function Xi(y,F,z,fe,he,we,Ne){var ye=xn(y,z),Ce=xn(F,z),We=Ne.get(Ce);if(We){fn(y,z,We);return}var rt=we?we(ye,Ce,z+"",y,F,Ne):void 0,ut=rt===void 0;if(ut){var tt=On(Ce),kt=!tt&&Vr(Ce),wn=!tt&&!kt&&eo(Ce);rt=Ce,tt||kt||wn?On(ye)?rt=ye:Mo(ye)?rt=Yi(ye):kt?(ut=!1,rt=Eo(Ce)):wn?(ut=!1,rt=jr(Ce)):rt=[]:zo(Ce)||Ji(Ce)?(rt=ye,Ji(ye)?rt=Ur(ye):(!ar(ye)||Qi(ye))&&(rt=Fo(Ce))):ut=!1}ut&&(Ne.set(Ce,rt),he(rt,Ce,fe,we,Ne),Ne.delete(Ce)),fn(y,z,rt)}function $r(y,F){return Bo(Io(y,F,Xe),y+"")}var Ds=Ct?function(y,F){return Ct(y,"toString",{configurable:!0,enumerable:!1,value:et(F),writable:!0})}:Xe;function Eo(y,F){return y.slice()}function Ao(y){var F=new y.constructor(y.byteLength);return new vt(F).set(new vt(y)),F}function jr(y,F){var z=Ao(y.buffer);return new y.constructor(z,y.byteOffset,y.length)}function Yi(y,F){var z=-1,fe=y.length;for(F||(F=Array(fe));++z<fe;)F[z]=y[z];return F}function kr(y,F,z,fe){var he=!z;z||(z={});for(var we=-1,Ne=F.length;++we<Ne;){var ye=F[we],Ce=void 0;Ce===void 0&&(Ce=y[ye]),he?Gn(z,ye,Ce):ir(z,ye,Ce)}return z}function Zi(y){return $r(function(F,z){var fe=-1,he=z.length,we=he>1?z[he-1]:void 0,Ne=he>2?z[2]:void 0;for(we=y.length>3&&typeof we=="function"?(he--,we):void 0,Ne&&_s(z[0],z[1],Ne)&&(we=he<3?void 0:we,he=1),F=Object(F);++fe<he;){var ye=z[fe];ye&&y(F,ye,fe,we)}return F})}function Lr(y){return function(F,z,fe){for(var he=-1,we=Object(F),Ne=fe(F),ye=Ne.length;ye--;){var Ce=Ne[++he];if(z(we[Ce],Ce,we)===!1)break}return F}}function Hr(y,F){var z=y.__data__;return No(F)?z[typeof F=="string"?"string":"hash"]:z.map}function Ki(y,F){var z=Jt(y,F);return hi(z)?z:void 0}function So(y){var F=wt.call(y,Dt),z=y[Dt];try{y[Dt]=void 0;var fe=!0}catch{}var he=Yt.call(y);return fe&&(F?y[Dt]=z:delete y[Dt]),he}function Fo(y){return typeof y.constructor=="function"&&!sr(y)?Br(at(y)):{}}function qr(y,F){var z=typeof y;return F=F??l,!!F&&(z=="number"||z!="symbol"&&le.test(y))&&y>-1&&y%1==0&&y<F}function _s(y,F,z){if(!ar(z))return!1;var fe=typeof F;return(fe=="number"?mi(z)&&qr(F,z.length):fe=="string"&&F in z)?Gr(z[F],y):!1}function No(y){var F=typeof y;return F=="string"||F=="number"||F=="symbol"||F=="boolean"?y!=="__proto__":y===null}function gi(y){return!!Qt&&Qt in y}function sr(y){var F=y&&y.constructor,z=typeof F=="function"&&F.prototype||It;return y===z}function hn(y){var F=[];if(y!=null)for(var z in Object(y))F.push(z);return F}function To(y){return Yt.call(y)}function Io(y,F,z){return F=_r(F===void 0?y.length-1:F,0),function(){for(var fe=arguments,he=-1,we=_r(fe.length-F,0),Ne=Array(we);++he<we;)Ne[he]=fe[F+he];he=-1;for(var ye=Array(F+1);++he<F;)ye[he]=fe[he];return ye[F]=z(Ne),Pt(y,this,ye)}}function xn(y,F){if(!(F==="constructor"&&typeof y[F]=="function")&&F!="__proto__")return y[F]}var Bo=Ro(Ds);function Ro(y){var F=0,z=0;return function(){var fe=cn(),he=u-(fe-z);if(z=fe,he>0){if(++F>=s)return arguments[0]}else F=0;return y.apply(void 0,arguments)}}function Oo(y){if(y!=null){try{return jt.call(y)}catch{}try{return y+""}catch{}}return""}function Gr(y,F){return y===F||y!==y&&F!==F}var Ji=or(function(){return arguments}())?or:function(y){return Vn(y)&&wt.call(y,"callee")&&!un.call(y,"callee")},On=Array.isArray;function mi(y){return y!=null&&yi(y.length)&&!Qi(y)}function Mo(y){return Vn(y)&&mi(y)}var Vr=nn||I;function Qi(y){if(!ar(y))return!1;var F=br(y);return F==x||F==b||F==h||F==R}function yi(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=l}function ar(y){var F=typeof y;return y!=null&&(F=="object"||F=="function")}function Vn(y){return y!=null&&typeof y=="object"}function zo(y){if(!Vn(y)||br(y)!=E)return!1;var F=at(y);if(F===null)return!0;var z=wt.call(F,"constructor")&&F.constructor;return typeof z=="function"&&z instanceof z&&jt.call(z)==In}var eo=ht?Qe(ht):Pr;function Ur(y){return kr(y,to(y))}function to(y){return mi(y)?Ui(y):dn(y)}var xs=Zi(function(y,F,z){pi(y,F,z)});function et(y){return function(){return y}}function Xe(y){return y}function I(){return!1}e.exports=xs})(qu,qu.exports);var L6=qu.exports,Gu={exports:{}};Gu.exports;(function(e,n){var r=200,o="__lodash_hash_undefined__",s=1,u=2,l=9007199254740991,c="[object Arguments]",f="[object Array]",h="[object AsyncFunction]",p="[object Boolean]",g="[object Date]",m="[object Error]",x="[object Function]",b="[object GeneratorFunction]",_="[object Map]",C="[object Number]",D="[object Null]",E="[object Object]",R="[object Promise]",N="[object Proxy]",P="[object RegExp]",H="[object Set]",Y="[object String]",Q="[object Symbol]",$="[object Undefined]",X="[object WeakMap]",te="[object ArrayBuffer]",J="[object DataView]",Z="[object Float32Array]",B="[object Float64Array]",q="[object Int8Array]",j="[object Int16Array]",W="[object Int32Array]",ie="[object Uint8Array]",V="[object Uint8ClampedArray]",oe="[object Uint16Array]",se="[object Uint32Array]",le=/[\\^$.*+?()[\]{}|]/g,ue=/^\[object .+?Constructor\]$/,ge=/^(?:0|[1-9]\d*)$/,de={};de[Z]=de[B]=de[q]=de[j]=de[W]=de[ie]=de[V]=de[oe]=de[se]=!0,de[c]=de[f]=de[te]=de[p]=de[J]=de[g]=de[m]=de[x]=de[_]=de[C]=de[E]=de[P]=de[H]=de[Y]=de[X]=!1;var Fe=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,Be=typeof self=="object"&&self&&self.Object===Object&&self,me=Fe||Be||Function("return this")(),be=n&&!n.nodeType&&n,Te=be&&!0&&e&&!e.nodeType&&e,xt=Te&&Te.exports===be,ht=xt&&Fe.process,Pt=function(){try{return ht&&ht.binding&&ht.binding("util")}catch{}}(),Je=Pt&&Pt.isTypedArray;function Qe(I,y){for(var F=-1,z=I==null?0:I.length,fe=0,he=[];++F<z;){var we=I[F];y(we,F,I)&&(he[fe++]=we)}return he}function Jt(I,y){for(var F=-1,z=y.length,fe=I.length;++F<z;)I[fe+F]=y[F];return I}function $e(I,y){for(var F=-1,z=I==null?0:I.length;++F<z;)if(y(I[F],F,I))return!0;return!1}function _e(I,y){for(var F=-1,z=Array(I);++F<I;)z[F]=y(F);return z}function $t(I){return function(y){return I(y)}}function It(I,y){return I.has(y)}function yt(I,y){return I?.[y]}function jt(I){var y=-1,F=Array(I.size);return I.forEach(function(z,fe){F[++y]=[fe,z]}),F}function wt(I,y){return function(F){return I(y(F))}}function Qt(I){var y=-1,F=Array(I.size);return I.forEach(function(z){F[++y]=z}),F}var Yt=Array.prototype,In=Function.prototype,Bt=Object.prototype,bt=me["__core-js_shared__"],en=In.toString,vt=Bt.hasOwnProperty,at=function(){var I=/[^.]+$/.exec(bt&&bt.keys&&bt.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),Rt=Bt.toString,un=RegExp("^"+en.call(vt).replace(le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),tn=xt?me.Buffer:void 0,Dt=me.Symbol,Ct=me.Uint8Array,nn=Bt.propertyIsEnumerable,_r=Yt.splice,cn=Dt?Dt.toStringTag:void 0,Bn=Object.getOwnPropertySymbols,Dn=tn?tn.isBuffer:void 0,Br=wt(Object.keys,Object),St=hn(me,"DataView"),nr=hn(me,"Map"),Rr=hn(me,"Promise"),Or=hn(me,"Set"),xr=hn(me,"WeakMap"),rr=hn(Object,"create"),ln=On(St),Pi=On(nr),Mr=On(Rr),$i=On(Or),zr=On(xr),fi=Dt?Dt.prototype:void 0,_n=fi?fi.valueOf:void 0;function Rn(I){var y=-1,F=I==null?0:I.length;for(this.clear();++y<F;){var z=I[y];this.set(z[0],z[1])}}function ji(){this.__data__=rr?rr(null):{},this.size=0}function ki(I){var y=this.has(I)&&delete this.__data__[I];return this.size-=y?1:0,y}function Li(I){var y=this.__data__;if(rr){var F=y[I];return F===o?void 0:F}return vt.call(y,I)?y[I]:void 0}function di(I){var y=this.__data__;return rr?y[I]!==void 0:vt.call(y,I)}function qn(I,y){var F=this.__data__;return this.size+=this.has(I)?0:1,F[I]=rr&&y===void 0?o:y,this}Rn.prototype.clear=ji,Rn.prototype.delete=ki,Rn.prototype.get=Li,Rn.prototype.has=di,Rn.prototype.set=qn;function rn(I){var y=-1,F=I==null?0:I.length;for(this.clear();++y<F;){var z=I[y];this.set(z[0],z[1])}}function Hi(){this.__data__=[],this.size=0}function qi(I){var y=this.__data__,F=jr(y,I);if(F<0)return!1;var z=y.length-1;return F==z?y.pop():_r.call(y,F,1),--this.size,!0}function Gi(I){var y=this.__data__,F=jr(y,I);return F<0?void 0:y[F][1]}function Vi(I){return jr(this.__data__,I)>-1}function Ui(I,y){var F=this.__data__,z=jr(F,I);return z<0?(++this.size,F.push([I,y])):F[z][1]=y,this}rn.prototype.clear=Hi,rn.prototype.delete=qi,rn.prototype.get=Gi,rn.prototype.has=Vi,rn.prototype.set=Ui;function fn(I){var y=-1,F=I==null?0:I.length;for(this.clear();++y<F;){var z=I[y];this.set(z[0],z[1])}}function ir(){this.size=0,this.__data__={hash:new Rn,map:new(nr||rn),string:new Rn}}function wr(I){var y=sr(this,I).delete(I);return this.size-=y?1:0,y}function Gn(I){return sr(this,I).get(I)}function Wi(I){return sr(this,I).has(I)}function br(I,y){var F=sr(this,I),z=F.size;return F.set(I,y),this.size+=F.size==z?0:1,this}fn.prototype.clear=ir,fn.prototype.delete=wr,fn.prototype.get=Gn,fn.prototype.has=Wi,fn.prototype.set=br;function or(I){var y=-1,F=I==null?0:I.length;for(this.__data__=new fn;++y<F;)this.add(I[y])}function hi(I){return this.__data__.set(I,o),this}function Pr(I){return this.__data__.has(I)}or.prototype.add=or.prototype.push=hi,or.prototype.has=Pr;function dn(I){var y=this.__data__=new rn(I);this.size=y.size}function pi(){this.__data__=new rn,this.size=0}function Xi(I){var y=this.__data__,F=y.delete(I);return this.size=y.size,F}function $r(I){return this.__data__.get(I)}function Ds(I){return this.__data__.has(I)}function Eo(I,y){var F=this.__data__;if(F instanceof rn){var z=F.__data__;if(!nr||z.length<r-1)return z.push([I,y]),this.size=++F.size,this;F=this.__data__=new fn(z)}return F.set(I,y),this.size=F.size,this}dn.prototype.clear=pi,dn.prototype.delete=Xi,dn.prototype.get=$r,dn.prototype.has=Ds,dn.prototype.set=Eo;function Ao(I,y){var F=Vr(I),z=!F&&Mo(I),fe=!F&&!z&&yi(I),he=!F&&!z&&!fe&&to(I),we=F||z||fe||he,Ne=we?_e(I.length,String):[],ye=Ne.length;for(var Ce in I)vt.call(I,Ce)&&!(we&&(Ce=="length"||fe&&(Ce=="offset"||Ce=="parent")||he&&(Ce=="buffer"||Ce=="byteLength"||Ce=="byteOffset")||Bo(Ce,ye)))&&Ne.push(Ce);return Ne}function jr(I,y){for(var F=I.length;F--;)if(mi(I[F][0],y))return F;return-1}function Yi(I,y,F){var z=y(I);return Vr(I)?z:Jt(z,F(I))}function kr(I){return I==null?I===void 0?$:D:cn&&cn in Object(I)?To(I):Ji(I)}function Zi(I){return Ur(I)&&kr(I)==c}function Lr(I,y,F,z,fe){return I===y?!0:I==null||y==null||!Ur(I)&&!Ur(y)?I!==I&&y!==y:Hr(I,y,F,z,Lr,fe)}function Hr(I,y,F,z,fe,he){var we=Vr(I),Ne=Vr(y),ye=we?f:xn(I),Ce=Ne?f:xn(y);ye=ye==c?E:ye,Ce=Ce==c?E:Ce;var We=ye==E,rt=Ce==E,ut=ye==Ce;if(ut&&yi(I)){if(!yi(y))return!1;we=!0,We=!1}if(ut&&!We)return he||(he=new dn),we||to(I)?qr(I,y,F,z,fe,he):_s(I,y,ye,F,z,fe,he);if(!(F&s)){var tt=We&&vt.call(I,"__wrapped__"),kt=rt&&vt.call(y,"__wrapped__");if(tt||kt){var wn=tt?I.value():I,Un=kt?y.value():y;return he||(he=new dn),fe(wn,Un,F,z,he)}}return ut?(he||(he=new dn),No(I,y,F,z,fe,he)):!1}function Ki(I){if(!eo(I)||Oo(I))return!1;var y=Vn(I)?un:ue;return y.test(On(I))}function So(I){return Ur(I)&&zo(I.length)&&!!de[kr(I)]}function Fo(I){if(!Gr(I))return Br(I);var y=[];for(var F in Object(I))vt.call(I,F)&&F!="constructor"&&y.push(F);return y}function qr(I,y,F,z,fe,he){var we=F&s,Ne=I.length,ye=y.length;if(Ne!=ye&&!(we&&ye>Ne))return!1;var Ce=he.get(I);if(Ce&&he.get(y))return Ce==y;var We=-1,rt=!0,ut=F&u?new or:void 0;for(he.set(I,y),he.set(y,I);++We<Ne;){var tt=I[We],kt=y[We];if(z)var wn=we?z(kt,tt,We,y,I,he):z(tt,kt,We,I,y,he);if(wn!==void 0){if(wn)continue;rt=!1;break}if(ut){if(!$e(y,function(Un,Cr){if(!It(ut,Cr)&&(tt===Un||fe(tt,Un,F,z,he)))return ut.push(Cr)})){rt=!1;break}}else if(!(tt===kt||fe(tt,kt,F,z,he))){rt=!1;break}}return he.delete(I),he.delete(y),rt}function _s(I,y,F,z,fe,he,we){switch(F){case J:if(I.byteLength!=y.byteLength||I.byteOffset!=y.byteOffset)return!1;I=I.buffer,y=y.buffer;case te:return!(I.byteLength!=y.byteLength||!he(new Ct(I),new Ct(y)));case p:case g:case C:return mi(+I,+y);case m:return I.name==y.name&&I.message==y.message;case P:case Y:return I==y+"";case _:var Ne=jt;case H:var ye=z&s;if(Ne||(Ne=Qt),I.size!=y.size&&!ye)return!1;var Ce=we.get(I);if(Ce)return Ce==y;z|=u,we.set(I,y);var We=qr(Ne(I),Ne(y),z,fe,he,we);return we.delete(I),We;case Q:if(_n)return _n.call(I)==_n.call(y)}return!1}function No(I,y,F,z,fe,he){var we=F&s,Ne=gi(I),ye=Ne.length,Ce=gi(y),We=Ce.length;if(ye!=We&&!we)return!1;for(var rt=ye;rt--;){var ut=Ne[rt];if(!(we?ut in y:vt.call(y,ut)))return!1}var tt=he.get(I);if(tt&&he.get(y))return tt==y;var kt=!0;he.set(I,y),he.set(y,I);for(var wn=we;++rt<ye;){ut=Ne[rt];var Un=I[ut],Cr=y[ut];if(z)var ws=we?z(Cr,Un,ut,y,I,he):z(Un,Cr,ut,I,y,he);if(!(ws===void 0?Un===Cr||fe(Un,Cr,F,z,he):ws)){kt=!1;break}wn||(wn=ut=="constructor")}if(kt&&!wn){var no=I.constructor,Vt=y.constructor;no!=Vt&&"constructor"in I&&"constructor"in y&&!(typeof no=="function"&&no instanceof no&&typeof Vt=="function"&&Vt instanceof Vt)&&(kt=!1)}return he.delete(I),he.delete(y),kt}function gi(I){return Yi(I,xs,Io)}function sr(I,y){var F=I.__data__;return Ro(y)?F[typeof y=="string"?"string":"hash"]:F.map}function hn(I,y){var F=yt(I,y);return Ki(F)?F:void 0}function To(I){var y=vt.call(I,cn),F=I[cn];try{I[cn]=void 0;var z=!0}catch{}var fe=Rt.call(I);return z&&(y?I[cn]=F:delete I[cn]),fe}var Io=Bn?function(I){return I==null?[]:(I=Object(I),Qe(Bn(I),function(y){return nn.call(I,y)}))}:et,xn=kr;(St&&xn(new St(new ArrayBuffer(1)))!=J||nr&&xn(new nr)!=_||Rr&&xn(Rr.resolve())!=R||Or&&xn(new Or)!=H||xr&&xn(new xr)!=X)&&(xn=function(I){var y=kr(I),F=y==E?I.constructor:void 0,z=F?On(F):"";if(z)switch(z){case ln:return J;case Pi:return _;case Mr:return R;case $i:return H;case zr:return X}return y});function Bo(I,y){return y=y??l,!!y&&(typeof I=="number"||ge.test(I))&&I>-1&&I%1==0&&I<y}function Ro(I){var y=typeof I;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?I!=="__proto__":I===null}function Oo(I){return!!at&&at in I}function Gr(I){var y=I&&I.constructor,F=typeof y=="function"&&y.prototype||Bt;return I===F}function Ji(I){return Rt.call(I)}function On(I){if(I!=null){try{return en.call(I)}catch{}try{return I+""}catch{}}return""}function mi(I,y){return I===y||I!==I&&y!==y}var Mo=Zi(function(){return arguments}())?Zi:function(I){return Ur(I)&&vt.call(I,"callee")&&!nn.call(I,"callee")},Vr=Array.isArray;function Qi(I){return I!=null&&zo(I.length)&&!Vn(I)}var yi=Dn||Xe;function ar(I,y){return Lr(I,y)}function Vn(I){if(!eo(I))return!1;var y=kr(I);return y==x||y==b||y==h||y==N}function zo(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=l}function eo(I){var y=typeof I;return I!=null&&(y=="object"||y=="function")}function Ur(I){return I!=null&&typeof I=="object"}var to=Je?$t(Je):So;function xs(I){return Qi(I)?Ao(I):Fo(I)}function et(){return[]}function Xe(){return!1}e.exports=ar})(Gu,Gu.exports);var nm=Gu.exports,rm=200,Ff="__lodash_hash_undefined__",H6=1/0,q6=9007199254740991,G6="[object Function]",V6="[object GeneratorFunction]",U6=/[\\^$.*+?()[\]{}|]/g,W6=/^\[object .+?Constructor\]$/,X6=typeof Kt=="object"&&Kt&&Kt.Object===Object&&Kt,Y6=typeof self=="object"&&self&&self.Object===Object&&self,Nf=X6||Y6||Function("return this")();function Z6(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}function K6(e,n){for(var r=-1,o=e?e.length:0,s=0,u=[];++r<o;){var l=e[r];n(l,r,e)&&(u[s++]=l)}return u}function im(e,n){var r=e?e.length:0;return!!r&&e8(e,n,0)>-1}function J6(e,n){for(var r=-1,o=n.length,s=e.length;++r<o;)e[s+r]=n[r];return e}function Q6(e,n,r,o){for(var s=e.length,u=r+-1;++u<s;)if(n(e[u],u,e))return u;return-1}function e8(e,n,r){if(n!==n)return Q6(e,t8,r);for(var o=r-1,s=e.length;++o<s;)if(e[o]===n)return o;return-1}function t8(e){return e!==e}function om(e,n){return e.has(n)}function n8(e,n){return e?.[n]}function r8(e){var n=!1;if(e!=null&&typeof e.toString!="function")try{n=!!(e+"")}catch{}return n}function sm(e){var n=-1,r=Array(e.size);return e.forEach(function(o){r[++n]=o}),r}var i8=Array.prototype,o8=Function.prototype,am=Object.prototype,_l=Nf["__core-js_shared__"],Op=function(){var e=/[^.]+$/.exec(_l&&_l.keys&&_l.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),um=o8.toString,Tf=am.hasOwnProperty,s8=am.toString,a8=RegExp("^"+um.call(Tf).replace(U6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),u8=i8.splice,Mp=Math.max,c8=If(Nf,"Map"),xl=If(Nf,"Set"),aa=If(Object,"create");function xo(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function l8(){this.__data__=aa?aa(null):{}}function f8(e){return this.has(e)&&delete this.__data__[e]}function d8(e){var n=this.__data__;if(aa){var r=n[e];return r===Ff?void 0:r}return Tf.call(n,e)?n[e]:void 0}function h8(e){var n=this.__data__;return aa?n[e]!==void 0:Tf.call(n,e)}function p8(e,n){var r=this.__data__;return r[e]=aa&&n===void 0?Ff:n,this}xo.prototype.clear=l8;xo.prototype.delete=f8;xo.prototype.get=d8;xo.prototype.has=h8;xo.prototype.set=p8;function ys(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function g8(){this.__data__=[]}function m8(e){var n=this.__data__,r=tc(n,e);if(r<0)return!1;var o=n.length-1;return r==o?n.pop():u8.call(n,r,1),!0}function y8(e){var n=this.__data__,r=tc(n,e);return r<0?void 0:n[r][1]}function v8(e){return tc(this.__data__,e)>-1}function D8(e,n){var r=this.__data__,o=tc(r,e);return o<0?r.push([e,n]):r[o][1]=n,this}ys.prototype.clear=g8;ys.prototype.delete=m8;ys.prototype.get=y8;ys.prototype.has=v8;ys.prototype.set=D8;function vs(e){var n=-1,r=e?e.length:0;for(this.clear();++n<r;){var o=e[n];this.set(o[0],o[1])}}function _8(){this.__data__={hash:new xo,map:new(c8||ys),string:new xo}}function x8(e){return nc(this,e).delete(e)}function w8(e){return nc(this,e).get(e)}function b8(e){return nc(this,e).has(e)}function C8(e,n){return nc(this,e).set(e,n),this}vs.prototype.clear=_8;vs.prototype.delete=x8;vs.prototype.get=w8;vs.prototype.has=b8;vs.prototype.set=C8;function ua(e){var n=-1,r=e?e.length:0;for(this.__data__=new vs;++n<r;)this.add(e[n])}function E8(e){return this.__data__.set(e,Ff),this}function A8(e){return this.__data__.has(e)}ua.prototype.add=ua.prototype.push=E8;ua.prototype.has=A8;function tc(e,n){for(var r=e.length;r--;)if(z8(e[r][0],n))return r;return-1}function zp(e,n,r,o){var s=-1,u=im,l=!0,c=e.length,f=[],h=n.length;if(!c)return f;n.length>=rm&&(u=om,l=!1,n=new ua(n));e:for(;++s<c;){var p=e[s],g=p;if(p=p!==0?p:0,l&&g===g){for(var m=h;m--;)if(n[m]===g)continue e;f.push(p)}else u(n,g,o)||f.push(p)}return f}function S8(e){if(!lm(e)||R8(e))return!1;var n=cm(e)||r8(e)?a8:W6;return n.test(O8(e))}function F8(e,n){return n=Mp(n===void 0?e.length-1:n,0),function(){for(var r=arguments,o=-1,s=Mp(r.length-n,0),u=Array(s);++o<s;)u[o]=r[n+o];o=-1;for(var l=Array(n+1);++o<n;)l[o]=r[o];return l[n]=u,Z6(e,this,l)}}function N8(e,n,r){var o=-1,s=im,u=e.length,l=!0,c=[],f=c;if(u>=rm){var h=I8(e);if(h)return sm(h);l=!1,s=om,f=new ua}else f=c;e:for(;++o<u;){var p=e[o],g=p;if(p=p!==0?p:0,l&&g===g){for(var m=f.length;m--;)if(f[m]===g)continue e;c.push(p)}else s(f,g,r)||(f!==c&&f.push(g),c.push(p))}return c}function T8(e,n,r){for(var o=-1,s=e.length;++o<s;)var u=u?J6(zp(u,e[o],n,r),zp(e[o],u,n,r)):e[o];return u&&u.length?N8(u,n,r):[]}var I8=xl&&1/sm(new xl([,-0]))[1]==H6?function(e){return new xl(e)}:L8;function nc(e,n){var r=e.__data__;return B8(n)?r[typeof n=="string"?"string":"hash"]:r.map}function If(e,n){var r=n8(e,n);return S8(r)?r:void 0}function B8(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}function R8(e){return!!Op&&Op in e}function O8(e){if(e!=null){try{return um.call(e)}catch{}try{return e+""}catch{}}return""}var M8=F8(function(e){return T8(K6(e,$8))});function z8(e,n){return e===n||e!==e&&n!==n}function P8(e){return e!=null&&j8(e.length)&&!cm(e)}function $8(e){return k8(e)&&P8(e)}function cm(e){var n=lm(e)?s8.call(e):"";return n==G6||n==V6}function j8(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=q6}function lm(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function k8(e){return!!e&&typeof e=="object"}function L8(){}var H8=M8,fm=9007199254740991,q8="[object Arguments]",G8="[object Function]",V8="[object GeneratorFunction]",U8=/^(?:0|[1-9]\d*)$/;function W8(e,n){for(var r=-1,o=Array(e);++r<e;)o[r]=n(r);return o}function X8(e,n){return function(r){return e(n(r))}}var rc=Object.prototype,Bf=rc.hasOwnProperty,dm=rc.toString,Y8=rc.propertyIsEnumerable,Z8=X8(Object.keys,Object);function K8(e,n){var r=nF(e)||tF(e)?W8(e.length,String):[],o=r.length,s=!!o;for(var u in e)Bf.call(e,u)&&!(s&&(u=="length"||Q8(u,o)))&&r.push(u);return r}function J8(e){if(!eF(e))return Z8(e);var n=[];for(var r in Object(e))Bf.call(e,r)&&r!="constructor"&&n.push(r);return n}function Q8(e,n){return n=n??fm,!!n&&(typeof e=="number"||U8.test(e))&&e>-1&&e%1==0&&e<n}function eF(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||rc;return e===r}function tF(e){return rF(e)&&Bf.call(e,"callee")&&(!Y8.call(e,"callee")||dm.call(e)==q8)}var nF=Array.isArray;function hm(e){return e!=null&&oF(e.length)&&!iF(e)}function rF(e){return aF(e)&&hm(e)}function iF(e){var n=sF(e)?dm.call(e):"";return n==G8||n==V8}function oF(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=fm}function sF(e){var n=typeof e;return!!e&&(n=="object"||n=="function")}function aF(e){return!!e&&typeof e=="object"}function uF(e){return hm(e)?K8(e):J8(e)}var cF=uF;function Eu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Eu=function(r){return typeof r}:Eu=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Eu(e)}var lF={string:function(n){return typeof n=="string"},number:function(n){return typeof n=="number"&&isFinite(n)},integer:function(n){return typeof n=="number"&&n%1===0},boolean:function(n){return typeof n=="boolean"},array:function(n){return n instanceof Array},null:function(n){return n===null},date:function(n){return n instanceof Date},any:function(n){return!0},object:function(n){return n&&Eu(n)==="object"&&!(n instanceof Array)&&!(n instanceof Date)}},er={"date-time":/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])[tT ](2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])(\.\d+)?([zZ]|[+-]([0-5][0-9]):(60|[0-5][0-9]))$/,date:/^\d{4}-(?:0[0-9]{1}|1[0-2]{1})-(3[01]|0[1-9]|[12][0-9])$/,time:/^(2[0-4]|[01][0-9]):([0-5][0-9]):(60|[0-5][0-9])$/,email:/^(?:[\w!#$%&'*+-/=?^`{|}~]+\.)*[\w!#$%&'*+-/=?^`{|}~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/,"ip-address":/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ipv6:/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,uri:/^[a-zA-Z][a-zA-Z0-9+-.]*:[^\s]*$/,color:/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,hostname:/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,"host-name":/^(?=.{1,255}$)[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|-){0,61}[0-9A-Za-z])?)*\.?$/,alpha:/^[a-zA-Z]+$/,alphanumeric:/^[a-zA-Z0-9]+$/,"utc-millisec":function(n){return typeof n=="string"&&parseFloat(n)===parseInt(n,10)&&!isNaN(n)},regex:function(n){var r=!0;try{new RegExp(n)}catch{r=!1}return r},style:/\s*(.+?):\s*([^;]+);?/g,phone:/^\+(?:[0-9] ?){6,14}[0-9]$/};er.regexp=er.regex;er.pattern=er.regex;er.ipv4=er["ip-address"];var fF=function(n,r){if(typeof n=="string"&&er[r]!==void 0){if(er[r]instanceof RegExp)return er[r].test(n);if(typeof er[r]=="function")return er[r](n)}return!0},dF={types:lF,isFormat:fF,FORMAT_REGEXPS:er},fu=nm,hF=H8,du=cF,Rf=dF,pF=Rf.types,gF=Rf.FORMAT_REGEXPS,mF=Rf.isFormat,Au={stringFormats:du(gF),isFormat:mF,typeNames:["integer","number","string","array","object","boolean","null","date"],getType:function(n){return Au.typeNames.find(function(r){return pF[r](n)})},mergeSchemaObjs:function(n,r){var o=du(n),s=du(r);if(!fu(o,s)){if(n.type==="array"&&r.type==="array"&&fu(hF(o,s),["items"])){var u=o.length>s.length?r:n,l=o.length>s.length?n:r,c=du(u).reduce(function(x,b){return fu(u[b],l[b])&&x},!0);if(c)return u}if(n.type!=="object"||r.type!=="object")return null}for(var f={},h=0,p=o.length;h<p;h++){var g=o[h];if(Au.getType(n[g])==="object"){var m=Au.mergeSchemaObjs(n[g],r[g]);if(m)f[g]=m;else{if(n.type==="object"||r.type==="object")return{type:"object"};if(g!=="items"||n.type!=="array"||r.type!=="array")return null}}else if(g==="type")if(n[g]!==r[g])if(n[g]==="integer"&&r[g]==="number"||n[g]==="number"&&r[g]==="integer")f[g]="number";else return null;else f[g]=n[g];else{if(!fu(n[g],r[g]))return null;f[g]=n[g]}}return f}},yF=Au;function vF(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function DF(e,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _F(e,n,r){return n&&DF(e.prototype,n),e}var wl=L6,xF=nm,Ks=yF,wF={required:!1,postProcessFnc:null,strings:{detectFormat:!0,preProcessFnc:null},arrays:{mode:"all"},objects:{preProcessFnc:null,postProcessFnc:null,additionalProperties:!0}},bF=["hostname","host-name","alpha","alphanumeric","regex","regexp","pattern"],Pp=Ks.stringFormats.filter(function(e){return bF.indexOf(e)<0});function CF(e){for(var n,r=0,o=e.length;r<o;r++){var s=e[r];if(r>0&&(s==="integer"&&n==="number"?s="number":s==="number"&&n==="integer"&&(n="number"),n!==s))return null;n=s}return n}function EF(e){return CF(e.map(function(n){return Ks.getType(n)}))}var AF=function(){function e(n){vF(this,e),this.options=wl({},wF,n),this.getObjectSchemaDefault=this.getObjectSchemaDefault.bind(this),this.getStringSchemaDefault=this.getStringSchemaDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this),this.commmonPostProcessDefault=this.commmonPostProcessDefault.bind(this),this.objectPostProcessDefault=this.objectPostProcessDefault.bind(this)}return _F(e,[{key:"getCommonArrayItemSchema",value:function(r){var o=this,s=r.map(function(u){return o.getSchema(u)});return s.reduce(function(u,l){return Ks.mergeSchemaObjs(u,l)},s.pop())}},{key:"getObjectSchemaDefault",value:function(r){var o=this,s={type:"object"},u=Object.keys(r);return u.length>0&&(s.properties=u.reduce(function(l,c){return l[c]=o.getSchema(r[c]),l},{})),s}},{key:"getObjectSchema",value:function(r){return this.options.objects.preProcessFnc?this.options.objects.preProcessFnc(r,this.getObjectSchemaDefault):this.getObjectSchemaDefault(r)}},{key:"getArraySchemaMerging",value:function(r){var o={type:"array"},s=EF(r);if(s)if(o.items={type:s},s!=="integer"&&s!=="number"){var u=this.getCommonArrayItemSchema(r);u&&(o.items=u)}else this.options.required&&(o.items.required=!0);return o}},{key:"getArraySchemaNoMerging",value:function(r){var o={type:"array"};return r.length>0&&(o.items=this.getSchema(r[0])),o}},{key:"getArraySchemaTuple",value:function(r){var o=this,s={type:"array"};return r.length>0&&(s.items=r.map(function(u){return o.getSchema(u)})),s}},{key:"getArraySchemaUniform",value:function(r){var o=this.getArraySchemaNoMerging(r);if(r.length>1){for(var s=1;s<r.length;s++)if(!xF(o.items,this.getSchema(r[s])))throw new Error("Invalid schema, incompatible array items")}return o}},{key:"getArraySchema",value:function(r){if(r.length===0)return{type:"array"};switch(this.options.arrays.mode){case"all":return this.getArraySchemaMerging(r);case"first":return this.getArraySchemaNoMerging(r);case"uniform":return this.getArraySchemaUniform(r);case"tuple":return this.getArraySchemaTuple(r);default:throw new Error("Unknown array mode option '".concat(this.options.arrays.mode,"'"))}}},{key:"getStringSchemaDefault",value:function(r){var o={type:"string"};if(!this.options.strings.detectFormat)return o;var s=Pp.findIndex(function(u){return Ks.isFormat(r,u)});return s>=0&&(o.format=Pp[s]),o}},{key:"getStringSchema",value:function(r){return this.options.strings.preProcessFnc?this.options.strings.preProcessFnc(r,this.getStringSchemaDefault):this.getStringSchemaDefault(r)}},{key:"commmonPostProcessDefault",value:function(r,o,s){return this.options.required?wl({},o,{required:!0}):o}},{key:"objectPostProcessDefault",value:function(r,o){return this.options.objects.additionalProperties===!1&&Object.getOwnPropertyNames(o).length>0?wl({},r,{additionalProperties:!1}):r}},{key:"getSchema",value:function(r){var o=Ks.getType(r);if(!o)throw new Error("Type of value couldn't be determined");var s;switch(o){case"object":s=this.getObjectSchema(r);break;case"array":s=this.getArraySchema(r);break;case"string":s=this.getStringSchema(r);break;default:s={type:o}}return this.options.postProcessFnc?s=this.options.postProcessFnc(o,s,r,this.commmonPostProcessDefault):s=this.commmonPostProcessDefault(o,s,r),o==="object"&&(this.options.objects.postProcessFnc?s=this.options.objects.postProcessFnc(s,r,this.objectPostProcessDefault):s=this.objectPostProcessDefault(s,r)),s}}]),e}();function SF(e,n){var r=new AF(n);return r.getSchema(e)}var FF=SF;const NF=e0(FF),pm=e=>{const{isOpen:n,onDismiss:r,onSuccess:o,model:s}=e,{token:u}=Ql.useToken(),[l,c]=T.useState("");return T.useEffect(()=>{n&&s&&c(s)},[n]),S.jsxs(Wu,{title:"Convert to JSON Schema",open:n,destroyOnClose:!0,onCancel:r,width:540,okText:"Convert",onOk:()=>{try{o?.({schema:JSON.stringify(NF(Ii.parse(l)),null,2),model:l})}catch(f){Mt.error(f?.message)}},children:[S.jsx(Gt.Text,{children:"Type or paste JSON or JSON5 model here and covert it to JSON Schema"}),S.jsx(tf,{loading:S.jsx(cs,{size:"large"}),language:"javascript",theme:u.mode==="dark"?"vs-dark":"light",height:"400px",onChange:f=>c(f||""),value:l||"",onMount:(f,h)=>{h.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),h.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),f.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async p=>{try{await Fu(JSON.stringify(Ii.parse(p.getValue()))),Mt.success("Copied to clipboard!")}catch{Mt.error("Failed to copy to clipboard.")}}}),f.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:p=>{const g=JSON.stringify(Ii.parse(p.getValue()),null,2);p.setValue(g)}})},options:{automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})]})};pm.__docgenInfo={description:"",methods:[],displayName:"JsonToJsonSchemaDialog",props:{id:{required:!1,tsType:{name:"string"},description:""},onSuccess:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { schema: string; model: string }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ schema: string; model: string }",signature:{properties:[{key:"schema",value:{name:"string",required:!0}},{key:"model",value:{name:"string",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""},onDismiss:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},isOpen:{required:!1,tsType:{name:"boolean"},description:""},model:{required:!1,tsType:{name:"string"},description:""}}};const TF="Provide JSON Schema format. If no JSON Schema is provided, validation will be skipped.",$p={automaticLayout:!0,contextmenu:!1,fontSize:13,fontFamily:"var(--mono-font-family)",tabSize:2,minimap:{enabled:!1},overviewRulerBorder:!1,scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4}};var gm=(e=>(e.Schema="Schema",e))(gm||{});const Of=({id:e,type:n="input"})=>{const r=zt(),o="json",{token:s}=Ql.useToken(),[u,l]=T.useState(!1),[c,f]=T.useState("Schema"),[h,p]=T.useState(),[g,m]=T.useState(),x=Mh(()=>h?.layout(),100,{trailing:!0}),b=Mh(()=>g?.layout(),100,{trailing:!0}),{disabled:_,content:C}=st(({simulate:R,disabled:N,configurable:P,decisionGraph:H})=>({nodeError:He(R).with({error:{data:{nodeId:e}}},({error:Y})=>Y).otherwise(()=>null),disabled:N,configurable:P,content:(H?.nodes??[]).find(Y=>Y.id===e)?.content})),{contentDiff:D}=pa(e),E=T.useMemo(()=>D?.fields?.schema?.previousValue,[D]);return T.useEffect(()=>(window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[x,h]),T.useEffect(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[b,g]),S.jsx("div",{className:"grl-node-content","data-theme":s.mode,style:{height:"100%","--color-text":s.colorTextBase,"--color-background-elevated":s.colorBgElevated,"--color-border":s.colorBorder,"--line-height":s.lineHeight},children:S.jsx(c0,{className:"grl-node-content-main",direction:"horizontal",autoSaveId:`jdm-editor:${n}:schema:layout`,children:S.jsx("div",{className:"grl-node-content-side",children:S.jsxs("div",{className:"grl-node-content-side__panel",children:[S.jsx("div",{className:"grl-node-content-side__header",children:S.jsx(Jl,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},items:Object.values(gm).map(R=>({key:R,label:S.jsxs("span",{children:[R," ",S.jsx(gr,{title:TF,children:S.jsx(w0,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})})]})})),activeKey:c,onChange:R=>f(R),tabBarExtraContent:S.jsxs(r0,{style:{marginRight:8},size:"small",children:[S.jsx(gr,{title:"Format code",placement:"bottomRight",children:S.jsx(it,{size:"small",type:"text",disabled:_,icon:S.jsx(Uw,{}),onClick:()=>h?.getAction?.("editor.action.formatDocument")?.run?.()})}),S.jsx(gr,{title:"Import from JSON",placement:"bottomRight",children:S.jsx(it,{type:"text",size:"small",disabled:_,icon:S.jsx($w,{}),onClick:()=>{l(!0)}})})]})})}),S.jsx("div",{className:"grl-node-content-side__body",children:He(c).with("Schema",()=>E!==void 0?S.jsx(Ww,{loading:S.jsx(cs,{size:"large"}),language:o,original:E,modified:C?.schema,onMount:R=>m(R),theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...$p,readOnly:!0}}):S.jsx(tf,{loading:S.jsx(cs,{size:"large"}),language:o,value:C?.schema||"",onMount:R=>p(R),onChange:R=>{r.updateNode(e,N=>(N.content={schema:R},N))},theme:s.mode==="dark"?"vs-dark":"light",height:"100%",options:{...$p,readOnly:_}})).exhaustive()}),S.jsx(pm,{isOpen:u,onDismiss:()=>l(!1),onSuccess:({schema:R,model:N})=>{localStorage.setItem(`${e}-model`,N),r.updateNode(e,P=>(P.content={schema:R},P)),l(!1)},model:localStorage.getItem(`${e}-model`)||void 0})]})})})})};Of.__docgenInfo={description:"",methods:[],displayName:"TabJsonSchema",props:{id:{required:!0,tsType:{name:"string"},description:""},manager:{required:!1,tsType:{name:"DragDropManager"},description:""},type:{required:!1,tsType:{name:"union",raw:"'input' | 'output'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'output'"}]},description:"",defaultValue:{value:"'input'",computed:!1}}}};const mm={type:lt.Input,icon:S.jsx(F6,{size:"1em"}),displayName:"Request",color:Co.Green,documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Provides input context",generateNode:()=>({name:"request",content:{schema:""}}),renderTab:({id:e,manager:n})=>S.jsx(Of,{id:e,manager:n,type:"input"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=zt(),{disabled:u}=st(({disabled:l})=>({disabled:l}));return S.jsx(zi,{id:e,specification:o,name:n.name,isSelected:r,handleLeft:!1,actions:[S.jsx(it,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")],menuItems:[{key:"documentation",icon:S.jsx(x0,{}),label:"Documentation",onClick:()=>window.open(o.documentationUrl,"_href")},{key:"delete",icon:S.jsx(Xu,{}),danger:!0,label:S.jsx(Gs,{left:"Delete",right:bu.shortcut("Backspace")}),disabled:u,onClick:()=>Wu.confirm({icon:null,title:"Delete node",content:S.jsxs(Gt.Text,{children:["Are you sure you want to delete ",S.jsx(Gt.Text,{strong:!0,children:n.name})," node."]}),okButtonProps:{danger:!0},onOk:()=>s.removeNodes([e])})}]})},getDiffContent:(e,n)=>{const r={};return gt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&qt.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}},ym={type:lt.Output,icon:S.jsx(A6,{size:"1em"}),color:Co.Green,displayName:"Response",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions",shortDescription:"Outputs the context",generateNode:()=>({name:"response",content:{schema:""}}),renderTab:({id:e,manager:n})=>S.jsx(Of,{id:e,manager:n,type:"output"}),renderNode:({id:e,data:n,selected:r,specification:o})=>{const s=zt();return S.jsx(zi,{id:e,specification:o,name:n.name,isSelected:r,handleRight:!1,actions:[S.jsx(it,{type:"text",onClick:()=>s.openTab(e),children:"Configure"},"edit-table")]})},getDiffContent:(e,n)=>{const r={};return gt(e||{},o=>((e?.schema||"")?.trim?.()!==(n?.schema||"")?.trim?.()&&qt.set(r,"schema",{previousValue:n?.schema||"",status:"modified"}),Object.keys(r).length>0&&(o._diff={status:"modified",fields:r}),o))}};var Zl=new Map,hu=new WeakMap,jp=0,IF=void 0;function BF(e){return e?(hu.has(e)||(jp+=1,hu.set(e,jp.toString())),hu.get(e)):"0"}function RF(e){return Object.keys(e).sort().filter(n=>e[n]!==void 0).map(n=>`${n}_${n==="root"?BF(e.root):e[n]}`).toString()}function OF(e){const n=RF(e);let r=Zl.get(n);if(!r){const o=new Map;let s;const u=new IntersectionObserver(l=>{l.forEach(c=>{var f;const h=c.isIntersecting&&s.some(p=>c.intersectionRatio>=p);e.trackVisibility&&typeof c.isVisible>"u"&&(c.isVisible=h),(f=o.get(c.target))==null||f.forEach(p=>{p(h,c)})})},e);s=u.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:n,observer:u,elements:o},Zl.set(n,r)}return r}function MF(e,n,r={},o=IF){if(typeof window.IntersectionObserver>"u"&&o!==void 0){const f=e.getBoundingClientRect();return n(o,{isIntersecting:o,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:f,intersectionRect:f,rootBounds:f}),()=>{}}const{id:s,observer:u,elements:l}=OF(r),c=l.get(e)||[];return l.has(e)||l.set(e,c),c.push(n),u.observe(e),function(){c.splice(c.indexOf(n),1),c.length===0&&(l.delete(e),u.unobserve(e)),l.size===0&&(u.disconnect(),Zl.delete(s))}}function zF({threshold:e,delay:n,trackVisibility:r,rootMargin:o,root:s,triggerOnce:u,skip:l,initialInView:c,fallbackInView:f,onChange:h}={}){var p;const[g,m]=T.useState(null),x=T.useRef(h),[b,_]=T.useState({inView:!!c,entry:void 0});x.current=h,T.useEffect(()=>{if(l||!g)return;let R;return R=MF(g,(N,P)=>{_({inView:N,entry:P}),x.current&&x.current(N,P),P.isIntersecting&&u&&R&&(R(),R=void 0)},{root:s,rootMargin:o,threshold:e,trackVisibility:r,delay:n},f),()=>{R&&R()}},[Array.isArray(e)?e.toString():e,g,s,o,u,l,r,f,n]);const C=(p=b.entry)==null?void 0:p.target,D=T.useRef(void 0);!g&&C&&!u&&!l&&D.current!==C&&(D.current=C,_({inView:!!c,entry:void 0}));const E=[m,b.inView,b.entry];return E.ref=E[0],E.inView=E[1],E.entry=E[2],E}const PF={type:lt.Switch,icon:S.jsx(O6,{size:"1em"}),displayName:"Switch",documentationUrl:"https://gorules.io/docs/user-manual/decision-modeling/decisions/switch",shortDescription:"Conditional branching",color:Co.Purple,getDiffContent:(e,n)=>gt(e,r=>{const o={};(e.hitPolicy??"")!==(n.hitPolicy??"")&&qt.set(o,"hitPolicy",{status:"modified",previousValue:e.hitPolicy});const s=Zs(e?.statements||[],n?.statements||[],{compareFields:(u,l)=>{const c=(u.condition??"")!==l.condition;return{hasChanges:c,fields:{...c&&{condition:{status:"modified",previousValue:l.condition}}}}}});return r.statements=s,s.find(u=>u?._diff?.status==="modified"||u?._diff?.status==="added"||u?._diff?.status==="removed")&&qt.set(o,"statements",{status:"modified"}),Object.keys(o).length>0&&(r._diff={status:"modified",fields:o}),r}),inferTypes:{needsUpdate:()=>!1,determineOutputType:e=>e.input},generateNode:({index:e})=>({name:`switch${e}`,content:{hitPolicy:"first",statements:[{id:crypto.randomUUID(),condition:"",isDefault:!1}]}}),renderNode:({specification:e,...n})=>S.jsx($F,{specification:e,...n})},$F=({id:e,data:n,selected:r,specification:o})=>{const s=zt(),{ref:u,inView:l}=zF({delay:1e3}),{content:c,disabled:f,nodeTrace:h,compactMode:p,isGraphActive:g}=st(({decisionGraph:D,disabled:E,simulate:R,compactMode:N,activeTab:P})=>({nodeTrace:He(R).with({result:Le._},({result:H})=>H?.trace?.[e]).otherwise(()=>null),content:(D?.nodes||[]).find(H=>H?.id===e)?.content,disabled:E,compactMode:N,isGraphActive:P==="graph"})),m=ms(e,{disabled:!g||!l}),x=c?.statements||[],b=c?.hitPolicy||"first",_=D=>{s.updateNode(e,E=>(E.content.hitPolicy=D,E))},C=T.useMemo(()=>p?kF:jF,[p]);return S.jsx(zi,{id:e,ref:u,className:Ze(["switch"]),specification:o,name:n.name,handleRight:!1,helper:[S.jsx(ef,{},"arrow-right")],noBodyPadding:!0,isSelected:r,actions:[S.jsx(it,{type:"text",disabled:f,onClick:()=>{b==="first"&&x?.length>0?s.updateNode(e,D=>(D.content.statements=(D.content.statements||[]).map(E=>(E.isDefault&&(E.isDefault=!1),E)),D.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!0}),D)):s.updateNode(e,D=>(D.content.statements=(D.content.statements||[]).map(E=>(E.isDefault&&(E.isDefault=!1),E)),D.content.statements.push({id:crypto.randomUUID(),condition:"",isDefault:!1}),D))},children:"Add Condition"},"add condition"),S.jsx(Js,{trigger:["click"],placement:"bottomRight",menu:{items:[{key:"first",label:"First",onClick:()=>_("first"),disabled:f},{key:"collect",label:"Collect",disabled:f,onClick:()=>{s.updateNode(e,D=>(D.content.statements=(D.content.statements||[]).map(E=>(E.isDefault&&(E.isDefault=!1),E)),D)),_("collect")}}]},children:S.jsxs(it,{type:"text",style:{textTransform:"capitalize",marginLeft:"auto"},children:[b," ",S.jsx(jw,{})]})},"hitPolicy")],children:S.jsx("div",{className:"switchNode",children:S.jsxs("div",{className:"switchNode__body edit nodrag",children:[!(x?.length>0)&&S.jsx(Gt.Text,{type:"secondary",className:"no-conditions",children:"No conditions"}),x.map((D,E)=>S.jsx(C,{index:E,value:D.condition,diff:D?._diff,id:D.id,isDefault:D.isDefault,totalStatements:x.length,disabled:f,hitPolicy:b,variableType:m,onSetIsDefault:R=>{s.updateNode(e,N=>{const P=N.content.statements.find(H=>H.id===D.id);return R&&(P.condition=""),P.isDefault=R,N})},isActive:He(h?.traceData).with({statements:Le.array(Le._)},({statements:R})=>R.some(N=>typeof N=="object"&&N&&"id"in N&&N.id===D?.id)).otherwise(()=>!1),onDelete:()=>{s.updateNode(e,R=>(R.content.statements=R.content.statements.filter(N=>N?.id!==D?.id),(R.content.statements||[]).length===1&&(R.content.statements=(R.content.statements||[]).map(N=>(N.isDefault&&(N.isDefault=!1),N))),R)),s.removeEdgeByHandleId(D?.id)},onChange:R=>{s.updateNode(e,N=>{const P=N.content.statements.find(H=>H.id===D.id);return P.condition=R,N})}},D.id))]})})})},jF=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:u=!0,onDelete:l,isActive:c,index:f=0,isDefault:h=!1,onSetIsDefault:p,totalStatements:g,hitPolicy:m,variableType:x})=>{const[b,_]=T.useState(n);T.useLayoutEffect(()=>{b!==n&&_(n)},[n]);const C=R=>{_(R),o?.(R)},D=f===g-1,E=h&&m==="first"&&D&&f>0&&(n||"")?.trim?.()?.length===0;return S.jsxs("div",{className:Ze("switchNode__statement",c&&"active",r?.status&&`diff-${r?.status}`),children:[S.jsxs("div",{className:Ze("switchNode__statement__heading",E&&"switchNode__statement__heading--without-input"),children:[(f===0||m==="collect")&&S.jsx(it,{disabled:s,className:Ze("switchNode__statement__heading__action"),size:"small",type:"text",children:"If"}),m!=="collect"&&f>0&&S.jsx(it,{className:Ze("switchNode__statement__heading__action",E&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{D&&m==="first"&&p?.(!1)},children:"Else If"}),m!=="collect"&&f>0&&D&&S.jsx(it,{className:Ze("switchNode__statement__heading__action",!E&&"inactive"),size:"small",type:"text",disabled:s,onClick:()=>{D&&m==="first"&&p?.(!0)},children:"Else"}),S.jsx("div",{style:{flexGrow:1}}),!s&&u&&S.jsx(u0,{title:"Remove condition?",okText:"Remove",onConfirm:()=>l?.(),children:S.jsx(it,{className:"switchNode__statement__delete",size:"small",type:"text",icon:S.jsx(Xu,{})})}),S.jsx(Mi,{id:e,type:"source",position:xe.Right,className:Ze(c&&"switchNode__activeHandle")})]}),!E&&S.jsx("div",{className:"switchNode__statement__inputArea",children:S.jsx(Vu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:b,maxRows:4,disabled:s,onChange:C,variableType:x})})]})},kF=({id:e,value:n,diff:r,onChange:o,disabled:s,configurable:u=!0,onDelete:l,isActive:c,variableType:f})=>{const[h,p]=T.useState(n);T.useLayoutEffect(()=>{h!==n&&p(n)},[n]);const g=m=>{p(m),o?.(m)};return S.jsxs("div",{className:Ze("switchNode__statement","compact",c&&"active",r?.status&&`diff-${r?.status}`),children:[S.jsx("div",{className:Ze("switchNode__statement__inputArea"),children:S.jsx(Vu,{style:{fontSize:12,lineHeight:"20px",width:"100%"},displayDiff:r?.fields?.condition?.status==="modified",previousValue:r?.fields?.condition?.previousValue,value:h,maxRows:4,disabled:s,onChange:g,variableType:f})}),!s&&u&&S.jsx("div",{className:"switchNode__statement__button",children:S.jsx(u0,{title:"Remove condition?",okText:"Remove",onConfirm:()=>l?.(),children:S.jsx(it,{className:"switchNode__statement__delete",size:"small",type:"text",icon:S.jsx(Xu,{})})})}),S.jsx(Mi,{id:e,type:"source",position:xe.Right,className:Ze(c&&"switchNode__activeHandle")})]})};const wo={[lt.Input]:mm,[lt.Output]:ym,[lt.DecisionTable]:Zg,[lt.Expression]:Jg,[lt.Function]:em,[lt.Switch]:PF},LF=()=>{const{stateStore:e}=bo();return T.useEffect(()=>{if(rs())return e.subscribe(({simulate:n,nodeTypes:r,decisionGraph:o},s)=>{try{if(Ln(n,s?.simulate))return;const u=He(n).with({result:Le.nonNullable},({result:f})=>f.trace).otherwise(()=>null);if(u===null){const f=gt(r,h=>{Object.values(h).forEach(p=>{delete p[ct.Input],delete p[ct.Output]})});e.setState({nodeTypes:f});return}const l=Object.values(u);if(l.length===0)return;const c=gt(r,f=>{l.forEach(h=>{o.nodes.find(g=>g.id===h.id)?.type!=="inputNode"&&(f[h.id]??={},f[h.id][ct.Output]=new kn(h.output??{}),f[h.id][ct.Input]=new kn(h.input??{}))})});e.setState({nodeTypes:c})}catch(u){console.error("error occurred while setting up variable types from trace",u)}})},[]),T.useEffect(()=>{if(!rs())return;const n=D6();return e.subscribe((r,o)=>{try{const s=kp(r),u=kp(o),l=qF(r,o);if(Ln(s,u)&&!l)return;const c=HF(r,o,n);c.isModified&&e.setState({nodeTypes:c.nodeTypes})}catch(s){console.error("error occurred during node type inference",s)}})},[]),T.useEffect(()=>{if(rs())return e.subscribe((n,r)=>{try{const o=Lp(n),s=Lp(r);if(Ln(o,s))return;const u=kn.fromJson({Object:{}});n.decisionGraph.nodes.forEach(l=>{const c=n.nodeTypes[l.id],f=c?.[ct.Output]??c?.[ct.InferredOutput]??kn.fromJson({Object:{}});u.set(l.name,f)}),e.setState({globalType:{$nodes:u}})}catch(o){console.error("error occurred while global node types",o)}})},[]),null},HF=({decisionGraph:e,nodeTypes:n,customNodes:r},o,s)=>{let u=!1;const l=gt(n,c=>{s.walk(e).forEach(({node:f,incomers:h})=>{if(f.type==="inputNode")return;const p=h.map(N=>{const P=c[N.id]??{};return P[ct.Output]??P[ct.InferredOutput]}).filter(N=>!!N).map(N=>N.clone()),g=He(p.length).with(1,()=>p[0]).otherwise(()=>kn.fromIncoming(p));c?.[f.id]?.[ct.InferredInput]?.equal(g)||(u=!0,c[f.id]??={},c[f.id][ct.InferredInput]=g);const x=wo[f.type]?.inferTypes??r.find(N=>N.kind===f.type)?.inferTypes;if(!x)return;const b=c?.[f.id]?.[ct.Input]??c?.[f.id]?.[ct.InferredInput]??kn.fromJson("Any"),_=o.nodeTypes?.[f.id]?.[ct.Input]??o.nodeTypes?.[f.id]?.[ct.InferredInput]??kn.fromJson("Any"),C=o.decisionGraph.nodes.find(N=>N.id===f.id)?.content;if(!(x.needsUpdate(f.content,C)||!b.equal(_))&&c?.[f.id]?.[ct.InferredOutput])return;const E=x.determineOutputType({input:b,content:f.content});c?.[f.id]?.[ct.InferredOutput]?.equal(E)||(u=!0,c[f.id]??={},c[f.id][ct.InferredOutput]=E)})});return{isModified:u,nodeTypes:l}},kp=({decisionGraph:e,nodeTypes:n,customNodes:r})=>{const o=e.edges,s=e.nodes.map(({id:h,type:p})=>({id:h,type:p})),u=r.map(h=>h.kind),l=Object.entries(n).map(([h,p])=>({id:h,input:Kl(p[ct.Input]),output:Kl(p[ct.Output])})),c=e.nodes.find(h=>h.type==="inputNode")?.id,f=He(n?.[c??""]?.[ct.InferredOutput]).with(Le.nonNullable,h=>h.hash()).otherwise(()=>null);return{edgesData:o,nodesData:s,typesData:l,customNodesData:u,inputNodeType:f}},qF=({decisionGraph:e,customNodes:n},r)=>e.nodes.map(s=>{const u=wo[s.type]?.inferTypes??n.find(c=>c.kind===s.type)?.inferTypes;if(!u)return!1;const l=r.decisionGraph.nodes.find(c=>c.id===s.id);return l?u.needsUpdate(s.content,l.content):!0}).some(s=>s),Kl=e=>{if(e)return e.__hash||(e.__hash=e.hash()),e.__hash},Lp=e=>({nodeInfo:e.decisionGraph.nodes.map(r=>{const o=e.nodeTypes[r.id],s=o?.[ct.Output]??o?.[ct.InferredOutput];return{id:r.id,type:Kl(s),name:r.name}})});var GF=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])},e(n,r)};return function(n,r){e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Ot=function(){return Ot=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ot.apply(this,arguments)},Hp={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},qp={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},pu={width:"20px",height:"20px",position:"absolute"},VF={top:Ot(Ot({},Hp),{top:"-5px"}),right:Ot(Ot({},qp),{left:void 0,right:"-5px"}),bottom:Ot(Ot({},Hp),{top:void 0,bottom:"-5px"}),left:Ot(Ot({},qp),{left:"-5px"}),topRight:Ot(Ot({},pu),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:Ot(Ot({},pu),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:Ot(Ot({},pu),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:Ot(Ot({},pu),{left:"-10px",top:"-10px",cursor:"nw-resize"})},UF=function(e){GF(n,e);function n(){var r=e!==null&&e.apply(this,arguments)||this;return r.onMouseDown=function(o){r.props.onResizeStart(o,r.props.direction)},r.onTouchStart=function(o){r.props.onResizeStart(o,r.props.direction)},r}return n.prototype.render=function(){return T.createElement("div",{className:this.props.className||"",style:Ot(Ot({position:"absolute",userSelect:"none"},VF[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},n}(T.PureComponent),WF=function(){var e=function(n,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var u in s)Object.prototype.hasOwnProperty.call(s,u)&&(o[u]=s[u])},e(n,r)};return function(n,r){e(n,r);function o(){this.constructor=n}n.prototype=r===null?Object.create(r):(o.prototype=r.prototype,new o)}}(),Fr=function(){return Fr=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Fr.apply(this,arguments)},XF={width:"auto",height:"auto"},gu=function(e,n,r){return Math.max(Math.min(e,r),n)},Gp=function(e,n,r){var o=Math.round(e/n);return o*n+r*(o-1)},es=function(e,n){return new RegExp(e,"i").test(n)},mu=function(e){return!!(e.touches&&e.touches.length)},YF=function(e){return!!((e.clientX||e.clientX===0)&&(e.clientY||e.clientY===0))},Vp=function(e,n,r){r===void 0&&(r=0);var o=n.reduce(function(u,l,c){return Math.abs(l-e)<Math.abs(n[u]-e)?c:u},0),s=Math.abs(n[o]-e);return r===0||s<r?n[o]:e},bl=function(e){return e=e.toString(),e==="auto"||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:e+"px"},yu=function(e,n,r,o){if(e&&typeof e=="string"){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var s=Number(e.replace("%",""))/100;return n*s}if(e.endsWith("vw")){var s=Number(e.replace("vw",""))/100;return r*s}if(e.endsWith("vh")){var s=Number(e.replace("vh",""))/100;return o*s}}return e},ZF=function(e,n,r,o,s,u,l){return o=yu(o,e.width,n,r),s=yu(s,e.height,n,r),u=yu(u,e.width,n,r),l=yu(l,e.height,n,r),{maxWidth:typeof o>"u"?void 0:Number(o),maxHeight:typeof s>"u"?void 0:Number(s),minWidth:typeof u>"u"?void 0:Number(u),minHeight:typeof l>"u"?void 0:Number(l)}},KF=function(e){return Array.isArray(e)?e:[e,e]},JF=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],Up="__resizable_base__",QF=function(e){WF(n,e);function n(r){var o,s,u,l,c=e.call(this,r)||this;return c.ratio=1,c.resizable=null,c.parentLeft=0,c.parentTop=0,c.resizableLeft=0,c.resizableRight=0,c.resizableTop=0,c.resizableBottom=0,c.targetLeft=0,c.targetTop=0,c.appendBase=function(){if(!c.resizable||!c.window)return null;var f=c.parentNode;if(!f)return null;var h=c.window.document.createElement("div");return h.style.width="100%",h.style.height="100%",h.style.position="absolute",h.style.transform="scale(0, 0)",h.style.left="0",h.style.flex="0 0 100%",h.classList?h.classList.add(Up):h.className+=Up,f.appendChild(h),h},c.removeBase=function(f){var h=c.parentNode;h&&h.removeChild(f)},c.state={isResizing:!1,width:(s=(o=c.propsSize)===null||o===void 0?void 0:o.width)!==null&&s!==void 0?s:"auto",height:(l=(u=c.propsSize)===null||u===void 0?void 0:u.height)!==null&&l!==void 0?l:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},c.onResizeStart=c.onResizeStart.bind(c),c.onMouseMove=c.onMouseMove.bind(c),c.onMouseUp=c.onMouseUp.bind(c),c}return Object.defineProperty(n.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||XF},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"size",{get:function(){var r=0,o=0;if(this.resizable&&this.window){var s=this.resizable.offsetWidth,u=this.resizable.offsetHeight,l=this.resizable.style.position;l!=="relative"&&(this.resizable.style.position="relative"),r=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:s,o=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:u,this.resizable.style.position=l}return{width:r,height:o}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sizeStyle",{get:function(){var r=this,o=this.props.size,s=function(c){var f;if(typeof r.state[c]>"u"||r.state[c]==="auto")return"auto";if(r.propsSize&&r.propsSize[c]&&(!((f=r.propsSize[c])===null||f===void 0)&&f.toString().endsWith("%"))){if(r.state[c].toString().endsWith("%"))return r.state[c].toString();var h=r.getParentSize(),p=Number(r.state[c].toString().replace("px","")),g=p/h[c]*100;return g+"%"}return bl(r.state[c])},u=o&&typeof o.width<"u"&&!this.state.isResizing?bl(o.width):s("width"),l=o&&typeof o.height<"u"&&!this.state.isResizing?bl(o.height):s("height");return{width:u,height:l}},enumerable:!1,configurable:!0}),n.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var r=this.appendBase();if(!r)return{width:0,height:0};var o=!1,s=this.parentNode.style.flexWrap;s!=="wrap"&&(o=!0,this.parentNode.style.flexWrap="wrap"),r.style.position="relative",r.style.minWidth="100%",r.style.minHeight="100%";var u={width:r.offsetWidth,height:r.offsetHeight};return o&&(this.parentNode.style.flexWrap=s),this.removeBase(r),u},n.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},n.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},n.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var r=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:r.flexBasis!=="auto"?r.flexBasis:void 0})}},n.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},n.prototype.createSizeForCssProperty=function(r,o){var s=this.propsSize&&this.propsSize[o];return this.state[o]==="auto"&&this.state.original[o]===r&&(typeof s>"u"||s==="auto")?"auto":r},n.prototype.calculateNewMaxFromBoundary=function(r,o){var s=this.props.boundsByDirection,u=this.state.direction,l=s&&es("left",u),c=s&&es("top",u),f,h;if(this.props.bounds==="parent"){var p=this.parentNode;p&&(f=l?this.resizableRight-this.parentLeft:p.offsetWidth+(this.parentLeft-this.resizableLeft),h=c?this.resizableBottom-this.parentTop:p.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(f=l?this.resizableRight:this.window.innerWidth-this.resizableLeft,h=c?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(f=l?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),h=c?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return f&&Number.isFinite(f)&&(r=r&&r<f?r:f),h&&Number.isFinite(h)&&(o=o&&o<h?o:h),{maxWidth:r,maxHeight:o}},n.prototype.calculateNewSizeFromDirection=function(r,o){var s=this.props.scale||1,u=KF(this.props.resizeRatio||1),l=u[0],c=u[1],f=this.state,h=f.direction,p=f.original,g=this.props,m=g.lockAspectRatio,x=g.lockAspectRatioExtraHeight,b=g.lockAspectRatioExtraWidth,_=p.width,C=p.height,D=x||0,E=b||0;return es("right",h)&&(_=p.width+(r-p.x)*l/s,m&&(C=(_-E)/this.ratio+D)),es("left",h)&&(_=p.width-(r-p.x)*l/s,m&&(C=(_-E)/this.ratio+D)),es("bottom",h)&&(C=p.height+(o-p.y)*c/s,m&&(_=(C-D)*this.ratio+E)),es("top",h)&&(C=p.height-(o-p.y)*c/s,m&&(_=(C-D)*this.ratio+E)),{newWidth:_,newHeight:C}},n.prototype.calculateNewSizeFromAspectRatio=function(r,o,s,u){var l=this.props,c=l.lockAspectRatio,f=l.lockAspectRatioExtraHeight,h=l.lockAspectRatioExtraWidth,p=typeof u.width>"u"?10:u.width,g=typeof s.width>"u"||s.width<0?r:s.width,m=typeof u.height>"u"?10:u.height,x=typeof s.height>"u"||s.height<0?o:s.height,b=f||0,_=h||0;if(c){var C=(m-b)*this.ratio+_,D=(x-b)*this.ratio+_,E=(p-_)/this.ratio+b,R=(g-_)/this.ratio+b,N=Math.max(p,C),P=Math.min(g,D),H=Math.max(m,E),Y=Math.min(x,R);r=gu(r,N,P),o=gu(o,H,Y)}else r=gu(r,p,g),o=gu(o,m,x);return{newWidth:r,newHeight:o}},n.prototype.setBoundingClientRect=function(){var r=1/(this.props.scale||1);if(this.props.bounds==="parent"){var o=this.parentNode;if(o){var s=o.getBoundingClientRect();this.parentLeft=s.left*r,this.parentTop=s.top*r}}if(this.props.bounds&&typeof this.props.bounds!="string"){var u=this.props.bounds.getBoundingClientRect();this.targetLeft=u.left*r,this.targetTop=u.top*r}if(this.resizable){var l=this.resizable.getBoundingClientRect(),c=l.left,f=l.top,h=l.right,p=l.bottom;this.resizableLeft=c*r,this.resizableRight=h*r,this.resizableTop=f*r,this.resizableBottom=p*r}},n.prototype.onResizeStart=function(r,o){if(!(!this.resizable||!this.window)){var s=0,u=0;if(r.nativeEvent&&YF(r.nativeEvent)?(s=r.nativeEvent.clientX,u=r.nativeEvent.clientY):r.nativeEvent&&mu(r.nativeEvent)&&(s=r.nativeEvent.touches[0].clientX,u=r.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var l=this.props.onResizeStart(r,o,this.resizable);if(l===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var c,f=this.window.getComputedStyle(this.resizable);if(f.flexBasis!=="auto"){var h=this.parentNode;if(h){var p=this.window.getComputedStyle(h).flexDirection;this.flexDir=p.startsWith("row")?"row":"column",c=f.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var g={original:{x:s,y:u,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:Fr(Fr({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(r.target).cursor||"auto"}),direction:o,flexBasis:c};this.setState(g)}},n.prototype.onMouseMove=function(r){var o=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&mu(r))try{r.preventDefault(),r.stopPropagation()}catch{}var s=this.props,u=s.maxWidth,l=s.maxHeight,c=s.minWidth,f=s.minHeight,h=mu(r)?r.touches[0].clientX:r.clientX,p=mu(r)?r.touches[0].clientY:r.clientY,g=this.state,m=g.direction,x=g.original,b=g.width,_=g.height,C=this.getParentSize(),D=ZF(C,this.window.innerWidth,this.window.innerHeight,u,l,c,f);u=D.maxWidth,l=D.maxHeight,c=D.minWidth,f=D.minHeight;var E=this.calculateNewSizeFromDirection(h,p),R=E.newHeight,N=E.newWidth,P=this.calculateNewMaxFromBoundary(u,l);this.props.snap&&this.props.snap.x&&(N=Vp(N,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(R=Vp(R,this.props.snap.y,this.props.snapGap));var H=this.calculateNewSizeFromAspectRatio(N,R,{width:P.maxWidth,height:P.maxHeight},{width:c,height:f});if(N=H.newWidth,R=H.newHeight,this.props.grid){var Y=Gp(N,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),Q=Gp(R,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),$=this.props.snapGap||0,X=$===0||Math.abs(Y-N)<=$?Y:N,te=$===0||Math.abs(Q-R)<=$?Q:R;N=X,R=te}var J={width:N-x.width,height:R-x.height};if(b&&typeof b=="string"){if(b.endsWith("%")){var Z=N/C.width*100;N=Z+"%"}else if(b.endsWith("vw")){var B=N/this.window.innerWidth*100;N=B+"vw"}else if(b.endsWith("vh")){var q=N/this.window.innerHeight*100;N=q+"vh"}}if(_&&typeof _=="string"){if(_.endsWith("%")){var Z=R/C.height*100;R=Z+"%"}else if(_.endsWith("vw")){var B=R/this.window.innerWidth*100;R=B+"vw"}else if(_.endsWith("vh")){var q=R/this.window.innerHeight*100;R=q+"vh"}}var j={width:this.createSizeForCssProperty(N,"width"),height:this.createSizeForCssProperty(R,"height")};this.flexDir==="row"?j.flexBasis=j.width:this.flexDir==="column"&&(j.flexBasis=j.height);var W=this.state.width!==j.width,ie=this.state.height!==j.height,V=this.state.flexBasis!==j.flexBasis,oe=W||ie||V;oe&&l0.flushSync(function(){o.setState(j)}),this.props.onResize&&oe&&this.props.onResize(r,m,this.resizable,J)}},n.prototype.onMouseUp=function(r){var o,s,u=this.state,l=u.isResizing,c=u.direction,f=u.original;if(!(!l||!this.resizable)){var h={width:this.size.width-f.width,height:this.size.height-f.height};this.props.onResizeStop&&this.props.onResizeStop(r,c,this.resizable,h),this.props.size&&this.setState({width:(o=this.props.size.width)!==null&&o!==void 0?o:"auto",height:(s=this.props.size.height)!==null&&s!==void 0?s:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:Fr(Fr({},this.state.backgroundStyle),{cursor:"auto"})})}},n.prototype.updateSize=function(r){var o,s;this.setState({width:(o=r.width)!==null&&o!==void 0?o:"auto",height:(s=r.height)!==null&&s!==void 0?s:"auto"})},n.prototype.renderResizer=function(){var r=this,o=this.props,s=o.enable,u=o.handleStyles,l=o.handleClasses,c=o.handleWrapperStyle,f=o.handleWrapperClass,h=o.handleComponent;if(!s)return null;var p=Object.keys(s).map(function(g){return s[g]!==!1?T.createElement(UF,{key:g,direction:g,onResizeStart:r.onResizeStart,replaceStyles:u&&u[g],className:l&&l[g]},h&&h[g]?h[g]:null):null});return T.createElement("div",{className:f,style:c},p)},n.prototype.render=function(){var r=this,o=Object.keys(this.props).reduce(function(l,c){return JF.indexOf(c)!==-1||(l[c]=r.props[c]),l},{}),s=Fr(Fr(Fr({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(s.flexBasis=this.state.flexBasis);var u=this.props.as||"div";return T.createElement(u,Fr({style:s,className:this.props.className},o,{ref:function(l){l&&(r.resizable=l)}}),this.state.isResizing&&T.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},n.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},n}(T.PureComponent);const Wp="jdmEditor:graphPanel:height",vm=()=>{const e=zt(),{panels:n,activePanel:r}=st(({panels:u,activePanel:l})=>({panels:u,activePanel:l})),o=T.useMemo(()=>r===void 0?void 0:(n||[]).find(u=>u.id===r),[r,n]),s=T.useMemo(()=>Number.parseFloat(localStorage.getItem(Wp)??"")??300,[o]);return o?S.jsxs(QF,{className:"grl-dg__panel",defaultSize:{height:s},handleStyles:{bottom:{display:"none"},left:{display:"none"},topLeft:{display:"none"},topRight:{display:"none"},right:{display:"none"},bottomLeft:{display:"none"},bottomRight:{display:"none"}},maxHeight:500,minHeight:150,onResize:(u,l,c)=>{localStorage.setItem(Wp,c.clientHeight.toString())},children:[!o.hideHeader&&S.jsxs("div",{className:"grl-dg__panel__toolbar",children:[S.jsx("div",{className:"grl-dg__panel__toolbar__content",children:S.jsx(Gt.Text,{style:{fontSize:13},children:o.title})}),S.jsx("div",{className:"grl-dg__panel__toolbar__actions",children:S.jsx(gr,{placement:"topLeft",title:"Close panel",children:S.jsx(it,{size:"small",type:"text",icon:S.jsx(vo,{style:{fontSize:12}}),onClick:()=>e.setActivePanel(void 0)})})})]}),S.jsx("div",{className:"grl-dg__panel__content",children:o?.renderPanel?.({})})]}):null};vm.__docgenInfo={description:"",methods:[],displayName:"GraphPanel"};const ca=ce.string().default(()=>crypto.randomUUID());var Dm=(e=>(e.Input="inputNode",e.Output="outputNode",e.DecisionTable="decisionTableNode",e.Function="functionNode",e.Expression="expressionNode",e.Switch="switchNode",e.Decision="decisionNode",e))(Dm||{});const e4="customNode",li=ce.object({id:ca,name:ce.string(),position:ce.object({x:ce.number(),y:ce.number()}).default({x:0,y:0})}),t4=ce.object({type:ce.literal("inputNode"),content:ce.object({schema:ce.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(li),n4=ce.object({type:ce.literal("outputNode"),content:ce.object({schema:ce.string().nullish().transform(e=>e??"")}).default({schema:""})}).merge(li),r4=ce.object({type:ce.literal("decisionTableNode"),content:ce.object({hitPolicy:ce.enum(["first","collect"]).nullish().transform(e=>e??"first"),rules:ce.array(ce.record(ce.string(),ce.string().nullish().transform(e=>e??""))).default([]),inputs:ce.array(ce.object({id:ca,name:ce.string().nullish(),field:ce.string().nullish(),defaultValue:ce.string().nullish()})),outputs:ce.array(ce.object({id:ca,name:ce.string(),field:ce.string(),defaultValue:ce.string().nullish()})),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(li),i4=ce.object({type:ce.literal("functionNode"),content:ce.string().or(ce.object({source:ce.string().default("")})).nullish()}).merge(li),o4=ce.object({type:ce.literal("expressionNode"),content:ce.object({expressions:ce.array(ce.object({id:ca,key:ce.string().default(""),value:ce.string().default("")})),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(li),s4=ce.object({type:ce.literal("decisionNode"),content:ce.object({key:ce.string(),passThrough:ce.boolean().nullish().transform(e=>e??!1),inputField:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),outputPath:ce.string().nullish().default(null).transform(e=>e&&e.trim().length>0?e:null),executionMode:ce.enum(["single","loop"]).nullish().transform(e=>e??"single")})}).merge(li),a4=ce.object({type:ce.literal("switchNode"),content:ce.object({hitPolicy:ce.enum(["first","collect"]).nullish().transform(e=>e??"first"),statements:ce.array(ce.object({id:ca,condition:ce.string().nullish().transform(e=>e??""),isDefault:ce.boolean().nullish().transform(e=>e??!1)}))})}).merge(li),u4=ce.object({type:ce.literal(e4),content:ce.object({kind:ce.string(),config:ce.any()})}).merge(li),c4=ce.object({type:ce.string().refine(e=>!Object.values(Dm).includes(e),{message:"Invalid type"}),content:ce.any().nullish()}).merge(li),Su=ce.discriminatedUnion("type",[s4,o4,i4,r4,a4,u4,t4,n4]).or(c4),l4=ce.object({id:ce.string(),sourceId:ce.string(),targetId:ce.string(),sourceHandle:ce.string().nullish(),type:ce.enum(["edge"])});ce.object({inputSchema:ce.any().nullish().default(null),outputSchema:ce.any().nullish().default(null)});const Xp=ce.object({nodes:ce.array(Su).default([]),edges:ce.array(l4).default([])}),_m=e=>{const n=zt(),{id:r,sourceX:o,sourceY:s,targetX:u,targetY:l,sourcePosition:c,targetPosition:f,style:h={},markerEnd:p}=e,{isHovered:g,disabled:m}=st(({hoveredEdgeId:D,disabled:E})=>({isHovered:D===r,disabled:E})),{diff:x}=y6(r),[b,_,C]=Df({sourceX:o,sourceY:s,sourcePosition:c,targetX:u,targetY:l,targetPosition:f});return S.jsxs(S.Fragment,{children:[S.jsx(ps,{path:b,markerEnd:p,style:{...h||{},stroke:He(x).with({status:"added"},()=>"var(--grl-color-success)").with({status:"removed"},()=>"var(--grl-color-error)").otherwise(()=>{})}}),S.jsx(Q3,{children:S.jsx("div",{className:"nodrag nopan edge-renderer",style:{transform:`translate(-50%, -50%) translate(${_}px,${C}px)`},children:!m&&S.jsx(it,{type:"primary",shape:"round",icon:S.jsx(Xu,{}),danger:!0,className:Ze("grl-edge-delete-button"),"data-visible":g,onClick:()=>n.removeEdges([r])})})})]})},f4=e=>n=>S.jsx(_m,{...n,...e});_m.__docgenInfo={description:"",methods:[],displayName:"CustomEdge"};const d4=e=>typeof e!="object"?!1:Array.isArray(e?.nodes),h4=(e,n)=>{const r=bo(),o=zt(),s=T.useCallback(async l=>{try{if(!e.current)return;const c=(r.stateStore.getState()?.decisionGraph?.nodes||[]).filter(g=>l.some(m=>m.id===g.id)),f=c.map(g=>g.id),h=[];c.length>0&&e.current.getEdges().forEach(m=>{f.includes(m.source)&&f.includes(m.target)&&h.push({id:m.id,type:m.type,sourceId:m.source,targetId:m.target,sourceHandle:m.sourceHandle??void 0,targetHandle:m.targetHandle??void 0})}),await Fu(JSON.stringify({nodes:c,edges:h})),Mt.success("Copied to clipboard!")}catch(c){Mt.error(c.message)}},[r]),u=T.useCallback(async()=>{try{if(!e?.current)return;const l=await Xw();if(!l)return;const c=JSON.parse(l);if(!d4(c))throw new Error("invalid clipboard");const f=c.nodes.reduce((_,C)=>({..._,[C.id]:crypto.randomUUID()}),{}),h=Object.keys(f),p=e.current.getNodes().find(_=>h.includes(_.id)),g=c.nodes.find(_=>_.id===p?.id),m={x:c.nodes.reduce((_,C)=>_+C.position.x,0)/c.nodes.length,y:c.nodes.reduce((_,C)=>_+C.position.y,0)/c.nodes.length},x=c.nodes.map(_=>{const C={x:_?.position?.x||0,y:_?.position?.y||0};if(p&&g)_.id===p.id?(C.x=p.position.x,C.y=p.position.y-20):(C.x=p.position.x-g.position.x+_.position.x,C.y=p.position.y-g.position.y+_.position.y-20);else if(n.current){const D=n.current.getBoundingClientRect(),E={x:D.width/2,y:D.height/2},R=e.current.project(E);C.x=_.position.x+R.x-m.x/2,C.y=_.position.y+R.y-m.y/2}return{..._,position:C,id:f[_.id]}}),b=(c.edges||[]).map(_=>({id:crypto.randomUUID(),type:_.type,sourceId:f[_.sourceId],targetId:f[_.targetId],sourceHandle:_.sourceHandle??void 0,targetHandle:_.targetHandle??void 0}));if(o.addNodes(x),o.addEdges(b),Mt.success("Pasted from clipboard!"),p)try{await Fu(JSON.stringify({nodes:x}))}catch{}}catch{Mt.error("Failed to paste from clipboard")}},[e,n]);return T.useMemo(()=>({copyNodes:s,pasteNodes:u}),[s,u])},xm=G.memo(({inputDisabled:e,disabled:n})=>{const r=st(p=>p.components||[]),o=st(p=>p.customNodes||[]),[s,u]=T.useState(""),l=T.useCallback((p,g,m)=>{const x=p.target;if(!x)return;const{offsetX:b,offsetY:_}=p.nativeEvent,{height:C,width:D}=x.getBoundingClientRect(),E={x:b/D,y:_/C};p.dataTransfer.effectAllowed="move",p.dataTransfer.setData("nodeType",g),p.dataTransfer.setData("relativePosition",JSON.stringify(E)),m&&p.dataTransfer.setData("customNodeComponent",m)},[]),c=T.useMemo(()=>{const p={core:Object.values(wo)};return r?.length>0&&(p.extended=r),(o||[]).forEach(g=>{const m=g.group?.trim?.()||"";m.length>0&&(p?.[m]?p[m].push({...g,type:"customNode"}):p[m]=[{...g,type:"customNode"}])}),(o||[]).forEach(g=>{g?.group||(p?.custom?p.custom.push({...g,type:"customNode"}):p.custom=[{...g,type:"customNode"}])}),p},[r,o]),f=T.useMemo(()=>Object.keys(c).reduce((p,g)=>({...p,[g]:(c[g]||[]).filter(m=>!(s?.trim?.().length>0)||(m.type||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.displayName||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.shortDescription||"").toLowerCase().indexOf(s.toLowerCase())>-1||(m.group||"").toLowerCase().indexOf(s.toLowerCase())>-1)}),{}),[c,s]),h=r.length+o.length;return S.jsxs("div",{children:[h>5&&S.jsx(aw,{placeholder:"Search components...",value:s,onChange:p=>u(p.target.value||""),allowClear:!0,className:"grl-dg__aside__menu__components__search"}),S.jsx("div",{className:"grl-dg__aside__menu__components",children:Object.keys(f).map(p=>He(p).with("core",()=>f.core?.length>0&&S.jsx(G.Fragment,{children:(f.core||[]).map(g=>S.jsx(G.Fragment,{children:S.jsx(Yp,{disabled:He(g.type).with(lt.Input,()=>n||e).otherwise(()=>n),specification:g,onDragStart:m=>wo[g.type]!==void 0?l(m,g.type):l(m,"customNode","kind"in g?g.kind:"")})},"kind"in g?g.kind:g.type))},p)).otherwise(g=>f[g]?.length>0&&S.jsx(G.Fragment,{children:(f?.[g]||[]).map(m=>S.jsx(Yp,{disabled:n,specification:m,onDragStart:x=>g==="extended"?l(x,m.type):l(x,"customNode","kind"in m?m.kind:"")},"kind"in m?m.kind:m.type))},g)))})]})}),Yp=({specification:e,disabled:n=!1,...r})=>S.jsx("div",{className:Ze("draggable-component"),draggable:!n,...r,children:S.jsx("div",{style:{pointerEvents:"none"},children:S.jsx(Sf,{listMode:!0,compactMode:!0,color:e.color,icon:e.icon,name:e.displayName,type:e.shortDescription})})});xm.__docgenInfo={description:"",methods:[],displayName:"GraphComponents",props:{inputDisabled:{required:!1,tsType:{name:"boolean"},description:""},components:{required:!1,tsType:{name:"Array",elements:[{name:"ReactReactNode",raw:"React.ReactNode"}],raw:"React.ReactNode[]"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""}}};const p4=Object.entries(wo).reduce((e,[n,r])=>({...e,[n]:G.memo(o=>r.renderNode({specification:r,...o}),(o,s)=>o.id===s.id&&o.selected===s.selected&&Cl(o.data,s.data))}),{}),g4={edge:G.memo(f4(null))},wm=T.forwardRef(function({reactFlowProOptions:n,className:r},o){const s=T.useRef(null),u=T.useRef(null),l=e6([]),c=t6([]),[f,h]=T.useState(!0),p=bo(),g=zt(),m=m6($=>$),{onReactFlowInit:x}=Xg(({onReactFlowInit:$})=>({onReactFlowInit:$})),{disabled:b,hasInputNode:_,components:C,customNodes:D}=st(({disabled:$,components:X,customNodes:te,decisionGraph:J})=>({disabled:$,components:X,customNodes:te,hasInputNode:(J?.nodes||[]).some(Z=>Z.type===lt.Input)}));m.nodesState.current=l,m.edgesState.current=c,m.graphClipboard.current=h4(u,s),m.reactFlowInstance.current=u.current;const E=T.useMemo(()=>G.memo($=>{const X=D.find(te=>te.kind===$?.data?.kind);return X?X.renderNode({specification:X,...$}):(console.warn("node not found",$,D),S.jsx(zi,{id:$.id,specification:{displayName:`${$.data?.kind}`,color:"var(--grl-color-error)",icon:S.jsx(gC,{})},name:$?.data?.name,isSelected:$.selected,displayError:!0,noBodyPadding:!0,handleLeft:!0,handleRight:!0}))},($,X)=>$.id===X.id&&$.selected===X.selected&&Cl($.data,X.data)),[D]),R=T.useMemo(()=>C.reduce(($,X)=>({...$,[X.type]:G.memo(te=>X.renderNode({specification:X,...te}),(te,J)=>te.id===J.id&&te.selected===J.selected&&Cl(te.data,J.data))}),{...p4,customNode:E}),[C,E]),N=async($,X,te)=>{if(!s.current||!u.current)return;if(!X){const q=s.current.getBoundingClientRect(),j={x:q.width/2,y:q.height/2};X=u.current.project(j)}const J=He($).with("customNode",()=>D.find(q=>q.kind===te)).otherwise(()=>[...Object.values(wo),...C].find(j=>j.type===$));if(!J){Mt.error(`Unknown node type ${$} - ${te}.`);return}let Z=He(J).with({kind:Le.string},q=>{const j=(u.current?.getNodes()||[]).filter(ie=>ie.data?.kind===q.kind).length+1,W=q.generateNode({index:j});return{id:crypto.randomUUID(),type:"customNode",name:W.name,position:X,content:{kind:q.kind,config:W?.config}}}).with({type:Le.string},q=>{const j=(u.current?.getNodes()||[]).filter(ie=>ie.type===q.type).length+1,W=q.generateNode({index:j});return{id:crypto.randomUUID(),type:q.type,position:X,...W}}).otherwise(()=>null);if(!Z){Mt.error(`Unknown node type ${$} - ${te}.`);return}if(J.onNodeAdd)try{Z=await J.onNodeAdd(Z)}catch{return}const B=Su.safeParse(Z);if(B.success)return g.addNodes([Su.parse(Z)]);Mt.error(B.error?.message)},P=$=>{if($.source===$.target||b)return!1;const[X]=l,[te]=c,J=te.some(q=>q.source===$.source&&q.target===$.target&&(q.sourceHandle??null)===($.sourceHandle??null)&&(q.targetHandle??null)===($.targetHandle??null)),Z=X.find(q=>q.id===$.target);if(!Z||Z.id===$.source)return!1;const B=(q,j=new Set)=>{if(j.has(q.id))return!1;j.add(q.id);for(const W of ku(q,X,te))if(W.id===$.source||B(W,j))return!0};return!J&&!B(Z)},H=$=>{if($.preventDefault(),$.stopPropagation(),!s.current||!u.current)return;const X=s.current.getBoundingClientRect();let te;try{te=JSON.parse($.dataTransfer.getData("relativePosition"))}catch{return}const J=u.current.project({x:$.clientX-X.left,y:$.clientY-X.top});J.x-=Math.round(te.x*226/10)*10,J.y-=Math.round(te.y*60/10)*10;const Z=$.dataTransfer.getData("nodeData");if(Z){try{const j=JSON.parse(Z);g.addNodes([Su.parse({...j,position:J})])}catch(j){of.error({message:"Failed to create a node"}),console.error(j)}return}const B=$.dataTransfer.getData("nodeType"),q=He($.dataTransfer.getData("customNodeComponent")).with(Le.string,j=>j).otherwise(()=>{});N(B,J,q)},Y=$=>{$.preventDefault(),$.dataTransfer.dropEffect="move"},Q=$=>{const X={...$,type:"edge",id:crypto.randomUUID()};b||g.addEdges([g6(X)])};return T.useImperativeHandle(o,()=>({...g,stateStore:p.stateStore})),S.jsx("div",{className:Ze(["tab-content",r]),tabIndex:0,onKeyDown:$=>{$.key==="v"&&$.metaKey&&!b&&g.pasteNodes()},children:S.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex"},children:[!b&&!f&&S.jsx("div",{className:"grl-dg__components__floating",style:{position:"absolute",top:8,right:8,zIndex:1},children:S.jsx(gr,{placement:"right",title:"Components",children:S.jsx(it,{icon:S.jsx(kw,{style:{fontSize:12}}),onClick:()=>h(!0)})})}),S.jsx("div",{tabIndex:0,className:"content-wrapper",onKeyDown:$=>{const[X]=l,[te]=c;if($.key==="c"&&$.metaKey){const J=l[0].filter(Z=>Z.selected).map(({id:Z})=>Z);if(J.length===0)return;g.copyNodes(J),$.preventDefault()}else if($.key==="d"&&$.metaKey){if(!b){const J=X.filter(Z=>Z.selected).map(({id:Z})=>Z);if(J.length===0)return;g.duplicateNodes(J)}$.preventDefault()}else if($.key==="Backspace"){if(!b){const J=X.filter(B=>B.selected),Z=te.filter(B=>B.selected);if(J.length>0){const B=J.length,q=B>1?"nodes":"node";Wu.confirm({icon:null,title:`Delete ${q}`,content:S.jsxs(Gt.Text,{children:["Are you sure you want to delete ",B>1?`${B} ${q}`:q,"?"]}),okButtonProps:{danger:!0},onOk:()=>{Z.length>0&&g.removeEdges(Z.map(j=>j.id)),g.removeNodes(J.map(j=>j.id))}})}else Z.length>0&&g.removeEdges(Z.map(B=>B.id))}$.stopPropagation(),$.preventDefault()}},children:S.jsx("div",{className:Ze(["react-flow"]),ref:s,children:S.jsxs(qg,{deleteKeyCode:null,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,zoomOnDoubleClick:!1,connectionRadius:35,nodes:l[0],edges:c[0],onInit:$=>{u.current=$,x?.($)},snapToGrid:!0,snapGrid:[5,5],minZoom:.25,selectionMode:hs.Partial,nodeTypes:R,edgeTypes:g4,onDrop:H,onDragOver:Y,onConnect:Q,isValidConnection:P,proOptions:n,nodesConnectable:!b,nodesDraggable:!b,edgesUpdatable:!b,onNodesChange:g.handleNodesChange,onEdgesChange:g.handleEdgesChange,onNodesDelete:$=>{$.forEach(X=>{g.closeTab(X?.id)})},onEdgeMouseEnter:($,X)=>g.setHoveredEdgeId(X.id),onEdgeMouseLeave:()=>g.setHoveredEdgeId(null),children:[S.jsx(u6,{showInteractive:!1,children:S.jsx(ns,{onClick:()=>g.toggleCompactMode(),children:S.jsx(Zb,{})})}),S.jsx(p6,{color:"var(--grl-color-border)",gap:20})]})})}),!b&&f&&S.jsxs("div",{className:"grl-dg__aside__menu",children:[S.jsxs("div",{className:"grl-dg__aside__menu__heading",children:[S.jsxs("div",{className:"grl-dg__aside__menu__heading__text",children:[S.jsx(Gt.Text,{strong:!0,style:{marginBottom:0},children:"Components"})," ",S.jsx(Gt.Text,{type:"secondary",style:{fontSize:10,marginLeft:5},children:"(Drag-and-drop)"})]}),S.jsx(it,{type:"text",size:"small",icon:S.jsx(vo,{style:{fontSize:12}}),onClick:()=>h(!1)})]}),S.jsx("div",{className:"grl-dg__aside__menu__content",children:S.jsx(xm,{inputDisabled:_,disabled:b})})]})]})})});wm.__docgenInfo={description:"",methods:[],displayName:"Graph"};const Zp="application/vnd.gorules.decision",bm=()=>{const e=bo(),n=T.useRef(null),r=T.useRef(null),{setDecisionGraph:o,setActivePanel:s}=zt(),{disabled:u,panels:l,activePanel:c}=st(({disabled:b,panels:_,activePanel:C})=>({disabled:b,panels:_,activePanel:C})),f=async b=>{const _=b?.target?.files,C=new FileReader;C.onload=function(D){try{const E=JSON.parse(D?.target?.result);if(E?.contentType!==Zp)throw new Error("Invalid content type");const R=Array.isArray(E?.nodes)?E.nodes:[],N=R.map(Y=>Y.id),P=E.edges.filter(Y=>N.includes(Y?.targetId)&&N.includes(Y?.sourceId)),H=Xp.safeParse({nodes:R,edges:P,settings:E?.settings});if(!H.success){console.log(H.error?.message),Mt.error(H.error?.message);return}o(H.data)}catch(E){Mt.error(E.message)}},C.readAsText(Array.from(_)?.[0],"UTF-8")},h=b=>{const _=b?.target?.files[0],C=new FileReader;try{C.readAsArrayBuffer(_),C.onload=async()=>{const D=C.result;if(!D)return;const{decisionGraph:E}=e.stateStore.getState(),R=await Lw(D,E),N=E.nodes.map(Y=>{let Q=Y;return R.forEach($=>{$.id===Y.id&&(Q={...Y,content:$.content})}),Q}),P=R.filter(Y=>!N.some(Q=>Q.id===Y.id)).map((Y,Q)=>({...Y,position:{x:Q*250,y:0}})),H=Xp.safeParse({nodes:[...N,...P],edges:E.edges});if(!H.success){console.log(H.error?.message),Mt.error(H.error?.message);return}o(H.data),Mt.success("Excel file has been uploaded successfully!")}}catch{Mt.error("Failed to upload Excel!")}},p=async()=>{try{const{name:b}=e.stateStore.getState(),{decisionGraph:_}=e.stateStore.getState(),C=`${b.replaceAll(".json","")}.json`,D=JSON.stringify({contentType:Zp,nodes:_.nodes,edges:_.edges},null,2),E=new Blob([D],{type:"application/json"}),R=URL.createObjectURL(E),N=window.document.createElement("a");N.href=R,N.download=C,window.document.body.appendChild(N),N.click(),window.document.body.removeChild(N),URL.revokeObjectURL(R)}catch(b){Mt.error(b.message)}},g=async(b="decision tables")=>{try{const{decisionGraph:_}=e.stateStore.getState(),C=_.nodes.filter(D=>D.type===lt.DecisionTable).map(D=>({...D.content,id:D.id,name:D.name}));await Hw(b,C),Mt.success("Excel file has been downloaded successfully!")}catch{Mt.error("Failed to download Excel file!")}},m=[{key:"upload-json",label:"Upload JSON",onClick:()=>n?.current?.click?.()},{key:"upload-excel",label:"Upload Excel",onClick:()=>r?.current?.click?.()}],x=[{key:"download-json",label:"Download JSON",onClick:()=>p()},{key:"download-excel",label:"Download Excel",onClick:()=>g()}];return S.jsxs("div",{className:"grl-dg__aside",children:[S.jsx("input",{hidden:!0,accept:"application/json",type:"file",ref:n,onChange:f,onClick:b=>{b.target.value=null}}),S.jsx("input",{hidden:!0,accept:".xlsx",type:"file",ref:r,onChange:h,onClick:b=>{b.target.value=null}}),S.jsxs("div",{className:"grl-dg__aside__side-bar",children:[S.jsxs("div",{className:"grl-dg__aside__side-bar__top",children:[!u&&S.jsx(Js,{menu:{items:m},placement:"bottomRight",trigger:["click"],arrow:!0,children:S.jsx(it,{type:"text",disabled:u,icon:S.jsx(Wb,{})})}),S.jsx(Js,{menu:{items:x},placement:"bottomRight",trigger:["click"],arrow:!0,children:S.jsx(it,{type:"text",icon:S.jsx(Gb,{})})})]}),S.jsx("div",{className:"grl-dg__aside__side-bar__bottom",children:(l||[]).map(b=>{const _=c===b.id;return S.jsx(gr,{title:`${_?"Close":"Open"} ${b.title.toLowerCase()} panel`,placement:"right",children:S.jsx(it,{type:"text",icon:b.icon,style:{background:_?"rgba(0, 0, 0, 0.1)":void 0},onClick:()=>{if(b?.onClick)return b.onClick();b?.renderPanel&&s(_?void 0:b.id)}},b.id)},b.id)})})]})]})};bm.__docgenInfo={description:"",methods:[],displayName:"GraphSideToolbar"};const Cm=({disabled:e,tabBarExtraContent:n})=>{const r=zt(),{openNodes:o,activeNodeId:s}=st(({decisionGraph:u,activeTab:l,openTabs:c})=>({activeNodeId:(u?.nodes??[]).find(f=>f.id===l)?.id,openNodes:(c||[]).map(f=>{const h=(u?.nodes??[]).find(p=>p.id===f);if(h)return{id:h?.id,name:h.name,type:h.type,diff:h?._diff}}).filter(f=>!!f)}));return S.jsx("div",{children:S.jsx(Jl,{type:"line",size:"small",className:Ze("grl-graph-tabs"),activeKey:s||"graph",onChange:u=>r.openTab(u),tabBarExtraContent:n,items:[{closable:!1,key:"graph",label:S.jsx(Kp,{total:o?.length,icon:S.jsx(Qb,{}),name:"Graph",active:!s||s==="graph",onContextClick:u=>{r.closeTab("graph",u)}})},...o.map((u,l)=>{const c=wo[u.type];return{disabled:e,key:u.id,label:S.jsx(Kp,{onContextClick:f=>{r.closeTab(u.id,f)},icon:c?.icon,name:u?.name??u?.type,diffStatus:u?.diff?.status,color:c?.color,index:l,active:u.id===s,total:o?.length,onClose:()=>r.closeTab(u.id)}),closable:!0}})]})})},Kp=({total:e=0,index:n=-1,icon:r,name:o,active:s,diffStatus:u,color:l=Co.Blue,onClose:c,onContextClick:f})=>{const h=[e>0&&n!==-1&&{key:"close",label:"Close",onClick:()=>f?.("close")},e>0&&n!==-1&&{key:"close-all",label:"Close all Tabs",onClick:()=>f?.("close-all")},e>0&&n!==-1&&{key:"close-other",label:"Close other Tabs",onClick:()=>f?.("close-other")},e>0&&n+1<e&&{key:"close-right",label:"Close Tabs to the right",onClick:()=>f?.("close-right")},e>0&&n>0&&n>0&&{key:"close-left",label:"Close Tabs to the left",onClick:()=>f?.("close-left")}].filter(p=>!!p);return S.jsx(Js,{menu:{items:h},trigger:["contextMenu"],children:S.jsxs("div",{className:"grl-graph-tabs__tab","data-active":s,children:[S.jsx(D0,{size:"small",shape:"square",style:{background:l,fontSize:11,width:18,height:18,lineHeight:"18px",borderRadius:3},icon:r}),o,S.jsx(t0,{status:u,style:{fontSize:16}}),c&&S.jsx(it,{className:"grl-graph-tabs__closeIcon",type:"text",size:"small",style:{height:20,width:20,color:"black",borderRadius:"50%",lineHeight:0},icon:S.jsx(vo,{style:{fontSize:10}}),onClick:p=>{p.stopPropagation(),c?.()}})]})})};Cm.__docgenInfo={description:"",methods:[],displayName:"GraphTabs",props:{disabled:{required:!1,tsType:{name:"boolean"},description:""},tabBarExtraContent:{required:!1,tsType:{name:"TabsProps['tabBarExtraContent']",raw:"TabsProps['tabBarExtraContent']"},description:""}}};const Em=G.memo(T.forwardRef(function({reactFlowProOptions:n,tabBarExtraContent:r},o){const[s,u]=T.useState(!1),l=st(({decisionGraph:c,activeTab:f})=>(c?.nodes??[]).some(h=>h.id===f));return S.jsxs(S.Fragment,{children:[S.jsx(bm,{}),S.jsxs("div",{className:"grl-dg__graph",children:[S.jsx(Cm,{disabled:s,tabBarExtraContent:r}),S.jsx(wm,{ref:o,className:Ze([!l&&"active"]),reactFlowProOptions:n,onDisableTabs:u}),S.jsx(m4,{})]}),S.jsx(vm,{})]})})),m4=G.memo(()=>{const{openNodes:e,activeNodeId:n,components:r}=st(({decisionGraph:u,openTabs:l,activeTab:c,components:f})=>{const h=(u?.nodes??[]).find(g=>g.id===c)?.id;return{openNodes:(u?.nodes??[]).filter(g=>l.includes(g.id)).map(({id:g,type:m})=>({id:g,type:m})),activeNodeId:h,components:f}}),o=T.useRef(null),s=T.useMemo(()=>uw(cw,void 0,{rootElement:o.current}),[o.current]);return S.jsx("div",{style:{display:"contents"},ref:o,children:e.map(u=>S.jsx("div",{className:Ze(["tab-content",n===u?.id&&"active"]),children:He(u?.type).with(lt.DecisionTable,()=>Zg?.renderTab?.({id:u?.id,manager:s})).with(lt.Function,()=>em?.renderTab?.({id:u?.id,manager:s})).with(lt.Expression,()=>Jg?.renderTab?.({id:u?.id,manager:s})).with(lt.Input,()=>mm?.renderTab?.({id:u?.id,manager:s})).with(lt.Output,()=>ym?.renderTab?.({id:u?.id,manager:s})).otherwise(()=>{const l=r.find(c=>c.type===u.type);return l?l?.renderTab?.({id:u.id,manager:s}):null})},u?.id))})});Em.__docgenInfo={description:"",methods:[],displayName:"DecisionGraphWrapper"};const y4=T.forwardRef(({manager:e,reactFlowProOptions:n,tabBarExtraContent:r,...o},s)=>S.jsx("div",{className:"grl-dg",children:S.jsx(Af,{children:S.jsxs(Wg,{children:[S.jsx(Em,{ref:s,reactFlowProOptions:n,tabBarExtraContent:r}),S.jsx(LF,{}),S.jsx(v6,{...o})]})})}));y4.__docgenInfo={description:"",methods:[],displayName:"DecisionGraph"};const Mf=({value:e,onChange:n,readOnly:r})=>{const{token:o}=Ql.useToken();return S.jsx(tf,{loading:S.jsx(cs,{size:"large"}),language:"javascript",value:e,onChange:n,theme:o.mode==="dark"?"vs-dark":"light",height:"100%",onMount:(s,u)=>{u.languages.typescript.javascriptDefaults.setDiagnosticsOptions({noSyntaxValidation:!0}),u.languages.typescript.javascriptDefaults.setModeConfiguration({codeActions:!1,inlayHints:!1}),s.addAction({id:"copy-json",label:"Copy JSON",contextMenuGroupId:"utils",run:async l=>{try{await Fu(JSON.stringify(Ii.parse(l.getValue()))),Mt.success("Copied to clipboard!")}catch{Mt.error("Failed to copy to clipboard.")}}}),s.addAction({id:"format",label:"Format",contextMenuGroupId:"utils",precondition:"!editorReadonly",run:l=>{const c=JSON.stringify(Ii.parse(l.getValue()),null,2);l.setValue(c)}})},options:{readOnly:r,automaticLayout:!0,minimap:{enabled:!1},fontSize:12,fontFamily:"var(--mono-font-family)",tabSize:2,lineDecorationsWidth:2,find:{addExtraSpaceOnTop:!1,seedSearchStringFromSelection:"never"},scrollbar:{verticalSliderSize:4,verticalScrollbarSize:4,horizontalScrollbarSize:4,horizontalSliderSize:4},lineNumbersMinChars:3}})};Mf.__docgenInfo={description:"",methods:[],displayName:"SimulatorEditor",props:{value:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"value"}],return:{name:"void"}}},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""}}};const v4="Your business context that enters through the Request node, starting the decision process. Supply JSON or JSON5 format.",Am=({onChange:e,hasInputNode:n,loading:r,onRun:o,defaultRequest:s})=>{const[u,l]=T.useState(s),{stateStore:c,actions:f}=bo();return T.useEffect(()=>{if(!rs())return;const{decisionGraph:h}=c.getState(),p=h.nodes.find(g=>g.type==="inputNode");if(p)try{const g=u?Ii.parse(u):"Any";f.setNodeType(p.id,ct.InferredOutput,new kn(g))}catch{}},[u]),S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request",children:[S.jsx(gr,{title:v4,children:S.jsxs(Gt.Text,{style:{fontSize:13,cursor:"help"},children:["Request",S.jsx(w0,{style:{fontSize:10,marginLeft:4,opacity:.5,verticalAlign:"text-top"}})]})}),S.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&S.jsx(gr,{title:n?void 0:"Request node is required to run the graph. Drag-and-drop it from the Components panel.",children:S.jsx(it,{size:"small",type:"primary",loading:r,icon:S.jsx(aC,{}),disabled:!n,onClick:()=>{try{const h=(u||"").trim().length===0?null:Ii.parse(u||"");o?.({graph:c.getState().decisionGraph,context:h})}catch{of.error({message:"Invalid format",description:"Unable to format request, invalid JSON format",placement:"top"})}},children:"Run"})})})]}),S.jsx("div",{className:"grl-dg__simulator__section__content",children:S.jsx(Mf,{value:u,onChange:h=>{l(h),e?.(h??"")}})})]})};Am.__docgenInfo={description:"",methods:[],displayName:"SimulatorRequestPanel",props:{defaultRequest:{required:!1,tsType:{name:"string"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}}},description:""},hasInputNode:{required:!1,tsType:{name:"boolean"},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onRun:{required:!1,tsType:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}}},description:""}}};var Sm=(e=>(e.Output="Output",e.Input="Input",e.Trace="Trace",e))(Sm||{});const D4=({defaultRequest:e,onChange:n,onRun:r,onClear:o,loading:s=!1,leftPanel:u=Am})=>{const[l,c]=Hu("simulation.search",""),[f,h]=Hu("simulation.segment","Output"),{actions:p}=bo(),{nodeTypes:g,simulate:m,hasInputNode:x}=st(({decisionGraph:D,simulate:E})=>({simulate:E,hasInputNode:D.nodes.some(R=>R.type===lt.Input),nodeTypes:(D.nodes??[]).reduce((R,N)=>({...R,[N.id]:N.type}),{})})),[b,_]=T.useState("graph"),C=T.useMemo(()=>m?"result"in m?Object.entries(m.result?.trace??{}).map(([D,E])=>({...E,nodeId:D})).filter(D=>![lt.Input].includes(g?.[D.nodeId])).filter(D=>D.name.toLowerCase().includes(l?.toLowerCase()??"")).sort((D,E)=>(D.order??0)-(E.order??0)):[]:[],[m,l]);return S.jsxs(c0,{className:"grl-dg__simulator",direction:"horizontal",autoSaveId:"jdm-editor:simulator:layout",children:[S.jsx(ul,{minSize:20,defaultSize:30,className:"grl-dg__simulator__section grl-dg__simulator__request",children:S.jsx(u,{defaultRequest:e,loading:s,hasInputNode:x,onRun:r,onChange:n})}),S.jsx(zh,{}),S.jsxs(ul,{minSize:20,maxSize:20,className:"grl-dg__simulator__section grl-dg__simulator__nodes",children:[S.jsxs("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--nodes",children:[S.jsx("input",{className:"grl-dg__simulator__search",type:"text",placeholder:"Search nodes...",value:l,onChange:D=>c(D.target.value)}),S.jsx("div",{className:"grl-dg__simulator__section__bar__actions",children:o&&S.jsx(gr,{title:"Clear",children:S.jsx(it,{size:"small",type:"text",icon:S.jsx($b,{}),onClick:()=>{o?.(),_("graph"),c("")}})})})]}),S.jsx("div",{className:"grl-dg__simulator__section__content",children:S.jsx(cs,{spinning:s,children:S.jsxs("div",{className:"grl-dg__simulator__nodes-list",children:[!m&&S.jsxs(Gt.Text,{type:"secondary",style:{textAlign:"center",marginTop:60,fontSize:13},children:["Ready to simulate!",S.jsx("br",{}),"Run a request to see the node trace in action.",S.jsx("br",{}),S.jsx(Gt.Link,{href:"https://docs.gorules.io/docs/simulator",target:"_blank",style:{fontSize:13,marginTop:4,display:"inline-block"},children:"Learn more"})]}),"graph".includes(l?.toLowerCase()??"")&&m&&S.jsxs("div",{className:Ze("grl-dg__simulator__nodes-list__node",b==="graph"&&"active"),onClick:()=>_("graph"),children:[S.jsxs(Gt.Text,{"data-role":"name",ellipsis:!0,children:[S.jsx(Qp,{status:He(m).with({error:Le.nonNullable},()=>"error").with({result:Le.nonNullable},()=>"success").otherwise(()=>"not-run")}),"Graph"]}),S.jsx(Gt.Text,{type:"secondary","data-role":"performance",children:He(m).with({result:Le._},({result:D})=>D?.performance).otherwise(()=>{})})]}),C.map(D=>S.jsxs("div",{className:Ze("grl-dg__simulator__nodes-list__node",D.nodeId===b&&"active"),onClick:()=>_(D.nodeId),onDoubleClick:()=>p.goToNode(D.nodeId),children:[S.jsxs(Gt.Text,{"data-role":"name",ellipsis:{tooltip:D.name},children:[S.jsx(Qp,{status:D.nodeId===m?.error?.data?.nodeId?"error":"success"}),D.name]}),S.jsx(Gt.Text,{type:"secondary","data-role":"performance",children:D.performance})]},D.nodeId))]})})})]}),S.jsx(zh,{}),S.jsxs(ul,{minSize:30,defaultSize:50,className:"grl-dg__simulator__section grl-dg__simulator__response",children:[S.jsx("div",{className:"grl-dg__simulator__section__bar grl-dg__simulator__section__bar--response",children:S.jsx(Jl,{rootClassName:"grl-inline-tabs",size:"small",style:{width:"100%"},onChange:D=>h(D),items:Object.values(Sm).map(D=>({key:D,label:D})),tabBarExtraContent:S.jsx(gr,{title:"Close panel",children:S.jsx(it,{type:"text",icon:S.jsx(vo,{style:{fontSize:12}}),onClick:()=>p.setActivePanel(void 0)})})})}),S.jsx("div",{className:"grl-dg__simulator__section__content",children:S.jsx(Mf,{readOnly:!0,value:He(m).with({result:Le._},({result:D})=>He(b).with("graph",()=>Jp({traceData:D?.trace,output:D?.result},f??"Output")).otherwise(()=>Jp(D?.trace[b],f??"Output"))).otherwise(()=>"")})})]})]})},Jp=(e,n)=>{const r=He([n,e]).with(["Output",{output:Le._}],([,{output:o}])=>o).with(["Input",{input:Le._}],([,{input:o}])=>o).with(["Trace",{trace:Le._}],([,{trace:o}])=>o).with(["Trace",{traceData:Le._}],([,{traceData:o}])=>o).otherwise(()=>({}));return Ii.stringify(r,void 0,2)},Qp=({status:e})=>e==="not-run"?null:e==="success"?S.jsx(Mb,{twoToneColor:["var(--grl-color-success)","var(--grl-color-success-bg)"],style:{marginRight:6,fontSize:12,opacity:.5}}):S.jsx(Lb,{twoToneColor:["var(--grl-color-error)","var(--grl-color-error-bg)"],style:{marginRight:5,fontSize:12}});D4.__docgenInfo={description:"",methods:[],displayName:"GraphSimulator",props:{onClear:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},defaultRequest:{required:!1,tsType:{name:"string",raw:"SimulatorRequestPanelProps['defaultRequest']"},description:""},onChange:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onChange']"},description:""},onRun:{required:!1,tsType:{name:"signature",raw:"SimulatorRequestPanelProps['onRun']"},description:""},leftPanel:{required:!1,tsType:{name:"ReactFC",raw:"React.FC<SimulatorRequestPanelProps>",elements:[{name:"signature",type:"object",raw:`{
  defaultRequest?: string;
  onChange?: (contextJson: string) => void;
  hasInputNode?: boolean;
  loading?: boolean;
  onRun?: (payload: { graph: DecisionGraphType; context: unknown }) => void;
}`,signature:{properties:[{key:"defaultRequest",value:{name:"string",required:!1}},{key:"onChange",value:{name:"signature",type:"function",raw:"(contextJson: string) => void",signature:{arguments:[{type:{name:"string"},name:"contextJson"}],return:{name:"void"}},required:!1}},{key:"hasInputNode",value:{name:"boolean",required:!1}},{key:"loading",value:{name:"boolean",required:!1}},{key:"onRun",value:{name:"signature",type:"function",raw:"(payload: { graph: DecisionGraphType; context: unknown }) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ graph: DecisionGraphType; context: unknown }",signature:{properties:[{key:"graph",value:{name:"signature",type:"object",raw:`{
  nodes: DecisionNode[];
  edges: DecisionEdge[];
}`,signature:{properties:[{key:"nodes",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name: string;
  description?: string;
  type?: NodeSchema['type'] | string;
  content?: T;
  position: Position;
  [privateSymbol]?: {
    dimensions?: { height?: number; width?: number };
    selected?: boolean;
  };
  _diff?: {
    status: DiffStatus;
    fields?: Record<string, DiffMetadata>;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"description",value:{name:"string",required:!1}},{key:"type",value:{name:"union",raw:"NodeSchema['type'] | string",elements:[{name:"z.infer['type']",raw:"NodeSchema['type']"},{name:"string"}],required:!1}},{key:"content",value:{name:"T",required:!1}},{key:"position",value:{name:"signature",type:"object",raw:`{
  x: number;
  y: number;
}`,signature:{properties:[{key:"x",value:{name:"number",required:!0}},{key:"y",value:{name:"number",required:!0}}]},required:!0}},{key:"@computed#privateSymbol",value:{name:"signature",type:"object",raw:`{
  dimensions?: { height?: number; width?: number };
  selected?: boolean;
}`,signature:{properties:[{key:"dimensions",value:{name:"signature",type:"object",raw:"{ height?: number; width?: number }",signature:{properties:[{key:"height",value:{name:"number",required:!1}},{key:"width",value:{name:"number",required:!1}}]},required:!1}},{key:"selected",value:{name:"boolean",required:!1}}]},required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"signature",type:"object",raw:`{
  status?: DiffStatus;
  previousValue?: T;
  previousIndex?: number;
  currentIndex?: number;
  fields?: Record<string, DiffMetadata>;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}},{key:"previousValue",value:{name:"T",required:!1}},{key:"previousIndex",value:{name:"number",required:!1}},{key:"currentIndex",value:{name:"number",required:!1}},{key:"fields",value:{name:"Record",elements:[{name:"string"},{name:"DiffMetadata"}],raw:"Record<string, DiffMetadata>",required:!1}}]}}],raw:"Record<string, DiffMetadata>",required:!1}}]},required:!1}}]}}],raw:"DecisionNode[]",required:!0}},{key:"edges",value:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  id: string;
  name?: string;
  sourceId: string;
  targetId: string;
  sourceHandle?: string | null;
  targetHandle?: string | null;
  type?: string;
  _diff?: {
    status: DiffStatus;
  };
}`,signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!1}},{key:"sourceId",value:{name:"string",required:!0}},{key:"targetId",value:{name:"string",required:!0}},{key:"sourceHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"targetHandle",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"type",value:{name:"string",required:!1}},{key:"_diff",value:{name:"signature",type:"object",raw:`{
  status: DiffStatus;
}`,signature:{properties:[{key:"status",value:{name:"union",raw:"'added' | 'removed' | 'modified' | 'unchanged' | 'moved'",elements:[{name:"literal",value:"'added'"},{name:"literal",value:"'removed'"},{name:"literal",value:"'modified'"},{name:"literal",value:"'unchanged'"},{name:"literal",value:"'moved'"}],required:!0}}]},required:!1}}]}}],raw:"DecisionEdge[]",required:!0}}]},required:!0}},{key:"context",value:{name:"unknown",required:!0}}]}},name:"payload"}],return:{name:"void"}},required:!1}}]}}]},description:"",defaultValue:{value:`({
  onChange,
  hasInputNode,
  loading,
  onRun,
  defaultRequest,
}) => {
  const [requestValue, setRequestValue] = useState(defaultRequest);
  const { stateStore, actions } = useDecisionGraphRaw();

  useEffect(() => {
    if (!isWasmAvailable()) {
      return;
    }

    const { decisionGraph } = stateStore.getState();
    const requestNode = decisionGraph.nodes.find((n) => n.type === 'inputNode');
    if (!requestNode) {
      return;
    }

    try {
      const value = requestValue ? json5.parse(requestValue) : 'Any';
      actions.setNodeType(requestNode.id, NodeTypeKind.InferredOutput, new VariableType(value));
    } catch {
      // Skip
    }
  }, [requestValue]);

  return (
    <>
      <div className={'grl-dg__simulator__section__bar grl-dg__simulator__section__bar--request'}>
        <Tooltip title={requestTooltip}>
          <Typography.Text style={{ fontSize: 13, cursor: 'help' }}>
            Request
            <InfoCircleOutlined style={{ fontSize: 10, marginLeft: 4, opacity: 0.5, verticalAlign: 'text-top' }} />
          </Typography.Text>
        </Tooltip>
        <div className={'grl-dg__simulator__section__bar__actions'}>
          {onRun && (
            <Tooltip
              title={
                !hasInputNode
                  ? 'Request node is required to run the graph. Drag-and-drop it from the Components panel.'
                  : undefined
              }
            >
              <Button
                size={'small'}
                type={'primary'}
                loading={loading}
                icon={<PlayCircleOutlined />}
                disabled={!hasInputNode}
                onClick={() => {
                  try {
                    const parsed = (requestValue || '').trim().length === 0 ? null : json5.parse(requestValue || '');
                    onRun?.({ graph: stateStore.getState().decisionGraph, context: parsed });
                  } catch {
                    notification.error({
                      message: 'Invalid format',
                      description: 'Unable to format request, invalid JSON format',
                      placement: 'top',
                    });
                  }
                }}
              >
                Run
              </Button>
            </Tooltip>
          )}
        </div>
      </div>
      <div className={'grl-dg__simulator__section__content'}>
        <SimulatorEditor
          value={requestValue}
          onChange={(text) => {
            setRequestValue(text);
            onChange?.(text ?? '');
          }}
        />
      </div>
    </>
  );
}`,computed:!1}}}};export{y4 as D,zi as G,aC as R,qt as _,st as a,D4 as b,Zg as d,Jg as e,em as f,mm as i,Ii as l,ym as o,PF as s,zt as u};
